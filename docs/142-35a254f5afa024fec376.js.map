{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e2","f","TypeError","err","normalCompletion","didErr","step","next","_e3","return","arr","len","arr2","w","_this","this","_queryEngine","_customParameters","_snapshotFeatures","_ref","mark","_callee","t","r","a","_iterator","_step","_s","_iterator2","_step2","_s2","_e","wrap","_context","prev","objectIdField","_getFeatureUrl","_featureType","typeName","_getFeatureOutputFormat","customParameters","dateFields","fieldsIndex","map","signal","sent","geometryType","hasZ","spatialReference","geometry","_fieldsIndex","attributes","objectId","abrupt","stop","_x","apply","arguments","_checkProjection2","_waitSnapshotComplete2","_refresh","_querySnapping","_queryExtent","_queryObjectIds","_queryFeatureCount","_queryFeatures","_applyEdits","_load","key","destroy","_callee2","u","p","y","l","c","_context2","getFeatureUrl","getFeatureOutputFormat","fields","featureType","_checkProjection","hasM","timeInfo","featureStore","addMany","extent","fullExtent","_x2","_x3","_callee3","_context3","_callee4","_args4","_context4","undefined","_waitSnapshotComplete","executeQuery","_callee5","_args5","_context5","executeQueryForCount","_callee6","_args6","_context6","executeQueryForIds","_callee7","_args7","_context7","executeQueryForExtent","_callee8","_args8","_context8","executeQueryForSnapping","_x4","_callee9","_this2","_context9","_snapshotTask","abort","promise","then","clear","getLogger","error","_callee10","_context10","finished","t0","_callee11","_context11","_x5"],"mappings":"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","file":"142-35a254f5afa024fec376.js","sourcesContent":["import _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport t from \"../../../core/Logger.js\";\nimport { unwrap as r } from \"../../../core/maybe.js\";\nimport { throwIfAborted as s, createTask as a, isAbortError as i } from \"../../../core/promiseUtils.js\";\nimport { equals as n, WGS84 as o } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { convertFromGeometry as u, convertToGeometry as p } from \"../featureConversionUtils.js\";\nimport h from \"../data/FeatureStore.js\";\nimport { project as y, checkProjectionSupport as l } from \"../data/projectionSupport.js\";\nimport m from \"../data/QueryEngine.js\";\nimport { validateGeoJSON as c, createOptimizedFeatures as g } from \"./geojson/geojson.js\";\nimport { mixAttributes as _ } from \"./support/sourceUtils.js\";\nimport { getFeature as f } from \"../../ogc/wfsUtils.js\";\nimport d from \"../../support/FieldsIndex.js\";\n\nvar w = /*#__PURE__*/function () {\n  function w() {\n    var _this = this;\n\n    _classCallCheck(this, w);\n\n    this._queryEngine = null, this._customParameters = null, this._snapshotFeatures = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var t, r, a, _iterator, _step, _s, i, _iterator2, _step2, _s2, _e;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                t = _this._queryEngine.objectIdField;\n                _context.next = 3;\n                return f(_this._getFeatureUrl, _this._featureType.typeName, _this._getFeatureOutputFormat, {\n                  customParameters: _this._customParameters,\n                  dateFields: _this._queryEngine.fieldsIndex.dateFields.map(function (e) {\n                    return e.name;\n                  }),\n                  signal: e\n                });\n\n              case 3:\n                r = _context.sent;\n                _context.next = 6;\n                return c(r);\n\n              case 6:\n                s(e);\n                a = g(r, {\n                  geometryType: _this._queryEngine.geometryType,\n                  hasZ: !1,\n                  objectIdField: t\n                });\n\n                if (!n(_this._queryEngine.spatialReference, o)) {\n                  _iterator = _createForOfIteratorHelper(a);\n\n                  try {\n                    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                      _s = _step.value;\n                      _s.geometry && (_s.geometry = u(y(p(_s.geometry, _this._queryEngine.geometryType, !1, !1), o, _this._queryEngine.spatialReference)));\n                    }\n                  } catch (err) {\n                    _iterator.e(err);\n                  } finally {\n                    _iterator.f();\n                  }\n                }\n\n                i = 1;\n                _iterator2 = _createForOfIteratorHelper(a);\n\n                try {\n                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                    _s2 = _step2.value;\n                    _e = {};\n                    _(_this._fieldsIndex, _e, _s2.attributes, null, !0), _s2.attributes = _e, null == _s2.attributes[t] && (_s2.objectId = _s2.attributes[t] = i++);\n                  }\n                } catch (err) {\n                  _iterator2.e(err);\n                } finally {\n                  _iterator2.f();\n                }\n\n                return _context.abrupt(\"return\", a);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  _createClass(w, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var e;\n      null == (e = this._queryEngine) || e.destroy(), this._queryEngine = null;\n    }\n  }, {\n    key: \"load\",\n    value: function () {\n      var _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e, t) {\n        var a, i, n, o, u, p, y, l, c;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                a = e.getFeatureUrl, i = e.getFeatureOutputFormat, n = e.spatialReference, o = e.fields, u = e.geometryType, p = e.featureType, y = e.objectIdField, l = e.customParameters;\n                this._featureType = p;\n                this._customParameters = l;\n                this._getFeatureUrl = a;\n                this._getFeatureOutputFormat = i;\n                this._fieldsIndex = new d(o);\n                _context2.next = 8;\n                return this._checkProjection(n);\n\n              case 8:\n                s(t);\n                this._queryEngine = new m({\n                  fields: o,\n                  geometryType: u,\n                  hasM: !1,\n                  hasZ: !1,\n                  objectIdField: y,\n                  spatialReference: n,\n                  timeInfo: null,\n                  featureStore: new h({\n                    geometryType: u,\n                    hasM: !1,\n                    hasZ: !1\n                  })\n                });\n                _context2.next = 12;\n                return this._snapshotFeatures(r(t.signal));\n\n              case 12:\n                c = _context2.sent;\n                return _context2.abrupt(\"return\", (this._queryEngine.featureStore.addMany(c), {\n                  extent: this._queryEngine.fullExtent\n                }));\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function load(_x2, _x3) {\n        return _load.apply(this, arguments);\n      }\n\n      return load;\n    }()\n  }, {\n    key: \"applyEdits\",\n    value: function () {\n      var _applyEdits = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                throw new e(\"wfs-source:editing-not-supported\", \"applyEdits() is not supported on WFSLayer\");\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function applyEdits() {\n        return _applyEdits.apply(this, arguments);\n      }\n\n      return applyEdits;\n    }()\n  }, {\n    key: \"queryFeatures\",\n    value: function () {\n      var _queryFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var e,\n            t,\n            _args4 = arguments;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                e = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {};\n                t = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : {};\n                _context4.next = 4;\n                return this._waitSnapshotComplete();\n\n              case 4:\n                return _context4.abrupt(\"return\", this._queryEngine.executeQuery(e, t.signal));\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function queryFeatures() {\n        return _queryFeatures.apply(this, arguments);\n      }\n\n      return queryFeatures;\n    }()\n  }, {\n    key: \"queryFeatureCount\",\n    value: function () {\n      var _queryFeatureCount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var e,\n            t,\n            _args5 = arguments;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                e = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {};\n                t = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : {};\n                _context5.next = 4;\n                return this._waitSnapshotComplete();\n\n              case 4:\n                return _context5.abrupt(\"return\", this._queryEngine.executeQueryForCount(e, t.signal));\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function queryFeatureCount() {\n        return _queryFeatureCount.apply(this, arguments);\n      }\n\n      return queryFeatureCount;\n    }()\n  }, {\n    key: \"queryObjectIds\",\n    value: function () {\n      var _queryObjectIds = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var e,\n            t,\n            _args6 = arguments;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                e = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : {};\n                t = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : {};\n                _context6.next = 4;\n                return this._waitSnapshotComplete();\n\n              case 4:\n                return _context6.abrupt(\"return\", this._queryEngine.executeQueryForIds(e, t.signal));\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function queryObjectIds() {\n        return _queryObjectIds.apply(this, arguments);\n      }\n\n      return queryObjectIds;\n    }()\n  }, {\n    key: \"queryExtent\",\n    value: function () {\n      var _queryExtent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var e,\n            t,\n            _args7 = arguments;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                e = _args7.length > 0 && _args7[0] !== undefined ? _args7[0] : {};\n                t = _args7.length > 1 && _args7[1] !== undefined ? _args7[1] : {};\n                _context7.next = 4;\n                return this._waitSnapshotComplete();\n\n              case 4:\n                return _context7.abrupt(\"return\", this._queryEngine.executeQueryForExtent(e, t.signal));\n\n              case 5:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function queryExtent() {\n        return _queryExtent.apply(this, arguments);\n      }\n\n      return queryExtent;\n    }()\n  }, {\n    key: \"querySnapping\",\n    value: function () {\n      var _querySnapping = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(e) {\n        var t,\n            _args8 = arguments;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                t = _args8.length > 1 && _args8[1] !== undefined ? _args8[1] : {};\n                _context8.next = 3;\n                return this._waitSnapshotComplete();\n\n              case 3:\n                return _context8.abrupt(\"return\", this._queryEngine.executeQueryForSnapping(e, t.signal));\n\n              case 4:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function querySnapping(_x4) {\n        return _querySnapping.apply(this, arguments);\n      }\n\n      return querySnapping;\n    }()\n  }, {\n    key: \"setCustomParameters\",\n    value: function setCustomParameters(e) {\n      this._customParameters = e;\n    }\n  }, {\n    key: \"refresh\",\n    value: function () {\n      var _refresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n        var _this2 = this;\n\n        var r;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                null == (r = this._snapshotTask) || r.abort();\n                this._snapshotTask = a(this._snapshotFeatures);\n\n                this._snapshotTask.promise.then(function (e) {\n                  _this2._queryEngine.featureStore.clear(), e && _this2._queryEngine.featureStore.addMany(e);\n                }, function (r) {\n                  _this2._queryEngine.featureStore.clear(), i(r) || t.getLogger(\"esri.layers.WFSLayer\").error(new e(\"wfs-layer:getfeature-error\", \"An error occurred during the GetFeature request\", {\n                    error: r\n                  }));\n                });\n\n                _context9.next = 5;\n                return this._waitSnapshotComplete();\n\n              case 5:\n                return _context9.abrupt(\"return\", {\n                  extent: this._queryEngine.fullExtent\n                });\n\n              case 6:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function refresh() {\n        return _refresh.apply(this, arguments);\n      }\n\n      return refresh;\n    }()\n  }, {\n    key: \"_waitSnapshotComplete\",\n    value: function () {\n      var _waitSnapshotComplete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                if (!(this._snapshotTask && !this._snapshotTask.finished)) {\n                  _context10.next = 9;\n                  break;\n                }\n\n                _context10.prev = 1;\n                _context10.next = 4;\n                return this._snapshotTask.promise;\n\n              case 4:\n                _context10.next = 8;\n                break;\n\n              case 6:\n                _context10.prev = 6;\n                _context10.t0 = _context10[\"catch\"](1);\n\n              case 8:\n                return _context10.abrupt(\"return\", this._waitSnapshotComplete());\n\n              case 9:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this, [[1, 6]]);\n      }));\n\n      function _waitSnapshotComplete() {\n        return _waitSnapshotComplete2.apply(this, arguments);\n      }\n\n      return _waitSnapshotComplete;\n    }()\n  }, {\n    key: \"_checkProjection\",\n    value: function () {\n      var _checkProjection2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(t) {\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.prev = 0;\n                _context11.next = 3;\n                return l(o, t);\n\n              case 3:\n                _context11.next = 8;\n                break;\n\n              case 5:\n                _context11.prev = 5;\n                _context11.t0 = _context11[\"catch\"](0);\n                throw new e(\"unsupported-projection\", \"Projection not supported\", {\n                  spatialReference: t\n                });\n\n              case 8:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, null, [[0, 5]]);\n      }));\n\n      function _checkProjection(_x5) {\n        return _checkProjection2.apply(this, arguments);\n      }\n\n      return _checkProjection;\n    }()\n  }]);\n\n  return w;\n}();\n\nexport default w;"],"sourceRoot":""}