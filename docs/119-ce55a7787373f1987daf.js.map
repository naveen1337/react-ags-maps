{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/identity/IdentityForm.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/focus-trap/dist/focus-trap.esm.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/tabbable/dist/index.esm.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/identity/IdentityModal.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/identity/OAuthCredential.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/identity/OAuthInfo.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/identity/ServerInfo.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/identity/IdentityManagerBase.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/identity/IdentityManager.js"],"names":["_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","_o","a","_super","s","_this","_usernameInputNode","_passwordInputNode","messages","signingIn","server","resource","error","oAuthPrompt","key","value","t","o","n","_a","d","class","oAuthInfo","info","test","concat","lblItem","c","lblUser","required","autocomplete","spellcheck","type","bind","afterCreate","m","lblPwd","h","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","g","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","activeFocusDelay","candidateSelectors","candidateSelector","join","matches","Element","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","filter","candidates","Array","slice","querySelectorAll","unshift","getTabindex","node","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","isContentEditable","nodeName","tabIndex","sortOrderedTabbables","b","documentOrder","isInput","tagName","isNonTabbableRadio","isRadio","name","radioSet","radioScope","form","ownerDocument","queryRadios","window","CSS","escape","err","console","message","checked","nodes","i","length","getCheckedRadio","isTabbableRadio","isNodeMatchingSelectorFocusable","options","isHiddenInput","displayCheck","getComputedStyle","visibility","nodeUnderDetails","parentElement","_node$getBoundingClie","getBoundingClientRect","width","height","display","isHidden","children","some","child","isDetailsWithSummary","isNodeMatchingSelectorTabbable","focusableCandidateSelector","isFocusable","Error","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","push","_defineProperty","obj","defineProperty","configurable","writable","trapQueue","activeFocusTraps","activateTrap","trap","activeTrap","pause","trapIndex","indexOf","splice","deactivateTrap","unpause","delay","fn","setTimeout","findIndex","arr","idx","every","valueOrHandler","_len","params","_key","elements","userOptions","doc","document","config","target","source","forEach","getOwnPropertyDescriptors","defineProperties","_objectSpread2","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","getOption","configOverrideOptions","optionName","configOptionName","undefined","containersContain","element","container","contains","getNodeForOption","optionValue","querySelector","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","map","regularTabbables","orderedTabbables","tabbableNodes","candidate","candidateTabindex","sort","lastTabbableNode","group","tryFocus","focus","preventScroll","toLowerCase","select","isSelectableInput","getReturnFocusNode","previousActiveElement","checkPointerDown","clickOutsideDeactivates","deactivate","returnFocus","allowOutsideClick","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkKey","keyCode","isEscapeEvent","isTabEvent","destinationNode","containerIndex","_ref","shiftKey","startOfGroupIndex","_ref2","destinationGroupIndex","lastOfGroupIndex","_ref3","_destinationGroupIndex","checkTab","checkClick","addListeners","addEventListener","capture","passive","removeListeners","removeEventListener","activate","activateOptions","onActivate","onPostActivate","checkCanFocusTrap","finishActivation","then","deactivateOptions","clearTimeout","onDeactivate","onPostDeactivate","checkCanReturnFocus","finishDeactivation","updateContainerElements","containerElements","elementsAsArray","_i","l","createElement","content","open","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","_n","id","title","r","close","_l","p","u","role","_createFocusTrap","_renderContent","_focusTrap","_this2","requestAnimationFrame","initialFocus","cancelAnimationFrame","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","_s","storage","appId","expires","ssl","token","userId","_init","_s8","Date","now","minTimeUntilExpiration","_s3","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","_s4","_t","replace","_s9","FormData","append","navigator","sendBeacon","_e","XMLHttpRequest","send","_oAuthCred","_s6","_s7","getItem","parse","declaredClass","_p","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","fromJSON","toJSON","json","write","_r","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","_objectSpread","_createForOfIteratorHelper","allowArrayLike","it","Symbol","iterator","isArray","minLen","_arrayLikeToArray","toString","from","_unsupportedIterableToArray","F","done","_e17","f","TypeError","normalCompletion","didErr","step","next","_e18","return","len","arr2","R","host","P","C","D","localStorage","sessionStorage","_unused","q","_portalConfig","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","tokenValidity","normalizeWebTierAuth","_appOrigin","origin","location","_appUrlObj","href","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","_pageShowHandler","findServerInfo","_step","_iterator","findOAuthInfo","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","assign","scope","resources","emitTokenChange","refreshServerTokens","_this3","_e2","_e3","registerOAuthInfos","_step2","_iterator2","_s2","_hasSameServerInstance","_step3","_iterator3","_step4","_iterator4","_step5","_iterator5","_i2","_getIdenticalSvcIdx","prompt","signal","abort","reject","promise","_","_isAdminResource","findCredential","destroy","resolve","_restInfoPms","_selfReq","selfDfd","_getPortalSelf","_enqueue","_isRESTService","isAdmin","serverUrl","customParameters","scheme","uri","port","v","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","data","validity","checkAppAccess","credential","_this4","getCredential","_doPortalSignIn","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","_e4","_t2","error_description","_e5","sinfo_","_t3","oinfo_","_i3","_n2","access_token","Number","expires_in","persist","save","_oAuthRedirectFunc","_protocolFunc","_this5","getResourceName","on","generateToken","_this6","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","_this7","_postMessageAuthHandle","endsWith","postMessage","hash","_t4","_s5","hasOwnProperty","_unused2","persisted","isBusy","_e6","_errbackFunc","_this8","_addResource","_removeResource","_t5","_step6","_iterator6","_isIdProvider","_isPortalDomain","String","search","substr","_normalizeAGOLorgDomain","proxyUrl","path","_getSuffix","_i4","_e7","_this9","restBaseUrl","_r2","_r3","_i5","_isIdenticalService","_this10","_i6","adminUrl","_t6","_getOrigin","headers","Promise","allSSL","portalMode","supportsOAuth","startsWith","trim","resourceUrl","serverInfo","options_","admin_","refresh_","_doSignIn","_this11","_t7","creationTime","_s10","shift","_r8","_findOAuthInfo","parent","_r4","_r5","_e8","_t8","isValid","_pendingDfd","_exchangeToken","_e9","oAuthState","_r6","oAuthSignIn","_getPlatformSelf","_checkProtocol","_r7","signIn","_step7","_iterator7","_e10","_i7","_e11","_e12","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","_this12","_e13","accountId","redirect_uri","_t9","clone","urlKey","top","_this13","response_type","force_login","prepopulatedusername","redirectToUserOrgUrl","_e14","setInterval","_e15","_t10","setOAuthResponseHash","detail","_e16","authorizeParams","authorizeUrl","_n$EventedAccessor","j","_super2","_this14","tokenRefreshBuffer","_this15","_t11","_enqueued","refreshToken","_this16","_refreshTimer","_startRefreshTimer","Math","pow","EventedAccessor"],"mappings":"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","file":"119-ce55a7787373f1987daf.js","sourcesContent":["import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as s } from \"../chunks/tslib.es6.js\";\nimport { property as e } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/Logger.js\";\nimport { subclass as t } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { substitute as r } from \"../intl/substitute.js\";\nimport o from \"../widgets/Widget.js\";\nimport { storeNode as i } from \"../widgets/support/widgetUtils.js\";\nimport { messageBundle as n } from \"../widgets/support/decorators/messageBundle.js\";\nimport { tsx as u } from \"../widgets/support/jsxFactory.js\";\nvar l = {\n  base: \"esri-identity-form\",\n  group: \"esri-identity-form__group\",\n  label: \"esri-identity-form__label\",\n  footer: \"esri-identity-form__footer\",\n  esriInput: \"esri-input\",\n  esriButton: \"esri-button\",\n  esriButtonSecondary: \"esri-button--secondary\"\n},\n    p = \"ArcGIS Online\";\n\nvar a = /*#__PURE__*/function (_o) {\n  _inherits(a, _o);\n\n  var _super = _createSuper(a);\n\n  function a(s, e) {\n    var _this;\n\n    _classCallCheck(this, a);\n\n    _this = _super.call(this, s, e), _this._usernameInputNode = null, _this._passwordInputNode = null, _this.messages = null, _this.signingIn = !1, _this.server = null, _this.resource = null, _this.error = null, _this.oAuthPrompt = !1;\n    return _this;\n  }\n\n  _createClass(a, [{\n    key: \"render\",\n    value: function render() {\n      var s = this.error,\n          e = this.server,\n          t = this.resource,\n          o = this.signingIn,\n          n = this.oAuthPrompt,\n          _a = this.messages,\n          d = u(\"div\", {\n        class: l.group\n      }, r(n ? _a.oAuthInfo : _a.info, {\n        server: /\\.arcgis\\.com/i.test(e) ? p : e,\n        resource: \"(\".concat(t || _a.lblItem, \")\")\n      })),\n          c = n ? null : u(\"div\", {\n        class: l.group,\n        key: \"username\"\n      }, u(\"label\", {\n        class: l.label\n      }, _a.lblUser, u(\"input\", {\n        value: \"\",\n        required: !0,\n        autocomplete: \"off\",\n        spellcheck: !1,\n        type: \"text\",\n        bind: this,\n        afterCreate: i,\n        \"data-node-ref\": \"_usernameInputNode\",\n        class: l.esriInput\n      }))),\n          m = n ? null : u(\"div\", {\n        class: l.group,\n        key: \"password\"\n      }, u(\"label\", {\n        class: l.label\n      }, _a.lblPwd, u(\"input\", {\n        value: \"\",\n        required: !0,\n        type: \"password\",\n        bind: this,\n        afterCreate: i,\n        \"data-node-ref\": \"_passwordInputNode\",\n        class: l.esriInput\n      }))),\n          h = u(\"div\", {\n        class: this.classes(l.group, l.footer)\n      }, u(\"input\", {\n        type: \"submit\",\n        disabled: !!o,\n        value: o ? _a.lblSigning : _a.lblOk,\n        class: l.esriButton\n      }), u(\"input\", {\n        type: \"button\",\n        value: _a.lblCancel,\n        bind: this,\n        onclick: this._cancel,\n        class: this.classes(l.esriButton, l.esriButtonSecondary)\n      })),\n          g = s ? u(\"div\", null, s.details && s.details.httpStatus ? _a.invalidUser : _a.noAuthService) : null;\n      return u(\"form\", {\n        class: l.base,\n        bind: this,\n        onsubmit: this._submit\n      }, d, g, c, m, h);\n    }\n  }, {\n    key: \"_cancel\",\n    value: function _cancel() {\n      this._set(\"signingIn\", !1), this._usernameInputNode && (this._usernameInputNode.value = \"\"), this._passwordInputNode && (this._passwordInputNode.value = \"\"), this.emit(\"cancel\");\n    }\n  }, {\n    key: \"_submit\",\n    value: function _submit(s) {\n      s.preventDefault(), this._set(\"signingIn\", !0);\n      var e = this.oAuthPrompt ? {} : {\n        username: this._usernameInputNode && this._usernameInputNode.value,\n        password: this._passwordInputNode && this._passwordInputNode.value\n      };\n      this.emit(\"submit\", e);\n    }\n  }]);\n\n  return a;\n}(o);\n\ns([e(), n(\"esri/identity/t9n/identity\")], a.prototype, \"messages\", void 0), s([e()], a.prototype, \"signingIn\", void 0), s([e()], a.prototype, \"server\", void 0), s([e()], a.prototype, \"resource\", void 0), s([e()], a.prototype, \"error\", void 0), s([e()], a.prototype, \"oAuthPrompt\", void 0), a = s([t(\"esri.identity.IdentityForm\")], a);\nvar d = a;\nexport default d;","/*!\n* focus-trap 6.5.1\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, isFocusable } from 'tabbable';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n/**\n * Get an option's value when it could be a plain value, or a handler that provides\n *  the value.\n * @param {*} value Option's value to check.\n * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.\n * @returns {*} The `value`, or the handler's returned value.\n */\n\n\nvar valueOrHandler = function valueOrHandler(value) {\n  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    params[_key - 1] = arguments[_key];\n  }\n\n  return typeof value === 'function' ? value.apply(void 0, params) : value;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  var doc = document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ container: HTMLElement, firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var getOption = function getOption(configOverrideOptions, optionName, configOptionName) {\n    return configOverrideOptions && configOverrideOptions[optionName] !== undefined ? configOverrideOptions[optionName] : config[configOptionName || optionName];\n  };\n\n  var containersContain = function containersContain(element) {\n    return state.containers.some(function (container) {\n      return container.contains(element);\n    });\n  };\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (!optionValue) {\n      return null;\n    }\n\n    var node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` refers to no known node\"));\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` did not return a node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      var firstTabbableGroup = state.tabbableGroups[0];\n      var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          container: container,\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus')) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var targetContained = containersContain(e.target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      // make sure the target is actually contained in a group\n      // NOTE: the target may also be the container itself if it's tabbable\n      //  with tabIndex='-1' and was given initial focus\n      var containerIndex = findIndex(state.tabbableGroups, function (_ref) {\n        var container = _ref.container;\n        return container.contains(e.target);\n      });\n\n      if (containerIndex < 0) {\n        // target not found in any group: quite possible focus has escaped the trap,\n        //  so bring it back in to...\n        if (e.shiftKey) {\n          // ...the last node in the last group\n          destinationNode = state.tabbableGroups[state.tabbableGroups.length - 1].lastTabbableNode;\n        } else {\n          // ...the first node in the first group\n          destinationNode = state.tabbableGroups[0].firstTabbableNode;\n        }\n      } else if (e.shiftKey) {\n        // REVERSE\n        // is the target the first tabbable node in a group?\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var firstTabbableNode = _ref2.firstTabbableNode;\n          return e.target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex < 0 && state.tabbableGroups[containerIndex].container === e.target) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle shift+tab as if focus were on the container's\n          //  first tabbable node, and go to the last tabbable node of the LAST group\n          startOfGroupIndex = containerIndex;\n        }\n\n        if (startOfGroupIndex >= 0) {\n          // YES: then shift+tab should go to the last tabbable node in the\n          //  previous group (and wrap around to the last tabbable node of\n          //  the LAST group if it's the first tabbable node of the FIRST group)\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        // FORWARD\n        // is the target the last tabbable node in a group?\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref3) {\n          var lastTabbableNode = _ref3.lastTabbableNode;\n          return e.target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex < 0 && state.tabbableGroups[containerIndex].container === e.target) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle tab as if focus were on the container's\n          //  last tabbable node, and go to the first tabbable node of the FIRST group\n          lastOfGroupIndex = containerIndex;\n        }\n\n        if (lastOfGroupIndex >= 0) {\n          // YES: then tab should go to the first tabbable node in the next\n          //  group (and wrap around to the first tabbable node of the FIRST\n          //  group if it's the last tabbable node of the LAST group)\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    } // else, let the browser take care of [shift+]tab and move the focus\n\n  };\n\n  var checkKey = function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    activeFocusDelay = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      var onActivate = getOption(activateOptions, 'onActivate');\n      var onPostActivate = getOption(activateOptions, 'onPostActivate');\n      var checkCanFocusTrap = getOption(activateOptions, 'checkCanFocusTrap');\n\n      if (!checkCanFocusTrap) {\n        updateTabbableNodes();\n      }\n\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      var finishActivation = function finishActivation() {\n        if (checkCanFocusTrap) {\n          updateTabbableNodes();\n        }\n\n        addListeners();\n\n        if (onPostActivate) {\n          onPostActivate();\n        }\n      };\n\n      if (checkCanFocusTrap) {\n        checkCanFocusTrap(state.containers.concat()).then(finishActivation, finishActivation);\n        return this;\n      }\n\n      finishActivation();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = getOption(deactivateOptions, 'onDeactivate');\n      var onPostDeactivate = getOption(deactivateOptions, 'onPostDeactivate');\n      var checkCanReturnFocus = getOption(deactivateOptions, 'checkCanReturnFocus');\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = getOption(deactivateOptions, 'returnFocus', 'returnFocusOnDeactivate');\n\n      var finishDeactivation = function finishDeactivation() {\n        delay(function () {\n          if (returnFocus) {\n            tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n          }\n\n          if (onPostDeactivate) {\n            onPostDeactivate();\n          }\n        });\n      };\n\n      if (returnFocus && checkCanReturnFocus) {\n        checkCanReturnFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation)).then(finishDeactivation, finishDeactivation);\n        return this;\n      }\n\n      finishDeactivation();\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };","/*!\n* tabbable 5.2.0\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nvar isContentEditable = function isContentEditable(node) {\n  return node.contentEditable === 'true';\n};\n\nvar getTabindex = function getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isHidden = function isHidden(node, displayCheck) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  if (!displayCheck || displayCheck === 'full') {\n    while (node) {\n      if (getComputedStyle(node).display === 'none') {\n        return true;\n      }\n\n      node = node.parentElement;\n    }\n  } else if (displayCheck === 'non-zero-area') {\n    var _node$getBoundingClie = node.getBoundingClientRect(),\n        width = _node$getBoundingClie.width,\n        height = _node$getBoundingClie.height;\n\n    return width === 0 && height === 0;\n  }\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(options, node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node, options.displayCheck) ||\n  /* For a details element with a summary, the summary element gets the focused  */\n  isDetailsWithSummary(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(options, node) {\n  if (!isNodeMatchingSelectorFocusable(options, node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable.bind(null, options));\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable.bind(null, options));\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };","import _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../chunks/tslib.es6.js\";\nimport { makeHandle as e } from \"../core/handleUtils.js\";\nimport { property as o } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/Logger.js\";\nimport { subclass as s } from \"../core/accessorSupport/decorators/subclass.js\";\nimport i from \"../widgets/Widget.js\";\nimport { isWidget as r } from \"../widgets/support/widget.js\";\nimport { createFocusTrap as n } from \"focus-trap\";\nimport { tsx as a } from \"../widgets/support/jsxFactory.js\";\nimport { messageBundle as c } from \"../widgets/support/decorators/messageBundle.js\";\nvar d = {\n  base: \"esri-identity-modal\",\n  open: \"esri-identity-modal--open\",\n  closed: \"esri-identity-modal--closed\",\n  title: \"esri-identity-modal__title\",\n  dialog: \"esri-identity-modal__dialog\",\n  content: \"esri-identity-modal__content\",\n  closeButton: \"esri-identity-modal__close-button\",\n  iconClose: \"esri-icon-close\"\n};\n\nvar l = /*#__PURE__*/function (_i) {\n  _inherits(l, _i);\n\n  var _super = _createSuper(l);\n\n  function l(t, e) {\n    var _this;\n\n    _classCallCheck(this, l);\n\n    _this = _super.call(this, t, e), _this.container = document.createElement(\"div\"), _this.content = null, _this.open = !1, _this._close = function () {\n      _this.open = !1;\n    }, document.body.appendChild(_this.container), _this.own(_this.watch(\"open\", function () {\n      return _this._toggleFocusTrap();\n    }));\n    return _this;\n  }\n\n  _createClass(l, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this._destroyFocusTrap();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _n;\n\n      var t = this.id,\n          e = this.open,\n          o = this.content,\n          s = this.title,\n          i = this.messages,\n          r = e && !!o,\n          n = (_n = {}, _defineProperty(_n, d.open, r), _defineProperty(_n, d.closed, !r), _n),\n          c = a(\"button\", {\n        class: d.closeButton,\n        \"aria-label\": i.close,\n        title: i.close,\n        bind: this,\n        onclick: this._close\n      }, a(\"span\", {\n        \"aria-hidden\": \"true\",\n        class: d.iconClose\n      })),\n          _l = \"\".concat(t, \"_title\"),\n          p = \"\".concat(t, \"_content\"),\n          u = s ? a(\"h1\", {\n        id: _l,\n        class: d.title\n      }, s) : null,\n          m = r ? a(\"div\", {\n        bind: this,\n        class: d.dialog,\n        role: \"dialog\",\n        \"aria-labelledby\": _l,\n        \"aria-describedby\": p,\n        afterCreate: this._createFocusTrap\n      }, c, u, this._renderContent(p)) : null;\n\n      return a(\"div\", {\n        tabIndex: -1,\n        class: this.classes(d.base, n)\n      }, m);\n    }\n  }, {\n    key: \"_destroyFocusTrap\",\n    value: function _destroyFocusTrap() {\n      var t;\n      null == (t = this._focusTrap) || t.deactivate({\n        onDeactivate: null\n      }), this._focusTrap = null;\n    }\n  }, {\n    key: \"_toggleFocusTrap\",\n    value: function _toggleFocusTrap() {\n      var t = this._focusTrap,\n          e = this.open;\n      t && (e ? t.activate() : t.deactivate());\n    }\n  }, {\n    key: \"_createFocusTrap\",\n    value: function _createFocusTrap(t) {\n      var _this2 = this;\n\n      this._destroyFocusTrap();\n\n      var o = requestAnimationFrame(function () {\n        _this2._focusTrap = n(t, {\n          initialFocus: \"input\",\n          onDeactivate: _this2._close\n        }), _this2._toggleFocusTrap();\n      });\n      this.own(e(function () {\n        return cancelAnimationFrame(o);\n      }));\n    }\n  }, {\n    key: \"_renderContent\",\n    value: function _renderContent(t) {\n      var e = this.content;\n      return \"string\" == typeof e ? a(\"div\", {\n        class: d.content,\n        id: t,\n        innerHTML: e\n      }) : r(e) ? a(\"div\", {\n        class: d.content,\n        id: t\n      }, e.render()) : e instanceof HTMLElement ? a(\"div\", {\n        class: d.content,\n        id: t,\n        bind: e,\n        afterCreate: this._attachToNode\n      }) : null;\n    }\n  }, {\n    key: \"_attachToNode\",\n    value: function _attachToNode(t) {\n      var e = this;\n      t.appendChild(e);\n    }\n  }]);\n\n  return l;\n}(i);\n\nt([o({\n  readOnly: !0\n})], l.prototype, \"container\", void 0), t([o()], l.prototype, \"content\", void 0), t([o()], l.prototype, \"open\", void 0), t([o(), c(\"esri/t9n/common\")], l.prototype, \"messages\", void 0), t([o({\n  aliasOf: \"messages.auth.signIn\"\n})], l.prototype, \"title\", void 0), l = t([s(\"esri.identity.IdentityModal\")], l);\nvar p = l;\nexport default p;","import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nvar t = \"esriJSAPIOAuth\";\n\nvar s = /*#__PURE__*/function () {\n  function s(t, _s) {\n    _classCallCheck(this, s);\n\n    this.oAuthInfo = null, this.storage = null, this.appId = null, this.expires = null, this.ssl = null, this.token = null, this.userId = null, this.oAuthInfo = t, this.storage = _s, this._init();\n  }\n\n  _createClass(s, [{\n    key: \"isValid\",\n    value: function isValid() {\n      var t = !1;\n\n      if (this.oAuthInfo && this.token && this.userId) {\n        var _s8 = Date.now();\n\n        if (this.expires > _s8) {\n          (this.expires - _s8) / 1e3 > 60 * this.oAuthInfo.minTimeUntilExpiration && (t = !0);\n        }\n      }\n\n      return t;\n    }\n  }, {\n    key: \"save\",\n    value: function save() {\n      if (!this.storage) return;\n\n      var _s3 = this._load(),\n          e = this.oAuthInfo;\n\n      if (e && e.authNamespace && e.portalUrl) {\n        var o = _s3[e.authNamespace];\n        o || (o = _s3[e.authNamespace] = {}), o[e.portalUrl] = {\n          appId: this.appId = e.appId,\n          expires: this.expires,\n          ssl: this.ssl,\n          token: this.token,\n          userId: this.userId\n        };\n\n        try {\n          this.storage.setItem(t, JSON.stringify(_s3));\n        } catch (i) {\n          console.log(i);\n        }\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _s4 = this._load(),\n          e = this.oAuthInfo;\n\n      if (e && e.appId && e.portalUrl && this.token && this.expires > Date.now()) {\n        var _t = e.portalUrl.replace(/^http:/i, \"https:\") + \"/sharing/rest/oauth2/revokeToken\",\n            _s9 = new FormData();\n\n        if (_s9.append(\"f\", \"json\"), _s9.append(\"auth_token\", this.token), _s9.append(\"client_id\", e.appId), _s9.append(\"token_type_hint\", \"access_token\"), \"function\" == typeof navigator.sendBeacon) navigator.sendBeacon(_t, _s9);else {\n          var _e = new XMLHttpRequest();\n\n          _e.open(\"POST\", _t), _e.send(_s9);\n        }\n      }\n\n      if (e && e.authNamespace && e.portalUrl && this.storage) {\n        var o = _s4[e.authNamespace];\n\n        if (o) {\n          delete o[e.portalUrl];\n\n          try {\n            this.storage.setItem(t, JSON.stringify(_s4));\n          } catch (i) {\n            console.log(i);\n          }\n        }\n      }\n\n      e && (e._oAuthCred = null, this.oAuthInfo = null);\n    }\n  }, {\n    key: \"_init\",\n    value: function _init() {\n      var t = this._load(),\n          _s6 = this.oAuthInfo;\n\n      if (_s6 && _s6.authNamespace && _s6.portalUrl) {\n        var e = t[_s6.authNamespace];\n        e && (e = e[_s6.portalUrl], e && (this.appId = e.appId, this.expires = e.expires, this.ssl = e.ssl, this.token = e.token, this.userId = e.userId));\n      }\n    }\n  }, {\n    key: \"_load\",\n    value: function _load() {\n      var _s7 = {};\n\n      if (this.storage) {\n        var i = this.storage.getItem(t);\n        if (i) try {\n          _s7 = JSON.parse(i);\n        } catch (e) {\n          console.log(e);\n        }\n      }\n\n      return _s7;\n    }\n  }]);\n\n  return s;\n}();\n\ns.prototype.declaredClass = \"esri.identity.OAuthCredential\";\nexport default s;","import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as o } from \"../chunks/tslib.es6.js\";\nimport { JSONSupport as t } from \"../core/JSONSupport.js\";\nimport { property as r } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/Logger.js\";\nimport { subclass as e } from \"../core/accessorSupport/decorators/subclass.js\";\n\nvar _p;\n\nvar s = _p = /*#__PURE__*/function (_t) {\n  _inherits(p, _t);\n\n  var _super = _createSuper(p);\n\n  function p(o) {\n    var _this;\n\n    _classCallCheck(this, p);\n\n    _this = _super.call(this, o), _this._oAuthCred = null, _this.appId = null, _this.authNamespace = \"/\", _this.expiration = 20160, _this.forceLogin = !1, _this.forceUserId = !1, _this.locale = null, _this.minTimeUntilExpiration = 30, _this.popup = !1, _this.popupCallbackUrl = \"oauth-callback.html\", _this.popupWindowFeatures = \"height=490,width=800,resizable,scrollbars,status\", _this.portalUrl = \"https://www.arcgis.com\", _this.preserveUrlHash = !1, _this.userId = null;\n    return _this;\n  }\n\n  _createClass(p, [{\n    key: \"clone\",\n    value: function clone() {\n      return _p.fromJSON(this.toJSON());\n    }\n  }]);\n\n  return p;\n}(t);\n\no([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"appId\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"authNamespace\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"expiration\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"forceLogin\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"forceUserId\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"locale\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"minTimeUntilExpiration\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"popup\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"popupCallbackUrl\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"popupWindowFeatures\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"portalUrl\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"preserveUrlHash\", void 0), o([r({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"userId\", void 0), s = _p = o([e(\"esri.identity.OAuthInfo\")], s);\nvar i = s;\nexport default i;","import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as o } from \"../chunks/tslib.es6.js\";\nimport { JSONSupport as r } from \"../core/JSONSupport.js\";\nimport { property as e } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/Logger.js\";\nimport { subclass as t } from \"../core/accessorSupport/decorators/subclass.js\";\n\nvar s = /*#__PURE__*/function (_r) {\n  _inherits(s, _r);\n\n  var _super = _createSuper(s);\n\n  function s(o) {\n    var _this;\n\n    _classCallCheck(this, s);\n\n    _this = _super.call(this, o), _this.adminTokenServiceUrl = null, _this.currentVersion = null, _this.hasPortal = null, _this.hasServer = null, _this.owningSystemUrl = null, _this.owningTenant = null, _this.server = null, _this.shortLivedTokenValidity = null, _this.tokenServiceUrl = null, _this.webTierAuth = null;\n    return _this;\n  }\n\n  return s;\n}(r);\n\no([e({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"adminTokenServiceUrl\", void 0), o([e({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"currentVersion\", void 0), o([e({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"hasPortal\", void 0), o([e({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"hasServer\", void 0), o([e({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"owningSystemUrl\", void 0), o([e({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"owningTenant\", void 0), o([e({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"server\", void 0), o([e({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"shortLivedTokenValidity\", void 0), o([e({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"tokenServiceUrl\", void 0), o([e({\n  json: {\n    write: !0\n  }\n})], s.prototype, \"webTierAuth\", void 0), s = o([t(\"esri.identity.ServerInfo\")], s);\nvar i = s;\nexport default i;","import _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e17) { throw _e17; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e18) { didErr = true; err = _e18; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../config.js\";\nimport { id as s } from \"../kernel.js\";\nimport r from \"../request.js\";\nimport i from \"../core/Error.js\";\nimport n from \"../core/Evented.js\";\nimport { on as o } from \"../core/events.js\";\nimport a from \"../core/global.js\";\nimport { fixJson as h } from \"../core/lang.js\";\nimport { getDeepValue as l } from \"../core/object.js\";\nimport { createAbortController as c, createResolver as d, onAbort as u, isAborted as p } from \"../core/promiseUtils.js\";\nimport { urlToObject as _, hasSameOrigin as g, Url as f, queryToObject as m, normalize as v, getProxyRule as S, makeAbsolute as w, objectToQuery as I } from \"../core/urlUtils.js\";\nimport { property as k } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/has.js\";\nimport \"../core/Logger.js\";\nimport { subclass as A } from \"../core/accessorSupport/decorators/subclass.js\";\nimport y from \"./IdentityForm.js\";\nimport U from \"./IdentityModal.js\";\nimport T from \"./OAuthCredential.js\";\nimport x from \"./OAuthInfo.js\";\nimport O from \"./ServerInfo.js\";\n\nvar R = {},\n    b = function b(e) {\n  var t = new f(e.owningSystemUrl).host,\n      s = new f(e.server).host,\n      r = /.+\\.arcgis\\.com$/i;\n  return r.test(t) && r.test(s);\n},\n    P = function P(e, t) {\n  return !!(b(e) && t && t.some(function (t) {\n    return t.test(e.server);\n  }));\n};\n\nvar C = null,\n    D = null;\n\ntry {\n  C = window.localStorage, D = window.sessionStorage;\n} catch (_unused) {}\n\nvar q = /*#__PURE__*/function (_n) {\n  _inherits(q, _n);\n\n  var _super = _createSuper(q);\n\n  function q() {\n    var _this;\n\n    _classCallCheck(this, q);\n\n    _this = _super.call(this), _this._portalConfig = a.esriGeowConfig, _this.serverInfos = [], _this.oAuthInfos = [], _this.credentials = [], _this._soReqs = [], _this._xoReqs = [], _this._portals = [], _this.defaultOAuthInfo = null, _this.defaultTokenValidity = 60, _this.dialog = null, _this.formConstructor = y, _this.tokenValidity = null, _this.normalizeWebTierAuth = !1, _this._appOrigin = \"null\" !== window.origin ? window.origin : window.location.origin, _this._appUrlObj = _(window.location.href), _this._busy = null, _this._rejectOnPersistedPageShow = !1, _this._oAuthHash = null, _this._gwTokenUrl = \"/sharing/rest/generateToken\", _this._agsRest = \"/rest/services\", _this._agsPortal = /\\/sharing(\\/|$)/i, _this._agsAdmin = /(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i, _this._adminSvcs = /\\/rest\\/admin\\/services(\\/|$)/i, _this._gwDomains = [{\n      regex: /^https?:\\/\\/www\\.arcgis\\.com/i,\n      customBaseUrl: \"maps.arcgis.com\",\n      tokenServiceUrl: \"https://www.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,\n      customBaseUrl: \"mapsdev.arcgis.com\",\n      tokenServiceUrl: \"https://dev.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,\n      customBaseUrl: \"mapsdevext.arcgis.com\",\n      tokenServiceUrl: \"https://devext.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,\n      customBaseUrl: \"mapsqa.arcgis.com\",\n      tokenServiceUrl: \"https://qaext.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,\n      customBaseUrl: \"maps.arcgis.com\",\n      tokenServiceUrl: \"https://www.arcgis.com/sharing/rest/generateToken\"\n    }], _this._legacyFed = [], _this._regexSDirUrl = /http.+\\/rest\\/services\\/?/gi, _this._regexServerType = /(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi, _this._gwUser = /http.+\\/users\\/([^\\/]+)\\/?.*/i, _this._gwItem = /http.+\\/items\\/([^\\/]+)\\/?.*/i, _this._gwGroup = /http.+\\/groups\\/([^\\/]+)\\/?.*/i, _this._rePortalTokenSvc = /\\/sharing(\\/rest)?\\/generatetoken/i, _this._createDefaultOAuthInfo = !0, _this._hasTestedIfAppIsOnPortal = !1, _this._getOAuthHash(), window.addEventListener(\"pageshow\", function (e) {\n      _this._pageShowHandler(e);\n    });\n    return _this;\n  }\n\n  _createClass(q, [{\n    key: \"registerServers\",\n    value: function registerServers(e) {\n      var _this2 = this;\n\n      var t = this.serverInfos;\n      t ? (e = e.filter(function (e) {\n        return !_this2.findServerInfo(e.server);\n      }), this.serverInfos = t.concat(e)) : this.serverInfos = e, e.forEach(function (e) {\n        e.owningSystemUrl && _this2._portals.push(e.owningSystemUrl), e.hasPortal && _this2._portals.push(e.server);\n      });\n    }\n  }, {\n    key: \"registerOAuthInfos\",\n    value: function registerOAuthInfos(e) {\n      var t = this.oAuthInfos;\n\n      if (t) {\n        var _iterator = _createForOfIteratorHelper(e),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _s = _step.value;\n\n            var _e = this.findOAuthInfo(_s.portalUrl);\n\n            _e && t.splice(t.indexOf(_e), 1);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        this.oAuthInfos = t.concat(e);\n      } else this.oAuthInfos = e;\n    }\n  }, {\n    key: \"registerToken\",\n    value: function registerToken(e) {\n      e = _objectSpread({}, e);\n\n      var t = this._sanitizeUrl(e.server),\n          s = this._isServerRsrc(t);\n\n      var r,\n          i = this.findServerInfo(t),\n          n = !0;\n      i || (i = new O(), i.server = this._getServerInstanceRoot(t), s ? i.hasServer = !0 : (i.tokenServiceUrl = this._getTokenSvcUrl(t), i.hasPortal = !0), this.registerServers([i])), r = this._findCredential(t), r ? (delete e.server, Object.assign(r, e), n = !1) : (r = new j({\n        userId: e.userId,\n        server: i.server,\n        token: e.token,\n        expires: e.expires,\n        ssl: e.ssl,\n        scope: s ? \"server\" : \"portal\"\n      }), r.resources = [t], this.credentials.push(r)), r.emitTokenChange(!1), n || r.refreshServerTokens();\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return h({\n        serverInfos: this.serverInfos.map(function (e) {\n          return e.toJSON();\n        }),\n        oAuthInfos: this.oAuthInfos.map(function (e) {\n          return e.toJSON();\n        }),\n        credentials: this.credentials.map(function (e) {\n          return e.toJSON();\n        })\n      });\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize(e) {\n      var _this3 = this;\n\n      if (!e) return;\n      \"string\" == typeof e && (e = JSON.parse(e));\n      var t = e.serverInfos,\n          s = e.oAuthInfos,\n          r = e.credentials;\n\n      if (t) {\n        var _e2 = [];\n        t.forEach(function (t) {\n          t.server && t.tokenServiceUrl && _e2.push(t.declaredClass ? t : new O(t));\n        }), _e2.length && this.registerServers(_e2);\n      }\n\n      if (s) {\n        var _e3 = [];\n        s.forEach(function (t) {\n          t.appId && _e3.push(t.declaredClass ? t : new x(t));\n        }), _e3.length && this.registerOAuthInfos(_e3);\n      }\n\n      r && r.forEach(function (e) {\n        e.server && e.token && e.expires && e.expires > Date.now() && ((e = e.declaredClass ? e : new j(e)).emitTokenChange(), _this3.credentials.push(e));\n      });\n    }\n  }, {\n    key: \"findServerInfo\",\n    value: function findServerInfo(e) {\n      var t;\n      e = this._sanitizeUrl(e);\n\n      var _iterator2 = _createForOfIteratorHelper(this.serverInfos),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _s2 = _step2.value;\n\n          if (this._hasSameServerInstance(_s2.server, e)) {\n            t = _s2;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return t;\n    }\n  }, {\n    key: \"findOAuthInfo\",\n    value: function findOAuthInfo(e) {\n      var t;\n      e = this._sanitizeUrl(e);\n\n      var _iterator3 = _createForOfIteratorHelper(this.oAuthInfos),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _s3 = _step3.value;\n\n          if (this._hasSameServerInstance(_s3.portalUrl, e)) {\n            t = _s3;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      return t;\n    }\n  }, {\n    key: \"findCredential\",\n    value: function findCredential(e, t) {\n      var s;\n      e = this._sanitizeUrl(e);\n      var r = this._isServerRsrc(e) ? \"server\" : \"portal\";\n\n      if (t) {\n        var _iterator4 = _createForOfIteratorHelper(this.credentials),\n            _step4;\n\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _i = _step4.value;\n\n            if (this._hasSameServerInstance(_i.server, e) && t === _i.userId && _i.scope === r) {\n              s = _i;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n      } else {\n        var _iterator5 = _createForOfIteratorHelper(this.credentials),\n            _step5;\n\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var _i2 = _step5.value;\n\n            if (this._hasSameServerInstance(_i2.server, e) && -1 !== this._getIdenticalSvcIdx(e, _i2) && _i2.scope === r) {\n              s = _i2;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      }\n\n      return s;\n    }\n  }, {\n    key: \"getCredential\",\n    value: function getCredential(e, t) {\n      var s,\n          r,\n          n = !0;\n      t && (s = !!t.token, r = t.error, n = !1 !== t.prompt), t = _objectSpread({}, t), e = this._sanitizeUrl(e);\n      var o = c(),\n          a = d();\n      if (t.signal && u(t.signal, function () {\n        o.abort();\n      }), u(o, function () {\n        a.reject(new i(\"identity-manager:user-aborted\", \"ABORTED\"));\n      }), p(o)) return a.promise;\n      t.signal = o.signal;\n\n      var h = this._isAdminResource(e),\n          l = s ? this.findCredential(e) : null;\n\n      var _;\n\n      if (l && r && r.details && 498 === r.details.httpStatus) l.destroy();else if (l) return _ = new i(\"identity-manager:not-authorized\", \"You are currently signed in as: '\" + l.userId + \"'. You do not have access to this resource: \" + e, {\n        error: r\n      }), a.reject(_), a.promise;\n\n      var f = this._findCredential(e, t);\n\n      if (f) return a.resolve(f), a.promise;\n      var m = this.findServerInfo(e);\n      if (m) !m.hasServer && this._isServerRsrc(e) && (m._restInfoPms = this._getTokenSvcUrl(e), m.hasServer = !0);else {\n        var _t = this._getTokenSvcUrl(e);\n\n        if (!_t) return _ = new i(\"identity-manager:unknown-resource\", \"Unknown resource - could not find token service endpoint.\"), a.reject(_), a.promise;\n        m = new O(), m.server = this._getServerInstanceRoot(e), \"string\" == typeof _t ? (m.tokenServiceUrl = _t, m.hasPortal = !0) : (m._restInfoPms = _t, m.hasServer = !0), this.registerServers([m]);\n      }\n      return m.hasPortal && void 0 === m._selfReq && (n || g(m.tokenServiceUrl, this._appOrigin) || this._gwDomains.some(function (e) {\n        return e.tokenServiceUrl === m.tokenServiceUrl;\n      })) && (m._selfReq = {\n        owningTenant: t && t.owningTenant,\n        selfDfd: this._getPortalSelf(m.tokenServiceUrl.replace(this._rePortalTokenSvc, \"/sharing/rest/portals/self\"), e)\n      }), this._enqueue(e, m, t, a, h);\n    }\n  }, {\n    key: \"getResourceName\",\n    value: function getResourceName(e) {\n      return this._isRESTService(e) ? e.replace(this._regexSDirUrl, \"\").replace(this._regexServerType, \"\") || \"\" : this._gwUser.test(e) && e.replace(this._gwUser, \"$1\") || this._gwItem.test(e) && e.replace(this._gwItem, \"$1\") || this._gwGroup.test(e) && e.replace(this._gwGroup, \"$1\") || \"\";\n    }\n  }, {\n    key: \"generateToken\",\n    value: function generateToken(e, t, s) {\n      var n = this._rePortalTokenSvc.test(e.tokenServiceUrl),\n          o = new f(this._appOrigin),\n          a = e.shortLivedTokenValidity;\n\n      var h, l, c, d, u, p, _, m;\n\n      t && (m = this.tokenValidity || a || this.defaultTokenValidity, m > a && a > 0 && (m = a)), s && (h = s.isAdmin, l = s.serverUrl, c = s.token, p = s.signal, _ = s.ssl, e.customParameters = s.customParameters), h ? d = e.adminTokenServiceUrl : (d = e.tokenServiceUrl, u = new f(d.toLowerCase()), e.webTierAuth && null != s && s.serverUrl && !_ && \"http\" === o.scheme && (g(o.uri, d, !0) || \"https\" === u.scheme && o.host === u.host && \"7080\" === o.port && \"7443\" === u.port) && (d = d.replace(/^https:/i, \"http:\").replace(/:7443/i, \":7080\")));\n\n      var v = _objectSpread({\n        query: _objectSpread({\n          request: \"getToken\",\n          username: null == t ? void 0 : t.username,\n          password: null == t ? void 0 : t.password,\n          serverUrl: l,\n          token: c,\n          expiration: m,\n          referer: h || n ? this._appOrigin : null,\n          client: h ? \"referer\" : null,\n          f: \"json\"\n        }, e.customParameters),\n        method: \"post\",\n        authMode: \"anonymous\",\n        useProxy: this._useProxy(e, s),\n        signal: p\n      }, null == s ? void 0 : s.ioArgs);\n\n      n || (v.withCredentials = !1);\n      return r(d, v).then(function (s) {\n        var r = s.data;\n        if (!r || !r.token) return new i(\"identity-manager:authentication-failed\", \"Unable to generate token\");\n        var n = e.server;\n        return R[n] || (R[n] = {}), t && (R[n][t.username] = t.password), r.validity = m, r;\n      });\n    }\n  }, {\n    key: \"isBusy\",\n    value: function isBusy() {\n      return !!this._busy;\n    }\n  }, {\n    key: \"checkSignInStatus\",\n    value: function checkSignInStatus(e) {\n      return this.checkAppAccess(e, \"\").then(function (e) {\n        return e.credential;\n      });\n    }\n  }, {\n    key: \"checkAppAccess\",\n    value: function checkAppAccess(e, t, s) {\n      var _this4 = this;\n\n      var n = !1;\n      return this.getCredential(e, {\n        prompt: !1\n      }).then(function (o) {\n        var a;\n        var h = {\n          f: \"json\"\n        };\n        if (\"portal\" === o.scope) {\n          if (t && (_this4._doPortalSignIn(e) || s && s.force)) a = o.server + \"/sharing/rest/oauth2/validateAppAccess\", h.client_id = t;else {\n            if (!o.token) return {\n              credential: o\n            };\n            a = o.server + \"/sharing/rest\";\n          }\n        } else {\n          if (!o.token) return {\n            credential: o\n          };\n          a = o.server + \"/rest/services\";\n        }\n        return o.token && (h.token = o.token), r(a, {\n          query: h,\n          authMode: \"anonymous\"\n        }).then(function (e) {\n          if (!1 === e.data.valid) throw new i(\"identity-manager:not-authorized\", \"You are currently signed in as: '\".concat(o.userId, \"'.\"), e.data);\n          return n = !!e.data.viewOnlyUserTypeApp, {\n            credential: o\n          };\n        }).catch(function (e) {\n          if (\"identity-manager:not-authorized\" === e.name) throw e;\n          var t = e.details && e.details.httpStatus;\n          if (498 === t) throw o.destroy(), new i(\"identity-manager:not-authenticated\", \"User is not signed in.\");\n          if (400 === t) throw new i(\"identity-manager:invalid-request\");\n          return {\n            credential: o\n          };\n        });\n      }).then(function (e) {\n        return {\n          credential: e.credential,\n          viewOnly: n\n        };\n      });\n    }\n  }, {\n    key: \"setOAuthResponseHash\",\n    value: function setOAuthResponseHash(e) {\n      var t;\n      var s = this._oAuthDfd;\n      if (this._oAuthDfd = null, !s || !e) return;\n      clearInterval(this._oAuthIntervalId), null == (t = this._oAuthOnHashHandle) || t.remove(), \"#\" === e.charAt(0) && (e = e.substring(1));\n      var r = m(e);\n\n      if (r.error) {\n        var _e4 = \"access_denied\" === r.error,\n            _t2 = new i(_e4 ? \"identity-manager:user-aborted\" : \"identity-manager:authentication-failed\", _e4 ? \"ABORTED\" : \"OAuth: \" + r.error + \" - \" + r.error_description);\n\n        s.reject(_t2);\n      } else {\n        var _e5 = s.sinfo_,\n            _t3 = s.oinfo_,\n            _i3 = _t3._oAuthCred,\n            _n2 = new j({\n          userId: r.username,\n          server: _e5.server,\n          token: r.access_token,\n          expires: Date.now() + 1e3 * Number(r.expires_in),\n          ssl: \"true\" === r.ssl,\n          _oAuthCred: _i3\n        });\n\n        _t3.userId = _n2.userId, _i3.storage = r.persist ? C : D, _i3.token = _n2.token, _i3.expires = _n2.expires, _i3.userId = _n2.userId, _i3.ssl = _n2.ssl, _i3.save(), s.resolve(_n2);\n      }\n    }\n  }, {\n    key: \"setOAuthRedirectionHandler\",\n    value: function setOAuthRedirectionHandler(e) {\n      this._oAuthRedirectFunc = e;\n    }\n  }, {\n    key: \"setProtocolErrorHandler\",\n    value: function setProtocolErrorHandler(e) {\n      this._protocolFunc = e;\n    }\n  }, {\n    key: \"signIn\",\n    value: function signIn(e, t) {\n      var _this5 = this;\n\n      var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var r = d(),\n          n = function n() {\n        var e, t, s, r, i;\n        null == (e = h) || e.remove(), null == (t = l) || t.remove(), null == (s = c) || s.remove(), null == (r = a) || r.destroy(), null == (i = _this5.dialog) || i.destroy(), _this5.dialog = a = h = l = c = null;\n      },\n          o = function o() {\n        n(), _this5._oAuthDfd = null, r.reject(new i(\"identity-manager:user-aborted\", \"ABORTED\"));\n      };\n\n      s.signal && u(s.signal, function () {\n        o();\n      });\n      var a = new this.formConstructor();\n      a.resource = this.getResourceName(e), a.server = t.server, this.dialog = new U(), this.dialog.content = a, this.dialog.open = !0, this.emit(\"dialog-create\");\n      var h = a.on(\"cancel\", o),\n          l = this.dialog.watch(\"open\", o),\n          c = a.on(\"submit\", function (e) {\n        _this5.generateToken(t, e, {\n          isAdmin: s.isAdmin,\n          signal: s.signal\n        }).then(function (i) {\n          n();\n          var o = new j({\n            userId: e.username,\n            server: t.server,\n            token: i.token,\n            expires: null != i.expires ? Number(i.expires) : null,\n            ssl: !!i.ssl,\n            isAdmin: s.isAdmin,\n            validity: i.validity\n          });\n          r.resolve(o);\n        }).catch(function (e) {\n          a.error = e, a.signingIn = !1;\n        });\n      });\n      return r.promise;\n    }\n  }, {\n    key: \"oAuthSignIn\",\n    value: function oAuthSignIn(e, t, s, r) {\n      var _this6 = this;\n\n      this._oAuthDfd = d();\n      var n = this._oAuthDfd;\n      null != r && r.signal && u(r.signal, function () {\n        var e = _this6._oAuthDfd && _this6._oAuthDfd.oAuthWin_;\n        e && !e.closed ? e.close() : _this6.dialog && h();\n      }), n.resUrl_ = e, n.sinfo_ = t, n.oinfo_ = s;\n      var o = !r || !1 !== r.oAuthPopupConfirmation;\n      if (!s.popup || !o) return this._doOAuthSignIn(e, t, s), n.promise;\n      var a = new this.formConstructor();\n      a.oAuthPrompt = !0, a.server = t.server, this.dialog = new U(), this.dialog.content = a, this.dialog.open = !0, this.emit(\"dialog-create\");\n\n      var h = function h() {\n        _(), _this6._oAuthDfd = null, n.reject(new i(\"identity-manager:user-aborted\", \"ABORTED\"));\n      },\n          l = a.on(\"cancel\", h),\n          c = this.dialog.watch(\"open\", h),\n          p = a.on(\"submit\", function () {\n        _(), _this6._doOAuthSignIn(e, t, s);\n      }),\n          _ = function _() {\n        l.remove(), c.remove(), p.remove(), a.destroy(), _this6.dialog.destroy(), _this6.dialog = null;\n      };\n\n      return n.promise;\n    }\n  }, {\n    key: \"destroyCredentials\",\n    value: function destroyCredentials() {\n      if (this.credentials) {\n        this.credentials.slice().forEach(function (e) {\n          e.destroy();\n        });\n      }\n\n      this.emit(\"credentials-destroy\");\n    }\n  }, {\n    key: \"enablePostMessageAuth\",\n    value: function enablePostMessageAuth() {\n      var _this7 = this;\n\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"https://www.arcgis.com/sharing/rest\";\n      this._postMessageAuthHandle && this._postMessageAuthHandle.remove(), this._postMessageAuthHandle = o(window, \"message\", function (t) {\n        var s;\n\n        if ((t.origin === _this7._appOrigin || t.origin.endsWith(\".arcgis.com\")) && \"arcgis:auth:requestCredential\" === (null == (s = t.data) ? void 0 : s.type)) {\n          var _s4 = t.source;\n\n          _this7.getCredential(e).then(function (e) {\n            _s4.postMessage({\n              type: \"arcgis:auth:credential\",\n              credential: {\n                expires: e.expires,\n                server: e.server,\n                ssl: e.ssl,\n                token: e.token,\n                userId: e.userId\n              }\n            }, t.origin);\n          }).catch(function (e) {\n            _s4.postMessage({\n              type: \"arcgis:auth:error\",\n              error: {\n                name: e.name,\n                message: e.message\n              }\n            }, t.origin);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"disablePostMessageAuth\",\n    value: function disablePostMessageAuth() {\n      this._postMessageAuthHandle && (this._postMessageAuthHandle.remove(), this._postMessageAuthHandle = null);\n    }\n  }, {\n    key: \"_getOAuthHash\",\n    value: function _getOAuthHash() {\n      var e = window.location.hash;\n\n      if (e) {\n        \"#\" === e.charAt(0) && (e = e.substring(1));\n\n        var _t4 = m(e);\n\n        var _s5 = !1;\n\n        if (_t4.access_token && _t4.expires_in && _t4.state && _t4.hasOwnProperty(\"username\")) try {\n          _t4.state = JSON.parse(_t4.state), \"object\" == typeof _t4.state && _t4.state.portalUrl && (this._oAuthHash = _t4, _s5 = !0);\n        } catch (_unused2) {} else _t4.error && _t4.error_description && (console.log(\"IdentityManager OAuth Error: \", _t4.error, \" - \", _t4.error_description), \"access_denied\" === _t4.error && (_s5 = !0));\n        _s5 && (window.location.hash = \"object\" == typeof _t4.state && _t4.state.hash || \"\");\n      }\n    }\n  }, {\n    key: \"_pageShowHandler\",\n    value: function _pageShowHandler(e) {\n      if (e.persisted && this.isBusy() && this._rejectOnPersistedPageShow) {\n        var _e6 = new i(\"identity-manager:user-aborted\", \"ABORTED\");\n\n        this._errbackFunc(_e6);\n      }\n    }\n  }, {\n    key: \"_findCredential\",\n    value: function _findCredential(e, t) {\n      var _this8 = this;\n\n      var s,\n          r,\n          i,\n          n,\n          o = -1;\n      var a = t && t.token,\n          h = t && t.resource,\n          l = this._isServerRsrc(e) ? \"server\" : \"portal\",\n          c = this.credentials.filter(function (t) {\n        return _this8._hasSameServerInstance(t.server, e) && t.scope === l;\n      });\n      if (e = h || e, c.length) if (1 === c.length) {\n        if (s = c[0], n = this.findServerInfo(s.server), r = n && n.owningSystemUrl, i = r && this.findCredential(r, s.userId), o = this._getIdenticalSvcIdx(e, s), !a) return -1 === o && s.resources.push(e), this._addResource(e, i), s;\n        -1 !== o && (s.resources.splice(o, 1), this._removeResource(e, i));\n      } else {\n        var _t5, _s6;\n\n        if (c.some(function (a) {\n          return _s6 = _this8._getIdenticalSvcIdx(e, a), -1 !== _s6 && (_t5 = a, n = _this8.findServerInfo(_t5.server), r = n && n.owningSystemUrl, i = r && _this8.findCredential(r, _t5.userId), o = _s6, !0);\n        }), a) _t5 && (_t5.resources.splice(o, 1), this._removeResource(e, i));else if (_t5) return this._addResource(e, i), _t5;\n      }\n    }\n  }, {\n    key: \"_findOAuthInfo\",\n    value: function _findOAuthInfo(e) {\n      var t = this.findOAuthInfo(e);\n\n      if (!t) {\n        var _iterator6 = _createForOfIteratorHelper(this.oAuthInfos),\n            _step6;\n\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var _s7 = _step6.value;\n\n            if (this._isIdProvider(_s7.portalUrl, e)) {\n              t = _s7;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n      }\n\n      return t;\n    }\n  }, {\n    key: \"_addResource\",\n    value: function _addResource(e, t) {\n      t && -1 === this._getIdenticalSvcIdx(e, t) && t.resources.push(e);\n    }\n  }, {\n    key: \"_removeResource\",\n    value: function _removeResource(e, t) {\n      var s = -1;\n      t && (s = this._getIdenticalSvcIdx(e, t), s > -1 && t.resources.splice(s, 1));\n    }\n  }, {\n    key: \"_useProxy\",\n    value: function _useProxy(e, t) {\n      return t && t.isAdmin && !g(e.adminTokenServiceUrl, this._appOrigin) || !this._isPortalDomain(e.tokenServiceUrl) && \"10.1\" === String(e.currentVersion) && !g(e.tokenServiceUrl, this._appOrigin);\n    }\n  }, {\n    key: \"_getOrigin\",\n    value: function _getOrigin(e) {\n      var t = new f(e);\n      return t.scheme + \"://\" + t.host + (null != t.port ? \":\" + t.port : \"\");\n    }\n  }, {\n    key: \"_getServerInstanceRoot\",\n    value: function _getServerInstanceRoot(e) {\n      var t = e.toLowerCase();\n      var s = t.indexOf(this._agsRest);\n      return -1 === s && this._isAdminResource(e) && (s = this._agsAdmin.test(e) ? e.replace(this._agsAdmin, \"$1\").length : e.search(this._adminSvcs)), -1 === s && (s = t.indexOf(\"/sharing\")), -1 === s && \"/\" === t.substr(-1) && (s = t.length - 1), s > -1 ? e.substring(0, s) : e;\n    }\n  }, {\n    key: \"_hasSameServerInstance\",\n    value: function _hasSameServerInstance(e, t) {\n      return \"/\" === e.substr(-1) && (e = e.slice(0, -1)), e = e.toLowerCase(), t = this._getServerInstanceRoot(t).toLowerCase(), e = this._normalizeAGOLorgDomain(e), t = this._normalizeAGOLorgDomain(t), (e = e.substr(e.indexOf(\":\"))) === (t = t.substr(t.indexOf(\":\")));\n    }\n  }, {\n    key: \"_normalizeAGOLorgDomain\",\n    value: function _normalizeAGOLorgDomain(e) {\n      var t = /^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,\n          s = /^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,\n          r = /^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;\n      return t.test(e) ? e = e.replace(t, \"https://www.arcgis.com\") : s.test(e) ? e = e.replace(s, \"https://devext.arcgis.com\") : r.test(e) && (e = e.replace(r, \"https://qaext.arcgis.com\")), e;\n    }\n  }, {\n    key: \"_sanitizeUrl\",\n    value: function _sanitizeUrl(e) {\n      var s = (t.request.proxyUrl || \"\").toLowerCase(),\n          r = s ? e.toLowerCase().indexOf(s + \"?\") : -1;\n      return -1 !== r && (e = e.substring(r + s.length + 1)), e = v(e), _(e).path;\n    }\n  }, {\n    key: \"_isRESTService\",\n    value: function _isRESTService(e) {\n      return e.indexOf(this._agsRest) > -1;\n    }\n  }, {\n    key: \"_isAdminResource\",\n    value: function _isAdminResource(e) {\n      return this._agsAdmin.test(e) || this._adminSvcs.test(e);\n    }\n  }, {\n    key: \"_isServerRsrc\",\n    value: function _isServerRsrc(e) {\n      return this._isRESTService(e) || this._isAdminResource(e);\n    }\n  }, {\n    key: \"_isIdenticalService\",\n    value: function _isIdenticalService(e, t) {\n      var s;\n\n      if (this._isRESTService(e) && this._isRESTService(t)) {\n        var _r = this._getSuffix(e).toLowerCase(),\n            _i4 = this._getSuffix(t).toLowerCase();\n\n        if (s = _r === _i4, !s) {\n          var _e7 = /(.*)\\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;\n          s = _r.replace(_e7, \"$1\") === _i4.replace(_e7, \"$1\");\n        }\n      } else this._isAdminResource(e) && this._isAdminResource(t) ? s = !0 : this._isServerRsrc(e) || this._isServerRsrc(t) || !this._isPortalDomain(e) || (s = !0);\n\n      return s;\n    }\n  }, {\n    key: \"_isPortalDomain\",\n    value: function _isPortalDomain(e) {\n      var _this9 = this;\n\n      var s = new f(e.toLowerCase()),\n          r = this._portalConfig;\n\n      var i = this._gwDomains.some(function (e) {\n        return e.regex.test(s.uri);\n      });\n\n      return !i && r && (i = this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl), s.uri)), i || t.portalUrl && (i = g(s, t.portalUrl, !0)), i || (i = this._portals.some(function (e) {\n        return _this9._hasSameServerInstance(e, s.uri);\n      })), i = i || this._agsPortal.test(s.path), i;\n    }\n  }, {\n    key: \"_isIdProvider\",\n    value: function _isIdProvider(e, t) {\n      var s = -1,\n          r = -1;\n\n      this._gwDomains.forEach(function (i, n) {\n        -1 === s && i.regex.test(e) && (s = n), -1 === r && i.regex.test(t) && (r = n);\n      });\n\n      var i = !1;\n\n      if (s > -1 && r > -1 && (0 === s || 4 === s ? 0 !== r && 4 !== r || (i = !0) : 1 === s ? 1 !== r && 2 !== r || (i = !0) : 2 === s ? 2 === r && (i = !0) : 3 === s && 3 === r && (i = !0)), !i) {\n        var _s8 = this.findServerInfo(t),\n            _r2 = _s8 && _s8.owningSystemUrl;\n\n        _r2 && b(_s8) && this._isPortalDomain(_r2) && this._isIdProvider(e, _r2) && (i = !0);\n      }\n\n      return i;\n    }\n  }, {\n    key: \"_getIdenticalSvcIdx\",\n    value: function _getIdenticalSvcIdx(e, t) {\n      var s = -1;\n\n      for (var _r3 = 0; _r3 < t.resources.length; _r3++) {\n        var _i5 = t.resources[_r3];\n\n        if (this._isIdenticalService(e, _i5)) {\n          s = _r3;\n          break;\n        }\n      }\n\n      return s;\n    }\n  }, {\n    key: \"_getSuffix\",\n    value: function _getSuffix(e) {\n      return e.replace(this._regexSDirUrl, \"\").replace(this._regexServerType, \"$1\");\n    }\n  }, {\n    key: \"_getTokenSvcUrl\",\n    value: function _getTokenSvcUrl(e) {\n      var _this10 = this;\n\n      var t, s, i;\n\n      if (this._isRESTService(e) || this._isAdminResource(e)) {\n        var _i6 = this._getServerInstanceRoot(e);\n\n        return t = _i6 + \"/admin/generateToken\", s = r(e = _i6 + \"/rest/info\", {\n          query: {\n            f: \"json\"\n          }\n        }).then(function (e) {\n          return e.data;\n        }), {\n          adminUrl: t,\n          promise: s\n        };\n      }\n\n      if (this._isPortalDomain(e)) {\n        var _t6 = \"\";\n\n        if (this._gwDomains.some(function (s) {\n          return s.regex.test(e) && (_t6 = s.tokenServiceUrl), !!_t6;\n        }), _t6 || this._portals.some(function (s) {\n          return _this10._hasSameServerInstance(s, e) && (_t6 = s + _this10._gwTokenUrl), !!_t6;\n        }), _t6 || (i = e.toLowerCase().indexOf(\"/sharing\"), -1 !== i && (_t6 = e.substring(0, i) + this._gwTokenUrl)), _t6 || (_t6 = this._getOrigin(e) + this._gwTokenUrl), _t6) {\n          var _s9 = new f(e).port;\n          /^http:\\/\\//i.test(e) && \"7080\" === _s9 && (_t6 = _t6.replace(/:7080/i, \":7443\")), _t6 = _t6.replace(/http:/i, \"https:\");\n        }\n\n        return _t6;\n      }\n\n      if (-1 !== e.toLowerCase().indexOf(\"premium.arcgisonline.com\")) return \"https://premium.arcgisonline.com/server/tokens\";\n    }\n  }, {\n    key: \"_exchangeToken\",\n    value: function _exchangeToken(e, t, s) {\n      return r(\"\".concat(e, \"/sharing/rest/oauth2/exchangeToken\"), {\n        authMode: \"anonymous\",\n        method: \"post\",\n        query: {\n          f: \"json\",\n          client_id: t,\n          token: s\n        }\n      }).then(function (e) {\n        return e.data.token;\n      });\n    }\n  }, {\n    key: \"_getPlatformSelf\",\n    value: function _getPlatformSelf(e, t) {\n      return r(\"\".concat(e, \"/sharing/rest/oauth2/platformSelf\"), {\n        authMode: \"anonymous\",\n        headers: {\n          \"X-Esri-Auth-Client-Id\": t,\n          \"X-Esri-Auth-Redirect-Uri\": window.location.href.replace(/#.*$/, \"\")\n        },\n        method: \"post\",\n        query: {\n          f: \"json\"\n        },\n        withCredentials: !0\n      }).then(function (e) {\n        return e.data;\n      });\n    }\n  }, {\n    key: \"_getPortalSelf\",\n    value: function _getPortalSelf(e, t) {\n      var s;\n      if (this._gwDomains.some(function (t) {\n        return t.regex.test(e) && (s = t.customBaseUrl), !!s;\n      }), s) return Promise.resolve({\n        allSSL: !0,\n        currentVersion: \"4.4\",\n        customBaseUrl: s,\n        portalMode: \"multitenant\",\n        supportsOAuth: !0\n      });\n      this._appOrigin.startsWith(\"https:\") ? e = e.replace(/^http:/i, \"https:\").replace(/:7080/i, \":7443\") : /^http:/i.test(t) && (e = e.replace(/^https:/i, \"http:\").replace(/:7443/i, \":7080\"));\n      return r(e, {\n        query: {\n          f: \"json\"\n        },\n        authMode: \"anonymous\",\n        withCredentials: !0\n      }).then(function (e) {\n        return e.data;\n      });\n    }\n  }, {\n    key: \"_doPortalSignIn\",\n    value: function _doPortalSignIn(e) {\n      var t = this._portalConfig,\n          s = window.location.href,\n          r = this.findServerInfo(e);\n      return !(!t && !this._isPortalDomain(s) || !(r ? r.hasPortal || r.owningSystemUrl && this._isPortalDomain(r.owningSystemUrl) : this._isPortalDomain(e)) || !(this._isIdProvider(s, e) || t && (this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl), e) || this._isIdProvider(t.restBaseUrl, e)) || g(s, e, !0)));\n    }\n  }, {\n    key: \"_checkProtocol\",\n    value: function _checkProtocol(e, t, s, r) {\n      var n = !0;\n      var o = r ? t.adminTokenServiceUrl : t.tokenServiceUrl;\n\n      if (o.trim().toLowerCase().startsWith(\"https:\") && !this._appOrigin.startsWith(\"https:\") && S(o) && (n = !!this._protocolFunc && !!this._protocolFunc({\n        resourceUrl: e,\n        serverInfo: t\n      }), !n)) {\n        s(new i(\"identity-manager:aborted\", \"Aborted the Sign-In process to avoid sending password over insecure connection.\"));\n      }\n\n      return n;\n    }\n  }, {\n    key: \"_enqueue\",\n    value: function _enqueue(e, t, s, r, i, n) {\n      return r || (r = d()), r.resUrl_ = e, r.sinfo_ = t, r.options_ = s, r.admin_ = i, r.refresh_ = n, this._busy ? this._hasSameServerInstance(this._getServerInstanceRoot(e), this._busy.resUrl_) ? (this._oAuthDfd && this._oAuthDfd.oAuthWin_ && this._oAuthDfd.oAuthWin_.focus(), this._soReqs.push(r)) : this._xoReqs.push(r) : this._doSignIn(r), r.promise;\n    }\n  }, {\n    key: \"_doSignIn\",\n    value: function _doSignIn(e) {\n      var _this11 = this;\n\n      this._busy = e, this._rejectOnPersistedPageShow = !1;\n\n      var t = function t(_t7) {\n        var s = e.options_ && e.options_.resource,\n            r = e.resUrl_,\n            i = e.refresh_;\n        var n = !1;\n        -1 === _this11.credentials.indexOf(_t7) && (i && -1 !== _this11.credentials.indexOf(i) ? (i.userId = _t7.userId, i.token = _t7.token, i.expires = _t7.expires, i.validity = _t7.validity, i.ssl = _t7.ssl, i.creationTime = _t7.creationTime, n = !0, _t7 = i) : _this11.credentials.push(_t7)), _t7.resources || (_t7.resources = []), _t7.resources.push(s || r), _t7.scope = _this11._isServerRsrc(r) ? \"server\" : \"portal\", _t7.emitTokenChange();\n        var o = _this11._soReqs,\n            a = {};\n        _this11._soReqs = [], o.forEach(function (e) {\n          if (!_this11._isIdenticalService(r, e.resUrl_)) {\n            var _s10 = _this11._getSuffix(e.resUrl_);\n\n            a[_s10] || (a[_s10] = !0, _t7.resources.push(e.resUrl_));\n          }\n        }), e.resolve(_t7), o.forEach(function (e) {\n          _this11._hasSameServerInstance(_this11._getServerInstanceRoot(r), e.resUrl_) ? e.resolve(_t7) : _this11._soReqs.push(e);\n        }), _this11._busy = e.resUrl_ = e.sinfo_ = e.refresh_ = null, n || _this11.emit(\"credential-create\", {\n          credential: _t7\n        }), _this11._soReqs.length ? _this11._doSignIn(_this11._soReqs.shift()) : _this11._xoReqs.length && _this11._doSignIn(_this11._xoReqs.shift());\n      },\n          s = function s(t) {\n        e.reject(t), _this11._busy = e.resUrl_ = e.sinfo_ = e.refresh_ = null, _this11._soReqs.length ? _this11._doSignIn(_this11._soReqs.shift()) : _this11._xoReqs.length && _this11._doSignIn(_this11._xoReqs.shift());\n      },\n          r = function r(_r8, n, a, h) {\n        var l, c;\n\n        var d = e.sinfo_,\n            p = !e.options_ || !1 !== e.options_.prompt,\n            _ = d.hasPortal && _this11._findOAuthInfo(e.resUrl_);\n\n        var f, m;\n        if (_r8) t(new j({\n          userId: _r8,\n          server: d.server,\n          token: a || null,\n          expires: null != h ? Number(h) : null,\n          ssl: !!n\n        }));else if (window !== window.parent && null != (l = _this11._appUrlObj.query) && l[\"arcgis-auth-origin\"] && null != (c = _this11._appUrlObj.query) && c[\"arcgis-auth-portal\"] && _this11._hasSameServerInstance(_this11._getServerInstanceRoot(_this11._appUrlObj.query[\"arcgis-auth-portal\"]), e.resUrl_)) {\n          var v;\n          window.parent.postMessage({\n            type: \"arcgis:auth:requestCredential\"\n          }, _this11._appUrlObj.query[\"arcgis-auth-origin\"]);\n\n          var _r4 = o(window, \"message\", function (e) {\n            e.source === window.parent && e.data && (\"arcgis:auth:credential\" === e.data.type ? (_r4.remove(), t(new j(e.data.credential))) : \"arcgis:auth:error\" === e.data.type && (_r4.remove(), s(i.fromJSON(e.data.error))));\n          });\n\n          u(null == (v = e.options_) ? void 0 : v.signal, function () {\n            _r4.remove();\n          });\n        } else if (_) {\n          var _r5 = _._oAuthCred;\n\n          if (!_r5) {\n            var _e8 = new T(_, C),\n                _t8 = new T(_, D);\n\n            _e8.isValid() && _t8.isValid() ? _e8.expires > _t8.expires ? (_r5 = _e8, _t8.destroy()) : (_r5 = _t8, _e8.destroy()) : _r5 = _e8.isValid() ? _e8 : _t8, _._oAuthCred = _r5;\n          }\n\n          if (_r5.isValid()) f = new j({\n            userId: _r5.userId,\n            server: d.server,\n            token: _r5.token,\n            expires: _r5.expires,\n            ssl: _r5.ssl,\n            _oAuthCred: _r5\n          }), _.appId !== _r5.appId && _this11._doPortalSignIn(e.resUrl_) ? e._pendingDfd = _this11._exchangeToken(f.server, _.appId, f.token).then(function (e) {\n            f.token = e, _r5.token = e, _r5.save(), t(f);\n          }).catch(function () {\n            t(f);\n          }) : t(f);else if (_this11._oAuthHash && _this11._hasSameServerInstance(_.portalUrl, _this11._oAuthHash.state.portalUrl)) {\n            var _e9 = _this11._oAuthHash;\n            f = new j({\n              userId: _e9.username,\n              server: d.server,\n              token: _e9.access_token,\n              expires: Date.now() + 1e3 * Number(_e9.expires_in),\n              ssl: \"true\" === _e9.ssl,\n              oAuthState: _e9.state,\n              _oAuthCred: _r5\n            }), _.userId = f.userId, _r5.storage = _e9.persist ? C : D, _r5.token = f.token, _r5.expires = f.expires, _r5.userId = f.userId, _r5.ssl = f.ssl, _r5.save(), _this11._oAuthHash = null, t(f);\n          } else {\n            var _r6 = function _r6() {\n              p ? e._pendingDfd = _this11.oAuthSignIn(e.resUrl_, d, _, e.options_).then(t, s) : (m = new i(\"identity-manager:not-authenticated\", \"User is not signed in.\"), s(m));\n            };\n\n            _this11._doPortalSignIn(e.resUrl_) ? e._pendingDfd = _this11._getPlatformSelf(d.server, _.appId).then(function (_ref) {\n              var e = _ref.portalUrl,\n                  s = _ref.token,\n                  i = _ref.username;\n              !e || g(e, _this11._appOrigin, !0) ? (f = new j({\n                server: d.server,\n                userId: i,\n                token: s\n              }), t(f)) : _r6();\n            }).catch(_r6) : _r6();\n          }\n        } else if (p) {\n          if (_this11._checkProtocol(e.resUrl_, d, s, e.admin_)) {\n            var _r7 = e.options_;\n            e.admin_ && (_r7 = _r7 || {}, _r7.isAdmin = !0), e._pendingDfd = _this11.signIn(e.resUrl_, d, _r7).then(t, s);\n          }\n        } else m = new i(\"identity-manager:not-authenticated\", \"User is not signed in.\"), s(m);\n      },\n          n = function n() {\n        var r = e.sinfo_,\n            i = r.owningSystemUrl,\n            n = e.options_;\n        var o, a, h, l;\n\n        if (n && (o = n.token, a = n.error, h = n.prompt), l = _this11._findCredential(i, {\n          token: o,\n          resource: e.resUrl_\n        }), !l) {\n          var _iterator7 = _createForOfIteratorHelper(_this11.credentials),\n              _step7;\n\n          try {\n            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n              var _e10 = _step7.value;\n\n              if (_this11._isIdProvider(i, _e10.server)) {\n                l = _e10;\n                break;\n              }\n            }\n          } catch (err) {\n            _iterator7.e(err);\n          } finally {\n            _iterator7.f();\n          }\n        }\n\n        if (l) {\n          var _i7 = _this11.findCredential(e.resUrl_, l.userId);\n\n          if (_i7) t(_i7);else if (P(r, _this11._legacyFed)) {\n            var _e11 = l.toJSON();\n\n            _e11.server = r.server, _e11.resources = null, t(new j(_e11));\n          } else {\n            (e._pendingDfd = _this11.generateToken(_this11.findServerInfo(l.server), null, {\n              serverUrl: e.resUrl_,\n              token: l.token,\n              signal: e.options_.signal,\n              ssl: l.ssl\n            })).then(function (s) {\n              t(new j({\n                userId: l.userId,\n                server: r.server,\n                token: s.token,\n                expires: null != s.expires ? Number(s.expires) : null,\n                ssl: !!s.ssl,\n                isAdmin: e.admin_,\n                validity: s.validity\n              }));\n            }, s);\n          }\n        } else {\n          _this11._busy = null, o && (e.options_.token = null);\n\n          (e._pendingDfd = _this11.getCredential(i.replace(/\\/?$/, \"/sharing\"), {\n            resource: e.resUrl_,\n            owningTenant: r.owningTenant,\n            signal: e.options_.signal,\n            token: o,\n            error: a,\n            prompt: h\n          })).then(function () {\n            _this11._enqueue(e.resUrl_, e.sinfo_, e.options_, e, e.admin_);\n          }, function (e) {\n            s(e);\n          });\n        }\n      };\n\n      this._errbackFunc = s;\n\n      var a = e.sinfo_.owningSystemUrl,\n          h = this._isServerRsrc(e.resUrl_),\n          c = e.sinfo_._restInfoPms;\n\n      c ? c.promise.then(function (t) {\n        var s = e.sinfo_;\n\n        if (s._restInfoPms) {\n          s.adminTokenServiceUrl = s._restInfoPms.adminUrl, s._restInfoPms = null, s.tokenServiceUrl = l(\"authInfo.tokenServicesUrl\", t) || l(\"authInfo.tokenServiceUrl\", t) || l(\"tokenServiceUrl\", t), s.shortLivedTokenValidity = l(\"authInfo.shortLivedTokenValidity\", t), s.currentVersion = t.currentVersion, s.owningTenant = t.owningTenant;\n\n          var _e12 = s.owningSystemUrl = t.owningSystemUrl;\n\n          _e12 && _this11._portals.push(_e12);\n        }\n\n        h && s.owningSystemUrl ? n() : r();\n      }, function () {\n        e.sinfo_._restInfoPms = null;\n        var t = new i(\"identity-manager:server-identification-failed\", \"Unknown resource - could not find token service endpoint.\");\n        s(t);\n      }) : h && a ? n() : e.sinfo_._selfReq ? e.sinfo_._selfReq.selfDfd.then(function (t) {\n        var s = {};\n        var r, i, n, o;\n        return t && (r = t.user && t.user.username, s.username = r, s.allSSL = t.allSSL, i = t.supportsOAuth, n = t.currentVersion, \"multitenant\" === t.portalMode && (o = t.customBaseUrl)), e.sinfo_.webTierAuth = !!r, r && _this11.normalizeWebTierAuth ? _this11.generateToken(e.sinfo_, null, {\n          ssl: s.allSSL\n        }).catch(function () {\n          return null;\n        }).then(function (e) {\n          return s.portalToken = e && e.token, s.tokenExpiration = e && e.expires, s;\n        }) : !r && i && parseFloat(n) >= 4.4 && !_this11._findOAuthInfo(e.resUrl_) ? _this11._generateOAuthInfo({\n          portalUrl: e.sinfo_.server,\n          customBaseUrl: o,\n          owningTenant: e.sinfo_._selfReq.owningTenant\n        }).catch(function () {\n          return null;\n        }).then(function () {\n          return s;\n        }) : s;\n      }).catch(function () {\n        return null;\n      }).then(function (t) {\n        e.sinfo_._selfReq = null, t ? r(t.username, t.allSSL, t.portalToken, t.tokenExpiration) : r();\n      }) : r();\n    }\n  }, {\n    key: \"_generateOAuthInfo\",\n    value: function _generateOAuthInfo(e) {\n      var _this12 = this;\n\n      var t,\n          s,\n          i = e.portalUrl;\n      var n = e.customBaseUrl,\n          o = e.owningTenant,\n          a = !this.defaultOAuthInfo && this._createDefaultOAuthInfo && !this._hasTestedIfAppIsOnPortal;\n\n      if (a) {\n        s = window.location.href;\n\n        var _e13 = s.indexOf(\"?\");\n\n        _e13 > -1 && (s = s.slice(0, _e13)), _e13 = s.search(/\\/(apps|home)\\//), s = _e13 > -1 ? s.slice(0, _e13) : null;\n      }\n\n      return a && s ? (this._hasTestedIfAppIsOnPortal = !0, t = r(s + \"/sharing/rest\", {\n        query: {\n          f: \"json\"\n        }\n      }).then(function () {\n        _this12.defaultOAuthInfo = new x({\n          appId: \"arcgisonline\",\n          popupCallbackUrl: s + \"/home/oauth-callback.html\"\n        });\n      })) : t = Promise.resolve(), t.then(function () {\n        if (_this12.defaultOAuthInfo) return i = i.replace(/^http:/i, \"https:\"), r(i + \"/sharing/rest/oauth2/validateRedirectUri\", {\n          query: {\n            accountId: o,\n            client_id: _this12.defaultOAuthInfo.appId,\n            redirect_uri: w(_this12.defaultOAuthInfo.popupCallbackUrl),\n            f: \"json\"\n          }\n        }).then(function (e) {\n          if (e.data.valid) {\n            var _t9 = _this12.defaultOAuthInfo.clone();\n\n            e.data.urlKey && n ? _t9.portalUrl = \"https://\" + e.data.urlKey.toLowerCase() + \".\" + n : _t9.portalUrl = i, _t9.popup = window !== window.top || !(g(i, _this12._appOrigin) || _this12._gwDomains.some(function (e) {\n              return e.regex.test(i) && e.regex.test(_this12._appOrigin);\n            })), _this12.oAuthInfos.push(_t9);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_doOAuthSignIn\",\n    value: function _doOAuthSignIn(e, t, s) {\n      var _this13 = this;\n\n      var r = {\n        portalUrl: s.portalUrl\n      };\n      !s.popup && s.preserveUrlHash && window.location.hash && (r.hash = window.location.hash);\n      var n = {\n        client_id: s.appId,\n        response_type: \"token\",\n        state: JSON.stringify(r),\n        expiration: s.expiration,\n        locale: s.locale,\n        redirect_uri: s.popup ? w(s.popupCallbackUrl) : window.location.href.replace(/#.*$/, \"\")\n      };\n      s.forceLogin && (n.force_login = !0), s.forceUserId && s.userId && (n.prepopulatedusername = s.userId), !s.popup && this._doPortalSignIn(e) && (n.redirectToUserOrgUrl = !0);\n      var h = s.portalUrl.replace(/^http:/i, \"https:\") + \"/sharing/oauth2/authorize\",\n          l = h + \"?\" + I(n);\n\n      if (s.popup) {\n        var _e14 = window.open(l, \"esriJSAPIOAuth\", s.popupWindowFeatures);\n\n        if (_e14) _e14.focus(), this._oAuthDfd.oAuthWin_ = _e14, this._oAuthIntervalId = setInterval(function () {\n          if (_e14.closed) {\n            clearInterval(_this13._oAuthIntervalId), _this13._oAuthOnHashHandle.remove();\n            var _e15 = _this13._oAuthDfd;\n\n            if (_e15) {\n              var _t10 = new i(\"identity-manager:user-aborted\", \"ABORTED\");\n\n              _e15.reject(_t10);\n            }\n          }\n        }, 500), this._oAuthOnHashHandle = o(a, \"arcgis:auth:hash\", function (e) {\n          _this13.setOAuthResponseHash(e.detail);\n        });else {\n          var _e16 = new i(\"identity-manager:popup-blocked\", \"ABORTED\");\n\n          this._oAuthDfd.reject(_e16);\n        }\n      } else this._rejectOnPersistedPageShow = !0, this._oAuthRedirectFunc ? this._oAuthRedirectFunc({\n        authorizeParams: n,\n        authorizeUrl: h,\n        resourceUrl: e,\n        serverInfo: t,\n        oAuthInfo: s\n      }) : window.location.href = l;\n    }\n  }]);\n\n  return q;\n}(n);\n\nq.prototype.declaredClass = \"esri.identity.IdentityManagerBase\";\n\nvar j = /*#__PURE__*/function (_n$EventedAccessor) {\n  _inherits(j, _n$EventedAccessor);\n\n  var _super2 = _createSuper(j);\n\n  function j(e) {\n    var _this14;\n\n    _classCallCheck(this, j);\n\n    _this14 = _super2.call(this, e), _this14._oAuthCred = null, _this14.tokenRefreshBuffer = 2, e && e._oAuthCred && (_this14._oAuthCred = e._oAuthCred);\n    return _this14;\n  }\n\n  _createClass(j, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this.resources = this.resources || [], null == this.creationTime && (this.creationTime = Date.now());\n    }\n  }, {\n    key: \"refreshToken\",\n    value: function refreshToken() {\n      var _this15 = this;\n\n      var e = s.findServerInfo(this.server),\n          t = e && e.owningSystemUrl,\n          r = !!t && \"server\" === this.scope,\n          i = r && P(e, s._legacyFed),\n          n = e.webTierAuth,\n          o = n && s.normalizeWebTierAuth,\n          a = R[this.server],\n          h = a && a[this.userId];\n      var l,\n          c = this.resources && this.resources[0],\n          d = r && s.findServerInfo(t),\n          u = {\n        username: this.userId,\n        password: h\n      };\n      if (n && !o) return;\n      r && !d && s.serverInfos.some(function (e) {\n        return s._isIdProvider(t, e.server) && (d = e), !!d;\n      });\n      var p = d && s.findCredential(d.server, this.userId);\n\n      if (!r || p) {\n        if (!i) {\n          if (r) l = {\n            serverUrl: c,\n            token: p && p.token,\n            ssl: p && p.ssl\n          };else if (o) u = null, l = {\n            ssl: this.ssl\n          };else {\n            if (!h) {\n              var _t11;\n\n              return c && (c = s._sanitizeUrl(c), this._enqueued = 1, _t11 = s._enqueue(c, e, null, null, this.isAdmin, this), _t11.then(function () {\n                _this15._enqueued = 0, _this15.refreshServerTokens();\n              }).catch(function () {\n                _this15._enqueued = 0;\n              })), _t11;\n            }\n\n            this.isAdmin && (l = {\n              isAdmin: !0\n            });\n          }\n          return s.generateToken(r ? d : e, r ? null : u, l).then(function (e) {\n            _this15.token = e.token, _this15.expires = null != e.expires ? Number(e.expires) : null, _this15.creationTime = Date.now(), _this15.validity = e.validity, _this15.emitTokenChange(), _this15.refreshServerTokens();\n          }).catch(function () {});\n        }\n\n        p.refreshToken();\n      }\n    }\n  }, {\n    key: \"refreshServerTokens\",\n    value: function refreshServerTokens() {\n      var _this16 = this;\n\n      \"portal\" === this.scope && s.credentials.forEach(function (e) {\n        var t = s.findServerInfo(e.server),\n            r = t && t.owningSystemUrl;\n        e !== _this16 && e.userId === _this16.userId && r && \"server\" === e.scope && (s._hasSameServerInstance(_this16.server, r) || s._isIdProvider(r, _this16.server)) && (P(t, s._legacyFed) ? (e.token = _this16.token, e.expires = _this16.expires, e.creationTime = _this16.creationTime, e.validity = _this16.validity, e.emitTokenChange()) : e.refreshToken());\n      });\n    }\n  }, {\n    key: \"emitTokenChange\",\n    value: function emitTokenChange(e) {\n      clearTimeout(this._refreshTimer);\n      var t = this.server && s.findServerInfo(this.server),\n          r = t && t.owningSystemUrl,\n          i = r && s.findServerInfo(r);\n      !1 === e || r && \"portal\" !== this.scope && (!i || !i.webTierAuth || s.normalizeWebTierAuth) || null == this.expires && null == this.validity || this._startRefreshTimer(), this.emit(\"token-change\");\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.userId = this.server = this.token = this.expires = this.validity = this.resources = this.creationTime = null, this._oAuthCred && (this._oAuthCred.destroy(), this._oAuthCred = null);\n      var e = s.credentials.indexOf(this);\n      e > -1 && s.credentials.splice(e, 1), this.emitTokenChange(), this.emit(\"destroy\");\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var e = h({\n        userId: this.userId,\n        server: this.server,\n        token: this.token,\n        expires: this.expires,\n        validity: this.validity,\n        ssl: this.ssl,\n        isAdmin: this.isAdmin,\n        creationTime: this.creationTime,\n        scope: this.scope\n      }),\n          t = this.resources;\n      return t && t.length > 0 && (e.resources = t.slice()), e;\n    }\n  }, {\n    key: \"_startRefreshTimer\",\n    value: function _startRefreshTimer() {\n      clearTimeout(this._refreshTimer);\n      var e = 6e4 * this.tokenRefreshBuffer,\n          t = Math.pow(2, 31) - 1;\n      var s = (this.validity ? this.creationTime + 6e4 * this.validity : this.expires) - Date.now();\n      s < 0 ? s = 0 : s > t && (s = t), this._refreshTimer = setTimeout(this.refreshToken.bind(this), s > e ? s - e : s);\n    }\n  }]);\n\n  return j;\n}(n.EventedAccessor);\n\ne([k()], j.prototype, \"creationTime\", void 0), e([k()], j.prototype, \"expires\", void 0), e([k()], j.prototype, \"isAdmin\", void 0), e([k()], j.prototype, \"oAuthState\", void 0), e([k()], j.prototype, \"resources\", void 0), e([k()], j.prototype, \"scope\", void 0), e([k()], j.prototype, \"server\", void 0), e([k()], j.prototype, \"ssl\", void 0), e([k()], j.prototype, \"token\", void 0), e([k()], j.prototype, \"tokenRefreshBuffer\", void 0), e([k()], j.prototype, \"userId\", void 0), e([k()], j.prototype, \"validity\", void 0), j = e([A(\"esri.identity.Credential\")], j);\nexport { j as Credential, q as IdentityManagerBase };","import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { setId as e } from \"../kernel.js\";\nimport { IdentityManagerBase as t } from \"./IdentityManagerBase.js\";\n\nvar r = /*#__PURE__*/function (_t) {\n  _inherits(r, _t);\n\n  var _super = _createSuper(r);\n\n  function r() {\n    _classCallCheck(this, r);\n\n    return _super.apply(this, arguments);\n  }\n\n  return r;\n}(t);\n\nr.prototype.declaredClass = \"esri.identity.IdentityManager\";\nvar s = new r();\ne(s);\nexport default s;"],"sourceRoot":""}