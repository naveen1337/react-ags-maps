{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","F","s","done","value","e","_e4","f","TypeError","err","normalCompletion","didErr","step","next","_e5","return","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","NewTarget","this","C","allSublayers","Map","allPoints","allPolylines","allPolygons","allMapImages","j","_I","_fetchService2","_getViewDependentUrl2","_super","_this","_handles","_bitmapIndex","_mapImageContainer","_kmlVisualData","allVisiblePoints","allVisiblePolylines","allVisiblePolygons","allVisibleMapImages","_this2","suspended","_pointsView","_polylinesView","_polygonsView","Promise","resolve","t","hitTest","all","then","layer","sourceLayer","processUpdate","_this3","add","on","added","_addMapImage","removed","_removeMapImage","container","addChild","view","graphics","requestUpdateCallback","requestUpdate","featuresTilingScheme","watch","_step","_iterator","_step$value","visibility","_step2","_iterator2","_i2","_e","get","id","_refreshCollections","_fetchingPromise","_fetchService","notifyChange","removeAll","removeAllChildren","clear","destroy","viewChange","updating","_this4","spatialReference","isWGS84","isWebMercator","href","responseType","_ref","data","fromJSON","extent","x","xmin","y","ymax","resolution","width","naturalWidth","rotation","set","mark","_callee","a","h","_p","_e2","_w","_g","_u","_2","_V","_f","_v","_S","_I2","_P","_x3","_k","_C","wrap","_context","prev","viewFormat","viewBoundScale","httpQuery","Error","expand","WGS84","WebMercator","xmax","ymin","size","pixelRatio","Math","max","height","center","_i3","_t2","replace","query","abrupt","concat","path","stop","_x","_x2","_callee2","_context2","_loadVisualData","url","_this5","addMany","_isSublayerVisible","sublayerId","map","_ref2","item","_ref3","_ref4","_ref5","parentFolderId","_this6","_fetchParsedKML","_ref6","_callee3","_iterator3","_step3","_loop","_context4","sublayers","_i$allPoints","_i$allPolylines","_i$allPolygons","_i$allMapImages","_e3","_context3","points","t0","sent","polylines","t1","polygons","t2","mapImages","networkLink","_getViewDependentUrl","state","delegateYield","finish","_x4","refreshInterval","removeChild","delete","M"],"mappings":"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","file":"160-4ec7edc92c5e03e683d1.js","sourcesContent":["import _toConsumableArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e4) { throw _e4; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e5) { didErr = true; err = _e5; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport { version as i } from \"../../../kernel.js\";\nimport t from \"../../../request.js\";\nimport s from \"../../../core/Collection.js\";\nimport a from \"../../../core/Handles.js\";\nimport { isSome as o, isNone as l } from \"../../../core/maybe.js\";\nimport { queryToObject as r, objectToQuery as n } from \"../../../core/urlUtils.js\";\nimport { property as h } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/Logger.js\";\nimport { subclass as p } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport m from \"../../../geometry/Extent.js\";\nimport { load as c, project as d } from \"../../../geometry/projection.js\";\nimport y from \"../../../geometry/SpatialReference.js\";\nimport { canProject as w, project as g } from \"../../../geometry/support/webMercatorUtils.js\";\nimport { getGraphics as u, fetchService as _, parseKML as V } from \"../../../layers/support/kmlUtils.js\";\nimport { parseUrl as b } from \"../../../rest/utils.js\";\nimport { GraphicsCollection as f } from \"../../../support/GraphicsCollection.js\";\nimport { Bitmap as v } from \"../engine/Bitmap.js\";\nimport { BitmapContainer as S } from \"../engine/BitmapContainer.js\";\nimport { LayerView2DMixin as I } from \"./LayerView2D.js\";\nimport P from \"./graphics/GraphicContainer.js\";\nimport x from \"./graphics/GraphicsView2D.js\";\nimport k from \"../../layers/LayerView.js\";\n\nvar C = function C() {\n  _classCallCheck(this, C);\n\n  this.allSublayers = new Map(), this.allPoints = [], this.allPolylines = [], this.allPolygons = [], this.allMapImages = [];\n};\n\nvar j = /*#__PURE__*/function (_I) {\n  _inherits(j, _I);\n\n  var _super = _createSuper(j);\n\n  function j() {\n    var _this;\n\n    _classCallCheck(this, j);\n\n    _this = _super.apply(this, arguments), _this._handles = new a(), _this._bitmapIndex = new Map(), _this._mapImageContainer = new S(), _this._kmlVisualData = new C(), _this.allVisiblePoints = new f(), _this.allVisiblePolylines = new f(), _this.allVisiblePolygons = new f(), _this.allVisibleMapImages = new s();\n    return _this;\n  }\n\n  _createClass(j, [{\n    key: \"hitTest\",\n    value: function hitTest(e, i) {\n      var _this2 = this;\n\n      if (this.suspended || !this._pointsView && !this._polylinesView && !this._polygonsView) return Promise.resolve(null);\n      var t = [this._pointsView.hitTest(e, i), this._polylinesView.hitTest(e, i), this._polygonsView.hitTest(e, i)];\n      return Promise.all(t).then(function (e) {\n        return e.filter(function (e) {\n          return e && (e.layer = _this2.layer, e.sourceLayer = _this2.layer), !!e;\n        })[0] || null;\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update(e) {\n      this._polygonsView && this._polygonsView.processUpdate(e), this._polylinesView && this._polylinesView.processUpdate(e), this._pointsView && this._pointsView.processUpdate(e);\n    }\n  }, {\n    key: \"attach\",\n    value: function attach() {\n      var _this3 = this;\n\n      this._handles.add([this.allVisibleMapImages.on(\"change\", function (e) {\n        e.added.forEach(function (e) {\n          return _this3._addMapImage(e);\n        }), e.removed.forEach(function (e) {\n          return _this3._removeMapImage(e);\n        });\n      })]), this.container.addChild(this._mapImageContainer), this._polygonsView = new x({\n        view: this.view,\n        graphics: this.allVisiblePolygons,\n        requestUpdateCallback: function requestUpdateCallback() {\n          return _this3.requestUpdate();\n        },\n        container: new P(this.view.featuresTilingScheme)\n      }), this.container.addChild(this._polygonsView.container), this._polylinesView = new x({\n        view: this.view,\n        graphics: this.allVisiblePolylines,\n        requestUpdateCallback: function requestUpdateCallback() {\n          return _this3.requestUpdate();\n        },\n        container: new P(this.view.featuresTilingScheme)\n      }), this.container.addChild(this._polylinesView.container), this._pointsView = new x({\n        view: this.view,\n        graphics: this.allVisiblePoints,\n        requestUpdateCallback: function requestUpdateCallback() {\n          return _this3.requestUpdate();\n        },\n        container: new P(this.view.featuresTilingScheme)\n      }), this.container.addChild(this._pointsView.container), this.watch(\"layer.visibleSublayers\", function (e) {\n        var _iterator = _createForOfIteratorHelper(_this3._kmlVisualData.allSublayers),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _step$value = _slicedToArray(_step.value, 2),\n                _i = _step$value[0],\n                _t = _step$value[1];\n\n            _t.visibility = 0;\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        var _iterator2 = _createForOfIteratorHelper(e),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _i2 = _step2.value;\n\n            var _e = _this3._kmlVisualData.allSublayers.get(_i2.id);\n\n            _e && (_e.visibility = 1);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        _this3._refreshCollections();\n      }), this._fetchingPromise = this._fetchService().then(function () {\n        _this3._fetchingPromise = null, _this3.notifyChange(\"updating\");\n      });\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      this._handles.removeAll(), this._mapImageContainer.removeAllChildren(), this.container.removeAllChildren(), this._bitmapIndex.clear(), this._polygonsView && (this._polygonsView.destroy(), this._polygonsView = null), this._polylinesView && (this._polylinesView.destroy(), this._polylinesView = null), this._pointsView && (this._pointsView.destroy(), this._pointsView = null);\n    }\n  }, {\n    key: \"moveStart\",\n    value: function moveStart() {}\n  }, {\n    key: \"viewChange\",\n    value: function viewChange() {\n      this._polygonsView.viewChange(), this._polylinesView.viewChange(), this._pointsView.viewChange();\n    }\n  }, {\n    key: \"moveEnd\",\n    value: function moveEnd() {}\n  }, {\n    key: \"isUpdating\",\n    value: function isUpdating() {\n      return null != this._fetchingPromise || this._pointsView.updating || this._polygonsView.updating || this._polylinesView.updating;\n    }\n  }, {\n    key: \"_addMapImage\",\n    value: function _addMapImage(e) {\n      var _this4 = this;\n\n      (this.view.spatialReference.isWGS84 || this.view.spatialReference.isWebMercator) && t(e.href, {\n        responseType: \"image\"\n      }).then(function (_ref) {\n        var i = _ref.data;\n        var t = m.fromJSON(e.extent);\n        w(t, _this4.view.spatialReference) && (t = g(t, _this4.view.spatialReference));\n        var s = new v(i, \"standard\");\n        s.x = t.xmin, s.y = t.ymax, s.resolution = t.width / i.naturalWidth, s.rotation = e.rotation, _this4._mapImageContainer.addChild(s), _this4._bitmapIndex.set(e, s);\n      });\n    }\n  }, {\n    key: \"_getViewDependentUrl\",\n    value: function () {\n      var _getViewDependentUrl2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e, t) {\n        var s, a, h, _p, _e2, _w, _g, _u, _2, _V, _f, _v, _S, _I2, _P, _x3, _k, _C;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                s = e.viewFormat, a = e.viewBoundScale, h = e.httpQuery;\n\n                if (!o(s)) {\n                  _context.next = 20;\n                  break;\n                }\n\n                if (!l(t)) {\n                  _context.next = 4;\n                  break;\n                }\n\n                throw new Error(\"Loading this network link requires a view state.\");\n\n              case 4:\n                _context.next = 6;\n                return c();\n\n              case 6:\n                if (!(o(a) && 1 !== a)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                _e2 = new m(t.extent);\n                _e2.expand(a), _p = _e2;\n                _context.next = 12;\n                break;\n\n              case 11:\n                _p = t.extent;\n\n              case 12:\n                _p = d(_p, y.WGS84);\n                _w = d(_p, y.WebMercator), _g = _p.xmin, _u = _p.xmax, _2 = _p.ymin, _V = _p.ymax, _f = t.size[0] * t.pixelRatio, _v = t.size[1] * t.pixelRatio, _S = Math.max(_w.width, _w.height), _I2 = {\n                  \"[bboxWest]\": _g.toString(),\n                  \"[bboxEast]\": _u.toString(),\n                  \"[bboxSouth]\": _2.toString(),\n                  \"[bboxNorth]\": _V.toString(),\n                  \"[lookatLon]\": _p.center.x.toString(),\n                  \"[lookatLat]\": _p.center.y.toString(),\n                  \"[lookatRange]\": _S.toString(),\n                  \"[lookatTilt]\": \"0\",\n                  \"[lookatHeading]\": t.rotation.toString(),\n                  \"[lookatTerrainLon]\": _p.center.x.toString(),\n                  \"[lookatTerrainLat]\": _p.center.y.toString(),\n                  \"[lookatTerrainAlt]\": \"0\",\n                  \"[cameraLon]\": _p.center.x.toString(),\n                  \"[cameraLat]\": _p.center.y.toString(),\n                  \"[cameraAlt]\": _S.toString(),\n                  \"[horizFov]\": \"60\",\n                  \"[vertFov]\": \"60\",\n                  \"[horizPixels]\": _f.toString(),\n                  \"[vertPixels]\": _v.toString(),\n                  \"[terrainEnabled]\": \"0\",\n                  \"[clientVersion]\": i,\n                  \"[kmlVersion]\": \"2.2\",\n                  \"[clientName]\": \"ArcGIS API for JavaScript\",\n                  \"[language]\": \"en-US\"\n                }, _P = function _P(e) {\n                  for (var _i3 in e) {\n                    for (var _t2 in _I2) {\n                      e[_i3] = e[_i3].replace(_t2, _I2[_t2]);\n                    }\n                  }\n                }, _x3 = r(s);\n\n                _P(_x3);\n\n                _k = {};\n                o(h) && (_k = r(h), _P(_k));\n                _C = b(e.href);\n                _C.query = _objectSpread(_objectSpread(_objectSpread({}, _C.query), _x3), _k);\n                return _context.abrupt(\"return\", \"\".concat(_C.path, \"?\").concat(n(_x3)));\n\n              case 20:\n                return _context.abrupt(\"return\", e.href);\n\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function _getViewDependentUrl(_x, _x2) {\n        return _getViewDependentUrl2.apply(this, arguments);\n      }\n\n      return _getViewDependentUrl;\n    }()\n  }, {\n    key: \"_fetchService\",\n    value: function () {\n      var _fetchService2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var e;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e = new C();\n                _context2.next = 3;\n                return this._loadVisualData(this.layer.url, e);\n\n              case 3:\n                this._kmlVisualData = e;\n\n                this._refreshCollections();\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _fetchService() {\n        return _fetchService2.apply(this, arguments);\n      }\n\n      return _fetchService;\n    }()\n  }, {\n    key: \"_refreshCollections\",\n    value: function _refreshCollections() {\n      var _this5 = this;\n\n      this.allVisiblePoints.removeAll(), this.allVisiblePolylines.removeAll(), this.allVisiblePolygons.removeAll(), this.allVisibleMapImages.removeAll(), this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter(function (e) {\n        return _this5._isSublayerVisible(e.sublayerId);\n      }).map(function (_ref2) {\n        var e = _ref2.item;\n        return e;\n      })), this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter(function (e) {\n        return _this5._isSublayerVisible(e.sublayerId);\n      }).map(function (_ref3) {\n        var e = _ref3.item;\n        return e;\n      })), this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter(function (e) {\n        return _this5._isSublayerVisible(e.sublayerId);\n      }).map(function (_ref4) {\n        var e = _ref4.item;\n        return e;\n      })), this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter(function (e) {\n        return _this5._isSublayerVisible(e.sublayerId);\n      }).map(function (_ref5) {\n        var e = _ref5.item;\n        return e;\n      }));\n    }\n  }, {\n    key: \"_isSublayerVisible\",\n    value: function _isSublayerVisible(e) {\n      var i = this._kmlVisualData.allSublayers.get(e);\n\n      return !!i.visibility && (-1 === i.parentFolderId || this._isSublayerVisible(i.parentFolderId));\n    }\n  }, {\n    key: \"_loadVisualData\",\n    value: function _loadVisualData(e, i) {\n      var _this6 = this;\n\n      return this._fetchParsedKML(e).then( /*#__PURE__*/function () {\n        var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n          var _iterator3, _step3, _loop;\n\n          return _regeneratorRuntime.wrap(function _callee3$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _iterator3 = _createForOfIteratorHelper(e.sublayers);\n                  _context4.prev = 1;\n                  _loop = /*#__PURE__*/_regeneratorRuntime.mark(function _loop() {\n                    var _i$allPoints, _i$allPolylines, _i$allPolygons, _i$allMapImages;\n\n                    var t, e, s, a, o, _e3;\n\n                    return _regeneratorRuntime.wrap(function _loop$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            t = _step3.value;\n                            i.allSublayers.set(t.id, t);\n\n                            if (!t.points) {\n                              _context3.next = 8;\n                              break;\n                            }\n\n                            _context3.next = 5;\n                            return u(t.points);\n\n                          case 5:\n                            _context3.t0 = _context3.sent;\n                            _context3.next = 9;\n                            break;\n\n                          case 8:\n                            _context3.t0 = [];\n\n                          case 9:\n                            e = _context3.t0;\n\n                            if (!t.polylines) {\n                              _context3.next = 16;\n                              break;\n                            }\n\n                            _context3.next = 13;\n                            return u(t.polylines);\n\n                          case 13:\n                            _context3.t1 = _context3.sent;\n                            _context3.next = 17;\n                            break;\n\n                          case 16:\n                            _context3.t1 = [];\n\n                          case 17:\n                            s = _context3.t1;\n\n                            if (!t.polygons) {\n                              _context3.next = 24;\n                              break;\n                            }\n\n                            _context3.next = 21;\n                            return u(t.polygons);\n\n                          case 21:\n                            _context3.t2 = _context3.sent;\n                            _context3.next = 25;\n                            break;\n\n                          case 24:\n                            _context3.t2 = [];\n\n                          case 25:\n                            a = _context3.t2;\n                            o = t.mapImages || [];\n\n                            if (!((_i$allPoints = i.allPoints).push.apply(_i$allPoints, _toConsumableArray(e.map(function (e) {\n                              return {\n                                item: e,\n                                sublayerId: t.id\n                              };\n                            }))), (_i$allPolylines = i.allPolylines).push.apply(_i$allPolylines, _toConsumableArray(s.map(function (e) {\n                              return {\n                                item: e,\n                                sublayerId: t.id\n                              };\n                            }))), (_i$allPolygons = i.allPolygons).push.apply(_i$allPolygons, _toConsumableArray(a.map(function (e) {\n                              return {\n                                item: e,\n                                sublayerId: t.id\n                              };\n                            }))), (_i$allMapImages = i.allMapImages).push.apply(_i$allMapImages, _toConsumableArray(o.map(function (e) {\n                              return {\n                                item: e,\n                                sublayerId: t.id\n                              };\n                            }))), t.networkLink)) {\n                              _context3.next = 33;\n                              break;\n                            }\n\n                            _context3.next = 30;\n                            return _this6._getViewDependentUrl(t.networkLink, _this6.view.state);\n\n                          case 30:\n                            _e3 = _context3.sent;\n                            _context3.next = 33;\n                            return _this6._loadVisualData(_e3, i);\n\n                          case 33:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _loop);\n                  });\n\n                  _iterator3.s();\n\n                case 4:\n                  if ((_step3 = _iterator3.n()).done) {\n                    _context4.next = 8;\n                    break;\n                  }\n\n                  return _context4.delegateYield(_loop(), \"t0\", 6);\n\n                case 6:\n                  _context4.next = 4;\n                  break;\n\n                case 8:\n                  _context4.next = 13;\n                  break;\n\n                case 10:\n                  _context4.prev = 10;\n                  _context4.t1 = _context4[\"catch\"](1);\n\n                  _iterator3.e(_context4.t1);\n\n                case 13:\n                  _context4.prev = 13;\n\n                  _iterator3.f();\n\n                  return _context4.finish(13);\n\n                case 16:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee3, null, [[1, 10, 13, 16]]);\n        }));\n\n        return function (_x4) {\n          return _ref6.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"_fetchParsedKML\",\n    value: function _fetchParsedKML(e) {\n      return _(e, this.view.spatialReference, this.layer.refreshInterval).then(function (e) {\n        return V(e.data);\n      });\n    }\n  }, {\n    key: \"_removeMapImage\",\n    value: function _removeMapImage(e) {\n      var i = this._bitmapIndex.get(e);\n\n      i && (this._mapImageContainer.removeChild(i), this._bitmapIndex.delete(e));\n    }\n  }]);\n\n  return j;\n}(I(k));\n\ne([h()], j.prototype, \"_pointsView\", void 0), e([h()], j.prototype, \"_polylinesView\", void 0), e([h()], j.prototype, \"_polygonsView\", void 0), e([h()], j.prototype, \"_fetchingPromise\", void 0), e([h()], j.prototype, \"updating\", void 0), j = e([p(\"esri.views.2d.layers.KMLLayerView2D\")], j);\nvar M = j;\nexport default M;"],"sourceRoot":""}