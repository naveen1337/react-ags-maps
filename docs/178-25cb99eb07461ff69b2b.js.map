{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/core/AsyncSequence.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorker.js"],"names":["_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","_t","r","_super","_this","updating","pending","key","value","s","t","push","promise","callback","length","process","_this2","then","catch","shift","u","data","resolution","state","type","alive","gotoFetchCount","task","resume","gotoFetchFeatures","goToDone","get","featureCount","stateToString","previous","features","a","_ref","mark","_callee","wrap","_context","prev","next","fetchCount","sent","gotoFetchedCount","ok","stop","_x","_ref2","_callee2","_context2","fetchFeatures","gotoFetchedFeatures","_x2","finish","abort","extent","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","i","source","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","toString","slice","name","from","test","_unsupportedIterableToArray","F","done","_e4","f","TypeError","err","normalCompletion","didErr","step","_e5","return","arr","len","arr2","getLogger","_s","O","_queryFeaturesJSON","_queryFeaturesPBF","_fetchFeatures","_fetchCount","tilesOfInterest","availability","pendingTiles","Map","pendingEdits","pendingEditsAbortController","store","featureStore","geometryType","set","_get","filterProperties","JSON","stringify","_set","customParameters","tileInfo","tileSize","updatingHandles","initializeFetchExtent","add","refresh","id","_this3","deletePendingTile","clear","destroy","_this4","_this5","_ref3","_iterator","_step","_step$value","addedFeatures","updatedFeatures","deletedFeatures","abrupt","reset","map","_ref4","objectId","globalId","lookupObjectIdByGlobalId","addPromise","processEdits","queryFeaturesById","signal","processPendingTiles","_this6","capabilities","query","supportsExtent","_ref5","_i2","url","where","outSpatialReference","spatialReference","cacheHint","supportsCacheHint","configuration","fromJSON","t0","warn","handles","numberOfFeatures","numFeatures","values","debugInfo","storedTiles","markTilesNotAlive","createPendingTiles","deletePendingTiles","_step2","_iterator2","collectMissingTilesInfo","setAvailability","coveredArea","fullArea","_step3","_iterator3","missingTiles","_step3$value","_i3","_e2","createPendingTile","_this7","_i4","_s2","verifyTileComplexity","prepend","_step4","_iterator4","_e3","_this8","finishPendingTile","ensureFetchAllCounts","_step5","_iterator5","getFeatureCount","verifyVertexComplexity","verifyFeatureDensity","minimumVerticesPerFeature","j","E","_step6","_iterator6","_i5","updateAvailability","delete","_callee3","_context3","createCountQuery","timeout","x","_x3","_x4","_callee4","_a","_u","_yield$this$queryFeat","_c","_d","_context4","createFeaturesQuery","setPagingParameters","queryFeatures","exceededTransferLimit","num","concat","_x5","_x6","_x7","gdbVersion","timeExtent","globalIdField","objectIdField","Error","attributes","objectIds","supportsFormatPBF","queryFeaturesPBF","queryFeaturesJSON","_callee5","_yield$T","_context5","sourceSpatialReference","_x8","_x9","_callee6","_yield$v","_context6","_x10","_x11","createBaseQuery","outFields","returnGeometry","supportsResultType","resultType","returnZ","returnM","geometry","supportsPagination","_this$capabilities$qu","supportsMaxRecordCountFactor","tileMaxRecordCount","maxRecordCount","l","MAX_MAX_RECORD_COUNT_FACTOR","start","maxRecordCountFactor","Math","min","ceil","constructOnly","readOnly","_e","_store","_byteSize","byteSize","_t2","_t3","used","_t4","has","_t5","_t6","g","_processEditsRefetch","maximumByteSize","tileBounds","tiles","refCounts","tileFeatureCounts","tmpBoundingRect","_i","referenceFeature","addTileStorage","Set","byteSizeOfFeatures","addMany","applyByteSizeLimit","removeTileStorage","processEditsDelete","processEditsRefetch","size","unreferenceFeature","removeManyById","_this$featureStore","_loop","hasZ","hasM","forEachInBounds","undefined","createTileTree","simplify","collectMissingTiles","count","level","row","col","updateTileInfo","tilesAreRelated","populateChildren","floor","isLeaf","c","h","children","_r","remove","_h","mergeChildren","purge","forEachLeaf","_step7","_iterator7","_step8","_iterator8","_s3","_s4","collectMissingTilesRecurse","info","hasChildren","_o","_s5","addMissing","_step9","_iterator9","_s6","byteSizeOfFeature","byteSizeOfGeometry","lengths","coords","featureReferences","y","v","S","C","_t$EventedAccessor","w","_endApplyEdits","_beginApplyEdits","_getDebugInfo","_whenNotUpdating","_refresh","_updateTiles","_fetchCandidates","_configure","_setup","isInitializing","whenSetup","pendingApplyEdits","featureFetcher","queryEngine","_e$serviceInfo","serviceInfo","timeInfo","fields","watch","emit","notifyUpdating","resolve","configure","updateFeatureFetcherConfiguration","executeQueryForSnapping","point","distance","types","_callee7","_context7","_x12","_callee8","_context8","applyEdits","_x13","_x14","_callee9","_context9","edits","_x15","_x16","EventedAccessor"],"mappings":"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","file":"178-25cb99eb07461ff69b2b.js","sourcesContent":["import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as s } from \"../chunks/tslib.es6.js\";\nimport t from \"./Accessor.js\";\nimport { property as e } from \"./accessorSupport/decorators/property.js\";\nimport { subclass as i } from \"./accessorSupport/decorators/subclass.js\";\n\nvar r = /*#__PURE__*/function (_t) {\n  _inherits(r, _t);\n\n  var _super = _createSuper(r);\n\n  function r() {\n    var _this;\n\n    _classCallCheck(this, r);\n\n    _this = _super.apply(this, arguments), _this.updating = !1, _this.pending = [];\n    return _this;\n  }\n\n  _createClass(r, [{\n    key: \"push\",\n    value: function push(s, t) {\n      this.pending.push({\n        promise: s,\n        callback: t\n      }), 1 === this.pending.length && this.process();\n    }\n  }, {\n    key: \"process\",\n    value: function process() {\n      var _this2 = this;\n\n      if (!this.pending.length) return void (this.updating = !1);\n      this.updating = !0;\n      var s = this.pending[0];\n      s.promise.then(function (t) {\n        return s.callback(t);\n      }).catch(function () {}).then(function () {\n        _this2.pending.shift(), _this2.process();\n      });\n    }\n  }]);\n\n  return r;\n}(t);\n\ns([e()], r.prototype, \"updating\", void 0), r = s([i(\"esri.core.AsyncSequence\")], r);\nexport { r as AsyncSequence };","import _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { resultOrAbort as t } from \"../../../../../core/asyncUtils.js\";\nimport { isNone as e } from \"../../../../../core/maybe.js\";\nimport { createTask as s } from \"../../../../../core/promiseUtils.js\";\nimport { fromExtent as a, intersects as r, create as o } from \"../../../../../geometry/support/aaBoundingRect.js\";\n\nvar u = /*#__PURE__*/function () {\n  function u(t, e) {\n    _classCallCheck(this, u);\n\n    this.data = t, this.resolution = e, this.state = {\n      type: 0\n    }, this.alive = !0;\n  }\n\n  _createClass(u, [{\n    key: \"process\",\n    value: function process(t) {\n      switch (this.state.type) {\n        case 0:\n          return this.state = this.gotoFetchCount(this.state, t), this.state.task.promise.then(t.resume, t.resume);\n\n        case 1:\n          break;\n\n        case 2:\n          return this.state = this.gotoFetchFeatures(this.state, t), this.state.task.promise.then(t.resume, t.resume);\n\n        case 3:\n          break;\n\n        case 4:\n          this.state = this.goToDone(this.state, t);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"debugInfo\",\n    get: function get() {\n      return {\n        data: this.data,\n        featureCount: this.featureCount,\n        state: this.stateToString\n      };\n    }\n  }, {\n    key: \"featureCount\",\n    get: function get() {\n      switch (this.state.type) {\n        case 0:\n        case 1:\n          return 0;\n\n        case 2:\n          return this.state.featureCount;\n\n        case 3:\n          return this.state.previous.featureCount;\n\n        case 4:\n          return this.state.features.length;\n\n        case 5:\n          return this.state.previous.features.length;\n      }\n    }\n  }, {\n    key: \"stateToString\",\n    get: function get() {\n      switch (this.state.type) {\n        case 0:\n          return \"created\";\n\n        case 1:\n          return \"fetch-count\";\n\n        case 2:\n          return \"fetched-count\";\n\n        case 3:\n          return \"fetch-features\";\n\n        case 4:\n          return \"fetched-features\";\n\n        case 5:\n          return \"done\";\n      }\n    }\n  }, {\n    key: \"gotoFetchCount\",\n    value: function gotoFetchCount(e, a) {\n      var _this = this;\n\n      return {\n        type: 1,\n        previous: e,\n        task: s( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n            var s;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return t(a.fetchCount(_this, e));\n\n                  case 2:\n                    s = _context.sent;\n                    1 === _this.state.type && (_this.state = _this.gotoFetchedCount(_this.state, s.ok ? s.value : 1 / 0));\n\n                  case 4:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }())\n      };\n    }\n  }, {\n    key: \"gotoFetchedCount\",\n    value: function gotoFetchedCount(t, e) {\n      return {\n        type: 2,\n        featureCount: e,\n        previous: t\n      };\n    }\n  }, {\n    key: \"gotoFetchFeatures\",\n    value: function gotoFetchFeatures(e, a) {\n      var _this2 = this;\n\n      return {\n        type: 3,\n        previous: e,\n        task: s( /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(s) {\n            var r;\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.next = 2;\n                    return t(a.fetchFeatures(_this2, e.featureCount, s));\n\n                  case 2:\n                    r = _context2.sent;\n                    3 === _this2.state.type && (_this2.state = _this2.gotoFetchedFeatures(_this2.state, r.ok ? r.value : []));\n\n                  case 4:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2);\n          }));\n\n          return function (_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }())\n      };\n    }\n  }, {\n    key: \"gotoFetchedFeatures\",\n    value: function gotoFetchedFeatures(t, e) {\n      return {\n        type: 4,\n        previous: t,\n        features: e\n      };\n    }\n  }, {\n    key: \"goToDone\",\n    value: function goToDone(t, e) {\n      return e.finish(this, t.features), {\n        type: 5,\n        previous: t\n      };\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      var t = this.state;\n\n      switch (this.state = {\n        type: 0\n      }, t.type) {\n        case 0:\n        case 2:\n        case 4:\n        case 5:\n          break;\n\n        case 1:\n        case 3:\n          t.task.abort();\n      }\n    }\n  }, {\n    key: \"intersects\",\n    value: function intersects(t) {\n      return !(!e(t) && this.data.extent) || (a(t, i), r(this.data.extent, i));\n    }\n  }]);\n\n  return u;\n}();\n\nvar i = o();\nexport { u as PendingFeatureTile };","import _slicedToArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e4) { throw _e4; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e5) { didErr = true; err = _e5; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport { equals as t } from \"../../../../../core/arrayUtils.js\";\nimport { AsyncSequence as i } from \"../../../../../core/AsyncSequence.js\";\nimport { HandleOwner as s } from \"../../../../../core/HandleOwner.js\";\nimport { makeHandle as r } from \"../../../../../core/handleUtils.js\";\nimport o from \"../../../../../core/Logger.js\";\nimport { isSome as n, isNone as a, unwrap as l } from \"../../../../../core/maybe.js\";\nimport { createAbortController as u, createTask as c, throwIfAbortError as d } from \"../../../../../core/promiseUtils.js\";\nimport { property as h } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as p } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport f from \"../../../../../geometry/Extent.js\";\nimport { toExtent as y } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport { unquantizeOptimizedFeatureSet as g, convertFromFeatureSet as m } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport { OptimizedFeatureSetParserContext as b } from \"../../../../../rest/query/operations/pbfOptimizedFeatureSet.js\";\nimport { executeQueryForExtent as F, executeQueryPBF as T, executeQuery as v } from \"../../../../../rest/query/operations/query.js\";\nimport P from \"../../../../../rest/support/Query.js\";\nimport { PendingFeatureTile as I } from \"./PendingFeatureTile.js\";\nvar S = o.getLogger(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher\");\n\nvar O = /*#__PURE__*/function (_s) {\n  _inherits(O, _s);\n\n  var _super = _createSuper(O);\n\n  function O(e) {\n    var _this;\n\n    _classCallCheck(this, O);\n\n    _this = _super.call(this, e), _this.tilesOfInterest = [], _this.availability = 0, _this.pendingTiles = new Map(), _this.pendingEdits = new i(), _this.pendingEditsAbortController = u();\n    return _this;\n  }\n\n  _createClass(O, [{\n    key: \"minimumVerticesPerFeature\",\n    get: function get() {\n      var e;\n\n      switch (null == (e = this.store) ? void 0 : e.featureStore.geometryType) {\n        case \"esriGeometryPoint\":\n        case \"esriGeometryMultipoint\":\n          return 1;\n\n        case \"esriGeometryPolygon\":\n          return 4;\n\n        case \"esriGeometryPolyline\":\n          return 2;\n      }\n    }\n  }, {\n    key: \"filter\",\n    set: function set(e) {\n      var t = this._get(\"filter\"),\n          i = this.filterProperties(e);\n\n      JSON.stringify(t) !== JSON.stringify(i) && this._set(\"filter\", i);\n    }\n  }, {\n    key: \"customParameters\",\n    set: function set(e) {\n      var t = this._get(\"customParameters\");\n\n      JSON.stringify(t) !== JSON.stringify(e) && this._set(\"customParameters\", e);\n    }\n  }, {\n    key: \"configuration\",\n    get: function get() {\n      return {\n        filter: this.filter,\n        customParameters: this.customParameters,\n        tileInfo: this.tileInfo,\n        tileSize: this.tileSize\n      };\n    }\n  }, {\n    key: \"tileInfo\",\n    set: function set(e) {\n      var t = this._get(\"tileInfo\");\n\n      t !== e && (n(e) && n(t) && JSON.stringify(e) === JSON.stringify(t) || (this._set(\"tileInfo\", e), this.store.tileInfo = e));\n    }\n  }, {\n    key: \"tileSize\",\n    set: function set(e) {\n      this._get(\"tileSize\") !== e && this._set(\"tileSize\", e);\n    }\n  }, {\n    key: \"updating\",\n    get: function get() {\n      return this.updatingHandles.updating || this.pendingEdits.updating;\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      this.initializeFetchExtent(), this.updatingHandles.add(this, \"configuration\", function () {\n        return _this2.refresh();\n      }), this.updatingHandles.add(this, \"tilesOfInterest\", function (e, i) {\n        t(e, i, function (_ref, _ref2) {\n          var e = _ref.id;\n          var t = _ref2.id;\n          return e === t;\n        }) || _this2.process();\n      }, 1);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this3 = this;\n\n      this.pendingTiles.forEach(function (e) {\n        return _this3.deletePendingTile(e);\n      }), this.pendingTiles.clear(), this.store.destroy(), this.tilesOfInterest.length = 0, this.pendingEditsAbortController.abort(), this.pendingEditsAbortController = null;\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var _this4 = this;\n\n      this.store.refresh(), this.pendingTiles.forEach(function (e) {\n        return _this4.deletePendingTile(e);\n      }), this.process();\n    }\n  }, {\n    key: \"applyEdits\",\n    value: function applyEdits(e) {\n      var _this5 = this;\n\n      this.pendingEdits.push(e, /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n          var _iterator, _step, _step$value, _i, t;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!(0 === e.addedFeatures.length && 0 === e.updatedFeatures.length && 0 === e.deletedFeatures.length)) {\n                    _context.next = 2;\n                    break;\n                  }\n\n                  return _context.abrupt(\"return\");\n\n                case 2:\n                  _iterator = _createForOfIteratorHelper(_this5.pendingTiles);\n\n                  try {\n                    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                      _step$value = _slicedToArray(_step.value, 2), _i = _step$value[1];\n\n                      _i.reset();\n                    }\n                  } catch (err) {\n                    _iterator.e(err);\n                  } finally {\n                    _iterator.f();\n                  }\n\n                  t = _objectSpread(_objectSpread({}, e), {}, {\n                    deletedFeatures: e.deletedFeatures.map(function (_ref4) {\n                      var e = _ref4.objectId,\n                          t = _ref4.globalId;\n                      return e && -1 !== e ? e : _this5.lookupObjectIdByGlobalId(t);\n                    })\n                  });\n                  _context.next = 7;\n                  return _this5.updatingHandles.addPromise(_this5.store.processEdits(t, function (e, t) {\n                    return _this5.queryFeaturesById(e, t);\n                  }, _this5.pendingEditsAbortController.signal));\n\n                case 7:\n                  _this5.processPendingTiles();\n\n                case 8:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"initializeFetchExtent\",\n    value: function initializeFetchExtent() {\n      var _this6 = this;\n\n      if (!this.capabilities.query.supportsExtent) return;\n      var e = c( /*#__PURE__*/function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n          var t, _i2;\n\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.prev = 0;\n                  _context2.next = 3;\n                  return F(_this6.url, new P({\n                    where: \"1=1\",\n                    outSpatialReference: _this6.spatialReference,\n                    cacheHint: !!_this6.capabilities.query.supportsCacheHint || void 0\n                  }), {\n                    query: _this6.configuration.customParameters,\n                    signal: e\n                  });\n\n                case 3:\n                  _i2 = _context2.sent;\n                  _this6.store.extent = f.fromJSON(null == (t = _i2.data) ? void 0 : t.extent);\n                  _context2.next = 10;\n                  break;\n\n                case 7:\n                  _context2.prev = 7;\n                  _context2.t0 = _context2[\"catch\"](0);\n                  d(_context2.t0), S.warn(\"Failed to fetch data extent\", _context2.t0);\n\n                case 10:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, null, [[0, 7]]);\n        }));\n\n        return function (_x2) {\n          return _ref5.apply(this, arguments);\n        };\n      }());\n      this.updatingHandles.addPromise(e.promise.then(function () {\n        return _this6.process();\n      })), this.handles.add(r(function () {\n        return e.abort();\n      }));\n    }\n  }, {\n    key: \"debugInfo\",\n    get: function get() {\n      return {\n        numberOfFeatures: this.store.featureStore.numFeatures,\n        tilesOfInterest: this.tilesOfInterest,\n        pendingTiles: Array.from(this.pendingTiles.values()).map(function (e) {\n          return e.debugInfo;\n        }),\n        storedTiles: this.store.debugInfo\n      };\n    }\n  }, {\n    key: \"process\",\n    value: function process() {\n      this.markTilesNotAlive(), this.createPendingTiles(), this.deletePendingTiles(), this.processPendingTiles();\n    }\n  }, {\n    key: \"markTilesNotAlive\",\n    value: function markTilesNotAlive() {\n      var _iterator2 = _createForOfIteratorHelper(this.pendingTiles),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _step2$value = _slicedToArray(_step2.value, 2),\n              _e = _step2$value[1];\n\n          _e.alive = !1;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"createPendingTiles\",\n    value: function createPendingTiles() {\n      var e = this.collectMissingTilesInfo();\n\n      if (this.setAvailability(a(e) ? 1 : e.coveredArea / e.fullArea), !a(e)) {\n        var _iterator3 = _createForOfIteratorHelper(e.missingTiles),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _step3$value = _step3.value,\n                t = _step3$value.data,\n                _i3 = _step3$value.resolution;\n\n            var _e2 = this.pendingTiles.get(t.id);\n\n            _e2 ? (_e2.resolution = _i3, _e2.alive = !0) : this.createPendingTile(t, _i3);\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      }\n    }\n  }, {\n    key: \"collectMissingTilesInfo\",\n    value: function collectMissingTilesInfo() {\n      var _this7 = this;\n\n      var e = null;\n\n      for (var t = this.tilesOfInterest.length - 1; t >= 0; t--) {\n        var _i4 = this.tilesOfInterest[t],\n            _s2 = this.store.process(_i4, function (e, t) {\n          return _this7.verifyTileComplexity(e, t);\n        });\n\n        a(e) ? e = _s2 : e.prepend(_s2);\n      }\n\n      return e;\n    }\n  }, {\n    key: \"deletePendingTiles\",\n    value: function deletePendingTiles() {\n      var _iterator4 = _createForOfIteratorHelper(this.pendingTiles),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _step4$value = _slicedToArray(_step4.value, 2),\n              _e3 = _step4$value[1];\n\n          _e3.alive || this.deletePendingTile(_e3);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"processPendingTiles\",\n    value: function processPendingTiles() {\n      var _this8 = this;\n\n      var e = {\n        fetchCount: function fetchCount(e, t) {\n          return _this8.fetchCount(e, t);\n        },\n        fetchFeatures: function fetchFeatures(e, t, i) {\n          return _this8.fetchFeatures(e, t, i);\n        },\n        finish: function finish(e, t) {\n          return _this8.finishPendingTile(e, t);\n        },\n        resume: function resume() {\n          return _this8.processPendingTiles();\n        }\n      };\n\n      if (this.ensureFetchAllCounts(e)) {\n        var _iterator5 = _createForOfIteratorHelper(this.pendingTiles),\n            _step5;\n\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var _step5$value = _slicedToArray(_step5.value, 2),\n                t = _step5$value[1];\n\n            this.verifyTileComplexity(this.store.getFeatureCount(t.data), t.resolution) && this.updatingHandles.addPromise(t.process(e));\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      }\n    }\n  }, {\n    key: \"verifyTileComplexity\",\n    value: function verifyTileComplexity(e, t) {\n      return this.verifyVertexComplexity(e) && this.verifyFeatureDensity(e, t);\n    }\n  }, {\n    key: \"verifyVertexComplexity\",\n    value: function verifyVertexComplexity(e) {\n      return e * this.minimumVerticesPerFeature < j;\n    }\n  }, {\n    key: \"verifyFeatureDensity\",\n    value: function verifyFeatureDensity(e, t) {\n      if (a(this.tileInfo)) return !1;\n      var i = this.tileSize * t;\n      return e * (w / (i * i)) < E;\n    }\n  }, {\n    key: \"ensureFetchAllCounts\",\n    value: function ensureFetchAllCounts(e) {\n      var t = !0;\n\n      var _iterator6 = _createForOfIteratorHelper(this.pendingTiles),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _step6$value = _slicedToArray(_step6.value, 2),\n              _i5 = _step6$value[1];\n\n          _i5.state.type < 2 && this.updatingHandles.addPromise(_i5.process(e)), _i5.state.type <= 1 && (t = !1);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n\n      return t;\n    }\n  }, {\n    key: \"finishPendingTile\",\n    value: function finishPendingTile(e, t) {\n      this.store.add(e.data, t), this.deletePendingTile(e), this.updateAvailability();\n    }\n  }, {\n    key: \"updateAvailability\",\n    value: function updateAvailability() {\n      var e = this.collectMissingTilesInfo();\n      this.setAvailability(a(e) ? 1 : e.coveredArea / e.fullArea);\n    }\n  }, {\n    key: \"setAvailability\",\n    value: function setAvailability(e) {\n      this._set(\"availability\", e);\n    }\n  }, {\n    key: \"createPendingTile\",\n    value: function createPendingTile(e, t) {\n      var i = new I(e, t);\n      return this.pendingTiles.set(e.id, i), i;\n    }\n  }, {\n    key: \"deletePendingTile\",\n    value: function deletePendingTile(e) {\n      e.reset(), this.pendingTiles.delete(e.data.id);\n    }\n  }, {\n    key: \"fetchCount\",\n    value: function () {\n      var _fetchCount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, t) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", this.store.fetchCount(e.data, this.url, this.createCountQuery(e), {\n                  query: this.customParameters,\n                  timeout: x,\n                  signal: t\n                }));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function fetchCount(_x3, _x4) {\n        return _fetchCount.apply(this, arguments);\n      }\n\n      return fetchCount;\n    }()\n  }, {\n    key: \"fetchFeatures\",\n    value: function () {\n      var _fetchFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e, t, i) {\n        var s, r, o, n, _a, _u, _yield$this$queryFeat, _c, _d;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                r = 0, o = 0, n = t;\n\n              case 1:\n                _a = this.createFeaturesQuery(e);\n                _u = this.setPagingParameters(_a, r, n);\n                _context4.next = 5;\n                return this.queryFeatures(_a, i);\n\n              case 5:\n                _yield$this$queryFeat = _context4.sent;\n                _c = _yield$this$queryFeat.features;\n                _d = _yield$this$queryFeat.exceededTransferLimit;\n\n                if (!(_u && (r += l(_a.num)), o += _c.length, s = s ? s.concat(_c) : _c, n = t - o, !_u || !_d || n <= 0)) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", s);\n\n              case 10:\n                _context4.next = 1;\n                break;\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function fetchFeatures(_x5, _x6, _x7) {\n        return _fetchFeatures.apply(this, arguments);\n      }\n\n      return fetchFeatures;\n    }()\n  }, {\n    key: \"filterProperties\",\n    value: function filterProperties(e) {\n      return a(e) ? {\n        where: \"1=1\",\n        gdbVersion: void 0,\n        timeExtent: void 0\n      } : {\n        where: e.where || \"1=1\",\n        timeExtent: e.timeExtent,\n        gdbVersion: e.gdbVersion\n      };\n    }\n  }, {\n    key: \"lookupObjectIdByGlobalId\",\n    value: function lookupObjectIdByGlobalId(e) {\n      var t = this.globalIdField,\n          i = this.objectIdField;\n      if (a(t)) throw new Error(\"Expected globalIdField to be defined\");\n      var s = null;\n      if (this.store.featureStore.forEach(function (r) {\n        var o;\n        e === r.attributes[t] && (s = null != (o = r.objectId) ? o : r.attributes[i]);\n      }), a(s)) throw new Error(\"Expected to find a feature with globalId \".concat(e));\n      return s;\n    }\n  }, {\n    key: \"queryFeaturesById\",\n    value: function queryFeaturesById(e, t) {\n      var i = this.createFeaturesQuery(null);\n      return i.objectIds = e, this.queryFeatures(i, t);\n    }\n  }, {\n    key: \"queryFeatures\",\n    value: function queryFeatures(e, t) {\n      return this.capabilities.query.supportsFormatPBF ? this.queryFeaturesPBF(e, t) : this.queryFeaturesJSON(e, t);\n    }\n  }, {\n    key: \"queryFeaturesPBF\",\n    value: function () {\n      var _queryFeaturesPBF = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e, t) {\n        var i, _yield$T, s;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                i = this.sourceSpatialReference;\n                _context5.next = 3;\n                return T(this.url, e, new b({\n                  sourceSpatialReference: i\n                }), {\n                  query: this.configuration.customParameters,\n                  timeout: x,\n                  signal: t\n                });\n\n              case 3:\n                _yield$T = _context5.sent;\n                s = _yield$T.data;\n                return _context5.abrupt(\"return\", g(s));\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function queryFeaturesPBF(_x8, _x9) {\n        return _queryFeaturesPBF.apply(this, arguments);\n      }\n\n      return queryFeaturesPBF;\n    }()\n  }, {\n    key: \"queryFeaturesJSON\",\n    value: function () {\n      var _queryFeaturesJSON = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e, t) {\n        var i, _yield$v, s;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                i = this.sourceSpatialReference;\n                _context6.next = 3;\n                return v(this.url, e, i, {\n                  query: this.configuration.customParameters,\n                  timeout: x,\n                  signal: t\n                });\n\n              case 3:\n                _yield$v = _context6.sent;\n                s = _yield$v.data;\n                return _context6.abrupt(\"return\", m(s, this.objectIdField));\n\n              case 6:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function queryFeaturesJSON(_x10, _x11) {\n        return _queryFeaturesJSON.apply(this, arguments);\n      }\n\n      return queryFeaturesJSON;\n    }()\n  }, {\n    key: \"createCountQuery\",\n    value: function createCountQuery(e) {\n      var t = this.createBaseQuery(e);\n      return this.capabilities.query.supportsCacheHint && (t.cacheHint = !0), t;\n    }\n  }, {\n    key: \"createFeaturesQuery\",\n    value: function createFeaturesQuery(e) {\n      var t = this.createBaseQuery(e);\n      return t.outFields = this.globalIdField ? [this.globalIdField, this.objectIdField] : [this.objectIdField], t.returnGeometry = !0, n(e) && (this.capabilities.query.supportsResultType ? t.resultType = \"tile\" : this.capabilities.query.supportsCacheHint && (t.cacheHint = !0)), t;\n    }\n  }, {\n    key: \"createBaseQuery\",\n    value: function createBaseQuery(e) {\n      var t = new P({\n        returnZ: !1,\n        returnM: !1,\n        geometry: n(this.tileInfo) && n(e) ? y(e.data.extent, this.tileInfo.spatialReference) : void 0\n      }),\n          i = this.configuration.filter;\n      return n(i) && (t.where = i.where, t.gdbVersion = i.gdbVersion, t.timeExtent = i.timeExtent), t.outSpatialReference = this.spatialReference, t;\n    }\n  }, {\n    key: \"setPagingParameters\",\n    value: function setPagingParameters(e, t, i) {\n      if (!this.capabilities.query.supportsPagination) return !1;\n      var _this$capabilities$qu = this.capabilities.query,\n          s = _this$capabilities$qu.supportsMaxRecordCountFactor,\n          r = _this$capabilities$qu.supportsCacheHint,\n          o = _this$capabilities$qu.tileMaxRecordCount,\n          n = _this$capabilities$qu.maxRecordCount,\n          a = _this$capabilities$qu.supportsResultType,\n          l = s ? P.MAX_MAX_RECORD_COUNT_FACTOR : 1,\n          u = l * ((a || r) && o ? o : n || C);\n      return e.start = t, s ? (e.maxRecordCountFactor = Math.min(l, Math.ceil(i / u)), e.num = Math.min(i, e.maxRecordCountFactor * u)) : e.num = Math.min(i, u), !0;\n    }\n  }]);\n\n  return O;\n}(s);\n\ne([h({\n  constructOnly: !0\n})], O.prototype, \"url\", void 0), e([h({\n  constructOnly: !0\n})], O.prototype, \"objectIdField\", void 0), e([h({\n  constructOnly: !0\n})], O.prototype, \"globalIdField\", void 0), e([h({\n  constructOnly: !0\n})], O.prototype, \"capabilities\", void 0), e([h({\n  constructOnly: !0\n})], O.prototype, \"sourceSpatialReference\", void 0), e([h({\n  constructOnly: !0\n})], O.prototype, \"spatialReference\", void 0), e([h({\n  constructOnly: !0\n})], O.prototype, \"store\", void 0), e([h({\n  readOnly: !0\n})], O.prototype, \"minimumVerticesPerFeature\", null), e([h()], O.prototype, \"filter\", null), e([h()], O.prototype, \"customParameters\", null), e([h({\n  readOnly: !0\n})], O.prototype, \"configuration\", null), e([h()], O.prototype, \"tileInfo\", null), e([h()], O.prototype, \"tileSize\", null), e([h()], O.prototype, \"tilesOfInterest\", void 0), e([h({\n  readOnly: !0\n})], O.prototype, \"updating\", null), e([h({\n  readOnly: !0\n})], O.prototype, \"availability\", void 0), O = e([p(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher\")], O);\nvar C = 2e3,\n    x = 6e5,\n    j = 1e6,\n    w = 25,\n    E = 1;\nexport { O as FeatureServiceTiledFetcher };","import _slicedToArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nvar t = /*#__PURE__*/function () {\n  function t() {\n    _classCallCheck(this, t);\n\n    this._store = new Map(), this._byteSize = 0;\n  }\n\n  _createClass(t, [{\n    key: \"set\",\n    value: function set(_t, e) {\n      this.delete(_t), this._store.set(_t, e), this._byteSize += e.byteSize;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(_t2) {\n      var e = this._store.get(_t2);\n\n      return !!this._store.delete(_t2) && (this._byteSize -= e.byteSize, !0);\n    }\n  }, {\n    key: \"get\",\n    value: function get(_t3) {\n      return this.used(_t3), this._store.get(_t3);\n    }\n  }, {\n    key: \"has\",\n    value: function has(_t4) {\n      return this.used(_t4), this._store.has(_t4);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this._store.clear();\n    }\n  }, {\n    key: \"applyByteSizeLimit\",\n    value: function applyByteSizeLimit(_t5, e) {\n      var _iterator = _createForOfIteratorHelper(this._store),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              s = _step$value[0],\n              r = _step$value[1];\n\n          if (this._byteSize <= _t5) break;\n          this.delete(s), e(r);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"values\",\n    value: function values() {\n      return this._store.values();\n    }\n  }, {\n    key: Symbol.iterator,\n    value: function value() {\n      return this._store[Symbol.iterator]();\n    }\n  }, {\n    key: \"used\",\n    value: function used(_t6) {\n      var e = this._store.get(_t6);\n\n      e && (this._store.delete(_t6), this._store.set(_t6, e));\n    }\n  }]);\n\n  return t;\n}();\n\nexport { t as FeatureServiceTileCache };","import _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Accessor.js\";\nimport { estimateAttributesObjectSize as s, estimateFixedArraySize as i } from \"../../../../../core/byteSizeEstimations.js\";\nimport { isNone as r, isSome as o } from \"../../../../../core/maybe.js\";\nimport { property as n } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/Logger.js\";\nimport { subclass as l } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { create as c, intersects as a, fromExtent as h, area as u } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsOptimizedGeometry as d } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport { BoundsStore as f } from \"../../../../../layers/graphics/data/BoundsStore.js\";\nimport { executeQueryForCount as p } from \"../../../../../rest/query/operations/query.js\";\nimport { FeatureServiceTileCache as m } from \"./FeatureServiceTileCache.js\";\n\nvar g = /*#__PURE__*/function (_t) {\n  _inherits(g, _t);\n\n  var _super = _createSuper(g);\n\n  function g(e) {\n    var _this;\n\n    _classCallCheck(this, g);\n\n    _this = _super.call(this, e), _this.tileInfo = null, _this.extent = null, _this.maximumByteSize = 10485760, _this.tileBounds = new f(), _this.tiles = new m(), _this.refCounts = new Map(), _this.tileFeatureCounts = new Map(), _this.tmpBoundingRect = c();\n    return _this;\n  }\n\n  _createClass(g, [{\n    key: \"add\",\n    value: function add(e, t) {\n      var _this2 = this;\n\n      var s = [];\n\n      var _iterator = _createForOfIteratorHelper(t),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _i = _step.value;\n          0 === this.referenceFeature(_i.objectId) && s.push(_i);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.addTileStorage(e, new Set(t.map(function (_ref) {\n        var e = _ref.objectId;\n        return e;\n      })), this.byteSizeOfFeatures(t)), this.featureStore.addMany(s), this.tiles.applyByteSizeLimit(this.maximumByteSize, function (e) {\n        return _this2.removeTileStorage(e);\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.clear(), this.tileFeatureCounts.clear();\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.featureStore.clear(), this.tileBounds.clear(), this.tiles.clear(), this.refCounts.clear();\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.clear(), this.tileFeatureCounts.clear();\n    }\n  }, {\n    key: \"processEdits\",\n    value: function processEdits(e, t, s) {\n      return this.processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)), this.processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures), t, s);\n    }\n  }, {\n    key: \"addTileStorage\",\n    value: function addTileStorage(e, t, s) {\n      this.tiles.set(e.id, new y(e, t, s)), this.tileBounds.set(e.id, e.extent), this.tileFeatureCounts.set(e.id, t.size);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(_ref2) {\n      var e = _ref2.id;\n      var t = this.tiles.get(e);\n      t && this.removeTileStorage(t);\n    }\n  }, {\n    key: \"removeTileStorage\",\n    value: function removeTileStorage(e) {\n      var t = [];\n\n      var _iterator2 = _createForOfIteratorHelper(e.objectIds),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _i2 = _step2.value;\n          1 === this.unreferenceFeature(_i2) && t.push(_i2);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      this.featureStore.removeManyById(t);\n      var s = e.data.id;\n      this.tiles.delete(s), this.tileBounds.delete(s);\n    }\n  }, {\n    key: \"processEditsDelete\",\n    value: function processEditsDelete(e) {\n      this.featureStore.removeManyById(e);\n\n      var _iterator3 = _createForOfIteratorHelper(this.tiles),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _step3$value = _slicedToArray(_step3.value, 2),\n              _t2 = _step3$value[1];\n\n          var _iterator5 = _createForOfIteratorHelper(e),\n              _step5;\n\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var _s = _step5.value;\n\n              _t2.objectIds.delete(_s);\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n\n          this.tileFeatureCounts.set(_t2.data.id, _t2.objectIds.size);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      var _iterator4 = _createForOfIteratorHelper(e),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _t3 = _step4.value;\n          this.refCounts.delete(_t3);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"processEditsRefetch\",\n    value: function () {\n      var _processEditsRefetch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e, t, s) {\n        var _this3 = this;\n\n        var i, _this$featureStore, r, o, _iterator6, _step6, _loop;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return t(e, s);\n\n              case 2:\n                i = _context.sent.features;\n                _this$featureStore = this.featureStore;\n                r = _this$featureStore.hasZ;\n                o = _this$featureStore.hasM;\n                _iterator6 = _createForOfIteratorHelper(i);\n\n                try {\n                  _loop = function _loop() {\n                    var n = _step6.value;\n                    var e = d(_this3.tmpBoundingRect, n.geometry, r, o);\n\n                    _this3.tileBounds.forEachInBounds(e, function (e) {\n                      var t = _this3.tiles.get(e);\n\n                      _this3.featureStore.add(n), t.objectIds.has(n.objectId) || (t.objectIds.add(n.objectId), _this3.referenceFeature(n.objectId), _this3.tileFeatureCounts.set(t.data.id, t.objectIds.size));\n                    });\n                  };\n\n                  for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n                    _loop();\n                  }\n                } catch (err) {\n                  _iterator6.e(err);\n                } finally {\n                  _iterator6.f();\n                }\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function processEditsRefetch(_x, _x2, _x3) {\n        return _processEditsRefetch.apply(this, arguments);\n      }\n\n      return processEditsRefetch;\n    }()\n  }, {\n    key: \"process\",\n    value: function process(e) {\n      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return !0;\n      };\n      if (r(this.tileInfo) || !e.extent || o(this.extent) && !a(h(this.extent, this.tmpBoundingRect), e.extent)) return new S(e);\n      if (this.tiles.has(e.id)) return new S(e);\n      var s = this.createTileTree(e, this.tileInfo);\n      return this.simplify(s, t, null, 0, 1), this.collectMissingTiles(e, s, this.tileInfo);\n    }\n  }, {\n    key: \"debugInfo\",\n    get: function get() {\n      var _this4 = this;\n\n      return Array.from(this.tiles.values()).map(function (_ref3) {\n        var e = _ref3.data;\n        return {\n          data: e,\n          featureCount: _this4.tileFeatureCounts.get(e.id) || 0\n        };\n      });\n    }\n  }, {\n    key: \"getFeatureCount\",\n    value: function getFeatureCount(e) {\n      var t = this.tileFeatureCounts.get(e.id);\n      return null != t ? t : 0;\n    }\n  }, {\n    key: \"fetchCount\",\n    value: function () {\n      var _fetchCount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e, t, s, i) {\n        var r, o;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                r = this.tileFeatureCounts.get(e.id);\n\n                if (!(null != r)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", r);\n\n              case 3:\n                _context2.next = 5;\n                return p(t, s, i);\n\n              case 5:\n                o = _context2.sent;\n                return _context2.abrupt(\"return\", (this.tileFeatureCounts.set(e.id, o.data.count), o.data.count));\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function fetchCount(_x4, _x5, _x6, _x7) {\n        return _fetchCount.apply(this, arguments);\n      }\n\n      return fetchCount;\n    }()\n  }, {\n    key: \"createTileTree\",\n    value: function createTileTree(e, t) {\n      var _this5 = this;\n\n      var s = new v(e.level, e.row, e.col);\n      return t.updateTileInfo(s, 1), this.tileBounds.forEachInBounds(e.extent, function (i) {\n        var r = _this5.tiles.get(i).data;\n\n        _this5.tilesAreRelated(e, r) && _this5.populateChildren(s, r, t, _this5.tileFeatureCounts.get(r.id) || 0);\n      }), s;\n    }\n  }, {\n    key: \"tilesAreRelated\",\n    value: function tilesAreRelated(e, t) {\n      if (!e || !t) return !1;\n      if (e.level === t.level) return e.row === t.row && e.col === t.col;\n      var s = e.level < t.level,\n          i = s ? e : t,\n          r = s ? t : e,\n          o = 1 << r.level - i.level;\n      return Math.floor(r.row / o) === i.row && Math.floor(r.col / o) === i.col;\n    }\n  }, {\n    key: \"populateChildren\",\n    value: function populateChildren(e, t, s, i) {\n      var r = t.level - e.level - 1;\n      if (r < 0) return void (e.isLeaf = !0);\n      var n = t.row >> r,\n          l = t.col >> r,\n          c = e.row << 1,\n          a = l - (e.col << 1) + (n - c << 1),\n          h = e.children[a];\n      if (o(h)) this.populateChildren(h, t, s, i);else {\n        var _r = new v(e.level + 1, n, l);\n\n        s.updateTileInfo(_r, 1), e.children[a] = _r, this.populateChildren(_r, t, s, i);\n      }\n    }\n  }, {\n    key: \"simplify\",\n    value: function simplify(e, t, s, i, r) {\n      var n = r * r;\n      if (e.isLeaf) return t(this.getFeatureCount(e), r) ? 0 : (this.remove(e), o(s) && (s.children[i] = null), n);\n      var l = r / 2,\n          c = l * l;\n      var a = 0;\n\n      for (var _h = 0; _h < e.children.length; _h++) {\n        var _s2 = e.children[_h];\n        a += o(_s2) ? this.simplify(_s2, t, e, _h, l) : c;\n      }\n\n      return 0 === a ? this.mergeChildren(e) : 1 - a / n < F && (this.purge(e), o(s) && (s.children[i] = null), a = n), a;\n    }\n  }, {\n    key: \"mergeChildren\",\n    value: function mergeChildren(e) {\n      var _this6 = this;\n\n      var t = new Set();\n      var s = 0;\n      this.forEachLeaf(e, function (e) {\n        var i = _this6.tiles.get(e.id);\n\n        if (i) {\n          s += i.byteSize;\n\n          var _iterator7 = _createForOfIteratorHelper(i.objectIds),\n              _step7;\n\n          try {\n            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n              var _e = _step7.value;\n              t.has(_e) || (t.add(_e), _this6.referenceFeature(_e));\n            }\n          } catch (err) {\n            _iterator7.e(err);\n          } finally {\n            _iterator7.f();\n          }\n\n          _this6.remove(e);\n        }\n      }), this.addTileStorage(e, t, s), e.isLeaf = !0, e.children[0] = e.children[1] = e.children[2] = e.children[3] = null, this.tileFeatureCounts.set(e.id, t.size);\n    }\n  }, {\n    key: \"forEachLeaf\",\n    value: function forEachLeaf(e, t) {\n      var _iterator8 = _createForOfIteratorHelper(e.children),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var _s3 = _step8.value;\n          r(_s3) || (_s3.isLeaf ? t(_s3) : this.forEachLeaf(_s3, t));\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n    }\n  }, {\n    key: \"purge\",\n    value: function purge(e) {\n      if (!r(e)) if (e.isLeaf) this.remove(e);else for (var _t4 = 0; _t4 < e.children.length; _t4++) {\n        var _s4 = e.children[_t4];\n        this.purge(_s4), e.children[_t4] = null;\n      }\n    }\n  }, {\n    key: \"collectMissingTiles\",\n    value: function collectMissingTiles(e, t, s) {\n      var i = new C(s, e, this.extent);\n      return this.collectMissingTilesRecurse(t, i, 1), i.info;\n    }\n  }, {\n    key: \"collectMissingTilesRecurse\",\n    value: function collectMissingTilesRecurse(e, t, s) {\n      if (e.isLeaf) return;\n      if (!e.hasChildren) return void t.addMissing(e.level, e.row, e.col, s);\n      var i = s / 2;\n\n      for (var _o = 0; _o < e.children.length; _o++) {\n        var _s5 = e.children[_o];\n        r(_s5) ? t.addMissing(e.level + 1, (e.row << 1) + ((2 & _o) >> 1), (e.col << 1) + (1 & _o), i) : this.collectMissingTilesRecurse(_s5, t, i);\n      }\n    }\n  }, {\n    key: \"referenceFeature\",\n    value: function referenceFeature(e) {\n      var t = (this.refCounts.get(e) || 0) + 1;\n      return this.refCounts.set(e, t), 1 === t ? 0 : 2;\n    }\n  }, {\n    key: \"unreferenceFeature\",\n    value: function unreferenceFeature(e) {\n      var t = (this.refCounts.get(e) || 0) - 1;\n      return 0 === t ? (this.refCounts.delete(e), 1) : (t > 0 && this.refCounts.set(e, t), 2);\n    }\n  }, {\n    key: \"byteSizeOfFeatures\",\n    value: function byteSizeOfFeatures(e) {\n      var t = 0;\n\n      var _iterator9 = _createForOfIteratorHelper(e),\n          _step9;\n\n      try {\n        for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n          var _s6 = _step9.value;\n          t += this.byteSizeOfFeature(_s6);\n        }\n      } catch (err) {\n        _iterator9.e(err);\n      } finally {\n        _iterator9.f();\n      }\n\n      return t;\n    }\n  }, {\n    key: \"byteSizeOfFeature\",\n    value: function byteSizeOfFeature(e) {\n      return 32 + this.byteSizeOfGeometry(e.geometry) + s(e.attributes);\n    }\n  }, {\n    key: \"byteSizeOfGeometry\",\n    value: function byteSizeOfGeometry(e) {\n      if (!e) return 0;\n      var t = i(e.lengths, 4);\n      return 32 + i(e.coords, 8) + t;\n    }\n  }, {\n    key: \"test\",\n    get: function get() {\n      var _this7 = this;\n\n      return {\n        tiles: Array.from(this.tiles.values()).map(function (e) {\n          return \"\".concat(e.data.id, \":[\").concat(Array.from(e.objectIds), \"]\");\n        }),\n        featureReferences: Array.from(this.refCounts.keys()).map(function (e) {\n          return \"\".concat(e, \":\").concat(_this7.refCounts.get(e));\n        })\n      };\n    }\n  }]);\n\n  return g;\n}(t);\n\ne([n({\n  constructOnly: !0\n})], g.prototype, \"featureStore\", void 0), e([n()], g.prototype, \"tileInfo\", void 0), e([n()], g.prototype, \"extent\", void 0), e([n()], g.prototype, \"maximumByteSize\", void 0), g = e([l(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore\")], g);\n\nvar y = function y(e, t, s) {\n  _classCallCheck(this, y);\n\n  this.data = e, this.objectIds = t, this.byteSize = s;\n};\n\nvar v = /*#__PURE__*/function () {\n  function v(e, t, s) {\n    _classCallCheck(this, v);\n\n    this.level = e, this.row = t, this.col = s, this.isLeaf = !1, this.extent = null, this.children = [null, null, null, null];\n  }\n\n  _createClass(v, [{\n    key: \"hasChildren\",\n    get: function get() {\n      return !this.isLeaf && (o(this.children[0]) || o(this.children[1]) || o(this.children[2]) || o(this.children[3]));\n    }\n  }]);\n\n  return v;\n}();\n\nvar S = /*#__PURE__*/function () {\n  function S(e) {\n    var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, S);\n\n    this.missingTiles = t, this.fullArea = 0, this.coveredArea = 0, this.fullArea = u(e.extent), this.coveredArea = this.fullArea;\n  }\n\n  _createClass(S, [{\n    key: \"prepend\",\n    value: function prepend(e) {\n      this.missingTiles = e.missingTiles.concat(this.missingTiles), this.coveredArea += e.coveredArea, this.fullArea += e.fullArea;\n    }\n  }]);\n\n  return S;\n}();\n\nvar C = /*#__PURE__*/function () {\n  function C(e, t, s) {\n    _classCallCheck(this, C);\n\n    this.tileInfo = e, this.extent = null, this.info = new S(t), o(s) && (this.extent = h(s));\n  }\n\n  _createClass(C, [{\n    key: \"addMissing\",\n    value: function addMissing(e, t, s, i) {\n      var r = {\n        id: null,\n        level: e,\n        row: t,\n        col: s\n      };\n      this.tileInfo.updateTileInfo(r, 1), !o(r.extent) || o(this.extent) && !a(this.extent, r.extent) || (this.info.missingTiles.push({\n        data: r,\n        resolution: i\n      }), this.info.coveredArea -= u(r.extent));\n    }\n  }]);\n\n  return C;\n}();\n\nvar F = .18751;\nexport { g as FeatureServiceTileStore, S as ProcessResult };","import _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Evented.js\";\nimport i from \"../../../../../core/Handles.js\";\nimport { isSome as r } from \"../../../../../core/maybe.js\";\nimport { createDeferred as s, throwIfAborted as a, whenOrAbort as n } from \"../../../../../core/promiseUtils.js\";\nimport { whenNotOnce as o } from \"../../../../../core/watchUtils.js\";\nimport { property as p } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/Logger.js\";\nimport { subclass as u } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport l from \"../../../../../geometry/SpatialReference.js\";\nimport c from \"../../../../../layers/graphics/data/FeatureStore.js\";\nimport d from \"../../../../../layers/graphics/data/QueryEngine.js\";\nimport h from \"../../../../../layers/support/TileInfo.js\";\nimport f from \"../../../../../layers/support/TimeInfo.js\";\nimport m from \"../../../../../rest/support/Query.js\";\nimport { FeatureServiceTiledFetcher as g } from \"./FeatureServiceTiledFetcher.js\";\nimport { FeatureServiceTileStore as y } from \"./FeatureServiceTileStore.js\";\nimport { WatchUpdatingTracking as S } from \"../../../../support/WatchUpdatingTracking.js\";\n\nvar w = /*#__PURE__*/function (_t$EventedAccessor) {\n  _inherits(w, _t$EventedAccessor);\n\n  var _super = _createSuper(w);\n\n  function w() {\n    var _this;\n\n    _classCallCheck(this, w);\n\n    _this = _super.apply(this, arguments), _this.isInitializing = !0, _this.whenSetup = s(), _this.handles = new i(), _this.updatingHandles = new S(), _this.pendingApplyEdits = new Map();\n    return _this;\n  }\n\n  _createClass(w, [{\n    key: \"updating\",\n    get: function get() {\n      return this.featureFetcher.updating || this.isInitializing || this.updatingHandles.updating;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.featureFetcher.destroy(), this.queryEngine.destroy(), this.featureStore.clear(), this.handles.destroy();\n    }\n  }, {\n    key: \"setup\",\n    value: function () {\n      var _setup = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var _this2 = this;\n\n        var _e$serviceInfo, t, i, r, s;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _e$serviceInfo = e.serviceInfo, t = _e$serviceInfo.geometryType, i = _e$serviceInfo.objectIdField, r = _e$serviceInfo.timeInfo, s = _e$serviceInfo.fields;\n                return _context.abrupt(\"return\", (this.featureStore = new c(_objectSpread(_objectSpread({}, e.serviceInfo), {}, {\n                  hasZ: !1,\n                  hasM: !1\n                })), this.queryEngine = new d({\n                  spatialReference: e.spatialReference,\n                  featureStore: this.featureStore,\n                  geometryType: t,\n                  fields: s,\n                  hasZ: !1,\n                  hasM: !1,\n                  objectIdField: i,\n                  timeInfo: r ? f.fromJSON(r) : null\n                }), this.featureFetcher = new g({\n                  store: new y({\n                    featureStore: this.featureStore\n                  }),\n                  url: e.serviceInfo.url,\n                  objectIdField: e.serviceInfo.objectIdField,\n                  globalIdField: e.serviceInfo.globalIdField,\n                  capabilities: e.serviceInfo.capabilities,\n                  spatialReference: l.fromJSON(e.spatialReference),\n                  sourceSpatialReference: l.fromJSON(e.serviceInfo.spatialReference)\n                }), this.handles.add([this.featureFetcher.watch(\"availability\", function (e) {\n                  return _this2.emit(\"notify-availability\", {\n                    availability: e\n                  });\n                }, !0), this.watch(\"updating\", function () {\n                  return _this2.notifyUpdating();\n                })]), this.whenSetup.resolve(), this.isInitializing = !1, this.configure(e.configuration)));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function setup(_x) {\n        return _setup.apply(this, arguments);\n      }\n\n      return setup;\n    }()\n  }, {\n    key: \"configure\",\n    value: function () {\n      var _configure = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.updatingHandles.addPromise(this.whenSetup.promise);\n\n              case 2:\n                this.updateFeatureFetcherConfiguration(e);\n                return _context2.abrupt(\"return\", {\n                  result: {}\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function configure(_x2) {\n        return _configure.apply(this, arguments);\n      }\n\n      return configure;\n    }()\n  }, {\n    key: \"fetchCandidates\",\n    value: function () {\n      var _fetchCandidates = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, t) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.whenSetup.promise;\n\n              case 2:\n                a(t);\n                _context3.next = 5;\n                return this.queryEngine.executeQueryForSnapping({\n                  point: e.point,\n                  distance: e.distance,\n                  types: e.types,\n                  query: r(e.filter) ? e.filter : {\n                    where: \"1=1\"\n                  }\n                }, r(t) ? t.signal : null);\n\n              case 5:\n                _context3.t0 = _context3.sent;\n                return _context3.abrupt(\"return\", {\n                  result: _context3.t0\n                });\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function fetchCandidates(_x3, _x4) {\n        return _fetchCandidates.apply(this, arguments);\n      }\n\n      return fetchCandidates;\n    }()\n  }, {\n    key: \"updateTiles\",\n    value: function () {\n      var _updateTiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e, t) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.updatingHandles.addPromise(this.whenSetup.promise);\n\n              case 2:\n                a(t);\n                this.featureFetcher.tileSize = e.tileSize;\n                this.featureFetcher.tilesOfInterest = e.tiles;\n                this.featureFetcher.tileInfo = r(e.tileInfo) ? h.fromJSON(e.tileInfo) : null;\n                return _context4.abrupt(\"return\", {\n                  result: {}\n                });\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function updateTiles(_x5, _x6) {\n        return _updateTiles.apply(this, arguments);\n      }\n\n      return updateTiles;\n    }()\n  }, {\n    key: \"refresh\",\n    value: function () {\n      var _refresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e, t) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.updatingHandles.addPromise(this.whenSetup.promise);\n\n              case 2:\n                a(t);\n                this.featureFetcher.refresh();\n                return _context5.abrupt(\"return\", {\n                  result: {}\n                });\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function refresh(_x7, _x8) {\n        return _refresh.apply(this, arguments);\n      }\n\n      return refresh;\n    }()\n  }, {\n    key: \"whenNotUpdating\",\n    value: function () {\n      var _whenNotUpdating = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e, t) {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.updatingHandles.addPromise(this.whenSetup.promise);\n\n              case 2:\n                a(t);\n                _context6.next = 5;\n                return n(o(this, \"updating\"), t);\n\n              case 5:\n                return _context6.abrupt(\"return\", {\n                  result: {}\n                });\n\n              case 6:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function whenNotUpdating(_x9, _x10) {\n        return _whenNotUpdating.apply(this, arguments);\n      }\n\n      return whenNotUpdating;\n    }()\n  }, {\n    key: \"getDebugInfo\",\n    value: function () {\n      var _getDebugInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e, t) {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                return _context7.abrupt(\"return\", (a(t), {\n                  result: this.featureFetcher.debugInfo\n                }));\n\n              case 1:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function getDebugInfo(_x11, _x12) {\n        return _getDebugInfo.apply(this, arguments);\n      }\n\n      return getDebugInfo;\n    }()\n  }, {\n    key: \"beginApplyEdits\",\n    value: function () {\n      var _beginApplyEdits = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(e, t) {\n        var i;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                this.updatingHandles.addPromise(this.whenSetup.promise), a(t);\n                i = s();\n                return _context8.abrupt(\"return\", (this.pendingApplyEdits.set(e.id, i), this.featureFetcher.applyEdits(i.promise), this.updatingHandles.addPromise(i.promise), {\n                  result: {}\n                }));\n\n              case 3:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function beginApplyEdits(_x13, _x14) {\n        return _beginApplyEdits.apply(this, arguments);\n      }\n\n      return beginApplyEdits;\n    }()\n  }, {\n    key: \"endApplyEdits\",\n    value: function () {\n      var _endApplyEdits = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(e, t) {\n        var i;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                i = this.pendingApplyEdits.get(e.id);\n                return _context9.abrupt(\"return\", (i && i.resolve(e.edits), a(t), {\n                  result: {}\n                }));\n\n              case 2:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function endApplyEdits(_x15, _x16) {\n        return _endApplyEdits.apply(this, arguments);\n      }\n\n      return endApplyEdits;\n    }()\n  }, {\n    key: \"updateFeatureFetcherConfiguration\",\n    value: function updateFeatureFetcherConfiguration(e) {\n      this.featureFetcher.filter = r(e.filter) ? m.fromJSON(e.filter) : null, this.featureFetcher.customParameters = e.customParameters;\n    }\n  }, {\n    key: \"notifyUpdating\",\n    value: function notifyUpdating() {\n      this.emit(\"notify-updating\", {\n        updating: this.updating\n      });\n    }\n  }]);\n\n  return w;\n}(t.EventedAccessor);\n\nfunction F() {\n  return new w();\n}\n\ne([p({\n  readOnly: !0\n})], w.prototype, \"updating\", null), e([p()], w.prototype, \"isInitializing\", void 0), w = e([u(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker\")], w);\nexport default F;\nexport { w as FeatureServiceSnappingSourceWorker };"],"sourceRoot":""}