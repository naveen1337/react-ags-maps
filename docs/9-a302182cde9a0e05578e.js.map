{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/layers/support/ElevationSampler.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/layers/support/ElevationTile.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/layers/support/ElevationQuery.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e4","f","TypeError","err","normalCompletion","didErr","step","next","_e5","return","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","NewTarget","this","arguments","apply","getLogger","m","key","t","spatialReference","type","z","elevationAt","y","hasM","hasZ","_o","paths","_r","_a","_e3","_n4","_o2","x","R","_o3","points","_r2","_a2","d","h","clone","_m","p","_super","_this","tile","noDataValue","extent","r","lodAt","level","resolution","demResolution","min","max","get","projectIfRequired","contains","_t","_n","concat","xmin","ymin","xmax","ymax","warn","sample","_m2","u","_super2","_this2","samplers","map","_r$demResolution","_e","_t2","_n2","_e2","union","Math","_step","_iterator","_n3","equals","error","wkid","remove","a","samplerData","pixelData","values","width","height","safeWidth","dx","dy","x0","y1","l","floor","D","c","w","_t3","_e6","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","source","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","T","_selectTilesAutoPrefetchUpsample2","_selectTilesAuto2","_populateElevationTiles2","_selectTilesFinestContiguousAt2","_selectTilesFinestContiguous2","_selectTiles2","_createGeometryDescriptor2","_createQueryResult2","_queryAllContinue2","_createSamplerAllContinue2","_createSampler3","_createSamplerAll","_createSampler2","_query","_queryAll","mark","_callee","wrap","_context","prev","ignoreInvisibleLayers","visible","fromGeometry","returnSampleInfo","E","query","sent","_queryAllContinue","abrupt","geometry","export","sampleInfo","stop","_x","_x2","_x3","_callee2","_context2","signal","load","_createGeometryDescriptor","_selectTiles","_populateElevationTiles","_sampleGeometryWithElevation","_createQueryResult","_x4","_x5","_x6","_callee3","_context3","_createSampler","_x7","_x8","_x9","_callee4","_context4","_createSamplerAllContinue","_x10","_x11","_x12","_callee5","_context5","tileInfo","t0","dest","elevationTiles","layer","options","_x13","_x14","_x15","_x16","_callee6","_context6","pop","_x17","_x18","_x19","_x20","_callee7","_c","_i","_context7","coordinates","_x21","_x22","_x23","_callee8","_context8","project","outSpatialReference","t1","_extractSampleInfo","elevationTile","_x24","_x25","_callee9","_context9","_x26","_x27","_x28","_callee10","_context10","_preselectOutsideLayerExtent","_selectTilesClosestResolution","_selectTilesFinestContiguous","_selectTilesAuto","_x29","_x30","outsideExtentTile","fullExtent","_findNearestDemResolutionLODIndex","selectTilesAtLOD","lods","_l","abs","_callee11","_context11","_","minDemResolution","_selectTilesFinestContiguousAt","_x31","_x32","_callee12","_context12","tilemapCache","getTilesToFetch","Promise","all","fetchAvailability","row","col","allElevationTilesFetched","clearElevationTiles","_x33","_x34","_x35","_callee14","_context14","cache","_ref","_callee13","_context13","uid","id","fetchTile","put","_x38","populateElevationTiles","_x36","_x37","_callee16","_context16","_selectTilesAutoFinest","_reduceTilesForMaximumRequests","_selectTilesAutoPrefetchUpsample","_ref2","_callee15","_context15","fetchAvailabilityUpsample","ok","_x41","remapTiles","_x39","_x40","forEachTileToFetch","maximumAutoTileRequests","upsampleTile","_callee17","_context17","_x42","_x43","v","_project","_exporter","_cloneCoordinate","_callee18","_context18","_x44","_x45","_i2","_s","_i3","_s2","spatiaReference","_i4","_s3","_l2","_step2","_iterator2","_step3","_iterator3","_step4","_iterator4","_t4","_step5","_iterator5","_t5","_x46","g","_this3","_t6","_i5","tileAt","some","_step6","_iterator6","_step7","_iterator7","_t7","_step8","_iterator8","_t8","_step9","_iterator9","_i6","_o4","_step10","_iterator10","_loop","_x47","_this4","candidateTiles","fetchedCandidates","Set","intersection","maskExtents","_maximumLodForRequests","_selectCandidateTilesCoveringExtentAt","_o5","_s4","_l3","size","ceil","clear","_step11","_iterator11","_t9","_i7","add","_uniqueNonOverlappingTiles","_this5","has","_step12","_iterator12","_l4","sort","_o6","_c2","_i8","updateTileInfo","_tileIsMasked","_o7","findIndex"],"mappings":"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","file":"9-a302182cde9a0e05578e.js","sourcesContent":["import _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e4) { throw _e4; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e5) { didErr = true; err = _e5; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../geometry.js\";\nimport \"../../core/has.js\";\nimport e from \"../../core/Logger.js\";\nimport { unwrapOr as t } from \"../../core/maybe.js\";\nimport { getMetersPerUnitForSR as n } from \"../../core/unitUtils.js\";\nimport { toExtent as s, create as i } from \"../../geometry/support/aaBoundingRect.js\";\nimport { extentContainsPoint as o } from \"../../geometry/support/contains.js\";\nimport { canProject as r, project as a } from \"../../geometry/support/webMercatorUtils.js\";\nimport l from \"../../geometry/Point.js\";\nvar c = e.getLogger(\"esri.layers.support.ElevationSampler\");\n\nvar m = /*#__PURE__*/function () {\n  function m() {\n    _classCallCheck(this, m);\n  }\n\n  _createClass(m, [{\n    key: \"queryElevation\",\n    value: function queryElevation(e) {\n      return h(e.clone(), this);\n    }\n  }, {\n    key: \"on\",\n    value: function on() {\n      return g;\n    }\n  }, {\n    key: \"projectIfRequired\",\n    value: function projectIfRequired(e, t) {\n      return f(e, t);\n    }\n  }]);\n\n  return m;\n}();\n\nvar p = /*#__PURE__*/function (_m) {\n  _inherits(p, _m);\n\n  var _super = _createSuper(p);\n\n  function p(e, t, i) {\n    var _this;\n\n    _classCallCheck(this, p);\n\n    _this = _super.call(this), _this.tile = e, _this.noDataValue = i, _this.extent = s(e.tile.extent, t.spatialReference);\n    var o = n(t.spatialReference),\n        r = t.lodAt(e.tile.level).resolution * o;\n    _this.demResolution = {\n      min: r,\n      max: r\n    };\n    return _this;\n  }\n\n  _createClass(p, [{\n    key: \"spatialReference\",\n    get: function get() {\n      return this.extent.spatialReference;\n    }\n  }, {\n    key: \"contains\",\n    value: function contains(e) {\n      var t = this.projectIfRequired(e, this.spatialReference);\n      return o(this.extent, t);\n    }\n  }, {\n    key: \"elevationAt\",\n    value: function elevationAt(e) {\n      var t = this.projectIfRequired(e, this.spatialReference);\n      if (!t) return null;\n\n      if (!this.contains(e)) {\n        var _t = this.extent,\n            _n = \"\".concat(_t.xmin, \", \").concat(_t.ymin, \", \").concat(_t.xmax, \", \").concat(_t.ymax);\n\n        c.warn(\"#elevationAt()\", \"Point used to sample elevation (\".concat(e.x, \", \").concat(e.y, \") is outside of the sampler extent (\").concat(_n, \")\"));\n      }\n\n      return this.tile.sample(t.x, t.y);\n    }\n  }]);\n\n  return p;\n}(m);\n\nvar u = /*#__PURE__*/function (_m2) {\n  _inherits(u, _m2);\n\n  var _super2 = _createSuper(u);\n\n  function u(e, t, n) {\n    var _this2;\n\n    _classCallCheck(this, u);\n\n    var o;\n    _this2 = _super2.call(this), \"number\" == typeof t ? (_this2.noDataValue = t, o = null) : (o = t, _this2.noDataValue = n), _this2.samplers = o ? e.map(function (e) {\n      return new p(e, o, _this2.noDataValue);\n    }) : e;\n    var r = _this2.samplers[0];\n\n    if (r) {\n      _this2.extent = r.extent.clone();\n      var _r$demResolution = r.demResolution,\n          _e = _r$demResolution.min,\n          _t2 = _r$demResolution.max;\n      _this2.demResolution = {\n        min: _e,\n        max: _t2\n      };\n\n      for (var _n2 = 1; _n2 < _this2.samplers.length; _n2++) {\n        var _e2 = _this2.samplers[_n2];\n        _this2.extent.union(_e2.extent), _this2.demResolution.min = Math.min(_this2.demResolution.min, _e2.demResolution.min), _this2.demResolution.max = Math.max(_this2.demResolution.max, _e2.demResolution.max);\n      }\n    } else _this2.extent = s(i(), o.spatialReference), _this2.demResolution = {\n      min: 0,\n      max: 0\n    };\n\n    return _this2;\n  }\n\n  _createClass(u, [{\n    key: \"spatialReference\",\n    get: function get() {\n      return this.extent.spatialReference;\n    }\n  }, {\n    key: \"elevationAt\",\n    value: function elevationAt(e) {\n      var t = this.projectIfRequired(e, this.spatialReference);\n      if (!t) return null;\n\n      var _iterator = _createForOfIteratorHelper(this.samplers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _n3 = _step.value;\n          if (_n3.contains(t)) return _n3.elevationAt(t);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return c.warn(\"#elevationAt()\", \"Point used to sample elevation (\".concat(e.x, \", \").concat(e.y, \") is outside of the sampler\")), null;\n    }\n  }]);\n\n  return u;\n}(m);\n\nfunction h(e, t) {\n  var n = f(e, t.spatialReference);\n  if (!n) return null;\n\n  switch (e.type) {\n    case \"point\":\n      x(e, n, t);\n      break;\n\n    case \"polyline\":\n      R(e, n, t);\n      break;\n\n    case \"multipoint\":\n      d(e, n, t);\n  }\n\n  return e;\n}\n\nfunction f(e, t) {\n  var n = e.spatialReference;\n  return n.equals(t) ? e : r(n, t) ? a(e, t) : (c.error(\"Cannot project geometry spatial reference (wkid:\".concat(n.wkid, \") to elevation sampler spatial reference (wkid:\").concat(t.wkid, \")\")), null);\n}\n\nfunction x(e, n, s) {\n  e.z = t(s.elevationAt(n), 0);\n}\n\nfunction R(e, n, s) {\n  y.spatialReference = n.spatialReference;\n  var i = e.hasM && !e.hasZ;\n\n  for (var _o = 0; _o < e.paths.length; _o++) {\n    var _r = e.paths[_o],\n        _a = n.paths[_o];\n\n    for (var _e3 = 0; _e3 < _r.length; _e3++) {\n      var _n4 = _r[_e3],\n          _o2 = _a[_e3];\n      y.x = _o2[0], y.y = _o2[1], i && (_n4[3] = _n4[2]), _n4[2] = t(s.elevationAt(y), 0);\n    }\n  }\n\n  e.hasZ = !0;\n}\n\nfunction d(e, n, s) {\n  y.spatialReference = n.spatialReference;\n  var i = e.hasM && !e.hasZ;\n\n  for (var _o3 = 0; _o3 < e.points.length; _o3++) {\n    var _r2 = e.points[_o3],\n        _a2 = n.points[_o3];\n    y.x = _a2[0], y.y = _a2[1], i && (_r2[3] = _r2[2]), _r2[2] = t(s.elevationAt(y), 0);\n  }\n\n  e.hasZ = !0;\n}\n\nvar y = new l(),\n    g = {\n  remove: function remove() {}\n};\nexport { m as ElevationSamplerBase, u as MultiTileElevationSampler, p as TileElevationSampler, h as updateGeometryElevation };","import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nvar t = /*#__PURE__*/function () {\n  function t(_t, a) {\n    _classCallCheck(this, t);\n\n    if (this.tile = _t, !a) return void (this.samplerData = null);\n    var e = this.tile.extent;\n    this.samplerData = {\n      pixelData: a.values,\n      width: a.width,\n      height: a.height,\n      safeWidth: .99999999 * (a.width - 1),\n      noDataValue: a.noDataValue,\n      dx: (a.width - 1) / (e[2] - e[0]),\n      dy: (a.width - 1) / (e[3] - e[1]),\n      x0: e[0],\n      y1: e[3]\n    };\n  }\n\n  _createClass(t, [{\n    key: \"sample\",\n    value: function sample(_t2, e) {\n      if (this.samplerData) return a(this.samplerData, _t2, e);\n    }\n  }]);\n\n  return t;\n}();\n\nfunction a(t, a, i) {\n  var h = t.safeWidth,\n      s = t.width,\n      l = t.pixelData,\n      r = t.noDataValue,\n      n = e(t.dy * (t.y1 - i), 0, h),\n      o = e(t.dx * (a - t.x0), 0, h),\n      d = Math.floor(n),\n      u = Math.floor(o),\n      f = d * s + u,\n      p = f + s,\n      x = l[f],\n      D = l[p],\n      c = l[f + 1],\n      w = l[p + 1];\n\n  if (x !== r && D !== r && c !== r && w !== r) {\n    var _t3 = o - u,\n        _a = x + (c - x) * _t3;\n\n    return _a + (D + (w - D) * _t3 - _a) * (n - d);\n  }\n}\n\nfunction e(t, a, e) {\n  return t < a ? a : t > e ? e : t;\n}\n\nexport default t;\nexport { t as ElevationTile };","import _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e5) { throw _e5; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e6) { didErr = true; err = _e6; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { result as e } from \"../../core/asyncUtils.js\";\nimport t from \"../../core/Error.js\";\nimport { isSome as i } from \"../../core/maybe.js\";\nimport { whenOrAbort as o, throwIfAbortError as s, eachAlways as l } from \"../../core/promiseUtils.js\";\nimport { getMetersPerUnitForSR as n } from \"../../core/unitUtils.js\";\nimport a from \"../../geometry/Multipoint.js\";\nimport r from \"../../geometry/Point.js\";\nimport c from \"../../geometry/Polyline.js\";\nimport { initializeProjection as u, project as h } from \"../../geometry/projection.js\";\nimport { fromExtent as p, create as m, contains as f } from \"../../geometry/support/aaBoundingRect.js\";\nimport { MultiTileElevationSampler as d } from \"./ElevationSampler.js\";\nimport { ElevationTile as y } from \"./ElevationTile.js\";\n\nvar T = /*#__PURE__*/function () {\n  function T() {\n    _classCallCheck(this, T);\n  }\n\n  _createClass(T, [{\n    key: \"queryAll\",\n    value: function () {\n      var _queryAll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e, i, o) {\n        var s, l, n, a, r;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if ((e = o && o.ignoreInvisibleLayers ? e.filter(function (e) {\n                  return e.visible;\n                }) : e.slice()).length) {\n                  _context.next = 2;\n                  break;\n                }\n\n                throw new t(\"elevation-query:invalid-layer\", \"Elevation queries require at least one elevation layer to fetch tiles from\");\n\n              case 2:\n                s = v.fromGeometry(i);\n                l = !1;\n                o && o.returnSampleInfo || (l = !0);\n                n = _objectSpread(_objectSpread(_objectSpread({}, E), o), {}, {\n                  returnSampleInfo: !0\n                });\n                _context.next = 8;\n                return this.query(e[e.length - 1], s, n);\n\n              case 8:\n                a = _context.sent;\n                _context.next = 11;\n                return this._queryAllContinue(e, a, n);\n\n              case 11:\n                r = _context.sent;\n                return _context.abrupt(\"return\", (r.geometry = r.geometry.export(), l && delete r.sampleInfo, r));\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function queryAll(_x, _x2, _x3) {\n        return _queryAll.apply(this, arguments);\n      }\n\n      return queryAll;\n    }()\n  }, {\n    key: \"query\",\n    value: function () {\n      var _query = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e, i, o) {\n        var s, l, n;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (e) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw new t(\"elevation-query:invalid-layer\", \"Elevation queries require an elevation layer to fetch tiles from\");\n\n              case 2:\n                if (!(!i || !(i instanceof v) && \"point\" !== i.type && \"multipoint\" !== i.type && \"polyline\" !== i.type)) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                throw new t(\"elevation-query:invalid-geometry\", \"Only point, polyline and multipoint geometries can be used to query elevation\");\n\n              case 4:\n                s = _objectSpread(_objectSpread({}, E), o), l = new g(e, i.spatialReference, s), n = s.signal;\n                _context2.next = 7;\n                return e.load({\n                  signal: n\n                });\n\n              case 7:\n                _context2.next = 9;\n                return this._createGeometryDescriptor(l, i, n);\n\n              case 9:\n                _context2.next = 11;\n                return this._selectTiles(l, n);\n\n              case 11:\n                _context2.next = 13;\n                return this._populateElevationTiles(l, n);\n\n              case 13:\n                this._sampleGeometryWithElevation(l);\n\n                return _context2.abrupt(\"return\", this._createQueryResult(l, n));\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function query(_x4, _x5, _x6) {\n        return _query.apply(this, arguments);\n      }\n\n      return query;\n    }()\n  }, {\n    key: \"createSampler\",\n    value: function () {\n      var _createSampler2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, i, o) {\n        var s;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (e) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                throw new t(\"elevation-query:invalid-layer\", \"Elevation queries require an elevation layer to fetch tiles from\");\n\n              case 2:\n                if (!(!i || \"extent\" !== i.type)) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                throw new t(\"elevation-query:invalid-extent\", \"Invalid or undefined extent\");\n\n              case 4:\n                s = _objectSpread(_objectSpread({}, E), o);\n                return _context3.abrupt(\"return\", this._createSampler(e, i, s));\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function createSampler(_x7, _x8, _x9) {\n        return _createSampler2.apply(this, arguments);\n      }\n\n      return createSampler;\n    }()\n  }, {\n    key: \"createSamplerAll\",\n    value: function () {\n      var _createSamplerAll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e, i, o) {\n        var s, l;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if ((e = o && o.ignoreInvisibleLayers ? e.filter(function (e) {\n                  return e.visible;\n                }) : e.slice()).length) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw new t(\"elevation-query:invalid-layer\", \"Elevation queries require at least one elevation layer to fetch tiles from\");\n\n              case 2:\n                if (!(!i || \"extent\" !== i.type)) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                throw new t(\"elevation-query:invalid-extent\", \"Invalid or undefined extent\");\n\n              case 4:\n                s = _objectSpread(_objectSpread(_objectSpread({}, E), o), {}, {\n                  returnSampleInfo: !0\n                });\n                _context4.next = 7;\n                return this._createSampler(e[e.length - 1], i, s);\n\n              case 7:\n                l = _context4.sent;\n                return _context4.abrupt(\"return\", this._createSamplerAllContinue(e, i, l, s));\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function createSamplerAll(_x10, _x11, _x12) {\n        return _createSamplerAll.apply(this, arguments);\n      }\n\n      return createSamplerAll;\n    }()\n  }, {\n    key: \"_createSampler\",\n    value: function () {\n      var _createSampler3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e, t, i, o) {\n        var s, l, n, a;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                s = i.signal;\n                _context5.next = 3;\n                return e.load({\n                  signal: s\n                });\n\n              case 3:\n                l = t.spatialReference, n = e.tileInfo.spatialReference;\n                _context5.t0 = l.equals(n);\n\n                if (_context5.t0) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                _context5.next = 8;\n                return u([{\n                  source: l,\n                  dest: n\n                }], {\n                  signal: s\n                });\n\n              case 8:\n                t = h(t, n);\n\n              case 9:\n                a = new w(e, t, i, o);\n                _context5.next = 12;\n                return this._selectTiles(a, s);\n\n              case 12:\n                _context5.next = 14;\n                return this._populateElevationTiles(a, s);\n\n              case 14:\n                return _context5.abrupt(\"return\", new d(a.elevationTiles, a.layer.tileInfo, a.options.noDataValue));\n\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function _createSampler(_x13, _x14, _x15, _x16) {\n        return _createSampler3.apply(this, arguments);\n      }\n\n      return _createSampler;\n    }()\n  }, {\n    key: \"_createSamplerAllContinue\",\n    value: function () {\n      var _createSamplerAllContinue2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e, t, i, o) {\n        var s, l, n, a;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!(e.pop(), !e.length)) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", i);\n\n              case 2:\n                s = i.samplers.map(function (e) {\n                  return p(e.extent);\n                });\n                _context6.next = 5;\n                return this._createSampler(e[e.length - 1], t, o, s);\n\n              case 5:\n                l = _context6.sent;\n\n                if (!(0 === l.samplers.length)) {\n                  _context6.next = 8;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", i);\n\n              case 8:\n                n = i.samplers.concat(l.samplers), a = new d(n, o.noDataValue);\n                return _context6.abrupt(\"return\", this._createSamplerAllContinue(e, t, a, o));\n\n              case 10:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function _createSamplerAllContinue(_x17, _x18, _x19, _x20) {\n        return _createSamplerAllContinue2.apply(this, arguments);\n      }\n\n      return _createSamplerAllContinue;\n    }()\n  }, {\n    key: \"_queryAllContinue\",\n    value: function () {\n      var _queryAllContinue2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e, t, i) {\n        var o, s, l, n, _c, _i, a, r;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                o = e.pop(), s = t.geometry.coordinates, l = [], n = [];\n\n                for (_c = 0; _c < s.length; _c++) {\n                  _i = t.sampleInfo[_c];\n                  _i.demResolution >= 0 ? _i.source || (_i.source = o) : e.length && (l.push(s[_c]), n.push(_c));\n                }\n\n                if (!(!e.length || 0 === l.length)) {\n                  _context7.next = 4;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", t);\n\n              case 4:\n                a = t.geometry.clone(l);\n                _context7.next = 7;\n                return this.query(e[e.length - 1], a, i);\n\n              case 7:\n                r = _context7.sent;\n                return _context7.abrupt(\"return\", (n.forEach(function (e, i) {\n                  s[e].z = r.geometry.coordinates[i].z, t.sampleInfo[e].demResolution = r.sampleInfo[i].demResolution;\n                }), this._queryAllContinue(e, t, i)));\n\n              case 9:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function _queryAllContinue(_x21, _x22, _x23) {\n        return _queryAllContinue2.apply(this, arguments);\n      }\n\n      return _queryAllContinue;\n    }()\n  }, {\n    key: \"_createQueryResult\",\n    value: function () {\n      var _createQueryResult2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(e, t) {\n        var i;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return e.geometry.project(e.outSpatialReference, t);\n\n              case 2:\n                _context8.t0 = _context8.sent.export();\n                _context8.t1 = e.options.noDataValue;\n                i = {\n                  geometry: _context8.t0,\n                  noDataValue: _context8.t1\n                };\n                return _context8.abrupt(\"return\", (e.options.returnSampleInfo && (i.sampleInfo = this._extractSampleInfo(e)), e.geometry.coordinates.forEach(function (e) {\n                  e.tile = null, e.elevationTile = null;\n                }), i));\n\n              case 6:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function _createQueryResult(_x24, _x25) {\n        return _createQueryResult2.apply(this, arguments);\n      }\n\n      return _createQueryResult;\n    }()\n  }, {\n    key: \"_createGeometryDescriptor\",\n    value: function () {\n      var _createGeometryDescriptor2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(e, i, o) {\n        var s, l;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                l = e.layer.tileInfo.spatialReference;\n\n                if (!(i instanceof v)) {\n                  _context9.next = 7;\n                  break;\n                }\n\n                _context9.next = 4;\n                return i.project(l, o);\n\n              case 4:\n                s = _context9.sent;\n                _context9.next = 10;\n                break;\n\n              case 7:\n                _context9.next = 9;\n                return u([{\n                  source: i.spatialReference,\n                  dest: l\n                }], {\n                  signal: o\n                });\n\n              case 9:\n                s = h(i, l);\n\n              case 10:\n                if (s) {\n                  _context9.next = 12;\n                  break;\n                }\n\n                throw new t(\"elevation-query:spatial-reference-mismatch\", \"Cannot query elevation in '\".concat(i.spatialReference.wkid, \"' on an elevation service in '\").concat(l.wkid, \"'\"));\n\n              case 12:\n                e.geometry = v.fromGeometry(s);\n\n              case 13:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      function _createGeometryDescriptor(_x26, _x27, _x28) {\n        return _createGeometryDescriptor2.apply(this, arguments);\n      }\n\n      return _createGeometryDescriptor;\n    }()\n  }, {\n    key: \"_selectTiles\",\n    value: function () {\n      var _selectTiles2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(e, i) {\n        var o;\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                o = e.options.demResolution;\n\n                if (!(\"geometry\" === e.type && this._preselectOutsideLayerExtent(e), \"number\" == typeof o)) {\n                  _context10.next = 5;\n                  break;\n                }\n\n                this._selectTilesClosestResolution(e);\n\n                _context10.next = 14;\n                break;\n\n              case 5:\n                if (!(\"finest-contiguous\" === o)) {\n                  _context10.next = 10;\n                  break;\n                }\n\n                _context10.next = 8;\n                return this._selectTilesFinestContiguous(e, i);\n\n              case 8:\n                _context10.next = 14;\n                break;\n\n              case 10:\n                if (!(\"auto\" !== o)) {\n                  _context10.next = 12;\n                  break;\n                }\n\n                throw new t(\"elevation-query:invalid-dem-resolution\", \"Invalid dem resolution value '\".concat(o, \"', expected a number, \\\"finest-contiguous\\\" or \\\"auto\\\"\"));\n\n              case 12:\n                _context10.next = 14;\n                return this._selectTilesAuto(e, i);\n\n              case 14:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function _selectTiles(_x29, _x30) {\n        return _selectTiles2.apply(this, arguments);\n      }\n\n      return _selectTiles;\n    }()\n  }, {\n    key: \"_preselectOutsideLayerExtent\",\n    value: function _preselectOutsideLayerExtent(e) {\n      var t = new y(null);\n      t.sample = function () {\n        return e.options.noDataValue;\n      }, e.outsideExtentTile = t;\n      var i = e.layer.fullExtent;\n      e.geometry.coordinates.forEach(function (e) {\n        var o = e.x,\n            s = e.y;\n        (o < i.xmin || o > i.xmax || s < i.ymin || s > i.ymax) && (e.elevationTile = t);\n      });\n    }\n  }, {\n    key: \"_selectTilesClosestResolution\",\n    value: function _selectTilesClosestResolution(e) {\n      var t = e.layer.tileInfo,\n          i = this._findNearestDemResolutionLODIndex(t, e.options.demResolution);\n\n      e.selectTilesAtLOD(i);\n    }\n  }, {\n    key: \"_findNearestDemResolutionLODIndex\",\n    value: function _findNearestDemResolutionLODIndex(e, t) {\n      var i = t / n(e.spatialReference);\n      var o = e.lods[0],\n          s = 0;\n\n      for (var _l = 1; _l < e.lods.length; _l++) {\n        var _t = e.lods[_l];\n        Math.abs(_t.resolution - i) < Math.abs(o.resolution - i) && (o = _t, s = _l);\n      }\n\n      return s;\n    }\n  }, {\n    key: \"_selectTilesFinestContiguous\",\n    value: function () {\n      var _selectTilesFinestContiguous2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(e, t) {\n        var i;\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                i = _(e.layer.tileInfo, e.options.minDemResolution);\n                _context11.next = 3;\n                return this._selectTilesFinestContiguousAt(e, i, t);\n\n              case 3:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function _selectTilesFinestContiguous(_x31, _x32) {\n        return _selectTilesFinestContiguous2.apply(this, arguments);\n      }\n\n      return _selectTilesFinestContiguous;\n    }()\n  }, {\n    key: \"_selectTilesFinestContiguousAt\",\n    value: function () {\n      var _selectTilesFinestContiguousAt2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(e, i, l) {\n        var n, a, r;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                n = e.layer;\n\n                if (!(e.selectTilesAtLOD(i), i < 0)) {\n                  _context12.next = 3;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\");\n\n              case 3:\n                a = n.tilemapCache, r = e.getTilesToFetch();\n                _context12.prev = 4;\n\n                if (!a) {\n                  _context12.next = 10;\n                  break;\n                }\n\n                _context12.next = 8;\n                return o(Promise.all(r.map(function (e) {\n                  return a.fetchAvailability(e.level, e.row, e.col, {\n                    signal: l\n                  });\n                })), l);\n\n              case 8:\n                _context12.next = 14;\n                break;\n\n              case 10:\n                _context12.next = 12;\n                return this._populateElevationTiles(e, l);\n\n              case 12:\n                if (e.allElevationTilesFetched()) {\n                  _context12.next = 14;\n                  break;\n                }\n\n                throw e.clearElevationTiles(), new t(\"elevation-query:has-unavailable-tiles\");\n\n              case 14:\n                _context12.next = 21;\n                break;\n\n              case 16:\n                _context12.prev = 16;\n                _context12.t0 = _context12[\"catch\"](4);\n                s(_context12.t0);\n                _context12.next = 21;\n                return this._selectTilesFinestContiguousAt(e, i - 1, l);\n\n              case 21:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this, [[4, 16]]);\n      }));\n\n      function _selectTilesFinestContiguousAt(_x33, _x34, _x35) {\n        return _selectTilesFinestContiguousAt2.apply(this, arguments);\n      }\n\n      return _selectTilesFinestContiguousAt;\n    }()\n  }, {\n    key: \"_populateElevationTiles\",\n    value: function () {\n      var _populateElevationTiles2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14(e, t) {\n        var s, n, a, r, c;\n        return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                s = e.getTilesToFetch(), n = {}, a = e.options.cache, r = e.options.noDataValue, c = s.map( /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(o) {\n                    var s, l, c;\n                    return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n                      while (1) {\n                        switch (_context13.prev = _context13.next) {\n                          case 0:\n                            s = \"\".concat(e.layer.uid, \":\").concat(o.id, \":\").concat(r);\n                            l = i(a) ? a.get(s) : null;\n\n                            if (!i(l)) {\n                              _context13.next = 6;\n                              break;\n                            }\n\n                            _context13.t0 = l;\n                            _context13.next = 9;\n                            break;\n\n                          case 6:\n                            _context13.next = 8;\n                            return e.layer.fetchTile(o.level, o.row, o.col, {\n                              noDataValue: r,\n                              signal: t\n                            });\n\n                          case 8:\n                            _context13.t0 = _context13.sent;\n\n                          case 9:\n                            c = _context13.t0;\n                            i(a) && a.put(s, c), n[o.id] = new y(o, c);\n\n                          case 11:\n                          case \"end\":\n                            return _context13.stop();\n                        }\n                      }\n                    }, _callee13);\n                  }));\n\n                  return function (_x38) {\n                    return _ref.apply(this, arguments);\n                  };\n                }());\n                _context14.next = 3;\n                return o(l(c), t);\n\n              case 3:\n                e.populateElevationTiles(n);\n\n              case 4:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14);\n      }));\n\n      function _populateElevationTiles(_x36, _x37) {\n        return _populateElevationTiles2.apply(this, arguments);\n      }\n\n      return _populateElevationTiles;\n    }()\n  }, {\n    key: \"_selectTilesAuto\",\n    value: function () {\n      var _selectTilesAuto2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(t, i) {\n        var l, n, a, r;\n        return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                this._selectTilesAutoFinest(t), this._reduceTilesForMaximumRequests(t);\n                l = t.layer.tilemapCache;\n\n                if (l) {\n                  _context16.next = 4;\n                  break;\n                }\n\n                return _context16.abrupt(\"return\", this._selectTilesAutoPrefetchUpsample(t, i));\n\n              case 4:\n                n = t.getTilesToFetch(), a = {}, r = n.map( /*#__PURE__*/function () {\n                  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(t) {\n                    var o, n;\n                    return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n                      while (1) {\n                        switch (_context15.prev = _context15.next) {\n                          case 0:\n                            o = {\n                              id: null,\n                              level: 0,\n                              row: 0,\n                              col: 0,\n                              extent: m()\n                            };\n                            _context15.next = 3;\n                            return e(l.fetchAvailabilityUpsample(t.level, t.row, t.col, o, {\n                              signal: i\n                            }));\n\n                          case 3:\n                            n = _context15.sent;\n                            !1 === n.ok ? s(n.error) : a[t.id] = o;\n\n                          case 5:\n                          case \"end\":\n                            return _context15.stop();\n                        }\n                      }\n                    }, _callee15);\n                  }));\n\n                  return function (_x41) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n                _context16.next = 7;\n                return o(Promise.all(r), i);\n\n              case 7:\n                t.remapTiles(a);\n\n              case 8:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      function _selectTilesAuto(_x39, _x40) {\n        return _selectTilesAuto2.apply(this, arguments);\n      }\n\n      return _selectTilesAuto;\n    }()\n  }, {\n    key: \"_reduceTilesForMaximumRequests\",\n    value: function _reduceTilesForMaximumRequests(e) {\n      var t = e.layer.tileInfo;\n      var i = 0;\n\n      var o = {},\n          s = function s(e) {\n        e.id in o ? o[e.id]++ : (o[e.id] = 1, i++);\n      },\n          l = function l(e) {\n        var t = o[e.id];\n        1 === t ? (delete o[e.id], i--) : o[e.id] = t - 1;\n      };\n\n      e.forEachTileToFetch(s, l);\n      var n = !0;\n\n      for (; n && (n = !1, e.forEachTileToFetch(function (o) {\n        i <= e.options.maximumAutoTileRequests || (l(o), t.upsampleTile(o) && (n = !0), s(o));\n      }, l), n);) {\n        ;\n      }\n    }\n  }, {\n    key: \"_selectTilesAutoFinest\",\n    value: function _selectTilesAutoFinest(e) {\n      var t = _(e.layer.tileInfo, e.options.minDemResolution);\n\n      e.selectTilesAtLOD(t, e.options.maximumAutoTileRequests);\n    }\n  }, {\n    key: \"_selectTilesAutoPrefetchUpsample\",\n    value: function () {\n      var _selectTilesAutoPrefetchUpsample2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(e, t) {\n        var i, o;\n        return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                i = e.layer.tileInfo;\n                _context17.next = 3;\n                return this._populateElevationTiles(e, t);\n\n              case 3:\n                o = !1;\n                e.forEachTileToFetch(function (e, t) {\n                  i.upsampleTile(e) ? o = !0 : t();\n                });\n                _context17.t0 = o;\n\n                if (!_context17.t0) {\n                  _context17.next = 9;\n                  break;\n                }\n\n                _context17.next = 9;\n                return this._selectTilesAutoPrefetchUpsample(e, t);\n\n              case 9:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this);\n      }));\n\n      function _selectTilesAutoPrefetchUpsample(_x42, _x43) {\n        return _selectTilesAutoPrefetchUpsample2.apply(this, arguments);\n      }\n\n      return _selectTilesAutoPrefetchUpsample;\n    }()\n  }, {\n    key: \"_sampleGeometryWithElevation\",\n    value: function _sampleGeometryWithElevation(e) {\n      e.geometry.coordinates.forEach(function (t) {\n        var i = t.elevationTile;\n        var o = e.options.noDataValue;\n\n        if (i) {\n          var _e = i.sample(t.x, t.y);\n\n          void 0 !== _e ? o = _e : t.elevationTile = null;\n        }\n\n        t.z = o;\n      });\n    }\n  }, {\n    key: \"_extractSampleInfo\",\n    value: function _extractSampleInfo(e) {\n      var t = e.layer.tileInfo,\n          i = n(t.spatialReference);\n      return e.geometry.coordinates.map(function (o) {\n        var s = -1;\n\n        if (o.elevationTile && o.elevationTile !== e.outsideExtentTile) {\n          s = t.lodAt(o.elevationTile.tile.level).resolution * i;\n        }\n\n        return {\n          demResolution: s\n        };\n      });\n    }\n  }]);\n\n  return T;\n}();\n\nvar v = /*#__PURE__*/function () {\n  function v() {\n    _classCallCheck(this, v);\n  }\n\n  _createClass(v, [{\n    key: \"export\",\n    value: function _export() {\n      return this._exporter(this.coordinates, this.spatialReference);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(e) {\n      var _this = this;\n\n      var t = new v();\n      return t.geometry = this.geometry, t.spatialReference = this.spatialReference, t.coordinates = e || this.coordinates.map(function (e) {\n        return _this._cloneCoordinate(e);\n      }), t._exporter = this._exporter, t;\n    }\n  }, {\n    key: \"project\",\n    value: function () {\n      var _project = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18(e, t) {\n        var _this2 = this;\n\n        var i, o, s, l;\n        return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                if (!this.spatialReference.equals(e)) {\n                  _context18.next = 2;\n                  break;\n                }\n\n                return _context18.abrupt(\"return\", this.clone());\n\n              case 2:\n                _context18.next = 4;\n                return u([{\n                  source: this.spatialReference,\n                  dest: e\n                }], {\n                  signal: t\n                });\n\n              case 4:\n                i = new a({\n                  spatialReference: this.spatialReference,\n                  points: this.coordinates.map(function (e) {\n                    return [e.x, e.y];\n                  })\n                }), o = h(i, e);\n\n                if (o) {\n                  _context18.next = 7;\n                  break;\n                }\n\n                return _context18.abrupt(\"return\", null);\n\n              case 7:\n                s = this.coordinates.map(function (e, t) {\n                  var i = _this2._cloneCoordinate(e),\n                      s = o.points[t];\n\n                  return i.x = s[0], i.y = s[1], i;\n                }), l = this.clone(s);\n                return _context18.abrupt(\"return\", (l.spatialReference = e, l));\n\n              case 9:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      function project(_x44, _x45) {\n        return _project.apply(this, arguments);\n      }\n\n      return project;\n    }()\n  }, {\n    key: \"_cloneCoordinate\",\n    value: function _cloneCoordinate(e) {\n      return {\n        x: e.x,\n        y: e.y,\n        z: e.z,\n        m: e.m,\n        tile: null,\n        elevationTile: null\n      };\n    }\n  }], [{\n    key: \"fromGeometry\",\n    value: function fromGeometry(e) {\n      var t = new v();\n      if (t.geometry = e, t.spatialReference = e.spatialReference, e instanceof v) t.coordinates = e.coordinates.map(function (e) {\n        return t._cloneCoordinate(e);\n      }), t._exporter = function (t, i) {\n        var o = e.clone(t);\n        return o.spatialReference = i, o;\n      };else switch (e.type) {\n        case \"point\":\n          {\n            var _i2 = e,\n                _o = _i2.hasZ,\n                _s = _i2.hasM;\n            t.coordinates = _o && _s ? [{\n              x: _i2.x,\n              y: _i2.y,\n              z: _i2.z,\n              m: _i2.m\n            }] : _o ? [{\n              x: _i2.x,\n              y: _i2.y,\n              z: _i2.z\n            }] : _s ? [{\n              x: _i2.x,\n              y: _i2.y,\n              m: _i2.m\n            }] : [{\n              x: _i2.x,\n              y: _i2.y\n            }], t._exporter = function (t, i) {\n              return e.hasM ? new r(t[0].x, t[0].y, t[0].z, t[0].m, i) : new r(t[0].x, t[0].y, t[0].z, i);\n            };\n            break;\n          }\n\n        case \"multipoint\":\n          {\n            var _i3 = e,\n                _o2 = _i3.hasZ,\n                _s2 = _i3.hasM;\n            t.coordinates = _o2 && _s2 ? _i3.points.map(function (e) {\n              return {\n                x: e[0],\n                y: e[1],\n                z: e[2],\n                m: e[3]\n              };\n            }) : _o2 ? _i3.points.map(function (e) {\n              return {\n                x: e[0],\n                y: e[1],\n                z: e[2]\n              };\n            }) : _s2 ? _i3.points.map(function (e) {\n              return {\n                x: e[0],\n                y: e[1],\n                m: e[2]\n              };\n            }) : _i3.points.map(function (e) {\n              return {\n                x: e[0],\n                y: e[1]\n              };\n            }), t._exporter = function (t, i) {\n              return e.hasM ? new a({\n                points: t.map(function (e) {\n                  return [e.x, e.y, e.z, e.m];\n                }),\n                hasZ: !0,\n                hasM: !0,\n                spatiaReference: i\n              }) : new a(t.map(function (e) {\n                return [e.x, e.y, e.z];\n              }), i);\n            };\n            break;\n          }\n\n        case \"polyline\":\n          {\n            var _i4 = e,\n                _o3 = [],\n                _s3 = [],\n                _l2 = e.hasZ,\n                _n = e.hasM;\n            var _a = 0;\n\n            var _iterator = _createForOfIteratorHelper(_i4.paths),\n                _step;\n\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var _e2 = _step.value;\n\n                if (_s3.push([_a, _a + _e2.length]), _a += _e2.length, _l2 && _n) {\n                  var _iterator2 = _createForOfIteratorHelper(_e2),\n                      _step2;\n\n                  try {\n                    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                      var _t2 = _step2.value;\n\n                      _o3.push({\n                        x: _t2[0],\n                        y: _t2[1],\n                        z: _t2[2],\n                        m: _t2[3]\n                      });\n                    }\n                  } catch (err) {\n                    _iterator2.e(err);\n                  } finally {\n                    _iterator2.f();\n                  }\n                } else if (_l2) {\n                  var _iterator3 = _createForOfIteratorHelper(_e2),\n                      _step3;\n\n                  try {\n                    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                      var _t3 = _step3.value;\n\n                      _o3.push({\n                        x: _t3[0],\n                        y: _t3[1],\n                        z: _t3[2]\n                      });\n                    }\n                  } catch (err) {\n                    _iterator3.e(err);\n                  } finally {\n                    _iterator3.f();\n                  }\n                } else if (_n) {\n                  var _iterator4 = _createForOfIteratorHelper(_e2),\n                      _step4;\n\n                  try {\n                    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                      var _t4 = _step4.value;\n\n                      _o3.push({\n                        x: _t4[0],\n                        y: _t4[1],\n                        m: _t4[2]\n                      });\n                    }\n                  } catch (err) {\n                    _iterator4.e(err);\n                  } finally {\n                    _iterator4.f();\n                  }\n                } else {\n                  var _iterator5 = _createForOfIteratorHelper(_e2),\n                      _step5;\n\n                  try {\n                    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                      var _t5 = _step5.value;\n\n                      _o3.push({\n                        x: _t5[0],\n                        y: _t5[1]\n                      });\n                    }\n                  } catch (err) {\n                    _iterator5.e(err);\n                  } finally {\n                    _iterator5.f();\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n\n            t.coordinates = _o3, t._exporter = function (t, i) {\n              var o = e.hasM ? t.map(function (e) {\n                return [e.x, e.y, e.z, e.m];\n              }) : t.map(function (e) {\n                return [e.x, e.y, e.z];\n              }),\n                  l = _s3.map(function (e) {\n                return o.slice(e[0], e[1]);\n              });\n\n              return new c({\n                paths: l,\n                hasM: e.hasM,\n                hasZ: !0,\n                spatialReference: i\n              });\n            };\n            break;\n          }\n      }\n      return t;\n    }\n  }]);\n\n  return v;\n}();\n\nvar x = function x(e, t) {\n  _classCallCheck(this, x);\n\n  this.layer = e, this.options = t;\n};\n\nvar g = /*#__PURE__*/function (_x46) {\n  _inherits(g, _x46);\n\n  var _super = _createSuper(g);\n\n  function g(e, t, i) {\n    var _this3;\n\n    _classCallCheck(this, g);\n\n    _this3 = _super.call(this, e, i), _this3.outSpatialReference = t, _this3.type = \"geometry\";\n    return _this3;\n  }\n\n  _createClass(g, [{\n    key: \"selectTilesAtLOD\",\n    value: function selectTilesAtLOD(e) {\n      if (e < 0) this.geometry.coordinates.forEach(function (e) {\n        return e.tile = null;\n      });else {\n        var _t6 = this.layer.tileInfo,\n            _i5 = _t6.lods[e].level;\n        this.geometry.coordinates.forEach(function (e) {\n          e.tile = _t6.tileAt(_i5, e.x, e.y);\n        });\n      }\n    }\n  }, {\n    key: \"allElevationTilesFetched\",\n    value: function allElevationTilesFetched() {\n      return !this.geometry.coordinates.some(function (e) {\n        return !e.elevationTile;\n      });\n    }\n  }, {\n    key: \"clearElevationTiles\",\n    value: function clearElevationTiles() {\n      var _iterator6 = _createForOfIteratorHelper(this.geometry.coordinates),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _e3 = _step6.value;\n          _e3.elevationTile !== this.outsideExtentTile && (_e3.elevationTile = null);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }, {\n    key: \"populateElevationTiles\",\n    value: function populateElevationTiles(e) {\n      var _iterator7 = _createForOfIteratorHelper(this.geometry.coordinates),\n          _step7;\n\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var _t7 = _step7.value;\n          !_t7.elevationTile && _t7.tile && (_t7.elevationTile = e[_t7.tile.id]);\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n    }\n  }, {\n    key: \"remapTiles\",\n    value: function remapTiles(e) {\n      var _iterator8 = _createForOfIteratorHelper(this.geometry.coordinates),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var _t8 = _step8.value;\n          _t8.tile = e[_t8.tile.id];\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n    }\n  }, {\n    key: \"getTilesToFetch\",\n    value: function getTilesToFetch() {\n      var e = {},\n          t = [];\n\n      var _iterator9 = _createForOfIteratorHelper(this.geometry.coordinates),\n          _step9;\n\n      try {\n        for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n          var _i6 = _step9.value;\n          var _o4 = _i6.tile;\n          _i6.elevationTile || !_i6.tile || e[_o4.id] || (e[_o4.id] = _o4, t.push(_o4));\n        }\n      } catch (err) {\n        _iterator9.e(err);\n      } finally {\n        _iterator9.f();\n      }\n\n      return t;\n    }\n  }, {\n    key: \"forEachTileToFetch\",\n    value: function forEachTileToFetch(e) {\n      var _iterator10 = _createForOfIteratorHelper(this.geometry.coordinates),\n          _step10;\n\n      try {\n        var _loop = function _loop() {\n          var t = _step10.value;\n          t.tile && !t.elevationTile && e(t.tile, function () {\n            return t.tile = null;\n          });\n        };\n\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n    }\n  }]);\n\n  return g;\n}(x);\n\nvar w = /*#__PURE__*/function (_x47) {\n  _inherits(w, _x47);\n\n  var _super2 = _createSuper(w);\n\n  function w(e, t, i, o) {\n    var _this4;\n\n    _classCallCheck(this, w);\n\n    _this4 = _super2.call(this, e, i), _this4.type = \"extent\", _this4.elevationTiles = [], _this4.candidateTiles = [], _this4.fetchedCandidates = new Set(), _this4.extent = t.intersection(e.fullExtent), _this4.maskExtents = o;\n    return _this4;\n  }\n\n  _createClass(w, [{\n    key: \"selectTilesAtLOD\",\n    value: function selectTilesAtLOD(e, t) {\n      var i = this._maximumLodForRequests(t),\n          o = Math.min(i, e);\n\n      o < 0 ? this.candidateTiles.length = 0 : this._selectCandidateTilesCoveringExtentAt(o);\n    }\n  }, {\n    key: \"_maximumLodForRequests\",\n    value: function _maximumLodForRequests(e) {\n      var t = this.layer.tileInfo;\n      if (!e) return t.lods.length - 1;\n      var i = this.extent;\n\n      for (var _o5 = t.lods.length - 1; _o5 >= 0; _o5--) {\n        var _s4 = t.lods[_o5],\n            _l3 = _s4.resolution * t.size[0],\n            _n2 = _s4.resolution * t.size[1];\n\n        if (Math.ceil(i.width / _l3) * Math.ceil(i.height / _n2) <= e) return _o5;\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"allElevationTilesFetched\",\n    value: function allElevationTilesFetched() {\n      return this.candidateTiles.length === this.elevationTiles.length;\n    }\n  }, {\n    key: \"clearElevationTiles\",\n    value: function clearElevationTiles() {\n      this.elevationTiles.length = 0, this.fetchedCandidates.clear();\n    }\n  }, {\n    key: \"populateElevationTiles\",\n    value: function populateElevationTiles(e) {\n      var _iterator11 = _createForOfIteratorHelper(this.candidateTiles),\n          _step11;\n\n      try {\n        for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n          var _t9 = _step11.value;\n          var _i7 = e[_t9.id];\n          _i7 && (this.fetchedCandidates.add(_t9), this.elevationTiles.push(_i7));\n        }\n      } catch (err) {\n        _iterator11.e(err);\n      } finally {\n        _iterator11.f();\n      }\n    }\n  }, {\n    key: \"remapTiles\",\n    value: function remapTiles(e) {\n      this.candidateTiles = this._uniqueNonOverlappingTiles(this.candidateTiles.map(function (t) {\n        return e[t.id];\n      }));\n    }\n  }, {\n    key: \"getTilesToFetch\",\n    value: function getTilesToFetch() {\n      return this.candidateTiles;\n    }\n  }, {\n    key: \"forEachTileToFetch\",\n    value: function forEachTileToFetch(e, t) {\n      var _this5 = this;\n\n      var i = this.candidateTiles;\n      this.candidateTiles = [], i.forEach(function (i) {\n        if (_this5.fetchedCandidates.has(i)) return void (t && t(i));\n        var o = !1;\n        e(i, function () {\n          return o = !0;\n        }), o ? t && t(i) : _this5.candidateTiles.push(i);\n      }), this.candidateTiles = this._uniqueNonOverlappingTiles(this.candidateTiles, t);\n    }\n  }, {\n    key: \"_uniqueNonOverlappingTiles\",\n    value: function _uniqueNonOverlappingTiles(e, t) {\n      var i = {},\n          o = [];\n\n      var _iterator12 = _createForOfIteratorHelper(e),\n          _step12;\n\n      try {\n        for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n          var _l4 = _step12.value;\n          i[_l4.id] ? t && t(_l4) : (i[_l4.id] = _l4, o.push(_l4));\n        }\n      } catch (err) {\n        _iterator12.e(err);\n      } finally {\n        _iterator12.f();\n      }\n\n      var s = o.sort(function (e, t) {\n        return e.level - t.level;\n      });\n      return s.filter(function (e, i) {\n        for (var _o6 = 0; _o6 < i; _o6++) {\n          if (f(s[_o6].extent, e.extent)) return t && t(e), !1;\n        }\n\n        return !0;\n      });\n    }\n  }, {\n    key: \"_selectCandidateTilesCoveringExtentAt\",\n    value: function _selectCandidateTilesCoveringExtentAt(e) {\n      this.candidateTiles.length = 0;\n      var t = this.layer.tileInfo,\n          i = t.lods[e],\n          o = this.extent,\n          s = t.tileAt(i.level, o.xmin, o.ymin),\n          l = i.resolution * t.size[0],\n          n = i.resolution * t.size[1],\n          a = Math.ceil((o.xmax - s.extent[0]) / l),\n          r = Math.ceil((o.ymax - s.extent[1]) / n);\n\n      for (var _c2 = 0; _c2 < r; _c2++) {\n        for (var _e4 = 0; _e4 < a; _e4++) {\n          var _i8 = {\n            id: null,\n            level: s.level,\n            row: s.row - _c2,\n            col: s.col + _e4\n          };\n          t.updateTileInfo(_i8), this._tileIsMasked(_i8) || this.candidateTiles.push(_i8);\n        }\n      }\n    }\n  }, {\n    key: \"_tileIsMasked\",\n    value: function _tileIsMasked(e) {\n      return !!this.maskExtents && this.maskExtents.some(function (t) {\n        return f(t, e.extent);\n      });\n    }\n  }]);\n\n  return w;\n}(x);\n\nfunction _(e, t) {\n  var i = e.lods.length - 1;\n\n  if (t > 0) {\n    var _o7 = e.lods.findIndex(function (e) {\n      return e.resolution < t;\n    });\n\n    0 === _o7 ? i = 0 : _o7 > 0 && (i = _o7 - 1);\n  }\n\n  return i;\n}\n\nvar E = {\n  maximumAutoTileRequests: 20,\n  noDataValue: 0,\n  returnSampleInfo: !1,\n  demResolution: \"auto\",\n  minDemResolution: 0\n};\nexport default T;\nexport { T as ElevationQuery, v as GeometryDescriptor, _ as getFinestLodIndex };"],"sourceRoot":""}