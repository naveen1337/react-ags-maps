{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/HeatmapSource.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js"],"names":["i","this","gradient","height","width","key","value","_i","intensities","minPixelIntensity","maxPixelIntensity","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","constructor","arguments","apply","_r","o","_super","_this","_intensityInfo","featuresView","attributeView","initialize","requestUpdate","requestRender","_container","tileInfoView","t","createTile","getTileCoords","bitmap","resolution","getTileResolution","_this2","layer","renderer","type","_t","_s","_gradient","toJSON","tiles","forEach","source","invalidateTexture","Promise","resolve","addChild","removeAllChildren","removeChild","destroy","get","tileKey","intensityInfo","_this$_intensityInfo","s","r","_o","matrix","console","error","a"],"mappings":"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","file":"171-296f7e8f7d14d61e7811.js","sourcesContent":["import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { drawHeatmap as t } from \"../../../../../../renderers/support/heatmapUtils.js\";\n\nvar i = /*#__PURE__*/function () {\n  function i() {\n    _classCallCheck(this, i);\n\n    this.gradient = null, this.height = 512, this.width = 512;\n  }\n\n  _createClass(i, [{\n    key: \"render\",\n    value: function render(_i) {\n      t(_i, 512, this.intensities, this.gradient, this.minPixelIntensity, this.maxPixelIntensity);\n    }\n  }]);\n\n  return i;\n}();\n\nexport { i as HeatmapSource };","import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/Logger.js\";\nimport { subclass as t } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { generateGradient as i } from \"../../../../../renderers/support/heatmapUtils.js\";\nimport { BitmapTileContainer as s } from \"../../../engine/BitmapTileContainer.js\";\nimport r from \"./BaseTileRenderer.js\";\nimport { HeatmapSource as n } from \"./support/HeatmapSource.js\";\n\nvar o = /*#__PURE__*/function (_r) {\n  _inherits(o, _r);\n\n  var _super = _createSuper(o);\n\n  function o(e) {\n    var _this;\n\n    _classCallCheck(this, o);\n\n    _this = _super.call(this, e), _this._intensityInfo = {\n      minPixelIntensity: 0,\n      maxPixelIntensity: 0\n    }, _this.featuresView = {\n      attributeView: {\n        initialize: function initialize() {},\n        requestUpdate: function requestUpdate() {}\n      },\n      requestRender: function requestRender() {}\n    }, _this._container = new s(e.tileInfoView);\n    return _this;\n  }\n\n  _createClass(o, [{\n    key: \"createTile\",\n    value: function createTile(e) {\n      var t = this._container.createTile(e);\n\n      return this.tileInfoView.getTileCoords(t.bitmap, e), t.bitmap.resolution = this.tileInfoView.getTileResolution(e), t;\n    }\n  }, {\n    key: \"onConfigUpdate\",\n    value: function onConfigUpdate() {\n      var _this2 = this;\n\n      var e = this.layer.renderer;\n\n      if (\"heatmap\" === e.type) {\n        var _t = e.minPixelIntensity,\n            _s = e.maxPixelIntensity;\n        this._intensityInfo.minPixelIntensity = _t, this._intensityInfo.maxPixelIntensity = _s, this._gradient = i(e.toJSON()), this.tiles.forEach(function (e) {\n          var i = e.bitmap.source;\n          i && (i.minPixelIntensity = _t, i.maxPixelIntensity = _s, i.gradient = _this2._gradient, e.bitmap.invalidateTexture());\n        });\n      }\n    }\n  }, {\n    key: \"hitTest\",\n    value: function hitTest() {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"install\",\n    value: function install(e) {\n      e.addChild(this._container);\n    }\n  }, {\n    key: \"uninstall\",\n    value: function uninstall(e) {\n      this._container.removeAllChildren(), e.removeChild(this._container);\n    }\n  }, {\n    key: \"disposeTile\",\n    value: function disposeTile(e) {\n      this._container.removeChild(e), e.destroy();\n    }\n  }, {\n    key: \"supportsRenderer\",\n    value: function supportsRenderer(e) {\n      return e && \"heatmap\" === e.type;\n    }\n  }, {\n    key: \"onTileData\",\n    value: function onTileData(e) {\n      var t = this.tiles.get(e.tileKey);\n      if (!t) return;\n\n      var i = e.intensityInfo,\n          _this$_intensityInfo = this._intensityInfo,\n          s = _this$_intensityInfo.minPixelIntensity,\n          r = _this$_intensityInfo.maxPixelIntensity,\n          _o = t.bitmap.source || new n();\n\n      _o.intensities = i && i.matrix || null, _o.minPixelIntensity = s, _o.maxPixelIntensity = r, _o.gradient = this._gradient, t.bitmap.source = _o, this._container.addChild(t), this.requestUpdate();\n    }\n  }, {\n    key: \"onTileError\",\n    value: function onTileError(e) {\n      console.error(e);\n    }\n  }, {\n    key: \"lockGPUUploads\",\n    value: function lockGPUUploads() {}\n  }, {\n    key: \"unlockGPUUploads\",\n    value: function unlockGPUUploads() {}\n  }]);\n\n  return o;\n}(r);\n\no = e([t(\"esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer\")], o);\nvar a = o;\nexport default a;"],"sourceRoot":""}