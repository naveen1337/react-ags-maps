{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","l","t","o","geometry","toJSON","where","p","_a","_createServiceOptions2","_super","_this","_enabledDataReceived","errorString","connectionStatus","value","_this2","handles","add","layer","watch","_update","get","_proxy","enableEvent","r","remove","closed","hasEventListener","_this3","timeInfo","endField","startField","queryLatestObservations","_cleanUpQuery","then","fromJSON","features","sourceLayer","_this4","setProperty","set","propertyName","concat","JSON","stringify","purgeOptions","definitionExpression","geometryDefinition","mark","_callee","s","wrap","_context","prev","next","objectIdField","fields","map","geometryType","spatialReference","abrupt","type","parsedUrl","serviceFilter","enableDataReceived","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","stop","readOnly","d"],"mappings":"+FAAA,gQAUA,SAASA,EAAQC,EAAQC,GAAkB,IAAIC,EAAOC,OAAOD,KAAKF,GAAS,GAAIG,OAAOC,sBAAuB,CAAE,IAAIC,EAAUF,OAAOC,sBAAsBJ,GAAaC,IAAkBI,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOJ,OAAOK,yBAAyBR,EAAQO,GAAKE,eAAkBP,EAAKQ,KAAKC,MAAMT,EAAMG,GAAY,OAAOH,EAElV,SAASU,EAAcC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAAQA,EAAI,EAAKf,EAAQI,OAAOc,IAAS,GAAMC,SAAQ,SAAUC,GAAO,YAAgBN,EAAQM,EAAKF,EAAOE,OAAsBhB,OAAOiB,0BAA6BjB,OAAOkB,iBAAiBR,EAAQV,OAAOiB,0BAA0BH,IAAmBlB,EAAQI,OAAOc,IAASC,SAAQ,SAAUC,GAAOhB,OAAOmB,eAAeT,EAAQM,EAAKhB,OAAOK,yBAAyBS,EAAQE,OAAe,OAAON,EAE7gB,SAASU,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAsF,OAAhFC,QAAQC,UAAUC,QAAQC,KAAKP,QAAQC,UAAUG,QAAS,IAAI,iBAAyB,EAAQ,MAAOI,GAAK,OAAO,GAF9PC,GAA6B,OAAO,WAAkC,IAAsCC,EAAlCC,EAAQ,YAAgBb,GAAkB,GAAIC,EAA2B,CAAE,IAAIa,EAAY,YAAgBC,MAAMC,YAAaJ,EAASV,QAAQC,UAAUU,EAAOtB,UAAWuB,QAAqBF,EAASC,EAAM1B,MAAM4B,KAAMxB,WAAc,OAAO,YAA2BwB,KAAMH,IAoB5Z,SAASK,EAAEP,EAAGQ,GACZ,GAAI,YAAER,IAAM,YAAEQ,GAAI,OAAO,KACzB,IAAIC,EAAI,GACR,OAAO,YAAED,KAAOC,EAAEC,SAAWF,EAAEG,UAAW,YAAEX,KAAOS,EAAEG,MAAQZ,GAAIS,EAGnE,IAAII,EAAiB,SAAUC,GAC7B,YAAUD,EAAGC,GAEb,IA6EQC,EA7EJC,EAAS3B,EAAawB,GAE1B,SAASA,IACP,IAAII,EAKJ,OAHA,YAAgBZ,KAAMQ,IAEtBI,EAAQD,EAAOvC,MAAM4B,KAAMxB,YAAkBqC,sBAAuB,EAAID,EAAME,YAAc,KAAMF,EAAMG,iBAAmB,eACpHH,EA8GT,OA3GA,YAAaJ,EAAG,CAAC,CACf5B,IAAK,aACLoC,MAAO,WACL,IAAIC,EAASjB,KAEbA,KAAKkB,QAAQC,IAAI,CAACnB,KAAKoB,MAAMC,MAAM,gBAAgB,WACjD,OAAOJ,EAAOK,iBAGjB,CACD1C,IAAK,UACLoC,MAAO,WACLhB,KAAKe,iBAAmB,iBAEzB,CACDnC,IAAK,kBACL2C,IAAK,WACH,GAAIvB,KAAKc,YAAa,OAAO,IAAI,IAAE,oBAAqBd,KAAKc,eAE9D,CACDlC,IAAK,KACLoC,MAAO,SAAYrB,EAAGQ,GACpB,kBAAoBR,IAAMK,KAAKa,sBAAuB,EAAIb,KAAKwB,OAAOC,YAAY,iBAAiB,IAEnG,IAAIC,EAAI,YAAK,YAAgBlB,EAAEhB,WAAY,KAAMQ,MAAMN,KAAKM,KAAML,EAAGQ,GACjE5B,EAAIyB,KAER,MAAO,CACL2B,OAAQ,WACND,EAAEC,SAAU,kBAAoBhC,IAAMpB,EAAEiD,OAAOI,QAAUrD,EAAEsD,iBAAiB,kBAAoBtD,EAAEiD,OAAOC,YAAY,iBAAiB,QAI3I,CACD7C,IAAK,0BACLoC,MAAO,SAAiCrB,EAAG+B,GACzC,IAAII,EAAS9B,KAEb,IAAMA,KAAKoB,MAAMW,SAASC,WAAYhC,KAAKoB,MAAMW,SAASE,WAAa,MAAM,IAAI,IAAE,2BAA4B,oFAC/G,OAAOjC,KAAKwB,OAAOU,wBAAwBlC,KAAKmC,cAAcxC,GAAI+B,GAAGU,MAAK,SAAUzC,GAClF,IAAIQ,EAAI,UAAEkC,SAAS1C,GACnB,OAAOQ,EAAEmC,SAAS3D,SAAQ,SAAUgB,GAClCA,EAAEyB,MAAQU,EAAOV,MAAOzB,EAAE4C,YAAcT,EAAOV,SAC7CjB,OAGP,CACDvB,IAAK,uBACLoC,MAAO,WACL,IAAIwB,EAASxC,KAEb,OAAO3B,EAAcA,EAAc,GAAI,YAAK,YAAgBmC,EAAEhB,WAAY,uBAAwBQ,MAAMN,KAAKM,OAAQ,GAAI,CACvHyC,YAAa,SAAqB9C,GAChC6C,EAAOE,IAAI/C,EAAEgD,aAAchD,EAAEqB,YAIlC,CACDpC,IAAK,0BACLoC,MAAO,SAAiCrB,GACtC,IAAIQ,EAAI,GAAGyC,OAAOC,KAAKC,UAAU9C,KAAKoB,MAAM2B,cAAe,KAAKH,OAAOC,KAAKC,UAAU5C,EAAEF,KAAKoB,MAAM4B,qBAAsBhD,KAAKoB,MAAM6B,qBAAsB,KAC1J,OAAO,YAAK,YAAgBzC,EAAEhB,WAAY,0BAA2BQ,MAAMN,KAAKM,KAAML,GAAKQ,IAE5F,CACDvB,IAAK,wBACLoC,OACMN,EAAyB,YAAgC,IAAoBwC,MAAK,SAASC,IAC7F,IAAIxD,EAAGQ,EAAGuB,EAAGnD,EAAG6B,EAAGgD,EACnB,OAAO,IAAoBC,MAAK,SAAkBC,GAChD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAIH,OAHA7D,EAAIK,KAAKoB,MAAOjB,EAAIR,EAAE8D,cAAe/B,EAAI/B,EAAE+D,OAAOC,KAAI,SAAUhE,GAC9D,OAAOA,EAAEW,YACP/B,EAAI,YAAEoB,EAAEiE,cAAexD,EAAIT,EAAEoC,UAAYpC,EAAEoC,SAASzB,UAAY,KAAM8C,EAAIzD,EAAEkE,iBAAmBlE,EAAEkE,iBAAiBvD,SAAW,KAC1HgD,EAASQ,OAAO,SAAU,CAC/BC,KAAM,SACNL,OAAQhC,EACRkC,aAAcrF,EACdkF,cAAetD,EACf4B,SAAU3B,EACV1B,OAAQsB,KAAKoB,MAAM4C,UACnBC,cAAe/D,EAAEF,KAAKoB,MAAM4B,qBAAsBhD,KAAKoB,MAAM6B,oBAC7DF,aAAc/C,KAAKoB,MAAM2B,aAAazC,SACtC4D,mBAAoBlE,KAAKa,qBACzBgD,iBAAkBT,EAClBe,wBAAyBnE,KAAKoB,MAAM+C,wBACpCC,wBAAyBpE,KAAKoB,MAAMgD,wBACpCC,eAAgBrE,KAAKoB,MAAMiD,iBAG/B,KAAK,EACL,IAAK,MACH,OAAOf,EAASgB,UAGrBnB,EAASnD,UAGd,WACE,OAAOU,EAAuBtC,MAAM4B,KAAMxB,gBAOzCgC,EAzHY,CA0HnB,WAEF,YAAE,CAAC,eAAMA,EAAEhB,UAAW,mBAAe,GAAS,YAAE,CAAC,YAAE,CACjD+E,UAAU,KACP/D,EAAEhB,UAAW,kBAAmB,MAAO,YAAE,CAAC,eAAMgB,EAAEhB,UAAW,wBAAoB,GACtF,IAAIgF,EAD2FhE,EAAI,YAAE,CAAC,YAAE,2CAA4CA,GAErI","file":"163-f07b7083966abd8e6450.js","sourcesContent":["import _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Error.js\";\nimport { isNone as r, isSome as i } from \"../../../core/maybe.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/Logger.js\";\nimport { subclass as s } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport n from \"../../../rest/support/FeatureSet.js\";\nimport a from \"./FeatureLayerView2D.js\";\nimport { toJSONGeometryType as c } from \"./support/util.js\";\n\nfunction l(e, t) {\n  if (r(e) && r(t)) return null;\n  var o = {};\n  return i(t) && (o.geometry = t.toJSON()), i(e) && (o.where = e), o;\n}\n\nvar p = /*#__PURE__*/function (_a) {\n  _inherits(p, _a);\n\n  var _super = _createSuper(p);\n\n  function p() {\n    var _this;\n\n    _classCallCheck(this, p);\n\n    _this = _super.apply(this, arguments), _this._enabledDataReceived = !1, _this.errorString = null, _this.connectionStatus = \"disconnected\";\n    return _this;\n  }\n\n  _createClass(p, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      this.handles.add([this.layer.watch(\"purgeOptions\", function () {\n        return _this2._update();\n      })]);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.connectionStatus = \"disconnected\";\n    }\n  }, {\n    key: \"connectionError\",\n    get: function get() {\n      if (this.errorString) return new t(\"stream-controller\", this.errorString);\n    }\n  }, {\n    key: \"on\",\n    value: function on(e, t) {\n      \"data-received\" === e && (this._enabledDataReceived = !0, this._proxy.enableEvent(\"data-received\", !0));\n\n      var r = _get(_getPrototypeOf(p.prototype), \"on\", this).call(this, e, t),\n          i = this;\n\n      return {\n        remove: function remove() {\n          r.remove(), \"data-received\" === e && (i._proxy.closed || i.hasEventListener(\"data-received\") || i._proxy.enableEvent(\"data-received\", !1));\n        }\n      };\n    }\n  }, {\n    key: \"queryLatestObservations\",\n    value: function queryLatestObservations(e, r) {\n      var _this3 = this;\n\n      if (!(this.layer.timeInfo.endField || this.layer.timeInfo.startField)) throw new t(\"streamlayer-no-timeField\", \"queryLatestObservation can only be used with services that define a TrackIdField\");\n      return this._proxy.queryLatestObservations(this._cleanUpQuery(e), r).then(function (e) {\n        var t = n.fromJSON(e);\n        return t.features.forEach(function (e) {\n          e.layer = _this3.layer, e.sourceLayer = _this3.layer;\n        }), t;\n      });\n    }\n  }, {\n    key: \"_createClientOptions\",\n    value: function _createClientOptions() {\n      var _this4 = this;\n\n      return _objectSpread(_objectSpread({}, _get(_getPrototypeOf(p.prototype), \"_createClientOptions\", this).call(this)), {}, {\n        setProperty: function setProperty(e) {\n          _this4.set(e.propertyName, e.value);\n        }\n      });\n    }\n  }, {\n    key: \"_createTileRendererHash\",\n    value: function _createTileRendererHash(e) {\n      var t = \"\".concat(JSON.stringify(this.layer.purgeOptions), \".\").concat(JSON.stringify(l(this.layer.definitionExpression, this.layer.geometryDefinition)), \")\");\n      return _get(_getPrototypeOf(p.prototype), \"_createTileRendererHash\", this).call(this, e) + t;\n    }\n  }, {\n    key: \"_createServiceOptions\",\n    value: function () {\n      var _createServiceOptions2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var e, t, r, i, o, s;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e = this.layer, t = e.objectIdField, r = e.fields.map(function (e) {\n                  return e.toJSON();\n                }), i = c(e.geometryType), o = e.timeInfo && e.timeInfo.toJSON() || null, s = e.spatialReference ? e.spatialReference.toJSON() : null;\n                return _context.abrupt(\"return\", {\n                  type: \"stream\",\n                  fields: r,\n                  geometryType: i,\n                  objectIdField: t,\n                  timeInfo: o,\n                  source: this.layer.parsedUrl,\n                  serviceFilter: l(this.layer.definitionExpression, this.layer.geometryDefinition),\n                  purgeOptions: this.layer.purgeOptions.toJSON(),\n                  enableDataReceived: this._enabledDataReceived,\n                  spatialReference: s,\n                  maxReconnectionAttempts: this.layer.maxReconnectionAttempts,\n                  maxReconnectionInterval: this.layer.maxReconnectionInterval,\n                  updateInterval: this.layer.updateInterval\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _createServiceOptions() {\n        return _createServiceOptions2.apply(this, arguments);\n      }\n\n      return _createServiceOptions;\n    }()\n  }]);\n\n  return p;\n}(a);\n\ne([o()], p.prototype, \"errorString\", void 0), e([o({\n  readOnly: !0\n})], p.prototype, \"connectionError\", null), e([o()], p.prototype, \"connectionStatus\", void 0), p = e([s(\"esri.views.2d.layers.StreamLayerView2D\")], p);\nvar d = p;\nexport default d;"],"sourceRoot":""}