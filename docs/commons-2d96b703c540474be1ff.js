/*! For license information please see commons-2d96b703c540474be1ff.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+cn+":function(t,e,n){"use strict";var r=n("hisu"),i=n("yBJb"),a=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],o=["آ","أ","إ","ا"],s=["ﻵ","ﻷ","ﻹ","ﻻ"],u=["ﻶ","ﻸ","ﻺ","ﻼ"],c=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],l=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],f=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],h=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],v=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],d=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],m=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],p=["ء","ف"],_=["غ","ي"],y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b=10,x=12,O=18,S=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],w=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],C=[[O,O,O,O,O,O,O,O,O,6,5,6,8,5,O,O,O,O,O,O,O,O,O,O,O,O,O,O,5,5,5,6,8,4,4,11,11,11,4,4,4,4,4,b,9,b,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,O,O,O,O,O,O,5,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,9,4,11,11,11,11,4,4,4,4,0,4,4,O,4,4,11,11,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,1,x,1,x,x,1,x,x,1,x,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,11,11,7,9,7,4,4,x,x,x,x,x,x,x,x,x,x,x,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,3,3,3,3,3,3,3,3,3,3,11,3,3,7,7,7,x,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,x,x,x,x,x,x,x,3,4,x,x,x,x,x,x,7,7,x,x,4,x,x,x,x,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,x,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,x,x,x,x,x,x,x,x,x,x,x,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,x,x,x,x,x,x,x,x,x,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,O,O,O,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,O,O,O,O,O,4,4,4,4,4,O,O,O,O,O,O,2,0,4,4,2,2,2,2,2,2,b,b,4,4,4,0,2,2,2,2,2,2,2,2,2,2,b,b,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,x,1,1,1,1,1,1,1,1,1,1,b,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,x,x,x,x,x,x,x,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,11,4,4,b,b,4,4,4,4,4,11,11,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,O],[4,4,4,11,11,11,4,4,4,4,4,b,9,b,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,11,11,4,4,4,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]],M=function(){function t(){Object(r.a)(this,t),this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}return Object(i.a)(t,[{key:"bidiTransform",value:function(t,e,n){if(this.sourceToTarget=[],this.targetToSource=[],!t)return"";if(function(t,e,n){Z=[],q=[];for(var r=0;r<n;r++)t[r]=r,e[r]=r,Z[r]=r}(this.sourceToTarget,this.targetToSource,t.length),!this.checkParameters(e,n))return t;e=this.inputFormat,n=this.outputFormat;var r,i=J,a=B(e.charAt(1)),c=B(n.charAt(1)),h=("I"===e.charAt(0)?"L":e.charAt(0))+a,d=("I"===n.charAt(0)?"L":n.charAt(0))+c,p=e.charAt(2)+n.charAt(2);i.defInFormat=h,i.defOutFormat=d,i.defSwap=p;var _=function t(e,n,r,i,a){var o=function(t,e,n){if(void 0===e.inFormat&&(e.inFormat=n.defInFormat),void 0===e.outFormat&&(e.outFormat=n.defOutFormat),void 0===e.swap&&(e.swap=n.defSwap),e.inFormat===e.outFormat)return e;var r,i=e.inFormat.substring(0,1),a=e.outFormat.substring(0,1),o=e.inFormat.substring(1,4),s=e.outFormat.substring(1,4);return"C"===o.charAt(0)&&(r=P(t),o="ltr"===r||"rtl"===r?r.toUpperCase():"L"===e.inFormat.charAt(2)?"LTR":"RTL",e.inFormat=i+o),"C"===s.charAt(0)&&("rtl"===(r=P(t))?s="RTL":"ltr"===r?(r=function(t){var e=t.split("");return e.reverse(),P(e.join(""))}(t),s=r.toUpperCase()):s="L"===e.outFormat.charAt(2)?"LTR":"RTL",e.outFormat=a+s),e}(e,{inFormat:n,outFormat:r,swap:i},a);if(o.inFormat===o.outFormat)return e;n=o.inFormat,r=o.outFormat,i=o.swap;var s=n.substring(0,1),u=n.substring(1,4),c=r.substring(0,1),l=r.substring(1,4);if(a.inFormat=n,a.outFormat=r,a.swap=i,"L"===s&&"VLTR"===r){if("LTR"===u)return a.dir=Q,k(e,a);if("RTL"===u)return a.dir=tt,k(e,a)}if("V"===s&&"V"===c)return a.dir="RTL"===u?tt:Q,A(e,a);if("L"===s&&"VRTL"===r)return"LTR"===u?(a.dir=Q,e=k(e,a)):(a.dir=tt,e=k(e,a)),A(e);if("VLTR"===n&&"LLTR"===r)return a.dir=Q,k(e,a);if("V"===s&&"L"===c&&u!==l)return e=A(e),"RTL"===u?t(e,"LLTR","VLTR",i,a):t(e,"LRTL","VRTL",i,a);if("VRTL"===n&&"LRTL"===r)return t(e,"LRTL","VRTL",i,a);if("L"===s&&"L"===c){var f=a.swap;return a.swap=f.substr(0,1)+"N","RTL"===u?(a.dir=tt,e=k(e,a),a.swap="N"+f.substr(1,2),a.dir=Q,e=k(e,a)):(a.dir=Q,e=k(e,a),a.swap="N"+f.substr(1,2),e=t(e,"VLTR","LRTL",a.swap,a)),e}return e}(t,h,d,p,i),y=!1;return"R"===n.charAt(1)?y=!0:"C"!==n.charAt(1)&&"D"!==n.charAt(1)||(y="rtl"===this.checkContextual(_)),this.sourceToTarget=Z,this.targetToSource=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[t[n]]=n;return e}(this.sourceToTarget),X=this.targetToSource,r=e.charAt(3)===n.charAt(3)?_:"S"===n.charAt(3)?function(t,e,n){if(0===e.length)return"";void 0===t&&(t=!0),void 0===n&&(n=!0);var r=(e=String(e)).split(""),i=0,a=1,o=r.length;t||(i=r.length-1,a=-1,o=1);for(var c=function(t,e,n,r,i){for(var a=0,o=[],c=0,h=e;h*n<r;h+=n)if(D(t[h])||Y(t[h])){if("ل"===t[h]&&R(t,h+n,n,r)){t[h]=H(t[h+n],0===a?s:u),G(t,h+=n,n,r),i&&(o[c]=h,c++),a=0;continue}var d=t[h];1===a?t[h]=E(t,h+n,n,r)?F(t[h]):N(t[h],f):!0===E(t,h+n,n,r)?t[h]=N(t[h],v):t[h]=N(t[h],l),Y(d)||(a=1),!0===U(d)&&(a=0)}else a=0;return o}(r,i,a,o,n),h="",d=0;d<r.length;d++)n&&I(c,c.length,d)>-1?(W(X,d,!t,-1),Z.splice(d,1)):h+=r[d];return h}(y,_,!0):function(t,e,n){if(0===t.length)return"";void 0===n&&(n=!0),void 0===e&&(e=!0);for(var r="",i=(t=String(t)).split(""),a=0;a<t.length;a++){var s=!1;if(i[a]>="ﹰ"&&i[a]<"\ufeff"){var u=t.charCodeAt(a);i[a]>="ﻵ"&&i[a]<="ﻼ"?(e?(a>0&&n&&" "===i[a-1]?r=r.substring(0,r.length-1)+"ل":(r+="ل",s=!0),r+=o[(u-65269)/2]):(r+=o[(u-65269)/2],r+="ل",a+1<t.length&&n&&" "===i[a+1]?a++:s=!0),s&&(W(X,a,!0,1),Z.splice(a,0,Z[a]))):r+=m[u-65136]}else r+=i[a]}return r}(_,y,!0),this.sourceToTarget=Z,this.targetToSource=X,this.levels=q,r}},{key:"_inputFormatSetter",value:function(t){if(!et.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=t}},{key:"_outputFormatSetter",value:function(t){if(!et.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=t}},{key:"checkParameters",value:function(t,e){return t?this._inputFormatSetter(t):t=this.inputFormat,e?this._outputFormatSetter(e):e=this.outputFormat,t!==e}},{key:"checkContextual",value:function(t){var e=P(t);if("ltr"!==e&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(n){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e}},{key:"hasBidiChar",value:function(t){return nt.test(t)}}]),t}();function P(t){var e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function k(t,e){var n=t.split(""),r=[];return T(n,r,e),function(t,e,n){if(0!==n.hiLevel&&n.swap.substr(0,1)!==n.swap.substr(1,2))for(var r=0;r<t.length;r++)1===e[r]&&(t[r]=z(t[r]))}(n,r,e),L(2,n,r,e),L(1,n,r,e),q=r,n.join("")}function T(t,e,n){var r=t.length,i=n.dir?g:y,a=0,o=-1,s=[],u=[];n.hiLevel=n.dir,n.lastArabic=!1,n.hasUbatAl=!1,n.hasUbatB=!1,n.hasUbatS=!1;for(var c=0;c<r;c++)s[c]=j(t[c]);for(var l=0;l<r;l++){var f=a,h=V(t,s,u,l,n);u[l]=h;var v=240&(a=i[f][h]),d=i[a&=15][K];if(e[l]=d,v>0)if(16===v){for(var m=o;m<l;m++)e[m]=1;o=-1}else o=-1;if(i[a][$])-1===o&&(o=l);else if(o>-1){for(var p=o;p<l;p++)e[p]=d;o=-1}5===s[l]&&(e[l]=0),n.hiLevel|=d}n.hasUbatS&&function(t,e,n,r){for(var i=0;i<n;i++)if(6===t[i]){e[i]=r.dir;for(var a=i-1;a>=0&&8===t[a];a--)e[a]=r.dir}}(s,e,r,n)}function j(t){var e=t.charCodeAt(0),n=w[e>>8];return n<100?n:C[n-100][255&e]}function A(t,e){var n=t.split("");if(e){var r=[];T(n,r,e),q=r}return n.reverse(),Z.reverse(),n.join("")}function I(t,e,n){for(var r=0;r<e;r++)if(t[r]===n)return r;return-1}function D(t){for(var e=0;e<p.length;e++)if(t>=p[e]&&t<=_[e])return!0;return!1}function E(t,e,n,r){for(;e*n<r&&Y(t[e]);)e+=n;return!!(e*n<r&&D(t[e]))}function R(t,e,n,r){for(;e*n<r&&Y(t[e]);)e+=n;var i;if(!(e*n<r))return!1;i=t[e];for(var a=0;a<o.length;a++)if(o[a]===i)return!0;return!1}function L(t,e,n,r){if(!(r.hiLevel<t)){if(1===t&&r.dir===tt&&!r.hasUbatB)return e.reverse(),void Z.reverse();for(var i,a,o,s,u,c=e.length,l=0;l<c;){if(n[l]>=t){for(i=l+1;i<c&&n[i]>=t;)i++;for(a=l,o=i-1;a<o;a++,o--)s=e[a],e[a]=e[o],e[o]=s,u=Z[a],Z[a]=Z[o],Z[o]=u;l=i}l++}}}function V(t,e,n,r,i){var a=e[r];return{UBAT_L:function(){return i.lastArabic=!1,0},UBAT_R:function(){return i.lastArabic=!1,1},UBAT_ON:function(){return 4},UBAT_AN:function(){return 3},UBAT_EN:function(){return i.lastArabic?3:2},UBAT_AL:function(){return i.lastArabic=!0,i.hasUbatAl=!0,1},UBAT_WS:function(){return 4},UBAT_CS:function(){var t,a;return r<1||r+1>=e.length||2!==(t=n[r-1])&&3!==t||2!==(a=e[r+1])&&3!==a?4:(i.lastArabic&&(a=3),a===t?a:4)},UBAT_ES:function(){return 2===(r>0?n[r-1]:5)&&r+1<e.length&&2===e[r+1]?2:4},UBAT_ET:function(){if(r>0&&2===n[r-1])return 2;if(i.lastArabic)return 4;for(var t=r+1,a=e.length;t<a&&11===e[t];)t++;return t<a&&2===e[t]?2:4},UBAT_NSM:function(){if("VLTR"===i.inFormat){for(var a=e.length,o=r+1;o<a&&e[o]===x;)o++;if(o<a){var s=t[r].charCodeAt[0],u=s>=1425&&s<=2303||64286===s,c=e[o];if(u&&(1===c||7===c))return 1}}return r<1||5===e[r-1]?4:n[r-1]},UBAT_B:function(){return i.lastArabic=!0,i.hasUbatB=!0,i.dir},UBAT_S:function(){return i.hasUbatS=!0,4},UBAT_LRE:function(){return i.lastArabic=!1,4},UBAT_RLE:function(){return i.lastArabic=!1,4},UBAT_LRO:function(){return i.lastArabic=!1,4},UBAT_RLO:function(){return i.lastArabic=!1,4},UBAT_PDF:function(){return i.lastArabic=!1,4},UBAT_BN:function(){return 4}}[S[a]]()}function z(t){for(var e,n=0,r=a.length-1;n<=r;)if(e=Math.floor((n+r)/2),t<a[e][0])r=e-1;else{if(!(t>a[e][0]))return a[e][1];n=e+1}return t}function U(t){for(var e=0;e<d.length;e++)if(d[e]===t)return!0;return!1}function F(t){for(var e=0;e<c.length;e++)if(t===c[e])return h[e];return t}function N(t,e){for(var n=0;n<c.length;n++)if(t===c[n])return e[n];return t}function Y(t){return t>="ً"&&t<="ٕ"}function B(t){return"L"===t?"LTR":"R"===t?"RTL":"C"===t?"CLR":"D"===t?"CRL":""}function G(t,e,n,r){for(;e*n<r&&Y(t[e]);)e+=n;return e*n<r&&(t[e]=" ",!0)}function H(t,e){for(var n=0;n<o.length;n++)if(t===o[n])return e[n];return t}function W(t,e,n,r){for(var i=0;i<t.length;i++)(t[i]>e||!n&&t[i]===e)&&(t[i]+=r)}var Z=[],X=[],q=[],J={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},K=5,$=6,Q=0,tt=1,et=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,nt=/[\u0591-\u06ff\ufb1d-\ufefc]/;e.a=M},"/zE3":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("JrL/"),i={shaders:{vertexShader:Object(r.a)("background/background.vert"),fragmentShader:Object(r.a)("background/background.frag")},attributes:new Map([["a_pos",0]])}},"0rLw":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("hisu"),i={convertToGEGeometry:function(t,e){return null==e?null:t.convertJSONToGeometry(e)},exportPoint:function(t,e,n){var r=new a(t.getPointX(e),t.getPointY(e),n),i=t.hasZ(e),o=t.hasM(e);return i&&(r.z=t.getPointZ(e)),o&&(r.m=t.getPointM(e)),r},exportPolygon:function(t,e,n){return new o(t.exportPaths(e),n,t.hasZ(e),t.hasM(e))},exportPolyline:function(t,e,n){return new s(t.exportPaths(e),n,t.hasZ(e),t.hasM(e))},exportMultipoint:function(t,e,n){return new u(t.exportPoints(e),n,t.hasZ(e),t.hasM(e))},exportExtent:function(t,e,n){var r=t.hasZ(e),i=t.hasM(e),a=new c(t.getXMin(e),t.getYMin(e),t.getXMax(e),t.getYMax(e),n);if(r){var o=t.getZExtent(e);a.zmin=o.vmin,a.zmax=o.vmax}if(i){var s=t.getMExtent(e);a.mmin=s.vmin,a.mmax=s.vmax}return a}};var a=function t(e,n,i){Object(r.a)(this,t),this.x=e,this.y=n,this.spatialReference=i,this.z=void 0,this.m=void 0};var o=function t(e,n,i,a){Object(r.a)(this,t),this.rings=e,this.spatialReference=n,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),a&&(this.hasM=a)};var s=function t(e,n,i,a){Object(r.a)(this,t),this.paths=e,this.spatialReference=n,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),a&&(this.hasM=a)};var u=function t(e,n,i,a){Object(r.a)(this,t),this.points=e,this.spatialReference=n,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),a&&(this.hasM=a)};var c=function t(e,n,i,a,o){Object(r.a)(this,t),this.xmin=e,this.ymin=n,this.xmax=i,this.ymax=a,this.spatialReference=o,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}},"2DvD":function(t,e,n){"use strict";function r(t){switch(t){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}n.d(e,"a",(function(){return r}))},"34en":function(t,e,n){"use strict";n.d(e,"a",(function(){return Vt})),n.d(e,"b",(function(){return zt}));var r=n("hisu"),i=n("yBJb"),a=n("0fJP"),o=n("aic5"),s=n("wGbA");function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var l=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new f(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var f=function(){function t(e,n,i){Object(r.a)(this,t),this._inputGeometries=e,this._angleTolerance=void 0!==n.angleTolerance?n.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}return Object(i.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.g)(t)){this._isClosed=!0;var e=Object(a.a)(t);return this._processMultipath(e.rings),e}if(Object(o.h)(t)){this._isClosed=!1;var n=Object(a.a)(t);return this._processMultipath(n.paths),n}if(Object(o.d)(t)){if(this._maxCosAngle)return t;this._isClosed=!0;var r=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];return this._processPath(r),{rings:[r]}}t=this._inputGeometries.next()}return null}},{key:"_processMultipath",value:function(t){if(t){var e,n=u(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this._processPath(r)}}catch(i){n.e(i)}finally{n.f()}}}},{key:"_processPath",value:function(t){if(t){var e,n,r,i,a,o,u=t.length,c=t[0];this._isClosed&&++u;for(var l=1;l<u;++l){var f,h=(f=this._isClosed&&l===u-1?t[0]:t[l])[0]-c[0],v=f[1]-c[1],d=Math.sqrt(h*h+v*v);l>1&&d>0&&r>0&&(e*h+n*v)/d/r<=this._maxCosAngle&&Object(s.j)(c,1),1===l&&(i=h,a=v,o=d),d>0&&(c=f,e=h,n=v,r=d)}this._isClosed&&r>0&&o>0&&(e*i+n*a)/o/r<=this._maxCosAngle&&Object(s.j)(t[0],1)}}}]),t}(),h=n("CHlC"),v=n("kMo5"),d=n("P+uj"),m=function(){function t(){Object(r.a)(this,t),this._path=[]}return Object(i.a)(t,[{key:"path",value:function(){return this._path}},{key:"addPath",value:function(t,e){e||t.reverse(),Array.prototype.push.apply(this._path,t),e||t.reverse()}},{key:"startPath",value:function(t){this._path.push(t)}},{key:"lineTo",value:function(t){this._path.push(t)}},{key:"close",value:function(){var t=this._path;t.length>1&&(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]))}}],[{key:"mergePath",value:function(t,e){e&&Array.prototype.push.apply(t,e)}}]),t}(),p=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"normalize",value:function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);t[0]/=e,t[1]/=e}},{key:"calculateLength",value:function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}},{key:"calculateSegLength",value:function(t,e){return this.calculateLength(t[e],t[e+1])}},{key:"calculatePathLength",value:function(t){for(var e=0,n=t?t.length:0,r=0;r<n-1;++r)e+=this.calculateSegLength(t,r);return e}},{key:"calculatePathArea",value:function(t){for(var e=0,n=t?t.length:0,r=0;r<n-1;++r)e+=(t[r+1][0]-t[r][0])*(t[r+1][1]+t[r][1]);return e/2}},{key:"getCoord2D",value:function(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}},{key:"getSegCoord2D",value:function(t,e,n){return this.getCoord2D(t[e],t[e+1],n)}},{key:"getAngle",value:function(t,e,n){var r=e[0]-t[0],i=e[1]-t[1];return Math.atan2(i,r)}},{key:"getSegAngle",value:function(t,e,n){return this.getAngle(t[e],t[e+1],n)}},{key:"getAngleCS",value:function(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],a=Math.sqrt(r*r+i*i);return a>0?[r/a,i/a]:[1,0]}},{key:"getSegAngleCS",value:function(t,e,n){return this.getAngleCS(t[e],t[e+1],n)}},{key:"cut",value:function(t,e,n,r){return[n<=0?t[e]:this.getSegCoord2D(t,e,n),r>=1?t[e+1]:this.getSegCoord2D(t,e,r)]}},{key:"addSegment",value:function(t,e,n){n&&t.push(e[0]),t.push(e[1])}},{key:"getSubCurve",value:function(t,e,n){var r=[];return this.appendSubCurve(r,t,e,n)?r:null}},{key:"appendSubCurve",value:function(t,e,n,r){for(var i=e?e.length-1:0,a=0,o=!0,s=0;s<i;){var u=this.calculateSegLength(e,s);if(0!==u){if(o){if(a+u>n){var c=(n-a)/u,l=1,f=!1;a+u>=r&&(l=(r-a)/u,f=!0);var h=this.cut(e,s,c,l);if(h&&this.addSegment(t,h,o),f)break;o=!1}}else{if(a+u>r){var v=this.cut(e,s,0,(r-a)/u);v&&this.addSegment(t,v,o);break}this.addSegment(t,[e[s],e[s+1]],o)}a+=u,++s}else++s}return!0}},{key:"getCIMPointAlong",value:function(t,e){for(var n=t?t.length-1:0,r=0,i=-1;i<n;){++i;var a=this.calculateSegLength(t,i);if(0!==a){if(r+a>e){var o=(e-r)/a;return this.getCoord2D(t[i],t[i+1],o)}r+=a}}return null}},{key:"isEmpty",value:function(t,e){if(!t||t.length<=1)return!0;for(var n=t?t.length-1:0,r=-1;r<n;){if(t[++r+1][0]!==t[r][0]||t[r+1][1]!==t[r][1])return!1;if(e&&t[r+1][2]!==t[r][2])return!1}return!0}},{key:"offset",value:function(t,e,n,r,i){if(!t||t.length<2)return null;var a=t.length,o=t[0][0]===t[a-1][0]&&t[0][1]===t[a-1][1];if(o){if(t.length<3)return null;--a}for(var s=[],u=o?t[a-1]:null,c=t[0],l=0;l<a;l++){var f=l===a-1?o?t[0]:null:t[l+1];if(u)if(f){var h=[f[0]-c[0],f[1]-c[1]];this.normalize(h);var v=[c[0]-u[0],c[1]-u[1]];this.normalize(v);var d=v[0]*h[1]-v[1]*h[0],m=v[0]*h[0]+v[1]*h[1];if(d>=0==e<=0){var p=[h[0]-v[0],h[1]-v[1]];this.normalize(p);var _=Math.sqrt((1+m)/2),y=-Math.abs(e)/_;s.push([c[0]-p[0]*y,c[1]-p[1]*y])}else switch(n){case"Mitered":var g=Math.sqrt((1+m)/2);if(g>0&&1/g<r){var b=[h[0]-v[0],h[1]-v[1]];this.normalize(b);var x=Math.abs(e)/g;s.push([c[0]-b[0]*x,c[1]-b[1]*x]);break}case"Bevelled":s.push([c[0]+v[1]*e,c[1]-v[0]*e]),s.push([c[0]+h[1]*e,c[1]-h[0]*e]);break;case"Rounded":s.push([c[0]+v[1]*e,c[1]-v[0]*e]);for(var O=.2,S=1;S<5;S++,O+=.2){var w=[v[1]*(1-O)+h[1]*O,-v[0]*(1-O)-h[0]*O];this.normalize(w),s.push([c[0]+w[0]*e,c[1]+w[1]*e])}s.push([c[0]+h[1]*e,c[1]-h[0]*e]);break;case"Square":default:if(d<0)s.push([c[0]+(v[1]+v[0])*e,c[1]+(v[1]-v[0])*e]),s.push([c[0]+(h[1]-h[0])*e,c[1]-(h[0]+h[1])*e]);else{var C=Math.sqrt((1+Math.abs(m))/2),M=[h[0]-v[0],h[1]-v[1]];this.normalize(M);var P=e/C;s.push([c[0]-M[0]*P,c[1]-M[1]*P])}}}else{var k=[c[0]-u[0],c[1]-u[1]];this.normalize(k),s.push([c[0]+k[1]*e,c[1]-k[0]*e])}else{var T=[f[0]-c[0],f[1]-c[1]];this.normalize(T),s.push([c[0]+T[1]*e,c[1]-T[0]*e])}u=c,c=f}return o&&s.push([s[0][0],s[0][1]]),s}}]),t}();function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var y=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new g(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();y.instance=null;var g=function(t){Object(h.a)(n,t);var e=_(n);function n(t,i,a){var o;return Object(r.a)(this,n),(o=e.call(this,t,!1,!0))._curveHelper=new p,o._width=(void 0!==i.width?i.width:5)*a,o._arrowType=void 0!==i.geometricEffectArrowType?i.geometricEffectArrowType:"OpenEnded",o._offsetFlattenError=.03*a,o}return Object(i.a)(n,[{key:"processPath",value:function(t){switch(this._arrowType){case"OpenEnded":default:return this._constructSimpleArrow(t,!0);case"Block":return this._constructSimpleArrow(t,!1);case"Crossed":return this._constructCrossedArrow(t)}}},{key:"_constructSimpleArrow",value:function(t,e){var n=this._curveHelper.calculatePathLength(t),r=this._width;n<2*r&&(r=n/2);var i=this._curveHelper.getSubCurve(t,0,n-r);if(!i)return null;var a=r/2;if(this._curveHelper.isEmpty(i,!1))return null;var o=this._constructOffset(i,-a);if(!o)return null;var s=this._constructOffset(i,a);if(!s)return null;var u=this._constructArrowBasePoint(o,-a/2);if(!u)return null;var c=this._constructArrowBasePoint(s,a/2);if(!c)return null;var l=t[t.length-1];e||(this._makeControlPoint(s,!0),this._makeControlPoint(o,!0));var f=new m;return f.addPath(s,!0),f.lineTo(c),this._makeControlPoint(f.path()),f.lineTo(l),this._makeControlPoint(f.path()),f.lineTo(u),this._makeControlPoint(f.path()),f.addPath(o,!1),e?{paths:[f.path()]}:(f.close(),{rings:[f.path()]})}},{key:"_constructCrossedArrow",value:function(t){var e=this._curveHelper.calculatePathLength(t),n=this._width;e<3.732050807568877*n&&(n=e/3.732050807568877);var r=this._curveHelper.getSubCurve(t,0,e-2.732050807568877*n);if(!r)return null;var i=n/2;if(this._curveHelper.isEmpty(r,!1))return null;var a=this._constructOffset(r,i);if(!a)return null;var o=this._constructOffset(r,-i);if(!o)return null;var s=this._curveHelper.getSubCurve(t,0,e-n);if(!s)return null;if(this._curveHelper.isEmpty(s,!1))return null;var u=this._constructOffset(s,i);if(!u)return null;var c=this._constructOffset(s,-i);if(!c)return null;var l=u[u.length-1],f=this._constructArrowBasePoint(u,i/2);if(!f)return null;var h=c[c.length-1],v=this._constructArrowBasePoint(c,-i/2);if(!v)return null;var d=t[t.length-1];this._makeControlPoint(a,!1),this._makeControlPoint(o,!1);var p=new m;return p.addPath(a,!0),this._makeControlPoint(p.path()),p.lineTo(h),p.lineTo(v),this._makeControlPoint(p.path()),p.lineTo(d),this._makeControlPoint(p.path()),p.lineTo(f),this._makeControlPoint(p.path()),p.lineTo(l),this._makeControlPoint(p.path()),p.addPath(o,!1),{paths:[p.path()]}}},{key:"_constructOffset",value:function(t,e){return this._curveHelper.offset(t,e,"Rounded",4,this._offsetFlattenError)}},{key:"_constructArrowBasePoint",value:function(t,e){if(!t||t.length<2)return null;var n=t[t.length-2],r=t[t.length-1],i=[r[0]-n[0],r[1]-n[1]];return this._curveHelper.normalize(i),[r[0]+i[1]*e,r[1]-i[0]*e]}},{key:"_makeControlPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(s.j)(e?t[0]:t[t.length-1],1)}}]),n}(s.a);function b(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var O=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new S(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();O.instance=null;var S=function(){function t(e,n,i){Object(r.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._size=(void 0!==n.size?n.size:1)*i,this._offsetFlattenError=.03*i}return Object(i.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t))if(this._size>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],n=this._curveHelper.offset(e,this._size,"Rounded",4,this._offsetFlattenError);if(n)return{rings:[n]}}else{if(!(this._size<0))return t;if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._size>0)return{xmin:t.xmin-this._size,xmax:t.xmax+this._size,ymin:t.ymin-this._size,ymax:t.ymax+this._size}}if(Object(o.g)(t)){if(0===this._size)return t;var r,i=[],a=b(t.rings);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=this._curveHelper.offset(s,this._size,"Rounded",4,this._offsetFlattenError);u&&i.push(u)}}catch(p){a.e(p)}finally{a.f()}if(i.length)return{rings:i}}if(Object(o.h)(t)&&this._size>0){var c,l=[],f=b(t.paths);try{for(f.s();!(c=f.n()).done;){var h=c.value;if(h&&h.length>1){var v=this._curveHelper.offset(h,this._size,"Rounded",4,this._offsetFlattenError),d=this._curveHelper.offset(h,-this._size,"Rounded",4,this._offsetFlattenError);if(v&&d){for(var m=d.length-1;m>=0;m--)v.push(d[m]);v.push([v[0][0],v[0][1]]),l.push(v)}}}}catch(p){f.e(p)}finally{f.f()}if(l.length)return{rings:l}}Object(o.f)(t)&&this._size,t=this._inputGeometries.next()}return null}}]),t}();function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var C=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new M(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();C.instance=null;var M=function(t){Object(h.a)(n,t);var e=w(n);function n(t,i,a){var o;return Object(r.a)(this,n),(o=e.call(this,t,!0,!0))._curveHelper=new p,o._beginCut=(void 0!==i.beginCut?i.beginCut:1)*a,o._endCut=(void 0!==i.endCut?i.endCut:1)*a,o._middleCut=(void 0!==i.middleCut?i.middleCut:0)*a,o._invert=void 0!==i.invert&&i.invert,o._beginCut<0&&(o._beginCut=0),o._endCut<0&&(o._endCut=0),o._middleCut<0&&(o._middleCut=0),o}return Object(i.a)(n,[{key:"processPath",value:function(t){var e=this._beginCut,n=this._endCut,r=this._middleCut,i=this._curveHelper.calculatePathLength(t),a=[];if(this._invert)if(0===e&&0===n&&0===r);else if(e+n+r>=i)a.push(t);else{var o=this._curveHelper.getSubCurve(t,0,e);o&&a.push(o),(o=this._curveHelper.getSubCurve(t,.5*(i-r),.5*(i+r)))&&a.push(o),(o=this._curveHelper.getSubCurve(t,i-n,n))&&a.push(o)}else if(0===e&&0===n&&0===r)a.push(t);else if(e+n+r>=i);else if(0===r){var s=this._curveHelper.getSubCurve(t,e,i-n);s&&a.push(s)}else{var u=this._curveHelper.getSubCurve(t,e,.5*(i-r));u&&a.push(u),(u=this._curveHelper.getSubCurve(t,.5*(i+r),i-n))&&a.push(u)}return 0===a.length?null:{paths:a}}}]),n}(s.a),P=n("aNYv");function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var T=function(){function t(){Object(r.a)(this,t),this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}return Object(i.a)(t,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"size",value:function(){return this._values.length}},{key:"init",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._setEmpty(),!t||0===t.length)return!1;for(var r=0;r<t.length;r++){var i=Math.abs(t[r]);n&&i<1e-7&&(i=1e-7),this._values.push(i),this._length+=i}return e&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}},{key:"scale",value:function(t){for(var e=this._values?this._values.length:0,n=0;n<e;++n)this._values[n]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}},{key:"addValue",value:function(t){this._length+=t,this._values.push(t)}},{key:"firstValue",value:function(){return this._values[0]}},{key:"lastValue",value:function(){return this._values[this._values.length-1]}},{key:"nextValue",value:function(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}},{key:"reset",value:function(){this._currentValue=-1}},{key:"length",value:function(){return this._length}},{key:"_setEmpty",value:function(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}]),t}(),j=function(){function t(){Object(r.a)(this,t),this.reset()}return Object(i.a)(t,[{key:"reset",value:function(){this.segment=-1,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}},{key:"isValid",value:function(){return-1!==this.segment}},{key:"copyTo",value:function(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}]),t}(),A=function(t){Object(h.a)(n,t);var e=k(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(r.a)(this,n),(t=e.call(this,i,a))._tolerance=.03,t._currentPosition=new j,t}return Object(i.a)(n,[{key:"updateTolerance",value:function(t){this._tolerance=.03*t}},{key:"init",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?(this._patternLength=e.length(),this._partExtPtGap=e.extPtGap,this._partCtrlPtGap=e.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._path=t,this._seg=-1,this.setPosAtNextPart()}},{key:"curPositionIsValid",value:function(){return this._currentPosition.isValid()}},{key:"nextPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new j;return!!this._nextPosition(t,n,null,e)&&(n.copyTo(this._currentPosition),!0)}},{key:"curPointAndAngle",value:function(t){t.pt=this._getPoint(this._currentPosition);var e=this._getAngle(this._currentPosition),n=Object(P.a)(e,2),r=n[0],i=n[1];t.ca=r,t.sa=i}},{key:"nextPointAndAngle",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new j;if(!this._nextPosition(t,r,null,n))return!1;r.copyTo(this._currentPosition),e.pt=this._getPoint(r);var i=this._getAngle(r),a=Object(P.a)(i,2),o=a[0],s=a[1];return e.ca=o,e.sa=s,!0}},{key:"nextCurve",value:function(t){if(0===t)return null;var e=[],n=new j;return this._nextPosition(t,n,e,1)?(n.copyTo(this._currentPosition),e):null}},{key:"isPathEnd",value:function(){return this._currentPosition.isPathEnd}},{key:"getPathEnd",value:function(){if(-1===this._currentPosition.segment)throw new Error("missing segment");return this._path[this._currentPosition.segment+1]}},{key:"_nextPosition",value:function(t,e,n,r){if(this._currentPosition.isPathEnd)return!1;var i=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(i/=this._currentPosition.segmentLength),this._currentPosition.copyTo(e);e.abscissa+t*this._partLengthRatio>e.segmentLength+this._tolerance;){if(n){if(0===n.length)if(0===i){var a=this._path[e.segment];n.push([a[0],a[1]])}else n.push(this.getSegCoord2D(this._path,e.segment,i));var o=this._path[e.segment+1];n.push([o[0],o[1]])}if(i=0,t-=(e.segmentLength-e.abscissa)/this._partLengthRatio,this._partSegCount)e.segment=this.nextSegment(),e.segmentLength=this.calculateSegLength(this._path,e.segment),e.abscissa=0,this._partSegCount--;else{if(!this.setPosAtNextPart())return 0!==r&&(e.segmentLength=this.calculateSegLength(this._path,e.segment),e.isPartEnd=!0,1===r?(e.abscissa=e.segmentLength,e.isPathEnd=!0):e.abscissa=e.segmentLength+t,!0);this._currentPosition.copyTo(e)}}if(e.abscissa+=t*this._partLengthRatio,n){if(0===n.length)if(0===i){var s=this._path[e.segment];n.push([s[0],s[1]])}else n.push(this.getSegCoord2D(this._path,e.segment,i));var u=e.abscissa/e.segmentLength;if(1===u){var c=this._path[e.segment+1];n.push([c[0],c[1]])}else n.push(this.getSegCoord2D(this._path,e.segment,u))}return this._partSegCount||Math.abs(e.abscissa-e.segmentLength)<this._tolerance&&(e.isPathEnd=this._partIsLast,e.isPartEnd=!0),!0}},{key:"_getPoint",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._path,t.segment,e)}},{key:"_getAngle",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._path,t.segment,e)}},{key:"setPosAtNextPart",value:function(){for(;this._partSegCount;)this.hasNextSegment()&&this.nextSegment(),this._partSegCount--;if(!this.hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this.hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this.nextSegment()),this._partSegCount++,1===Object(s.f)(this._path[this.getEndPointIndex()])){this._partIsLast=!this.hasNextSegment();break}for(var t=this._partSegCount;t;)this.previousSegment(),--t;this._currentPosition.segment=this.nextSegment(),this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;var e=this.getStartPointIndex();this._ctrlPtBegin=1===Object(s.f)(this._path[e]);var n=e+this._partSegCount+1;if(n>=this._path.length&&(n=0),this._ctrlPtEnd=1===Object(s.f)(this._path[n]),this._patternLength>0){var r=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,i=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap,a=Math.round((this._partLength-(r+i))/this._patternLength);a<=0&&(a=r+i>0?0:1),this._partLengthRatio=this._partLength/(r+i+a*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}},{key:"hasNextSegment",value:function(){return this._seg<this._path.length-2}},{key:"previousSegment",value:function(){return--this._seg}},{key:"nextSegment",value:function(){return++this._seg}},{key:"getStartPointIndex",value:function(){return this._seg}},{key:"getEndPointIndex",value:function(){return this._seg+1}}]),n}(p);function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var D=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new E(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();D.instance=null;var E=function(t){Object(h.a)(n,t);var e=I(n);function n(t,i,a){var o;return Object(r.a)(this,n),(o=e.call(this,t,!0,!0))._walker=new A,o._walker.updateTolerance(a),o._endings=i.lineDashEnding,o._customDashPos=void 0!==i.offsetAlongLine?i.offsetAlongLine*a:0,o._offsetAtEnd=void 0!==i.customEndingOffset?i.customEndingOffset*a:0,o._pattern=new T,o._pattern.init(i.dashTemplate,!0),o._pattern.scale(a),o}return Object(i.a)(n,[{key:"processPath",value:function(t){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[t]};if(!this.iteratePath){var e=!0;switch(this._endings){case"HalfPattern":case"HalfGap":default:this._pattern.extPtGap=0;break;case"FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case"FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case"NoConstraint":this.isClosed||(e=!1);break;case"Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var n=this._walker.calculatePathLength(t);if(this._pattern.isEmpty()||n<.1*this._pattern.length())return{paths:[t]};if(!this._walker.init(t,this._pattern,e))return{paths:[t]}}var r;if(this.iteratePath)r=this._pattern.nextValue();else{var i;switch(this._endings){case"HalfPattern":default:i=.5*this._pattern.firstValue();break;case"HalfGap":i=.5*-this._pattern.lastValue();break;case"FullGap":i=-this._pattern.lastValue();break;case"FullPattern":i=0;break;case"NoConstraint":case"Custom":i=-this._customDashPos}var a=i/this._pattern.length();i=(a-=Math.floor(a))*this._pattern.length(),this._pattern.reset(),r=this._pattern.nextValue();for(var o=!1;i>=r;)i-=r,r=this._pattern.nextValue(),o=!o;r-=i,o?(this._walker.nextPosition(r),r=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(r),r=this._pattern.nextValue(),this._walker.nextPosition(r),r=this._pattern.nextValue())}var s=this._walker.nextCurve(r);return s?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),m.mergePath(s,this._firstCurve),this._firstCurve=null)):(r=this._pattern.nextValue(),!this._walker.nextPosition(r)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(s=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,s=this._firstCurve,this._firstCurve=null),{paths:[s]}}}]),n}(s.a);function R(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new z(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();V.instance=null;var z=function(){function t(e,n,i){switch(Object(r.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._width=(void 0!==n.width?n.width:2)*i,n.method){case"Mitered":default:this._method="Mitered";break;case"Bevelled":this._method="Bevelled";break;case"Rounded":case"TrueBuffer":this._method="Rounded";break;case"Square":this._method="Square"}this._option=n.option,this._offsetFlattenError=.03*i}return Object(i.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t)&&this._width>0){if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)-2*this._width<0)return t;var e=[];return e.push([[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]),e.push([[t.xmin+this._width,t.ymin+this._width],[t.xmax-this._width,t.ymin+this._width],[t.xmax-this._width,t.ymax-this._width],[t.xmin+this._width,t.ymax-this._width],[t.xmin+this._width,t.ymin+this._width]]),{rings:e}}if(Object(o.g)(t)&&this._width>0){var n,r=[],i=R(t.rings);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=this._curveHelper.calculatePathLength(a),u=this._curveHelper.offset(a,this._width,this._method,4,this._offsetFlattenError);u&&(s<0&&u.reverse(),r.push(u))}}catch(c){i.e(c)}finally{i.f()}if(r.length)return{rings:r}}t=this._inputGeometries.next()}return null}}]),t}();function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var F=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new N(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();F.instance=null;var N=function(t){Object(h.a)(n,t);var e=U(n);function n(t,i,a){var o;return Object(r.a)(this,n),(o=e.call(this,t,!1,!0))._curveHelper=new p,o._length=(void 0!==i.length?i.length:20)*a,o._angle=void 0!==i.angle?i.angle:225,o._position=void 0!==i.position?i.position:50,o._length<0&&(o._length=-o._length),o._position<20&&(o._position=20),o._position>80&&(o._position=80),o._mirror=!1,o}return Object(i.a)(n,[{key:"processPath",value:function(t){if(this._curveHelper.isEmpty(t,!1))return null;var e=t[0],n=t[t.length-1],r=[n[0]-e[0],n[1]-e[1]];this._curveHelper.normalize(r);var i=[e[0]+(n[0]-e[0])*this._position/100,e[1]+(n[1]-e[1])*this._position/100],a=Math.cos((90-this._angle)/180*Math.PI),o=Math.sin((90-this._angle)/180*Math.PI);return this._mirror&&(o=-o),this._mirror=!this._mirror,{paths:[[e,[i[0]-this._length/2*a,i[1]-this._length/2*o],[i[0]+this._length/2*a,i[1]+this._length/2*o],n]]}}}]),n}(s.a);function Y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var G=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new H(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();G.instance=null;var H=function(){function t(e,n,i){Object(r.a)(this,t),this._inputGeometries=e,this._offsetX=void 0!==n.offsetX?n.offsetX*i:0,this._offsetY=void 0!==n.offsetY?-n.offsetY*i:0}return Object(i.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t))return{xmin:t.xmin+this._offsetX,xmax:t.xmax+this._offsetX,ymin:t.ymin+this._offsetY,ymax:t.ymax+this._offsetY};if(Object(o.g)(t)){var e=Object(a.a)(t);return this._moveMultipath(e.rings,this._offsetX,this._offsetY),e}if(Object(o.h)(t)){var n=Object(a.a)(t);return this._moveMultipath(n.paths,this._offsetX,this._offsetY),n}if(Object(o.e)(t)){var r=Object(a.a)(t);return this._movePath(r.points,this._offsetX,this._offsetY),r}if(Object(o.f)(t))return{x:t.x+this._offsetX,y:t.y+this._offsetY};t=this._inputGeometries.next()}return null}},{key:"_moveMultipath",value:function(t,e,n){if(t){var r,i=Y(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;this._movePath(a,e,n)}}catch(o){i.e(o)}finally{i.f()}}}},{key:"_movePath",value:function(t,e,n){if(t){var r,i=Y(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;a[0]+=e,a[1]+=n}}catch(o){i.e(o)}finally{i.f()}}}}]),t}();function W(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new q(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();X.instance=null;var q=function(){function t(e,n,i){Object(r.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._offset=(void 0!==n.offset?n.offset:1)*i,this._method=n.method,this._option=n.option,this._offsetFlattenError=.03*i}return Object(i.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._offset)return t;if(Object(o.d)(t)){if("Rounded"===this._method&&this._offset>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],n=this._curveHelper.offset(e,this._offset,this._method,4,this._offsetFlattenError);return n?{rings:[n]}:null}if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._offset>0)return{xmin:t.xmin-this._offset,xmax:t.xmax+this._offset,ymin:t.ymin-this._offset,ymax:t.ymax+this._offset}}if(Object(o.g)(t)){var r,i=[],a=W(t.rings);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=this._curveHelper.offset(s,this._offset,this._method,4,this._offsetFlattenError);u&&i.push(u)}}catch(d){a.e(d)}finally{a.f()}if(i.length)return{rings:i}}if(Object(o.h)(t)){var c,l=[],f=W(t.paths);try{for(f.s();!(c=f.n()).done;){var h=c.value,v=this._curveHelper.offset(h,this._offset,this._method,4,this._offsetFlattenError);v&&l.push(v)}}catch(d){f.e(d)}finally{f.f()}if(l.length)return{paths:l}}t=this._inputGeometries.next()}return null}}]),t}(),J=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new K(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();J.instance=null;var K=function(){function t(e,n,i){Object(r.a)(this,t),this._inputGeometries=e,this._reverse=void 0===n.reverse||n.reverse}return Object(i.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(!this._reverse)return t;if(Object(o.h)(t)){var e=Object(a.a)(t);return Object(s.h)(e.paths),e}t=this._inputGeometries.next()}return null}}]),t}(),$=n("+MdM"),Q=n("XKgO");function tt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var nt=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new rt(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();nt.instance=null;var rt=function(){function t(e,n,i){Object(r.a)(this,t),this._inputGeometries=e,this._rotateAngle=void 0!==n.angle?-n.angle*Math.PI/180:0}return Object(i.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._rotateAngle)return t;var e=Object($.g)();Object(Q.a)(e,t);var n=(e[2]+e[0])/2,r=(e[3]+e[1])/2;if(Object(o.d)(t)){var i={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._rotateMultipath(i.rings,n,r),i}if(Object(o.g)(t)){var s=Object(a.a)(t);return this._rotateMultipath(s.rings,n,r),s}if(Object(o.h)(t)){var u=Object(a.a)(t);return this._rotateMultipath(u.paths,n,r),u}if(Object(o.e)(t)){var c=Object(a.a)(t);return this._rotatePath(c.points,n,r),c}if(Object(o.f)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_rotateMultipath",value:function(t,e,n){if(t){var r,i=tt(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;this._rotatePath(a,e,n)}}catch(o){i.e(o)}finally{i.f()}}}},{key:"_rotatePath",value:function(t,e,n){if(t){var r,i=Math.cos(this._rotateAngle),a=Math.sin(this._rotateAngle),o=tt(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s[0]-e,c=s[1]-n;s[0]=e+u*i-c*a,s[1]=n+u*a+c*i}}catch(l){o.e(l)}finally{o.f()}}}}]),t}();function it(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ot=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new st(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();ot.instance=null;var st=function(){function t(e,n,i){Object(r.a)(this,t),this._inputGeometries=e,this._xFactor=void 0!==n.xScaleFactor?n.xScaleFactor:1.15,this._yFactor=void 0!==n.yScaleFactor?n.yScaleFactor:1.15}return Object(i.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(1===this._xFactor&&1===this._yFactor)return t;var e=Object($.g)();Object(Q.a)(e,t);var n=(e[2]+e[0])/2,r=(e[3]+e[1])/2;if(Object(o.d)(t)){var i={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._scaleMultipath(i.rings,n,r),i}if(Object(o.g)(t)){var s=Object(a.a)(t);return this._scaleMultipath(s.rings,n,r),s}if(Object(o.h)(t)){var u=Object(a.a)(t);return this._scaleMultipath(u.paths,n,r),u}if(Object(o.e)(t)){var c=Object(a.a)(t);return this._scalePath(c.points,n,r),c}if(Object(o.f)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_scaleMultipath",value:function(t,e,n){if(t){var r,i=it(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;this._scalePath(a,e,n)}}catch(o){i.e(o)}finally{i.f()}}}},{key:"_scalePath",value:function(t,e,n){if(t){var r,i=it(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=(a[0]-e)*this._xFactor,s=(a[1]-n)*this._yFactor;a[0]=e+o,a[1]=n+s}}catch(u){i.e(u)}finally{i.f()}}}}]),t}();function ut(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var lt=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new vt(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();lt.instance=null;var ft,ht,vt=function(){function t(e,n,i){Object(r.a)(this,t),this._inputGeometries=e,this._height=(void 0!==n.amplitude?n.amplitude:2)*i,this._period=(void 0!==n.period?n.period:3)*i,this._style=n.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new T,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new A,this._walker.updateTolerance(i)}return Object(i.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._height||0===this._period)return t;if(Object(o.h)(t)){var e=this._processGeom(t.paths);if(e.length)return{paths:e}}if(Object(o.g)(t)){var n=this._processGeom(t.rings);if(n.length)return{rings:n}}t=this._inputGeometries.next()}return null}},{key:"_processGeom",value:function(t){var e,n=[],r=ut(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(this._walker.init(i,this._pattern))switch(this._style){case"Sinus":default:n.push(this._constructCurve(i,!1));break;case"Square":n.push(this._constructSquare(i));break;case"Triangle":n.push(this._constructTriangle(i));break;case"Random":n.push(this._constructCurve(i,!0))}else n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"_constructCurve",value:function(t,e){var n=new m,r=this._walker.calculatePathLength(t),i=Math.round(r/this._period);0===i&&(i=1);var a=16*i+1,o=r/i,s=this._period/16,u=1/a,c=2*Math.PI*r/o,l=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),h=2*Math.PI*Math.random(),v=.75-Math.random()/2,d=.75-Math.random()/2,p={};this._walker.curPointAndAngle(p),n.startPath(p.pt);for(var _=0;;){if(!this._walker.nextPointAndAngle(s,p)){n.lineTo(t[t.length-1]);break}var y=_,g=void 0;if(_+=u,e){var b=this._height/2*(1+.3*Math.sin(v*c*y+l));g=b*Math.sin(c*y+f),g+=b*Math.sin(d*c*y+h),g/=2}else g=.5*this._height*Math.sin(.5*c*y);n.lineTo([p.pt[0]-g*p.sa,p.pt[1]+g*p.ca])}return n.path()}},{key:"_constructSquare",value:function(t){var e=new m,n=this._walker.calculatePathLength(t);Math.round(n/this._period);for(var r=!0;;){var i=!1;if(this._walker.curPositionIsValid()){var a={};this._walker.curPointAndAngle(a);var o={};if(this._walker.nextPointAndAngle(this._period,o)){var s={};this._walker.nextPointAndAngle(this._period,s)&&(r?(e.startPath(a.pt),r=!1):e.lineTo(a.pt),e.lineTo([a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca]),e.lineTo([o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca]),e.lineTo([o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca]),e.lineTo([s.pt[0]+this._height/2*s.sa,s.pt[1]-this._height/2*s.ca]),i=!0)}}if(!i){e.lineTo(this._walker.getPathEnd());break}}return e.path()}},{key:"_constructTriangle",value:function(t){var e=new m,n=this._walker.calculatePathLength(t);Math.round(n/this._period);for(var r=!0;;){var i=!1;if(this._walker.curPositionIsValid()){var a={};this._walker.curPointAndAngle(a);var o={};if(this._walker.nextPointAndAngle(this._period/2,o)){var s={};this._walker.nextPointAndAngle(this._period,s)&&(this._walker.nextPosition(this._period/2)&&(r?(e.startPath(a.pt),r=!1):e.lineTo(a.pt),e.lineTo([o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca]),e.lineTo([s.pt[0]+this._height/2*s.sa,s.pt[1]-this._height/2*s.ca])),i=!0)}}if(!i){e.lineTo(this._walker.getPathEnd());break}}return e.path()}}]),t}();function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}(ht=ft||(ft={})).NoConstraint="NoConstraint",ht.WithMarkers="WithMarkers",ht.WithFullGap="WithFullGap",ht.WithHalfGap="WithHalfGap",ht.Custom="Custom";var mt=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new pt(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();mt.instance=null;var pt=function(t){Object(h.a)(n,t);var e=dt(n);function n(t,i,a){var o;return Object(r.a)(this,n),(o=e.call(this,t,!0,!0))._grometryWalker=new A,o._grometryWalker.updateTolerance(a),o._angleToLine=void 0===i.angleToLine||i.angleToLine,o._offset=void 0!==i.offset?i.offset*a:0,o._originalEndings=i.endings,o._offsetAtEnd=void 0!==i.customEndingOffset?i.customEndingOffset*a:0,o._position=void 0!==i.offsetAlongLine?i.offsetAlongLine*a:0,o._pattern=new T,o._pattern.init(i.placementTemplate,!1),o._pattern.scale(a),o._endings=o._originalEndings,o}return Object(i.a)(n,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath)e=this._pattern.nextValue();else{this._originalEndings===ft.WithFullGap&&this.isClosed?this._endings=ft.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;var n,r=!0;switch(this._endings){case ft.NoConstraint:n=-this._position,n=this._adjustPosition(n),r=!1;break;case ft.WithHalfGap:default:n=-this._pattern.lastValue()/2;break;case ft.WithFullGap:n=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case ft.WithMarkers:n=0;break;case ft.Custom:n=-this._position,n=this._adjustPosition(n),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._grometryWalker.init(t,this._pattern,r))return null;this._pattern.reset();for(var i=0;n>i;)n-=i,i=this._pattern.nextValue();e=i-=n,this.iteratePath=!0}var a={};return this._grometryWalker.nextPointAndAngle(e,a)?this._endings===ft.WithFullGap&&this._grometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===ft.WithMarkers&&this._grometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(a.pt[0]+this._offset*a.sa,a.pt[1]-this._offset*a.ca),this._angleToLine&&this.internalPlacement.setRotateCS(a.ca,a.sa),this.internalPlacement):(this.iteratePath=!1,null)}},{key:"_adjustPosition",value:function(t){var e=t/this._pattern.length();return(e-=Math.floor(e))*this._pattern.length()}}]),n}(s.b);function _t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var yt=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new gt(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();yt.instance=null;var gt=function(t){Object(h.a)(n,t);var e=_t(n);function n(t,i,a){var o;return Object(r.a)(this,n),(o=e.call(this,t,!1,!0))._curveHelper=new p,o._angleToLine=void 0===i.angleToLine||i.angleToLine,o._offset=void 0!==i.offset?i.offset*a:0,o._type=i.extremityPlacement,o._position=void 0!==i.offsetAlongLine?i.offsetAlongLine*a:0,o._beginProcessed=!1,o}return Object(i.a)(n,[{key:"processPath",value:function(t){var e;switch(this._type){case"Both":default:this._beginProcessed?(e=this._atExtremities(t,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(e=this._atExtremities(t,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case"JustBegin":e=this._atExtremities(t,this._position,!0);break;case"JustEnd":e=this._atExtremities(t,this._position,!1);break;case"None":}return e}},{key:"_atExtremities",value:function(t,e,n){var r=t.length;if(r<2)return null;for(var i,a=n?1:r-2,o=n?r:-1,u=n?1:-1,c=0,l=n?t[0]:t[r-1],f=a;f!==o;f+=u){i=l,l=t[f];var h=this._curveHelper.calculateLength(i,l);if(c+h>e){var v=(e-c)/h,d=this._curveHelper.getAngleCS(i,l,v),m=Object(P.a)(d,2),p=m[0],_=m[1],y=Object(s.e)(i,l,v);return this.internalPlacement.setTranslate(y[0]-this._offset*_,y[1]+this._offset*p),this._angleToLine&&this.internalPlacement.setRotateCS(-p,-_),this.internalPlacement}c+=h}return null}}]),n}(s.b);function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var xt=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new Ot(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();xt.instance=null;var Ot=function(t){Object(h.a)(n,t);var e=bt(n);function n(t,i,a){var o;return Object(r.a)(this,n),(o=e.call(this,t,!0,!0))._walker=new A,o._walker.updateTolerance(a),o._angleToLine=void 0===i.angleToLine||i.angleToLine,o._offset=void 0!==i.offset?i.offset*a:0,o._beginGap=void 0!==i.beginPosition?i.beginPosition*a:0,o._endGap=void 0!==i.endPosition?i.endPosition*a:0,o._flipFirst=void 0===i.flipFirst||i.flipFirst,o._pattern=new T,o._pattern.init(i.positionArray,!1,!1),o._subPathLen=0,o._posCount=o._pattern.size(),o._isFirst=!0,o._prevPos=0,o}return Object(i.a)(n,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath){var n=this._pattern.nextValue()*this._subPathLen,r=this._beginGap+n;e=r-this._prevPos,this._prevPos=r}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=this._walker.calculatePathLength(t)-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(t,this._pattern,!1))return null;this._pattern.reset();var i=this._pattern.nextValue()*this._subPathLen,a=this._beginGap+i;e=a-this._prevPos,this._prevPos=a,this.iteratePath=!0}var o={};if(!this._walker.nextPointAndAngle(e,o,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(o.pt[0]+this._offset*o.sa,o.pt[1]-this._offset*o.ca);var s,u,c=this._isFirst&&this._flipFirst;return this._angleToLine?(s=o.ca,u=o.sa):(s=1,u=0),c&&(s=-s,u=-u),this.internalPlacement.setRotateCS(s,u),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}]),n}(s.b),St=n("jga1");function wt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Mt=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new Pt(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Mt.instance=null;var Pt=function(){function t(e,n,i){if(Object(r.a)(this,t),this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._stepX=(void 0!==n.stepX?Math.abs(n.stepX):16)*i,this._stepY=(void 0!==n.stepY?Math.abs(n.stepY):16)*i,0!==this._stepX&&0!==this._stepY&&e&&function(t){return void 0!==t.rings}(e)&&e.rings){if(this._gridType=void 0!==n.gridType?n.gridType:"Fixed","Random"===this._gridType)this._randomness=void 0!==n.randomness?n.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0;else{if(this._randomness=0,this._gridAngle=void 0!==n.gridAngle?n.gridAngle:0,this._shiftOddRows=void 0!==n.shiftOddRows&&n.shiftOddRows,this._offsetX=void 0!==n.offsetX?n.offsetX*i:0,this._offsetY=void 0!==n.offsetY?n.offsetY*i:0,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginX=0,this._graphicOriginY=0,this._internalPlacement=new St.a,this._calculateMinMax(e),this._geometry=e}}return Object(i.a)(t,[{key:"next",value:function(){return this._geometry?this._nextInside():null}},{key:"_calculateMinMax",value:function(t){var e,n,r,i,a,o,s,u;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,a=o=Number.MAX_VALUE,s=u=-Number.MAX_VALUE;var c,l=wt(t.rings);try{for(l.s();!(c=l.n()).done;)for(var f=c.value,h=f?f.length:0,v=0;v<h;++v)e=f[v][0]-this._graphicOriginX-this._offsetX,n=f[v][1]-this._graphicOriginY-this._offsetY,r=this._cosAngle*e-this._sinAngle*n,i=this._sinAngle*e+this._cosAngle*n,a=Math.min(a,r),s=Math.max(s,r),o=Math.min(o,i),u=Math.max(u,i)}catch(d){l.e(d)}finally{l.f()}a+=this._graphicOriginX,s+=this._graphicOriginX,o+=this._graphicOriginY,u+=this._graphicOriginY,this._xMin=Math.round(a/this._stepX),this._xMax=Math.round(s/this._stepX),this._yMin=Math.round(o/this._stepY),this._yMax=Math.round(u/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1}},{key:"_nextInside",value:function(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}var t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);var e=this._currentY*this._stepY+this._offsetY,n=void 0,r=void 0;return this._currentX++,"Random"===this._gridType?(n=this._graphicOriginX+t+this._stepX*this._randomness*(.5-Math.random())*2/3,r=this._graphicOriginY+e+this._stepY*this._randomness*(.5-Math.random())*2/3):(n=this._graphicOriginX+this._cosAngle*t+this._sinAngle*e,r=this._graphicOriginY-this._sinAngle*t+this._cosAngle*e),this._internalPlacement.setTranslate(n,r),this._internalPlacement}}}]),t}();function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var Tt=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new jt(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Tt.instance=null;var jt=function(t){Object(h.a)(n,t);var e=kt(n);function n(t,i,a){var o;return Object(r.a)(this,n),(o=e.call(this,t,!0,!0))._curveHelper=new p,o._angleToLine=void 0===i.angleToLine||i.angleToLine,o._offset=void 0!==i.offset?i.offset*a:0,o._relativeTo=i.relativeTo,o._position=void 0!==i.startPointOffset?i.startPointOffset*a:0,o._epsilon=.001*a,o}return Object(i.a)(n,[{key:"processPath",value:function(t){var e=this._position;if("SegmentMidpoint"===this._relativeTo){for(this.iteratePath||(this._segmentCount=t.length,this._curSegment=1,this.iteratePath=!0);this._curSegment<this._segmentCount;){var n=this._curSegment;this._curSegment++;var r=t[n-1],i=t[n],a=this._curveHelper.calculateLength(r,i);if(!(a<this._epsilon)){var o=.5+this._position/a,u=this._curveHelper.getAngleCS(r,i,o),c=Object(P.a)(u,2),l=c[0],f=c[1],h=Object(s.e)(r,i,o);return this.internalPlacement.setTranslate(h[0]-this._offset*f,h[1]+this._offset*l),this._angleToLine&&this.internalPlacement.setRotateCS(l,f),this.internalPlacement}}return this.iteratePath=!1,null}"LineEnd"===this._relativeTo&&Object(s.i)(t);var v=this.onLine(t,e);return"LineEnd"===this._relativeTo&&Object(s.i)(t),v}},{key:"onLine",value:function(t,e){var n,r=!1;switch(this._relativeTo){case"LineMiddle":default:n=this._curveHelper.calculatePathLength(t)/2+e;break;case"LineBeginning":n=e;break;case"LineEnd":n=e,r=!0}for(var i,a=t.length,o=0,u=t[0],c=1;c<a;++c){i=u,u=t[c];var l=this._curveHelper.calculateLength(i,u);if(o+l>n){var f=(n-o)/l,h=this._curveHelper.getAngleCS(i,u,f),v=Object(P.a)(h,2),d=v[0],m=v[1],p=Object(s.e)(i,u,f),_=r?this._offset:-this._offset;return this.internalPlacement.setTranslate(p[0]-_*m,p[1]+_*d),this._angleToLine&&(r?this.internalPlacement.setRotateCS(-d,-m):this.internalPlacement.setRotateCS(d,m)),this.internalPlacement}o+=l}return null}}]),n}(s.b);function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var It=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new Dt(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();It.instance=null;var Dt=function(t){Object(h.a)(n,t);var e=At(n);function n(t,i,a){var o;return Object(r.a)(this,n),(o=e.call(this,t,!0,!0))._curveHelper=new p,o._angleToLine=void 0===i.angleToLine||i.angleToLine,o._offset=void 0!==i.offset?i.offset*a:0,o._endPoints=void 0===i.placeOnEndPoints||i.placeOnEndPoints,o._controlPoints=void 0===i.placeOnControlPoints||i.placeOnControlPoints,o._regularVertices=void 0===i.placeOnRegularVertices||i.placeOnRegularVertices,o._tags=[],o._tagIterator=0,o}return Object(i.a)(n,[{key:"processPath",value:function(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;var e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);var n=e[0],r=e[1];if(0!==this._offset){var i=Math.cos(e[2]),a=Math.sin(e[2]);n-=this._offset*a,r+=this._offset*i}return this.internalPlacement.setTranslate(n,r),this._tagIterator++,this.internalPlacement}},{key:"_preparePath",value:function(t){this._tags.length=0,this._tagIterator=0;for(var e,n,r=Object(s.g)(t),i=t.length-1,a=0,o=0,u=0,c=0,l=0;a<i;){e=t[++a-1],n=t[a];var f=Object(s.f)(e),h=Object(s.f)(n);(this._angleToLine||0!==this._offset)&&(c=this._curveHelper.getAngle(e,n,0)),1===a?r?(o=c,u=f):this._endPoints&&this._tags.push([e[0],e[1],c]):1===f?this._controlPoints&&this._tags.push([e[0],e[1],Et(l,c)]):this._regularVertices&&this._tags.push([e[0],e[1],Et(l,c)]),(this._angleToLine||0!==this._offset)&&(l=this._curveHelper.getAngle(e,n,1)),a===i&&(r?1===h||1===u?this._controlPoints&&this._tags.push([n[0],n[1],Et(l,o)]):this._regularVertices&&this._tags.push([n[0],n[1],Et(l,o)]):this._endPoints&&this._tags.push([n[0],n[1],l]))}this._tagIterator=0}}]),n}(s.b);function Et(t,e){for(var n=Math.PI;Math.abs(e-t)>n+2e-15;)e-t>n?e-=2*n:e+=2*n;return(t+e)/2}var Rt=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"execute",value:function(t,e,n){return new Lt(t,e,n)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Rt.instance=null;var Lt=function(){function t(e,n,i){Object(r.a)(this,t),this._geometry=e,this._offsetX=void 0!==n.offsetX?n.offsetX*i:0,this._offsetY=void 0!==n.offsetY?n.offsetY*i:0,this._method=void 0!==n.method?n.method:"OnPolygon",this._internalPlacement=new St.a}return Object(i.a)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t&&function(t){return void 0!==t.rings}(t)?this._polygonCenter(t):null}},{key:"_polygonCenter",value:function(t){var e=!1;switch(this._method){case"OnPolygon":default:case"CenterOfMass":case"BoundingBoxCenter":var n=Object($.g)();Object(Q.a)(n,t),this._internalPlacement.setTranslate((n[2]+n[0])/2+this._offsetX,(n[3]+n[1])/2-this._offsetY),e=!0}return e?this._internalPlacement:null}}]),t}();function Vt(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return l.local();case"CIMGeometricEffectArrow":return y.local();case"CIMGeometricEffectBuffer":return O.local();case"CIMGeometricEffectCut":return C.local();case"CIMGeometricEffectDashes":return D.local();case"CIMGeometricEffectDonut":return V.local();case"CIMGeometricEffectJog":return F.local();case"CIMGeometricEffectMove":return G.local();case"CIMGeometricEffectOffset":return X.local();case"CIMGeometricEffectReverse":return J.local();case"CIMGeometricEffectRotate":return nt.local();case"CIMGeometricEffectScale":return ot.local();case"CIMGeometricEffectWave":return lt.local()}return null}function zt(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return mt.local();case"CIMMarkerPlacementAtExtremities":return yt.local();case"CIMMarkerPlacementAtRatioPositions":return xt.local();case"CIMMarkerPlacementInsidePolygon":return Mt.local();case"CIMMarkerPlacementOnLine":return Tt.local();case"CIMMarkerPlacementOnVertices":return It.local();case"CIMMarkerPlacementPolygonCenter":return Rt.local()}return null}},"55C+":function(t,e,n){"use strict";n.d(e,"a",(function(){return V}));var r=n("hisu"),i=n("yBJb"),a=n("4Mpa"),o=n("CHlC"),s=n("kMo5"),u=n("P+uj"),c=n("dQW7"),l=n("kDog"),f=n("LuB+"),h=n("j56I"),v=n("xAIp"),d=(n("J4Pc"),n("wckI"),n("TM+E"),n("iaHD")),m=n("x8wo");function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var _,y=function(t){Object(o.a)(n,t);var e=p(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return n}(n("0n+b").a),g=y=Object(c.a)([Object(d.a)("esri.views.layers.support.ClipArea")],y);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var x=_=function(t){Object(o.a)(n,t);var e=b(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).type="rect",t.left=null,t.right=null,t.top=null,t.bottom=null,t}return Object(i.a)(n,[{key:"clone",value:function(){return new _({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}},{key:"version",get:function(){return(this._get("version")||0)+1}}]),n}(g);Object(c.a)([Object(v.b)({type:[Number,String],json:{write:!0}})],x.prototype,"left",void 0),Object(c.a)([Object(v.b)({type:[Number,String],json:{write:!0}})],x.prototype,"right",void 0),Object(c.a)([Object(v.b)({type:[Number,String],json:{write:!0}})],x.prototype,"top",void 0),Object(c.a)([Object(v.b)({type:[Number,String],json:{write:!0}})],x.prototype,"bottom",void 0),Object(c.a)([Object(v.b)({readOnly:!0})],x.prototype,"version",null);var O,S=x=_=Object(c.a)([Object(d.a)("esri.views.layers.support.ClipRect")],x),w=(n("ZTBZ"),n("DjXQ")),C=n("aic5"),M=n("nd5+"),P=n("cFtQ");function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var T={base:w.a,key:"type",typeMap:{extent:M.a,polygon:P.a}},j=O=function(t){Object(o.a)(n,t);var e=k(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).type="geometry",t.geometry=null,t}return Object(i.a)(n,[{key:"version",get:function(){return(this._get("version")||0)+1}},{key:"clone",value:function(){return new O({geometry:this.geometry.clone()})}}]),n}(g);Object(c.a)([Object(v.b)({types:T,json:{read:C.a,write:!0}})],j.prototype,"geometry",void 0),Object(c.a)([Object(v.b)({readOnly:!0})],j.prototype,"version",null);var A=j=O=Object(c.a)([Object(d.a)("esri.views.layers.support.Geometry")],j);function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var D=function(t){Object(o.a)(n,t);var e=I(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).type="path",t.path=[],t}return Object(i.a)(n,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),n}(g);Object(c.a)([Object(v.b)({type:[[[Number]]],json:{write:!0}})],D.prototype,"path",void 0),Object(c.a)([Object(v.b)({readOnly:!0})],D.prototype,"version",null);var E=D=Object(c.a)([Object(d.a)("esri.views.layers.support.Path")],D);function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var L=l.a.ofType({key:"type",base:g,typeMap:{rect:S,path:E,geometry:A}}),V=function(t){var e=function(t){Object(o.a)(n,t);var e=R(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).clips=new L,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}return Object(i.a)(n,[{key:"initialize",value:function(){var t,e=this;this.container||(this.container=new m.a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(h.a)(this,"suspended",(function(t){e.container&&(e.container.visible=!t),e.view&&!t&&e.updateRequested&&e.view.requestUpdate()}),!0),Object(h.a)(this,["layer.opacity","container"],(function(){var t,n;e.container&&(e.container.opacity=null!=(t=null==(n=e.layer)?void 0:n.opacity)?t:1)}),!0),Object(h.a)(this,["layer.blendMode"],(function(t){e.container&&(e.container.blendMode=t)}),!0),Object(h.a)(this,["layer.effect"],(function(t){e.container&&(e.container.effect=t)}),!0),this.clips.on("change",(function(){e.container.clips=e.clips,e.notifyChange("clips")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((function(t){t!==e||e.attached||e.destroyed||(e.attach(),e.requestUpdate(),e.attached=!0)}),(function(){})):this.when().then((function(){e.attached||e.destroyed||(e.attach(),e.requestUpdate(),e.attached=!0)}),(function(){}))}},{key:"destroy",value:function(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}},{key:"updating",get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}},{key:"isVisibleAtScale",value:function(t){var e=!0,n=this.layer,r=n.minScale,i=n.maxScale;if(null!=r&&null!=i){var a=!r,o=!i;!a&&t<=r&&(a=!0),!o&&t>=i&&(o=!0),e=a&&o}return e}},{key:"requestUpdate",value:function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}},{key:"processUpdate",value:function(t){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}},{key:"isUpdating",value:function(){return!1}},{key:"isRendering",value:function(){return!1}},{key:"canResume",value:function(){return!!Object(a.a)(Object(u.a)(n.prototype),"canResume",this).call(this)&&this.isVisibleAtScale(this.view.scale)}}]),n}(t);return Object(c.a)([Object(v.b)({type:L,set:function(t){var e=Object(f.b)(t,this._get("clips"),L);this._set("clips",e)}})],e.prototype,"clips",void 0),Object(c.a)([Object(v.b)()],e.prototype,"moving",void 0),Object(c.a)([Object(v.b)()],e.prototype,"attached",void 0),Object(c.a)([Object(v.b)()],e.prototype,"container",void 0),Object(c.a)([Object(v.b)()],e.prototype,"suspended",void 0),Object(c.a)([Object(v.b)({readOnly:!0})],e.prototype,"updateParameters",void 0),Object(c.a)([Object(v.b)()],e.prototype,"updateRequested",void 0),Object(c.a)([Object(v.b)()],e.prototype,"updating",null),Object(c.a)([Object(v.b)()],e.prototype,"view",void 0),e=Object(c.a)([Object(d.a)("esri.views.2d.layers.LayerView2D")],e)}},"8a6k":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("hisu"),i=n("yBJb"),a=(n("0fJP"),function(){function t(e){Object(r.a)(this,t),this._geometry=e}return Object(i.a)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t}}]),t}())},F6Re:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r,i,a={exports:{}};r=a,void 0!==(i=function(){function t(t,n,i){i=i||2;var a,o,s,c,l,f,h,v=n&&n.length,d=v?n[0]*i:t.length,m=e(t,0,d,i,!0),p=[];if(!m||m.next===m.prev)return p;if(v&&(m=u(t,n,m,i)),t.length>80*i){a=s=t[0],o=c=t[1];for(var _=i;_<d;_+=i)(l=t[_])<a&&(a=l),(f=t[_+1])<o&&(o=f),l>s&&(s=l),f>c&&(c=f);h=0!==(h=Math.max(s-a,c-o))?1/h:0}return r(m,p,i,a,o,h),p}function e(t,e,n,r,i){var a,o;if(i===P(t,e,n,r)>0)for(a=e;a<n;a+=r)o=w(a,t[a],t[a+1],o);else for(a=n-r;a>=e;a-=r)o=w(a,t[a],t[a+1],o);return o&&y(o,o.next)&&(C(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==_(r.prev,r,r.next))r=r.next;else{if(C(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,u,c,l,f,v){if(t){!v&&f&&h(t,c,l,f);for(var d,m,p=t;t.prev!==t.next;)if(d=t.prev,m=t.next,f?a(t,c,l,f):i(t))e.push(d.i/u),e.push(t.i/u),e.push(m.i/u),C(t),t=m.next,p=m.next;else if((t=m)===p){v?1===v?r(t=o(n(t),e,u),e,u,c,l,f,2):2===v&&s(t,e,u,c,l,f):r(n(t),e,u,c,l,f,1);break}}}function i(t){var e=t.prev,n=t,r=t.next;if(_(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(m(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&_(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function a(t,e,n,r){var i=t.prev,a=t,o=t.next;if(_(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,l=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=v(s,u,e,n,r),h=v(c,l,e,n,r),d=t.prevZ,p=t.nextZ;d&&d.z>=f&&p&&p.z<=h;){if(d!==t.prev&&d!==t.next&&m(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&m(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&m(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function o(t,e,r){var i=t;do{var a=i.prev,o=i.next.next;!y(a,o)&&g(a,i,i.next,o)&&O(a,o)&&O(o,a)&&(e.push(a.i/r),e.push(i.i/r),e.push(o.i/r),C(i),C(i.next),i=t=o),i=i.next}while(i!==t);return n(i)}function s(t,e,i,a,o,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&p(u,c)){var l=S(u,c);return u=n(u,u.next),l=n(l,l.next),r(u,e,i,a,o,s),void r(l,e,i,a,o,s)}c=c.next}u=u.next}while(u!==t)}function u(t,r,i,a){var o,s,u,f=[];for(o=0,s=r.length;o<s;o++)(u=e(t,r[o]*a,o<s-1?r[o+1]*a:t.length,a,!1))===u.next&&(u.steiner=!0),f.push(d(u));for(f.sort(c),o=0;o<f.length;o++)i=n(i=l(f[o],i),i.next);return i}function c(t,e){return t.x-e.x}function l(t,e){var r=function(t,e){var n,r=e,i=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===o)return n;var u,c=n,l=n.x,h=n.y,v=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&m(a<h?i:o,a,l,h,a<h?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),O(r,t)&&(u<v||u===v&&(r.x>n.x||r.x===n.x&&f(n,r)))&&(n=r,v=u)),r=r.next}while(r!==c);return n}(t,e);if(!r)return e;var i=S(r,t),a=n(r,r.next);return n(i,i.next),e===r?a:e}function f(t,e){return _(t.prev,t,e.prev)<0&&_(e.next,t,t.next)<0}function h(t,e,n,r){var i=t;do{if(null===i.z&&(i.z=v(i.x,i.y,e,n,r)),i.prev.next!==i||i.next.prev!==i)return i.prev.next=i,i.next.prev=i,h(t,e,n,r);i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,a,o,s,u,c=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}function v(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function m(t,e,n,r,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(r-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&g(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(O(t,e)&&O(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(_(t.prev,t,e.prev)||_(t,e.prev,e))||y(t,e)&&_(t.prev,t,t.next)>0&&_(e.prev,e,e.next)>0)}function _(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function g(t,e,n,r){var i=x(_(t,e,n)),a=x(_(t,e,r)),o=x(_(n,r,t)),s=x(_(n,r,e));return i!==a&&o!==s||!(0!==i||!b(t,n,e))||!(0!==a||!b(t,r,e))||!(0!==o||!b(n,t,r))||!(0!==s||!b(n,e,r))}function b(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function x(t){return t>0?1:t<0?-1:0}function O(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function S(t,e){var n=new M(t.i,t.x,t.y),r=new M(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function w(t,e,n,r){var i=new M(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function M(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,n,r){for(var i=0,a=e,o=n-r;a<n;a+=r)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}return t.deviation=function(t,e,n,r){var i=e&&e.length,a=i?e[0]*n:t.length,o=Math.abs(P(t,0,a,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;o-=Math.abs(P(t,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,v=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[h]-t[d])*(t[v+1]-t[h+1])-(t[h]-t[v])*(t[d+1]-t[h+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},t.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)n.vertices.push(t[i][a][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},t}())&&(r.exports=i);var o=a.exports},FNqF:function(t,e,n){"use strict";var r,i,a,o,s,u,c;n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return u})),function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"}(r||(r={})),function(t){t[t.SUCCEEDED=0]="SUCCEEDED",t[t.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(i||(i={})),function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(a||(a={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(o||(o={})),function(t){t[t.NONE=0]="NONE",t[t.OPACITY=1]="OPACITY",t[t.COLOR=2]="COLOR",t[t.ROTATION=4]="ROTATION",t[t.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",t[t.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",t[t.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",t[t.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(s||(s={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(u||(u={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(c||(c={}))},Hhu8:function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return t?e?4:3:e?3:2}function o(t,e,n,i,o){if(!e||!e.lengths.length)return null;var c="upperLeft"===(null==o?void 0:o.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);var l,f=t.coords,h=[],v=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],d=e.lengths,m=e.coords,p=a(n,i),_=0,y=r(d);try{for(y.s();!(l=y.n()).done;){var g=l.value,b=s(v,m,_,g,n,i,c);b&&h.push(b),_+=g*p}}catch(S){y.e(S)}finally{y.f()}if(h.sort((function(t,e){var r=c*t[2]-c*e[2];return 0===r&&n&&(r=t[4]-e[4]),r})),h.length){var x=6*h[0][2];f[0]=h[0][0]/x,f[1]=h[0][1]/x,n&&(x=6*h[0][4],f[2]=0!==x?h[0][3]/x:0),(f[0]<v[0]||f[0]>v[1]||f[1]<v[2]||f[1]>v[3]||n&&(f[2]<v[4]||f[2]>v[5]))&&(f.length=0)}if(!f.length){var O=e.lengths[0]?u(m,0,d[0],n,i):null;if(!O)return null;f[0]=O[0],f[1]=O[1],n&&O.length>2&&(f[2]=O[2])}return t}function s(t,e,n,r,i,o){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=a(i,o),c=n,l=n+u,f=0,h=0,v=0,d=0,m=0,p=0,_=r-1;p<_;p++,c+=u,l+=u){var y=e[c],g=e[c+1],b=e[c+2],x=e[l],O=e[l+1],S=e[l+2],w=y*O-x*g;d+=w,f+=(y+x)*w,h+=(g+O)*w,i&&(v+=(b+S)*(w=y*S-x*b),m+=w),y<t[0]&&(t[0]=y),y>t[1]&&(t[1]=y),g<t[2]&&(t[2]=g),g>t[3]&&(t[3]=g),i&&(b<t[4]&&(t[4]=b),b>t[5]&&(t[5]=b))}if(d*s>0&&(d*=-1),m*s>0&&(m*=-1),!d)return null;var C=[f,h,.5*d];return i&&(C[3]=v,C[4]=.5*m),C}function u(t,e,n,r,i){for(var o=a(r,i),s=e,u=e+o,v=0,d=0,m=0,p=0,_=0,y=n-1;_<y;_++,s+=o,u+=o){var g=t[s],b=t[s+1],x=t[s+2],O=t[u],S=t[u+1],w=t[u+2],C=r?l(g,b,x,O,S,w):c(g,b,O,S);if(C)if(v+=C,r){var M=h(g,b,x,O,S,w);d+=C*M[0],m+=C*M[1],p+=C*M[2]}else{var P=f(g,b,O,S);d+=C*P[0],m+=C*P[1]}}return v>0?r?[d/v,m/v,p/v]:[d/v,m/v]:n>0?r?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function c(t,e,n,r){var i=n-t,a=r-e;return Math.sqrt(i*i+a*a)}function l(t,e,n,r,i,a){var o=r-t,s=i-e,u=a-n;return Math.sqrt(o*o+s*s+u*u)}function f(t,e,n,r){return[t+.5*(n-t),e+.5*(r-e)]}function h(t,e,n,r,i,a){return[t+.5*(r-t),e+.5*(i-e),n+.5*(a-n)]}n.d(e,"a",(function(){return o}))},IHDS:function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return M})),n.d(e,"d",(function(){return C})),n.d(e,"e",(function(){return g})),n.d(e,"f",(function(){return P})),n.d(e,"g",(function(){return _})),n.d(e,"h",(function(){return y}));var r=n("mK0O"),i=n("4Mpa"),a=n("CHlC"),o=n("kMo5"),s=n("P+uj"),u=n("hisu"),c=n("yBJb"),l=n("Mp7X"),f=n("FNqF"),h=n("2DvD");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}function p(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=f.e.SIZE_FIELD_STOPS|f.e.SIZE_MINMAX_VALUE|f.e.SIZE_SCALE_STOPS|f.e.SIZE_UNIT_VALUE,r=(t&(f.f.FIELD_TARGETS_OUTLINE|f.f.MINMAX_TARGETS_OUTLINE|f.f.SCALE_TARGETS_OUTLINE|f.f.UNIT_TARGETS_OUTLINE))>>>4;return e?n&r:n&~r}function _(t,e,n,r,i){switch(t){case f.d.FILL:return w.from(e,r);case f.d.LINE:return M.from(e,n);case f.d.MARKER:return C.from(e);case f.d.TEXT:return P.from(e);case f.d.LABEL:return k.from(e,i);default:throw new Error("Unable to createMaterialKey for unknown geometryType ".concat(t))}}function y(t){switch(g.load(t).geometryType){case f.d.MARKER:return new C(t);case f.d.FILL:return new w(t);case f.d.LINE:return new M(t);case f.d.TEXT:return new P(t);case f.d.LABEL:return new k(t)}}var g=function(){function t(e){Object(u.a)(this,t),this._data=0,this._data=e}return Object(c.a)(t,[{key:"data",get:function(){return this._data},set:function(t){this._data=t}},{key:"geometryType",get:function(){return this.bits(8,11)},set:function(t){this.setBits(t,8,11)}},{key:"mapAligned",get:function(){return!!this.bit(20)},set:function(t){this.setBit(20,t)}},{key:"sdf",get:function(){return!!this.bit(11)},set:function(t){this.setBit(11,t)}},{key:"pattern",get:function(){return!!this.bit(12)},set:function(t){this.setBit(12,t)}},{key:"textureBinding",get:function(){return this.bits(0,8)},set:function(t){this.setBits(t,0,8)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case f.d.FILL:return"fill";case f.d.MARKER:return"marker";case f.d.LINE:return"line";case f.d.TEXT:return"text";case f.d.LABEL:return"label";default:throw new l.a("Unable to handle unknown geometryType: ".concat(this.geometryType))}}},{key:"setBit",value:function(t,e){var n=1<<t;e?this._data|=n:this._data&=~n}},{key:"bit",value:function(t){return(this._data&1<<t)>>t}},{key:"setBits",value:function(t,e,n){for(var r=e,i=0;r<n;r++,i++)this.setBit(r,0!=(t&1<<i))}},{key:"bits",value:function(t,e){for(var n=0,r=t,i=0;r<e;r++,i++)n|=this.bit(r)<<i;return n}},{key:"hasVV",value:function(){return!1}},{key:"setVV",value:function(t,e){}},{key:"getVariation",value:function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}},{key:"getVariationHash",value:function(){return this._data&~(7&this.textureBinding)}}],[{key:"load",value:function(t){var e=this.shared;return e.data=t,e}}]),t}();g.shared=new g(0);var b=function(t){return function(t){Object(a.a)(n,t);var e=m(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(16)},set:function(t){this.setBit(16,t)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(17)},set:function(t){this.setBit(17,t)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(18)},set:function(t){this.setBit(18,t)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(19)},set:function(t){this.setBit(19,t)}},{key:"hasVV",value:function(){return Object(i.a)(Object(s.a)(n.prototype),"hasVV",this).call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}},{key:"setVV",value:function(t,e){Object(i.a)(Object(s.a)(n.prototype),"setVV",this).call(this,t,e);var r=p(t,e)&t;this.vvSizeMinMaxValue=!!(r&f.e.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&f.e.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&f.e.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&f.e.SIZE_SCALE_STOPS)}}]),n}(t)},x=function(t){return function(t){Object(a.a)(n,t);var e=m(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"vvRotation",get:function(){return 0!==this.bit(15)},set:function(t){this.setBit(15,t)}},{key:"hasVV",value:function(){return Object(i.a)(Object(s.a)(n.prototype),"hasVV",this).call(this)||this.vvRotation}},{key:"setVV",value:function(t,e){Object(i.a)(Object(s.a)(n.prototype),"setVV",this).call(this,t,e),this.vvRotation=!e&&!!(t&f.e.ROTATION)}}]),n}(t)},O=function(t){return function(t){Object(a.a)(n,t);var e=m(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"vvColor",get:function(){return 0!==this.bit(13)},set:function(t){this.setBit(13,t)}},{key:"hasVV",value:function(){return Object(i.a)(Object(s.a)(n.prototype),"hasVV",this).call(this)||this.vvColor}},{key:"setVV",value:function(t,e){Object(i.a)(Object(s.a)(n.prototype),"setVV",this).call(this,t,e),this.vvColor=!e&&!!(t&f.e.COLOR)}}]),n}(t)},S=function(t){return function(t){Object(a.a)(n,t);var e=m(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"vvOpacity",get:function(){return 0!==this.bit(14)},set:function(t){this.setBit(14,t)}},{key:"hasVV",value:function(){return Object(i.a)(Object(s.a)(n.prototype),"hasVV",this).call(this)||this.vvOpacity}},{key:"setVV",value:function(t,e){Object(i.a)(Object(s.a)(n.prototype),"setVV",this).call(this,t,e),this.vvOpacity=!e&&!!(t&f.e.OPACITY)}}]),n}(t)},w=function(t){Object(a.a)(n,t);var e=m(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"getVariation",value:function(){return d(d({},Object(i.a)(Object(s.a)(n.prototype),"getVariation",this).call(this)),{},{dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity})}},{key:"dotDensity",get:function(){return!!this.bit(15)},set:function(t){this.setBit(15,t)}}],[{key:"load",value:function(t){var e=this.shared;return e.data=t,e}},{key:"from",value:function(t,e){var n=this.load(0);return n.geometryType=f.d.FILL,e?n.dotDensity=!0:n.setVV(t,!1),n.data}}]),n}(O(S(g)));w.shared=new w(0);var C=function(t){Object(a.a)(n,t);var e=m(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"getVariation",value:function(){return d(d({},Object(i.a)(Object(s.a)(n.prototype),"getVariation",this).call(this)),{},{vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}],[{key:"load",value:function(t){var e=this.shared;return e.data=t,e}},{key:"from",value:function(t){var e=this.load(0);return e.geometryType=f.d.MARKER,e.setVV(t,!1),e.data}}]),n}(O(S(x(b(g)))));C.shared=new C(0);var M=function(t){Object(a.a)(n,t);var e=m(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"getVariation",value:function(){return d(d({},Object(i.a)(Object(s.a)(n.prototype),"getVariation",this).call(this)),{},{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}],[{key:"load",value:function(t){var e=this.shared;return e.data=t,e}},{key:"from",value:function(t,e){var n=this.load(0);return n.geometryType=f.d.LINE,n.setVV(t,e),n.data}}]),n}(O(S(b(g))));M.shared=new M(0);var P=function(t){Object(a.a)(n,t);var e=m(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"getVariation",value:function(){return d(d({},Object(i.a)(Object(s.a)(n.prototype),"getVariation",this).call(this)),{},{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}],[{key:"load",value:function(t){var e=this.shared;return e.data=t,e}},{key:"from",value:function(t){var e=this.load(t);return e.geometryType=f.d.TEXT,e.setVV(t,!1),e.data}}]),n}(O(S(x(b(g)))));P.shared=new P(0);var k=function(t){Object(a.a)(n,t);var e=m(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"getVariation",value:function(){return d(d({},Object(i.a)(Object(s.a)(n.prototype),"getVariation",this).call(this)),{},{vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}],[{key:"load",value:function(t){var e=this.shared;return e.data=t,e}},{key:"from",value:function(t,e){var n=this.load(0);return n.geometryType=f.d.LABEL,n.setVV(t,!1),n.mapAligned=Object(h.a)(e),n.data}}]),n}(b(g));k.shared=new k(0)},"JrL/":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("a1c8"),n("iwTS"),n("J4Pc"),n("B2Uc"),n("cY28"),n("IxxH");var r=n("k0fz"),i=(n("0fR5"),n("H8zE"),{background:{"background.frag":"uniform lowp vec4 u_color;\nvoid main() {\ngl_FragColor = u_color;\n}","background.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump vec2 u_coord_range;\nuniform mediump float u_depth;\nvoid main() {\nvec3 v_pos = u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0);\ngl_Position = vec4(v_pos.xy, 0.0, 1.0);\n}"},bitBlit:{"bitBlit.frag":"uniform lowp sampler2D u_tex;\nuniform lowp float u_opacity;\nvarying mediump vec2 v_uv;\nvoid main() {\nlowp vec4 color = texture2D(u_tex, v_uv);\ngl_FragColor = color *  u_opacity;\n}","bitBlit.vert":"attribute vec2 a_pos;\nattribute vec2 a_tex;\nvarying mediump vec2 v_uv;\nvoid main(void) {\ngl_Position = vec4(a_pos, 0.0, 1.0);\nv_uv = a_tex;\n}"},blend:{"blend.frag":"precision mediump float;\nuniform sampler2D u_layerTexture;\nuniform lowp float u_opacity;\nuniform lowp float u_inFadeOpacity;\n#ifndef NORMAL\nuniform sampler2D u_backbufferTexture;\n#endif\nvarying mediump vec2 v_uv;\nfloat rgb2v(in vec3 c) {\nreturn max(c.x, max(c.y, c.z));\n}\nvec3 rgb2hsv(in vec3 c) {\nvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d = q.x - min(q.w, q.y);\nfloat e = 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(in vec3 c) {\nvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec3 tint(in vec3 Cb, in vec3 Cs) {\nfloat vIn = rgb2v(Cb);\nvec3 hsvTint = rgb2hsv(Cs);\nvec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\nreturn hsv2rgb(hsvOut);\n}\nfloat overlay(in float Cb, in float Cs) {\nreturn (1.0 - step(0.5, Cs)) * (1.0 - 2.0 * (1.0 - Cs ) * (1.0 - Cb)) + step(0.5, Cs) * (2.0 * Cs * Cb);\n}\nfloat colorDodge(in float Cb, in float Cs) {\nreturn (Cb == 0.0) ? 0.0 : (Cs == 1.0) ? 1.0 : min(1.0, Cb / (1.0 - Cs));\n}\nfloat colorBurn(in float Cb, in float Cs) {\nreturn (Cb == 1.0) ? 1.0 : (Cs == 0.0) ? 0.0 : 1.0 - min(1.0, (1.0 - Cb) / Cs);\n}\nfloat hardLight(in float Cb, in float Cs) {\nreturn (1.0 - step(0.5, Cs)) * (2.0 * Cs * Cb) + step(0.5, Cs) * (1.0 - 2.0 * (1.0 - Cs) * (1.0 - Cb));\n}\nfloat reflectBlend(in float Cb, in float Cs) {\nreturn (Cs == 1.0) ? Cs : min(Cb * Cb / (1.0 - Cs), 1.0);\n}\nfloat softLight(in float Cb, in float Cs) {\nif (Cs <= 0.5) {\nreturn Cb - (1.0 - 2.0 * Cs) * Cb * (1.0 - Cb);\n}\nif (Cb <= 0.25) {\nreturn Cb + (2.0 * Cs - 1.0) * Cb * ((16.0 * Cb - 12.0) * Cb + 3.0);\n}\nreturn Cb + (2.0 * Cs - 1.0) * (sqrt(Cb) - Cb);\n}\nfloat vividLight(in float Cb, in float Cs) {\nreturn (1.0 - step(0.5, Cs)) * colorBurn(Cb, 2.0 * Cs) + step(0.5, Cs) * colorDodge(Cb, (2.0 * (Cs - 0.5)));\n}\nfloat minv3(in vec3 c) {\nreturn min(min(c.r, c.g), c.b);\n}\nfloat maxv3(in vec3 c) {\nreturn max(max(c.r, c.g), c.b);\n}\nfloat lumv3(in vec3 c) {\nreturn dot(c, vec3(0.3, 0.59, 0.11));\n}\nfloat satv3(vec3 c) {\nreturn maxv3(c) - minv3(c);\n}\nvec3 clipColor(vec3 color) {\nfloat lum = lumv3(color);\nfloat mincol = minv3(color);\nfloat maxcol = maxv3(color);\nif (mincol < 0.0) {\ncolor = lum + ((color - lum) * lum) / (lum - mincol);\n}\nif (maxcol > 1.0) {\ncolor = lum + ((color - lum) * (1.0 - lum)) / (maxcol - lum);\n}\nreturn color;\n}\nvec3 setLum(vec3 cbase, vec3 clum) {\nfloat lbase = lumv3(cbase);\nfloat llum = lumv3(clum);\nfloat ldiff = llum - lbase;\nvec3 color = cbase + vec3(ldiff);\nreturn clipColor(color);\n}\nvec3 setLumSat(vec3 cbase, vec3 csat, vec3 clum)\n{\nfloat minbase = minv3(cbase);\nfloat sbase = satv3(cbase);\nfloat ssat = satv3(csat);\nvec3 color;\nif (sbase > 0.0) {\ncolor = (cbase - minbase) * ssat / sbase;\n} else {\ncolor = vec3(0.0);\n}\nreturn setLum(color, clum);\n}\nvoid main() {\nvec4 src = texture2D(u_layerTexture, v_uv);\n#ifdef NORMAL\ngl_FragColor = src *  u_opacity;\n#else\nvec4 dst = texture2D(u_backbufferTexture, v_uv);\nvec3 Cs = src.a == 0.0 ? src.rgb : vec3(src.rgb / src.a);\nvec3 Cb = dst.a == 0.0 ? dst.rgb : vec3(dst.rgb / dst.a);\nfloat as = u_opacity * src.a;\nfloat ab = dst.a;\n#ifdef DESTINATION_OVER\ngl_FragColor = vec4(as * Cs * (1.0 - ab) + ab * Cb, as + ab - as * ab);\n#endif\n#ifdef SOURCE_IN\nvec4 color = vec4(as * Cs * ab, as * ab);\nvec4 fadeColor = (1.0 - u_opacity) * u_inFadeOpacity * vec4(ab * Cb, ab);\ngl_FragColor = color + fadeColor;\n#endif\n#ifdef DESTINATION_IN\nvec4 color = vec4(ab * Cb * as, ab * as);\nvec4 fadeColor = (1.0 - u_opacity) * u_inFadeOpacity * vec4(ab * Cb, ab);\ngl_FragColor = color + fadeColor;\n#endif\n#ifdef SOURCE_OUT\ngl_FragColor = vec4(as * Cs * (1.0 - ab), as * (1.0 - ab));\n#endif\n#ifdef DESTINATION_OUT\ngl_FragColor = vec4(ab * Cb * (1.0 - as), ab * (1.0 - as));\n#endif\n#ifdef SOURCE_ATOP\ngl_FragColor = vec4(as * Cs * ab + ab * Cb * (1.0 - as), ab);\n#endif\n#ifdef DESTINATION_ATOP\ngl_FragColor = vec4(as * Cs * (1.0 - ab) + ab * Cb * as, as);\n#endif\n#ifdef XOR\ngl_FragColor = vec4(as * Cs * (1.0 - ab) + ab * Cb * (1.0 - as),\nas * (1.0 - ab) + ab * (1.0 - as));\n#endif\n#ifdef MULTIPLY\ngl_FragColor = vec4(as * Cs * ab * Cb + (1.0 - ab) * as * Cs + (1.0 - as) * ab * Cb,\nas + ab * (1.0 - as));\n#endif\n#ifdef SCREEN\ngl_FragColor = vec4((Cs + Cb - Cs * Cb) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef OVERLAY\nvec3 f = vec3(overlay(Cb.r, Cs.r), overlay(Cb.g, Cs.g), overlay(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef DARKEN\ngl_FragColor = vec4(min(Cs, Cb) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef LIGHTER\ngl_FragColor = vec4(as * Cs + ab * Cb, as + ab);\n#endif\n#ifdef LIGHTEN\ngl_FragColor = vec4(max(Cs, Cb) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef COLOR_DODGE\nvec3 f = vec3(colorDodge(Cb.r, Cs.r), colorDodge(Cb.g, Cs.g), colorDodge(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef COLOR_BURN\nvec3 f = vec3(colorBurn(Cb.r, Cs.r), colorBurn(Cb.g, Cs.g), colorBurn(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef HARD_LIGHT\nvec3 f = vec3(hardLight(Cb.r, Cs.r), hardLight(Cb.g, Cs.g), hardLight(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef SOFT_LIGHT\nvec3 f = vec3(softLight(Cb.r, Cs.r), softLight(Cb.g, Cs.g), softLight(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef DIFFERENCE\ngl_FragColor = vec4(abs(Cb - Cs) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef EXCLUSION\nvec3 f = Cs + Cb - 2.0 * Cs * Cb;\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef INVERT\ngl_FragColor = vec4((1.0 - Cb) * as * ab + Cb * ab * (1.0 - as), ab);\n#endif\n#ifdef VIVID_LIGHT\nvec3 f = vec3(vividLight(Cb.r, Cs.r),\nvividLight(Cb.g, Cs.g),\nvividLight(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef HUE\nvec3 f = setLumSat(Cs,Cb,Cb);\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef SATURATION\nvec3 f = setLumSat(Cb,Cs,Cb);\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef COLOR\nvec3 f = setLum(Cs,Cb);\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef LUMINOSITY\nvec3 f = setLum(Cb,Cs);\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef PLUS\ngl_FragColor = clamp(vec4(src.r + Cb.r, src.g + Cb.g, src.b + Cb.b, as + ab), 0.0, 1.0);\n#endif\n#ifdef MINUS\ngl_FragColor = vec4(clamp(vec3(Cb.r - src.r, Cb.g - src.g, Cb.b - src.b), 0.0, 1.0), ab * as);\n#endif\n#ifdef AVERAGE\nvec3 f = (Cb + Cs) / 2.0;\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef REFLECT\nvec3 f = vec3(reflectBlend(Cb.r, Cs.r),\nreflectBlend(Cb.g, Cs.g),\nreflectBlend(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#endif\n}","blend.vert":"attribute vec2 a_position;\nvarying mediump vec2 v_uv;\nvoid main(void) {\ngl_Position = vec4(a_position , 0.0, 1.0);\nv_uv = (a_position + 1.0) / 2.0;\n}"},filtering:{"bicubic.glsl":"vec4 computeWeights(float v) {\nfloat b = 1.0 / 6.0;\nfloat v2 = v * v;\nfloat v3 = v2 * v;\nfloat w0 = b * (-v3 + 3.0 * v2 - 3.0 * v + 1.0);\nfloat w1 = b * (3.0 * v3  - 6.0 * v2 + 4.0);\nfloat w2 = b * (-3.0 * v3 + 3.0 * v2 + 3.0 * v + 1.0);\nfloat w3 = b * v3;\nreturn vec4(w0, w1, w2, w3);\n}\nvec4 bicubicOffsetsAndWeights(float v) {\nvec4 w = computeWeights(v);\nfloat g0 = w.x + w.y;\nfloat g1 = w.z + w.w;\nfloat h0 = 1.0 - (w.y / g0) + v;\nfloat h1 = 1.0 + (w.w / g1) - v;\nreturn vec4(h0, h1, g0, g1);\n}\nvec4 sampleBicubicBSpline(sampler2D sampler, vec2 coords, vec2 texSize) {\nvec2 eX = vec2(1.0 / texSize.x, 0.0);\nvec2 eY = vec2(0.0, 1.0 / texSize.y);\nvec2 texel = coords * texSize - 0.5;\nvec3 hgX = bicubicOffsetsAndWeights(fract(texel).x).xyz;\nvec3 hgY = bicubicOffsetsAndWeights(fract(texel).y).xyz;\nvec2 coords10 = coords + hgX.x * eX;\nvec2 coords00 = coords - hgX.y * eX;\nvec2 coords11 = coords10 + hgY.x * eY;\nvec2 coords01 = coords00 + hgY.x * eY;\ncoords10 = coords10 - hgY.y * eY;\ncoords00 = coords00 - hgY.y * eY;\nvec4 color00 = texture2D(sampler, coords00);\nvec4 color10 = texture2D(sampler, coords10);\nvec4 color01 = texture2D(sampler, coords01);\nvec4 color11 = texture2D(sampler, coords11);\ncolor00 = mix(color00, color01, hgY.z);\ncolor10 = mix(color10, color11, hgY.z);\ncolor00 = mix(color00, color10, hgX.z);\nreturn color00;\n}","bilinear.glsl":"vec4 sampleBilinear(sampler2D sampler, vec2 coords, vec2 texSize) {\nvec2 texelStart = floor(coords * texSize);\nvec2 coord0 = texelStart / texSize;\nvec2 coord1 = (texelStart +  vec2(1.0, 0.0)) / texSize;\nvec2 coord2 = (texelStart +  vec2(0.0, 1.0)) / texSize;\nvec2 coord3 = (texelStart +  vec2(1.0, 1.0)) / texSize;\nvec4 color0 = texture2D(sampler, coord0);\nvec4 color1 = texture2D(sampler, coord1);\nvec4 color2 = texture2D(sampler, coord2);\nvec4 color3 = texture2D(sampler, coord3);\nvec2 blend = fract(coords * texSize);\nvec4 color01 = mix(color0, color1, blend.x);\nvec4 color23 = mix(color2, color3, blend.x);\nreturn mix(color01, color23, blend.y);\n}","epx.glsl":"vec4 sampleEPX(sampler2D sampler, float size, vec2 coords, vec2 texSize) {\nvec2 invSize = 1.0 / texSize;\nvec2 texel = coords * texSize;\nvec2 texel_i = floor(texel);\nvec2 texel_frac = fract(texel);\nvec4 colorP = texture2D(sampler, texel_i * invSize);\nvec4 colorP1 = vec4(colorP);\nvec4 colorP2 = vec4(colorP);\nvec4 colorP3 = vec4(colorP);\nvec4 colorP4 = vec4(colorP);\nvec4 colorA = texture2D(sampler, (texel_i - vec2(0.0, 1.0)) * invSize);\nvec4 colorB = texture2D(sampler, (texel_i + vec2(1.0, 0.0)) * invSize);\nvec4 colorC = texture2D(sampler, (texel_i - vec2(1.0, 0.0)) * invSize);\nvec4 colorD = texture2D(sampler, (texel_i + vec2(0.0, 1.0)) * invSize);\nif (colorC == colorA && colorC != colorD && colorA != colorB) {\ncolorP1 = colorA;\n}\nif (colorA == colorB && colorA != colorC && colorB != colorD) {\ncolorP2 = colorB;\n}\nif (colorD == colorC && colorD != colorB && colorC != colorA) {\ncolorP3 = colorC;\n}\nif (colorB == colorD && colorB != colorA && colorD != colorC) {\ncolorP4 = colorD;\n}\nvec4 colorP12 = mix(colorP1, colorP2, texel_frac.x);\nvec4 colorP34 = mix(colorP1, colorP2, texel_frac.x);\nreturn mix(colorP12, colorP34, texel_frac.y);\n}"},fx:{integrate:{"integrate.frag":"precision mediump float;\nuniform lowp sampler2D u_sourceTexture;\nuniform lowp sampler2D u_maskTexture;\nuniform mediump float u_zoomLevel;\nuniform highp float u_timeDelta;\nuniform highp float u_animationTime;\nvarying highp vec2 v_texcoord;\n#include <materials/utils.glsl>\nvoid main()\n{\n#ifdef DELTA\nvec4 texel = texture2D(u_sourceTexture, v_texcoord);\nvec4 data0 = texture2D(u_maskTexture, v_texcoord);\nfloat flags = data0.r * 255.0;\nfloat groupMinZoom = data0.g * 255.0;\nfloat isVisible = getFilterBit(flags, 0);\nfloat wouldClip = step(groupMinZoom, u_zoomLevel);\nfloat direction = wouldClip * 1.0 + (1.0 - wouldClip) * -1.0;\nfloat dt = u_timeDelta / max(u_animationTime, 0.0001);\nvec4 nextState = vec4(texel + direction * dt);\ngl_FragColor =  vec4(nextState);\n#elif defined(UPDATE)\nvec4 texel = texture2D(u_sourceTexture, v_texcoord);\ngl_FragColor = texel;\n#endif\n}","integrate.vert":"precision mediump float;\nattribute vec2 a_pos;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_pos;\ngl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n}"}},highlight:{"blur.frag":"varying mediump vec2 v_texcoord;\nuniform mediump vec4 u_direction;\nuniform mediump mat4 u_channelSelector;\nuniform mediump float u_sigma;\nuniform sampler2D u_texture;\nmediump float gauss1(mediump vec2 dir) {\nreturn exp(-dot(dir, dir) / (2.0 * u_sigma * u_sigma));\n}\nmediump vec4 selectChannel(mediump vec4 sample) {\nreturn u_channelSelector * sample;\n}\nvoid accumGauss1(mediump float i, inout mediump float tot, inout mediump float weight) {\nmediump float w = gauss1(i * u_direction.xy);\ntot += selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw))[3] * w;\nweight += w;\n}\nvoid main(void) {\nmediump float tot = 0.0;\nmediump float weight = 0.0;\naccumGauss1(-5.0, tot, weight);\naccumGauss1(-4.0, tot, weight);\naccumGauss1(-3.0, tot, weight);\naccumGauss1(-2.0, tot, weight);\naccumGauss1(-1.0, tot, weight);\naccumGauss1(0.0, tot, weight);\naccumGauss1(1.0, tot, weight);\naccumGauss1(2.0, tot, weight);\naccumGauss1(3.0, tot, weight);\naccumGauss1(4.0, tot, weight);\naccumGauss1(5.0, tot, weight);\ngl_FragColor = vec4(0.0, 0.0, 0.0, tot / weight);\n}","highlight.frag":"varying mediump vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform mediump float u_sigma;\nuniform sampler2D u_shade;\nuniform mediump vec2 u_minMaxDistance;\nmediump float estimateDistance() {\nmediump float y = texture2D(u_texture, v_texcoord)[3];\nconst mediump float y0 = 0.5;\nmediump float m0 = 1.0 / (sqrt(2.0 * 3.1415) * u_sigma);\nmediump float d = (y - y0) / m0;\nreturn d;\n}\nmediump vec4 shade(mediump float d) {\nmediump float mappedDistance = (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\nmappedDistance = clamp(mappedDistance, 0.0, 1.0);\nreturn texture2D(u_shade, vec2(mappedDistance, 0.5));\n}\nvoid main(void) {\nmediump float d = estimateDistance();\ngl_FragColor = shade(d);\n}","textured.vert":"attribute mediump vec2 a_position;\nattribute mediump vec2 a_texcoord;\nvarying mediump vec2 v_texcoord;\nvoid main(void) {\ngl_Position = vec4(a_position, 0.0, 1.0);\nv_texcoord = a_texcoord;\n}"},magnifier:{"magnifier.frag":"uniform lowp vec4 u_background;\nuniform mediump sampler2D u_readbackTexture;\nuniform mediump sampler2D u_maskTexture;\nuniform mediump sampler2D u_overlayTexture;\nuniform bool u_maskEnabled;\nuniform bool u_overlayEnabled;\nvarying mediump vec2 v_texCoord;\nconst lowp float barrelFactor = 1.1;\nlowp vec2 barrel(lowp vec2 uv) {\nlowp vec2 uvn = uv * 2.0 - 1.0;\nif (uvn.x == 0.0 && uvn.y == 0.0) {\nreturn vec2(0.5, 0.5);\n}\nlowp float theta = atan(uvn.y, uvn.x);\nlowp float r = pow(length(uvn), barrelFactor);\nreturn r * vec2(cos(theta), sin(theta)) * 0.5 + 0.5;\n}\nvoid main(void)\n{\nlowp vec4 color = texture2D(u_readbackTexture, barrel(v_texCoord));\ncolor = (color + (1.0 - color.a) * u_background);\nlowp float mask = u_maskEnabled ? texture2D(u_maskTexture, v_texCoord).a : 1.0;\ncolor *= mask;\nlowp vec4 overlayColor = u_overlayEnabled ? texture2D(u_overlayTexture, v_texCoord) : vec4(0);\ngl_FragColor = overlayColor + (1.0 - overlayColor.a) * color;\n}","magnifier.vert":"precision mediump float;\nattribute mediump vec2 a_pos;\nuniform mediump vec4 u_drawPos;\nvarying mediump vec2 v_texCoord;\nvoid main(void)\n{\nv_texCoord = a_pos;\ngl_Position = vec4(u_drawPos.xy + vec2(a_pos - 0.5) * u_drawPos.zw, 0.0, 1.0);\n}"},materials:{"attributeData.glsl":"uniform highp sampler2D u_attributeData0;\nuniform highp sampler2D u_attributeData1;\nuniform highp sampler2D u_attributeData2;\nuniform highp sampler2D u_attributeData3;\nuniform highp int u_attributeTextureSize;\nhighp vec2 getAttributeDataCoords(in highp vec4 id) {\nhighp vec4 texel = unpackDisplayIdTexel(id);\nhighp float size = float(u_attributeTextureSize);\nhighp float u32 = float(int(texel.r) + int(texel.g) * 256 + int(texel.b) * 256 * 256 + int(texel.a) * 256 * 256 * 256);\nhighp float col = mod(u32, size);\nhighp float row = (u32 - col) / size;\nhighp float u = col / size;\nhighp float v = row / size;\nreturn vec2(u, v);\n}\nhighp vec4 getAttributeData0(in highp vec4 id) {\nvec2 coords = getAttributeDataCoords(id);\nreturn texture2D(u_attributeData0, coords);\n}\nhighp vec4 getAttributeData1(in highp vec4 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(u_attributeData1, coords);\n}\nhighp vec4 getAttributeData2(in highp vec4 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(u_attributeData2, coords);\n}\nhighp vec4 getAttributeData3(in highp vec4 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(u_attributeData3, coords);\n}\nfloat u88VVToFloat(in vec2 v) {\nbool isMagic = v.x == 255.0 && v.y == 255.0;\nif (isMagic) {\nreturn NAN_MAGIC_NUMBER;\n}\nreturn (v.x + v.y * float(0x100)) - 32768.0;\n}","constants.glsl":"const float C_DEG_TO_RAD = 3.14159265359 / 180.0;\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\nconst float SIGNED_BYTE_TO_UNSIGNED = 128.0;\nconst float POSITION_PRECISION = 1.0 / 8.0;\nconst float FILL_POSITION_PRECISION = 1.0 / 1.0;\nconst float SOFT_EDGE_RATIO = 1.0;\nconst float THIN_LINE_WIDTH_FACTOR = 1.1;\nconst float THIN_LINE_HALF_WIDTH = 1.0;\nconst float EXTRUDE_SCALE_PLACEMENT_PADDING = 1.0 / 4.0;\nconst float OFFSET_PRECISION = 1.0 / 8.0;\nconst float OUTLINE_SCALE = 1.0 / 5.0;\nconst float SDF_FONT_SIZE = 24.0;\nconst float MAX_SDF_DISTANCE = 8.0;\nconst float PLACEMENT_PADDING = 8.0;\nconst float EPSILON = 0.0000001;\nconst int MAX_FILTER_COUNT = 2;\nconst int ATTR_VV_SIZE = 0;\nconst int ATTR_VV_COLOR = 1;\nconst int ATTR_VV_OPACITY = 2;\nconst int ATTR_VV_ROTATION = 3;\nconst highp float NAN_MAGIC_NUMBER = 1e-30;",fill:{"common.glsl":"#ifdef PATTERN\nuniform mediump vec2 u_mosaicSize;\n#endif\n#ifdef DOT_DENSITY\nuniform lowp vec4 u_isActive[ 2 ];\nuniform highp float u_dotValue;\nuniform highp float u_tileDotsOverArea;\nuniform highp float u_dotTextureDotCount;\nuniform mediump float u_tileZoomFactor;\n#endif\nvarying vec3 v_pos;\nvarying lowp float v_opacity;\nvarying lowp vec4 v_color;\nvarying highp vec4 v_id;\nvarying highp float v_flags;\n#ifdef PATTERN\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#endif\n#ifdef DOT_DENSITY\nvarying highp vec2 v_dotTextureCoords;\nvarying highp vec4 v_dotThresholds[ 2 ];\n#endif","fill.frag":"precision highp float;\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/fill/common.glsl>\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\n#endif\n#ifdef DOT_DENSITY\nuniform mediump mat4 u_dotColors[ 2 ];\nuniform sampler2D u_dotTextures[ 2 ];\nuniform vec4 u_dotBackgroundColor;\n#endif\nvoid main() {\n#ifdef ID\ngl_FragColor = v_id;\n#elif defined(PATTERN)\nmediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color = texture2D(u_texture, samplePos);\ngl_FragColor = v_opacity * v_color * color;\n#elif defined(DOT_DENSITY) && !defined(HIGHLIGHT)\nvec4 textureThresholds0 = texture2D(u_dotTextures[0], v_dotTextureCoords);\nvec4 textureThresholds1 = texture2D(u_dotTextures[1], v_dotTextureCoords);\nvec4 difference0 = v_dotThresholds[0] - textureThresholds0;\nvec4 difference1 = v_dotThresholds[1] - textureThresholds1;\n#ifdef DD_DOT_BLENDING\nvec4 isPositive0 = step(0.0, difference0);\nvec4 isPositive1 = step(0.0, difference1);\nfloat weightSum = dot(isPositive0, difference0) + dot(isPositive1, difference1);\nfloat lessThanEqZero = step(weightSum, 0.0);\nfloat greaterThanZero = 1.0 - lessThanEqZero ;\nfloat divisor = (weightSum + lessThanEqZero);\nvec4 weights0 = difference0 * isPositive0 / divisor;\nvec4 weights1 = difference1 * isPositive1 / divisor;\nvec4 dotColor = u_dotColors[0] * weights0 + u_dotColors[1] * weights1;\nvec4 preEffectColor = greaterThanZero * dotColor + lessThanEqZero * u_dotBackgroundColor;\n#else\nfloat diffMax = max(max4(difference0), max4(difference1));\nfloat lessThanZero = step(diffMax, 0.0);\nfloat greaterOrEqZero = 1.0 - lessThanZero;\nvec4 isMax0 = step(diffMax, difference0);\nvec4 isMax1 = step(diffMax, difference1);\nvec4 dotColor = u_dotColors[0] * isMax0 + u_dotColors[1] * isMax1;\nvec4 preEffectColor = greaterOrEqZero * dotColor + lessThanZero * u_dotBackgroundColor;\n#endif\ngl_FragColor = preEffectColor;\n#else\ngl_FragColor = v_opacity * v_color;\n#endif\n#ifdef HIGHLIGHT\ngl_FragColor.a = 1.0;\n#endif\n}","fill.vert":"precision highp float;\n#ifdef DOT_DENSITY\nattribute float a_inverseArea;\nvec4 a_color = vec4(0.0, 0.0, 0.0, 1.0);\nvec4 a_aux3 = vec4(0.0);\nvec2 a_zoomRange = vec2(0.0, 10000.0);\n#else\nattribute vec4 a_color;\nattribute vec4 a_tlbr;\nattribute vec4 a_aux1;\nattribute vec2 a_aux2;\nattribute vec4 a_aux3;\nattribute vec2 a_zoomRange;\n#endif\n#include <materials/vcommon.glsl>\n#include <materials/fill/common.glsl>\n#ifdef DOT_DENSITY\nvec4 dotThreshold(vec4 featureAttrOverFeatureArea, float dotValue, float tileDotsOverArea) {\nreturn featureAttrOverFeatureArea * (1.0 / dotValue)  * (1.0 / tileDotsOverArea);\n}\n#endif\nvoid main()\n{\nINIT;\nfloat a_bitSet = a_aux3.a;\nv_color     = getColor(a_color, a_bitSet, 0);\nv_opacity   = getOpacity();\nv_id        = norm(a_id);\nv_pos       = u_dvsMat3 * vec3(a_pos * FILL_POSITION_PRECISION, 1.);\nv_flags     = getFilterFlags();\n#ifdef PATTERN\nvec2 aux2 = (1.0 / SIGNED_BYTE_TO_UNSIGNED) * a_aux2;\nfloat width = u_zoomFactor * a_aux1.x * aux2.x;\nfloat height = u_zoomFactor * a_aux1.y * aux2.y;\nfloat angle = C_256_TO_RAD * a_aux3.z;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nmat3 patternMatrix = mat3(cosA / width, sinA / height, 0,\n-sinA / width, cosA / height, 0,\n0,            0,             1);\nvec2 symbolOffset = (a_aux1.zw - SIGNED_BYTE_TO_UNSIGNED) / vec2(width, height);\nv_tileTextureCoord = (patternMatrix * vec3(a_pos * FILL_POSITION_PRECISION, 1.0)).xy - symbolOffset;\nv_tlbr = a_tlbr / u_mosaicSize.xyxy;\n#elif defined(DOT_DENSITY)\nvec4 ddAttributeData0 = getAttributeData2(a_id) * u_isActive[0] * a_inverseArea;\nvec4 ddAttributeData1 = getAttributeData3(a_id) * u_isActive[1] * a_inverseArea;\nfloat size = u_tileZoomFactor * 512.0 * 1.0 / u_pixelRatio;\nv_dotThresholds[0] = dotThreshold(ddAttributeData0, u_dotValue, u_tileDotsOverArea);\nv_dotThresholds[1] = dotThreshold(ddAttributeData1, u_dotValue, u_tileDotsOverArea);\nv_dotTextureCoords = (a_pos * FILL_POSITION_PRECISION + 0.5) / size;\n#endif\ngl_Position = vec4(clip(v_color, v_pos, v_flags, a_zoomRange), 1.0);\n}"},icon:{"common.glsl":"uniform lowp vec2 u_mosaicSize;\nvarying lowp vec4 v_color;\nvarying highp vec4 v_id;\nvarying highp vec4 v_sizeTex;\nvarying mediump vec3 v_pos;\nvarying highp float v_filters;\nvarying lowp float v_opacity;\n#ifdef SDF\nvarying lowp vec4 v_outlineColor;\nvarying mediump float v_outlineWidth;\nvarying mediump float v_distRatio;\nvarying mediump float v_overridingOutlineColor;\nvarying mediump float v_isThin;\n#endif","icon.frag":"precision mediump float;\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <util/encoding.glsl>\n#include <materials/constants.glsl>\n#include <materials/icon/common.glsl>\nuniform lowp sampler2D u_texture;\nvoid main()\n{\nvec2 v_size = v_sizeTex.xy;\nvec2 v_tex  = v_sizeTex.zw;\n#ifdef SDF\nlowp vec4 fillPixelColor = v_color;\nfloat d = 0.5 - rgba2float(texture2D(u_texture, v_tex));\nfloat size = max(v_size.x, v_size.y);\nfloat dist = d * size * SOFT_EDGE_RATIO * v_distRatio;\nfillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\nfloat outlineWidth = v_outlineWidth;\n#ifdef HIGHLIGHT\noutlineWidth = max(outlineWidth, 4.0 * v_isThin);\n#endif\nif (outlineWidth > 0.25) {\nlowp vec4 outlinePixelColor = v_overridingOutlineColor * v_color + (1.0 - v_overridingOutlineColor) * v_outlineColor;\nfloat clampedOutlineSize = min(outlineWidth, size);\noutlinePixelColor *= clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\ngl_FragColor = v_opacity * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\n}\nelse {\ngl_FragColor = v_opacity * fillPixelColor;\n}\n#else\nlowp vec4 texColor = texture2D(u_texture, v_tex);\ngl_FragColor = v_opacity * texColor;\n#endif\n#ifdef HIGHLIGHT\ngl_FragColor.a = step(1.0 / 255.0, gl_FragColor.a);\n#endif\n#ifdef ID\nif (gl_FragColor.a < 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor = v_id;\n#endif\n}","icon.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_outlineColor;\nattribute vec4 a_sizeAndOutlineWidth;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nattribute vec2 a_bitSetAndDistRatio;\nattribute vec2 a_zoomRange;\n#include <materials/vcommon.glsl>\n#include <materials/icon/common.glsl>\nvec2 getMarkerSize(inout vec2 offset, inout vec2 baseSize, inout float outlineSize, in float referenceSize, in float bitSet) {\n#ifdef VV_SIZE\nfloat r = getSize(baseSize.y) / referenceSize;\nbaseSize.xy *= r;\noffset.xy *= r;\nfloat scaleSymbolProportionally = getBit(bitSet, 3);\noutlineSize *= scaleSymbolProportionally * (r - 1.0) + 1.0;\n#endif\nreturn baseSize;\n}\nvec3 getOffset(in vec2 in_offset, float a_bitSet) {\nfloat isMapAligned = getBit(a_bitSet, 0);\nvec3  offset       = getRotation() * vec3(in_offset, 0.0);\nreturn getMatrix(isMapAligned) * offset;\n}\nvoid main()\n{\nINIT;\nvec2  a_size   = a_sizeAndOutlineWidth.xy * a_sizeAndOutlineWidth.xy / 128.0;\nvec2  a_offset = a_vertexOffset / 16.0;\nfloat a_outlineSize = a_sizeAndOutlineWidth.z * a_sizeAndOutlineWidth.z / 128.0;\nfloat a_bitSet = a_bitSetAndDistRatio.x;\nvec2 v_size = getMarkerSize(a_offset, a_size, a_outlineSize, a_sizeAndOutlineWidth.w * a_sizeAndOutlineWidth.w / 128.0, a_bitSet);\nvec2 v_tex      = a_texCoords / u_mosaicSize;\nv_color    = getColor(a_color, a_bitSet, 1);\nv_opacity  = getOpacity();\nv_id       = norm(a_id);\nv_filters  = getFilterFlags();\nv_pos      = u_dvsMat3 * vec3(a_pos * POSITION_PRECISION, 1.0) + getOffset(a_offset, a_bitSet);\nv_sizeTex  = vec4(v_size.xy, v_tex.xy);\n#ifdef SDF\nv_isThin   = getBit(a_bitSet, 2);\n#ifdef VV_COLOR\nv_overridingOutlineColor = v_isThin;\n#else\nv_overridingOutlineColor = 0.0;\n#endif\nv_outlineWidth = min(a_outlineSize, max(max(v_size.x, v_size.y) - 0.99, 0.0));\nv_outlineColor = a_outlineColor;\nv_distRatio = a_bitSetAndDistRatio.y / 126.0;\n#endif\ngl_Position = vec4(clip(v_color, v_pos, v_filters, a_zoomRange), 1.0);\n}"},label:{"common.glsl":"uniform mediump float u_zoomLevel;\nuniform mediump float u_mapRotation;\nuniform mediump float u_mapAligned;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying mediump vec2 v_tex;\nvarying mediump vec4 v_color;\nvarying lowp vec4 v_animation;","label.frag":"#include <materials/text/text.frag>","label.vert":"precision highp float;\n#include <materials/vcommon.glsl>\n#include <materials/text/common.glsl>\nattribute vec4 a_color;\nattribute vec4 a_haloColor;\nattribute vec4 a_texAndSize;\nattribute vec4 a_refSymbolAndPlacementOffset;\nattribute vec4 a_glyphData;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nuniform float u_isHalo;\nuniform float u_mapRotation;\nuniform float u_mapAligned;\nfloat getZ(in float minZoom, in float maxZoom, in float angle) {\nfloat glyphAngle = angle * 360.0 / 254.0;\nfloat mapAngle = u_mapRotation * 360.0 / 254.0;\nfloat diffAngle = min(360.0 - abs(mapAngle - glyphAngle), abs(mapAngle - glyphAngle));\nfloat z = 0.0;\nz += u_mapAligned * (2.0 * (1.0 - step(minZoom, u_currentZoom)));\nz += u_mapAligned * 2.0 * step(90.0, diffAngle);\nz += 2.0 * (1.0 - step(u_currentZoom, maxZoom));\nreturn z;\n}\nvoid main()\n{\nINIT;\nfloat groupMinZoom    = getMinZoom();\nfloat glyphMinZoom    = a_glyphData.x;\nfloat glyphMaxZoom    = a_glyphData.y;\nfloat glyphAngle      = a_glyphData.z;\nfloat a_minZoom          = max(groupMinZoom, glyphMinZoom);\nfloat a_placementPadding = a_refSymbolAndPlacementOffset.x * EXTRUDE_SCALE_PLACEMENT_PADDING;\nvec2  a_placementDir     = unpack_u8_nf32(a_refSymbolAndPlacementOffset.zw);\nfloat a_refSymbolSize    = a_refSymbolAndPlacementOffset.y;\nfloat fontSize           = a_texAndSize.z;\nfloat haloSize           = a_texAndSize.w * OUTLINE_SCALE;\nvec2  vertexOffset = a_vertexOffset * OFFSET_PRECISION;\nvec3  pos          = vec3(a_pos * POSITION_PRECISION, 1.0);\nfloat z            = getZ(a_minZoom, glyphMaxZoom, glyphAngle);\nfloat fontScale    = fontSize / SDF_FONT_SIZE;\nfloat halfSize     = getSize(a_refSymbolSize) / 2.0;\nfloat animation    = pow(getAnimationState(), vec4(2.0)).r;\nv_color     = animation * ((1.0 - u_isHalo) * a_color + (u_isHalo * a_haloColor));\nv_opacity   = 1.0;\nv_tex       = a_texCoords / u_mosaicSize;\nv_edgeDistanceOffset = u_isHalo * haloSize / fontScale / MAX_SDF_DISTANCE;\nv_antialiasingWidth  = 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\nvec2 placementOffset = a_placementDir * (halfSize + a_placementPadding);\nvec3 glyphOffset     = u_displayMat3 * vec3(vertexOffset + placementOffset, 0.0);\nvec3 v_pos           = vec3((u_dvsMat3 * pos + glyphOffset).xy, z);\ngl_Position = vec4(applyFilterLabels(v_color, v_pos, getFilterFlags()), 1.0);\n#ifdef DEBUG\nv_color = vec4(a_color.rgb, z == 0.0 ? 1.0 : 0.645);\n#endif\n}"},line:{"common.glsl":"varying lowp vec4 v_color;\nvarying highp vec4 v_id;\nvarying mediump vec2 v_normal;\nvarying mediump float v_lineHalfWidth;\nvarying lowp float v_opacity;\nvarying highp vec3 v_pos;\n#ifdef PATTERN\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\n#endif\n#if defined(PATTERN) || defined(SDF)\nvarying highp float v_accumulatedDistance;\n#endif","line.frag":"precision lowp float;\n#include <util/encoding.glsl>\n#include <materials/constants.glsl>\n#include <materials/line/common.glsl>\nuniform lowp float u_blur;\n#if defined(PATTERN) || defined(SDF)\nuniform sampler2D u_texture;\n#endif\n#ifdef SDF\nconst float sdfPatternHalfWidth = 15.5;\nuniform mediump float u_antialiasing;\n#endif\nvoid main()\n{\nmediump float thinLineFactor = max(THIN_LINE_WIDTH_FACTOR * step(v_lineHalfWidth, THIN_LINE_HALF_WIDTH), 1.0);\nmediump float fragDist = length(v_normal) * v_lineHalfWidth;\nlowp float alpha = clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\n#if defined(SDF) && !defined(HIGHLIGHT)\nmediump float lineHalfWidth = v_lineHalfWidth;\nmediump float lineWidthRatio = max(lineHalfWidth - 0.55 * u_antialiasing, 0.25) / sdfPatternHalfWidth;\nmediump float relativeTexX = mod(v_accumulatedDistance * 0.5 / (lineWidthRatio * v_patternSize.x), 1.0);\nmediump float relativeTexY = 0.5 + 0.25 * v_normal.y;\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d = rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist = d * lineHalfWidth;\nlowp vec4 fillPixelColor = v_opacity * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\ngl_FragColor = fillPixelColor;\n#elif defined(PATTERN) && !defined(HIGHLIGHT)\nmediump float lineHalfWidth = v_lineHalfWidth;\nmediump float adjustedPatternWidth = v_patternSize.x * 2.0 * lineHalfWidth / v_patternSize.y;\nmediump float relativeTexX = mod(v_accumulatedDistance / adjustedPatternWidth, 1.0);\nmediump float relativeTexY = 0.5 + 0.5 * v_normal.y;\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexY, relativeTexX));\nlowp vec4 color = texture2D(u_texture, texCoord);\ngl_FragColor = v_opacity * alpha * v_color * color;\n#else\ngl_FragColor = v_opacity * alpha * v_color;\n#endif\n#ifdef HIGHLIGHT\ngl_FragColor.a = step(1.0 / 255.0, gl_FragColor.a);\n#endif\n#ifdef ID\nif (gl_FragColor.a < 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor = v_id;\n#endif\n}","line.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_offsetAndNormal;\nattribute vec2 a_accumulatedDistanceAndHalfWidth;\nattribute vec4 a_tlbr;\nattribute vec4 a_segmentDirection;\nattribute vec2 a_aux;\nattribute vec2 a_zoomRange;\n#include <materials/vcommon.glsl>\n#include <materials/line/common.glsl>\nconst float SCALE = 1.0 / 31.0;\nconst float WIDTH_SCALE = 1.0 / 1024.0;\nfloat getBaseLineHalfWidth(in float in_lineHalfWidth) {\n#ifdef VV_SIZE\nfloat referenceHalfWidth = a_aux.x * WIDTH_SCALE;\nfloat lineWidth = 2.0 * in_lineHalfWidth;\nreturn 0.5 * (in_lineHalfWidth / referenceHalfWidth) * getSize(lineWidth);\n#else\nreturn in_lineHalfWidth;\n#endif\n}\nfloat getLineHalfWidth(in float baseWidth, in float aa) {\nfloat halfWidth = max(baseWidth + aa, 0.45) + 0.1 * aa;\n#ifdef HIGHLIGHT\nhalfWidth = max(halfWidth, 2.0);\n#endif\nreturn halfWidth;\n}\nvec2 getDist(in vec2 offset, in float halfWidth) {\nfloat thinLineFactor = max(THIN_LINE_WIDTH_FACTOR * step(halfWidth, THIN_LINE_HALF_WIDTH), 1.0);\nreturn thinLineFactor * halfWidth * offset * SCALE;\n}\nvoid main()\n{\nINIT;\nfloat a_bitSet          = a_segmentDirection.w;\nfloat a_accumulatedDist = a_accumulatedDistanceAndHalfWidth.x;\nfloat a_lineHalfWidth   = a_accumulatedDistanceAndHalfWidth.y * WIDTH_SCALE;\nfloat aa                = 0.5 * u_antialiasing;\nvec2  a_offset          = a_offsetAndNormal.xy;\nfloat baseWidth = getBaseLineHalfWidth(a_lineHalfWidth);\nfloat halfWidth = getLineHalfWidth(baseWidth, aa);\nfloat z         = 2.0 * step(baseWidth, 0.0);\nvec2  dist      = getDist(a_offset, halfWidth);\nvec3  offset    = u_displayViewMat3 * vec3(dist, 0.0);\nvec3  pos       = u_dvsMat3 * vec3(a_pos * POSITION_PRECISION, 1.0) + offset;\nv_color         = getColor(a_color, a_bitSet, 0);\nv_opacity       = getOpacity();\nv_lineHalfWidth = halfWidth;\nv_id            = norm(a_id);\nv_normal        = a_offsetAndNormal.zw * SCALE;\nv_pos           = vec3(pos.xy, z);\n#ifdef PATTERN\nv_tlbr          = a_tlbr / u_mosaicSize.xyxy;\nv_patternSize   = vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\n#endif\n#if defined(PATTERN) || defined(SDF)\nv_accumulatedDistance = a_accumulatedDist * u_zoomFactor + dot(SCALE * a_segmentDirection.xy, dist);\n#endif\ngl_Position = vec4(clip(v_color, v_pos, getFilterFlags(), a_zoomRange), 1.0);\n}"},text:{"common.glsl":"uniform highp vec2 u_mosaicSize;\nvarying highp vec4 v_id;\nvarying mediump vec3 v_pos;\nvarying lowp float v_opacity;\nvarying lowp vec4 v_color;\nvarying highp vec2 v_tex;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying lowp float v_transparency;","text.frag":"precision mediump float;\n#include <materials/text/common.glsl>\nuniform lowp sampler2D u_texture;\nvoid main()\n{\nfloat SDF_CUTOFF = (2.0 / 8.0);\nfloat SDF_BASE_EDGE_DIST = 1.0 - SDF_CUTOFF;\nlowp float dist = texture2D(u_texture, v_tex).a;\nmediump float edge = SDF_BASE_EDGE_DIST - v_edgeDistanceOffset;\n#ifdef HIGHLIGHT\nedge /= 2.0;\n#endif\nlowp float aa = v_antialiasingWidth;\nlowp float alpha = smoothstep(edge - aa, edge + aa, dist);\ngl_FragColor = alpha * v_color * v_opacity;\n#ifdef ID\nif (gl_FragColor.a < 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor = v_id;\n#endif\n}","text.vert":"precision highp float;\n#include <materials/utils.glsl>\n#include <materials/vcommon.glsl>\n#include <materials/text/common.glsl>\nattribute vec4 a_color;\nattribute vec4 a_haloColor;\nattribute vec4 a_texFontSize;\nattribute vec4 a_aux;\nattribute vec2 a_zoomRange;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nuniform float u_isHalo;\nfloat getTextSize(in float baseSize, in float referenceSize) {\n#ifdef VV_SIZE\nreturn getSize(baseSize);\n#endif\nreturn baseSize;\n}\nvoid main()\n{\nINIT;\nfloat a_referenceSize = a_aux.z * a_aux.z / 256.0;\nfloat a_bitSet        = a_aux.w;\nfloat a_fontSize      = a_texFontSize.z;\nvec2  a_offset        = a_vertexOffset * OFFSET_PRECISION;\nvec3  in_pos        = vec3(a_pos * POSITION_PRECISION, 1.0);\nfloat fontSize      = getTextSize(a_fontSize, a_referenceSize);\nfloat scaleFactor   = fontSize / a_fontSize;\nfloat fontScale     = fontSize / SDF_FONT_SIZE;\nvec3  offset        = getRotation() * vec3(scaleFactor * a_offset, 0.0);\nmat3  extrudeMatrix = getBit(a_bitSet, 0) == 1.0 ? u_displayViewMat3 : u_displayMat3;\nv_color   = u_isHalo * a_haloColor + (1.0 - u_isHalo) * getColor(a_color, a_bitSet, 1);\nv_opacity = getOpacity();\nv_id      = norm(a_id);\nv_tex     = a_texCoords / u_mosaicSize;\nv_pos     = u_dvsMat3 * in_pos + extrudeMatrix * offset;\nv_edgeDistanceOffset = u_isHalo * OUTLINE_SCALE * a_texFontSize.w / fontScale / MAX_SDF_DISTANCE;\nv_antialiasingWidth  = 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\ngl_Position =  vec4(clip(v_color, v_pos, getFilterFlags(), a_zoomRange), 1.0);\n}"},"utils.glsl":"float rshift(in float u32, in int amount) {\nreturn floor(u32 / pow(2.0, float(amount)));\n}\nfloat getBit(in float bitset, in int bitIndex) {\nfloat offset = pow(2.0, float(bitIndex));\nreturn mod(floor(bitset / offset), 2.0);\n}\nfloat getFilterBit(in float bitset, in int bitIndex) {\nreturn getBit(bitset, bitIndex + 1);\n}\nfloat getHighlightBit(in float bitset) {\nreturn getBit(bitset, 0);\n}\nhighp vec4 unpackDisplayIdTexel(in highp vec4 bitset) {\nfloat isAggregate = getBit(bitset.a, 7);\nreturn (1.0 - isAggregate) * bitset + isAggregate * (vec4(bitset.rgba) - vec4(0.0, 0.0, 0.0, float(0x80)));\n}\nvec4 unpack(in float u32) {\nfloat r = mod(rshift(u32, 0), 255.0);\nfloat g = mod(rshift(u32, 8), 255.0);\nfloat b = mod(rshift(u32, 16), 255.0);\nfloat a = mod(rshift(u32, 24), 255.0);\nreturn vec4(r, g, b, a);\n}\nvec4 norm(in vec4 v) {\nreturn v /= 255.0;\n}\nfloat max4(vec4 target) {\nreturn max(max(max(target.x, target.y), target.z), target.w);\n}\nvec2 unpack_u8_nf32(vec2 bytes) {\nreturn (bytes - 127.0) / 127.0;\n}","vcommon.glsl":"#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/attributeData.glsl>\n#include <materials/vv.glsl>\nattribute vec2 a_pos;\nattribute highp vec4 a_id;\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform highp float u_pixelRatio;\nuniform mediump float u_zoomFactor;\nuniform mediump float u_antialiasing;\nuniform mediump float u_currentZoom;\nvec4 VV_ADATA = vec4(0.0);\nvoid loadVisualVariableData(inout vec4 target) {\n#ifdef OES_TEXTURE_FLOAT\ntarget.rgba = getAttributeData2(a_id);\n#else\nvec4 data0 = getAttributeData2(a_id);\nvec4 data1 = getAttributeData3(a_id);\ntarget.r = u88VVToFloat(data0.rg * 255.0);\ntarget.g = u88VVToFloat(data0.ba * 255.0);\ntarget.b = u88VVToFloat(data1.rg * 255.0);\ntarget.a = u88VVToFloat(data1.ba * 255.0);\n#endif\n}\n#ifdef VV\n#define INIT loadVisualVariableData(VV_ADATA)\n#else\n#define INIT\n#endif\nvec4 getColor(in vec4 a_color, in float a_bitSet, int index) {\n#ifdef VV_COLOR\nfloat isColorLocked   = getBit(a_bitSet, index);\nreturn getVVColor(VV_ADATA[ATTR_VV_COLOR], a_color, isColorLocked);\n#else\nreturn a_color;\n#endif\n}\nfloat getOpacity() {\n#ifdef VV_OPACITY\nreturn getVVOpacity(VV_ADATA[ATTR_VV_OPACITY]);\n#else\nreturn 1.0;\n#endif\n}\nfloat getSize(in float in_size) {\n#ifdef VV_SIZE\nreturn getVVSize(in_size, VV_ADATA[ATTR_VV_SIZE]);\n#else\nreturn in_size;\n#endif\n}\nmat3 getRotation() {\n#ifdef VV_ROTATION\nreturn getVVRotationMat3(mod(VV_ADATA[ATTR_VV_ROTATION], 360.0));\n#else\nreturn mat3(1.0);\n#endif\n}\nfloat getFilterFlags() {\n#ifdef IGNORES_SAMPLER_PRECISION\nreturn ceil(getAttributeData0(a_id).x * 255.0);\n#else\nreturn getAttributeData0(a_id).x * 255.0;\n#endif\n}\nvec4 getAnimationState() {\nreturn getAttributeData1(a_id);\n}\nfloat getMinZoom() {\nvec4 data0 = getAttributeData0(a_id) * 255.0;\nreturn data0.g;\n}\nmat3 getMatrix(float isMapAligned) {\nreturn isMapAligned * u_displayViewMat3 + (1.0 - isMapAligned) * u_displayMat3;\n}\nvec3 clip(inout vec4 color, inout vec3 pos, in float filterFlags, in vec2 minMaxZoom) {\npos.z += 2.0 * (1.0 - getFilterBit(filterFlags, 0));\n#ifdef INSIDE\npos.z += 2.0 * (1.0 - getFilterBit(filterFlags, 1));\n#elif defined(OUTSIDE)\npos.z += 2.0 * getFilterBit(filterFlags, 1);\n#elif defined(HIGHLIGHT)\n#if !defined(HIGHLIGHT_ALL)\npos.z += 2.0 * (1.0 - getHighlightBit(filterFlags));\n#endif\n#endif\npos.z += 2.0 * (step(minMaxZoom.y, u_currentZoom) + (1.0 - step(minMaxZoom.x, u_currentZoom)));\nreturn pos;\n}\nvec3 applyFilterLabels(inout vec4 color, inout vec3 pos, in float filterFlags) {\npos.z += 2.0 * (1.0 - getFilterBit(filterFlags, 0));\n#ifndef OUTSIDE_LABELS_VISIBLE\npos.z += 2.0 * (1.0 - getFilterBit(filterFlags, 1));\n#endif\nreturn pos;\n}","vv.glsl":"#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n#define VV_SIZE\n#endif\n#if defined(VV_COLOR) || defined(VV_SIZE) || defined(VV_OPACITY) || defined(VV_ROTATION)\n#define VV\n#endif\n#ifdef VV_COLOR\nuniform highp float u_vvColorValues[8];\nuniform vec4 u_vvColors[8];\n#endif\n#ifdef VV_SIZE_MIN_MAX_VALUE\nuniform highp vec4 u_vvSizeMinMaxValue;\n#endif\n#ifdef VV_SIZE_SCALE_STOPS\nuniform highp float u_vvSizeScaleStopsValue;\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nuniform highp float u_vvSizeFieldStopsValues[6];\nuniform float u_vvSizeFieldStopsSizes[6];\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nuniform highp float u_vvSizeUnitValueWorldToPixelsRatio;\n#endif\n#ifdef VV_OPACITY\nuniform highp float u_vvOpacityValues[8];\nuniform float u_vvOpacities[8];\n#endif\n#ifdef VV_ROTATION\nuniform lowp float u_vvRotationType;\n#endif\nbool isNan(float val) {\nreturn (val == NAN_MAGIC_NUMBER);\n}\n#ifdef VV_SIZE_MIN_MAX_VALUE\nfloat getVVMinMaxSize(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nfloat interpolationRatio = (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\ninterpolationRatio = clamp(interpolationRatio, 0.0, 1.0);\nreturn u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\n}\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nconst int VV_SIZE_N = 6;\nfloat getVVStopsSize(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nif (sizeValue <= u_vvSizeFieldStopsValues[0]) {\nreturn u_vvSizeFieldStopsSizes[0];\n}\nfor (int i = 1; i < VV_SIZE_N; ++i) {\nif (u_vvSizeFieldStopsValues[i] >= sizeValue) {\nfloat f = (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\nreturn mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\n}\n}\nreturn u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\n}\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nfloat getVVUnitValue(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nreturn u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\n}\n#endif\n#ifdef VV_OPACITY\nconst int VV_OPACITY_N = 8;\nfloat getVVOpacity(float opacityValue) {\nif (isNan(opacityValue)) {\nreturn 1.0;\n}\nif (opacityValue <= u_vvOpacityValues[0]) {\nreturn u_vvOpacities[0];\n}\nfor (int i = 1; i < VV_OPACITY_N; ++i) {\nif (u_vvOpacityValues[i] >= opacityValue) {\nfloat f = (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\nreturn mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\n}\n}\nreturn u_vvOpacities[VV_OPACITY_N - 1];\n}\n#endif\n#ifdef VV_ROTATION\nmat4 getVVRotation(float rotationValue) {\nif (isNan(rotationValue)) {\nreturn mat4(1, 0, 0, 0,\n0, 1, 0, 0,\n0, 0, 1, 0,\n0, 0, 0, 1);\n}\nfloat rotation = rotationValue;\nif (u_vvRotationType == 1.0) {\nrotation = 90.0 - rotation;\n}\nfloat angle = C_DEG_TO_RAD * rotation;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nreturn mat4(cosA, sinA, 0, 0,\n-sinA,  cosA, 0, 0,\n0,     0, 1, 0,\n0,     0, 0, 1);\n}\nmat3 getVVRotationMat3(float rotationValue) {\nif (isNan(rotationValue)) {\nreturn mat3(1, 0, 0,\n0, 1, 0,\n0, 0, 1);\n}\nfloat rotation = rotationValue;\nif (u_vvRotationType == 1.0) {\nrotation = 90.0 - rotation;\n}\nfloat angle = C_DEG_TO_RAD * -rotation;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nreturn mat3(cosA, -sinA, 0,\nsinA, cosA, 0,\n0,    0,    1);\n}\n#endif\n#ifdef VV_COLOR\nconst int VV_COLOR_N = 8;\nvec4 getVVColor(float colorValue, vec4 fallback, float isColorLocked) {\nif (isNan(colorValue) || isColorLocked == 1.0) {\nreturn fallback;\n}\nif (colorValue <= u_vvColorValues[0]) {\nreturn u_vvColors[0];\n}\nfor (int i = 1; i < VV_COLOR_N; ++i) {\nif (u_vvColorValues[i] >= colorValue) {\nfloat f = (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\nreturn mix(u_vvColors[i-1], u_vvColors[i], f);\n}\n}\nreturn u_vvColors[VV_COLOR_N - 1];\n}\n#endif\nfloat getVVSize(in float size, in float vvSize)  {\n#ifdef VV_SIZE_MIN_MAX_VALUE\nreturn getVVMinMaxSize(vvSize, size);\n#elif defined(VV_SIZE_SCALE_STOPS)\nreturn u_vvSizeScaleStopsValue;\n#elif defined(VV_SIZE_FIELD_STOPS)\nfloat outSize = getVVStopsSize(vvSize, size);\nreturn isNan(outSize) ? size : outSize;\n#elif defined(VV_SIZE_UNIT_VALUE)\nreturn getVVUnitValue(vvSize, size);\n#else\nreturn size;\n#endif\n}"},"post-processing":{blit:{"blit.frag":"precision mediump float;\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\nvoid main() {\ngl_FragColor = texture2D(u_texture, v_uv);\n}"},bloom:{composite:{"composite.frag":"precision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D u_blurTexture1;\nuniform sampler2D u_blurTexture2;\nuniform sampler2D u_blurTexture3;\nuniform sampler2D u_blurTexture4;\nuniform sampler2D u_blurTexture5;\nuniform float u_bloomStrength;\nuniform float u_bloomRadius;\nuniform float u_bloomFactors[NUMMIPS];\nuniform vec3 u_bloomTintColors[NUMMIPS];\nfloat lerpBloomFactor(const in float factor) {\nfloat mirrorFactor = 1.2 - factor;\nreturn mix(factor, mirrorFactor, u_bloomRadius);\n}\nvoid main() {\ngl_FragColor = u_bloomStrength * (\nlerpBloomFactor(u_bloomFactors[0]) * vec4(u_bloomTintColors[0], 1.0) * texture2D(u_blurTexture1, v_uv) +\nlerpBloomFactor(u_bloomFactors[1]) * vec4(u_bloomTintColors[1], 1.0) * texture2D(u_blurTexture2, v_uv) +\nlerpBloomFactor(u_bloomFactors[2]) * vec4(u_bloomTintColors[2], 1.0) * texture2D(u_blurTexture3, v_uv) +\nlerpBloomFactor(u_bloomFactors[3]) * vec4(u_bloomTintColors[3], 1.0) * texture2D(u_blurTexture4, v_uv) +\nlerpBloomFactor(u_bloomFactors[4]) * vec4(u_bloomTintColors[4], 1.0) * texture2D(u_blurTexture5, v_uv)\n);\n}"},gaussianBlur:{"gaussianBlur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nuniform vec2 u_direction;\nvarying vec2 v_uv;\n#define KERNEL_RADIUS RADIUS\n#define SIGMA RADIUS\nfloat gaussianPdf(in float x, in float sigma) {\nreturn 0.39894 * exp(-0.5 * x * x / ( sigma * sigma)) / sigma;\n}\nvoid main() {\nvec2 invSize = 1.0 / u_texSize;\nfloat fSigma = float(SIGMA);\nfloat weightSum = gaussianPdf(0.0, fSigma);\nvec4 pixelColorSum = texture2D(u_colorTexture, v_uv) * weightSum;\nfor (int i = 1; i < KERNEL_RADIUS; i ++) {\nfloat x = float(i);\nfloat w = gaussianPdf(x, fSigma);\nvec2 uvOffset = u_direction * invSize * x;\nvec4 sample1 = texture2D(u_colorTexture, v_uv + uvOffset);\nvec4 sample2 = texture2D(u_colorTexture, v_uv - uvOffset);\npixelColorSum += (sample1 + sample2) * w;\nweightSum += 2.0 * w;\n}\ngl_FragColor = pixelColorSum /weightSum;\n}"},luminosityHighPass:{"luminosityHighPass.frag":"precision mediump float;\nuniform sampler2D u_texture;\nuniform vec3 u_defaultColor;\nuniform float u_defaultOpacity;\nuniform float u_luminosityThreshold;\nuniform float u_smoothWidth;\nvarying vec2 v_uv;\nvoid main() {\nvec4 texel = texture2D(u_texture, v_uv);\nvec3 luma = vec3(0.299, 0.587, 0.114);\nfloat v = dot(texel.xyz, luma);\nvec4 outputColor = vec4(u_defaultColor.rgb, u_defaultOpacity);\nfloat alpha = smoothstep(u_luminosityThreshold, u_luminosityThreshold + u_smoothWidth, v);\ngl_FragColor = mix(outputColor, texel, alpha);\n}"}},blur:{gaussianBlur:{"gaussianBlur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nuniform vec2 u_direction;\nuniform float u_sigma;\nvarying vec2 v_uv;\n#define KERNEL_RADIUS RADIUS\nfloat gaussianPdf(in float x, in float sigma) {\nreturn 0.39894 * exp(-0.5 * x * x / ( sigma * sigma)) / sigma;\n}\nvoid main() {\nvec2 invSize = 1.0 / u_texSize;\nfloat fSigma = u_sigma;\nfloat weightSum = gaussianPdf(0.0, fSigma);\nvec4 pixelColorSum = texture2D(u_colorTexture, v_uv) * weightSum;\nfor (int i = 1; i < KERNEL_RADIUS; i ++) {\nfloat x = float(i);\nfloat w = gaussianPdf(x, fSigma);\nvec2 uvOffset = u_direction * invSize * x;\nvec4 sample1 = texture2D(u_colorTexture, v_uv + uvOffset);\nvec4 sample2 = texture2D(u_colorTexture, v_uv - uvOffset);\npixelColorSum += (sample1 + sample2) * w;\nweightSum += 2.0 * w;\n}\ngl_FragColor = pixelColorSum /weightSum;\n}"},"radial-blur":{"radial-blur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nconst float sampleDist = 1.0;\nconst float sampleStrength = 2.2;\nvoid main(void) {\nfloat samples[10];\nsamples[0] = -0.08;\nsamples[1] = -0.05;\nsamples[2] = -0.03;\nsamples[3] = -0.02;\nsamples[4] = -0.01;\nsamples[5] =  0.01;\nsamples[6] =  0.02;\nsamples[7] =  0.03;\nsamples[8] =  0.05;\nsamples[9] =  0.08;\nvec2 dir = 0.5 - v_uv;\nfloat dist = sqrt(dir.x * dir.x + dir.y * dir.y);\ndir = dir / dist;\nvec4 color = texture2D(u_colorTexture,v_uv);\nvec4 sum = color;\nfor (int i = 0; i < 10; i++) {\nsum += texture2D(u_colorTexture, v_uv + dir * samples[i] * sampleDist);\n}\nsum *= 1.0 / 11.0;\nfloat t = dist * sampleStrength;\nt = clamp(t, 0.0, 1.0);\ngl_FragColor = mix(color, sum, t);\n}"}},dra:{"dra.frag":"precision mediump float;\nuniform sampler2D u_minColor;\nuniform sampler2D u_maxColor;\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\nvoid main() {\nvec4 minColor = texture2D(u_minColor, vec2(0.5));\nvec4 maxColor = texture2D(u_maxColor, vec2(0.5));\nvec4 color = texture2D(u_texture, v_uv);\nvec3 minColorUnpremultiply = minColor.rgb / minColor.a;\nvec3 maxColorUnpremultiply = maxColor.rgb / maxColor.a;\nvec3 colorUnpremultiply = color.rgb / color.a;\nvec3 range = maxColorUnpremultiply - minColorUnpremultiply;\ngl_FragColor = vec4(color.a * (colorUnpremultiply - minColorUnpremultiply) / range, color.a);\n}","min-max":{"min-max.frag":"#extension GL_EXT_draw_buffers : require\nprecision mediump float;\n#define CELL_SIZE 2\nuniform sampler2D u_minTexture;\nuniform sampler2D u_maxTexture;\nuniform vec2 u_srcResolution;\nuniform vec2 u_dstResolution;\nvarying vec2 v_uv;\nvoid main() {\nvec2 srcPixel = floor(gl_FragCoord.xy) * float(CELL_SIZE);\nvec2 onePixel = vec2(1.0) / u_srcResolution;\nvec2 uv = (srcPixel + 0.5) / u_srcResolution;\nvec4 minColor = vec4(1.0);\nvec4 maxColor = vec4(0.0);\nfor (int y = 0; y < CELL_SIZE; ++y) {\nfor (int x = 0; x < CELL_SIZE; ++x) {\nvec2 offset = uv + vec2(x, y) * onePixel;\nminColor = min(minColor, texture2D(u_minTexture, offset));\nmaxColor = max(maxColor, texture2D(u_maxTexture, offset));\n}\n}\ngl_FragData[0] = minColor;\ngl_FragData[1] = maxColor;\n}"}},"drop-shadow":{composite:{"composite.frag":"precision mediump float;\nuniform sampler2D u_layerFBOTexture;\nuniform sampler2D u_blurTexture;\nuniform vec4 u_shadowColor;\nvarying vec2 v_uv;\nvoid main() {\nvec4 layerColor = texture2D(u_layerFBOTexture, v_uv);\nvec4 blurColor = texture2D(u_blurTexture, v_uv);\ngl_FragColor = ((1.0 - layerColor.a) * blurColor.a * u_shadowColor + layerColor);\n}"},"drop-shadow.vert":"precision mediump float;\nattribute vec2 a_position;\nuniform highp mat3 u_displayViewMat3;\nuniform highp vec2 u_offset;\nvarying vec2 v_uv;\nvoid main() {\nvec3 offset = u_displayViewMat3 * vec3(u_offset, 0.0);\ngl_Position = vec4(a_position, 0.0, 1.0) + vec4(offset, 0.0);\nv_uv = (a_position + 1.0) / 2.0;\n}"},"edge-detect":{"frei-chen":{"frei-chen.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nvarying vec2 v_uv;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[9];\nconst mat3 g0 = mat3( 0.3535533845424652, 0, -0.3535533845424652, 0.5, 0, -0.5, 0.3535533845424652, 0, -0.3535533845424652 );\nconst mat3 g1 = mat3( 0.3535533845424652, 0.5, 0.3535533845424652, 0, 0, 0, -0.3535533845424652, -0.5, -0.3535533845424652 );\nconst mat3 g2 = mat3( 0, 0.3535533845424652, -0.5, -0.3535533845424652, 0, 0.3535533845424652, 0.5, -0.3535533845424652, 0 );\nconst mat3 g3 = mat3( 0.5, -0.3535533845424652, 0, -0.3535533845424652, 0, 0.3535533845424652, 0, 0.3535533845424652, -0.5 );\nconst mat3 g4 = mat3( 0, -0.5, 0, 0.5, 0, 0.5, 0, -0.5, 0 );\nconst mat3 g5 = mat3( -0.5, 0, 0.5, 0, 0, 0, 0.5, 0, -0.5 );\nconst mat3 g6 = mat3( 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.6666666865348816, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204 );\nconst mat3 g7 = mat3( -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, 0.6666666865348816, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408 );\nconst mat3 g8 = mat3( 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408 );\nvoid main() {\nG[0] = g0,\nG[1] = g1,\nG[2] = g2,\nG[3] = g3,\nG[4] = g4,\nG[5] = g5,\nG[6] = g6,\nG[7] = g7,\nG[8] = g8;\nmat3 I;\nfloat cnv[9];\nvec3 sample;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D(u_colorTexture, v_uv + texel * vec2(i - 1.0,j - 1.0)).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 9; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\nfloat M = (cnv[0] + cnv[1]) + (cnv[2] + cnv[3]);\nfloat S = (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]) + (cnv[8] + M);\ngl_FragColor = vec4(vec3(sqrt(M / S)), texture2D(u_colorTexture, v_uv).a);\n}"},sobel:{"sobel.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nuniform vec2 u_texSize;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[2];\nconst mat3 g0 = mat3( 1.0, 2.0, 1.0, 0.0, 0.0, 0.0, -1.0, -2.0, -1.0 );\nconst mat3 g1 = mat3( 1.0, 0.0, -1.0, 2.0, 0.0, -2.0, 1.0, 0.0, -1.0 );\nvoid main() {\nmat3 I;\nfloat cnv[2];\nvec3 sample;\nG[0] = g0;\nG[1] = g1;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D( u_colorTexture, v_uv + texel * vec2(i-1.0,j-1.0) ).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 2; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\ngl_FragColor = vec4(vec3(0.5 * sqrt(cnv[0] * cnv[0] + cnv[1] * cnv[1])), texture2D(u_colorTexture, v_uv).a);\n}"}},"edge-enhance":{"edge-enhance.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nuniform vec2 u_texSize;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[2];\nconst mat3 g0 = mat3( 1.0, 0.0, -1.0, 1.0, 0.0, -1.0, 1.0, 0.0, -1.0 );\nconst mat3 g1 = mat3( 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, -1.0, -1.0, -1.0 );\nvoid main() {\nmat3 I;\nfloat cnv[2];\nvec3 sample;\nG[0] = g0;\nG[1] = g1;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D( u_colorTexture, v_uv + texel * vec2(i-1.0,j-1.0) ).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 2; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\nvec4 color = texture2D(u_colorTexture, v_uv);\ngl_FragColor = vec4(0.5 * sqrt(cnv[0] * cnv[0] + cnv[1] * cnv[1]) * color);\n}"},filterEffect:{"filterEffect.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform mat4 u_coefficients;\nvarying vec2 v_uv;\nvoid main() {\nvec4 color = texture2D(u_colorTexture, v_uv);\nvec4 rgbw = u_coefficients * vec4(color.a > 0.0 ? color.rgb / color.a : vec3(0.0), 1.0);\nfloat a = color.a;\ngl_FragColor = vec4(a * rgbw.rgb, a);\n}"},pp:{"pp.vert":"precision mediump float;\nattribute vec2 a_position;\nvarying vec2 v_uv;\nvoid main() {\ngl_Position = vec4(a_position, 0.0, 1.0);\nv_uv = (a_position + 1.0) / 2.0;\n}"}},raster:{bitmap:{"bitmap.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform highp vec2 u_coordScale;\nuniform lowp float u_opacity;\n#include <filtering/bicubic.glsl>\nvoid main() {\n#ifdef BICUBIC\nvec4 color = sampleBicubicBSpline(u_texture, v_texcoord, u_coordScale);\n#else\nvec4 color = texture2D(u_texture, v_texcoord);\n#endif\nfloat alpha = u_opacity * color.a;\ngl_FragColor = vec4(alpha * color.rgb, alpha);\n}","bitmap.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_pos;\ngl_Position = vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}"},common:{"common.glsl":"uniform sampler2D u_image;\nuniform int u_bandCount;\nuniform bool u_isFloatTexture;\nuniform bool u_flipY;\nuniform float u_opacity;\nuniform int u_resampling;\nuniform vec2 u_srcImageSize;\n#ifdef APPLY_PROJECTION\n#include <raster/common/projection.glsl>\n#endif\n#ifdef BICUBIC\n#include <filtering/bicubic.glsl>\n#endif\n#ifdef BILINEAR\n#include <filtering/bilinear.glsl>\n#endif\nvec2 getPixelLocation(vec2 coords) {\nvec2 targetLocation = u_flipY ? vec2(coords.s, 1.0 - coords.t) : coords;\n#ifdef APPLY_PROJECTION\ntargetLocation = projectPixelLocation(targetLocation);\n#endif\nreturn targetLocation;\n}\nbool isOutside(vec2 coords){\nif (coords.t>1.00001 ||coords.t<-0.00001 || coords.s>1.00001 ||coords.s<-0.00001) {\nreturn true;\n} else {\nreturn false;\n}\n}\nvec4 getPixel(vec2 pixelLocation) {\n#ifdef BICUBIC\nvec4 color = sampleBicubicBSpline(u_image, pixelLocation, u_srcImageSize);\n#elif defined(BILINEAR)\nvec4 color = sampleBilinear(u_image, pixelLocation, u_srcImageSize);\n#else\nvec4 color = texture2D(u_image, pixelLocation);\n#endif\nreturn color;\n}","contrastBrightness.glsl":"uniform float u_contrastOffset;\nuniform float u_brightnessOffset;\nvec4 adjustContrastBrightness(vec4 currentPixel, bool isFloat) {\nvec4 pixelValue = isFloat ? currentPixel * 255.0 : currentPixel;\nfloat maxI = 255.0;\nfloat mid = 128.0;\nfloat c = u_contrastOffset;\nfloat b = u_brightnessOffset;\nvec4 v;\nif (c > 0.0 && c < 100.0) {\nv = (200.0 * pixelValue - 100.0 * maxI + 2.0 * maxI * b) / (2.0 * (100.0 - c)) + mid;\n} else if (c <= 0.0 && c > -100.0) {\nv = (200.0 * pixelValue - 100.0 * maxI + 2.0 * maxI * b) * (100.0 + c) / 20000.0 + mid;\n} else if (c == 100.0) {\nv = (200.0 * pixelValue - 100.0 * maxI + (maxI + 1.0) * (100.0 - c) + 2.0 * maxI * b);\nv = (sign(v) + 1.0) / 2.0;\n} else if (c == -100.0) {\nv = vec4(mid, mid, mid, currentPixel.a);\n}\nreturn vec4(v.r / 255.0, v.g / 255.0, v.b / 255.0, currentPixel.a);\n}","projection.glsl":"uniform sampler2D u_transformGrid;\nuniform vec2 u_transformSpacing;\nuniform vec2 u_transformGridSize;\nuniform vec2 u_targetImageSize;\nvec2 projectPixelLocation(vec2 coords) {\nvec2 index_image = floor(coords * u_targetImageSize);\nvec2 oneTransformPixel = vec2(0.25 / u_transformGridSize.s, 1.0 / u_transformGridSize.t);\nvec2 index_transform = floor(index_image / u_transformSpacing) / u_transformGridSize;\nvec2 pos = fract((index_image + vec2(0.5, 0.5)) / u_transformSpacing);\nvec2 srcLocation;\nvec2 transform_location = index_transform + oneTransformPixel * 0.5;\nif (pos.s <= pos.t) {\nvec4 ll_abc = texture2D(u_transformGrid, vec2(transform_location.s, transform_location.t));\nvec4 ll_def = texture2D(u_transformGrid, vec2(transform_location.s + oneTransformPixel.s, transform_location.t));\nsrcLocation.s = dot(ll_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t = dot(ll_def.rgb, vec3(pos, 1.0));\n} else {\nvec4 ur_abc = texture2D(u_transformGrid, vec2(transform_location.s + 2.0 * oneTransformPixel.s, transform_location.t));\nvec4 ur_def = texture2D(u_transformGrid, vec2(transform_location.s + 3.0 * oneTransformPixel.s, transform_location.t));\nsrcLocation.s = dot(ur_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t = dot(ur_def.rgb, vec3(pos, 1.0));\n}\nreturn srcLocation;\n}"},hillshade:{"hillshade.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\n#include <raster/common/common.glsl>\nuniform int u_hillshadeType;\nuniform float u_sinZcosAs[6];\nuniform float u_sinZsinAs[6];\nuniform float u_cosZs[6];\nuniform float u_weights[6];\nuniform vec2 u_factor;\nuniform float u_minValue;\nuniform float u_maxValue;\n#include <raster/lut/colorize.glsl>\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a == 0.0 || a == 0.0 || a==0.0 || a == 0.0 || a == 0.0 || a==0.0 || a == 0.0 || a == 0.0 || a==0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nvec3 rgb2hsv(vec3 c) {\nvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d = q.x - min(q.w, q.y);\nfloat e = 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec4 overlay(float val, float minValue, float maxValue, float hillshade) {\nval = clamp((val - minValue) / (maxValue - minValue), 0.0, 1.0);\nvec4 rgb = colorize(vec4(val, val, val, 1.0), 255.0);\nvec3 hsv = rgb2hsv(rgb.xyz);\nhsv.z = hillshade;\nreturn vec4(hsv2rgb(hsv), 1.0) * rgb.a;\n}\nvoid main() {\nvec2 pixelLocation = getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel = getPixel(pixelLocation);\nif (currentPixel.a == 0.0) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec2 axy = vec2(-1.0, -1.0);\nvec2 bxy = vec2(0.0, -1.0);\nvec2 cxy = vec2(1.0, -1.0);\nvec2 dxy = vec2(-1.0, 0.0);\nvec2 fxy = vec2(1.0, 0.0);\nvec2 gxy = vec2(-1.0, 1.0);\nvec2 hxy = vec2(0.0, 1.0);\nvec2 ixy = vec2(1.0, 1.0);\nvec2 onePixel = 1.0 / u_srcImageSize;\nif (pixelLocation.s < onePixel.s) {\naxy[0] = 1.0;\ndxy[0] = 1.0;\ngxy[0] = 1.0;\n}\nif (pixelLocation.t < onePixel.t) {\naxy[1] = 1.0;\nbxy[1] = 1.0;\ncxy[1] = 1.0;\n}\nif (pixelLocation.s > 1.0 - onePixel.s) {\ncxy[0] = -1.0;\nfxy[0] = -1.0;\nixy[0] = -1.0;\n}\nif (pixelLocation.t > 1.0 - onePixel.t) {\ngxy[1] = -1.0;\nhxy[1] = -1.0;\nixy[1] = -1.0;\n}\nvec4 va = texture2D(u_image, pixelLocation + onePixel * axy);\nvec4 vb = texture2D(u_image, pixelLocation + onePixel * bxy);\nvec4 vc = texture2D(u_image, pixelLocation + onePixel * cxy);\nvec4 vd = texture2D(u_image, pixelLocation + onePixel * dxy);\nvec4 ve = texture2D(u_image, pixelLocation);\nvec4 vf = texture2D(u_image, pixelLocation + onePixel * fxy);\nvec4 vg = texture2D(u_image, pixelLocation + onePixel * gxy);\nvec4 vh = texture2D(u_image, pixelLocation + onePixel * hxy);\nvec4 vi = texture2D(u_image, pixelLocation + onePixel * ixy);\nfloat dzx = (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r * u_factor.s;\nfloat dzy = (vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r * u_factor.t;\nfloat dzd = sqrt(1.0 + dzx * dzx + dzy * dzy);\nfloat hillshade = 0.0;\nif (u_hillshadeType == 0){\nfloat cosDelta = u_sinZsinAs[0] * dzy - u_sinZcosAs[0] * dzx;\nfloat z = (u_cosZs[0] + cosDelta) / dzd;\nif (z < 0.0)  z = 0.0;\nhillshade = z;\n} else {\nfor (int k = 0; k < 6; k++) {\nfloat cosDelta = u_sinZsinAs[k] * dzy - u_sinZcosAs[k] * dzx;\nfloat z = (u_cosZs[k] + cosDelta) / dzd;\nif (z < 0.0) z = 0.0;\nhillshade = hillshade + z * u_weights[k];\nif (k == 5) break;\n}\n}\nfloat alpha = getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\n#ifdef APPLY_COLORMAP\ngl_FragColor = overlay(ve.r, u_minValue, u_maxValue, hillshade) * alpha * u_opacity;\n#else\ngl_FragColor = vec4(hillshade, hillshade, hillshade, 1.0) * alpha * u_opacity;\n#endif\n}","hillshade.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_pos;\ngl_Position = vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}"},lut:{"colorize.glsl":"uniform sampler2D u_colormap;\nuniform float u_colormapOffset;\nuniform float u_colormapMaxIndex;\nvec4 colorize(vec4 currentPixel, float scaleFactor) {\nfloat clrIndex = clamp(currentPixel.r * scaleFactor - u_colormapOffset, 0.0, u_colormapMaxIndex);\nvec2 clrPosition = vec2((clrIndex + 0.5) / (u_colormapMaxIndex + 1.0), 0.0);\nvec4 color = texture2D(u_colormap, clrPosition);\nvec4 result = vec4(color.rgb, color.a * currentPixel.a);\nreturn result;\n}","lut.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\n#include <raster/common/common.glsl>\n#include <raster/lut/colorize.glsl>\nvoid main() {\nvec2 pixelLocation = getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel = getPixel(pixelLocation);\nvec4 result = colorize(currentPixel, 1.0);\ngl_FragColor = vec4(result.xyz, 1.0) * result.a * u_opacity;\n}","lut.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform highp float u_scale;\nuniform highp vec2 u_offset;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_pos * u_scale + u_offset;\ngl_Position = vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}"},stretch:{"stretch.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\n#include <raster/common/common.glsl>\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput;\nuniform float u_maxOutput;\nuniform float u_factor[3];\nuniform bool u_useGamma;\nuniform float u_gamma[3];\nuniform float u_gammaCorrection[3];\n#include <raster/lut/colorize.glsl>\nfloat stretchOneValue(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, bool useGamma, float gamma, float gammaCorrection) {\nif (val >= maxCutOff) {\nreturn maxOutput;\n} else if (val <= minCutOff) {\nreturn minOutput;\n}\nfloat stretchedVal;\nif (useGamma) {\nfloat tempf = 1.0;\nfloat outRange = maxOutput - minOutput;\nfloat relativeVal = (val - minCutOff) / (maxCutOff - minCutOff);\nif (gamma > 1.0) {\ntempf -= pow(1.0 / outRange, relativeVal * gammaCorrection);\n}\nstretchedVal = (tempf * outRange * pow(relativeVal, 1.0 / gamma) + minOutput) / 255.0;\n} else {\nstretchedVal = minOutput + (val - minCutOff) * factor;\n}\nreturn stretchedVal;\n}\nvoid main() {\nvec2 pixelLocation = getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel = getPixel(pixelLocation);\n#ifdef NOOP\ngl_FragColor = vec4(currentPixel.rgb, 1.0) * currentPixel.a * u_opacity;\nreturn;\n#endif\nif (u_bandCount == 1) {\nfloat grayVal = stretchOneValue(currentPixel.r, u_minCutOff[0], u_maxCutOff[0], u_minOutput, u_maxOutput, u_factor[0], u_useGamma, u_gamma[0], u_gammaCorrection[0]);\n#ifdef APPLY_COLORMAP\nvec4 result = colorize(vec4(grayVal, grayVal, grayVal, 1.0), u_useGamma ? 255.0 : 1.0);\ngl_FragColor = vec4(result.xyz, 1.0) * result.a * currentPixel.a * u_opacity;\n#else\ngl_FragColor = vec4(grayVal, grayVal, grayVal, 1.0) * currentPixel.a * u_opacity;\n#endif\n} else {\nfloat redVal = stretchOneValue(currentPixel.r, u_minCutOff[0], u_maxCutOff[0], u_minOutput, u_maxOutput, u_factor[0], u_useGamma, u_gamma[0], u_gammaCorrection[0]);\nfloat greenVal = stretchOneValue(currentPixel.g, u_minCutOff[1], u_maxCutOff[1], u_minOutput, u_maxOutput, u_factor[1], u_useGamma, u_gamma[1], u_gammaCorrection[1]);\nfloat blueVal = stretchOneValue(currentPixel.b, u_minCutOff[2], u_maxCutOff[2], u_minOutput, u_maxOutput, u_factor[2], u_useGamma, u_gamma[2], u_gammaCorrection[2]);\ngl_FragColor = vec4(redVal, greenVal, blueVal, 1.0) * currentPixel.a * u_opacity;\n}\n}","stretch.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform highp float u_scale;\nuniform highp vec2 u_offset;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_pos * u_scale + u_offset;\ngl_Position = vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}"}},stencil:{"stencil.frag":"void main() {\ngl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n}","stencil.vert":"attribute vec2 a_pos;\nvoid main() {\ngl_Position = vec4(a_pos, 0.0, 1.0);\n}"},tileInfo:{"tileInfo.frag":"uniform mediump sampler2D u_texture;\nvarying mediump vec2 v_tex;\nvoid main(void) {\nlowp vec4 color = texture2D(u_texture, v_tex);\ngl_FragColor = 0.75 * color;\n}","tileInfo.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_coord_ratio;\nuniform mediump vec2 u_delta;\nuniform mediump vec2 u_dimensions;\nvarying mediump vec2 v_tex;\nvoid main() {\nmediump vec2 offset = u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\nvec3 v_pos = u_dvsMat3 * vec3(offset, 1.0);\ngl_Position = vec4(v_pos.xy, 0.0, 1.0);\nv_tex = a_pos;\n}"},util:{"encoding.glsl":"const vec4 rgba2float_factors = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}"}});var a=new r.a((function(t){var e=i;return t.split("/").forEach((function(t){e&&(e=e[t])})),e}));function o(t){return a.resolveIncludes(t)}},NAae:function(t,e,n){"use strict";var r=n("hisu"),i=n("yBJb"),a=n("CHlC"),o=n("kMo5"),s=n("P+uj"),u=n("T645"),c=n("a1c8"),l=(n("iwTS"),n("J4Pc"),n("B2Uc"),n("cY28"),n("IxxH"),n("j92Z")),f=n("0fR5"),h=n("H8zE"),v=n("pt9v"),d=n("/zE3"),m=n("JrL/"),p={shaders:{vertexShader:Object(m.a)("tileInfo/tileInfo.vert"),fragmentShader:Object(m.a)("tileInfo/tileInfo.frag")},attributes:new Map([["a_pos",0]])};function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var y=function(t){Object(a.a)(n,t);var e=_(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._color=Object(u.a)(1,0,0,1),t}return Object(i.a)(n,[{key:"dispose",value:function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null),this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null),this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null),this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null),this._canvas=null}},{key:"prepareState",value:function(t){var e=t.context;e.setBlendingEnabled(!0),e.setBlendFunctionSeparate(1,771,1,771),e.setColorMask(!0,!0,!0,!0),e.setStencilWriteMask(0),e.setStencilTestEnabled(!1)}},{key:"draw",value:function(t,e){var n=t.context;if(e.isReady){this._loadWGLResources(n),n.bindVAO(this._outlineVertexArrayObject),n.useProgram(this._outlineProgram),this._outlineProgram.setUniformMatrix3fv("u_dvsMat3",e.transforms.dvs),this._outlineProgram.setUniform2f("u_coord_range",e.coordRange[0],e.coordRange[1]),this._outlineProgram.setUniform1f("u_depth",0),this._outlineProgram.setUniform4fv("u_color",this._color),n.drawArrays(3,0,4),n.bindVAO();var r=this._getTexture(n,e);r&&(n.bindVAO(this._tileInfoVertexArrayObject),n.useProgram(this._tileInfoProgram),n.bindTexture(r,0),this._tileInfoProgram.setUniformMatrix3fv("u_dvsMat3",e.transforms.dvs),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform2f("u_coord_ratio",e.coordRange[0]/e.size[0],e.coordRange[1]/e.size[1]),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",r.descriptor.width,r.descriptor.height),n.drawArrays(5,0,4),n.bindVAO())}}},{key:"_loadWGLResources",value:function(t){if(!this._outlineProgram||!this._tileInfoProgram){var e=Object(l.a)(t,d.a),n=Object(l.a)(t,p),r={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},i=new Int8Array([0,0,1,0,1,1,0,1]),a=c.a.createVertex(t,35044,i),o=new h.a(t,d.a.attributes,r,{geometry:a}),s=new Int8Array([0,0,1,0,0,1,1,1]),u=c.a.createVertex(t,35044,s),f=new h.a(t,p.attributes,r,{geometry:u});this._outlineProgram=e,this._tileInfoProgram=n,this._outlineVertexArrayObject=o,this._tileInfoVertexArrayObject=f}}},{key:"_getTexture",value:function(t,e){if(e.texture&&e.triangleCountReportedInDebug===e.triangleCount)return e.texture;e.triangleCountReportedInDebug=e.triangleCount,this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","".concat(300)),this._canvas.setAttribute("height","".concat(32)),this._canvas.setAttribute("style","display:none"));var n=e.triangleCount,r=e.key.id;e.triangleCount>0&&(r+=", ".concat(n));var i=this._canvas,a=i.getContext("2d");return a.font="24px sans-serif",a.textAlign="left",a.textBaseline="top",a.clearRect(0,0,300,32),n>1e5?(a.fillStyle="red",a.fillRect(0,0,300,32),a.fillStyle="black"):(a.clearRect(0,0,300,32),a.fillStyle="blue"),a.fillText(r,0,0),e.texture=new f.a(t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071},i),e.texture}}]),n}(v.a);e.a=y},PmOk:function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return R})),n.d(e,"e",(function(){return D})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return M})),n.d(e,"h",(function(){return C})),n.d(e,"i",(function(){return w})),n.d(e,"j",(function(){return k})),n.d(e,"k",(function(){return s})),n.d(e,"l",(function(){return S})),n.d(e,"m",(function(){return L})),n.d(e,"n",(function(){return r})),n.d(e,"o",(function(){return E})),n.d(e,"p",(function(){return i})),n.d(e,"q",(function(){return I})),n.d(e,"r",(function(){return v})),n.d(e,"s",(function(){return d})),n.d(e,"t",(function(){return m})),n.d(e,"u",(function(){return p})),n.d(e,"v",(function(){return h})),n.d(e,"w",(function(){return f})),n.d(e,"x",(function(){return _})),n.d(e,"y",(function(){return y})),n.d(e,"z",(function(){return g})),n.d(e,"A",(function(){return b})),n.d(e,"B",(function(){return l})),n.d(e,"C",(function(){return u})),n.d(e,"D",(function(){return P})),n.d(e,"E",(function(){return a})),n.d(e,"F",(function(){return A})),n.d(e,"G",(function(){return j})),n.d(e,"H",(function(){return T}));var r=1e-30,i=4294967295,a=512,o=8,s=29,u=8,c={metrics:{width:15,height:17,left:0,top:-7,advance:14}},l=0,f=0,h=0,v=1,d=2,m=3,p=4,_=5,y=6,g=5,b=6,x=1,O=2,S=2,w=1,C=2,M=4,P=1.05,k=6,T=5,j=6,A=1.15,I=2,D=7,E=500,R=128,L=10},"S6/K":function(t,e,n){"use strict";var r=n("6CzD"),i=n("hisu"),a=n("yBJb"),o=n("GH+e"),s=n("Mp7X"),u=n("0fJP"),c=n("TM+E"),l=n("VB9s"),f=n("AjSt");var h=function(){function t(e,n,r){Object(i.a)(this,t),this.strength=e,this.radius=n,this.threshold=r,this.type="bloom"}return Object(a.a)(t,[{key:"interpolate",value:function(t,e,n){this.strength=y(t.strength,e.strength,n),this.radius=y(t.radius,e.radius,n),this.threshold=y(t.threshold,e.threshold,n)}},{key:"clone",value:function(){return new t(this.strength,this.radius,this.threshold)}}]),t}(),v=function(){function t(e){Object(i.a)(this,t),this.radius=e,this.type="blur"}return Object(a.a)(t,[{key:"interpolate",value:function(t,e,n){this.radius=Math.round(y(t.radius,e.radius,n))}},{key:"clone",value:function(){return new t(this.radius)}}]),t}(),d=function(){function t(e,n){Object(i.a)(this,t),this.type=e,this.amount=n,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}return Object(a.a)(t,[{key:"colorMatrix",get:function(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}},{key:"interpolate",value:function(t,e,n){this.amount=y(t.amount,e.amount,n),this._updateMatrix()}},{key:"clone",value:function(){return new t(this.type,this.amount)}},{key:"_updateMatrix",value:function(){var t,e,n,r=this._colorMatrix||Object(l.a)();switch(this.type){case"brightness":this._colorMatrix=(t=r,e=this.amount,n=Object(f.g)(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1),Object(f.d)(n,n));break;case"contrast":this._colorMatrix=function(t,e){var n=Object(f.g)(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Object(f.d)(n,n)}(r,this.amount);break;case"grayscale":this._colorMatrix=function(t,e){var n=1-e,r=Object(f.g)(t,.2126+.7874*n,.7152-.7152*n,.0722-.0722*n,0,.2126-.2126*n,.7152+.2848*n,.0722-.0722*n,0,.2126-.2126*n,.7152-.7152*n,.0722+.9278*n,0,0,0,0,1);return Object(f.d)(r,r)}(r,this.amount);break;case"invert":this._colorMatrix=function(t,e){var n=1-2*e,r=Object(f.g)(t,n,0,0,e,0,n,0,e,0,0,n,e,0,0,0,1);return Object(f.d)(r,r)}(r,this.amount);break;case"saturate":this._colorMatrix=function(t,e){var n=Object(f.g)(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Object(f.d)(n,n)}(r,this.amount);break;case"sepia":this._colorMatrix=function(t,e){var n=1-e,r=Object(f.g)(t,.393+.607*n,.769-.769*n,.189-.189*n,0,.349-.349*n,.686+.314*n,.168-.168*n,0,.272-.272*n,.534-.534*n,.131+.869*n,0,0,0,0,1);return Object(f.d)(r,r)}(r,this.amount)}}}]),t}(),m=function(){function t(e,n,r,a){Object(i.a)(this,t),this.offsetX=e,this.offsetY=n,this.blurRadius=r,this.color=a,this.type="drop-shadow"}return Object(a.a)(t,[{key:"interpolate",value:function(t,e,n){this.offsetX=y(t.offsetX,e.offsetX,n),this.offsetY=y(t.offsetY,e.offsetY,n),this.blurRadius=y(t.blurRadius,e.blurRadius,n),this.color[0]=Math.round(y(t.color[0],e.color[0],n)),this.color[1]=Math.round(y(t.color[1],e.color[1],n)),this.color[2]=Math.round(y(t.color[2],e.color[2],n)),this.color[3]=y(t.color[3],e.color[3],n)}},{key:"clone",value:function(){return new t(this.offsetX,this.offsetY,this.blurRadius,Object(r.a)(this.color))}}]),t}(),p=function(){function t(e){Object(i.a)(this,t),this.angle=e,this.type="hue-rotate"}return Object(a.a)(t,[{key:"colorMatrix",get:function(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}},{key:"interpolate",value:function(t,e,n){this.angle=y(t.angle,e.angle,n),this._updateMatrix()}},{key:"clone",value:function(){return new t(this.angle)}},{key:"_updateMatrix",value:function(){var t=this._colorMatrix||Object(l.a)();this._colorMatrix=function(t,e){var n=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),i=Object(f.g)(t,.213+.787*r-.213*n,.715-.715*r-.715*n,.072-.072*r+.928*n,0,.213-.213*r+.143*n,.715+.285*r+.14*n,.072-.072*r-.283*n,0,.213-.213*r-.787*n,.715-.715*r+.715*n,.072+.928*r+.072*n,0,0,0,0,1);return Object(f.d)(i,i)}(t,this.angle)}}]),t}(),_=function(){function t(e){Object(i.a)(this,t),this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}return Object(a.a)(t,[{key:"interpolate",value:function(t,e,n){this.amount=y(t.amount,e.amount,n)}},{key:"clone",value:function(){return new t(this.amount)}}]),t}();function y(t,e,n){return t+(e-t)*n}n("zc/w");function g(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var x,O,S={exports:{}};function w(t){var e;try{e=t?S.exports.parse(t):[]}catch(o){return{input:t,parsedFunctions:[],effects:[],error:new s.a("effect:invalid-syntax","Invalid effect syntax",{input:t,error:o})}}var n={input:t,parsedFunctions:e,effects:[],error:null};try{var r,i=g(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.effects.push(C(a))}}catch(u){i.e(u)}finally{i.f()}}catch(o){n.effects.length=0,n.error=o}return n}function C(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(t){var e=1;return M(t.parameters,1),1===t.parameters.length&&(e=A(t.parameters[0])),new d(t.name,e)}(t);case"opacity":return function(t){var e=1;return M(t.parameters,1),1===t.parameters.length&&(e=A(t.parameters[0])),new _(e)}(t);case"hue-rotate":return function(t){var e=0;return M(t.parameters,1),1===t.parameters.length&&(e=function(t){return function(t){if("quantity"!==t.type||(0!==t.value||null!==t.unit)&&null==T[t.unit])throw new s.a("effect:type-error","Expected <angle>, Actual: ".concat(P(t)),{term:t})}(t),t.value*T[t.unit]||0}(t.parameters[0])),new p(e)}(t);case"blur":return function(t){var e=0;return M(t.parameters,1),1===t.parameters.length&&k(e=D(t.parameters[0]),t.parameters[0]),new v(e)}(t);case"drop-shadow":return function(t){var e,n,r=[],i=g(t.parameters);try{for(i.s();!(n=i.n()).done;){var a=n.value;if("color"===a.type){if(r.length&&Object.freeze(r),e)throw new s.a("effect:type-error","Accepts only one color",{});e=E(a)}else{var o=D(a);if(Object.isFrozen(r))throw new s.a("effect:type-error","<length> parameters not consecutive",{lengths:r});r.push(o),3===r.length&&k(o,a)}}}catch(u){i.e(u)}finally{i.f()}if(r.length<2||r.length>3)throw new s.a("effect:type-error","Expected <length>{2,3}, Actual: <length>{".concat(r.length,"}"),{lengths:r});return new m(r[0],r[1],r[2]||0,e||R("black"))}(t);case"bloom":return function(t){var e=1,n=0,r=0;return M(t.parameters,3),t.parameters[0]&&(e=A(t.parameters[0])),t.parameters[1]&&k(n=D(t.parameters[1]),t.parameters[1]),t.parameters[2]&&(r=A(t.parameters[2])),new h(e,n,r)}(t)}}catch(e){throw e.details.filter=t,e}throw new s.a("effect:unknown-effect","Effect '".concat(t.name,"' is not supported"),{effect:t})}function M(t,e){if(t.length>e)throw new s.a("effect:type-error","Function supports up to ".concat(e," parameters, Actual: ").concat(t.length),{parameters:t})}function P(t){return"color"===t.type?"<color>":j[t.unit]?"<length>":T[t.unit]?"<angle>":"%"===t.unit?"<percentage>":"<double>"}function k(t,e){if(t<0)throw new s.a("effect:type-error","Negative values are not allowed, Actual: ".concat(t),{term:e})}O=function(){function t(e,n,r,i){this.message=e,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(t,Error),t.buildMessage=function(t,e){var n={literal:function(t){return'"'+i(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?a(t.parts[e][0])+"-"+a(t.parts[e][1]):a(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function i(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function o(t){return n[t.type](t)}return"Expected "+function(t){var e,n,r=new Array(t.length);for(e=0;e<t.length;e++)r[e]=o(t[e]);if(r.sort(),r.length>0){for(e=1,n=1;e<r.length;e++)r[e-1]!==r[e]&&(r[n]=r[e],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+i(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:function(e,n){n=void 0!==n?n:{};var r,i={},a={start:at},o=at,s=et("none"),u="none",c=Q("none",!1),l=Q(")",!1),f=Q(",",!1),h=function(t,e){return e.length>0?function(t,e,n){return[t].concat(function(t,e){return t.map((function(t){return t[e]}))}(e,n))}(t,e,3):[t]},v=et("whitespace"),d=/^[ \t\n\r]/,m=tt([" ","\t","\n","\r"],!1,!1),p=et("function"),_=Q("(",!1),y=et("identifier"),g=/^[a-z\-]/,b=tt([["a","z"],"-"],!1,!1),x=et("percentage"),O=Q("%",!1),S=et("length"),w=Q("px",!1),C=Q("cm",!1),M=Q("mm",!1),P=Q("in",!1),k=Q("pt",!1),T=Q("pc",!1),j=et("angle"),A=Q("deg",!1),I=Q("rad",!1),D=Q("grad",!1),E=Q("turn",!1),R=et("number"),L=et("color"),V=Q("#",!1),z=/^[0-9a-fA-F]/,U=tt([["0","9"],["a","f"],["A","F"]],!1,!1),F=/^[+\-]/,N=tt(["+","-"],!1,!1),Y=/^[0-9]/,B=tt([["0","9"]],!1,!1),G=Q(".",!1),H=Q("e",!1),W=0,Z=0,X=[{line:1,column:1}],q=0,J=[],K=0;if("startRule"in n){if(!(n.startRule in a))throw new Error("Can't start parsing from rule \""+n.startRule+'".');o=a[n.startRule]}function $(){return e.substring(Z,W)}function Q(t,e){return{type:"literal",text:t,ignoreCase:e}}function tt(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function et(t){return{type:"other",description:t}}function nt(t){var n,r=X[t];if(r)return r;for(n=t-1;!X[n];)n--;for(r={line:(r=X[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return X[t]=r,r}function rt(t,e){var n=nt(t),r=nt(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function it(t){W<q||(W>q&&(q=W,J=[]),J.push(t))}function at(){var t;return(t=ot())===i&&(t=function(){var t,e;if(t=[],(e=st())!==i)for(;e!==i;)t.push(e),e=st();else t=i;return t}()),t}function ot(){var t,n;return K++,t=W,ct()!==i?(e.substr(W,4)===u?(n=u,W+=4):(n=i,0===K&&it(c)),n!==i&&ct()!==i?(Z=t,t=[]):(W=t,t=i)):(W=t,t=i),K--,t===i&&0===K&&it(s),t}function st(){var t,n,r,a;return t=W,ct()!==i&&(n=function(){var t,n,r;return K++,t=W,(n=lt())!==i?(40===e.charCodeAt(W)?(r="(",W++):(r=i,0===K&&it(_)),r!==i?(Z=t,t=n=n):(W=t,t=i)):(W=t,t=i),K--,t===i&&(n=i,0===K&&it(p)),t}())!==i&&ct()!==i?((r=function(){var t,n,r,a,o,s,u,c;if(t=W,(n=ut())!==i){for(r=[],a=W,(o=ct())!==i?(44===e.charCodeAt(W)?(s=",",W++):(s=i,0===K&&it(f)),s===i&&(s=null),s!==i&&(u=ct())!==i&&(c=ut())!==i?a=o=[o,s,u,c]:(W=a,a=i)):(W=a,a=i);a!==i;)r.push(a),a=W,(o=ct())!==i?(44===e.charCodeAt(W)?(s=",",W++):(s=i,0===K&&it(f)),s===i&&(s=null),s!==i&&(u=ct())!==i&&(c=ut())!==i?a=o=[o,s,u,c]:(W=a,a=i)):(W=a,a=i);r!==i?(Z=t,t=n=h(n,r)):(W=t,t=i)}else W=t,t=i;return t}())===i&&(r=null),r!==i&&ct()!==i?(41===e.charCodeAt(W)?(a=")",W++):(a=i,0===K&&it(l)),a!==i&&ct()!==i?(Z=t,t=function(t,e){return{type:"function",name:t,parameters:e||[]}}(n,r)):(W=t,t=i)):(W=t,t=i)):(W=t,t=i),t}function ut(){var t,e;return t=W,(e=ft())===i&&(e=ht())===i&&(e=vt())===i&&(e=function(){var t,e;return K++,t=W,ct()!==i&&(e=mt())!==i?(Z=t,t=function(t){return{value:t,unit:null}}(e)):(W=t,t=i),K--,t===i&&0===K&&it(R),t}()),e!==i&&(Z=t,e=function(t){return{type:"quantity",value:t.value,unit:t.unit}}(e)),(t=e)===i&&(t=W,(e=dt())!==i&&(Z=t,e=function(t){return{type:"color",colorType:t.type,value:t.value}}(e)),t=e),t}function ct(){var t,n;for(K++,t=[],d.test(e.charAt(W))?(n=e.charAt(W),W++):(n=i,0===K&&it(m));n!==i;)t.push(n),d.test(e.charAt(W))?(n=e.charAt(W),W++):(n=i,0===K&&it(m));return K--,t===i&&(n=i,0===K&&it(v)),t}function lt(){var t,n,r;if(K++,t=W,n=[],g.test(e.charAt(W))?(r=e.charAt(W),W++):(r=i,0===K&&it(b)),r!==i)for(;r!==i;)n.push(r),g.test(e.charAt(W))?(r=e.charAt(W),W++):(r=i,0===K&&it(b));else n=i;return n!==i&&(Z=t,n=$()),K--,(t=n)===i&&(n=i,0===K&&it(y)),t}function ft(){var t,n,r;return K++,t=W,ct()!==i&&(n=mt())!==i?(37===e.charCodeAt(W)?(r="%",W++):(r=i,0===K&&it(O)),r!==i?(Z=t,t=function(t){return{value:t,unit:"%"}}(n)):(W=t,t=i)):(W=t,t=i),K--,t===i&&0===K&&it(x),t}function ht(){var t,n,r;return K++,t=W,ct()!==i&&(n=mt())!==i?("px"===e.substr(W,2)?(r="px",W+=2):(r=i,0===K&&it(w)),r!==i?(Z=t,t=function(t){return{value:t,unit:"px"}}(n)):(W=t,t=i)):(W=t,t=i),t===i&&(t=W,ct()!==i&&(n=mt())!==i?("cm"===e.substr(W,2)?(r="cm",W+=2):(r=i,0===K&&it(C)),r!==i?(Z=t,t=function(t){return{value:t,unit:"cm"}}(n)):(W=t,t=i)):(W=t,t=i),t===i&&(t=W,ct()!==i&&(n=mt())!==i?("mm"===e.substr(W,2)?(r="mm",W+=2):(r=i,0===K&&it(M)),r!==i?(Z=t,t=function(t){return{value:t,unit:"mm"}}(n)):(W=t,t=i)):(W=t,t=i),t===i&&(t=W,ct()!==i&&(n=mt())!==i?("in"===e.substr(W,2)?(r="in",W+=2):(r=i,0===K&&it(P)),r!==i?(Z=t,t=function(t){return{value:t,unit:"in"}}(n)):(W=t,t=i)):(W=t,t=i),t===i&&(t=W,ct()!==i&&(n=mt())!==i?("pt"===e.substr(W,2)?(r="pt",W+=2):(r=i,0===K&&it(k)),r!==i?(Z=t,t=function(t){return{value:t,unit:"pt"}}(n)):(W=t,t=i)):(W=t,t=i),t===i&&(t=W,ct()!==i&&(n=mt())!==i?("pc"===e.substr(W,2)?(r="pc",W+=2):(r=i,0===K&&it(T)),r!==i?(Z=t,t=function(t){return{value:t,unit:"pc"}}(n)):(W=t,t=i)):(W=t,t=i)))))),K--,t===i&&0===K&&it(S),t}function vt(){var t,n,r;return K++,t=W,(n=mt())!==i?("deg"===e.substr(W,3)?(r="deg",W+=3):(r=i,0===K&&it(A)),r!==i?(Z=t,t=n=function(t){return{value:t,unit:"deg"}}(n)):(W=t,t=i)):(W=t,t=i),t===i&&(t=W,(n=mt())!==i?("rad"===e.substr(W,3)?(r="rad",W+=3):(r=i,0===K&&it(I)),r!==i?(Z=t,t=n=function(t){return{value:t,unit:"rad"}}(n)):(W=t,t=i)):(W=t,t=i),t===i&&(t=W,(n=mt())!==i?("grad"===e.substr(W,4)?(r="grad",W+=4):(r=i,0===K&&it(D)),r!==i?(Z=t,t=n=function(t){return{value:t,unit:"grad"}}(n)):(W=t,t=i)):(W=t,t=i),t===i&&(t=W,(n=mt())!==i?("turn"===e.substr(W,4)?(r="turn",W+=4):(r=i,0===K&&it(E)),r!==i?(Z=t,t=n=function(t){return{value:t,unit:"turn"}}(n)):(W=t,t=i)):(W=t,t=i)))),K--,t===i&&(n=i,0===K&&it(j)),t}function dt(){var t,n,r,a;if(K++,t=W,35===e.charCodeAt(W)?(n="#",W++):(n=i,0===K&&it(V)),n!==i){if(r=[],z.test(e.charAt(W))?(a=e.charAt(W),W++):(a=i,0===K&&it(U)),a!==i)for(;a!==i;)r.push(a),z.test(e.charAt(W))?(a=e.charAt(W),W++):(a=i,0===K&&it(U));else r=i;r!==i?(Z=t,t=n={type:"hex",value:$()}):(W=t,t=i)}else W=t,t=i;return t===i&&(t=W,(n=st())!==i&&(Z=t,n=function(t){return{type:"function",value:t}}(n)),(t=n)===i&&(t=W,(n=lt())!==i&&(Z=t,n={type:"named",value:$()}),t=n)),K--,t===i&&(n=i,0===K&&it(L)),t}function mt(){var t,n,r,a,o,s,u,c;if(t=W,F.test(e.charAt(W))?(n=e.charAt(W),W++):(n=i,0===K&&it(N)),n===i&&(n=null),n!==i){for(r=W,a=[],Y.test(e.charAt(W))?(o=e.charAt(W),W++):(o=i,0===K&&it(B));o!==i;)a.push(o),Y.test(e.charAt(W))?(o=e.charAt(W),W++):(o=i,0===K&&it(B));if(a!==i)if(46===e.charCodeAt(W)?(o=".",W++):(o=i,0===K&&it(G)),o!==i){if(s=[],Y.test(e.charAt(W))?(u=e.charAt(W),W++):(u=i,0===K&&it(B)),u!==i)for(;u!==i;)s.push(u),Y.test(e.charAt(W))?(u=e.charAt(W),W++):(u=i,0===K&&it(B));else s=i;s!==i?r=a=[a,o,s]:(W=r,r=i)}else W=r,r=i;else W=r,r=i;if(r===i)if(r=[],Y.test(e.charAt(W))?(a=e.charAt(W),W++):(a=i,0===K&&it(B)),a!==i)for(;a!==i;)r.push(a),Y.test(e.charAt(W))?(a=e.charAt(W),W++):(a=i,0===K&&it(B));else r=i;if(r!==i){if(a=W,101===e.charCodeAt(W)?(o="e",W++):(o=i,0===K&&it(H)),o!==i)if(F.test(e.charAt(W))?(s=e.charAt(W),W++):(s=i,0===K&&it(N)),s===i&&(s=null),s!==i){if(u=[],Y.test(e.charAt(W))?(c=e.charAt(W),W++):(c=i,0===K&&it(B)),c!==i)for(;c!==i;)u.push(c),Y.test(e.charAt(W))?(c=e.charAt(W),W++):(c=i,0===K&&it(B));else u=i;u!==i?a=o=[o,s,u]:(W=a,a=i)}else W=a,a=i;else W=a,a=i;a===i&&(a=null),a!==i?(Z=t,t=n=parseFloat($())):(W=t,t=i)}else W=t,t=i}else W=t,t=i;return t}if((r=o())!==i&&W===e.length)return r;throw r!==i&&W<e.length&&it({type:"end"}),function(e,n,r){return new t(t.buildMessage(e,n),e,n,r)}(J,q<e.length?e.charAt(q):null,q<e.length?rt(q,q+1):rt(q,q))}}},(x=S).exports&&(x.exports=O());var T={deg:1,grad:.9,rad:180/Math.PI,turn:360};var j={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/73};function A(t){!function(t){if("quantity"!==t.type||null!==t.unit&&"%"!==t.unit)throw new s.a("effect:type-error","Expected <double> or <percentage>, Actual: ".concat(P(t)),{term:t})}(t);var e=t.value;return k(e,t),"%"===t.unit?.01*e:e}function I(t){return function(t){if("quantity"!==t.type||null!==t.unit)throw new s.a("effect:type-error","Expected <double>, Actual: ".concat(P(t)),{term:t})}(t),k(t.value,t),t.value}function D(t){return function(t){if("quantity"!==t.type||(0!==t.value||null!==t.unit)&&null==j[t.unit])throw new s.a("effect:type-error","Expected <length>, Actual: ".concat(P(t)),{term:t})}(t),t.value*j[t.unit]||0}function E(t){switch(t.colorType){case"hex":return Object(o.c)(t.value);case"named":return R(t.value);case"function":return function(t){if(M(t.parameters,4),L.test(t.name))return[A(t.parameters[0]),A(t.parameters[1]),A(t.parameters[2]),t.parameters[3]?A(t.parameters[3]):1];if(V.test(t.name))return Object(o.d)(I(t.parameters[0]),A(t.parameters[1]),A(t.parameters[2]),t.parameters[3]?A(t.parameters[3]):1);throw new s.a("effect:syntax-error","Invalid color function '".concat(t.name,"'"),{colorFunction:t})}(t.value)}}function R(t){var e=Object(o.b)(t);if(!e)throw new s.a("effect:unknown-color","color '".concat(t,"' isn't valid"),{namedColor:t});return e}var L=/^rgba?/i,V=/^hsla?/i;function z(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var F=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;Object(i.a)(this,t),this.duration=e,this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this._effect="",this._effects=[],this._scale=0}return Object(a.a)(t,[{key:"effect",get:function(){return this._effect},set:function(t){if(t=t||"",this._effect!==t){this._effect=t;var e=function(t){if(!t)return[];if("string"==typeof t){var e=w(t);return e.error?e.error:[{scale:-1,effects:e.effects}]}var n,r=[],i=z(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(!isFinite(a.scale)||a.scale<=0)return new s.a("effect:invalid-scale","scale must be finite and greater than 0",{stop:a});var o=w(a.value);if(o.error)return o.error;r.push({scale:a.scale,effects:o.effects})}}catch(c){i.e(c)}finally{i.f()}r.sort((function(t,e){return e.effects.length-t.effects.length}));for(var u=0;u<r.length-1;u++){if(!Y(r[u].effects,r[u+1].effects))return new s.a("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:r[u].effects,b:r[u+1].effects});B(r[u].effects,r[u+1].effects)}return r.sort((function(t,e){return e.scale-t.scale})),r}(t);Array.isArray(e)?this._transitionTo(e):(this._transitionTo([]),c.a.getLogger("esri.views.layers.effects.EffectList").warn("Invalid Effect",{effect:t,error:e}))}}},{key:"hasEffects",get:function(){return this.transitioning||!!this._effects.length}},{key:"effects",get:function(){return this._effects}},{key:"scale",get:function(){return this._scale}},{key:"transitioning",get:function(){return null!==this._to}},{key:"transitionStep",value:function(t,e){this._applyTimeTransition(t),this._updateForScale(e)}},{key:"_transitionTo",value:function(t){this.scale>0&&function(t,e,n){var r,i,a,o;return null==(r=t[0])||!r.effects||null==(i=e[0])||!i.effects||!((-1===(null==(a=t[0])?void 0:a.scale)||-1===(null==(o=e[0])?void 0:o.scale))&&(t.length>1||e.length>1)&&n<=0)&&Y(t[0].effects,e[0].effects)}(this._current,t,this.scale)?(this._final=t,this._to=Object(u.a)(t),function(t,e,n){for(var i,a,o=t.length>e.length?t:e,s=t.length>e.length?e:t,u=s[s.length-1],c=null!=(i=null==u?void 0:u.scale)?i:n,l=null!=(a=null==u?void 0:u.effects)?a:[],f=s.length;f<o.length;f++)s.push({scale:c,effects:Object(r.a)(l)});for(var h=0;h<o.length;h++)s[h].scale=-1===s[h].scale?n:s[h].scale,o[h].scale=-1===o[h].scale?n:o[h].scale,B(s[h].effects,o[h].effects)}(this._current,this._to,this.scale),this._from=Object(u.a)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._effects=this._current[0]?Object(u.a)(this._current[0].effects):[]}},{key:"_applyTimeTransition",value:function(t){if(this._to){this._time+=t;for(var e=Math.min(1,this._time/this.duration),n=0;n<this._current.length;n++){var r=this._current[n],i=this._from[n],a=this._to[n];r.scale=G(i.scale,a.scale,e);for(var o=0;o<r.effects.length;o++){var s=r.effects[o],c=i.effects[o],l=a.effects[o];s.interpolate(c,l,e)}}1===e&&(this._current=this._final,this._effects=this._current[0]?Object(u.a)(this._current[0].effects):[],this._from=this._to=this._final=null)}}},{key:"_updateForScale",value:function(t){if(0!==this._current.length){this._scale=t;var e,n,r=this._current,i=this._current.length-1,a=1;if(1===r.length||t>=r[0].scale)n=e=r[0].effects;else if(t<=r[i].scale)n=e=r[i].effects;else for(var o=0;o<i;o++){var s=r[o],u=r[o+1];if(s.scale>=t&&u.scale<=t){a=(t-s.scale)/(u.scale-s.scale),e=s.effects,n=u.effects;break}}for(var c=0;c<this._effects.length;c++)this._effects[c].interpolate(e[c],n[c],a)}}}]),t}();function N(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new d(t.type,0);case"saturate":case"brightness":case"contrast":return new d(t.type,1);case"opacity":return new _(1);case"hue-rotate":return new p(0);case"blur":return new v(0);case"drop-shadow":return new m(0,0,0,Object(r.a)(Object(o.a)("transparent")));case"bloom":return new h(0,0,0)}}function Y(t,e){var n=t.length>e.length?t:e;return(t.length>e.length?e:t).every((function(t,e){return t.type===n[e].type}))}function B(t,e){for(var n=t.length>e.length?t:e,r=t.length>e.length?e:t,i=r.length;i<n.length;i++)r.push(N(n[i]))}function G(t,e,n){return t+(e-t)*n}e.a=F},T645:function(t,e,n){"use strict";function r(){return new Float32Array(4)}function i(t,e,n,r){var i=new Float32Array(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function a(){return r()}function o(){return i(1,1,1,1)}function s(){return i(1,0,0,0)}function u(){return i(0,1,0,0)}function c(){return i(0,0,1,0)}function l(){return i(0,0,0,1)}n.d(e,"a",(function(){return i}));var f=a(),h=o(),v=s(),d=u(),m=c(),p=l();Object.freeze({__proto__:null,create:r,clone:function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},fromValues:i,createView:function(t,e){return new Float32Array(t,e,4)},zeros:a,ones:o,unitX:s,unitY:u,unitZ:c,unitW:l,ZEROS:f,ONES:h,UNIT_X:v,UNIT_Y:d,UNIT_Z:m,UNIT_W:p})},UP7e:function(t,e,n){"use strict";var r=n("mK0O"),i=n("hisu"),a=n("yBJb"),o=n("4Mpa"),s=n("CHlC"),u=n("kMo5"),c=n("P+uj"),l=(n("J4Pc"),n("7im+")),f=n("gj5F"),h=n("x8wo"),v=n("aNYv"),d=n("Mp7X"),m=n("TM+E"),p=n("PFYi"),_=n("F6Re"),y=n("EOw0"),g=n("MJqN"),b=n("4WE2"),x=n("4zgH"),O=n("yzGw"),S=n("a1c8");function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function M(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var k=m.a.getLogger("esri.views.2d.engine.webgl.Mesh2D"),T=function(t,e,n,r){for(var i=0,a=1;a<n;a++){var o=t[2*(e+a-1)],s=t[2*(e+a-1)+1];i+=(t[2*(e+a)]-o)*(t[2*(e+a)+1]+s)}return r?i>0:i<0},j=function(t,e){for(var n=t.coords,r=t.lengths,i=[],a=0,o=0;a<r.length;o+=r[a],a+=1){for(var s=o,u=[];a<r.length-1&&T(n,o+r[a],r[a+1],e);o+=r[a+=1])u.push(o+r[a]-s);var c,l=n.slice(2*s,2*(o+r[a])),f=M(Object(_.a)(l,u,2));try{for(f.s();!(c=f.n()).done;){var h=c.value;i.push(h+s)}}catch(v){f.e(v)}finally{f.f()}}return i},A=function(){function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(i.a)(this,t),this._cache={},this.vertices=e,this.indices=n,this.primitiveType=r,this.isMapSpace=a}return Object(a.a)(t,[{key:"destroy",value:function(){for(var t in Object(l.i)(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose(),this._cache.vertexBuffers)Object(l.i)(this._cache.vertexBuffers[t])&&this._cache.vertexBuffers[t].dispose()}},{key:"elementType",get:function(){return function(t){switch(t.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new d.a("Cannot get DataType of array")}}(this.indices)}},{key:"getIndexBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35044;return this._cache.indexBuffer||(this._cache.indexBuffer=S.a.createIndex(t,e,this.indices)),this._cache.indexBuffer}},{key:"getVertexBuffers",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35044;return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce((function(i,a){return C(C({},i),{},Object(r.a)({},a,S.a.createVertex(t,n,e.vertices[a])))}),{})),this._cache.vertexBuffers}}],[{key:"fromRect",value:function(e){var n=e.x,r=e.y,i=n+e.width,a=r+e.height;return t.fromScreenExtent({xmin:n,ymin:r,xmax:i,ymax:a})}},{key:"fromPath",value:function(e){for(var n=Object(b.f)(new x.a,e.path,!1,!1),r=n.coords,i=new Uint32Array(j(n,!0)),a=new Uint32Array(r.length/2),o=0;o<a.length;o++)a[o]=Object(O.a)(Math.floor(r[2*o]),Math.floor(r[2*o+1]));return new t({geometry:a},i,4)}},{key:"fromGeometry",value:function(e,n){var r=n.geometry.type;switch(r){case"polygon":return t.fromPolygon(e,n.geometry);case"extent":return t.fromMapExtent(e,n.geometry);default:return k.error(new d.a("mapview-bad-type","Unable to create a mesh from type ".concat(r),n)),t.fromRect({x:0,y:0,width:1,height:1})}}},{key:"fromPolygon",value:function(e,n){for(var r=Object(b.g)(new x.a,n,!1,!1),i=r.coords,a=new Uint32Array(j(r,!1)),o=new Uint32Array(i.length/2),s=Object(g.a)(),u=Object(g.a)(),c=0;c<o.length;c++)Object(y.m)(s,i[2*c],i[2*c+1]),e.toScreen(u,s),o[c]=Object(O.a)(Math.floor(u[0]),Math.floor(u[1]));return new t({geometry:o},a,4,!0)}},{key:"fromScreenExtent",value:function(e){var n=e.xmin,r=e.xmax,i=e.ymin,a=e.ymax;return new t({geometry:new Uint32Array([Object(O.a)(n,i),Object(O.a)(r,i),Object(O.a)(n,a),Object(O.a)(n,a),Object(O.a)(r,i),Object(O.a)(r,a)])},new Uint32Array([0,1,2,3,4,5]),4)}},{key:"fromMapExtent",value:function(e,n){var r=e.toScreen([0,0],[n.xmin,n.ymin]),i=Object(v.a)(r,2),a=i[0],o=i[1],s=e.toScreen([0,0],[n.xmax,n.ymax]),u=Object(v.a)(s,2),c=u[0],l=u[1];return new t({geometry:new Uint32Array([Object(O.a)(a,o),Object(O.a)(c,o),Object(O.a)(a,l),Object(O.a)(a,l),Object(O.a)(c,o),Object(O.a)(c,l)])},new Uint32Array([0,1,2,3,4,5]),4)}}]),t}(),I=n("H8zE");function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var E=m.a.getLogger("esri.views.2d.engine.webgl.ClippingInfo"),R=function(t){return parseFloat(t)/100},L=function(t){Object(s.a)(n,t);var e=D(n);function n(t,r){var a;return Object(i.a)(this,n),(a=e.call(this))._clip=r,a._cache={},a.stage=t,a._handle=r.watch("version",(function(){return a._invalidate()})),a.ready(),a}return Object(a.a)(n,[{key:"_destroyGL",value:function(){Object(l.i)(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),Object(l.i)(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}},{key:"destroy",value:function(){this._destroyGL(),this._handle.remove()}},{key:"getVAO",value:function(t,e,n,r){var i=Object(v.a)(e.size,2),a=i[0],o=i[1];if("geometry"!==this._clip.type&&this._lastWidth===a&&this._lastHeight===o||(this._lastWidth=a,this._lastHeight=o,this._destroyGL()),Object(l.h)(this._cache.vao)){var s=this._createMesh(e,this._clip),u=s.getIndexBuffer(t),c=s.getVertexBuffers(t);this._cache.mesh=s,this._cache.vao=new I.a(t,n,r,c,u)}return this._cache.vao}},{key:"_invalidate",value:function(){this._destroyGL(),this.requestRender()}},{key:"_createScreenRect",value:function(t,e){var n=Object(v.a)(t.size,2),r=n[0],i=n[1],a="string"==typeof e.left?R(e.left)*r:e.left,o="string"==typeof e.right?R(e.right)*r:e.right,s="string"==typeof e.top?R(e.top)*i:e.top,u="string"==typeof e.bottom?R(e.bottom)*i:e.bottom,c=a,l=s;return{x:c,y:l,width:Math.max(r-o-c,0),height:Math.max(i-u-l,0)}}},{key:"_createMesh",value:function(t,e){switch(e.type){case"rect":return A.fromRect(this._createScreenRect(t,e));case"path":return A.fromPath(e);case"geometry":return A.fromGeometry(t,e);default:return E.error(new d.a("mapview-bad-type","Unable to create ClippingInfo mesh from clip of type: ${clip.type}")),A.fromRect({x:0,y:0,width:1,height:1})}}}],[{key:"fromClipArea",value:function(t,e){return new n(t,e)}}]),n}(p.a),V=n("FNqF");function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var B=function(t){Object(s.a)(n,t);var e=Y(n);function n(){var t;return Object(i.a)(this,n),(t=e.apply(this,arguments)).name=t.constructor.name,t}return Object(a.a)(n,[{key:"clips",set:function(t){this._clips=t,this.children.forEach((function(e){return e.clips=t})),this._updateClippingInfo()}},{key:"doRender",value:function(t){var e=this.createRenderParams(t),n=e.painter,r=e.globalOpacity,i=e.profiler,a=e.drawPhase===V.c.LABEL?1:r*this.computedOpacity;i.recordContainerStart(this.name),n.beforeRenderLayer(e,this._clippingInfos?255:0,a),this.updateTransforms(t.state),this.renderChildren(e),n.compositeLayer(e,a),i.recordContainerEnd()}},{key:"renderChildren",value:function(t){Object(l.h)(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(t.painter));var e,n=F(this.children);try{for(n.s();!(e=n.n()).done;){e.value.beforeRender(t)}}catch(u){n.e(u)}finally{n.f()}var r,i=F(this._renderPasses);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a.render(t)}catch(c){}}}catch(u){i.e(u)}finally{i.f()}var o,s=F(this.children);try{for(s.s();!(o=s.n()).done;){o.value.afterRender(t)}}catch(u){s.e(u)}finally{s.f()}}},{key:"createRenderParams",value:function(t){return U(U({},t),{},{requireFBO:this.requiresDedicatedFBO})}},{key:"prepareRenderPasses",value:function(t){var e=this;return[t.registerRenderPass({name:"clip",brushes:[f.a.clip],target:function(){return e._clippingInfos},drawPhase:V.c.MAP|V.c.LABEL|V.c.LABEL_ALPHA|V.c.DEBUG|V.c.HIGHLIGHT})]}},{key:"updateTransforms",value:function(t){var e,n=F(this.children);try{for(n.s();!(e=n.n()).done;){e.value.setTransform(t)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onAttach",value:function(){Object(o.a)(Object(c.a)(n.prototype),"onAttach",this).call(this),this._updateClippingInfo()}},{key:"onDetach",value:function(){Object(o.a)(Object(c.a)(n.prototype),"onDetach",this).call(this),this._updateClippingInfo()}},{key:"_updateClippingInfo",value:function(){var t=this;if(Object(l.i)(this._clippingInfos)&&(this._clippingInfos.forEach((function(t){return t.destroy()})),this._clippingInfos=null),this.stage){var e=this._clips;Object(l.i)(e)&&e.length&&(this._clippingInfos=e.items.map((function(e){return L.fromClipArea(t.stage,e)}))),this.requestRender()}}}]),n}(h.a);e.a=B},VB9s:function(t,e,n){"use strict";function r(){var t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}n.d(e,"a",(function(){return r}));var i=r();Object.freeze({__proto__:null,create:r,clone:function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},fromValues:function(t,e,n,r,i,a,o,s,u,c,l,f,h,v,d,m){var p=new Float32Array(16);return p[0]=t,p[1]=e,p[2]=n,p[3]=r,p[4]=i,p[5]=a,p[6]=o,p[7]=s,p[8]=u,p[9]=c,p[10]=l,p[11]=f,p[12]=h,p[13]=v,p[14]=d,p[15]=m,p},createView:function(t,e){return new Float32Array(t,e,16)},IDENTITY:i})},bPf0:function(t,e,n){"use strict";var r=n("hisu"),i=n("yBJb"),a=n("CHlC"),o=n("kMo5"),s=n("P+uj"),u=n("dQW7"),c=n("hZBP"),l=n("v3KF"),f=n("FYmP"),h=n("QSFP"),v=n("TM+E"),d=n("t4nU"),m=n("xAIp"),p=(n("J4Pc"),n("wckI"),n("iaHD"));function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var y=function(t){Object(a.a)(n,t);var e=_(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).layer=null,i.parent=null,i}return Object(i.a)(n,[{key:"initialize",value:function(){var t=this;this.when().catch((function(e){if("layerview:create-error"!==e.name){var n=t.layer&&t.layer.id||"no id",r=t.layer&&t.layer.title||"no title";throw v.a.getLogger(t.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '".concat(r,"', id: '").concat(n,"')"),e),e}}))}},{key:"fullOpacity",get:function(){var t=function(t){return null==t?1:t};return t(this.get("layer.opacity"))*t(this.get("parent.fullOpacity"))}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){return!this.suspended&&!0===this.layer.legendEnabled}},{key:"updating",get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}},{key:"updatingProgress",get:function(){return this.updating?0:1}},{key:"visible",get:function(){return!0===this.get("layer.visible")},set:function(t){void 0!==t?this._override("visible",t):this._clearOverride("visible")}},{key:"canResume",value:function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}},{key:"getSuspendInfo",value:function(){var t=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(t.viewNotReady=!0),this.layer&&this.layer.loaded||(t.layerNotLoaded=!0),this.visible||(t.layerInvisible=!0),t}},{key:"isUpdating",value:function(){return!1}}]),n}(Object(f.b)(Object(h.a)(Object(d.b)(l.a.EventedMixin(c.a)))));Object(u.a)([Object(m.b)()],y.prototype,"fullOpacity",null),Object(u.a)([Object(m.b)()],y.prototype,"layer",void 0),Object(u.a)([Object(m.b)()],y.prototype,"parent",void 0),Object(u.a)([Object(m.b)({readOnly:!0})],y.prototype,"suspended",null),Object(u.a)([Object(m.b)({readOnly:!0})],y.prototype,"suspendInfo",null),Object(u.a)([Object(m.b)({readOnly:!0})],y.prototype,"legendEnabled",null),Object(u.a)([Object(m.b)({type:Boolean,readOnly:!0})],y.prototype,"updating",null),Object(u.a)([Object(m.b)({readOnly:!0})],y.prototype,"updatingProgress",null),Object(u.a)([Object(m.b)()],y.prototype,"visible",null);var g=y=Object(u.a)([Object(p.a)("esri.views.layers.LayerView")],y);e.a=g},bcbt:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r,i,a={exports:{}};r=a,void 0!==(i=function(){function t(n,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-u*l/s+f)),Math.min(a,Math.floor(r+(s-u)*l/s+f)),o)}var h=n[r],v=i,d=a;for(e(n,i,r),o(n[a],h)>0&&e(n,i,a);v<d;){for(e(n,v,d),v++,d--;o(n[v],h)<0;)v++;for(;o(n[d],h)>0;)d--}0===o(n[i],h)?e(n,i,d):e(n,++d,a),d<=r&&(i=d+1),r<=d&&(a=d-1)}}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}return function(e,r,i,a,o){t(e,r,i||0,a||e.length-1,o||n)}}())&&(r.exports=i);var o=a.exports},eHo5:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var r=n("hisu"),i=n("yBJb"),a=(n("J4Pc"),n("7im+")),o=n("B2Uc"),s=n("cY28"),u=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"],c=n("IxxH");function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function v(){var t,e,n,r=0,i=0,a=999,o=[],s=[],u=1,l=0,f=0,v=!1,d=!1,m="";return function(t){return s=[],null!==t?_(t.replace?t.replace(/\r\n/g,"\n"):t):(o.length&&p(o.join("")),a=10,p("(eof)"),s)};function p(t){t.length&&s.push({type:h[a],data:t,position:f,line:u,column:l})}function _(c){var h;for(r=0,n=(m+=c).length;t=m[r],r<n;){switch(h=r,a){case 0:r="/"===t&&"*"===e?(o.push(t),p(o.join("")),a=999,r+1):(o.push(t),e=t,r+1);break;case 1:case 2:r=y();break;case 3:r=g();break;case 4:r="."===t||/[eE]/.test(t)?(o.push(t),a=5,e=t,r+1):"x"===t&&1===o.length&&"0"===o[0]?(a=11,o.push(t),e=t,r+1):/[^\d]/.test(t)?(p(o.join("")),a=999,r):(o.push(t),e=t,r+1);break;case 11:r=/[^a-fA-F0-9]/.test(t)?(p(o.join("")),a=999,r):(o.push(t),e=t,r+1);break;case 5:"f"===t&&(o.push(t),e=t,r+=1),r=/[eE]/.test(t)||"-"===t&&/[eE]/.test(e)?(o.push(t),e=t,r+1):/[^\d]/.test(t)?(p(o.join("")),a=999,r):(o.push(t),e=t,r+1);break;case 9999:r=x();break;case 9:r=/[^\s]/g.test(t)?(p(o.join("")),a=999,r):(o.push(t),e=t,r+1);break;case 999:o=o.length?[]:o,r="/"===e&&"*"===t?(f=i+r-1,a=0,e=t,r+1):"/"===e&&"/"===t?(f=i+r-1,a=1,e=t,r+1):"#"===t?(a=2,f=i+r,r):/\s/.test(t)?(a=9,f=i+r,r):(v=/\d/.test(t),d=/[^\w_]/.test(t),f=i+r,a=v?4:d?3:9999,r)}if(h!==r)switch(m[h]){case"\n":l=0,++u;break;default:++l}}return i+=r,m=m.slice(r),s}function y(){return"\r"!==t&&"\n"!==t||"\\"===e?(o.push(t),e=t,r+1):(p(o.join("")),a=999,r)}function g(){if("."===e&&/\d/.test(t))return a=5,r;if("/"===e&&"*"===t)return a=0,r;if("/"===e&&"/"===t)return a=1,r;if("."===t&&o.length){for(;b(o););return a=5,r}if(";"===t||")"===t||"("===t){if(o.length)for(;b(o););return p(t),a=999,r+1}var n=2===o.length&&"="!==t;if(/[\w_\d\s]/.test(t)||n){for(;b(o););return a=999,r}return o.push(t),e=t,r+1}function b(t){for(var e,n,r=0;;){if(e=c.c.indexOf(t.slice(0,t.length+r).join("")),n=c.c[e],-1===e){if(r--+t.length>0)continue;n=t.slice(0,1).join("")}return p(n),f+=n.length,(o=o.slice(n.length)).length}}function x(){if(/[^\d\w_]/.test(t)){var n=o.join("");return a=c.b.indexOf(n)>-1?8:c.a.indexOf(n)>-1?7:6,p(o.join("")),a=999,r}return o.push(t),e=t,r+1}}function d(t){return function(t){var e=v(),n=[];return(n=n.concat(e(t))).concat(e(null))}(t)}var m=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];function p(t,e){for(var n=e-1;n>=0;n--){var r=t[n];if("whitespace"!==r.type&&"block-comment"!==r.type){if("keyword"!==r.type)break;if("attribute"===r.data||"in"===r.data)return!0}}return!1}function _(t,e,n,r){r=r||n;var i,a=l(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;if("ident"===o.type&&o.data===n)return r in e?e[r]++:e[r]=0,_(t,e,r+"_"+e[r],r)}}catch(s){a.e(s)}finally{a.f()}return n}function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"afterVersion";function r(t,e){for(var n=e;n<t.length;n++){var r=t[n];if("operator"===r.type&&";"===r.data)return n}return null}function i(t){for(var e=-1,i=0,a=-1,o=0;o<t.length;o++){var s=t[o];if("preprocessor"===s.type&&(s.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++i:s.data.match(/\#endif\s*.*/)&&--i),"afterVersion"!==n&&"afterPrecision"!==n||"preprocessor"===s.type&&/^#version/.test(s.data)&&(a=Math.max(a,o)),"afterPrecision"===n&&"keyword"===s.type&&"precision"===s.data){var u=r(t,o);if(null===u)throw new Error("precision statement not followed by any semicolons!");a=Math.max(a,u)}e<a&&0===i&&(e=o)}return e+1}var a={data:"\n",type:"whitespace"},o=function(e){return e<t.length&&/[^\r\n]$/.test(t[e].data)},s=i(t);o(s-1)&&t.splice(s++,0,a);var u,c=l(e);try{for(c.s();!(u=c.n()).done;){var f=u.value;t.splice(s++,0,f)}}catch(h){c.e(h)}finally{c.f()}o(s-1)&&o(s)&&t.splice(s,0,a)}function g(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"lowp";y(t,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"ident",data:e},{type:"operator",data:";"}],"afterPrecision")}function b(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"lowp";y(t,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:r.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:i},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"ident",data:e},{type:"operator",data:";"}],"afterPrecision")}function x(t,e){for(var n,r,i=-1,a=e;a<t.length;a++){var o=t[a];if("operator"===o.type&&("["===o.data&&(n=a),"]"===o.data)){r=a;break}"integer"===o.type&&(i=parseInt(o.data,10))}return n&&r&&t.splice(n,r-n+1),i}function O(t,e){var n=d(t);if("300 es"===function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"300 es",i=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,a=l(t);try{for(a.s();!(e=a.n()).done;){var o=e.value;if("preprocessor"===o.type){var s=i.exec(o.data);if(s){var u=s[1].replace(/\s\s+/g," ");if(u===r)return u;if(u===n)return o.data="#version "+r,n;throw new Error("unknown glsl version: "+u)}}}}catch(c){a.e(c)}finally{a.f()}return t.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"}),null}(n,"100","300 es"))throw new Error("shader is already glsl 300 es");for(var r=null,i=null,a={},o={},s=0;s<n.length;++s){var c=n[s];switch(c.type){case"keyword":35633===e&&"attribute"===c.data?c.data="in":"varying"===c.data&&(c.data=35633===e?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(c.data.trim())&&(c.data=c.data.replace(/(2D|Cube|EXT)/g,"")),35632===e&&"gl_FragColor"===c.data&&(r||g(n,r=_(n,a,"fragColor"),"vec4"),c.data=r),35632===e&&"gl_FragData"===c.data){var f=x(n,s+1),h=_(n,a,"fragData");b(n,h,"vec4",f,"mediump"),c.data=h}else 35632===e&&"gl_FragDepthEXT"===c.data&&(i||(i=_(n,a,"gl_FragDepth")),c.data=i);break;case"ident":if(u.indexOf(c.data)>=0){if(35633===e&&p(n,s))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");c.data in o||(o[c.data]=_(n,a,c.data)),c.data=o[c.data]}}}for(var v=n.length-1;v>=0;--v){var y=n[v];if("preprocessor"===y.type){var O=y.data.match(/\#extension\s+(.*)\:/);if(O&&O[1]&&m.indexOf(O[1].trim())>=0){var S=n[v+1];n.splice(v,S&&"whitespace"===S.type?2:1)}var w=y.data.match(/\#ifdef\s+(.*)/);w&&w[1]&&m.indexOf(w[1].trim())>=0&&(y.data="#if 1");var C=y.data.match(/\#ifndef\s+(.*)/);C&&C[1]&&m.indexOf(C[1].trim())>=0&&(y.data="#if 0")}}return n.map((function(t){return"eof"!==t.type?t.data:""})).join("")}var S=function(){function t(e,n,i,a){Object(r.a)(this,t),this._context=e,this._locations=a,this._vShader=null,this._fShader=null,this._nameToUniformLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},e||console.error("RenderingContext isn't initialized!"),0===n.length&&console.error("Shaders source should not be empty!"),this._vShader=C(this._context,35633,n),this._fShader=C(this._context,35632,i),this._vShader&&this._fShader||console.error("Error loading shaders!");var u=this._context.gl,c=u.createProgram();u.attachShader(c,this._vShader),u.attachShader(c,this._fShader),a.forEach((function(t,e){return u.bindAttribLocation(c,t,e)})),u.linkProgram(c),Object(s.c)()&&!u.getProgramParameter(c,u.LINK_STATUS)&&console.error("Could not initialize shader\nVALIDATE_STATUS: "+u.getProgramParameter(c,u.VALIDATE_STATUS)+", gl error ["+u.getError()+"]infoLog: "+u.getProgramInfoLog(c)),this._glName=c,this._context.instanceCounter.increment(o.b.Program,this)}return Object(i.a)(t,[{key:"glName",get:function(){return this._glName}},{key:"dispose",value:function(){var t=this._context.gl;if(this._vShader){var e=this._vShader;t.deleteShader(e),this._vShader=null}if(this._fShader){var n=this._fShader;t.deleteShader(n),this._fShader=null}this._glName&&(t.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(o.b.Program,this))}},{key:"_getUniformLocation",value:function(t){return void 0===this._nameToUniformLocation[t]&&(this._nameToUniformLocation[t]=this._context.gl.getUniformLocation(this._glName,t)),this._nameToUniformLocation[t]}},{key:"hasUniform",value:function(t){return null!==this._getUniformLocation(t)}},{key:"setUniform1i",value:function(t,e){var n=this._nameToUniform1[t];void 0!==n&&e===n||(this._context.useProgram(this),this._context.gl.uniform1i(this._getUniformLocation(t),e),this._nameToUniform1[t]=e)}},{key:"setUniform1iv",value:function(t,e){var n=this._nameToUniform1v[t];w(n,e)&&(this._context.useProgram(this),this._context.gl.uniform1iv(this._getUniformLocation(t),e),void 0===n?this._nameToUniform1v[t]=Array.from(e):M(e,n))}},{key:"setUniform2iv",value:function(t,e){var n=this._nameToUniform2[t];w(n,e)&&(this._context.useProgram(this),this._context.gl.uniform2iv(this._getUniformLocation(t),e),void 0===n?this._nameToUniform2[t]=Array.from(e):M(e,n))}},{key:"setUniform3iv",value:function(t,e){var n=this._nameToUniform3[t];w(n,e)&&(this._context.useProgram(this),this._context.gl.uniform3iv(this._getUniformLocation(t),e),void 0===n?this._nameToUniform3[t]=Array.from(e):M(e,n))}},{key:"setUniform4iv",value:function(t,e){var n=this._nameToUniform4[t];w(n,e)&&(this._context.useProgram(this),this._context.gl.uniform4iv(this._getUniformLocation(t),e),void 0===n?this._nameToUniform4[t]=Array.from(e):M(e,n))}},{key:"setUniform1f",value:function(t,e){var n=this._nameToUniform1[t];void 0!==n&&e===n||(this._context.useProgram(this),this._context.gl.uniform1f(this._getUniformLocation(t),e),this._nameToUniform1[t]=e)}},{key:"setUniform1fv",value:function(t,e){var n=this._nameToUniform1v[t];w(n,e)&&(this._context.useProgram(this),this._context.gl.uniform1fv(this._getUniformLocation(t),e),void 0===n?this._nameToUniform1v[t]=Array.from(e):M(e,n))}},{key:"setUniform2f",value:function(t,e,n){var r=this._nameToUniform2[t];void 0!==r&&e===r[0]&&n===r[1]||(this._context.useProgram(this),this._context.gl.uniform2f(this._getUniformLocation(t),e,n),void 0===r?this._nameToUniform2[t]=[e,n]:(r[0]=e,r[1]=n))}},{key:"setUniform2fv",value:function(t,e){var n=this._nameToUniform2[t];w(n,e)&&(this._context.useProgram(this),this._context.gl.uniform2fv(this._getUniformLocation(t),e),void 0===n?this._nameToUniform2[t]=Array.from(e):M(e,n))}},{key:"setUniform3f",value:function(t,e,n,r){var i=this._nameToUniform3[t];void 0!==i&&e===i[0]&&n===i[1]&&r===i[2]||(this._context.useProgram(this),this._context.gl.uniform3f(this._getUniformLocation(t),e,n,r),void 0===i?this._nameToUniform3[t]=[e,n,r]:(i[0]=e,i[1]=n,i[2]=r))}},{key:"setUniform3fv",value:function(t,e){var n=this._nameToUniform3[t];w(n,e)&&(this._context.useProgram(this),this._context.gl.uniform3fv(this._getUniformLocation(t),e),void 0===n?this._nameToUniform3[t]=Array.from(e):M(e,n))}},{key:"setUniform4f",value:function(t,e,n,r,i){var a=this._nameToUniform4[t];void 0!==a&&e===a[0]&&n===a[1]&&r===a[2]&&i===a[3]||(this._context.useProgram(this),this._context.gl.uniform4f(this._getUniformLocation(t),e,n,r,i),void 0===a?this._nameToUniform4[t]=[e,n,r,i]:(a[0]=e,a[1]=n,a[2]=r,a[3]=i))}},{key:"setUniform4fv",value:function(t,e){var n=this._nameToUniform4[t];w(n,e)&&(this._context.useProgram(this),this._context.gl.uniform4fv(this._getUniformLocation(t),e),void 0===n?this._nameToUniform4[t]=Array.from(e):M(e,n))}},{key:"setUniformMatrix3fv",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._nameToUniformMatrix3[t];P(r,e)&&(this._context.useProgram(this),this._context.gl.uniformMatrix3fv(this._getUniformLocation(t),n,e),void 0===r?this._nameToUniformMatrix3[t]=Array.from(e):M(e,r))}},{key:"setUniformMatrix4fv",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._nameToUniformMatrix4[t];k(r,e)&&(this._context.useProgram(this),this._context.gl.uniformMatrix4fv(this._getUniformLocation(t),n,e),void 0===r?this._nameToUniformMatrix4[t]=Array.from(e):M(e,r))}},{key:"assertCompatibleVertexAttributeLocations",value:function(t){t.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}},{key:"stop",value:function(){}}]),t}();function w(t,e){if(Object(a.h)(t)||t.length!==e.length)return!0;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!0;return!1}function C(t,e,n){var r="webgl2"===t.webglVersion?O(n,e):n,i=t.gl,a=i.createShader(e);return i.shaderSource(a,r),i.compileShader(a),Object(s.c)()&&!i.getShaderParameter(a,i.COMPILE_STATUS)&&(console.error("Compile error in ".concat(35633===e?"vertex":"fragment"," shader")),console.error(i.getShaderInfoLog(a)),console.error(function(t){var e=2;return t.replace(/\n/g,(function(){return"\n"+function(t){return t>=1e3?t.toString():("  "+t).slice(-3)}(e++)+":"}))}(r)),"webgl2"===t.webglVersion&&(console.log("Shader source before transpilation:"),console.log(n))),a}function M(t,e){for(var n=0;n<t.length;++n)e[n]=t[n]}function P(t,e){return!!Object(a.h)(t)||(9!==t.length?w(t,e):9!==t.length||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[7]!==e[7]||t[8]!==e[8])}function k(t,e){return!!Object(a.h)(t)||(16!==t.length?w(t,e):16!==t.length||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[7]!==e[7]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]||t[11]!==e[11]||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[15]!==e[15])}},ezmY:function(t,e,n){"use strict";var r=n("mK0O"),i=n("hisu"),a=n("yBJb"),o=n("4Mpa"),s=n("CHlC"),u=n("kMo5"),c=n("P+uj"),l=n("J4Pc"),f=n("FNqF"),h=n("UP7e"),v=n("NAae"),d=n("x8l1");function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var b=function(t,e){return t.key.level-e.key.level!=0?t.key.level-e.key.level:t.key.row-e.key.row!=0?t.key.row-e.key.row:t.key.col-e.key.col},x=function(t){Object(s.a)(n,t);var e=g(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this))._tileInfoView=t,r}return Object(a.a)(n,[{key:"requiresDedicatedFBO",get:function(){return!1}},{key:"renderChildren",value:function(t){this.sortChildren(b),this.setStencilReference(),Object(o.a)(Object(c.a)(n.prototype),"renderChildren",this).call(this,t)}},{key:"createRenderParams",value:function(t){var e=t.state;return y(y({},Object(o.a)(Object(c.a)(n.prototype),"createRenderParams",this).call(this,t)),{},{requiredLevel:this._tileInfoView.getClosestInfoForScale(e.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(e.scale)})}},{key:"prepareRenderPasses",value:function(t){var e=this,r=Object(o.a)(Object(c.a)(n.prototype),"prepareRenderPasses",this).call(this,t);return r.push(t.registerRenderPass({name:"stencil",brushes:[d.a],drawPhase:f.c.DEBUG|f.c.MAP|f.c.HIGHLIGHT,target:function(){return e.getStencilTarget()}})),Object(l.a)("esri-tiles-debug")&&r.push(t.registerRenderPass({name:"tileInfo",brushes:[v.a],drawPhase:f.c.DEBUG,target:function(){return e.children}})),r}},{key:"getStencilTarget",value:function(){return this.children}},{key:"updateTransforms",value:function(t){var e,n=m(this.children);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=this._tileInfoView.getTileResolution(r.key);r.setTransform(t,i)}}catch(a){n.e(a)}finally{n.f()}}},{key:"setStencilReference",value:function(){var t,e=1,n=m(this.children);try{for(n.s();!(t=n.n()).done;){t.value.stencilRef=e++}}catch(r){n.e(r)}finally{n.f()}}}]),n}(h.a);e.a=x},ghNS:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return s}));Number.POSITIVE_INFINITY;var r=Math.PI,i=128/r,a=1/Math.LN2;function o(t,e){return(t%=e)>=0?t:t+e}function s(t){return o(t*i,256)}function u(t){return o(t*(256/360),256)}function c(t){return Math.log(t)*a}function l(t,e,n){return t>=e&&t<=n||t>=n&&t<=e}},gj5F:function(t,e,n){"use strict";n.d(e,"a",(function(){return xt}));var r=n("hisu"),i=n("yBJb"),a=n("CHlC"),o=n("kMo5"),s=n("P+uj"),u=n("PmOk"),c=n("uX2s"),l=n("pt9v");function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h={nearest:{defines:[],samplingMode:9728,mips:!1},bilinear:{defines:[],samplingMode:9729,mips:!1},bicubic:{defines:["bicubic"],samplingMode:9729,mips:!1},trilinear:{defines:[],samplingMode:9987,mips:!0}},v=function(t){Object(a.a)(n,t);var e=f(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._desc={vsPath:"raster/bitmap",fsPath:"raster/bitmap",attributes:new Map([["a_position",0],["a_texcoord",1]])},t}return Object(i.a)(n,[{key:"dispose",value:function(){this._quad&&this._quad.dispose()}},{key:"prepareState",value:function(t,e){var n=t.context;n.setBlendingEnabled(!0),"additive"===e.blendFunction?n.setBlendFunctionSeparate(1,1,1,1):n.setBlendFunctionSeparate(1,771,1,771),n.setColorMask(!0,!0,!0,!0),n.setStencilWriteMask(0),n.setStencilTestEnabled(!0),n.setStencilFunction(514,e.stencilRef,255)}},{key:"draw",value:function(t,e){var n=t.context,r=t.renderingOptions,i=t.painter;if(e.source){t.timeline.begin(this.name),this._quad||(this._quad=new c.a(n,[0,0,1,0,0,1,1,1]));var a=function(t,e,n){if("dynamic"===n.samplingMode){var r=t.state,i=e.resolution/e.pixelRatio/r.resolution,a=Math.round(t.pixelRatio)!==t.pixelRatio,o=i>1.05||i<.95;return r.rotation||o||a||e.isSourceScaled||e.rotation?h.bilinear:h.nearest}return h[n.samplingMode]}(t,e,r),o=i.materialManager.getProgram(t,this._desc,a.defines),s=e.coordScale,l=e.computedOpacity,f=e.transforms;e.setSamplingProfile(a),e.bind(t.context,u.v),n.useProgram(o),o.setUniformMatrix3fv("u_dvsMat3",f.dvs),o.setUniform1i("u_texture",u.v),o.setUniform2fv("u_coordScale",s),o.setUniform1f("u_opacity",l),this._quad.draw(),t.timeline.end(this.name)}}}]),n}(l.a),d=n("7im+"),m=n("T645"),p=n("qHKP"),_=n("/zE3"),y=n("j92Z");function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var b=function(t){Object(a.a)(n,t);var e=g(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._color=Object(m.a)(0,1,0,1),t}return Object(i.a)(n,[{key:"dispose",value:function(){this._program&&this._program.dispose()}},{key:"prepareState",value:function(t){var e=t.context;e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setFaceCullingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(7680,7680,7681),e.setStencilWriteMask(255),e.setStencilFunction(519,0,255)}},{key:"draw",value:function(t,e){var n=t.context,r=t.state,i=Object(p.f)("clip",{geometry:[{location:0,name:"a_pos",count:2,type:5122}]}),a=e.getVAO(n,r,i.attributes,i.bufferLayouts);Object(d.h)(a.indexBuffer)||(this._program||(this._program=Object(y.a)(n,_.a)),n.useProgram(this._program),this._program.setUniform2fv("u_coord_range",[1,1]),this._program.setUniform4fv("u_color",this._color),this._program.setUniformMatrix3fv("u_dvsMat3",r.displayMat3),n.bindVAO(a),n.drawElements(4,a.indexBuffer.size,5125,0),n.bindVAO())}}]),n}(l.a),x=n("NAae"),O=n("x8l1"),S=n("6J1V"),w=n("Tkaf"),C=n("a1c8"),M=(n("iwTS"),n("J4Pc"),n("B2Uc"),n("cY28"),n("IxxH"),n("0fR5")),P=n("H8zE"),k=n("FNqF"),T=n("yzGw");function j(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var D=function(t){Object(a.a)(n,t);var e=I(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._color=Object(m.a)(1,0,0,1),t._patternMatrix=Object(w.b)(),t._programOptions={id:!1,pattern:!1},t}return Object(i.a)(n,[{key:"dispose",value:function(){this._vao&&(this._vao.dispose(),this._vao=null)}},{key:"drawMany",value:function(t,e){var n=t.context,r=t.painter,i=t.styleLayerUID;this._loadWGLResources(t);var a,o,s=t.displayLevel,c=t.styleLayer,l=c.backgroundMaterial,f=r.vectorTilesMaterialManager,h=c.getPaintValue("background-color",s),v=c.getPaintValue("background-opacity",s),m=c.getPaintValue("background-pattern",s),p=void 0!==m,_=h[3]*v,y=1|window.devicePixelRatio,g=t.spriteMosaic,b=y>u.F?2:1,x=t.drawPhase===k.c.HITTEST,O=this._programOptions;O.id=x,O.pattern=p;var w=f.getMaterialProgram(n,l,O);if(n.bindVAO(this._vao),n.useProgram(w),p){var C=g.getMosaicItemPosition(m,!0);if(Object(d.i)(C)){var M=C.tl,P=C.br,A=C.page;a=P[0]-M[0],o=P[1]-M[1];var I=g.getPageSize(A);Object(d.i)(I)&&(g.bind(n,9729,A,u.H),w.setUniform4f("u_tlbr",M[0],M[1],P[0],P[1]),w.setUniform2fv("u_mosaicSize",I),w.setUniform1i("u_texture",u.H))}w.setUniform1f("u_opacity",v)}else this._color[0]=_*h[0],this._color[1]=_*h[1],this._color[2]=_*h[2],this._color[3]=_,w.setUniform4fv("u_color",this._color);if(w.setUniform1f("u_depth",c.z||0),x){var D=Object(T.c)(i+1);w.setUniform4fv("u_id",D)}var E,R=j(e);try{for(R.s();!(E=R.n()).done;){var L=E.value;if(w.setUniform1f("u_coord_range",L.coordRange[0]),w.setUniformMatrix3fv("u_dvsMat3",L.transforms.dvs),p){var V=Math.max(Math.pow(2,Math.round(s)-L.key.level),1),z=b*L.size[0]*V,U=z/Object(S.p)(a),F=z/Object(S.p)(o);this._patternMatrix[0]=U,this._patternMatrix[4]=F,w.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)}n.setStencilFunction(514,L.stencilRef,255),n.drawArrays(5,0,4)}}catch(N){R.e(N)}finally{R.f()}}},{key:"_loadWGLResources",value:function(t){if(!this._vao){var e=t.context,n=t.styleLayer.backgroundMaterial,r=new Int8Array([0,0,1,0,0,1,1,1]),i=C.a.createVertex(e,35044,r),a=new P.a(e,n.getAttributeLocations(),n.getLayoutInfo(),{geometry:i});this._vao=a}}}]),n}(l.a);function E(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var V=function(t){Object(a.a)(n,t);var e=L(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._programOptions={id:!1},t}return Object(i.a)(n,[{key:"dispose",value:function(){}},{key:"drawMany",value:function(t,e){var n=t.context,r=t.displayLevel,i=t.requiredLevel,a=t.state,o=t.drawPhase,s=t.painter,u=t.spriteMosaic,c=t.styleLayerUID;if(e.some((function(t){var e,n;return null!=(e=null==(n=t.layerData.get(c))?void 0:n.circleIndexCount)&&e}))){var l=t.styleLayer,f=l.circleMaterial,h=s.vectorTilesMaterialManager,v=l.getPaintValue("circle-translate",r),m=l.getPaintValue("circle-translate-anchor",r),p=o===k.c.HITTEST,_=this._programOptions;_.id=p;var y=h.getMaterialProgram(n,f,_);n.useProgram(y),y.setUniformMatrix3fv("u_displayMat3",1===m?a.displayMat3:a.displayViewMat3),y.setUniform2fv("u_circleTranslation",v),y.setUniform1f("u_depth",l.z),y.setUniform1f("u_antialiasingWidth",1.2);var g=-1;if(p){var b=Object(T.c)(c+1);y.setUniform4fv("u_id",b)}var x,O=E(e);try{for(O.s();!(x=O.n()).done;){var S=x.value;if(S.layerData.has(c)){S.key.level!==g&&(g=S.key.level,f.setDataUniforms(y,r,l,g,u));var w=S.layerData.get(c);if(w.circleIndexCount){w.prepareForRendering(n);var C=w.circleVertexArrayObject;Object(d.h)(C)||(n.bindVAO(C),y.setUniformMatrix3fv("u_dvsMat3",S.transforms.dvs),i!==S.key.level?n.setStencilFunction(514,S.stencilRef,255):n.setStencilFunction(516,255,255),n.drawElements(4,w.circleIndexCount,5125,Uint32Array.BYTES_PER_ELEMENT*w.circleIndexStart),S.triangleCount+=w.circleIndexCount/3)}}}}catch(M){O.e(M)}finally{O.f()}}}}]),n}(l.a),z=n("aNYv");function U(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var Y=function(t){Object(a.a)(n,t);var e=N(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._fillProgramOptions={id:!1,pattern:!1},t._outlineProgramOptions={id:!1},t}return Object(i.a)(n,[{key:"dispose",value:function(){}},{key:"drawMany",value:function(t,e){var n,r=t.displayLevel,i=t.drawPhase,a=t.renderPass,o=t.spriteMosaic,s=t.styleLayerUID,u=!1,c=U(e);try{for(c.s();!(n=c.n()).done;){var l=n.value;if(l.layerData.has(s)){var f=l.layerData.get(s);if(f.fillIndexCount>0||f.outlineIndexCount>0){u=!0;break}}}}catch(j){c.e(j)}finally{c.f()}if(u){var h,v=t.styleLayer,d=v.getPaintProperty("fill-pattern"),m=void 0!==d,p=m&&d.isDataDriven;if(m&&!p){var _=d.getValue(r);h=o.getMosaicItemPosition(_,!0)}var y=!m&&v.getPaintValue("fill-antialias",r),g=!0,b=1;if(!m){var x=v.getPaintProperty("fill-color"),O=v.getPaintProperty("fill-opacity");if(!(null!=x&&x.isDataDriven||null!=O&&O.isDataDriven)){var S=v.getPaintValue("fill-color",r);(b=v.getPaintValue("fill-opacity",r)*S[3])>=1&&(g=!1)}}if(!g||"opaque"!==a){var w;i===k.c.HITTEST&&(w=Object(T.c)(s+1));var C=v.getPaintValue("fill-translate",r),M=v.getPaintValue("fill-translate-anchor",r);(g||"translucent"!==a)&&this._drawFill(t,s,v,e,C,M,m,h,p,w);var P=!v.hasDataDrivenOutlineColor&&v.outlineUsesFillColor&&b<1;y&&"opaque"!==a&&!P&&this._drawOutline(t,s,v,e,C,M,w)}}}},{key:"_drawFill",value:function(t,e,n,r,i,a,o,s,c,l){if(!o||!Object(d.h)(s)){var f=t.context,h=t.displayLevel,v=t.state,m=t.drawPhase,p=t.painter,_=t.pixelRatio,y=t.spriteMosaic,g=n.fillMaterial,b=p.vectorTilesMaterialManager,x=_>u.F?2:1,O=m===k.c.HITTEST,S=this._fillProgramOptions;S.id=O,S.pattern=o;var w=b.getMaterialProgram(f,g,S);if(f.useProgram(w),Object(d.i)(s)){var C=s.page,M=y.getPageSize(C);Object(d.i)(M)&&(y.bind(f,9729,C,u.H),w.setUniform2fv("u_mosaicSize",M),w.setUniform1i("u_texture",u.H))}w.setUniformMatrix3fv("u_displayMat3",1===a?v.displayMat3:v.displayViewMat3),w.setUniform2fv("u_fillTranslation",i),w.setUniform1f("u_depth",n.z+1/65536),O&&w.setUniform4fv("u_id",l);var P,T=-1,j=U(r);try{for(j.s();!(P=j.n()).done;){var A=P.value;if(A.layerData.has(e)){A.key.level!==T&&(T=A.key.level,g.setDataUniforms(w,h,n,T,y));var I=A.layerData.get(e);if(I.fillIndexCount){I.prepareForRendering(f);var D=I.fillVertexArrayObject;if(!Object(d.h)(D)){if(f.bindVAO(D),w.setUniformMatrix3fv("u_dvsMat3",A.transforms.dvs),f.setStencilFunction(514,A.stencilRef,255),o){var E=Math.max(Math.pow(2,Math.round(h)-A.key.level),1),R=A.coordRange[0]/(x*A.size[0]*E);w.setUniform1f("u_patternFactor",R)}if(c){var L=I.patternMap;if(!L)continue;var V,F=U(L);try{for(F.s();!(V=F.n()).done;){var N=Object(z.a)(V.value,2),Y=N[0],B=N[1],G=y.getPageSize(Y);Object(d.i)(G)&&(y.bind(f,9729,Y,u.H),w.setUniform2fv("u_mosaicSize",G),w.setUniform1i("u_texture",u.H),f.drawElements(4,B[1],5125,Uint32Array.BYTES_PER_ELEMENT*B[0]))}}catch(H){F.e(H)}finally{F.f()}}else f.drawElements(4,I.fillIndexCount,5125,Uint32Array.BYTES_PER_ELEMENT*I.fillIndexStart);A.triangleCount+=I.fillIndexCount/3}}}}}catch(H){j.e(H)}finally{j.f()}}}},{key:"_drawOutline",value:function(t,e,n,r,i,a,o){var s=t.context,u=t.displayLevel,c=t.state,l=t.drawPhase,f=t.painter,h=t.pixelRatio,v=t.spriteMosaic,m=n.outlineMaterial,p=f.vectorTilesMaterialManager,_=.75/h,y=l===k.c.HITTEST,g=this._outlineProgramOptions;g.id=y;var b=p.getMaterialProgram(s,m,g);s.useProgram(b),b.setUniformMatrix3fv("u_displayMat3",1===a?c.displayMat3:c.displayViewMat3),b.setUniform2fv("u_fillTranslation",i),b.setUniform1f("u_depth",n.z+1/65536),b.setUniform1f("u_outline_width",_),y&&b.setUniform4fv("u_id",o);var x,O=-1,S=U(r);try{for(S.s();!(x=S.n()).done;){var w=x.value;if(w.layerData.has(e)){w.key.level!==O&&(O=w.key.level,m.setDataUniforms(b,u,n,O,v));var C=w.layerData.get(e);if(C.prepareForRendering(s),C.outlineIndexCount){var M=C.outlineVertexArrayObject;Object(d.h)(M)||(s.bindVAO(M),b.setUniformMatrix3fv("u_dvsMat3",w.transforms.dvs),s.setStencilFunction(514,w.stencilRef,255),s.drawElements(4,C.outlineIndexCount,5125,Uint32Array.BYTES_PER_ELEMENT*C.outlineIndexStart),w.triangleCount+=C.outlineIndexCount/3)}}}}catch(P){S.e(P)}finally{S.f()}}}]),n}(l.a);function B(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var W=function(t){Object(a.a)(n,t);var e=H(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._programOptions={id:!1,pattern:!1,sdf:!1},t}return Object(i.a)(n,[{key:"dispose",value:function(){}},{key:"drawMany",value:function(t,e){var n=t.context,r=t.displayLevel,i=t.state,a=t.drawPhase,o=t.painter,s=t.pixelRatio,c=t.spriteMosaic,l=t.styleLayerUID;if(e.some((function(t){var e,n;return null!=(e=null==(n=t.layerData.get(l))?void 0:n.lineIndexCount)&&e}))){var f,h,v=t.styleLayer,m=v.lineMaterial,p=o.vectorTilesMaterialManager,_=v.getPaintValue("line-translate",r),y=v.getPaintValue("line-translate-anchor",r),g=v.getPaintProperty("line-pattern"),b=void 0!==g,x=b&&g.isDataDriven;if(b&&!x){var O=g.getValue(r);f=c.getMosaicItemPosition(O)}var S=!1;if(!b){var w=v.getPaintProperty("line-dasharray");if(S=(h=void 0!==w)&&w.isDataDriven,h&&!S){var C=w.getValue(r),M=v.getDashKey(C,v.getLayoutValue("line-cap",r));f=c.getMosaicItemPosition(M)}}var P=1/s,j=a===k.c.HITTEST,A=this._programOptions;A.id=j,A.pattern=b,A.sdf=h;var I=p.getMaterialProgram(n,m,A);if(n.useProgram(I),I.setUniformMatrix3fv("u_displayViewMat3",i.displayViewMat3),I.setUniformMatrix3fv("u_displayMat3",1===y?i.displayMat3:i.displayViewMat3),I.setUniform2fv("u_lineTranslation",_),I.setUniform1f("u_depth",v.z),I.setUniform1f("u_antialiasing",P),j){var D=Object(T.c)(l+1);I.setUniform4fv("u_id",D)}if(f&&Object(d.i)(f)){var E=f.page,R=c.getPageSize(E);Object(d.i)(R)&&(c.bind(n,9729,E,u.H),I.setUniform2fv("u_mosaicSize",R),I.setUniform1i("u_texture",u.H))}var L,V=-1,U=B(e);try{for(U.s();!(L=U.n()).done;){var F=L.value;if(F.layerData.has(l)){F.key.level!==V&&(V=F.key.level,m.setDataUniforms(I,r,v,V,c));var N=Math.pow(2,r-V)/s;I.setUniform1f("u_zoomFactor",N);var Y=F.layerData.get(l);if(Y.lineIndexCount){Y.prepareForRendering(n);var G=Y.lineVertexArrayObject;if(!Object(d.h)(G)){if(n.bindVAO(G),I.setUniformMatrix3fv("u_dvsMat3",F.transforms.dvs),n.setStencilFunction(514,F.stencilRef,255),x||S){var H=Y.patternMap;if(!H)continue;var W,Z=B(H);try{for(Z.s();!(W=Z.n()).done;){var X=Object(z.a)(W.value,2),q=X[0],J=X[1],K=c.getPageSize(q);Object(d.i)(K)&&(c.bind(n,9729,q,u.H),I.setUniform2fv("u_mosaicSize",K),I.setUniform1i("u_texture",u.H),n.drawElements(4,J[1],5125,Uint32Array.BYTES_PER_ELEMENT*J[0]))}}catch($){Z.e($)}finally{Z.f()}}else n.drawElements(4,Y.lineIndexCount,5125,Uint32Array.BYTES_PER_ELEMENT*Y.lineIndexStart);F.triangleCount+=Y.lineIndexCount/3}}}}}catch($){U.e($)}finally{U.f()}}}}]),n}(l.a),Z=n("0s7n"),X=n("bQwG"),q=n("ghNS");function J(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var Q=function(t){Object(a.a)(n,t);var e=$(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._iconProgramOptions={id:!1,sdf:!1},t._sdfProgramOptions={id:!1},t._spritesTextureSize=Object(Z.a)(),t}return Object(i.a)(n,[{key:"dispose",value:function(){}},{key:"drawMany",value:function(t,e){var n,r=t.drawPhase,i=t.styleLayerUID,a=t.styleLayer;r===k.c.HITTEST&&(n=Object(T.c)(i+1)),this._drawIcons(t,a,e,n),this._drawText(t,a,e,n)}},{key:"_drawIcons",value:function(t,e,n,r){var i,a,o=t.context,s=t.displayLevel,c=t.drawPhase,l=t.painter,f=t.spriteMosaic,h=t.state,v=t.styleLayerUID,m=e.iconMaterial,p=l.vectorTilesMaterialManager,_=!1,y=J(n);try{for(y.s();!(a=y.n()).done;){var g=a.value;if(g.layerData.has(v)&&(i=g.layerData.get(v)).iconPerPageElementsMap.size>0){_=!0;break}}}catch(N){y.e(N)}finally{y.f()}if(_){var b=e.getPaintValue("icon-translate",s),x=e.getPaintValue("icon-translate-anchor",s),O=e.getLayoutValue("icon-rotation-alignment",s);2===O&&(O=0===e.getLayoutValue("symbol-placement",s)?1:0);var S=0===O,w=e.getLayoutValue("icon-keep-upright",s)&&S,C=i.isIconSDF,M=c===k.c.HITTEST,P=this._iconProgramOptions;P.id=M,P.sdf=C;var T=p.getMaterialProgram(o,m,P);o.useProgram(T),T.setUniformMatrix3fv("u_displayViewMat3",0===O?h.displayViewMat3:h.displayMat3),T.setUniformMatrix3fv("u_displayMat3",1===x?h.displayMat3:h.displayViewMat3),T.setUniform2fv("u_iconTranslation",b),T.setUniform1f("u_depth",e.z),T.setUniform1f("u_mapRotation",Object(q.b)(h.rotation)),T.setUniform1f("u_keepUpright",w?1:0),T.setUniform1f("u_level",10*s),T.setUniform1i("u_texture",u.H),T.setUniform1f("u_fadeDuration",X.d/1e3),M&&T.setUniform4fv("u_id",r);var j,A=-1,I=J(n);try{for(I.s();!(j=I.n()).done;){var D=j.value;if(D.layerData.has(v)&&(D.key.level!==A&&(A=D.key.level,m.setDataUniforms(T,s,e,A,f)),0!==(i=D.layerData.get(v)).iconPerPageElementsMap.size)){i.prepareForRendering(o),i.updateOpacityInfo();var E=i.iconVertexArrayObject;if(!Object(d.h)(E)){o.bindVAO(E),T.setUniformMatrix3fv("u_dvsMat3",D.transforms.dvs),T.setUniform1f("u_time",(performance.now()-i.lastOpacityUpdate)/1e3);var R,L=J(i.iconPerPageElementsMap);try{for(L.s();!(R=L.n()).done;){var V=Object(z.a)(R.value,2),U=V[0],F=V[1];this._renderIconRange(t,T,F,U,D)}}catch(N){L.e(N)}finally{L.f()}}}}}catch(N){I.e(N)}finally{I.f()}}}},{key:"_renderIconRange",value:function(t,e,n,r,i){var a=t.context,o=t.spriteMosaic;this._spritesTextureSize[0]=o.getWidth(r)/4,this._spritesTextureSize[1]=o.getHeight(r)/4,e.setUniform2fv("u_mosaicSize",this._spritesTextureSize),o.bind(a,9729,r,u.H),a.setStencilTestEnabled(!0),a.setStencilFunction(516,255,255),a.setStencilWriteMask(0),a.drawElements(4,n[1],5125,Uint32Array.BYTES_PER_ELEMENT*n[0]),i.triangleCount+=n[1]/3}},{key:"_drawText",value:function(t,e,n,r){var i,a,o=this,s=t.context,c=t.displayLevel,l=t.drawPhase,f=t.glyphMosaic,h=t.painter,v=t.pixelRatio,m=t.spriteMosaic,p=t.state,_=t.styleLayerUID,y=e.textMaterial,g=h.vectorTilesMaterialManager,b=!1,x=J(n);try{for(x.s();!(a=x.n()).done;){var O=a.value;if(O.layerData.has(_)&&(i=O.layerData.get(_)).glyphPerPageElementsMap.size>0){b=!0;break}}}catch(B){x.e(B)}finally{x.f()}if(b){var S=e.getPaintProperty("text-opacity");if(!S||S.isDataDriven||0!==S.getValue(c)){var w=e.getPaintProperty("text-color"),C=!w||w.isDataDriven||w.getValue(c)[3]>0,M=e.getPaintProperty("text-halo-width"),P=e.getPaintProperty("text-halo-color"),T=(!M||M.isDataDriven||M.getValue(c)>0)&&(!P||P.isDataDriven||P.getValue(c)[3]>0);if(C||T){var j=e.getLayoutValue("text-rotation-alignment",c);2===j&&(j=0===e.getLayoutValue("symbol-placement",c)?1:0);var A=0===j,I=e.getLayoutValue("text-keep-upright",c)&&A,D=l===k.c.HITTEST,E=.8*3/v;this._glyphTextureSize||(this._glyphTextureSize=Object(Z.b)(f.width/4,f.height/4));var R=e.getPaintValue("text-translate",c),L=e.getPaintValue("text-translate-anchor",c),V=this._sdfProgramOptions;V.id=D;var z=g.getMaterialProgram(s,y,V);s.useProgram(z),z.setUniformMatrix3fv("u_displayViewMat3",0===j?p.displayViewMat3:p.displayMat3),z.setUniformMatrix3fv("u_displayMat3",1===L?p.displayMat3:p.displayViewMat3),z.setUniform2fv("u_textTranslation",R),z.setUniform1f("u_depth",e.z+1/65536),z.setUniform2fv("u_mosaicSize",this._glyphTextureSize),z.setUniform1f("u_mapRotation",Object(q.b)(p.rotation)),z.setUniform1f("u_keepUpright",I?1:0),z.setUniform1f("u_level",10*c),z.setUniform1i("u_texture",u.G),z.setUniform1f("u_antialiasingWidth",E),z.setUniform1f("u_fadeDuration",X.d/1e3),D&&z.setUniform4fv("u_id",r);var U,F=-1,N=J(n);try{var Y=function(){var t=U.value;if(!t.layerData.has(_))return"continue";if(t.key.level!==F&&(F=t.key.level,y.setDataUniforms(z,c,e,F,m)),0===(i=t.layerData.get(_)).glyphPerPageElementsMap.size)return"continue";i.prepareForRendering(s),i.updateOpacityInfo();var n=i.textVertexArrayObject;if(Object(d.h)(n))return"continue";s.bindVAO(n),z.setUniformMatrix3fv("u_dvsMat3",t.transforms.dvs),s.setStencilTestEnabled(!0),s.setStencilFunction(516,255,255),s.setStencilWriteMask(0);var r=(performance.now()-i.lastOpacityUpdate)/1e3;z.setUniform1f("u_time",r),i.glyphPerPageElementsMap.forEach((function(e,n){o._renderGlyphRange(s,e,n,f,z,T,C,t)}))};for(N.s();!(U=N.n()).done;)Y()}catch(B){N.e(B)}finally{N.f()}}}}}},{key:"_renderGlyphRange",value:function(t,e,n,r,i,a,o,s){r.bind(t,9729,n,u.G),a&&(i.setUniform1f("u_halo",1),t.drawElements(4,e[1],5125,Uint32Array.BYTES_PER_ELEMENT*e[0]),s.triangleCount+=e[1]/3),o&&(i.setUniform1f("u_halo",0),t.drawElements(4,e[1],5125,Uint32Array.BYTES_PER_ELEMENT*e[0]),s.triangleCount+=e[1]/3)}}]),n}(l.a),tt=n("6CzD"),et=n("NtCB");function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var rt=function(t){Object(a.a)(n,t);var e=nt(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"prepareState",value:function(t,e,n){var r=t.context,i=n&&-1!==n.indexOf("id");r.setBlendingEnabled(!i),r.setBlendFunctionSeparate(1,771,1,771),r.setColorMask(!0,!0,!0,!0),r.setStencilWriteMask(0),r.setStencilTestEnabled(!0),r.setStencilFunction(514,e.stencilRef,255)}},{key:"draw",value:function(t,e,n){var r=this,i=this.getGeometryType();e.commit(t);var a=e.getGeometry(i);Object(d.h)(a)||(t.timeline.begin(this.name),t.attributeView.bindTextures(t.context),a.forEachCommand((function(i){return r.drawGeometry(t,e,i,n)})))}},{key:"_setSharedUniforms",value:function(t,e,n){var r=e.displayLevel,i=e.pixelRatio,a=e.state;t.setUniform1f("u_pixelRatio",i),t.setUniformMatrix3fv("u_dvsMat3",n.transforms.dvs),t.setUniformMatrix3fv("u_displayViewMat3",a.displayViewMat3),t.setUniform1f("u_currentZoom",Math.round(r*u.m)),t.setUniform1i("u_attributeTextureSize",e.attributeView.size),t.setUniform1i("u_attributeData0",u.r),t.setUniform1i("u_attributeData1",u.s),t.setUniform1i("u_attributeData2",u.t),t.setUniform1i("u_attributeData3",u.u)}}]),n}(l.a),it=n("IHDS");function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var ot=function(t){Object(a.a)(n,t);var e=at(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._dotTextureSize=0,t._dotTextures=null,t._dotSamplers=new Int32Array([u.z,u.A]),t}return Object(i.a)(n,[{key:"dispose",value:function(){this._disposeTextures()}},{key:"getGeometryType",value:function(){return k.d.FILL}},{key:"drawGeometry",value:function(t,e,n,r){var i=t.context,a=t.painter,o=t.rendererInfo,s=t.requiredLevel,c=it.a.load(n.materialKey),l=function(t){return Object(p.f)(t.data,{geometry:[{location:0,name:"a_pos",count:2,type:5122},{location:1,name:"a_id",count:4,type:5121}].concat(Object(tt.a)(t.dotDensity?[]:[{location:2,name:"a_color",count:4,type:5121,normalized:!0},{location:3,name:"a_tlbr",count:4,type:5123},{location:4,name:"a_aux1",count:4,type:5121},{location:5,name:"a_aux2",count:2,type:5123},{location:6,name:"a_aux3",count:4,type:5121},{location:7,name:"a_zoomRange",count:2,type:5123}]),Object(tt.a)(t.dotDensity?[{location:2,name:"a_inverseArea",count:1,type:5126}]:[]))})}(c),f=l.bufferLayouts,h=l.attributes,v=a.materialManager.getMaterialProgram(t,c,"materials/fill",h,r);if(i.useProgram(v),this._setSharedUniforms(v,t,e),c.textureBinding){a.textureManager.bindTextures(i,v,c);var d=1/Math.pow(2,s-e.key.level)/t.pixelRatio;v.setUniform1f("u_zoomFactor",d)}if(c.vvColor&&(v.setUniform1fv("u_vvColorValues",o.vvColorValues),v.setUniform4fv("u_vvColors",o.vvColors)),c.vvOpacity&&(v.setUniform1fv("u_vvOpacityValues",o.vvOpacityValues),v.setUniform1fv("u_vvOpacities",o.vvOpacities)),c.dotDensity){var m=u.E/o.ddDotSize,_=m*window.devicePixelRatio*m*window.devicePixelRatio,y=1/Math.pow(2,s-e.key.level),g=1/y*(1/y),b=o.ddDotScale?t.state.scale/o.ddDotScale:1;v.setUniform1f("u_tileZoomFactor",y),v.setUniform1f("u_tileDotsOverArea",_/(u.E*window.devicePixelRatio*u.E*window.devicePixelRatio)),v.setUniformMatrix4fv("u_dotColors",o.ddColors),v.setUniform4fv("u_isActive",o.ddActiveDots),v.setUniform4fv("u_dotBackgroundColor",o.ddBackgroundColor),v.setUniform1f("u_dotValue",Math.max(1,o.ddDotValue*b*g)),this._bindDotDensityTextures(i,v,o,m)}n.draw(i,f,h)}},{key:"_disposeTextures",value:function(){if(this._dotTextures){for(var t=0;t<this._dotTextures.length;t++)this._dotTextures[t].dispose();this._dotTextures=null}}},{key:"_bindDotDensityTextures",value:function(t,e,n,r){var i=this._createDotDensityTextures(t,r,n.ddSeed);e.setUniform1iv("u_dotTextures",this._dotSamplers);for(var a=0;a<i.length;a++)t.bindTexture(i[a],this._dotSamplers[a])}},{key:"_createDotDensityTextures",value:function(t,e,n){if(this._dotTextureSize===e&&this._seed===n||(this._disposeTextures(),this._dotTextureSize=e,this._seed=n),null===this._dotTextures){var r=new et.a(n);this._dotTextures=[this._allocDotDensityTexture(t,e,r),this._allocDotDensityTexture(t,e,r)]}return this._dotTextures}},{key:"_allocDotDensityTexture",value:function(t,e,n){for(var r=new Float32Array(e*e*4),i=0;i<r.length;i++)r[i]=n.getFloat();return new M.a(t,{wrapMode:10497,pixelFormat:6408,dataType:5126,samplingMode:9728,width:e,height:e},r)}}]),n}(rt);function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var ut=function(t){Object(a.a)(n,t);var e=st(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"dispose",value:function(){}},{key:"getGeometryType",value:function(){return k.d.LABEL}},{key:"drawGeometry",value:function(t,e,n,r){var i=t.context,a=t.painter,o=t.state,s=t.rendererInfo,u=it.b.load(n.materialKey),c=u.mapAligned?1:0;if(c||!(Math.abs(e.key.level-Math.round(100*t.displayLevel)/100)>=1)){var l=function(t){return Object(p.f)(t.data,{geometry:[{location:0,name:"a_pos",count:2,type:5122},{location:1,name:"a_id",count:4,type:5121},{location:2,name:"a_color",count:4,type:5121,normalized:!0},{location:3,name:"a_haloColor",count:4,type:5121,normalized:!0},{location:4,name:"a_texAndSize",count:4,type:5121},{location:5,name:"a_refSymbolAndPlacementOffset",count:4,type:5121},{location:6,name:"a_glyphData",count:4,type:5121},{location:7,name:"a_vertexOffset",count:2,type:5122},{location:8,name:"a_texCoords",count:2,type:5123}]})}(u),f=l.bufferLayouts,h=l.attributes,v=a.materialManager.getMaterialProgram(t,u,"materials/label",h,r);t.context.setStencilFunction(514,0,255),i.useProgram(v),this._setSharedUniforms(v,t,e),a.textureManager.bindTextures(i,v,u);var d=1===c?o.displayViewMat3:o.displayMat3;if(u.vvSizeMinMaxValue&&v.setUniform4fv("u_vvSizeMinMaxValue",s.vvSizeMinMaxValue),u.vvSizeScaleStops&&v.setUniform1f("u_vvSizeScaleStopsValue",s.vvSizeScaleStopsValue),u.vvSizeFieldStops){var m=s.getSizeVVFieldStops(e.key.level);v.setUniform1fv("u_vvSizeFieldStopsValues",m.values),v.setUniform1fv("u_vvSizeFieldStopsSizes",m.sizes)}u.vvSizeUnitValue&&v.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",s.vvSizeUnitValueToPixelsRatio),v.setUniform1f("u_mapRotation",Math.floor(o.rotation/360*254)),v.setUniform1f("u_mapAligned",c),v.setUniformMatrix3fv("u_displayMat3",d),v.setUniform1f("u_opacity",1),v.setUniform2fv("u_screenSize",t.state.size),v.setUniform1f("u_isHalo",1),n.draw(i,f,h),v.setUniform1f("u_isHalo",0),n.draw(i,f,h),i.setStencilTestEnabled(!0),i.setBlendingEnabled(!0)}}}]),n}(rt);function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var lt=function(t){Object(a.a)(n,t);var e=ct(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"dispose",value:function(){}},{key:"getGeometryType",value:function(){return k.d.LINE}},{key:"drawGeometry",value:function(t,e,n,r){var i=t.context,a=t.painter,o=t.rendererInfo,s=t.displayLevel,u=it.c.load(n.materialKey),c=function(t){return Object(p.f)(t.data,{geometry:[{location:0,name:"a_pos",count:2,type:5122},{location:1,name:"a_id",count:4,type:5121},{location:2,name:"a_color",count:4,type:5121,normalized:!0},{location:3,name:"a_offsetAndNormal",count:4,type:5120},{location:4,name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123},{location:5,name:"a_tlbr",count:4,type:5123},{location:6,name:"a_segmentDirection",count:4,type:5120},{location:7,name:"a_aux",count:2,type:5123},{location:8,name:"a_zoomRange",count:2,type:5123}]})}(u),l=c.bufferLayouts,f=c.attributes,h=a.materialManager.getMaterialProgram(t,u,"materials/line",f,r),v=1/t.pixelRatio;i.useProgram(h),this._setSharedUniforms(h,t,e),u.textureBinding&&a.textureManager.bindTextures(i,h,u);var d=Math.pow(2,s-e.key.level)/t.pixelRatio;if(h.setUniform1f("u_zoomFactor",d),h.setUniform1f("u_blur",0+v),h.setUniform1f("u_antialiasing",v),u.vvSizeMinMaxValue&&h.setUniform4fv("u_vvSizeMinMaxValue",o.vvSizeMinMaxValue),u.vvSizeScaleStops&&h.setUniform1f("u_vvSizeScaleStopsValue",o.vvSizeScaleStopsValue),u.vvSizeFieldStops){var m=o.getSizeVVFieldStops(e.key.level);h.setUniform1fv("u_vvSizeFieldStopsValues",m.values),h.setUniform1fv("u_vvSizeFieldStopsSizes",m.sizes)}u.vvSizeUnitValue&&h.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",o.vvSizeUnitValueToPixelsRatio),u.vvColor&&(h.setUniform1fv("u_vvColorValues",o.vvColorValues),h.setUniform4fv("u_vvColors",o.vvColors)),u.vvOpacity&&(h.setUniform1fv("u_vvOpacityValues",o.vvOpacityValues),h.setUniform1fv("u_vvOpacities",o.vvOpacities)),i.setFaceCullingEnabled(!1),n.draw(i,l,f)}}]),n}(rt);function ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var ht=function(t){Object(a.a)(n,t);var e=ft(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"dispose",value:function(){}},{key:"getGeometryType",value:function(){return k.d.MARKER}},{key:"drawGeometry",value:function(t,e,n,r){var i=t.context,a=t.painter,o=t.rendererInfo,s=t.state,u=it.d.load(n.materialKey),c=function(t){return Object(p.f)(t.data,{geometry:[{location:0,name:"a_pos",count:2,type:5122},{location:1,name:"a_vertexOffset",count:2,type:5122},{location:2,name:"a_texCoords",count:2,type:5123},{location:3,name:"a_bitSetAndDistRatio",count:2,type:5123},{location:4,name:"a_id",count:4,type:5121},{location:5,name:"a_color",count:4,type:5121,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:5121,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:5121},{location:8,name:"a_zoomRange",count:2,type:5123}]})}(u),l=c.bufferLayouts,f=c.attributes,h=a.materialManager.getMaterialProgram(t,u,"materials/icon",f,r);i.useProgram(h),u.textureBinding&&a.textureManager.bindTextures(i,h,u,!0),this._setSharedUniforms(h,t,e);var v=u.vvRotation?s.displayViewMat3:s.displayMat3;if(h.setUniformMatrix3fv("u_displayMat3",v),u.vvSizeMinMaxValue&&h.setUniform4fv("u_vvSizeMinMaxValue",o.vvSizeMinMaxValue),u.vvSizeScaleStops&&h.setUniform1f("u_vvSizeScaleStopsValue",o.vvSizeScaleStopsValue),u.vvSizeFieldStops){var d=o.getSizeVVFieldStops(e.key.level);h.setUniform1fv("u_vvSizeFieldStopsValues",d.values),h.setUniform1fv("u_vvSizeFieldStopsSizes",d.sizes)}u.vvSizeUnitValue&&h.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",o.vvSizeUnitValueToPixelsRatio),u.vvColor&&(h.setUniform1fv("u_vvColorValues",o.vvColorValues),h.setUniform4fv("u_vvColors",o.vvColors)),u.vvOpacity&&(h.setUniform1fv("u_vvOpacityValues",o.vvOpacityValues),h.setUniform1fv("u_vvOpacities",o.vvOpacities)),u.vvRotation&&h.setUniform1f("u_vvRotationType","geographic"===o.vvMaterialParameters.vvRotationType?0:1),n.draw(i,l,f)}}]),n}(rt);function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var dt=function(t){Object(a.a)(n,t);var e=vt(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"dispose",value:function(){}},{key:"getGeometryType",value:function(){return k.d.TEXT}},{key:"drawGeometry",value:function(t,e,n,r){var i=t.context,a=t.painter,o=t.rendererInfo,s=t.state,u=it.f.load(n.materialKey),c=function(t){return Object(p.f)(t.data,{geometry:[{location:0,name:"a_pos",count:2,type:5122},{location:1,name:"a_id",count:4,type:5121},{location:2,name:"a_color",count:4,type:5121,normalized:!0},{location:3,name:"a_haloColor",count:4,type:5121,normalized:!0},{location:4,name:"a_texFontSize",count:4,type:5121},{location:5,name:"a_aux",count:4,type:5120},{location:6,name:"a_zoomRange",count:2,type:5123},{location:7,name:"a_vertexOffset",count:2,type:5122},{location:8,name:"a_texCoords",count:2,type:5123}]})}(u),l=c.bufferLayouts,f=c.attributes,h=a.materialManager.getMaterialProgram(t,u,"materials/text",f,r);if(i.useProgram(h),this._setSharedUniforms(h,t,e),a.textureManager.bindTextures(i,h,u),h.setUniformMatrix3fv("u_displayMat3",s.displayMat3),h.setUniformMatrix3fv("u_displayViewMat3",s.displayViewMat3),u.vvSizeMinMaxValue&&h.setUniform4fv("u_vvSizeMinMaxValue",o.vvSizeMinMaxValue),u.vvSizeScaleStops&&h.setUniform1f("u_vvSizeScaleStopsValue",o.vvSizeScaleStopsValue),u.vvSizeFieldStops){var v=o.getSizeVVFieldStops(e.key.level);h.setUniform1fv("u_vvSizeFieldStopsValues",v.values),h.setUniform1fv("u_vvSizeFieldStopsSizes",v.sizes)}u.vvSizeUnitValue&&h.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",o.vvSizeUnitValueToPixelsRatio),u.vvColor&&(h.setUniform1fv("u_vvColorValues",o.vvColorValues),h.setUniform4fv("u_vvColors",o.vvColors)),u.vvOpacity&&(h.setUniform1fv("u_vvOpacityValues",o.vvOpacityValues),h.setUniform1fv("u_vvOpacities",o.vvOpacities)),u.vvRotation&&h.setUniform1f("u_vvRotationType","geographic"===o.vvMaterialParameters.vvRotationType?0:1),h.setUniform1f("u_isHalo",1),n.draw(i,l,f),h.setUniform1f("u_isHalo",0),n.draw(i,l,f)}}]),n}(rt),mt=n("mK0O"),pt=n("jgfI");function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){Object(mt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var bt=function(t){Object(a.a)(n,t);var e=gt(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._desc={lut:{vsPath:"raster/lut",fsPath:"raster/lut",attributes:new Map([["a_position",0],["a_texcoord",1]])},stretch:{vsPath:"raster/stretch",fsPath:"raster/stretch",attributes:new Map([["a_position",0],["a_texcoord",1]])},hillshade:{vsPath:"raster/hillshade",fsPath:"raster/hillshade",attributes:new Map([["a_position",0],["a_texcoord",1]])}},t._rendererUniformInfos=new Map,t}return Object(i.a)(n,[{key:"dispose",value:function(){this._quad&&this._quad.dispose()}},{key:"prepareState",value:function(t,e){var n=t.context;n.setBlendingEnabled(!0),n.setBlendFunctionSeparate(1,771,1,771),n.setColorMask(!0,!0,!0,!0),n.setStencilWriteMask(0),n.setStencilTestEnabled(!0),n.setStencilFunction(514,e.stencilRef,255)}},{key:"draw",value:function(t,e){var n;if(e.source&&!e.suspended){t.timeline.begin(this.name);var r=!(null!=(n=t.context.capabilities.textureFloat)&&n.textureFloatLinear);e.updateTexture(t);var i=this.getShaderVariations(e,r),a=t.painter.materialManager.getProgram(t,this._desc[e.symbolizerParameters.type],i);this.drawWithProgram(t.context,a,e),t.timeline.end(this.name)}}},{key:"drawWithProgram",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this._quad||(this._quad=new c.a(t,[0,0,1,0,0,1,1,1]));var o=n.symbolizerParameters,s=n.transformGrid,u=n.width,l=n.height,f=n.opacity,h=o.type;t.useProgram(e);var v=this.getShaderVariations(n),d=this.getUniformInfos(h,t,e,v),m=n.getTextures(),p=m.names,_=m.textures;Object(pt.j)(t,e,p,_);var y=Object(pt.d)(r,i),g=Object(pt.f)(s,[u,l],[n.source.width,n.source.height],f,a);if(Object(pt.k)(e,d,yt(yt({u_coordScale:n.coordScale,u_dvsMat3:n.transforms.dvs},y),g)),o.colormap){var b=o.colormap,x=o.colormapOffset,O=Object(pt.e)(b,x);Object(pt.k)(e,d,O)}if("stretch"===o.type){var S=Object(pt.h)(o);Object(pt.k)(e,d,S)}else if("hillshade"===o.type){var w=Object(pt.g)(o);Object(pt.k)(e,d,w)}this._quad.draw()}},{key:"getUniformInfos",value:function(t,e,n,r){var i=r.length>0?t+"-"+r.join("-"):t;if(this._rendererUniformInfos.has(i))return this._rendererUniformInfos.get(i);var a=Object(pt.i)(e,n);return this._rendererUniformInfos.set(i,a),a}},{key:"getShaderVariations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];return"cubic"===t.interpolation?n.push("bicubic"):e&&"bilinear"===t.interpolation&&n.push("bilinear"),t.isRendereredSource?n.push("noop"):t.symbolizerParameters.colormap&&n.push("applyColormap"),t.transformGrid&&n.push("applyProjection"),n}}]),n}(l.a),xt={marker:ht,line:lt,fill:ot,text:dt,label:ut,clip:b,stencil:O.a,bitmap:v,raster:bt,tileInfo:x.a,vtlBackground:D,vtlFill:Y,vtlLine:W,vtlCircle:V,vtlSymbol:Q}},hLiK:function(t,e,n){"use strict";var r=n("hisu"),i=n("yBJb"),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(r.a)(this,t),this.x=e,this.y=n,this.width=i,this.height=a}return Object(i.a)(t,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}]),t}();e.a=a},j92Z:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r=n("eHo5");function i(t){var e="";for(var n in t){var r=t[n];if("boolean"==typeof r)r&&(e+="#define ".concat(n,"\n"));else if("number"==typeof r)e+="#define ".concat(n," ").concat(r.toFixed(),"\n");else if("object"==typeof r){var i=r.options,a=0;for(var o in i)e+="#define ".concat(i[o]," ").concat((a++).toFixed(),"\n");e+="#define ".concat(n," ").concat(i[r.value],"\n")}}return e}function a(t,e,n,i){n=n||{},i=i||"";var a="function"==typeof e.shaders?e.shaders(n):e.shaders;return new r.a(t,i+a.vertexShader,i+a.fragmentShader,e.attributes)}},jCQE:function(t,e,n){"use strict";n.d(e,"a",(function(){return z})),n.d(e,"b",(function(){return F})),n.d(e,"c",(function(){return U}));var r=n("6CzD"),i=n("mK0O"),a=n("hisu"),o=n("yBJb"),s=n("WYis"),u=n("TM+E"),c=n("6J1V"),l=n("jga1"),f=n("CHlC"),h=n("kMo5"),v=n("P+uj"),d=n("+MdM"),m=n("XKgO"),p=n("aic5"),_=n("8a6k"),y=n("34en"),g=n("vlc1");function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(v.a)(t);if(e){var i=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function x(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var S=Math.PI/180,w=u.a.getLogger("esri.symbols.cim.CIMSymbolDrawHelper"),C=function(){function t(e){Object(a.a)(this,t),this._t=e}return Object(o.a)(t,[{key:"clone",value:function(){return new t(this._t.slice())}},{key:"transform",value:function(t){var e=this._t;return[e[0]*t[0]+e[1]*t[1]+e[2],e[3]*t[0]+e[4]*t[1]+e[5]]}},{key:"scale",value:function(t,e){var n=this._t;return n[0]*=t,n[1]*=t,n[2]*=t,n[3]*=e,n[4]*=e,n[5]*=e,this}},{key:"scaleRatio",value:function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}},{key:"translate",value:function(t,e){var n=this._t;return n[2]+=t,n[5]+=e,this}},{key:"rotate",value:function(e){return this.multiply(t.createRotate(e))}},{key:"multiply",value:function(t){var e=this._t,n=t._t,r=e[0]*n[0]+e[3]*n[1],i=e[1]*n[0]+e[4]*n[1],a=e[2]*n[0]+e[5]*n[1]+n[2],o=e[0]*n[3]+e[3]*n[4],s=e[1]*n[3]+e[4]*n[4],u=e[2]*n[3]+e[5]*n[4]+n[5];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,this}}],[{key:"createIdentity",value:function(){return new t([1,0,0,0,1,0])}},{key:"createScale",value:function(e,n){return new t([e,0,0,0,n,0])}},{key:"createTranslate",value:function(e,n){return new t([0,0,e,0,0,n])}},{key:"createRotate",value:function(e){var n=Math.cos(e),r=Math.sin(e);return new t([n,-r,0,r,n,0])}}]),t}(),M=function(){function t(e){Object(a.a)(this,t),this._transfos=[],this._sizeTransfos=[],this._transfos.push(e||C.createIdentity()),this._sizeTransfos.push(e?e.scaleRatio():1)}return Object(o.a)(t,[{key:"transformPt",value:function(t){return this._transfos[this._transfos.length-1].transform(t)}},{key:"transformSize",value:function(t){return t*this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"back",value:function(){return this._transfos[this._transfos.length-1]}},{key:"push",value:function(t,e){var n=e?t.scaleRatio():1;t.multiply(this.back()),this._transfos.push(t),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*n)}},{key:"pop",value:function(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}},{key:"drawSymbol",value:function(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(t,e)}}},{key:"drawMultiLayerSymbol",value:function(t,e){if(t){var n=t.symbolLayers;if(n){var r=t.effects;if(r){var i=this.executeEffects(r,e);if(i)for(var a=i.next();a;)this.drawSymbolLayers(n,a),a=i.next()}else this.drawSymbolLayers(n,e)}}}},{key:"executeEffects",value:function(t,e){var n,r=new _.a(e),i=x(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=Object(y.a)(a);o&&(r=o.execute(r,a,1))}}catch(s){i.e(s)}finally{i.f()}return r}},{key:"drawSymbolLayers",value:function(t,e){for(var n=t.length;n--;){var r=t[n];if(r&&!1!==r.enable){var i=r.effects;if(i){var a=this.executeEffects(i,e);if(a)for(var o=a.next();o;)this.drawSymbolLayer(r,o),o=a.next()}else this.drawSymbolLayer(r,e)}}}},{key:"drawSymbolLayer",value:function(t,e){switch(t.type){case"CIMSolidFill":this.drawSolidFill(e,t.color);break;case"CIMHatchFill":this.drawHatchFill(t,e);break;case"CIMSolidStroke":this.drawSolidStroke(e,t.color,t.width,t.capStyle,t.joinStyle,t.miterLimit);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(t,e)}}},{key:"drawHatchFill",value:function(t,e){var n=this._buildHatchPolyline(t,e,1);n&&(this.pushClipPath(e),this.drawMultiLayerSymbol(t.lineSymbol,n),this.popClipPath())}},{key:"drawMarkerLayer",value:function(t,e){var n=t.markerPlacement;if(n){var r=Object(y.b)(n);if(r){var i="CIMMarkerPlacementInsidePolygon"===n.type;i&&this.pushClipPath(e);var a=r.execute(e,n,1);if(a)for(var o=a.next();o;)this.drawMarker(t,o),o=a.next();i&&this.popClipPath()}}else{var s=new l.a;s.tx=e.x,s.ty=e.y,this.drawMarker(t,s)}}},{key:"drawMarker",value:function(t,e){switch(t.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(t,e);break;case"CIMVectorMarker":this.drawVectorMarker(t,e)}}},{key:"drawPictureMarker",value:function(t,e){if(t){var n=t.size||10,r=C.createIdentity(),i=t.anchorPoint;if(i){var a=i.x,o=i.y;"Absolute"!==t.anchorPointUnits&&(a*=n,o*=n),r.translate(-a,-o)}t.rotation&&r.rotate(t.rotation*S),r.translate(t.offsetX||0,t.offsetY||0),r.translate(e.tx,e.ty),this.push(r,!1),this.drawImage(t.url,n,t.scaleX),this.pop()}}},{key:"drawVectorMarker",value:function(t,e){if(t){var n=t.markerGraphics;if(n){var r=t.size,i=t.frame,a=i?i.ymax-i.ymin:0,o=r&&a?r/a:1,s=C.createIdentity();i&&s.translate(.5*-(i.xmax+i.xmin),.5*-(i.ymax+i.ymin));var u=t.anchorPoint;if(u){var c=u.x,l=u.y;"Absolute"!==t.anchorPointUnits?i&&(c*=i.xmax-i.xmin,l*=i.ymax-i.ymin):(c/=o,l/=o),s.translate(-c,-l)}1!==o&&s.scale(o,o),t.rotation&&s.rotate(t.rotation*S),s.translate(t.offsetX||0,t.offsetY||0),s.translate(e.tx,e.ty),this.push(s,t.scaleSymbolsProportionally);var f,h=x(n);try{for(h.s();!(f=h.n()).done;){var v=f.value;v&&v.symbol&&v.geometry||w.error("Invalid marker graphic",v),this.drawSymbol(v.symbol,v.geometry)}}catch(d){h.e(d)}finally{h.f()}this.pop()}}}},{key:"_buildHatchPolyline",value:function(t,e,n){var r=(void 0!==t.separation?t.separation:4)*n,i=void 0!==t.rotation?t.rotation:0;if(0===r)return null;r<0&&(r=-r);for(var a=0,o=.5*r;a>o;)a-=r;for(;a<-o;)a+=r;var s=Object(d.g)();Object(m.a)(s,e),s[0]-=o,s[1]-=o,s[2]+=o,s[3]+=o;for(var u=[[s[0],s[1]],[s[0],s[3]],[s[2],s[3]],[s[2],s[1]]];i>180;)i-=180;for(;i<0;)i+=180;var c,l,f,h,v=Math.cos(i*S),p=Math.sin(i*S),_=-r*p,y=r*v;a=(void 0!==t.offsetX?t.offsetX*n:0)*p-(void 0!==t.offsetY?t.offsetY*n:0)*v,c=f=Number.MAX_VALUE,l=h=-Number.MAX_VALUE;for(var g=0,b=u;g<b.length;g++){var x=b[g],O=x[0],w=x[1],C=v*O+p*w,M=-p*O+v*w;c=Math.min(c,C),f=Math.min(f,M),l=Math.max(l,C),h=Math.max(h,M)}for(var P=v*c-p*(f=Math.floor(f/r)*r)-_*a/r,k=p*c+v*f-y*a/r,T=v*l-p*f-_*a/r,j=p*l+v*f-y*a/r,A=1+Math.round((h-f)/r),I=[],D=0;D<A;D++)P+=_,k+=y,T+=_,j+=y,I.push([[P,k],[T,j]]);return{paths:I}}}]),t}(),P=function(t){Object(f.a)(n,t);var e=b(n);function n(){var t;return Object(a.a)(this,n),(t=e.call(this)).reset(),t}return Object(o.a)(n,[{key:"reset",value:function(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}},{key:"envelope",value:function(){return new g.a(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}},{key:"drawSolidFill",value:function(t){if(t&&!(this._clipCount>0))if(Object(p.g)(t))this._processPath(t.rings,0);else if(Object(p.h)(t))this._processPath(t.paths,0);else if(Object(p.d)(t)){var e=T(t);e&&this._processPath(e.rings,0)}}},{key:"drawSolidStroke",value:function(t,e,n){if(t&&!(this._clipCount>0)){var r=.5*this.transformSize(n);if(Object(p.g)(t))this._processPath(t.rings,r);else if(Object(p.h)(t))this._processPath(t.paths,r);else if(Object(p.d)(t)){var i=T(t);i&&this._processPath(i.rings,r)}}}},{key:"pushClipPath",value:function(t){this.drawSolidFill(t),++this._clipCount}},{key:"popClipPath",value:function(){--this._clipCount}},{key:"drawImage",value:function(t,e,n){var r=e/2;this._merge(this.transformPt([0,0]),r)}},{key:"_processPath",value:function(t,e){if(t){var n,r=x(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=i?i.length:0;if(a>1){this._merge(this.transformPt(i[0]),e);for(var o=1;o<a;++o)this._merge(this.transformPt(i[o]),e)}}}catch(s){r.e(s)}finally{r.f()}}}},{key:"_merge",value:function(t,e){t[0]-e<this._xmin&&(this._xmin=t[0]-e),t[0]+e>this._xmax&&(this._xmax=t[0]+e),t[1]-e<this._ymin&&(this._ymin=t[1]-e),t[1]+e>this._ymax&&(this._ymax=t[1]+e)}}]),n}(M),k=function(t){Object(f.a)(n,t);var e=b(n);function n(t,r){var i;return Object(a.a)(this,n),(i=e.call(this,r))._ctx=t,i}return Object(o.a)(n,[{key:"drawSolidFill",value:function(t,e){if(t){if(Object(p.g)(t))this._buildPath(t.rings,!0);else if(Object(p.h)(t))this._buildPath(t.paths,!0);else{if(!Object(p.d)(t))return;this._buildPath(T(t).rings,!0)}var n=this._ctx;n.fillStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",n.fill("evenodd")}}},{key:"drawSolidStroke",value:function(t,e,n,r,i,a){if(t&&e&&0!==n){if(Object(p.g)(t))this._buildPath(t.rings,!0);else if(Object(p.h)(t))this._buildPath(t.paths,!1);else{if(!Object(p.d)(t))return;this._buildPath(T(t).rings,!0)}var o=this._ctx;o.strokeStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",o.lineWidth=this.transformSize(n)+.5,this._setCapStyle(r),this._setJoinStyle(i),o.miterLimit=a,o.stroke()}}},{key:"pushClipPath",value:function(t){if(this._ctx.save(),Object(p.g)(t))this._buildPath(t.rings,!0);else if(Object(p.h)(t))this._buildPath(t.paths,!0);else{if(!Object(p.d)(t))return;this._buildPath(T(t).rings,!0)}this._ctx.clip("evenodd")}},{key:"popClipPath",value:function(){this._ctx.restore()}},{key:"drawImage",value:function(t,e,n){}},{key:"_buildPath",value:function(t,e){var n=this._ctx;if(n.beginPath(),t){var r,i=x(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a?a.length:0;if(o>1){var s=this.transformPt(a[0]);n.moveTo(s[0],s[1]);for(var u=1;u<o;++u)s=this.transformPt(a[u]),n.lineTo(s[0],s[1]);e&&n.closePath()}}}catch(c){i.e(c)}finally{i.f()}}}},{key:"_setCapStyle",value:function(t){switch(t){case"Butt":this._ctx.lineCap="butt";break;case"Round":this._ctx.lineCap="round";break;case"Square":this._ctx.lineCap="square"}}},{key:"_setJoinStyle",value:function(t){switch(t){case"Bevel":this._ctx.lineJoin="bevel";break;case"Round":this._ctx.lineJoin="round";break;case"Miter":this._ctx.lineJoin="miter"}}}]),n}(M),T=function(t){return t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null},j=n("zEHB");function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var E=Math.PI,R=E/2,L=u.a.getLogger("esri.symbols.cim.CIMSymbolHelper");function V(t,e){switch(e.type){case"CIMSymbolReference":t.drawSymbol(e.symbol,{type:"point",x:0,y:0});break;case"CIMPointSymbol":t.drawSymbol(e,{type:"point",x:0,y:0});break;case"CIMTextSymbol":break;case"CIMVectorMarker":var n=new l.a;t.drawMarker(e,n)}return t.envelope()}var z=function(){function t(){Object(a.a)(this,t)}return Object(o.a)(t,null,[{key:"getEnvelope",value:function(t){var e=new P;if(Array.isArray(t)){var n,r,i=I(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;n?n.union(V(e,a)):n=V(e,a)}}catch(o){i.e(o)}finally{i.f()}return n}return V(e,t)}},{key:"getTextureAnchor",value:function(t){var e=this.getEnvelope(t);if(!e||e.width<=0||e.height<=0)return[0,0,0];var n=96/72,r=(e.x+.5*e.width)*n,i=-(e.y+.5*e.height)*n,a=e.width*n+2,o=e.height*n+2;return[r/a,i/o,o]}},{key:"rasterize",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=n||this.getEnvelope(e);if(!i||i.width<=0||i.height<=0)return[null,0,0,0,0];var a=96/72,o=(i.x+.5*i.width)*a,s=(i.y+.5*i.height)*a;t.width=i.width*a,t.height=i.height*a,n||(t.width+=2,t.height+=2);var u=t.getContext("2d"),c=C.createScale(a,-a);c.translate(.5*t.width-o,.5*t.height+s);var f=new k(u,c);switch(e.type){case"CIMPointSymbol":var h={type:"point",x:0,y:0};f.drawSymbol(e,h);break;case"CIMVectorMarker":var v=new l.a;f.drawMarker(e,v)}var d=u.getImageData(0,0,t.width,t.height),m=new Uint8Array(d.data);if(r)for(var p,_=0;_<m.length;_+=4)p=m[_+3]/255,m[_]=m[_]*p,m[_+1]=m[_+1]*p,m[_+2]=m[_+2]*p;return[m,t.width,t.height,-o/t.width,-s/t.height]}},{key:"fromSimpleMarker",value:function(t){var e,n,r,i=50,a=t.style;if("circle"===a||"esriSMSCircle"===a){var o=Math.acos(.995),s=Math.ceil(E/o/4);0===s&&(s=1),o=R/s,s*=4;var u=[];u.push([i,0]);for(var c=1;c<s;c++)u.push([i*Math.cos(c*o),-50*Math.sin(c*o)]);u.push([i,0]),e={rings:[u]},n={xmin:-50,ymin:-50,xmax:i,ymax:i}}else if("cross"===a||"esriSMSCross"===a){e={rings:[[[0,i],[0,0],[i,0],[i,-0],[0,-0],[0,-50],[-0,-50],[-0,-0],[-50,-0],[-50,0],[-0,0],[-0,i],[0,i]]]},n={xmin:-50,ymin:-50,xmax:i,ymax:i}}else if("diamond"===a||"esriSMSDiamond"===a)e={rings:[[[-50,0],[0,i],[i,0],[0,-50],[-50,0]]]},n={xmin:-50,ymin:-50,xmax:i,ymax:i};else if("square"===a||"esriSMSSquare"===a)e={rings:[[[-50,-50],[-50,i],[i,i],[i,-50],[-50,-50]]]},n={xmin:-50,ymin:-50,xmax:i,ymax:i};else if("x"===a||"esriSMSX"===a){e={rings:[[[0,0],[50,i],[i,50],[0,0],[i,-50],[50,-50],[0,-0],[-50,-50],[-50,-50],[-0,0],[-50,50],[-50,i],[0,0]]]},n={xmin:-50,ymin:-50,xmax:i,ymax:i}}else if("triangle"===a||"esriSMSTriangle"===a){var l=57.735026918962575,f=-l,h=2/3*100-100;e={rings:[[[f,h],[0,2/3*100],[l,h],[f,h]]]},n={xmin:f,ymin:h,xmax:l,ymax:2/3*100}}else"arrow"!==a&&"esriSMSArrow"!==a||(e={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},n={xmin:-50,ymin:-50,xmax:i,ymax:i});if(e&&n){var v=[{type:"CIMSolidFill",enable:!0,color:t.color}];t.outline&&v.push({type:"CIMSolidStroke",enable:!0,width:t.outline.width,color:t.outline.color});var d={type:"CIMPolygonSymbol",symbolLayers:v};r={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:t.angle,size:t.size,offsetX:t.xoffset,offsetY:t.yoffset,frame:n,markerGraphics:[{type:"CIMMarkerGraphic",geometry:e,symbol:d}]}]}}return r}},{key:"fromCIMHatchFill",value:function(t){for(var e=void 0!==t.separation?t.separation:4,n=e/2,r=this._getLineSymbolPeriod(t.lineSymbol)||4;r<4;)r*=2;var i=r/2;return{type:"CIMVectorMarker",frame:{xmin:-i,xmax:i,ymin:-n,ymax:n},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-i,0],[i,0]]]},symbol:t.lineSymbol}],size:e}}},{key:"_getLineSymbolPeriod",value:function(t){if(t){var e=this._getEffectsRepeat(t.effects);if(e)return e;if(t.symbolLayers){var n,r=I(t.symbolLayers);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this._getEffectsRepeat(i.effects);if(a)return a;if(i){var o=this._getPlacementRepeat(i.markerPlacement);if(o)return o}}}catch(s){r.e(s)}finally{r.f()}}}return 0}},{key:"_getEffectsRepeat",value:function(t){if(t){var e,n=I(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r)switch(r.type){case"CIMGeometricEffectDashes":var i=r.dashTemplate;if(i&&i.length){var a,o=0,s=I(i);try{for(s.s();!(a=s.n()).done;){o+=a.value}}catch(u){s.e(u)}finally{s.f()}return 1&i.length&&(o*=2),o}break;case"CIMGeometricEffectWave":return r.period;default:L.error("unsupported geometric effect type ".concat(r.type))}}}catch(u){n.e(u)}finally{n.f()}}return 0}},{key:"_getPlacementRepeat",value:function(t){if(t)switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":var e=t.placementTemplate;if(e&&e.length){var n,r=0,i=I(e);try{for(i.s();!(n=i.n()).done;){r+=n.value}}catch(a){i.e(a)}finally{i.f()}return 1&e.length&&(r*=2),r}}return 0}},{key:"fromCIMInsidePolygon",value:function(t){var e,n,r,a,o=t.markerPlacement,s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({type:t.type},t);return s.markerPlacement=null,s.anchorPoint=null,!0===o.shiftOddRows?(n=o.stepX/2,r=o.stepY,a=2*o.stepY,e=[{x:-n,y:0},{x:n,y:0},{x:0,y:r},{x:0,y:-r}].map((function(t){return{type:"CIMMarkerGraphic",geometry:t,symbol:{type:"CIMPointSymbol",symbolLayers:[s]}}}))):(n=o.stepX/2,r=o.stepY/2,a=o.stepY,e=[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMPointSymbol",symbolLayers:[s]}}]),{type:"CIMVectorMarker",frame:{xmin:-n,xmax:n,ymin:-r,ymax:r},markerGraphics:e,size:a}}},{key:"getFillColor",value:function(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers){var n,r=I(e.symbolLayers);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=t.getFillColor(i);if(null!=a)return a}}catch(o){r.e(o)}finally{r.f()}}break;case"CIMTextSymbol":return t.getFillColor(e.symbol);case"CIMSolidFill":return e.color}}},{key:"getStrokeColor",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var n,r=I(e.symbolLayers);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=t.getStrokeColor(i);if(void 0!==a)return a}}catch(o){r.e(o)}finally{r.f()}}break;case"CIMTextSymbol":return t.getStrokeColor(e.symbol);case"CIMSolidStroke":return e.color}}},{key:"getStrokeWidth",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var n,r=I(e.symbolLayers);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=t.getStrokeWidth(i);if(void 0!==a)return a}}catch(o){r.e(o)}finally{r.f()}}break;case"CIMTextSymbol":return t.getStrokeWidth(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}},{key:"getSize",value:function(e){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var n=0;if(e.symbolLayers){var r,i=I(e.symbolLayers);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=t.getSize(a);o>n&&(n=o)}}catch(s){i.e(s)}finally{i.f()}}return n;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":return e.width;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":return e.size}}},{key:"getMarkerScaleRatio",value:function(t){if(t)switch(t.type){case"CIMVectorMarker":if(!1!==t.scaleSymbolsProportionally&&t.frame){var e=t.frame.ymax-t.frame.ymin;return t.size/e}}return 1}}]),t}(),U=function(){function t(){Object(a.a)(this,t)}return Object(o.a)(t,null,[{key:"rasterizeSimpleFill",value:function(t,e,n){"solid"!==e&&"none"!==e&&"esriSFSSolid"!==e&&"esriSFSNull"!==e||console.error("Unexpected: style does not require rasterization");var r=Object(c.p)(Math.ceil(n)),i=this._isHorizontalOrVertical(e)?8*r:16*r,a=2*r;t.width=i,t.height=i;var o=t.getContext("2d");o.strokeStyle="#FFFFFF",o.lineWidth=r,o.beginPath(),"vertical"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSVertical"!==e||(o.moveTo(i/2,-a),o.lineTo(i/2,i+a)),"horizontal"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSHorizontal"!==e||(o.moveTo(-a,i/2),o.lineTo(i+a,i/2)),"forward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSDiagonalCross"!==e&&"esriSFSForwardDiagonal"!==e||(o.moveTo(-a,-a),o.lineTo(i+a,i+a),o.moveTo(i-a,-a),o.lineTo(i+a,a),o.moveTo(-a,i-a),o.lineTo(a,i+a)),"backward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSBackwardDiagonal"!==e&&"esriSFSDiagonalCross"!==e||(o.moveTo(i+a,-a),o.lineTo(-a,i+a),o.moveTo(a,-a),o.lineTo(-a,a),o.moveTo(i+a,i-a),o.lineTo(i-a,i+a)),o.stroke();for(var s,u=o.getImageData(0,0,t.width,t.height),l=new Uint8Array(u.data),f=0;f<l.length;f+=4)s=l[f+3]/255,l[f]=l[f]*s,l[f+1]=l[f+1]*s,l[f+2]=l[f+2]*s;return[l,t.width,t.height]}},{key:"rasterizeSimpleLine",value:function(t,e){var n;switch(e){case"butt":n="Butt";break;case"square":n="Square";break;default:n="Round"}var r,i="Butt"===n;switch(t){case"dash":case"esriSLSDash":r=i?[4,3]:[3,4];break;case"dash-dot":case"esriSLSDashDot":r=i?[4,3,1,3]:[3,4,0,4];break;case"dot":case"esriSLSDot":r=i?[1,3]:[0,4];break;case"long-dash":case"esriSLSLongDash":r=i?[8,3]:[7,4];break;case"long-dash-dot":case"esriSLSLongDashDot":r=i?[8,3,1,3]:[7,4,0,4];break;case"long-dash-dot-dot":case"esriSLSDashDotDot":r=i?[8,3,1,3,1,3]:[7,4,0,4,0,4];break;case"short-dash":case"esriSLSShortDash":r=i?[4,1]:[3,2];break;case"short-dash-dot":case"esriSLSShortDashDot":r=i?[4,1,1,1]:[3,2,0,2];break;case"short-dash-dot-dot":case"esriSLSShortDashDotDot":r=i?[4,1,1,1,1,1]:[3,2,0,2,0,2];break;case"short-dot":case"esriSLSShortDot":r=i?[1,1]:[0,2];break;case"solid":case"esriSLSSolid":case"none":L.error("Unexpected: style does not require rasterization"),r=[0,0];break;default:L.error("Tried to rasterize SLS, but found an unexpected style: ".concat(t,"!")),r=[0,0]}return this.rasterizeDash(r,n)}},{key:"rasterizeDash",value:function(t,e){var n="Butt"===e,i="Square"===e,a=!n&&!i;t.length%2==1&&(t=[].concat(Object(r.a)(t),Object(r.a)(t)));var o,s=15.5,u=0,c=I(t);try{for(c.s();!(o=c.n()).done;){u+=o.value}}catch(P){c.e(P)}finally{c.f()}var l,f=Math.round(u*s),h=new Float32Array(31*f),v=7.75,d=0,m=0,p=.5,_=!0,y=I(t);try{for(y.s();!(l=y.n()).done;){var g=l.value;for(d=m,m+=g*s;p<=m;){for(var b=.5;b<31;){var x=(b-.5)*f+p-.5,O=a?(b-s)*(b-s):Math.abs(b-s);h[x]=_?n?Math.max(Math.max(d+v-p,O),Math.max(p-m+v,O)):O:a?Math.min((p-d)*(p-d)+O,(p-m)*(p-m)+O):i?Math.min(Math.max(p-d,O),Math.max(m-p,O)):Math.min(Math.max(p-d+v,O),Math.max(m+v-p,O)),b++}p++}_=!_}}catch(P){y.e(P)}finally{y.f()}for(var S=h.length,w=new Uint8Array(4*S),C=0;C<S;++C){var M=(a?Math.sqrt(h[C]):h[C])/s;Object(j.a)(M,w,4*C)}return[w,f,31]}},{key:"_isHorizontalOrVertical",value:function(t){return"vertical"===t||"horizontal"===t||"cross"===t||"esriSFSCross"===t||"esriSFSVertical"===t||"esriSFSHorizontal"===t}}]),t}(),F=function(){function t(){Object(a.a)(this,t)}return Object(o.a)(t,null,[{key:"findApplicableOverrides",value:function(e,n,r){if(n){if(e.primitiveName){var i,a=!1,o=I(r);try{for(o.s();!(i=o.n()).done;){if(i.value.primitiveName===e.primitiveName){a=!0;break}}}catch(O){o.e(O)}finally{o.f()}if(!a){var s,u=I(n);try{for(u.s();!(s=u.n()).done;){var c=s.value;c.primitiveName===e.primitiveName&&r.push(c)}}catch(O){u.e(O)}finally{u.f()}}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects){var l,f=I(e.effects);try{for(f.s();!(l=f.n()).done;){var h=l.value;t.findApplicableOverrides(h,n,r)}}catch(O){f.e(O)}finally{f.f()}}if(e.symbolLayers){var v,d=I(e.symbolLayers);try{for(d.s();!(v=d.n()).done;){var m=v.value;t.findApplicableOverrides(m,n,r)}}catch(O){d.e(O)}finally{d.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects){var p,_=I(e.effects);try{for(_.s();!(p=_.n()).done;){var y=p.value;t.findApplicableOverrides(y,n,r)}}catch(O){_.e(O)}finally{_.f()}}if(e.markerPlacement&&t.findApplicableOverrides(e.markerPlacement,n,r),"CIMVectorMarker"===e.type){if(e.markerGraphics){var g,b=I(e.markerGraphics);try{for(b.s();!(g=b.n()).done;){var x=g.value;t.findApplicableOverrides(x,n,r),t.findApplicableOverrides(x.symbol,n,r)}}catch(O){b.e(O)}finally{b.f()}}}else"CIMCharacterMarker"===e.type?t.findApplicableOverrides(e.symbol,n,r):"CIMHatchFill"===e.type&&t.findApplicableOverrides(e.lineSymbol,n,r)}}}},{key:"applyOverrides",value:function(e,n,r,i){if(n){var a=function(t){return t?t.charAt(0).toLowerCase()+t.substr(1):t};if(e.primitiveName){var o,s=I(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(u.primitiveName===e.primitiveName){var c=a(u.propertyName);if(i&&i.push({cim:e,nocapPropertyName:c,value:e[c]}),u.expression&&(u.value=t.toValue(u.propertyName,u.expression)),r){var l,f=!1,h=I(r);try{for(h.s();!(l=h.n()).done;){l.value.primitiveName===e.primitiveName&&(f=!0)}}catch(C){h.e(C)}finally{h.f()}f||r.push(u)}e[c]=u.value}}}catch(C){s.e(C)}finally{s.f()}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects){var v,d=I(e.effects);try{for(d.s();!(v=d.n()).done;){var m=v.value;t.applyOverrides(m,n,r,i)}}catch(C){d.e(C)}finally{d.f()}}if(e.symbolLayers){var p,_=I(e.symbolLayers);try{for(_.s();!(p=_.n()).done;){var y=p.value;t.applyOverrides(y,n,r,i)}}catch(C){_.e(C)}finally{_.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects){var g,b=I(e.effects);try{for(b.s();!(g=b.n()).done;){var x=g.value;t.applyOverrides(x,n,r,i)}}catch(C){b.e(C)}finally{b.f()}}if("CIMVectorMarker"===e.type&&e.markerGraphics){var O,S=I(e.markerGraphics);try{for(S.s();!(O=S.n()).done;){var w=O.value;t.applyOverrides(w,n,r,i),t.applyOverrides(w.symbol,n,r,i)}}catch(C){S.e(C)}finally{S.f()}}}}}},{key:"restoreOverrides",value:function(t){var e,n=I(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.cim[r.nocapPropertyName]=r.value}}catch(i){n.e(i)}finally{n.f()}}},{key:"buildOverrideKey",value:function(t){var e,n="",r=I(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;void 0!==i.value&&(n+="".concat(i.primitiveName).concat(i.propertyName).concat(JSON.stringify(i.value)))}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"toValue",value:function(t,e){if("DashTemplate"===t)return e.split(" ").map((function(t){return Number(t)}));if("Color"===t){var n=new s.a(e).toRgba();return n[3]*=255,n}return e}}]),t}()},jga1:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("hisu"),i=n("yBJb"),a=function(){function t(){Object(r.a)(this,t),this.setIdentity()}return Object(i.a)(t,[{key:"getAngle",value:function(){return(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)&&(this.rz=Math.atan2(this.rz_s,this.rz_c)),this.rz}},{key:"setIdentity",value:function(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rz_c=1,this.rz_s=0}},{key:"setTranslate",value:function(t,e){this.tx=t,this.ty=e}},{key:"setTranslateZ",value:function(t){this.tz=t}},{key:"setRotateCS",value:function(t,e){this.rz=void 0,this.rz_c=t,this.rz_s=e}},{key:"setRotate",value:function(t){this.rz=t,this.rz_c=void 0,this.rz_s=void 0}},{key:"setRotateY",value:function(t){this.ry=t}},{key:"setScale",value:function(t){this.s=t}},{key:"setMeasure",value:function(t){this.m=t}}]),t}()},k0fz:function(t,e,n){"use strict";var r=n("hisu"),i=n("yBJb"),a=function(){function t(e){Object(r.a)(this,t),this.readFile=e}return Object(i.a)(t,[{key:"resolveIncludes",value:function(t){return this.resolve(t)}},{key:"resolve",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(n.has(t))return n.get(t);var r=this.read(t);if(!r)throw new Error("cannot find shader file ".concat(t));for(var i=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm,a=i.exec(r),o=[];null!=a;)o.push({path:a[1],start:a.index,length:a[0].length}),a=i.exec(r);var s=0,u="";return o.forEach((function(t){u+=r.slice(s,t.start),u+=n.has(t.path)?"":e.resolve(t.path,n),s=t.start+t.length})),u+=r.slice(s),n.set(t,u),u}},{key:"read",value:function(t){return this.readFile(t)}}]),t}();e.a=a},oi1T:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return c}));var r=n("aNYv"),i=n("yzGw");function a(t,e){return Array.isArray(e)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):(t[0]=e.r,t[1]=e.g,t[2]=e.b,t[3]=e.a),t}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t[e+3];return t[e+0]*=r,t[e+1]*=r,t[e+2]*=r,n||(t[e+3]*=255),t}function s(t){return o(a([],t))}function u(t){if(!t)return 0;var e=t.r,n=t.g,r=t.b,a=t.a;return Object(i.b)(e*a,n*a,r*a,255*a)}function c(t){if(!t)return 0;var e=Object(r.a)(t,4),n=e[0],a=e[1],o=e[2],s=e[3];return Object(i.b)(n*(s/255),a*(s/255),o*(s/255),s)}},pcZT:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return r}));var r={Base64:0,Hex:1,String:2,Raw:3};function i(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function a(t){for(var e=[],n=0,r=8*t.length;n<r;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e}function o(t){for(var e=[],n=0,r=32*t.length;n<r;n+=8)e.push(String.fromCharCode(t[n>>5]>>>n%32&255));return e.join("")}function s(t){for(var e="0123456789abcdef",n=[],r=0,i=4*t.length;r<i;r++)n.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return n.join("")}function u(t){for(var e=[],n=0,r=4*t.length;n<r;n+=3)for(var i=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255,a=0;a<4;a++)8*n+6*a>32*t.length?e.push("="):e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6*(3-a)&63));return e.join("")}function c(t,e,n,r,a,o){return i(function(t,e){return t<<e|t>>>32-e}(i(i(e,t),i(r,o)),a),n)}function l(t,e,n,r,i,a,o){return c(e&n|~e&r,t,e,i,a,o)}function f(t,e,n,r,i,a,o){return c(e&r|n&~r,t,e,i,a,o)}function h(t,e,n,r,i,a,o){return c(e^n^r,t,e,i,a,o)}function v(t,e,n,r,i,a,o){return c(n^(e|~r),t,e,i,a,o)}function d(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,r=-271733879,a=-1732584194,o=271733878,s=0;s<t.length;s+=16){var u=n,c=r,d=a,m=o;n=l(n,r,a,o,t[s+0],7,-680876936),o=l(o,n,r,a,t[s+1],12,-389564586),a=l(a,o,n,r,t[s+2],17,606105819),r=l(r,a,o,n,t[s+3],22,-1044525330),n=l(n,r,a,o,t[s+4],7,-176418897),o=l(o,n,r,a,t[s+5],12,1200080426),a=l(a,o,n,r,t[s+6],17,-1473231341),r=l(r,a,o,n,t[s+7],22,-45705983),n=l(n,r,a,o,t[s+8],7,1770035416),o=l(o,n,r,a,t[s+9],12,-1958414417),a=l(a,o,n,r,t[s+10],17,-42063),r=l(r,a,o,n,t[s+11],22,-1990404162),n=l(n,r,a,o,t[s+12],7,1804603682),o=l(o,n,r,a,t[s+13],12,-40341101),a=l(a,o,n,r,t[s+14],17,-1502002290),n=f(n,r=l(r,a,o,n,t[s+15],22,1236535329),a,o,t[s+1],5,-165796510),o=f(o,n,r,a,t[s+6],9,-1069501632),a=f(a,o,n,r,t[s+11],14,643717713),r=f(r,a,o,n,t[s+0],20,-373897302),n=f(n,r,a,o,t[s+5],5,-701558691),o=f(o,n,r,a,t[s+10],9,38016083),a=f(a,o,n,r,t[s+15],14,-660478335),r=f(r,a,o,n,t[s+4],20,-405537848),n=f(n,r,a,o,t[s+9],5,568446438),o=f(o,n,r,a,t[s+14],9,-1019803690),a=f(a,o,n,r,t[s+3],14,-187363961),r=f(r,a,o,n,t[s+8],20,1163531501),n=f(n,r,a,o,t[s+13],5,-1444681467),o=f(o,n,r,a,t[s+2],9,-51403784),a=f(a,o,n,r,t[s+7],14,1735328473),n=h(n,r=f(r,a,o,n,t[s+12],20,-1926607734),a,o,t[s+5],4,-378558),o=h(o,n,r,a,t[s+8],11,-2022574463),a=h(a,o,n,r,t[s+11],16,1839030562),r=h(r,a,o,n,t[s+14],23,-35309556),n=h(n,r,a,o,t[s+1],4,-1530992060),o=h(o,n,r,a,t[s+4],11,1272893353),a=h(a,o,n,r,t[s+7],16,-155497632),r=h(r,a,o,n,t[s+10],23,-1094730640),n=h(n,r,a,o,t[s+13],4,681279174),o=h(o,n,r,a,t[s+0],11,-358537222),a=h(a,o,n,r,t[s+3],16,-722521979),r=h(r,a,o,n,t[s+6],23,76029189),n=h(n,r,a,o,t[s+9],4,-640364487),o=h(o,n,r,a,t[s+12],11,-421815835),a=h(a,o,n,r,t[s+15],16,530742520),n=v(n,r=h(r,a,o,n,t[s+2],23,-995338651),a,o,t[s+0],6,-198630844),o=v(o,n,r,a,t[s+7],10,1126891415),a=v(a,o,n,r,t[s+14],15,-1416354905),r=v(r,a,o,n,t[s+5],21,-57434055),n=v(n,r,a,o,t[s+12],6,1700485571),o=v(o,n,r,a,t[s+3],10,-1894986606),a=v(a,o,n,r,t[s+10],15,-1051523),r=v(r,a,o,n,t[s+1],21,-2054922799),n=v(n,r,a,o,t[s+8],6,1873313359),o=v(o,n,r,a,t[s+15],10,-30611744),a=v(a,o,n,r,t[s+6],15,-1560198380),r=v(r,a,o,n,t[s+13],21,1309151649),n=v(n,r,a,o,t[s+4],6,-145523070),o=v(o,n,r,a,t[s+11],10,-1120210379),a=v(a,o,n,r,t[s+2],15,718787259),r=v(r,a,o,n,t[s+9],21,-343485551),n=i(n,u),r=i(r,c),a=i(a,d),o=i(o,m)}return[n,r,a,o]}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Hex,n=e||r.Base64,i=d(a(t),8*t.length);switch(n){case r.Raw:return i;case r.Hex:return s(i);case r.String:return o(i);case r.Base64:return u(i)}}},pjVo:function(t,e,n){"use strict";n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return C}));var r=n("hisu"),i=n("yBJb"),a=n("eijD"),o=n("aNYv"),s=n("NthX"),u=n.n(s),c=n("B9Yk"),l=n("0rLw"),f=n("12QT"),h=n("3p7a");function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var m=[0,0];function p(t,e){if(!e)return null;if("x"in e){var n,r,i={x:0,y:0};return n=t(e.x,e.y,m),r=Object(o.a)(n,2),i.x=r[0],i.y=r[1],null!=e.z&&(i.z=e.z),null!=e.m&&(i.m=e.m),i}if("xmin"in e){var a,s,u,c,l={xmin:0,ymin:0,xmax:0,ymax:0};return a=t(e.xmin,e.ymin,m),s=Object(o.a)(a,2),l.xmin=s[0],l.ymin=s[1],u=t(e.xmax,e.ymax,m),c=Object(o.a)(u,2),l.xmax=c[0],l.ymax=c[1],e.hasZ&&(l.zmin=e.zmin,l.zmax=e.zmax,l.hasZ=!0),e.hasM&&(l.mmin=e.mmin,l.mmax=e.mmax,l.hasM=!0),l}return"rings"in e?{rings:_(e.rings,t),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:_(e.paths,t),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:y(e.points,t),hasM:e.hasM,hasZ:e.hasZ}:void 0}function _(t,e){var n,r=[],i=v(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(y(a,e))}}catch(o){i.e(o)}finally{i.f()}return r}function y(t,e){var n,r=[],i=v(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=e(a[0],a[1],[0,0]);r.push(o),a.length>2&&o.push(a[2]),a.length>3&&o.push(a[3])}}catch(s){i.e(s)}finally{i.f()}return r}function g(t,e){return b.apply(this,arguments)}function b(){return(b=Object(a.a)(u.a.mark((function t(e,n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return r=Array.isArray(e)?e.map((function(t){var e;return null==(e=t.geometry)?void 0:e.spatialReference})):[e],t.next=5,Object(c.e)(r.map((function(t){return{source:t,dest:n}})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var x=p.bind(null,h.c),O=p.bind(null,h.g);function S(t,e,n){return t?(n||(n=e,e=t.spatialReference),Object(f.j)(e)&&Object(f.j)(n)&&!Object(f.c)(e,n)?Object(h.a)(e,n)?Object(f.n)(n)?x(t):O(t):Object(c.k)(l.a,[t],e,n,null)[0]:t):t}var w=new(function(){function t(){Object(r.a)(this,t),this._jobs=[],this._timer=null,this._process=this._process.bind(this)}var e;return Object(i.a)(t,[{key:"push",value:(e=Object(a.a)(u.a.mark((function t(e,n,r){var i,a=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.length&&n&&r&&!Object(f.c)(n,r)){t.next=2;break}return t.abrupt("return",e);case 2:return i={geometries:e,inSpatialReference:n,outSpatialReference:r,resolve:null},t.abrupt("return",(this._jobs.push(i),new Promise((function(t){i.resolve=t,null===a._timer&&(a._timer=setTimeout(a._process,10))}))));case 4:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"_process",value:function(){this._timer=null;var t=this._jobs.shift();if(t){var e=t.geometries,n=t.inSpatialReference,r=t.outSpatialReference,i=t.resolve;Object(h.a)(n,r)?Object(f.n)(r)?i(e.map(x)):i(e.map(O)):i(Object(c.k)(l.a,e,n,r,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}}]),t}());function C(t,e,n){return w.push(t,e,n)}},pt9v:function(t,e,n){"use strict";var r=n("hisu"),i=n("yBJb");function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=function(){function t(){Object(r.a)(this,t),this.name=this.constructor.name||"UnnamedBrush"}return Object(i.a)(t,[{key:"prepareState",value:function(t,e,n){}},{key:"draw",value:function(t,e,n){}},{key:"drawMany",value:function(t,e,n){var r,i=a(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.draw(t,o,n)}}catch(s){i.e(s)}finally{i.f()}}}]),t}();e.a=s},qHKP:function(t,e,n){"use strict";n.d(e,"a",(function(){return H})),n.d(e,"b",(function(){return V})),n.d(e,"c",(function(){return z})),n.d(e,"d",(function(){return G})),n.d(e,"e",(function(){return W})),n.d(e,"f",(function(){return $})),n.d(e,"g",(function(){return Q})),n.d(e,"h",(function(){return N})),n.d(e,"i",(function(){return Y})),n.d(e,"j",(function(){return X})),n.d(e,"k",(function(){return Z})),n.d(e,"l",(function(){return T})),n.d(e,"m",(function(){return B})),n.d(e,"n",(function(){return U})),n.d(e,"o",(function(){return F})),n.d(e,"p",(function(){return L}));var r=n("mK0O"),i=n("Mp7X"),a=n("TM+E"),o=(n("6J1V"),n("frPA"),n("oi1T"),n("FNqF")),s=n("hisu"),u=n("yBJb"),c=n("60cM"),l=function(){function t(){Object(s.a)(this,t),this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}return Object(u.a)(t,[{key:"acquire",value:function(t,e,n,r,i,a,o,s,u){this.color=t,this.haloColor=e,this.haloSize=n,this.size=r,this.angle=i,this.offsetX=a,this.offsetY=o,this.hAnchor=s,this.vAnchor=u}},{key:"release",value:function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}]),t}();l.pool=new c.a(l);n("0fR5");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var m=a.a.getLogger("esri.views.2d.engine.webgl.Utils"),p="geometry",_=[{name:p,strideInBytes:36,divisor:0}],y=[{name:p,strideInBytes:12,divisor:0}],g=[{name:p,strideInBytes:40,divisor:0}],b=[{name:p,strideInBytes:36,divisor:0}],x=[{name:p,strideInBytes:36,divisor:0}];function O(t){var e,n={},r=v(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i.name]=i.strideInBytes}}catch(a){r.e(a)}finally{r.f()}return n}var S=O([{name:p,strideInBytes:36,divisor:0}]),w=O(_),C=O(y),M=O(g),P=O(b),k=O(x);function T(t,e){switch(t){case o.d.MARKER:return S;case o.d.FILL:return e?C:w;case o.d.LINE:return M;case o.d.TEXT:return P;case o.d.LABEL:return k}}var j=[p],A=[p],I=[p],D=[p],E=[p];function R(t){switch(t){case o.d.MARKER:return j;case o.d.FILL:return A;case o.d.LINE:return I;case o.d.TEXT:return D;case o.d.LABEL:return E}}function L(t){switch(t%4){case 0:case 2:return 4;case 1:case 3:return 1}}function V(t,e){switch(e%4){case 0:case 2:return new Uint32Array(Math.floor(t*e/4));case 1:case 3:return new Uint8Array(t*e)}}function z(t,e){switch(e%4){case 0:case 2:return new Uint32Array(t);case 1:case 3:return new Uint8Array(t)}}function U(t){return null!=t}function F(t){return"number"==typeof t}function N(t){switch(t){case"butt":return 0;case"round":return 1;case"square":return 2;default:return m.error(new i.a("mapview-invalid-type","Cap type ".concat(t," is not a valid option. Defaulting to round"))),1}}function Y(t){switch(t){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return m.error(new i.a("mapview-invalid-type","Join type ".concat(t," is not a valid option. Defaulting to round"))),1}}function B(t){switch(t){case"opacity":return o.b.OPACITY;case"color":return o.b.COLOR;case"rotation":return o.b.ROTATION;case"size":return o.b.SIZE;default:return m.error("Cannot interpret unknown vv: ".concat(t)),null}}function G(t,e,n,r,i,a,o){for(var s in a)for(var u=a[s].stride,c=L(u),l=a[s].data,f=n[s].data,h=u*i.vertexCount/c,v=u*t/c,d=u*i.vertexFrom/c,m=0;m<h;++m)f[m+v]=l[m+d];for(var p=i.indexCount,_=0;_<p;++_)r[_+e]=o[_+i.indexFrom]-i.vertexFrom+t}var H=Object(r.a)({},p,35044);function W(t,e){for(var n=[],r=0;r<5;++r){var i,a={},o=v(R(r));try{for(o.s();!(i=o.n()).done;){var s=i.value;a[s]={data:e(r,s)}}}catch(u){o.e(u)}finally{o.f()}n.push({data:t(r),buffers:a})}return n}function Z(t){switch(t){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void m.error(new i.a("webgl-utils","Unable to handle type ".concat(t)))}}function X(t){switch(t){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void m.error(new i.a("webgl-utils","Unable to handle type ".concat(t)))}}var q=function(t){var e=new Map;for(var n in t){var r,i=v(t[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.set(a.name,a.location)}}catch(o){i.e(o)}finally{i.f()}}return e},J=function(t){var e={};for(var n in t){var r=t[n];e[n]=r.length?r[0].stride:0}return e},K=new Map,$=function(t,e){if(!K.has(t)){var n=function(t){var e={},n=function(n){var r=t[n],i=0;e[n]=r.map((function(t){var e=h(h({},t),{},{normalized:t.normalized||!1,divisor:t.divisor||0,offset:i,stride:0});return i+=t.count*function(t){switch(t){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}(t.type),e})),e[n].forEach((function(t){return t.stride=i}))};for(var r in t)n(r);return e}(e),r={strides:J(n),bufferLayouts:n,attributes:q(e)};K.set(t,r)}return K.get(t)};function Q(t){t(o.d.FILL),t(o.d.LINE),t(o.d.MARKER),t(o.d.TEXT),t(o.d.LABEL)}},uX2s:function(t,e,n){"use strict";var r=n("hisu"),i=n("yBJb"),a=n("a1c8"),o=(n("iwTS"),n("J4Pc"),n("B2Uc"),n("cY28"),n("IxxH"),n("0fR5"),n("H8zE")),s=function(){function t(e,n){Object(r.a)(this,t),this.rctx=e,this._vertexBuffer=a.a.createVertex(e,35044,new Uint16Array(n)),this._vao=new o.a(e,new Map([["a_position",0]]),{geometry:[{name:"a_position",count:2,type:5122,offset:0,stride:4,normalized:!1}]},{geometry:this._vertexBuffer}),this._count=n.length/2}return Object(i.a)(t,[{key:"bind",value:function(){this._vao.bind()}},{key:"unbind",value:function(){this._vao.unbind()}},{key:"dispose",value:function(){this._vao.dispose(!1),this._vertexBuffer.dispose()}},{key:"draw",value:function(){this.rctx.bindVAO(this._vao),this.rctx.drawArrays(5,0,this._count)}}]),t}();e.a=s},vlc1:function(t,e,n){"use strict";var r=n("hisu"),i=n("yBJb"),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(r.a)(this,t),this.x=e,this.y=n,this.width=i,this.height=a}return Object(i.a)(t,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}]),t}();e.a=a},wGbA:function(t,e,n){"use strict";n.d(e,"a",(function(){return S})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return y})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return g})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return _})),n.d(e,"j",(function(){return x}));var r=n("hisu"),i=n("yBJb"),a=n("0fJP"),o=n("aic5"),s=n("jga1");function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t){var e,n=Object(a.a)(t);return(e=n)&&(Object(o.g)(e)?d(e.rings):Object(o.h)(e)?d(e.paths):Object(o.e)(e)&&v(e.points)),n}function f(t){if(t)for(var e=t.length-1;e>0;--e)t[e][0]-=t[e-1][0],t[e][1]-=t[e-1][1]}function h(t){if(t){var e,n=u(t);try{for(n.s();!(e=n.n()).done;){f(e.value)}}catch(r){n.e(r)}finally{n.f()}}}function v(t){if(t)for(var e=t.length,n=1;n<e;++n)t[n][0]+=t[n-1][0],t[n][1]+=t[n-1][1]}function d(t){if(t){var e,n=u(t);try{for(n.s();!(e=n.n()).done;){v(e.value)}}catch(r){n.e(r)}finally{n.f()}}}function m(t){t&&(Object(o.g)(t)?h(t.rings):Object(o.h)(t)?h(t.paths):Object(o.e)(t)&&f(t.points))}function p(t){if(t){var e,n=u(t);try{for(n.s();!(e=n.n()).done;){_(e.value)}}catch(r){n.e(r)}finally{n.f()}}}function _(t){t&&t.reverse()}function y(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function g(t){return!(!t||0===t.length)&&t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function b(t){return t[4]}function x(t,e){t[4]=e}var O=function(){function t(e,n,i,a){Object(r.a)(this,t),this.acceptPolygon=n,this.acceptPolyline=i,this.geomUnitsPerPoint=a,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1,e&&(Object(o.g)(e)?n&&(this.multiPath=e.rings,this.isClosed=!0):Object(o.h)(e)?i&&(this.multiPath=e.paths,this.isClosed=!1):Object(o.d)(e)&&n&&(this.multiPath=w(e).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length)),this.internalPlacement=new s.a}return Object(i.a)(t,[{key:"next",value:function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var t=this.processPath(this.multiPath[this.pathIndex]);if(t)return t}return this.pathCount=-1,this.pathIndex=-1,this.multiPath=null,null}}]),t}(),S=function(){function t(e,n,i,a){Object(r.a)(this,t),this.inputGeometries=e,this.acceptPolygon=n,this.acceptPolyline=i,this.geomUnitsPerPoint=a,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1}return Object(i.a)(t,[{key:"next",value:function(){for(;;){if(!this.multiPath){for(var t=this.inputGeometries.next();t;){if(Object(o.g)(t)?this.acceptPolygon&&(this.multiPath=t.rings,this.isClosed=!0):Object(o.h)(t)?this.acceptPolyline&&(this.multiPath=t.paths,this.isClosed=!1):Object(o.d)(t)&&this.acceptPolygon&&(this.multiPath=w(t).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length,this.pathIndex=-1;break}t=this.inputGeometries.next()}if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var e=this.processPath(this.multiPath[this.pathIndex]);if(e)return e}this.pathCount=-1,this.pathIndex=-1,this.multiPath=null}}}]),t}();function w(t){return{rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}}},wgY5:function(t,e,n){(function(t){t.exports=function(){"use strict";var e,n;function r(){return e.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(o(t,e))return!1;return!0}function u(t){return void 0===t}function c(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function f(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function h(t,e){for(var n in e)o(e,n)&&(t[n]=e[n]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function v(t,e,n,r){return we(t,e,n,r,!0).utc()}function d(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function m(t){if(null==t._isValid){var e=d(t),r=n.call(e.parsedDateParts,(function(t){return null!=t})),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function p(t){var e=v(NaN);return null!=t?h(d(e),t):d(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),r=n.length>>>0;for(e=0;e<r;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var _=r.momentProperties=[],y=!1;function g(t,e){var n,r,i;if(u(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),u(e._i)||(t._i=e._i),u(e._f)||(t._f=e._f),u(e._l)||(t._l=e._l),u(e._strict)||(t._strict=e._strict),u(e._tzm)||(t._tzm=e._tzm),u(e._isUTC)||(t._isUTC=e._isUTC),u(e._offset)||(t._offset=e._offset),u(e._pf)||(t._pf=d(e)),u(e._locale)||(t._locale=e._locale),_.length>0)for(n=0;n<_.length;n++)u(i=e[r=_[n]])||(t[r]=i);return t}function b(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,r.updateOffset(this),y=!1)}function x(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function O(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,e){var n=!0;return h((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){var i,a,s,u=[];for(a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(s in i+="\n["+a+"] ",arguments[0])o(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[a];u.push(i)}O(t+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var w,C={};function M(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),C[t]||(O(e),C[t]=!0)}function P(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function k(t,e){var n,r=h({},t);for(n in e)o(e,n)&&(a(t[n])&&a(e[n])?(r[n]={},h(r[n],t[n]),h(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)o(t,n)&&!o(e,n)&&a(t[n])&&(r[n]=h({},r[n]));return r}function T(t){null!=t&&this.set(t)}function j(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,w=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)o(t,e)&&n.push(e);return n};var A=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,I=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,D={},E={};function R(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(E[t]=i),e&&(E[e[0]]=function(){return j(i.apply(this,arguments),e[1],e[2])}),n&&(E[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function L(t,e){return t.isValid()?(e=V(e,t.localeData()),D[e]=D[e]||function(t){var e,n,r,i=t.match(A);for(e=0,n=i.length;e<n;e++)E[i[e]]?i[e]=E[i[e]]:i[e]=(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,a="";for(r=0;r<n;r++)a+=P(i[r])?i[r].call(e,t):i[r];return a}}(e),D[e](t)):t.localeData().invalidDate()}function V(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(I.lastIndex=0;n>=0&&I.test(t);)t=t.replace(I,r),I.lastIndex=0,n-=1;return t}var z={};function U(t,e){var n=t.toLowerCase();z[n]=z[n+"s"]=z[e]=t}function F(t){return"string"==typeof t?z[t]||z[t.toLowerCase()]:void 0}function N(t){var e,n,r={};for(n in t)o(t,n)&&(e=F(n))&&(r[e]=t[n]);return r}var Y={};function B(t,e){Y[t]=e}function G(t){return t%4==0&&t%100!=0||t%400==0}function H(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function W(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=H(e)),n}function Z(t,e){return function(n){return null!=n?(q(this,t,n),r.updateOffset(this,e),this):X(this,t)}}function X(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function q(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&G(t.year())&&1===t.month()&&29===t.date()?(n=W(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),xt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var J,K=/\d/,$=/\d\d/,Q=/\d{3}/,tt=/\d{4}/,et=/[+-]?\d{6}/,nt=/\d\d?/,rt=/\d\d\d\d?/,it=/\d\d\d\d\d\d?/,at=/\d{1,3}/,ot=/\d{1,4}/,st=/[+-]?\d{1,6}/,ut=/\d+/,ct=/[+-]?\d+/,lt=/Z|[+-]\d\d:?\d\d/gi,ft=/Z|[+-]\d\d(?::?\d\d)?/gi,ht=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function vt(t,e,n){J[t]=P(e)?e:function(t,r){return t&&n?n:e}}function dt(t,e){return o(J,t)?J[t](e._strict,e._locale):new RegExp(mt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i}))))}function mt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}J={};var pt,_t={};function yt(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),c(e)&&(r=function(t,n){n[e]=W(t)}),n=0;n<t.length;n++)_t[t[n]]=r}function gt(t,e){yt(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function bt(t,e,n){null!=e&&o(_t,t)&&_t[t](e,n._a,n,t)}function xt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n,r=(e%(n=12)+n)%n;return t+=(e-r)/12,1===r?G(t)?29:28:31-r%7%2}pt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},R("M",["MM",2],"Mo",(function(){return this.month()+1})),R("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),R("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),U("month","M"),B("month",8),vt("M",nt),vt("MM",nt,$),vt("MMM",(function(t,e){return e.monthsShortRegex(t)})),vt("MMMM",(function(t,e){return e.monthsRegex(t)})),yt(["M","MM"],(function(t,e){e[1]=W(t)-1})),yt(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[1]=i:d(n).invalidMonth=t}));var Ot="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),St="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),wt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ct=ht,Mt=ht;function Pt(t,e,n){var r,i,a,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=v([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=pt.call(this._shortMonthsParse,o))?i:null:-1!==(i=pt.call(this._longMonthsParse,o))?i:null:"MMM"===e?-1!==(i=pt.call(this._shortMonthsParse,o))||-1!==(i=pt.call(this._longMonthsParse,o))?i:null:-1!==(i=pt.call(this._longMonthsParse,o))||-1!==(i=pt.call(this._shortMonthsParse,o))?i:null}function kt(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=W(e);else if(!c(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),xt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Tt(t){return null!=t?(kt(this,t),r.updateOffset(this,!0),this):X(this,"Month")}function jt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],a=[];for(e=0;e<12;e++)n=v([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),a.sort(t),e=0;e<12;e++)r[e]=mt(r[e]),i[e]=mt(i[e]);for(e=0;e<24;e++)a[e]=mt(a[e]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function At(t){return G(t)?366:365}R("Y",0,0,(function(){var t=this.year();return t<=9999?j(t,4):"+"+t})),R(0,["YY",2],0,(function(){return this.year()%100})),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),U("year","y"),B("year",1),vt("Y",ct),vt("YY",nt,$),vt("YYYY",ot,tt),vt("YYYYY",st,et),vt("YYYYYY",st,et),yt(["YYYYY","YYYYYY"],0),yt("YYYY",(function(t,e){e[0]=2===t.length?r.parseTwoDigitYear(t):W(t)})),yt("YY",(function(t,e){e[0]=r.parseTwoDigitYear(t)})),yt("Y",(function(t,e){e[0]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return W(t)+(W(t)>68?1900:2e3)};var It=Z("FullYear",!0);function Dt(t,e,n,r,i,a,o){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,a,o),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,a,o),s}function Et(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Rt(t,e,n){var r=7+e-n;return-(7+Et(t,0,r).getUTCDay()-e)%7+r-1}function Lt(t,e,n,r,i){var a,o,s=1+7*(e-1)+(7+n-r)%7+Rt(t,r,i);return s<=0?o=At(a=t-1)+s:s>At(t)?(a=t+1,o=s-At(t)):(a=t,o=s),{year:a,dayOfYear:o}}function Vt(t,e,n){var r,i,a=Rt(t.year(),e,n),o=Math.floor((t.dayOfYear()-a-1)/7)+1;return o<1?r=o+zt(i=t.year()-1,e,n):o>zt(t.year(),e,n)?(r=o-zt(t.year(),e,n),i=t.year()+1):(i=t.year(),r=o),{week:r,year:i}}function zt(t,e,n){var r=Rt(t,e,n),i=Rt(t+1,e,n);return(At(t)-r+i)/7}function Ut(t,e){return t.slice(e,7).concat(t.slice(0,e))}R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),U("week","w"),U("isoWeek","W"),B("week",5),B("isoWeek",5),vt("w",nt),vt("ww",nt,$),vt("W",nt),vt("WW",nt,$),gt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=W(t)})),R("d",0,"do","day"),R("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),R("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),R("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),U("day","d"),U("weekday","e"),U("isoWeekday","E"),B("day",11),B("weekday",11),B("isoWeekday",11),vt("d",nt),vt("e",nt),vt("E",nt),vt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),vt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),vt("dddd",(function(t,e){return e.weekdaysRegex(t)})),gt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:d(n).invalidWeekday=t})),gt(["d","e","E"],(function(t,e,n,r){e[r]=W(t)}));var Ft="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Nt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Yt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Bt=ht,Gt=ht,Ht=ht;function Wt(t,e,n){var r,i,a,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=v([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=pt.call(this._weekdaysParse,o))?i:null:"ddd"===e?-1!==(i=pt.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=pt.call(this._minWeekdaysParse,o))?i:null:"dddd"===e?-1!==(i=pt.call(this._weekdaysParse,o))||-1!==(i=pt.call(this._shortWeekdaysParse,o))||-1!==(i=pt.call(this._minWeekdaysParse,o))?i:null:"ddd"===e?-1!==(i=pt.call(this._shortWeekdaysParse,o))||-1!==(i=pt.call(this._weekdaysParse,o))||-1!==(i=pt.call(this._minWeekdaysParse,o))?i:null:-1!==(i=pt.call(this._minWeekdaysParse,o))||-1!==(i=pt.call(this._weekdaysParse,o))||-1!==(i=pt.call(this._shortWeekdaysParse,o))?i:null}function Zt(){function t(t,e){return e.length-t.length}var e,n,r,i,a,o=[],s=[],u=[],c=[];for(e=0;e<7;e++)n=v([2e3,1]).day(e),r=mt(this.weekdaysMin(n,"")),i=mt(this.weekdaysShort(n,"")),a=mt(this.weekdays(n,"")),o.push(r),s.push(i),u.push(a),c.push(r),c.push(i),c.push(a);o.sort(t),s.sort(t),u.sort(t),c.sort(t),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Xt(){return this.hours()%12||12}function qt(t,e){R(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function Jt(t,e){return e._meridiemParse}R("H",["HH",2],0,"hour"),R("h",["hh",2],0,Xt),R("k",["kk",2],0,(function(){return this.hours()||24})),R("hmm",0,0,(function(){return""+Xt.apply(this)+j(this.minutes(),2)})),R("hmmss",0,0,(function(){return""+Xt.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)})),R("Hmm",0,0,(function(){return""+this.hours()+j(this.minutes(),2)})),R("Hmmss",0,0,(function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)})),qt("a",!0),qt("A",!1),U("hour","h"),B("hour",13),vt("a",Jt),vt("A",Jt),vt("H",nt),vt("h",nt),vt("k",nt),vt("HH",nt,$),vt("hh",nt,$),vt("kk",nt,$),vt("hmm",rt),vt("hmmss",it),vt("Hmm",rt),vt("Hmmss",it),yt(["H","HH"],3),yt(["k","kk"],(function(t,e,n){var r=W(t);e[3]=24===r?0:r})),yt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),yt(["h","hh"],(function(t,e,n){e[3]=W(t),d(n).bigHour=!0})),yt("hmm",(function(t,e,n){var r=t.length-2;e[3]=W(t.substr(0,r)),e[4]=W(t.substr(r)),d(n).bigHour=!0})),yt("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=W(t.substr(0,r)),e[4]=W(t.substr(r,2)),e[5]=W(t.substr(i)),d(n).bigHour=!0})),yt("Hmm",(function(t,e,n){var r=t.length-2;e[3]=W(t.substr(0,r)),e[4]=W(t.substr(r))})),yt("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=W(t.substr(0,r)),e[4]=W(t.substr(r,2)),e[5]=W(t.substr(i))}));var Kt,$t=Z("Hours",!0),Qt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ot,monthsShort:St,week:{dow:0,doy:6},weekdays:Ft,weekdaysMin:Yt,weekdaysShort:Nt,meridiemParse:/[ap]\.?m?\.?/i},te={},ee={};function ne(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function re(t){return t?t.toLowerCase().replace("_","-"):t}function ie(e){var n=null;if(void 0===te[e]&&void 0!==t&&t&&t.exports)try{n=Kt._abbr,function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}(),ae(n)}catch(r){te[e]=null}return te[e]}function ae(t,e){var n;return t&&((n=u(e)?se(t):oe(t,e))?Kt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Kt._abbr}function oe(t,e){if(null!==e){var n,r=Qt;if(e.abbr=t,null!=te[t])M("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=te[t]._config;else if(null!=e.parentLocale)if(null!=te[e.parentLocale])r=te[e.parentLocale]._config;else{if(null==(n=ie(e.parentLocale)))return ee[e.parentLocale]||(ee[e.parentLocale]=[]),ee[e.parentLocale].push({name:t,config:e}),null;r=n._config}return te[t]=new T(k(r,e)),ee[t]&&ee[t].forEach((function(t){oe(t.name,t.config)})),ae(t),te[t]}return delete te[t],null}function se(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Kt;if(!i(t)){if(e=ie(t))return e;t=[t]}return function(t){for(var e,n,r,i,a=0;a<t.length;){for(e=(i=re(t[a]).split("-")).length,n=(n=re(t[a+1]))?n.split("-"):null;e>0;){if(r=ie(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&ne(i,n)>=e-1)break;e--}a++}return Kt}(t)}function ue(t){var e,n=t._a;return n&&-2===d(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>xt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,d(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),d(t)._overflowWeeks&&-1===e&&(e=7),d(t)._overflowWeekday&&-1===e&&(e=8),d(t).overflow=e),t}var ce=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,le=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fe=/Z|[+-]\d\d(?::?\d\d)?/,he=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ve=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],de=/^\/?Date\((-?\d+)/i,me=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,pe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function _e(t){var e,n,r,i,a,o,s=t._i,u=ce.exec(s)||le.exec(s);if(u){for(d(t).iso=!0,e=0,n=he.length;e<n;e++)if(he[e][1].exec(u[1])){i=he[e][0],r=!1!==he[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=ve.length;e<n;e++)if(ve[e][1].exec(u[3])){a=(u[2]||" ")+ve[e][0];break}if(null==a)return void(t._isValid=!1)}if(!r&&null!=a)return void(t._isValid=!1);if(u[4]){if(!fe.exec(u[4]))return void(t._isValid=!1);o="Z"}t._f=i+(a||"")+(o||""),Oe(t)}else t._isValid=!1}function ye(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function ge(t){var e,n,r,i,a,o,s,u,c=me.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],r=c[3],i=c[2],a=c[5],o=c[6],s=c[7],u=[ye(n),St.indexOf(r),parseInt(i,10),parseInt(a,10),parseInt(o,10)],s&&u.push(parseInt(s,10)),e=u,!function(t,e,n){return!t||Nt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(d(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],e,t))return;t._a=e,t._tzm=function(t,e,n){if(t)return pe[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(c[8],c[9],c[10]),t._d=Et.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),d(t).rfc2822=!0}else t._isValid=!1}function be(t,e,n){return null!=t?t:null!=e?e:n}function xe(t){var e,n,i,a,o,s=[];if(!t._d){for(i=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,r,i,a,o,s,u,c;null!=(e=t._w).GG||null!=e.W||null!=e.E?(a=1,o=4,n=be(e.GG,t._a[0],Vt(Ce(),1,4).year),r=be(e.W,1),((i=be(e.E,1))<1||i>7)&&(u=!0)):(a=t._locale._week.dow,o=t._locale._week.doy,c=Vt(Ce(),a,o),n=be(e.gg,t._a[0],c.year),r=be(e.w,c.week),null!=e.d?((i=e.d)<0||i>6)&&(u=!0):null!=e.e?(i=e.e+a,(e.e<0||e.e>6)&&(u=!0)):i=a),r<1||r>zt(n,a,o)?d(t)._overflowWeeks=!0:null!=u?d(t)._overflowWeekday=!0:(s=Lt(n,r,i,a,o),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(o=be(t._a[0],i[0]),(t._dayOfYear>At(o)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),n=Et(o,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Et:Dt).apply(null,s),a=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==a&&(d(t).weekdayMismatch=!0)}}function Oe(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],d(t).empty=!0;var e,n,i,a,o,s,u=""+t._i,c=u.length,l=0;for(i=V(t._f,t._locale).match(A)||[],e=0;e<i.length;e++)a=i[e],(n=(u.match(dt(a,t))||[])[0])&&((o=u.substr(0,u.indexOf(n))).length>0&&d(t).unusedInput.push(o),u=u.slice(u.indexOf(n)+n.length),l+=n.length),E[a]?(n?d(t).empty=!1:d(t).unusedTokens.push(a),bt(a,n,t)):t._strict&&!n&&d(t).unusedTokens.push(a);d(t).charsLeftOver=c-l,u.length>0&&d(t).unusedInput.push(u),t._a[3]<=12&&!0===d(t).bigHour&&t._a[3]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),null!==(s=d(t).era)&&(t._a[0]=t._locale.erasConvertYear(s,t._a[0])),xe(t),ue(t)}else ge(t);else _e(t)}function Se(t){var e=t._i,n=t._f;return t._locale=t._locale||se(t._l),null===e||void 0===n&&""===e?p({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),x(e)?new b(ue(e)):(l(e)?t._d=e:i(n)?function(t){var e,n,r,i,a,o,s=!1;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)a=0,o=!1,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Oe(e),m(e)&&(o=!0),a+=d(e).charsLeftOver,a+=10*d(e).unusedTokens.length,d(e).score=a,s?a<r&&(r=a,n=e):(null==r||a<r||o)&&(r=a,n=e,o&&(s=!0));h(t,n||e)}(t):n?Oe(t):function(t){var e=t._i;u(e)?t._d=new Date(r.now()):l(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=de.exec(t._i);null===e?(_e(t),!1===t._isValid&&(delete t._isValid,ge(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:r.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):i(e)?(t._a=f(e.slice(0),(function(t){return parseInt(t,10)})),xe(t)):a(e)?function(t){if(!t._d){var e=N(t._i),n=void 0===e.day?e.date:e.day;t._a=f([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),xe(t)}}(t):c(e)?t._d=new Date(e):r.createFromInputFallback(t)}(t),m(t)||(t._d=null),t))}function we(t,e,n,r,o){var u,c={};return!0!==e&&!1!==e||(r=e,e=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(a(t)&&s(t)||i(t)&&0===t.length)&&(t=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=o,c._l=n,c._i=t,c._f=e,c._strict=r,(u=new b(ue(Se(c))))._nextDay&&(u.add(1,"d"),u._nextDay=void 0),u}function Ce(t,e,n,r){return we(t,e,n,r,!1)}r.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Me=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Ce.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:p()})),Pe=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Ce.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:p()}));function ke(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Ce();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}var Te=["year","quarter","month","week","day","hour","minute","second","millisecond"];function je(t){var e=N(t),n=e.year||0,r=e.quarter||0,i=e.month||0,a=e.week||e.isoWeek||0,s=e.day||0,u=e.hour||0,c=e.minute||0,l=e.second||0,f=e.millisecond||0;this._isValid=function(t){var e,n,r=!1;for(e in t)if(o(t,e)&&(-1===pt.call(Te,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<Te.length;++n)if(t[Te[n]]){if(r)return!1;parseFloat(t[Te[n]])!==W(t[Te[n]])&&(r=!0)}return!0}(e),this._milliseconds=+f+1e3*l+6e4*c+1e3*u*60*60,this._days=+s+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=se(),this._bubble()}function Ae(t){return t instanceof je}function Ie(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function De(t,e){R(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+j(~~(t/60),2)+e+j(~~t%60,2)}))}De("Z",":"),De("ZZ",""),vt("Z",ft),vt("ZZ",ft),yt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Re(ft,t)}));var Ee=/([\+\-]|\d\d)/gi;function Re(t,e){var n,r,i=(e||"").match(t);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(Ee)||["-",0,0])[1]+W(n[2]))?0:"+"===n[0]?r:-r}function Le(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(x(t)||l(t)?t.valueOf():Ce(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Ce(t).local()}function Ve(t){return-Math.round(t._d.getTimezoneOffset())}function ze(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ue=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Fe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ne(t,e){var n,r,i,a,s,u,l=t,f=null;return Ae(t)?l={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(l={},e?l[e]=+t:l.milliseconds=+t):(f=Ue.exec(t))?(n="-"===f[1]?-1:1,l={y:0,d:W(f[2])*n,h:W(f[3])*n,m:W(f[4])*n,s:W(f[5])*n,ms:W(Ie(1e3*f[6]))*n}):(f=Fe.exec(t))?(n="-"===f[1]?-1:1,l={y:Ye(f[2],n),M:Ye(f[3],n),w:Ye(f[4],n),d:Ye(f[5],n),h:Ye(f[6],n),m:Ye(f[7],n),s:Ye(f[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(a=Ce(l.from),s=Ce(l.to),i=a.isValid()&&s.isValid()?(s=Le(s,a),a.isBefore(s)?u=Be(a,s):((u=Be(s,a)).milliseconds=-u.milliseconds,u.months=-u.months),u):{milliseconds:0,months:0},(l={}).ms=i.milliseconds,l.M=i.months),r=new je(l),Ae(t)&&o(t,"_locale")&&(r._locale=t._locale),Ae(t)&&o(t,"_isValid")&&(r._isValid=t._isValid),r}function Ye(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Be(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ge(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(M(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),He(this,Ne(n,r),t),this}}function He(t,e,n,i){var a=e._milliseconds,o=Ie(e._days),s=Ie(e._months);t.isValid()&&(i=null==i||i,s&&kt(t,X(t,"Month")+s*n),o&&q(t,"Date",X(t,"Date")+o*n),a&&t._d.setTime(t._d.valueOf()+a*n),i&&r.updateOffset(t,o||s))}Ne.fn=je.prototype,Ne.invalid=function(){return Ne(NaN)};var We=Ge(1,"add"),Ze=Ge(-1,"subtract");function Xe(t){return"string"==typeof t||t instanceof String}function qe(t){return x(t)||l(t)||Xe(t)||c(t)||function(t){var e=i(t),n=!1;return e&&(n=0===t.filter((function(e){return!c(e)&&Xe(t)})).length),e&&n}(t)||function(t){var e,n,r=a(t)&&!s(t),i=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<u.length;e+=1)n=u[e],i=i||o(t,n);return r&&i}(t)||null==t}function Je(t){var e,n=a(t)&&!s(t),r=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<i.length;e+=1)r=r||o(t,i[e]);return n&&r}function Ke(t,e){if(t.date()<e.date())return-Ke(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function $e(t){var e;return void 0===t?this._locale._abbr:(null!=(e=se(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Qe=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function tn(){return this._locale}function en(t,e){return(t%e+e)%e}function nn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-126227808e5:new Date(t,e,n).valueOf()}function rn(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-126227808e5:Date.UTC(t,e,n)}function an(t,e){return e.erasAbbrRegex(t)}function on(){var t,e,n=[],r=[],i=[],a=[],o=this.eras();for(t=0,e=o.length;t<e;++t)r.push(mt(o[t].name)),n.push(mt(o[t].abbr)),i.push(mt(o[t].narrow)),a.push(mt(o[t].name)),a.push(mt(o[t].abbr)),a.push(mt(o[t].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function sn(t,e){R(0,[t,t.length],0,e)}function un(t,e,n,r,i){var a;return null==t?Vt(this,r,i).year:(e>(a=zt(t,r,i))&&(e=a),cn.call(this,t,e,n,r,i))}function cn(t,e,n,r,i){var a=Lt(t,e,n,r,i),o=Et(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}R("N",0,0,"eraAbbr"),R("NN",0,0,"eraAbbr"),R("NNN",0,0,"eraAbbr"),R("NNNN",0,0,"eraName"),R("NNNNN",0,0,"eraNarrow"),R("y",["y",1],"yo","eraYear"),R("y",["yy",2],0,"eraYear"),R("y",["yyy",3],0,"eraYear"),R("y",["yyyy",4],0,"eraYear"),vt("N",an),vt("NN",an),vt("NNN",an),vt("NNNN",(function(t,e){return e.erasNameRegex(t)})),vt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),yt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?d(n).era=i:d(n).invalidEra=t})),vt("y",ut),vt("yy",ut),vt("yyy",ut),vt("yyyy",ut),vt("yo",(function(t,e){return e._eraYearOrdinalRegex||ut})),yt(["y","yy","yyy","yyyy"],0),yt(["yo"],(function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[0]=n._locale.eraYearOrdinalParse(t,i):e[0]=parseInt(t,10)})),R(0,["gg",2],0,(function(){return this.weekYear()%100})),R(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),sn("gggg","weekYear"),sn("ggggg","weekYear"),sn("GGGG","isoWeekYear"),sn("GGGGG","isoWeekYear"),U("weekYear","gg"),U("isoWeekYear","GG"),B("weekYear",1),B("isoWeekYear",1),vt("G",ct),vt("g",ct),vt("GG",nt,$),vt("gg",nt,$),vt("GGGG",ot,tt),vt("gggg",ot,tt),vt("GGGGG",st,et),vt("ggggg",st,et),gt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=W(t)})),gt(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),R("Q",0,"Qo","quarter"),U("quarter","Q"),B("quarter",7),vt("Q",K),yt("Q",(function(t,e){e[1]=3*(W(t)-1)})),R("D",["DD",2],"Do","date"),U("date","D"),B("date",9),vt("D",nt),vt("DD",nt,$),vt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),yt(["D","DD"],2),yt("Do",(function(t,e){e[2]=W(t.match(nt)[0])}));var ln=Z("Date",!0);R("DDD",["DDDD",3],"DDDo","dayOfYear"),U("dayOfYear","DDD"),B("dayOfYear",4),vt("DDD",at),vt("DDDD",Q),yt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=W(t)})),R("m",["mm",2],0,"minute"),U("minute","m"),B("minute",14),vt("m",nt),vt("mm",nt,$),yt(["m","mm"],4);var fn=Z("Minutes",!1);R("s",["ss",2],0,"second"),U("second","s"),B("second",15),vt("s",nt),vt("ss",nt,$),yt(["s","ss"],5);var hn,vn,dn=Z("Seconds",!1);for(R("S",0,0,(function(){return~~(this.millisecond()/100)})),R(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),R(0,["SSS",3],0,"millisecond"),R(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),R(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),R(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),R(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),R(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),R(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),U("millisecond","ms"),B("millisecond",16),vt("S",at,K),vt("SS",at,$),vt("SSS",at,Q),hn="SSSS";hn.length<=9;hn+="S")vt(hn,ut);function mn(t,e){e[6]=W(1e3*("0."+t))}for(hn="S";hn.length<=9;hn+="S")yt(hn,mn);vn=Z("Milliseconds",!1),R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");var pn=b.prototype;function _n(t){return t}pn.add=We,pn.calendar=function(t,e){1===arguments.length&&(arguments[0]?qe(arguments[0])?(t=arguments[0],e=void 0):Je(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Ce(),i=Le(n,this).startOf("day"),a=r.calendarFormat(this,i)||"sameElse",o=e&&(P(e[a])?e[a].call(this,n):e[a]);return this.format(o||this.localeData().calendar(a,this,Ce(n)))},pn.clone=function(){return new b(this)},pn.diff=function(t,e,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=Le(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=F(e)){case"year":a=Ke(this,r)/12;break;case"month":a=Ke(this,r);break;case"quarter":a=Ke(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:H(a)},pn.endOf=function(t){var e,n;if(void 0===(t=F(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?rn:nn,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-en(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-en(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-en(e,1e3)-1}return this._d.setTime(e),r.updateOffset(this,!0),this},pn.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=L(this,t);return this.localeData().postformat(e)},pn.from=function(t,e){return this.isValid()&&(x(t)&&t.isValid()||Ce(t).isValid())?Ne({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},pn.fromNow=function(t){return this.from(Ce(),t)},pn.to=function(t,e){return this.isValid()&&(x(t)&&t.isValid()||Ce(t).isValid())?Ne({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},pn.toNow=function(t){return this.to(Ce(),t)},pn.get=function(t){return P(this[t=F(t)])?this[t]():this},pn.invalidAt=function(){return d(this).overflow},pn.isAfter=function(t,e){var n=x(t)?t:Ce(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},pn.isBefore=function(t,e){var n=x(t)?t:Ce(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},pn.isBetween=function(t,e,n,r){var i=x(t)?t:Ce(t),a=x(e)?e:Ce(e);return!!(this.isValid()&&i.isValid()&&a.isValid())&&(("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n)))},pn.isSame=function(t,e){var n,r=x(t)?t:Ce(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},pn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},pn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},pn.isValid=function(){return m(this)},pn.lang=Qe,pn.locale=$e,pn.localeData=tn,pn.max=Pe,pn.min=Me,pn.parsingFlags=function(){return h({},d(this))},pn.set=function(t,e){if("object"==typeof t){var n,r=function(t){var e,n=[];for(e in t)o(t,e)&&n.push({unit:e,priority:Y[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=N(t));for(n=0;n<r.length;n++)this[r[n].unit](t[r[n].unit])}else if(P(this[t=F(t)]))return this[t](e);return this},pn.startOf=function(t){var e,n;if(void 0===(t=F(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?rn:nn,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=en(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=en(e,6e4);break;case"second":e=this._d.valueOf(),e-=en(e,1e3)}return this._d.setTime(e),r.updateOffset(this,!0),this},pn.subtract=Ze,pn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},pn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},pn.toDate=function(){return new Date(this.valueOf())},pn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?L(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):P(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",L(n,"Z")):L(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},pn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,r="moment",i="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),t="["+r+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(pn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),pn.toJSON=function(){return this.isValid()?this.toISOString():null},pn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},pn.unix=function(){return Math.floor(this.valueOf()/1e3)},pn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},pn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},pn.eraName=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].name;if(r[t].until<=n&&n<=r[t].since)return r[t].name}return""},pn.eraNarrow=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].narrow;if(r[t].until<=n&&n<=r[t].since)return r[t].narrow}return""},pn.eraAbbr=function(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].abbr;if(r[t].until<=n&&n<=r[t].since)return r[t].abbr}return""},pn.eraYear=function(){var t,e,n,i,a=this.localeData().eras();for(t=0,e=a.length;t<e;++t)if(n=a[t].since<=a[t].until?1:-1,i=this.clone().startOf("day").valueOf(),a[t].since<=i&&i<=a[t].until||a[t].until<=i&&i<=a[t].since)return(this.year()-r(a[t].since).year())*n+a[t].offset;return this.year()},pn.year=It,pn.isLeapYear=function(){return G(this.year())},pn.weekYear=function(t){return un.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},pn.isoWeekYear=function(t){return un.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},pn.quarter=pn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},pn.month=Tt,pn.daysInMonth=function(){return xt(this.year(),this.month())},pn.week=pn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},pn.isoWeek=pn.isoWeeks=function(t){var e=Vt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},pn.weeksInYear=function(){var t=this.localeData()._week;return zt(this.year(),t.dow,t.doy)},pn.weeksInWeekYear=function(){var t=this.localeData()._week;return zt(this.weekYear(),t.dow,t.doy)},pn.isoWeeksInYear=function(){return zt(this.year(),1,4)},pn.isoWeeksInISOWeekYear=function(){return zt(this.isoWeekYear(),1,4)},pn.date=ln,pn.day=pn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},pn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},pn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},pn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},pn.hour=pn.hours=$t,pn.minute=pn.minutes=fn,pn.second=pn.seconds=dn,pn.millisecond=pn.milliseconds=vn,pn.utcOffset=function(t,e,n){var i,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Re(ft,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=Ve(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==t&&(!e||this._changeInProgress?He(this,Ne(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:Ve(this)},pn.utc=function(t){return this.utcOffset(0,t)},pn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ve(this),"m")),this},pn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Re(lt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},pn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Ce(t).utcOffset():0,(this.utcOffset()-t)%60==0)},pn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},pn.isLocal=function(){return!!this.isValid()&&!this._isUTC},pn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},pn.isUtc=ze,pn.isUTC=ze,pn.zoneAbbr=function(){return this._isUTC?"UTC":""},pn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},pn.dates=S("dates accessor is deprecated. Use date instead.",ln),pn.months=S("months accessor is deprecated. Use month instead",Tt),pn.years=S("years accessor is deprecated. Use year instead",It),pn.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),pn.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var t,e={};return g(e,this),(e=Se(e))._a?(t=e._isUTC?v(e._a):Ce(e._a),this._isDSTShifted=this.isValid()&&function(t,e,n){var r,i=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),o=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&W(t[r])!==W(e[r]))&&o++;return o+a}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var yn=T.prototype;function gn(t,e,n,r){var i=se(),a=v().set(r,e);return i[n](a,t)}function bn(t,e,n){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return gn(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=gn(t,r,n,"month");return i}function xn(t,e,n,r){"boolean"==typeof t?(c(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,c(e)&&(n=e,e=void 0),e=e||"");var i,a=se(),o=t?a._week.dow:0,s=[];if(null!=n)return gn(e,(n+o)%7,r,"day");for(i=0;i<7;i++)s[i]=gn(e,(i+o)%7,r,"day");return s}yn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return P(r)?r.call(e,n):r},yn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(A).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},yn.invalidDate=function(){return this._invalidDate},yn.ordinal=function(t){return this._ordinal.replace("%d",t)},yn.preparse=_n,yn.postformat=_n,yn.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return P(i)?i(t,e,n,r):i.replace(/%d/i,t)},yn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return P(n)?n(e):n.replace(/%s/i,e)},yn.set=function(t){var e,n;for(n in t)o(t,n)&&(P(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},yn.eras=function(t,e){var n,i,a,o=this._eras||se("en")._eras;for(n=0,i=o.length;n<i;++n){switch(typeof o[n].since){case"string":a=r(o[n].since).startOf("day"),o[n].since=a.valueOf()}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":a=r(o[n].until).startOf("day").valueOf(),o[n].until=a.valueOf()}}return o},yn.erasParse=function(t,e,n){var r,i,a,o,s,u=this.eras();for(t=t.toUpperCase(),r=0,i=u.length;r<i;++r)if(a=u[r].name.toUpperCase(),o=u[r].abbr.toUpperCase(),s=u[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(o===t)return u[r];break;case"NNNN":if(a===t)return u[r];break;case"NNNNN":if(s===t)return u[r]}else if([a,o,s].indexOf(t)>=0)return u[r]},yn.erasConvertYear=function(t,e){var n=t.since<=t.until?1:-1;return void 0===e?r(t.since).year():r(t.since).year()+(e-t.offset)*n},yn.erasAbbrRegex=function(t){return o(this,"_erasAbbrRegex")||on.call(this),t?this._erasAbbrRegex:this._erasRegex},yn.erasNameRegex=function(t){return o(this,"_erasNameRegex")||on.call(this),t?this._erasNameRegex:this._erasRegex},yn.erasNarrowRegex=function(t){return o(this,"_erasNarrowRegex")||on.call(this),t?this._erasNarrowRegex:this._erasRegex},yn.months=function(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||wt).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone},yn.monthsShort=function(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[wt.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},yn.monthsParse=function(t,e,n){var r,i,a;if(this._monthsParseExact)return Pt.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=v([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},yn.monthsRegex=function(t){return this._monthsParseExact?(o(this,"_monthsRegex")||jt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Mt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},yn.monthsShortRegex=function(t){return this._monthsParseExact?(o(this,"_monthsRegex")||jt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=Ct),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},yn.week=function(t){return Vt(t,this._week.dow,this._week.doy).week},yn.firstDayOfYear=function(){return this._week.doy},yn.firstDayOfWeek=function(){return this._week.dow},yn.weekdays=function(t,e){var n=i(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Ut(n,this._week.dow):t?n[t.day()]:n},yn.weekdaysMin=function(t){return!0===t?Ut(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},yn.weekdaysShort=function(t){return!0===t?Ut(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},yn.weekdaysParse=function(t,e,n){var r,i,a;if(this._weekdaysParseExact)return Wt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=v([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},yn.weekdaysRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Bt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},yn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},yn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ht),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},yn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},yn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},ae("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===W(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=S("moment.lang is deprecated. Use moment.locale instead.",ae),r.langData=S("moment.langData is deprecated. Use moment.localeData instead.",se);var On=Math.abs;function Sn(t,e,n,r){var i=Ne(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function wn(t){return t<0?Math.floor(t):Math.ceil(t)}function Cn(t){return 4800*t/146097}function Mn(t){return 146097*t/4800}function Pn(t){return function(){return this.as(t)}}var kn=Pn("ms"),Tn=Pn("s"),jn=Pn("m"),An=Pn("h"),In=Pn("d"),Dn=Pn("w"),En=Pn("M"),Rn=Pn("Q"),Ln=Pn("y");function Vn(t){return function(){return this.isValid()?this._data[t]:NaN}}var zn=Vn("milliseconds"),Un=Vn("seconds"),Fn=Vn("minutes"),Nn=Vn("hours"),Yn=Vn("days"),Bn=Vn("months"),Gn=Vn("years"),Hn=Math.round,Wn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Zn(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}var Xn=Math.abs;function qn(t){return(t>0)-(t<0)||+t}function Jn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,a,o,s,u=Xn(this._milliseconds)/1e3,c=Xn(this._days),l=Xn(this._months),f=this.asSeconds();return f?(t=H(u/60),e=H(t/60),u%=60,t%=60,n=H(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=f<0?"-":"",a=qn(this._months)!==qn(f)?"-":"",o=qn(this._days)!==qn(f)?"-":"",s=qn(this._milliseconds)!==qn(f)?"-":"",i+"P"+(n?a+n+"Y":"")+(l?a+l+"M":"")+(c?o+c+"D":"")+(e||t||u?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(u?s+r+"S":"")):"P0D"}var Kn=je.prototype;return Kn.isValid=function(){return this._isValid},Kn.abs=function(){var t=this._data;return this._milliseconds=On(this._milliseconds),this._days=On(this._days),this._months=On(this._months),t.milliseconds=On(t.milliseconds),t.seconds=On(t.seconds),t.minutes=On(t.minutes),t.hours=On(t.hours),t.months=On(t.months),t.years=On(t.years),this},Kn.add=function(t,e){return Sn(this,t,e,1)},Kn.subtract=function(t,e){return Sn(this,t,e,-1)},Kn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=F(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+Cn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Mn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Kn.asMilliseconds=kn,Kn.asSeconds=Tn,Kn.asMinutes=jn,Kn.asHours=An,Kn.asDays=In,Kn.asWeeks=Dn,Kn.asMonths=En,Kn.asQuarters=Rn,Kn.asYears=Ln,Kn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*W(this._months/12):NaN},Kn._bubble=function(){var t,e,n,r,i,a=this._milliseconds,o=this._days,s=this._months,u=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*wn(Mn(s)+o),o=0,s=0),u.milliseconds=a%1e3,t=H(a/1e3),u.seconds=t%60,e=H(t/60),u.minutes=e%60,n=H(e/60),u.hours=n%24,o+=H(n/24),i=H(Cn(o)),s+=i,o-=wn(Mn(i)),r=H(s/12),s%=12,u.days=o,u.months=s,u.years=r,this},Kn.clone=function(){return Ne(this)},Kn.get=function(t){return t=F(t),this.isValid()?this[t+"s"]():NaN},Kn.milliseconds=zn,Kn.seconds=Un,Kn.minutes=Fn,Kn.hours=Nn,Kn.days=Yn,Kn.weeks=function(){return H(this.days()/7)},Kn.months=Bn,Kn.years=Gn,Kn.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,a=Wn;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(i=t),"object"==typeof e&&(a=Object.assign({},Wn,e),null!=e.s&&null==e.ss&&(a.ss=e.s-1)),n=this.localeData(),r=function(t,e,n,r){var i=Ne(t).abs(),a=Hn(i.as("s")),o=Hn(i.as("m")),s=Hn(i.as("h")),u=Hn(i.as("d")),c=Hn(i.as("M")),l=Hn(i.as("w")),f=Hn(i.as("y")),h=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(h=h||l<=1&&["w"]||l<n.w&&["ww",l]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||f<=1&&["y"]||["yy",f])[2]=e,h[3]=+t>0,h[4]=r,Zn.apply(null,h)}(this,!i,a,n),i&&(r=n.pastFuture(+this,r)),n.postformat(r)},Kn.toISOString=Jn,Kn.toString=Jn,Kn.toJSON=Jn,Kn.locale=$e,Kn.localeData=tn,Kn.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Jn),Kn.lang=Qe,R("X",0,0,"unix"),R("x",0,0,"valueOf"),vt("x",ct),vt("X",/[+-]?\d+(\.\d{1,3})?/),yt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),yt("x",(function(t,e,n){n._d=new Date(W(t))})),r.version="2.29.1",e=Ce,r.fn=pn,r.min=function(){var t=[].slice.call(arguments,0);return ke("isBefore",t)},r.max=function(){var t=[].slice.call(arguments,0);return ke("isAfter",t)},r.now=function(){return Date.now?Date.now():+new Date},r.utc=v,r.unix=function(t){return Ce(1e3*t)},r.months=function(t,e){return bn(t,e,"months")},r.isDate=l,r.locale=ae,r.invalid=p,r.duration=Ne,r.isMoment=x,r.weekdays=function(t,e,n){return xn(t,e,n,"weekdays")},r.parseZone=function(){return Ce.apply(null,arguments).parseZone()},r.localeData=se,r.isDuration=Ae,r.monthsShort=function(t,e){return bn(t,e,"monthsShort")},r.weekdaysMin=function(t,e,n){return xn(t,e,n,"weekdaysMin")},r.defineLocale=oe,r.updateLocale=function(t,e){if(null!=e){var n,r,i=Qt;null!=te[t]&&null!=te[t].parentLocale?te[t].set(k(te[t]._config,e)):(null!=(r=ie(t))&&(i=r._config),e=k(i,e),null==r&&(e.abbr=t),(n=new T(e)).parentLocale=te[t],te[t]=n),ae(t)}else null!=te[t]&&(null!=te[t].parentLocale?(te[t]=te[t].parentLocale,t===ae()&&ae(t)):null!=te[t]&&delete te[t]);return te[t]},r.locales=function(){return w(te)},r.weekdaysShort=function(t,e,n){return xn(t,e,n,"weekdaysShort")},r.normalizeUnits=F,r.relativeTimeRounding=function(t){return void 0===t?Hn:"function"==typeof t&&(Hn=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Wn[t]&&(void 0===e?Wn[t]:(Wn[t]=e,"s"===t&&(Wn.ss=e-1),!0))},r.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=pn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n("RoC8")(t))},x8l1:function(t,e,n){"use strict";var r=n("hisu"),i=n("yBJb"),a=n("CHlC"),o=n("kMo5"),s=n("P+uj"),u=n("T645"),c=n("a1c8"),l=(n("iwTS"),n("J4Pc"),n("B2Uc"),n("cY28"),n("IxxH"),n("j92Z")),f=(n("0fR5"),n("H8zE")),h=n("pt9v"),v=n("/zE3");function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var m=function(t){Object(a.a)(n,t);var e=d(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments))._color=Object(u.a)(1,0,0,1),t._initialized=!1,t}return Object(i.a)(n,[{key:"dispose",value:function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null),this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)}},{key:"prepareState",value:function(t,e){var n=t.context;n.setDepthWriteEnabled(!1),n.setDepthTestEnabled(!1),n.setStencilTestEnabled(!0),n.setBlendingEnabled(!1),n.setColorMask(!1,!1,!1,!1),n.setStencilOp(7680,7680,7681),n.setStencilWriteMask(255),n.setStencilFunctionSeparate(1032,516,e.stencilRef,255)}},{key:"draw",value:function(t,e){var n=t.context;this._initialized||this._initialize(n),n.bindVAO(this._solidVertexArrayObject),n.useProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv("u_dvsMat3",e.transforms.dvs),this._solidProgram.setUniform2fv("u_coord_range",e.coordRange),this._solidProgram.setUniform1f("u_depth",0),this._solidProgram.setUniform4fv("u_color",this._color),n.drawArrays(5,0,4),n.bindVAO()}},{key:"_initialize",value:function(t){if(this._initialized)return!0;var e=Object(l.a)(t,v.a);if(!e)return!1;var n=new Int8Array([0,0,1,0,0,1,1,1]),r=c.a.createVertex(t,35044,n),i=new f.a(t,v.a.attributes,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:r});return this._solidProgram=e,this._solidVertexArrayObject=i,this._initialized=!0,!0}}]),n}(h.a);e.a=m},x8wo:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n("mK0O"),i=n("hisu"),a=n("yBJb"),o=n("4Mpa"),s=n("CHlC"),u=n("kMo5"),c=n("P+uj"),l=n("J4Pc"),f=n("PFYi"),h=n("S6/K");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var y=Object(l.a)("mapview-transitions-duration"),g=function(t){Object(s.a)(n,t);var e=_(n);function n(){var t;return Object(i.a)(this,n),(t=e.apply(this,arguments))._childrenSet=new Set,t.children=[],t._effectList=null,t}return Object(a.a)(n,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t,this.requestRender()}},{key:"clips",get:function(){return this._clips},set:function(t){this._clips=t,this.children.forEach((function(e){return e.clips=t}))}},{key:"computedEffects",get:function(){var t,e;return null!=(t=null==(e=this._effectList)?void 0:e.effects)?t:null}},{key:"effect",get:function(){var t,e;return null!=(t=null==(e=this._effectList)?void 0:e.effect)?t:""},set:function(t){(this._effectList||t)&&(this._effectList||(this._effectList=new h.a(y)),this._effectList.effect=t,this.requestRender())}},{key:"updateTransitionProperties",value:function(t,e){Object(o.a)(Object(c.a)(n.prototype),"updateTransitionProperties",this).call(this,t,e),this._effectList&&(this._effectList.transitionStep(t,e),this._effectList.transitioning&&this.requestRender())}},{key:"doRender",value:function(t){var e=this.createRenderParams(t);this.renderChildren(e)}},{key:"addChild",value:function(t){return this.addChildAt(t,this.children.length)}},{key:"addChildAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.children.length;if(!t)return t;if(this.contains(t))return t;var n=t.parent;return n&&n!==this&&n.removeChild(t),e>=this.children.length?this.children.push(t):this.children.splice(e,0,t),this._childrenSet.add(t),t.parent=this,t.stage=this.stage,this!==this.stage&&(t.clips=this.clips),this.requestRender(),t}},{key:"contains",value:function(t){return this._childrenSet.has(t)}},{key:"removeAllChildren",value:function(){this._childrenSet.clear();var t,e=m(this.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;this!==this.stage&&(n.clips=null),n.stage=null,n.parent=null}}catch(r){e.e(r)}finally{e.f()}this.children.length=0}},{key:"removeChild",value:function(t){return this.contains(t)?this.removeChildAt(this.children.indexOf(t)):t}},{key:"removeChildAt",value:function(t){if(t<0||t>=this.children.length)return null;var e=this.children.splice(t,1)[0];return this._childrenSet.delete(e),this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null,e}},{key:"sortChildren",value:function(t){return this.children.sort(t)}},{key:"onAttach",value:function(){Object(o.a)(Object(c.a)(n.prototype),"onAttach",this).call(this);var t,e=this.stage,r=m(this.children);try{for(r.s();!(t=r.n()).done;){t.value.stage=e}}catch(i){r.e(i)}finally{r.f()}}},{key:"onDetach",value:function(){Object(o.a)(Object(c.a)(n.prototype),"onDetach",this).call(this);var t,e=m(this.children);try{for(e.s();!(t=e.n()).done;){t.value.stage=null}}catch(r){e.e(r)}finally{e.f()}}},{key:"renderChildren",value:function(t){var e,n=m(this.children);try{for(n.s();!(e=n.n()).done;){e.value.beforeRender(t)}}catch(s){n.e(s)}finally{n.f()}var r,i=m(this.children);try{for(i.s();!(r=i.n()).done;){r.value.processRender(t)}}catch(s){i.e(s)}finally{i.f()}var a,o=m(this.children);try{for(o.s();!(a=o.n()).done;){a.value.afterRender(t)}}catch(s){o.e(s)}finally{o.f()}}},{key:"createRenderParams",value:function(t){return d(d({},t),{},{blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:t.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition})}}]),n}(f.a)},yzGw:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i}));var r=new Float32Array(1);new Uint32Array(r.buffer);function i(t){return[255&t,(65280&t)>>>8,(16711680&t)>>>16,(4278190080&t)>>>24]}function a(t,e){return 65535&t|e<<16}function o(t,e,n,r){return 255&t|(255&e)<<8|(255&n)<<16|r<<24}},z4xm:function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return x})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return S})),n.d(e,"g",(function(){return w}));var r=n("aNYv"),i=n("aic5");var a=function(t,e,n){return[e,n]},o=function(t,e,n){return[e,n,t[2]]},s=function(t,e,n){return[e,n,t[2],t[3]]};function u(t){return t?{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:t.extent?[t.extent.xmin,t.extent.ymax]:[0,0]}:null}function c(t,e){var n=t.scale,r=t.translate;return Math.round((e-r[0])/n[0])}function l(t,e){var n=t.scale,r=t.translate;return Math.round((r[1]-e)/n[1])}function f(t,e,n){for(var r,i,a,o,s=[],u=0;u<n.length;u++){var f=n[u];u>0?(a=c(t,f[0]),o=l(t,f[1]),a===r&&o===i||(s.push(e(f,a-r,o-i)),r=a,i=o)):(r=c(t,f[0]),i=l(t,f[1]),s.push(e(f,r,i)))}return s.length>0?s:null}function h(t,e){var n=t.scale,r=t.translate;return e*n[0]+r[0]}function v(t,e){var n=t.scale;return t.translate[1]-e*n[1]}function d(t,e,n){var i=new Array(n.length);if(!n.length)return i;var a=Object(r.a)(t.scale,2),o=a[0],s=a[1],u=h(t,n[0][0]),c=v(t,n[0][1]);i[0]=e(n[0],u,c);for(var l=1;l<n.length;l++){var f=n[l];u+=f[0]*o,c-=f[1]*s,i[l]=e(f,u,c)}return i}function m(t,e,n){for(var r=new Array(n.length),i=0;i<n.length;i++)r[i]=d(t,e,n[i]);return r}function p(t,e,n,r,i){return e.points=function(t,e,n,r){return f(t,n?r?s:o:r?o:a,e)}(t,n.points,r,i),e}function _(t,e,n,r,i){return e.x=c(t,n.x),e.y=l(t,n.y),e!==n&&(r&&(e.z=n.z),i&&(e.m=n.m)),e}function y(t,e,n,r,i){var u=function(t,e,n,r){for(var i=[],u=n?r?s:o:r?o:a,c=0;c<e.length;c++){var l=f(t,u,e[c]);l&&l.length>=3&&i.push(l)}return i.length?i:null}(t,n.rings,r,i);return u?(e.rings=u,e):null}function g(t,e,n,r,i){var u=function(t,e,n,r){for(var i=[],u=n?r?s:o:r?o:a,c=0;c<e.length;c++){var l=f(t,u,e[c]);l&&l.length>=2&&i.push(l)}return i.length?i:null}(t,n.paths,r,i);return u?(e.paths=u,e):null}function b(t,e){return t&&e?Object(i.f)(e)?_(t,{},e,!1,!1):Object(i.h)(e)?g(t,{},e,!1,!1):Object(i.g)(e)?y(t,{},e,!1,!1):Object(i.e)(e)?p(t,{},e,!1,!1):Object(i.d)(e)?(o=!1,s=!1,(r={}).xmin=c(n=t,(a=e).xmin),r.ymin=l(n,a.ymin),r.xmax=c(n,a.xmax),r.ymax=l(n,a.ymax),r!==a&&(o&&(r.zmin=a.zmin,r.zmax=a.zmax),s&&(r.mmin=a.mmin,r.mmax=a.mmax)),r):null:null;var n,r,a,o,s}function x(t,e,n,r,i){return e.points=function(t,e,n,r){return d(t,n?r?s:o:r?o:a,e)}(t,n.points,r,i),e}function O(t,e,n,r,i){return e.x=h(t,n.x),e.y=v(t,n.y),e!==n&&(r&&(e.z=n.z),i&&(e.m=n.m)),e}function S(t,e,n,r,i){return e.rings=function(t,e,n,r){return m(t,n?r?s:o:r?o:a,e)}(t,n.rings,r,i),e}function w(t,e,n,r,i){return e.paths=function(t,e,n,r){return m(t,n?r?s:o:r?o:a,e)}(t,n.paths,r,i),e}},zEHB:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=[1,256,65536,16777216],i=[1/256,1/65536,1/16777216,1/4294967296],a=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,r=0;r<4;r++)n+=t[e+r]*i[r];return n}(new Uint8ClampedArray([255,255,255,255]));function o(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=s(t,0,a),o=0;o<4;o++)e[n+o]=Math.floor(256*u(i*r[o]))}function s(t,e,n){return t<e?e:t>n?n:t}function u(t){return t-Math.floor(t)}},"zc/w":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i}));var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function a(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,n("pCvA"))}}]);
//# sourceMappingURL=commons-2d96b703c540474be1ff.js.map