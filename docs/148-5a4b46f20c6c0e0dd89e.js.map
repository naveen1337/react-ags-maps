{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/symbols/cim/TextRasterizer.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e4","f","TypeError","err","normalCompletion","didErr","step","next","_e5","return","arr","len","arr2","r","this","key","t","_r","_textRasterizationCanvas","document","createElement","getContext","setFontProperties","parameters","textLines","split","lineHeight","computeLineHeight","a","computeTextWidth","h","width","height","renderedLineHeight","Math","round","pixelRatio","renderedHaloSize","halo","size","renderedWidth","renderedHeight","fillStyle","concat","color","haloStyle","l","d","c","textAlign","g","p","renderHalo","_step","_iterator","_e2","globalCompositeOperation","fillText","u","getImageData","x","Uint8Array","data","premultiplyColors","_t","_e","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","_r2","_haloRasterizationCanvas","clearRect","strokeStyle","lineJoin","renderHaloEmulated","renderHaloNative","globalAlpha","drawImage","_step2","_r3","_iterator2","_step3","_iterator3","_step3$value","_r9","_step4","_r5","_iterator4","_o","_r10","_s","lineWidth","strokeText","_r7","font","style","weight","family","textBaseline","horizontalAlignment","_step5","_iterator5","_s2","max","measureText","_r8","push","cos","PI","sin","_e6","_e7","Legend","Preview","targetSize","_i","frame","xmax","xmin","ymax","ymin","referenceSize","scaleFactor","fill","legend","geometry","rings","canvasPaths","preview","stroke","paths","keys","map","alias","type","symbol","P","materialHash","cim","materialOverrides","analyzedCIM","hash","C","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","_textRasterizer","_pictureMarkerCache","_fetchPictureMarkerResource","_analyzeCIMSymbol","_rasterizeCIMSymbolAsync","mark","_callee","wrap","_context","prev","centroid","analyzeCIMSymbol","attributes","sent","abrupt","rasterizeCIMSymbol","stop","_x","_x2","_x3","_x4","_x5","_x6","_x7","_x8","apply","arguments","_callee2","_i2","_t2","_context2","geometryType","spatialReference","fields","fetchPictureMarkerResource","text","indexOf","textCase","t0","Promise","all","_x9","_x10","_x11","_x12","_x13","_callee3","_i3","_context3","get","url","responseType","signal","set","_x14","_x15","_n","_getRasterizedResource","_c","_m","_h","_g","_y","offsetX","offsetY","rotation","rotateClockwise","angle","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","_f","_t3","_l","_m2","_h2","_g2","_y2","_u","_p","_d","_M","_C4","_I","_z","_e3","_t4","_a","_i4","_o2","_n2","_c2","_l2","min","_P","createImageData","Uint8ClampedArray","rasterizedImage","m","_f2","_t5","_imageDataToCanvas","_i5","_o3","_n3","_i6","save","translate","rotate","restore","y","imageData","anchorPosition","_imageDataCanvas","putImageData","_m3","_h3","_P2","_this$_getPictureReso","_getPictureResource","_a2","_i7","_n4","_rasterizePictureResource","_embedCIMLayerInVectorMarker","markerPlacement","JSON","stringify","_P5","_a3","_i8","_c3","_this$_getPictureReso2","_P4","_r4","rasterizeJSONResource","_rasterizeTextResource","_P6","_a4","_this$_getPictureReso3","anchorPoint","preserveOutlineWidth","has","window","devicePixelRatio","fontName","decoration","M","outlineColor","_C2","outlineSize","rasterizeText","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","_C3","beginPath","_s3","_t6","moveTo","_a5","lineTo","closePath","I","z","_imageTo32Array","markerGraphics","symbolLayers","b","w","D","_args","undefined","maxSize","node","opacity","cimOptions","feature","fieldMap","clone","rasterizeCIMSymbolAsync","scale","ceil","Image","src","toDataURL","appendChild"],"mappings":"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","file":"148-5a4b46f20c6c0e0dd89e.js","sourcesContent":["import _slicedToArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e4) { throw _e4; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e5) { didErr = true; err = _e5; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { pt2px as t } from \"../../core/screenUtils.js\";\n\nfunction e(t) {\n  return \"rgb(\".concat(t.slice(0, 3).toString(), \")\");\n}\n\nfunction i(t) {\n  return \"rgba(\".concat(t.slice(0, 3).toString(), \",\").concat(t[3], \")\");\n}\n\nvar r = /*#__PURE__*/function () {\n  function r() {\n    _classCallCheck(this, r);\n  }\n\n  _createClass(r, [{\n    key: \"rasterizeText\",\n    value: function rasterizeText(t, _r) {\n      this._textRasterizationCanvas || (this._textRasterizationCanvas = document.createElement(\"canvas\"));\n      var o = this._textRasterizationCanvas,\n          n = o.getContext(\"2d\");\n      this.setFontProperties(n, _r), this.parameters = _r, this.textLines = t.split(/\\r?\\n/), this.lineHeight = this.computeLineHeight();\n      var a = this.computeTextWidth(n, _r),\n          h = this.lineHeight * this.textLines.length;\n      o.width = a, o.height = h, this.renderedLineHeight = Math.round(this.lineHeight * _r.pixelRatio), this.renderedHaloSize = _r.halo.size * _r.pixelRatio, this.renderedWidth = a * _r.pixelRatio, this.renderedHeight = h * _r.pixelRatio, this.fillStyle = i(_r.color), this.haloStyle = e(_r.halo.color);\n      var l = this.renderedLineHeight,\n          d = this.renderedHaloSize;\n      this.setFontProperties(n, _r);\n      var c = s(n.textAlign, this.renderedWidth) + d,\n          g = d;\n      var f = 0,\n          p = 0;\n      d > 0 && this.renderHalo(n, c, g, f, p, _r), p += g, f += c;\n\n      var _iterator = _createForOfIteratorHelper(this.textLines),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _e2 = _step.value;\n          n.globalCompositeOperation = \"destination-out\", n.fillStyle = \"rgb(0, 0, 0)\", n.fillText(_e2, f, p), n.globalCompositeOperation = \"source-over\", n.fillStyle = this.fillStyle, n.fillText(_e2, f, p), p += l;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var u = n.getImageData(0, 0, this.renderedWidth, this.renderedHeight),\n          x = new Uint8Array(u.data);\n\n      if (_r.premultiplyColors) {\n        var _t;\n\n        for (var _e = 0; _e < x.length; _e += 4) {\n          _t = x[_e + 3] / 255, x[_e] = x[_e] * _t, x[_e + 1] = x[_e + 1] * _t, x[_e + 2] = x[_e + 2] * _t;\n        }\n      }\n\n      return {\n        size: [this.renderedWidth, this.renderedHeight],\n        image: new Uint32Array(x.buffer),\n        sdf: !1,\n        simplePattern: !1,\n        anchorX: 0,\n        anchorY: 0\n      };\n    }\n  }, {\n    key: \"renderHalo\",\n    value: function renderHalo(t, e, i, _r2, s, o) {\n      var n = this.renderedWidth,\n          a = this.renderedHeight;\n      this._haloRasterizationCanvas || (this._haloRasterizationCanvas = document.createElement(\"canvas\")), this._haloRasterizationCanvas.width = n, this._haloRasterizationCanvas.height = a;\n      var h = this._haloRasterizationCanvas,\n          l = h.getContext(\"2d\");\n      l.clearRect(0, 0, n, a), this.setFontProperties(l, o), l.fillStyle = this.haloStyle, l.strokeStyle = this.haloStyle;\n      var d = this.renderedHaloSize < 3;\n      l.lineJoin = d ? \"miter\" : \"round\", d ? this.renderHaloEmulated(l, e, i) : this.renderHaloNative(l, e, i), t.globalAlpha = this.parameters.halo.color[3], t.drawImage(h, 0, 0, n, a, _r2, s, n, a), t.globalAlpha = 1;\n    }\n  }, {\n    key: \"renderHaloEmulated\",\n    value: function renderHaloEmulated(t, e, i) {\n      var _r3 = this.renderedLineHeight,\n          s = this.renderedHaloSize;\n\n      var _iterator2 = _createForOfIteratorHelper(this.textLines),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var n = _step2.value;\n\n          var _iterator3 = _createForOfIteratorHelper(o),\n              _step3;\n\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var _step3$value = _slicedToArray(_step3.value, 2),\n                  _r9 = _step3$value[0],\n                  a = _step3$value[1];\n\n              t.fillText(n, e + s * _r9, i + s * a);\n            }\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n\n          i += _r3;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"renderHaloNative\",\n    value: function renderHaloNative(t, e, i) {\n      var _r5 = this.renderedLineHeight,\n          s = this.renderedHaloSize;\n\n      var _iterator4 = _createForOfIteratorHelper(this.textLines),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _o = _step4.value;\n          var n = 2 * s,\n              a = 5,\n              h = .1;\n\n          for (var _r10 = 0; _r10 < a; _r10++) {\n            var _s = 1 - (a - 1) * h + _r10 * h;\n\n            t.lineWidth = _s * n, t.strokeText(_o, e, i);\n          }\n\n          i += _r5;\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"setFontProperties\",\n    value: function setFontProperties(e, i) {\n      var _r7 = i.font,\n          s = \"\".concat(_r7.style, \" \").concat(_r7.weight, \" \").concat(t(i.size * i.pixelRatio), \"px \").concat(_r7.family, \", sans-serif\");\n      var o;\n\n      switch (e.font = s, e.textBaseline = \"top\", i.horizontalAlignment) {\n        case \"left\":\n          o = \"left\";\n          break;\n\n        case \"right\":\n          o = \"right\";\n          break;\n\n        case \"center\":\n          o = \"center\";\n          break;\n\n        default:\n          o = \"left\";\n      }\n\n      e.textAlign = o;\n    }\n  }, {\n    key: \"computeTextWidth\",\n    value: function computeTextWidth(t, e) {\n      var i = 0;\n\n      var _iterator5 = _createForOfIteratorHelper(this.textLines),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var _s2 = _step5.value;\n          i = Math.max(i, t.measureText(_s2).width);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      var _r8 = e.font;\n      return (\"italic\" === _r8.style || \"oblique\" === _r8.style || \"string\" == typeof _r8.weight && (\"bold\" === _r8.weight || \"bolder\" === _r8.weight) || \"number\" == typeof _r8.weight && _r8.weight > 600) && (i += .3 * t.measureText(\"A\").width), i += 2 * this.parameters.halo.size, Math.round(i);\n    }\n  }, {\n    key: \"computeLineHeight\",\n    value: function computeLineHeight() {\n      var t = 1.275 * this.parameters.size;\n      return Math.round(t + 2 * this.parameters.halo.size);\n    }\n  }]);\n\n  return r;\n}();\n\nfunction s(t, e) {\n  return \"center\" === t ? .5 * e : \"right\" === t ? e : 0;\n}\n\nvar o = [];\n{\n  var _t2 = 16;\n\n  for (var _e3 = 0; _e3 < 360; _e3 += 360 / _t2) {\n    o.push([Math.cos(Math.PI * _e3 / 180), Math.sin(Math.PI * _e3 / 180)]);\n  }\n}\nexport default r;\nexport { r as TextRasterizer };","import _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e6) { throw _e6; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e7) { didErr = true; err = _e7; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport { throwIfAborted as t } from \"../../core/promiseUtils.js\";\nimport { pt2px as r } from \"../../core/screenUtils.js\";\nimport { numericHash as a } from \"../../core/string.js\";\nimport { getJsonType as i, isPolygon as s, isPolyline as o } from \"../../geometry/support/jsonUtils.js\";\nimport { analyzeCIMSymbol as n, analyzeCIMResource as c } from \"./cimAnalyzer.js\";\nimport l from \"./Rasterizer.js\";\nimport { TextRasterizer as m } from \"./TextRasterizer.js\";\nimport { createLabelOverrideFunction as h, evaluateValueOrFunction as f, colorToArray as g } from \"./utils.js\";\nimport { scaleCIMMarker as y } from \"../support/cimSymbolUtils.js\";\nimport u from \"../support/Symbol3DAnchorPosition2D.js\";\nvar p;\n!function (e) {\n  e.Legend = \"legend\", e.Preview = \"preview\";\n}(p || (p = {}));\n\nvar d = function d(e, t, a) {\n  if (e && e.targetSize) {\n    var _i;\n\n    if (a) {\n      var _t = Math.max(a.frame.xmax - a.frame.xmin, a.frame.ymax - a.frame.ymin);\n\n      _i = e.targetSize / r(_t);\n    } else _i = e.targetSize / t.referenceSize;\n\n    return _i;\n  }\n\n  return e && e.scaleFactor ? e.scaleFactor : 1;\n},\n    M = {\n  fill: {\n    legend: {\n      frame: {\n        xmax: 15,\n        xmin: 0,\n        ymax: 15,\n        ymin: 0\n      },\n      geometry: {\n        rings: [[[0, 15], [15, 7.5], [15, 0], [0, 0], [0, 15]]]\n      },\n      canvasPaths: {\n        rings: [[[0, 15], [0, 0], [15, 7.5], [15, 15], [0, 15]]]\n      }\n    },\n    preview: {\n      frame: {\n        xmax: 100,\n        xmin: 0,\n        ymax: 100,\n        ymin: 0\n      },\n      geometry: {\n        rings: [[[0, 100], [100, 100], [100, 0], [0, 0], [0, 100]]]\n      },\n      canvasPaths: {\n        rings: [[[0, 100], [0, 0], [100, 0], [100, 100], [0, 100]]]\n      }\n    }\n  },\n  stroke: {\n    legend: {\n      frame: {\n        xmax: 24,\n        xmin: 0,\n        ymax: -2,\n        ymin: 2\n      },\n      geometry: {\n        paths: [[[0, 0], [12, 0], [24, 0]]]\n      },\n      canvasPaths: {\n        paths: [[[0, 2], [12, 2], [24, 2]]]\n      }\n    },\n    preview: {\n      frame: {\n        xmax: 100,\n        xmin: 0,\n        ymax: -2,\n        ymin: 2\n      },\n      geometry: {\n        paths: [[[0, 0], [50, 0], [100, 0]]]\n      },\n      canvasPaths: {\n        paths: [[[0, 2], [50, 2], [100, 2]]]\n      }\n    }\n  }\n};\n\nvar C = /*#__PURE__*/function () {\n  function C(e, t) {\n    _classCallCheck(this, C);\n\n    this._spatialReference = e, this._avoidSDF = t, this._resourceCache = new Map(), this._rasterizer = new l(), this._textRasterizer = new m(), this._pictureMarkerCache = new Map();\n  }\n\n  _createClass(C, [{\n    key: \"rasterizeCIMSymbolAsync\",\n    value: function () {\n      var _rasterizeCIMSymbolAsync = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e, t, r, a, s, o, n, c) {\n        var l;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                a = a || (t ? null != t.centroid ? \"esriGeometryPolygon\" : i(t.geometry) : null) || z(e);\n                _context.next = 3;\n                return this.analyzeCIMSymbol(e, t ? I(t.attributes) : null, r, a, c);\n\n              case 3:\n                l = _context.sent;\n                return _context.abrupt(\"return\", this.rasterizeCIMSymbol(l, t, a, s, o, n));\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function rasterizeCIMSymbolAsync(_x, _x2, _x3, _x4, _x5, _x6, _x7, _x8) {\n        return _rasterizeCIMSymbolAsync.apply(this, arguments);\n      }\n\n      return rasterizeCIMSymbolAsync;\n    }()\n  }, {\n    key: \"analyzeCIMSymbol\",\n    value: function () {\n      var _analyzeCIMSymbol = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e, r, a, i, s) {\n        var o, c, l, _i2, _o, _t2;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                o = [], c = r ? {\n                  geometryType: i,\n                  spatialReference: this._spatialReference,\n                  fields: r\n                } : null;\n                _context2.next = 3;\n                return n(e.data, c, o, this._avoidSDF);\n\n              case 3:\n                t(s);\n\n                for (_i2 = 0, _o = o; _i2 < _o.length; _i2++) {\n                  _t2 = _o[_i2];\n                  \"CIMPictureMarker\" !== _t2.cim.type && \"CIMPictureFill\" !== _t2.cim.type && \"CIMPictureStroke\" !== _t2.cim.type || (l || (l = []), l.push(this.fetchPictureMarkerResource(_t2, s))), a && \"text\" === _t2.type && \"string\" == typeof _t2.text && _t2.text.indexOf(\"[\") > -1 && (_t2.text = h(a, _t2.text, _t2.cim.textCase));\n                }\n\n                _context2.t0 = l;\n\n                if (!_context2.t0) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                _context2.next = 9;\n                return Promise.all(l);\n\n              case 9:\n                return _context2.abrupt(\"return\", o);\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function analyzeCIMSymbol(_x9, _x10, _x11, _x12, _x13) {\n        return _analyzeCIMSymbol.apply(this, arguments);\n      }\n\n      return analyzeCIMSymbol;\n    }()\n  }, {\n    key: \"fetchPictureMarkerResource\",\n    value: function () {\n      var _fetchPictureMarkerResource = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(t, r) {\n        var a, _i3;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                a = t.materialHash;\n\n                if (this._pictureMarkerCache.get(a)) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                _context3.next = 4;\n                return e(t.cim.url, {\n                  responseType: \"image\",\n                  signal: r && r.signal\n                });\n\n              case 4:\n                _i3 = _context3.sent.data;\n\n                this._pictureMarkerCache.set(a, _i3);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function fetchPictureMarkerResource(_x14, _x15) {\n        return _fetchPictureMarkerResource.apply(this, arguments);\n      }\n\n      return fetchPictureMarkerResource;\n    }()\n  }, {\n    key: \"rasterizeCIMSymbol\",\n    value: function rasterizeCIMSymbol(e, t, r, a, i, s) {\n      var o = [];\n\n      var _iterator = _createForOfIteratorHelper(e),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _n = _step.value;\n          a && \"function\" == typeof a.scaleFactor && (a.scaleFactor = a.scaleFactor(t, i, s));\n\n          var _e = this._getRasterizedResource(_n, t, r, a, i, s);\n\n          if (!_e) continue;\n\n          var _c = 0,\n              l = _e.anchorX || 0,\n              _m = _e.anchorY || 0,\n              _h = !1,\n              _g = 0,\n              _y = 0;\n\n          if (\"esriGeometryPoint\" === r) {\n            var _e2 = d(a, _n, null);\n\n            if (_g = f(_n.offsetX, t, i, s) * _e2 || 0, _y = f(_n.offsetY, t, i, s) * _e2 || 0, \"marker\" === _n.type) _c = f(_n.rotation, t, i, s) || 0, _h = !!_n.rotateClockwise && _n.rotateClockwise;else if (\"text\" === _n.type) {\n              if (_c = f(_n.angle, t, i, s) || 0, void 0 !== _n.horizontalAlignment) switch (_n.horizontalAlignment) {\n                case \"left\":\n                  l = -.5;\n                  break;\n\n                case \"right\":\n                  l = .5;\n                  break;\n\n                default:\n                  l = 0;\n              }\n              if (void 0 !== _n.verticalAlignment) switch (_n.verticalAlignment) {\n                case \"top\":\n                  _m = .5;\n                  break;\n\n                case \"bottom\":\n                  _m = -.5;\n                  break;\n\n                case \"baseline\":\n                  _m = -.25;\n                  break;\n\n                default:\n                  _m = 0;\n              }\n            }\n          }\n\n          null != _e && o.push({\n            angle: _c,\n            rotateClockWise: _h,\n            anchorX: l,\n            anchorY: _m,\n            offsetX: _g,\n            offsetY: _y,\n            rasterizedResource: _e\n          });\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return this.getSymbolImage(o);\n    }\n  }, {\n    key: \"getSymbolImage\",\n    value: function getSymbolImage(e) {\n      var t = document.createElement(\"canvas\"),\n          a = t.getContext(\"2d\");\n      var i = 0,\n          s = 0,\n          o = 0,\n          n = 0;\n      var c = [];\n\n      for (var _f = 0; _f < e.length; _f++) {\n        var _t3 = e[_f],\n            _l = _t3.rasterizedResource;\n        if (!_l) continue;\n\n        var _m2 = _l.size,\n            _h2 = _t3.offsetX,\n            _g2 = _t3.offsetY,\n            _y2 = _t3.anchorX,\n            _u = _t3.anchorY,\n            _p = _t3.rotateClockWise || !1;\n\n        var _d = _t3.angle,\n            _M = r(_h2) - _m2[0] * (.5 + _y2),\n            _C4 = r(_g2) - _m2[1] * (.5 + _u),\n            _I = _M + _m2[0],\n            _z = _C4 + _m2[1];\n\n        if (_d) {\n          _p && (_d = -_d);\n\n          var _e3 = Math.sin(_d * Math.PI / 180),\n              _t4 = Math.cos(_d * Math.PI / 180),\n              _r = _M * _t4 - _C4 * _e3,\n              _a = _M * _e3 + _C4 * _t4,\n              _i4 = _M * _t4 - _z * _e3,\n              _s = _M * _e3 + _z * _t4,\n              _o2 = _I * _t4 - _z * _e3,\n              _n2 = _I * _e3 + _z * _t4,\n              _c2 = _I * _t4 - _C4 * _e3,\n              _l2 = _I * _e3 + _C4 * _t4;\n\n          _M = Math.min(_r, _i4, _o2, _c2), _C4 = Math.min(_a, _s, _n2, _l2), _I = Math.max(_r, _i4, _o2, _c2), _z = Math.max(_a, _s, _n2, _l2);\n        }\n\n        i = _M < i ? _M : i, s = _C4 < s ? _C4 : s, o = _I > o ? _I : o, n = _z > n ? _z : n;\n\n        var _P = a.createImageData(_l.size[0], _l.size[1]);\n\n        _P.data.set(new Uint8ClampedArray(_l.image.buffer));\n\n        var x = {\n          offsetX: _h2,\n          offsetY: _g2,\n          rotateClockwise: _p,\n          angle: _d,\n          rasterizedImage: _P,\n          anchorX: _y2,\n          anchorY: _u\n        };\n        c.push(x);\n      }\n\n      t.width = o - i, t.height = n - s;\n      var l = -i,\n          m = n;\n\n      for (var _f2 = 0; _f2 < c.length; _f2++) {\n        var _e4 = c[_f2],\n            _t5 = this._imageDataToCanvas(_e4.rasterizedImage),\n            _i5 = _e4.rasterizedImage.width,\n            _s2 = _e4.rasterizedImage.height,\n            _o3 = l - _i5 * (.5 + _e4.anchorX),\n            _n3 = m - _s2 * (.5 - _e4.anchorY);\n\n        if (_e4.angle) {\n          var _i6 = (360 - _e4.angle) * Math.PI / 180;\n\n          a.save(), a.translate(r(_e4.offsetX), -r(_e4.offsetY)), a.translate(l, m), a.rotate(_i6), a.translate(-l, -m), a.drawImage(_t5, _o3, _n3), a.restore();\n        } else a.drawImage(_t5, _o3 + r(_e4.offsetX), _n3 - r(_e4.offsetY));\n      }\n\n      var h = new u({\n        x: l / t.width - .5,\n        y: m / t.height - .5\n      });\n      return {\n        imageData: 0 !== t.width && 0 !== t.height ? a.getImageData(0, 0, t.width, t.height) : a.createImageData(1, 1),\n        anchorPosition: h\n      };\n    }\n  }, {\n    key: \"_imageDataToCanvas\",\n    value: function _imageDataToCanvas(e) {\n      this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n      var t = this._imageDataCanvas,\n          r = t.getContext(\"2d\");\n      return t.width = e.width, t.height = e.height, r.putImageData(e, 0, 0), t;\n    }\n  }, {\n    key: \"_imageTo32Array\",\n    value: function _imageTo32Array(e, t, r) {\n      this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n      var a = this._imageDataCanvas,\n          i = a.getContext(\"2d\");\n      return a.width = t, a.height = r, i.drawImage(e, 0, 0, t, r), new Uint32Array(i.getImageData(0, 0, t, r).data.buffer);\n    }\n  }, {\n    key: \"_getRasterizedResource\",\n    value: function _getRasterizedResource(e, t, r, i, s, o) {\n      var n, c, l, m;\n\n      if (\"esriGeometryPolyline\" === r || \"esriGeometryPolygon\" === r) {\n        var _m3 = i && i.style ? i.style : p.Legend,\n            _h3 = \"esriGeometryPolyline\" === r ? M.stroke[_m3] : M.fill[_m3];\n\n        if (\"line\" === e.type) {\n          var _P2;\n\n          if (\"CIMSolidStroke\" !== e.cim.type) {\n            if (\"CIMPictureStroke\" === e.cim.type) {\n              var _r2 = f(e.width, t, s, o),\n                  _this$_getPictureReso = this._getPictureResource(e, _r2),\n                  _a2 = _this$_getPictureReso.image,\n                  _i7 = _this$_getPictureReso.width,\n                  _n4 = _this$_getPictureReso.height;\n\n              return this._rasterizePictureResource(e, _a2, _i7, _n4, _h3, _r2);\n            }\n\n            return null;\n          }\n\n          (_P2 = P(e, t, s, o), n = _P2.analyzedCIM, l = _P2.hash, _P2), c = this._embedCIMLayerInVectorMarker(n, _h3);\n        } else if (\"marker\" === e.type) {\n          var _P3;\n\n          if (\"CIMPictureMarker\" === e.cim.type) return null;\n          if (\"CIMVectorMarker\" !== e.cim.type) return null;\n          e.cim.offsetX = f(e.offsetX, t, s, o), e.cim.offsetY = f(e.offsetY, t, s, o), e.cim.rotation = f(e.rotation, t, s, o), e.cim.markerPlacement = e.markerPlacement, (_P3 = P(e, t, s, o), n = _P3.analyzedCIM, _P3), l = a(JSON.stringify(n)).toString(), c = this._embedCIMLayerInVectorMarker(n, _h3);\n        } else {\n          if (\"text\" === e.type) return null;\n\n          if (\"fill\" === e.type) {\n            var _P5;\n\n            if (\"CIMHatchFill\" === e.cim.type || \"CIMVectorMarker\" === e.cim.type || \"CIMPictureMarker\" === e.cim.type || \"CIMPictureFill\" === e.cim.type) {\n              var _r3 = e.cim.size || e.cim.height;\n\n              var _a3, _i8, _c3;\n\n              if (\"CIMPictureMarker\" === e.cim.type || \"CIMPictureFill\" === e.cim.type) {\n                var _this$_getPictureReso2 = this._getPictureResource(e, _r3);\n\n                _a3 = _this$_getPictureReso2.image;\n                _i8 = _this$_getPictureReso2.width;\n                _c3 = _this$_getPictureReso2.height;\n              } else {\n                var _P4 = P(e, t, s, o);\n\n                n = _P4.analyzedCIM;\n                l = _P4.hash;\n\n                var _r4 = this._rasterizer.rasterizeJSONResource(n, 1, this._avoidSDF);\n\n                _a3 = _r4.image, _i8 = _r4.size[0], _c3 = _r4.size[1];\n              }\n\n              return this._rasterizePictureResource(e, _a3, _i8, _c3, _h3, null);\n            }\n\n            if (\"CIMSolidFill\" !== e.cim.type) return null;\n            (_P5 = P(e, t, s, o), n = _P5.analyzedCIM, l = _P5.hash, _P5), c = this._embedCIMLayerInVectorMarker(n, _h3);\n          }\n        }\n      } else {\n        if (\"text\" === e.type) return m = this._rasterizeTextResource(e, t, i, s, o), m;\n\n        var _P6 = P(e, t, s, o);\n\n        n = _P6.analyzedCIM;\n        l = _P6.hash;\n\n        var _r5 = d(i, e, null);\n\n        if (\"CIMPictureMarker\" === e.cim.type) {\n          var _a4 = f(e.size, t, s, o) * _r5,\n              _this$_getPictureReso3 = this._getPictureResource(e, _a4),\n              _i9 = _this$_getPictureReso3.image,\n              _n5 = _this$_getPictureReso3.width,\n              _c4 = _this$_getPictureReso3.height;\n\n          return m = {\n            image: _i9,\n            size: [_n5, _c4],\n            sdf: !1,\n            simplePattern: !1,\n            anchorX: e.anchorPoint ? e.anchorPoint.x : 0,\n            anchorY: e.anchorPoint ? e.anchorPoint.y : 0\n          }, m;\n        }\n\n        y(n, _r5, {\n          preserveOutlineWidth: !1\n        }), c = n;\n      }\n\n      l += r, i && (l += JSON.stringify(i));\n      var h = this._resourceCache;\n      return h.has(l) ? h.get(l) : (m = this._rasterizer.rasterizeJSONResource(c, window.devicePixelRatio || 1, this._avoidSDF), h.set(l, m), m);\n    }\n  }, {\n    key: \"_rasterizeTextResource\",\n    value: function _rasterizeTextResource(e, t, r, a, i) {\n      var s = d(r, e, null),\n          o = f(e.text, t, a, i);\n      if (!o || 0 === o.length) return null;\n      var n = f(e.fontName, t, a, i),\n          c = f(e.style, t, a, i),\n          l = f(e.weight, t, a, i),\n          m = f(e.decoration, t, a, i),\n          h = f(e.size, t, a, i) * s,\n          y = f(e.horizontalAlignment, t, a, i),\n          u = f(e.verticalAlignment, t, a, i),\n          p = g(f(e.color, t, a, i)),\n          M = g(f(e.outlineColor, t, a, i)),\n          _C2 = {\n        color: p,\n        size: h,\n        horizontalAlignment: y,\n        verticalAlignment: u,\n        font: {\n          family: n,\n          style: c,\n          weight: l,\n          decoration: m\n        },\n        halo: {\n          size: f(e.outlineSize, t, a, i) || 0,\n          color: M,\n          style: c\n        },\n        pixelRatio: 1,\n        premultiplyColors: !this._avoidSDF\n      };\n      return this._textRasterizer.rasterizeText(o, _C2);\n    }\n  }, {\n    key: \"_rasterizePictureResource\",\n    value: function _rasterizePictureResource(e, t, a, i, n, c) {\n      var l = document.createElement(\"canvas\"),\n          m = l.getContext(\"2d\");\n      l.height = r(Math.max(Math.abs(n.frame.ymax - n.frame.ymin), c)), l.width = r(Math.abs(n.frame.xmax - n.frame.xmin));\n      var h = m.createImageData(a, i);\n      h.data.set(new Uint8ClampedArray(t.buffer));\n\n      var f = this._imageDataToCanvas(h),\n          g = m.createPattern(f, \"repeat\"),\n          y = Math.cos((-e.cim.rotation || 0) * Math.PI / 180),\n          u = Math.sin((-e.cim.rotation || 0) * Math.PI / 180);\n\n      g.setTransform({\n        m11: y,\n        m12: u,\n        m21: -u,\n        m22: y,\n        m41: r(e.cim.offsetX) || 0,\n        m42: r(e.cim.offsetY) || 0\n      });\n      var p = n.canvasPaths;\n\n      var d, M, _C3;\n\n      s(p) ? (d = p.rings, m.fillStyle = g, M = m.fill, _C3 = [\"evenodd\"]) : o(p) && (d = p.paths, m.strokeStyle = g, m.lineWidth = c, M = m.stroke, d[0][0][1] = l.height / 2, d[0][1][1] = l.height / 2), m.beginPath();\n\n      var _iterator2 = _createForOfIteratorHelper(d),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _s3 = _step2.value;\n\n          var _e5 = _s3 ? _s3.length : 0;\n\n          if (_e5 > 1) {\n            var _t6 = _s3[0];\n            m.moveTo(r(_t6[0]), r(_t6[1]));\n\n            for (var _a5 = 1; _a5 < _e5; ++_a5) {\n              _t6 = _s3[_a5], m.lineTo(r(_t6[0]), r(_t6[1]));\n            }\n\n            m.closePath();\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      M.apply(m, _C3);\n      var I = m.getImageData(0, 0, l.width, l.height),\n          z = new Uint8Array(I.data);\n      return {\n        size: [l.width, l.height],\n        image: new Uint32Array(z.buffer),\n        sdf: !1,\n        simplePattern: !1,\n        anchorX: 0,\n        anchorY: 0\n      };\n    }\n  }, {\n    key: \"_getPictureResource\",\n    value: function _getPictureResource(e, t) {\n      var a = this._pictureMarkerCache.get(e.materialHash);\n\n      if (!a) return null;\n      var i = a.height / a.width,\n          s = t ? i > 1 ? r(t) : r(t) / i : a.width,\n          o = t ? i > 1 ? r(t) * i : r(t) : a.height;\n      return {\n        image: this._imageTo32Array(a, s, o),\n        width: s,\n        height: o\n      };\n    }\n  }, {\n    key: \"_embedCIMLayerInVectorMarker\",\n    value: function _embedCIMLayerInVectorMarker(e, t) {\n      var r = s(t.geometry) ? \"CIMPolygonSymbol\" : \"CIMLineSymbol\";\n      return {\n        type: \"CIMVectorMarker\",\n        frame: t.frame,\n        markerGraphics: [{\n          type: \"CIMMarkerGraphic\",\n          geometry: t.geometry,\n          symbol: {\n            type: r,\n            symbolLayers: [e]\n          }\n        }]\n      };\n    }\n  }]);\n\n  return C;\n}();\n\nfunction I(e) {\n  return (e ? Object.keys(e) : []).map(function (t) {\n    return {\n      name: t,\n      alias: t,\n      type: \"string\" == typeof e[t] ? \"esriFieldTypeString\" : \"esriFieldTypeDouble\"\n    };\n  });\n}\n\nfunction z(e) {\n  if (!(e && e.data && e.data.symbol)) return null;\n\n  switch (e.data.symbol.type) {\n    case \"CIMPointSymbol\":\n    case \"CIMTextSymbol\":\n      return \"esriGeometryPoint\";\n\n    case \"CIMLineSymbol\":\n      return \"esriGeometryPolyline\";\n\n    case \"CIMPolygonSymbol\":\n      return \"esriGeometryPolygon\";\n\n    default:\n      return null;\n  }\n}\n\nfunction P(e, t, r, a) {\n  var i, s;\n\n  if (\"function\" == typeof e.materialHash) {\n    i = (0, e.materialHash)(t, r, a), s = c(e.cim, e.materialOverrides);\n  } else i = e.materialHash, s = e.cim;\n\n  return {\n    analyzedCIM: s,\n    hash: i\n  };\n}\n\nexport { C as CIMSymbolRasterizer, p as GeometryStyle };","import _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { px2pt as t } from \"../../core/screenUtils.js\";\nimport { CIMSymbolRasterizer as e } from \"../cim/CIMSymbolRasterizer.js\";\nimport { getCIMSymbolSize as a, scaleCIMSymbolTo as l } from \"./cimSymbolUtils.js\";\nvar i = new e(null, !0),\n    o = 120;\n\nfunction n(_x) {\n  return _n.apply(this, arguments);\n}\n\nfunction _n() {\n  _n = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n    var n,\n        s,\n        c,\n        m,\n        r,\n        y,\n        d,\n        h,\n        p,\n        u,\n        g,\n        f,\n        M,\n        b,\n        w,\n        C,\n        D,\n        _t,\n        I,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            n = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            s = n.size, c = n.maxSize, m = n.node, r = n.opacity, y = n.cimOptions || n, d = y.feature, h = y.fieldMap, p = y.geometryType, u = y.style, g = a(e), f = Math.min(null != s ? s : g, null != c ? c : t(o));\n            f !== g && (e = e.clone(), l(e, f, {\n              preserveOutlineWidth: !0\n            }));\n            M = 3;\n            e && e.data && e.data.symbol && \"CIMPointSymbol\" !== e.data.symbol.type && (M = 1);\n            _context.next = 7;\n            return i.rasterizeCIMSymbolAsync(e, d, h, p, {\n              scaleFactor: M,\n              style: u\n            });\n\n          case 7:\n            b = _context.sent;\n            w = document.createElement(\"canvas\");\n            w.width = b.imageData.width, w.height = b.imageData.height;\n            w.getContext(\"2d\").putImageData(b.imageData, 0, 0);\n            C = w.width / M, D = w.height / M;\n\n            if (null != s && (null == (null == n ? void 0 : n.scale) || (null == n ? void 0 : n.scale))) {\n              _t = C / D;\n              C = _t <= 1 ? Math.ceil(f * _t) : f, D = _t <= 1 ? f : Math.ceil(f / _t);\n            }\n\n            I = new Image(C, D);\n            return _context.abrupt(\"return\", (I.src = w.toDataURL(), null != r && (I.style.opacity = \"\".concat(r)), m && m.appendChild(I), I));\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _n.apply(this, arguments);\n}\n\nexport { n as previewCIMSymbol };"],"sourceRoot":""}