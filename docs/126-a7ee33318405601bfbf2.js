(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{w4cL:function(e,t,r){"use strict";r.r(t);var n,a=r("eijD"),l=r("6CzD"),i=r("mK0O"),o=r("hisu"),u=r("yBJb"),c=r("4Mpa"),s=r("CHlC"),b=r("kMo5"),y=r("P+uj"),f=r("NthX"),p=r.n(f),O=r("dQW7"),j=(r("ZTBZ"),r("kDog")),v=r("233l"),h=r("7im+"),d=r("d4jZ"),m=r("IH5m"),g=r("z9dv"),w=r("xAIp"),k=(r("J4Pc"),r("wckI")),S=(r("TM+E"),r("mp5+")),E=r("iaHD"),x=r("jr4m"),_=r("YHXj"),P=r("QZQ7"),L=r("9P7x"),R=r("oTsO"),M=r("44so"),F=r("2eXi"),I=r("wJzb"),A=r("NRoO"),T=r("v3KF"),C=r("0n+b"),J=r("eTmm"),D=r("lZmO"),H=r("j56I"),K=r("gljZ"),N=r("Ym0J"),z=r("nd5+");function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(y.a)(e);if(t){var a=Object(y.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(b.a)(this,r)}}var Z=n=function(e){Object(s.a)(r,e);var t=B(r);function r(){var e;return Object(o.a)(this,r),(e=t.apply(this,arguments))._sublayersHandles=null,e.description=null,e.id=null,e.networkLink=null,e.title=null,e.sourceJSON=null,e.fullExtent=null,e}return Object(u.a)(r,[{key:"initialize",value:function(){var e=this;Object(H.j)(this,"networkLink").then((function(){return Object(H.l)(e,"visible")})).then((function(){return e.load()}))}},{key:"load",value:function(e){var t=this;if(this.networkLink&&!this.networkLink.viewFormat){var r=Object(h.i)(e)?e.signal:null,a=this._fetchService(this._get("networkLink").href,r).then((function(e){var r=Object(N.a)(e.sublayers);t.fullExtent=z.a.fromJSON(r),t.sourceJSON=e;var a=Object(k.m)(j.a.ofType(n),Object(N.e)(n,e));t.sublayers?t.sublayers.addMany(a):t.sublayers=a,t.layer.emit("sublayer-update"),t.layer&&t.layer.notifyChange("visibleSublayers")}));return this.addResolvingPromise(a),Promise.resolve(this)}}},{key:"sublayers",set:function(e){var t=this,r=this._get("sublayers");r&&(r.forEach((function(e){e.parent=null,e.layer=null})),this._sublayersHandles.forEach((function(e){return e.remove()})),this._sublayersHandles=null),e&&(e.forEach((function(e){e.parent=t,e.layer=t.layer})),this._sublayersHandles=[e.on("after-add",(function(e){var r=e.item;r.parent=t,r.layer=t.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))]),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(k.m)(j.a.ofType(n),e)}},{key:"visible",get:function(){return this._get("visible")},set:function(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}},{key:"readVisible",value:function(e,t){return!!t.visibility}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"_fetchService",value:function(e,t){return Object(N.b)(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then((function(e){return Object(N.d)(e.data)}))}}]),r}(T.a.EventedMixin(Object(C.b)(J.a)));Object(O.a)([Object(w.b)()],Z.prototype,"description",void 0),Object(O.a)([Object(w.b)()],Z.prototype,"id",void 0),Object(O.a)([Object(w.b)({readOnly:!0,value:null})],Z.prototype,"networkLink",void 0),Object(O.a)([Object(w.b)({json:{write:{allowNull:!0}}})],Z.prototype,"parent",void 0),Object(O.a)([Object(w.b)({value:null,json:{write:{allowNull:!0}}})],Z.prototype,"sublayers",null),Object(O.a)([Object(K.a)("sublayers")],Z.prototype,"castSublayers",null),Object(O.a)([Object(w.b)({value:null,json:{read:{source:"name",reader:function(e){return Object(D.d)(e)}}}})],Z.prototype,"title",void 0),Object(O.a)([Object(w.b)({value:!0})],Z.prototype,"visible",null),Object(O.a)([Object(S.a)("visible",["visibility"])],Z.prototype,"readVisible",null),Object(O.a)([Object(w.b)()],Z.prototype,"sourceJSON",void 0),Object(O.a)([Object(w.b)({value:null})],Z.prototype,"layer",null),Object(O.a)([Object(w.b)({type:z.a})],Z.prototype,"fullExtent",void 0);var W=Z=n=Object(O.a)([Object(E.a)("esri.layers.support.KMLSublayer")],Z);function Q(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw l}}}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(y.a)(e);if(t){var a=Object(y.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(b.a)(this,r)}}var G=["kml","xml"],U=function(e){Object(s.a)(n,e);var t,r=Y(n);function n(){var e;Object(o.a)(this,n);for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return(e=r.call.apply(r,[this].concat(a)))._visibleFolders=[],e.allSublayers=new v.a({getCollections:function(){return[e.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),e.outSpatialReference=_.a.WGS84,e.path=null,e.legendEnabled=!1,e.operationalLayerType="KML",e.sublayers=null,e.type="kml",e.url=null,e}return Object(u.a)(n,[{key:"initialize",value:function(){var e=this;this.watch("sublayers",(function(t,r){r&&r.forEach((function(e){e.parent=null,e.layer=null})),t&&t.forEach((function(t){t.parent=e,t.layer=e}))}),!0),this.on("sublayer-update",(function(){return e.notifyChange("fullExtent")}))}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({url:e},t):e}},{key:"readSublayersFromItemOrWebMap",value:function(e,t){this._visibleFolders=t.visibleFolders}},{key:"readSublayers",value:function(e,t,r){return Object(N.e)(W,t,r,this._visibleFolders)}},{key:"writeSublayers",value:function(e,t){for(var r=[],n=e.toArray();n.length;){var a=n[0];a.networkLink||(a.visible&&r.push(a.id),a.sublayers&&n.push.apply(n,Object(l.a)(a.sublayers.toArray()))),n.shift()}t.visibleFolders=r}},{key:"title",get:function(){var e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?Object(g.k)(this.url,G)||"KML":e||""},set:function(e){this._set("title",e)}},{key:"visibleSublayers",get:function(){var e=this.sublayers,t=[];return e&&e.forEach((function e(r){r.visible&&(t.push(r),r.sublayers&&r.sublayers.forEach(e))})),t}},{key:"fullExtent",get:function(){return this._recomputeFullExtent()}},{key:"load",value:function(e){var t=this,r=Object(h.i)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"]},e).catch(m.u).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"destroy",value:function(){Object(c.a)(Object(y.a)(n.prototype),"destroy",this).call(this),this.allSublayers.destroy()}},{key:"_fetchService",value:(t=Object(a.a)(p.a.mark((function e(t){var r,n,a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return a.resourceInfo?{ssl:!1,data:a.resourceInfo}:Object(N.b)(a.url,a.outSpatialReference,a.refreshInterval,t)}));case 2:r=e.sent,(n=Object(N.d)(r.data))&&this.read(n,{origin:"service"});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_recomputeFullExtent",value:function(){var e=null;this.extent&&(e=this.extent.clone());return function t(r){if(r.sublayers){var n,a=Q(r.sublayers.items);try{for(a.s();!(n=a.n()).done;){var l=n.value;t(l),l.visible&&l.fullExtent&&(e?e.union(l.fullExtent):e=l.fullExtent.clone())}}catch(i){a.e(i)}finally{a.f()}}}(this),e}}]),n}(Object(L.a)(Object(F.a)(Object(I.a)(Object(R.a)(Object(M.a)(Object(d.a)(P.a)))))));Object(O.a)([Object(w.b)({readOnly:!0})],U.prototype,"allSublayers",void 0),Object(O.a)([Object(w.b)({type:_.a})],U.prototype,"outSpatialReference",void 0),Object(O.a)([Object(w.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],U.prototype,"path",void 0),Object(O.a)([Object(w.b)({readOnly:!0,json:{read:!1,write:!1}})],U.prototype,"legendEnabled",void 0),Object(O.a)([Object(w.b)({type:["show","hide","hide-children"]})],U.prototype,"listMode",void 0),Object(O.a)([Object(w.b)({type:["KML"]})],U.prototype,"operationalLayerType",void 0),Object(O.a)([Object(w.b)({})],U.prototype,"resourceInfo",void 0),Object(O.a)([Object(w.b)({type:j.a.ofType(W),json:{write:{ignoreOrigin:!0}}})],U.prototype,"sublayers",void 0),Object(O.a)([Object(S.a)(["web-map","portal-item"],"sublayers",["visibleFolders"])],U.prototype,"readSublayersFromItemOrWebMap",null),Object(O.a)([Object(S.a)("service","sublayers",["sublayers"])],U.prototype,"readSublayers",null),Object(O.a)([Object(x.a)("sublayers")],U.prototype,"writeSublayers",null),Object(O.a)([Object(w.b)({readOnly:!0,json:{read:!1}})],U.prototype,"type",void 0),Object(O.a)([Object(w.b)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],U.prototype,"title",null),Object(O.a)([Object(w.b)(A.n)],U.prototype,"url",void 0),Object(O.a)([Object(w.b)({readOnly:!0})],U.prototype,"visibleSublayers",null),Object(O.a)([Object(w.b)({type:z.a})],U.prototype,"extent",void 0),Object(O.a)([Object(w.b)()],U.prototype,"fullExtent",null);var $=U=Object(O.a)([Object(E.a)("esri.layers.KMLLayer")],U);t.default=$}}]);
//# sourceMappingURL=126-a7ee33318405601bfbf2.js.map