{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/portal/support/resourceUtils.js"],"names":["i","c","_x","_c","apply","this","arguments","mark","_callee","e","t","a","o","_t$start","n","_t$num","_t$sortOrder","u","_t$sortField","l","p","_args","wrap","_context","prev","next","length","undefined","load","itemUrl","start","num","sortOrder","sortField","query","token","apiKey","signal","portal","_request","sent","abrupt","total","nextStart","resources","map","_ref","created","r","size","resource","Date","resourceFromPath","stop","_x2","_x3","_x4","_x5","_u","_callee2","_p3","_p4","d","m","f","_context2","hasPath","concat","portalItem","userItemUrl","path","h","FormData","append","access","method","body","_x6","_x7","_x8","_i","_callee3","_context3","_x9","_x10","_l","_callee4","_context4","deleteAll","lastIndexOf","slice","_m","_m2","_p","_p2","_x11","_h","_callee5","_context5","Blob","url","responseType","data","_d","_d2","w","_d3","_d4"],"mappings":"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","file":"8-80c6dc1f156c33bc0316.js","sourcesContent":["import _slicedToArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { get as r, isSome as a, isNone as o } from \"../../core/maybe.js\";\nimport { join as s, getPathExtension as n } from \"../../core/urlUtils.js\";\n\nfunction c(_x) {\n  return _c.apply(this, arguments);\n}\n\nfunction _c() {\n  _c = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n    var t,\n        a,\n        o,\n        _t$start,\n        n,\n        _t$num,\n        c,\n        _t$sortOrder,\n        u,\n        _t$sortField,\n        i,\n        l,\n        p,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            t = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            a = _args.length > 2 ? _args[2] : undefined;\n            _context.next = 4;\n            return e.load(a);\n\n          case 4:\n            o = s(e.itemUrl, \"resources\");\n            _t$start = t.start;\n            n = _t$start === void 0 ? 1 : _t$start;\n            _t$num = t.num;\n            c = _t$num === void 0 ? 10 : _t$num;\n            _t$sortOrder = t.sortOrder;\n            u = _t$sortOrder === void 0 ? \"asc\" : _t$sortOrder;\n            _t$sortField = t.sortField;\n            i = _t$sortField === void 0 ? \"created\" : _t$sortField;\n            l = {\n              query: {\n                start: n,\n                num: c,\n                sortOrder: u,\n                sortField: i,\n                token: e.apiKey\n              },\n              signal: r(a, \"signal\")\n            };\n            _context.next = 16;\n            return e.portal._request(o, l);\n\n          case 16:\n            p = _context.sent;\n            return _context.abrupt(\"return\", {\n              total: p.total,\n              nextStart: p.nextStart,\n              resources: p.resources.map(function (_ref) {\n                var t = _ref.created,\n                    r = _ref.size,\n                    a = _ref.resource;\n                return {\n                  created: new Date(t),\n                  size: r,\n                  resource: e.resourceFromPath(a)\n                };\n              })\n            });\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _c.apply(this, arguments);\n}\n\nfunction u(_x2, _x3, _x4, _x5) {\n  return _u.apply(this, arguments);\n}\n\nfunction _u() {\n  _u = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e, o, n, c) {\n    var u, i, _p3, _p4, l, d, m, f;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (e.hasPath()) {\n              _context2.next = 2;\n              break;\n            }\n\n            throw new t(\"portal-item-resource-\".concat(o, \":invalid-path\"), \"Resource does not have a valid path\");\n\n          case 2:\n            u = e.portalItem;\n            _context2.next = 5;\n            return u.load(c);\n\n          case 5:\n            i = s(u.userItemUrl, \"add\" === o ? \"addResources\" : \"updateResources\");\n            _p3 = p(e.path);\n            _p4 = _slicedToArray(_p3, 2);\n            l = _p4[0];\n            d = _p4[1];\n            _context2.next = 12;\n            return h(n);\n\n          case 12:\n            m = _context2.sent;\n            f = new FormData();\n            l && \".\" !== l && f.append(\"resourcesPrefix\", l);\n            f.append(\"fileName\", d);\n            f.append(\"file\", m, d);\n            f.append(\"f\", \"json\");\n            a(c) && c.access && f.append(\"access\", c.access);\n            _context2.next = 21;\n            return u.portal._request(i, {\n              method: \"post\",\n              body: f,\n              signal: r(c, \"signal\")\n            });\n\n          case 21:\n            return _context2.abrupt(\"return\", e);\n\n          case 22:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _u.apply(this, arguments);\n}\n\nfunction i(_x6, _x7, _x8) {\n  return _i.apply(this, arguments);\n}\n\nfunction _i() {\n  _i = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, a, o) {\n    var n;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (a.hasPath()) {\n              _context3.next = 2;\n              break;\n            }\n\n            throw new t(\"portal-item-resources-remove:invalid-path\", \"Resource does not have a valid path\");\n\n          case 2:\n            _context3.next = 4;\n            return e.load(o);\n\n          case 4:\n            n = s(e.userItemUrl, \"removeResources\");\n            _context3.next = 7;\n            return e.portal._request(n, {\n              method: \"post\",\n              query: {\n                resource: a.path\n              },\n              signal: r(o, \"signal\")\n            });\n\n          case 7:\n            a.portalItem = null;\n\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _i.apply(this, arguments);\n}\n\nfunction l(_x9, _x10) {\n  return _l.apply(this, arguments);\n}\n\nfunction _l() {\n  _l = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e, t) {\n    var a;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return e.load(t);\n\n          case 2:\n            a = s(e.userItemUrl, \"removeResources\");\n            return _context4.abrupt(\"return\", e.portal._request(a, {\n              method: \"post\",\n              query: {\n                deleteAll: !0\n              },\n              signal: r(t, \"signal\")\n            }));\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _l.apply(this, arguments);\n}\n\nfunction p(e) {\n  var t = e.lastIndexOf(\"/\");\n  return -1 === t ? [\".\", e] : [e.slice(0, t), e.slice(t + 1)];\n}\n\nfunction d(e) {\n  var _m = m(e),\n      _m2 = _slicedToArray(_m, 2),\n      t = _m2[0],\n      r = _m2[1],\n      _p = p(t),\n      _p2 = _slicedToArray(_p, 2),\n      a = _p2[0],\n      o = _p2[1];\n\n  return [a, o, r];\n}\n\nfunction m(e) {\n  var t = n(e);\n  return o(t) ? [e, \"\"] : [e.slice(0, e.length - t.length - 1), \".\".concat(t)];\n}\n\nfunction h(_x11) {\n  return _h.apply(this, arguments);\n}\n\nfunction _h() {\n  _h = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(t) {\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            if (!(t instanceof Blob)) {\n              _context5.next = 2;\n              break;\n            }\n\n            return _context5.abrupt(\"return\", t);\n\n          case 2:\n            _context5.next = 4;\n            return e(t.url, {\n              responseType: \"blob\"\n            });\n\n          case 4:\n            return _context5.abrupt(\"return\", _context5.sent.data);\n\n          case 5:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n  return _h.apply(this, arguments);\n}\n\nfunction f(e, t) {\n  if (!e.hasPath()) return null;\n\n  var _d = d(e.path),\n      _d2 = _slicedToArray(_d, 3),\n      r = _d2[0],\n      a = _d2[2];\n\n  return e.portalItem.resourceFromPath(s(r, t + a));\n}\n\nfunction w(e, t) {\n  if (!e.hasPath()) return null;\n\n  var _d3 = d(e.path),\n      _d4 = _slicedToArray(_d3, 3),\n      r = _d4[0],\n      a = _d4[2];\n\n  return e.portalItem.resourceFromPath(s(r, t + a));\n}\n\nexport { u as addOrUpdateResource, h as contentToBlob, c as fetchResources, f as getSiblingOfSameType, w as getSiblingOfSameTypeI, l as removeAllResources, i as removeResource, d as splitPrefixFileNameAndExtension };"],"sourceRoot":""}