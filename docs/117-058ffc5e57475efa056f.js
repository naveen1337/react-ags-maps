(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{"6bcT":function(e,t,n){"use strict";n.r(t),n.d(t,"ElevationSamplerWorker",(function(){return m}));var r=n("eijD"),a=n("hisu"),o=n("yBJb"),i=n("NthX"),u=n.n(i),c=n("J4Pc"),s=n("7im+"),f=n("gj1o"),l=n("RrpW");function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(){function e(){Object(a.a)(this,e)}var t;return Object(o.a)(e,[{key:"createIndex",value:(t=Object(r.a)(u.a.mark((function e(t,n){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new Array,t.vertexAttributes&&t.vertexAttributes.position){e.next=3;break}return e.abrupt("return",new f.a);case 3:if(a=this.createMeshData(t),!Object(s.i)(n)){e.next=10;break}return e.next=7,n.invoke("createIndexThread",a,{transferList:r});case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=this.createIndexThread(a).result;case 11:return o=e.t0,e.abrupt("return",this.createPooledRBush().fromJSON(o));case 13:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"createIndexThread",value:function(e){var t=new Float64Array(e.position),n=this.createPooledRBush();return e.components?this.createIndexComponentsThread(n,t,e.components.map((function(e){return new Uint32Array(e)}))):this.createIndexAllThread(n,t)}},{key:"createIndexAllThread",value:function(e,t){for(var n=new Array(t.length/9),r=0,a=0;a<t.length;a+=9)n[r++]=d(t,a+0,a+3,a+6);return e.load(n),{result:e.toJSON()}}},{key:"createIndexComponentsThread",value:function(e,t,n){var r,a=0,o=p(n);try{for(o.s();!(r=o.n()).done;){a+=r.value.length/3}}catch(h){o.e(h)}finally{o.f()}var i,u=new Array(a),c=0,s=p(n);try{for(s.s();!(i=s.n()).done;)for(var f=i.value,l=0;l<f.length;l+=3)u[c++]=d(t,3*f[l+0],3*f[l+1],3*f[l+2])}catch(h){s.e(h)}finally{s.f()}return e.load(u),{result:e.toJSON()}}},{key:"createMeshData",value:function(e){var t=(e.transform?Object(l.b)({position:e.vertexAttributes.position,normal:null,tangent:null},e.transform,e.spatialReference).position:e.vertexAttributes.position).buffer;return!e.components||e.components.some((function(e){return!e.faces}))?{position:t}:{position:t,components:e.components.map((function(e){return e.faces}))}}},{key:"createPooledRBush",value:function(){return new f.a(9,Object(c.a)("csp-restrictions")?function(e){return e}:[".minX",".minY",".maxX",".maxY"])}}]),e}();function d(e,t,n,r){return{minX:Math.min(e[t+0],e[n+0],e[r+0]),maxX:Math.max(e[t+0],e[n+0],e[r+0]),minY:Math.min(e[t+1],e[n+1],e[r+1]),maxY:Math.max(e[t+1],e[n+1],e[r+1]),p0:[e[t+0],e[t+1],e[t+2]],p1:[e[n+0],e[n+1],e[n+2]],p2:[e[r+0],e[r+1],e[r+2]]}}t.default=m}}]);
//# sourceMappingURL=117-058ffc5e57475efa056f.js.map