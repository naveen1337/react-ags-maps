{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Blur.js"],"names":["i","r","s","this","_blurFBO","_size","_programDesc","gaussianBlur","vsPath","fsPath","attributes","Map","radialBlur","blit","key","value","dispose","e","_i","context","a","type","n","radius","_createOrResizeResources","_quad","o","bind","_gaussianBlur","_radialBlur","unbind","t","_i2","state","painter","u","pixelRatio","l","size","d","materialManager","b","p","c","Math","round","h","g","getProgram","name","ceil","useProgram","setBlendingEnabled","bindFramebuffer","bindTexture","colorTexture","setUniform1i","setUniform2fv","setUniform1f","draw","setStencilWriteMask","setStencilTestEnabled","setDepthWriteEnabled","setDepthTestEnabled","setBlendFunction","_i3","_i4","resize","colorTarget","depthStencilTarget","width","height","target","pixelFormat","internalFormat","dataType","wrapMode","samplingMode","flipped"],"mappings":"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","file":"155-db925d5bb0b0b62e7a33.js","sourcesContent":["import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../../../../webgl/BufferObject.js\";\nimport e from \"../../../../../webgl/FramebufferObject.js\";\nimport \"../../../../../../core/has.js\";\nimport \"../../../../../webgl/enums.js\";\nimport \"../../../../../webgl/RenderingContext.js\";\nimport \"../../../../../../chunks/builtins.js\";\nimport \"../../../../../webgl/Texture.js\";\nimport \"../../../../../webgl/VertexArrayObject.js\";\nimport t from \"../../VertexStream.js\";\nvar r = [1, 0],\n    s = [0, 1];\n\nvar i = /*#__PURE__*/function () {\n  function i() {\n    _classCallCheck(this, i);\n\n    this._blurFBO = null, this._size = [0, 0], this._programDesc = {\n      gaussianBlur: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blur/gaussianBlur\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      radialBlur: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blur/radial-blur\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      blit: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blit\",\n        attributes: new Map([[\"a_position\", 0]])\n      }\n    };\n  }\n\n  _createClass(i, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this._blurFBO && (this._blurFBO.dispose(), this._blurFBO = null);\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(e, r, s) {\n      var _i = e.context,\n          a = s.type,\n          n = s.radius;\n      if (0 === n) return;\n      this._createOrResizeResources(e), this._quad || (this._quad = new t(_i, [-1, -1, 1, -1, -1, 1, 1, 1]));\n      var o = this._quad;\n      o.bind(), \"blur\" === a ? this._gaussianBlur(e, r, n) : this._radialBlur(e, r), o.unbind();\n    }\n  }, {\n    key: \"_gaussianBlur\",\n    value: function _gaussianBlur(e, t, _i2) {\n      var a = e.context,\n          n = e.state,\n          o = e.painter,\n          u = e.pixelRatio,\n          l = n.size,\n          d = o.materialManager,\n          b = this._programDesc,\n          p = this._quad,\n          c = [Math.round(u * l[0]), Math.round(u * l[1])],\n          h = this._blurFBO,\n          g = d.getProgram(e, b.gaussianBlur, [{\n        name: \"radius\",\n        value: Math.ceil(_i2)\n      }]);\n      a.useProgram(g), a.setBlendingEnabled(!1), a.bindFramebuffer(h), a.bindTexture(t.colorTexture, 4), g.setUniform1i(\"u_colorTexture\", 4), g.setUniform2fv(\"u_texSize\", c), g.setUniform2fv(\"u_direction\", r), g.setUniform1f(\"u_sigma\", _i2), p.draw(), a.bindFramebuffer(t), a.setStencilWriteMask(0), a.setStencilTestEnabled(!1), a.setDepthWriteEnabled(!1), a.setDepthTestEnabled(!1), a.bindTexture(h.colorTexture, 5), g.setUniform1i(\"u_colorTexture\", 5), g.setUniform2fv(\"u_direction\", s), p.draw(), a.setBlendingEnabled(!0), a.setBlendFunction(1, 771), a.setStencilTestEnabled(!0);\n    }\n  }, {\n    key: \"_radialBlur\",\n    value: function _radialBlur(e, t) {\n      var r = e.context,\n          s = e.painter,\n          _i3 = s.materialManager,\n          a = this._programDesc,\n          n = this._quad,\n          o = this._blurFBO;\n      r.bindFramebuffer(o);\n\n      var u = _i3.getProgram(e, a.radialBlur);\n\n      r.useProgram(u), r.setBlendingEnabled(!1), r.bindTexture(t.colorTexture, 4), u.setUniform1i(\"u_colorTexture\", 4), n.draw(), r.bindFramebuffer(t), r.setStencilWriteMask(0), r.setStencilTestEnabled(!1), r.setDepthWriteEnabled(!1), r.setDepthTestEnabled(!1), r.setBlendingEnabled(!0);\n\n      var l = _i3.getProgram(e, a.blit);\n\n      r.useProgram(l), r.bindTexture(o.colorTexture, 5), l.setUniform1i(\"u_texture\", 5), r.setBlendFunction(1, 771), n.draw();\n    }\n  }, {\n    key: \"_createOrResizeResources\",\n    value: function _createOrResizeResources(t) {\n      var r = t.context,\n          s = t.state,\n          _i4 = t.pixelRatio,\n          a = s.size,\n          n = Math.round(_i4 * a[0]),\n          o = Math.round(_i4 * a[1]);\n      this._blurFBO && this._size[0] === n && this._size[1] === o || (this._size[0] = n, this._size[1] = o, this._blurFBO ? this._blurFBO.resize(n, o) : this._blurFBO = new e(r, {\n        colorTarget: 0,\n        depthStencilTarget: 0,\n        width: n,\n        height: o\n      }, {\n        target: 3553,\n        pixelFormat: 6408,\n        internalFormat: 6408,\n        dataType: 5121,\n        wrapMode: 33071,\n        samplingMode: 9729,\n        flipped: !1,\n        width: n,\n        height: o\n      }));\n    }\n  }]);\n\n  return i;\n}();\n\nexport { i as Blur };"],"sourceRoot":""}