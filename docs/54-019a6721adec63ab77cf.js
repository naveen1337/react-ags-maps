(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"46Wt":function(e,t,r){"use strict";var n=r("mK0O"),i=r("Mp7X"),a=r("TM+E"),o=r("z4xm");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=new Map;function u(e,t,r){var n=r.transform,c=r.hasZ,u=r.hasM;l.has(t)||l.set(t,function(e){var t={};switch(e){case"esriGeometryPoint":return function(e,r,n,i){return Object(o.e)(r,t,e,n,i)};case"esriGeometryPolygon":return function(e,r,n,i){return Object(o.f)(r,t,e,n,i)};case"esriGeometryPolyline":return function(e,r,n,i){return Object(o.g)(r,t,e,n,i)};case"esriGeometryMultipoint":return function(e,r,n,i){return Object(o.d)(r,t,e,n,i)};default:return a.a.getLogger("esri.views.2d.support.arcadeOnDemand").error(new i.a("mapview-arcade","Unable to handle geometryType: ".concat(e))),function(e){return e}}}(t));var f=l.get(t)(e.geometry,n,c,u);return s(s({},e),{},{geometry:f})}t.a=function(e,t,r,n,i){var o=e.referencesGeometry()&&i?u(t,n,i):t,c=e.repurposeFeature(o);try{return e.evaluate(s(s({},r),{},{$feature:c}))}catch(l){return a.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}},"Hl/n":function(e,t,r){"use strict";r.d(t,"a",(function(){return q})),r.d(t,"b",(function(){return M}));var n=r("mK0O"),i=r("aNYv"),a=r("eijD"),o=r("NthX"),c=r.n(o),s=r("WYis"),l=r("TM+E"),u=r("frPA"),f=r("lZmO"),h=r("DE4D"),m=r("jCQE"),p=r("hQel"),y=r("g9+Q"),v=r("46Wt");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw a}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=l.a.getLogger("esri.symbols.cim.cimAnalyzer");function x(e){switch(e){case"Butt":return 0;case"Square":return 2;case"Round":default:return 1}}function k(e){switch(e){case"Bevel":return 0;case"Miter":return 2;case"Round":default:return 1}}function S(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function w(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function P(e,t,r,n){var i;e[t]?i=e[t]:(i={},e[t]=i),i[r]=n}function C(e){var t=e.markerPlacement;return t&&t.angleToLine?1:0}function M(e,t,r,n){return N.apply(this,arguments)}function N(){return(N=Object(a.a)(c.a.mark((function e(t,r,n,i){var a,o,s,l,u,f,m,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=n?n:[],t){e.next=3;break}return e.abrupt("return",a);case 3:if(l={},"CIMSymbolReference"===t.type){e.next=6;break}return e.abrupt("return",(j.error("Expect cim type to be 'CIMSymbolReference'"),a));case 6:if(o=t.symbol,!(s=t.primitiveOverrides)){e.next=12;break}u=[],f=g(s);try{for(p=function(){var e=m.value,t=e.valueExpressionInfo;if(t&&r){var n=t.expression,i=Object(h.d)(n,r.spatialReference,r.fields).then((function(t){t&&P(l,e.primitiveName,e.propertyName,t)}));u.push(i)}else null!=e.value&&P(l,e.primitiveName,e.propertyName,e.value)},f.s();!(m=f.n()).done;)p()}catch(c){f.e(c)}finally{f.f()}return e.next=12,Promise.all(u);case 12:switch(o.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":I(o,s,l,r,a,i)}return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,r,n,i,a){if(e){var o=e.symbolLayers;if(o){var c,s=m.a.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(c=1);for(var l=o.length;l--;){var u=o[l];if(u&&!1!==u.enable){var f=[];switch(m.b.findApplicableOverrides(u,t,f),u.type){case"CIMSolidFill":R(u,r,f,n,i);break;case"CIMPictureFill":L(u,r,f,n,i);break;case"CIMHatchFill":_(u,r,f,n,i);break;case"CIMGradientFill":A(u,r,f,n,i);break;case"CIMSolidStroke":H(u,r,f,n,i,"CIMPolygonSymbol"===e.type,s);break;case"CIMPictureStroke":X(u,r,f,n,i,"CIMPolygonSymbol"===e.type,s);break;case"CIMGradientStroke":D(u,r,f,n,i,"CIMPolygonSymbol"===e.type,s);break;case"CIMCharacterMarker":if(J(u,r,f,n,i))break;break;case"CIMPictureMarker":if(J(u,r,f,n,i))break;"CIMLineSymbol"===e.type&&(c=C(u)),z(u,r,f,n,i,c,s);break;case"CIMVectorMarker":if(J(u,r,f,n,i))break;"CIMLineSymbol"===e.type&&(c=C(u)),T(u,r,f,n,i,c,s,a);break;default:j.error("Cannot analyze CIM layer",u.type)}}}}}}function R(e,t,r,n,a){var o=e.primitiveName,c=Object(y.e)(e.color),s=V(r,o),l=Object(i.a)(s,2),u=l[0],h=l[1],m=Object(f.b)(JSON.stringify(e)+h).toString();a.push({type:"fill",templateHash:m,materialHash:u?function(){return m}:m,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:W(o,t,"Color",n,c,G),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e.effects})}function L(e,t,r,n,a){var o=e.primitiveName,c=e.tintColor?Object(y.e)(e.tintColor):{r:255,g:255,b:255,a:1},s=V(r,o),l=Object(i.a)(s,2),u=l[0],h=l[1],m=Object(f.b)(JSON.stringify(e)+h).toString(),p=Object(f.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString();a.push({type:"fill",templateHash:m,materialHash:u?function(){return p}:p,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:W(o,t,"TintColor",n,c,G),height:W(o,t,"Height",n,e.height),scaleX:W(o,t,"ScaleX",n,e.scaleX),angle:W(o,t,"Rotation",n,e.rotation),offsetX:W(o,t,"OffsetX",n,e.offsetX),offsetY:W(o,t,"OffsetY",n,e.offsetY)})}function _(e,t,r,n,a){var o=["Rotation","OffsetX","OffsetY"],c=r.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===o.indexOf(t.propertyName)})),s=e.primitiveName,l=V(r,s),u=Object(i.a)(l,2),h=u[0],m=u[1],p=Object(f.b)(JSON.stringify(e)+m).toString(),y=Object(f.b)("".concat(e.separation).concat(JSON.stringify(e.lineSymbol))).toString();a.push({type:"fill",templateHash:p,materialHash:h?U(y,t,c,n):y,cim:e,materialOverrides:c,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:W(s,t,"Separation",n,e.separation),scaleX:1,angle:W(s,t,"Rotation",n,e.rotation),offsetX:W(s,t,"OffsetX",n,e.offsetX),offsetY:W(s,t,"OffsetY",n,e.offsetY)})}function A(e,t,r,n,a){var o=V(r,e.primitiveName),c=Object(i.a)(o,2),s=c[0],l=c[1],u=Object(f.b)(JSON.stringify(e)+l).toString();a.push({type:"fill",templateHash:u,materialHash:s?U(u,t,r,n):u,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function H(e,t,r,n,a,o,c){var s=e.primitiveName,l=Object(y.e)(e.color),u=void 0!==e.width?e.width:4,h=x(e.capStyle),m=k(e.joinStyle),p=e.miterLimit,v=V(r,s),d=Object(i.a)(v,2),b=d[0],g=d[1],O=Object(f.b)(JSON.stringify(e)+g).toString();a.push({type:"line",templateHash:O,materialHash:b?function(){return O}:O,cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:W(s,t,"Color",n,l,G),width:W(s,t,"Width",n,u),cap:W(s,t,"CapStyle",n,h),join:W(s,t,"JoinStyle",n,m),miterLimit:W(s,t,"MiterLimit",n,p),referenceWidth:c,zOrder:Y(e.name),isDashed:!1})}function X(e,t,r,n,a,o,c){var s=Object(f.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),l=e.primitiveName,u=Object(y.e)(e.tintColor),h=void 0!==e.width?e.width:4,m=x(e.capStyle),p=k(e.joinStyle),v=e.miterLimit,d=V(r,l),b=Object(i.a)(d,2),g=b[0],O=b[1],j=Object(f.b)(JSON.stringify(e)+O).toString();a.push({type:"line",templateHash:j,materialHash:g?function(){return s}:s,cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:W(l,t,"TintColor",n,u,G),width:W(l,t,"Width",n,h),cap:W(l,t,"CapStyle",n,m),join:W(l,t,"JoinStyle",n,p),miterLimit:W(l,t,"MiterLimit",n,v),referenceWidth:c,zOrder:Y(e.name),isDashed:!1})}function D(e,t,r,n,a,o,c){var s=e.primitiveName,l=void 0!==e.width?e.width:4,u=x(e.capStyle),h=k(e.joinStyle),m=e.miterLimit,p=V(r,s),y=Object(i.a)(p,2),v=y[0],d=y[1],b=Object(f.b)(JSON.stringify(e)+d).toString();a.push({type:"line",templateHash:b,materialHash:v?U(b,t,r,n):b,cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},width:W(s,t,"Width",n,l),cap:W(s,t,"CapStyle",n,u),join:W(s,t,"JoinStyle",n,h),miterLimit:W(s,t,"MiterLimit",n,m),referenceWidth:c,zOrder:Y(e.name),isDashed:!1})}function J(e,t,r,n,a){var o=e.markerPlacement;if(!o||"CIMMarkerPlacementInsidePolygon"!==o.type)return!1;var c=o,s=["Rotation","OffsetX","OffsetY"],l=r.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===s.indexOf(t.propertyName)})),u=V(r,c.primitiveName),h=Object(i.a)(u,2),m=h[0],p=h[1],y=Object(f.b)(JSON.stringify(e)+p).toString();return a.push({type:"fill",templateHash:y,materialHash:m?U(y,t,l,n):y,cim:e,materialOverrides:l,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:W(c.primitiveName,t,"StepY",n,c.stepY),scaleX:1,angle:W(c.primitiveName,t,"GridAngle",n,c.gridAngle),offsetX:W(c.primitiveName,t,"OffsetX",n,c.offsetX),offsetY:W(c.primitiveName,t,"OffsetY",n,c.offsetY)}),!0}function z(e,t,r,n,a,o,c){var s=e.primitiveName,l=e.size,u=e.scaleX,h=e.rotation,m=e.offsetX,p=e.offsetY,v=Object(y.e)(e.tintColor),d=Object(f.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),b=V(r,s),g=Object(i.a)(b,2),O=g[0],j=g[1],x=Object(f.b)(JSON.stringify(e)+j).toString();a.push({type:"marker",templateHash:x,materialHash:O?function(){return d}:d,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:!1,alignment:o,size:W(s,t,"Size",n,l),scaleX:W(s,t,"ScaleX",n,u),rotation:W(s,t,"Rotation",n,h),offsetX:W(s,t,"OffsetX",n,m),offsetY:W(s,t,"OffsetY",n,p),color:W(s,t,"TintColor",n,v,G),anchorPoint:e.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:c,sizeRatio:1,markerPlacement:e.markerPlacement})}function T(e,t,r,n,i,a,o,c){var s=e.markerGraphics;if(s){var l=0;if(e.scaleSymbolsProportionally){var u=e.frame;u&&(l=u.ymax-u.ymin)}var f,h=g(s);try{for(h.s();!(f=h.n()).done;){var m=f.value;if(m){var p=m.symbol;if(!p)continue;switch(p.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":F(e,m,r,t,n,i,a,o,l,c);break;case"CIMTextSymbol":E(e,m,t,r,n,i,a,o,l)}}}}catch(y){h.e(y)}finally{h.f()}}}function E(e,t,r,n,i,a,o,c,s){m.b.findApplicableOverrides(t,n,[]);var l=t.geometry;if("x"in l&&"y"in l){var u=t.symbol,h=function(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}(u),p=function(e){var t="normal",r="normal";if(e){var n=e.toLowerCase();-1!==n.indexOf("italic")?t="italic":-1!==n.indexOf("oblique")&&(t="oblique"),-1!==n.indexOf("bold")?r="bold":-1!==n.indexOf("light")&&(r="lighter")}return{style:t,weight:r}}(u.fontStyleName);u.font=b({family:u.fontFamilyName,decoration:h},p);var v=e.frame,d=l.x-.5*(v.xmin+v.xmax),O=l.y-.5*(v.ymin+v.ymax),j=e.size/s,x=e.primitiveName,k=(u.height||0)*j,P=u.angle||0,C=((u.offsetX||0)+d)*j,M=((u.offsetY||0)+O)*j,N=Object(y.e)(m.a.getFillColor(u)),I=Object(y.e)(m.a.getStrokeColor(u)),R=m.a.getStrokeWidth(u);R||(I=Object(y.e)(m.a.getFillColor(u.haloSymbol)),R=u.haloSize*j);var L,_="",A=g(n);try{for(A.s();!(L=A.n()).done;){var H=L.value;H.primitiveName===x&&void 0!==H.value&&(_+="-".concat(H.primitiveName,"-").concat(H.propertyName,"-").concat(JSON.stringify(H.value)))}}catch(J){A.e(J)}finally{A.f()}var X=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),D=Object(f.b)(JSON.stringify(t)+X+_).toString();a.push({type:"text",templateHash:D,materialHash:function(){return Object(f.b)(JSON.stringify(u.font)).toString()},cim:u,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,alignment:o,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:u.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:W(x,r,"Size",i,k),angle:W(x,r,"Rotation",i,P),offsetX:W(x,r,"OffsetX",i,C),offsetY:W(x,r,"OffsetY",i,M),horizontalAlignment:S(u.horizontalAlignment),verticalAlignment:w(u.verticalAlignment),text:W(t.primitiveName,r,"TextString",i,t.textString,y.a,u.textCase),color:N,outlineColor:I,outlineSize:R,referenceSize:c,sizeRatio:1,markerPlacement:e.markerPlacement})}}function F(e,t,r,n,a,o,c,s,l,u){var h=t.symbol,v=t.geometry;if(v){var d=h.symbolLayers;if(d)if(u)B(e,t,n,r,a,o,c,s,l);else for(var O=d.length;O--;){var j=d[O];if(j&&!1!==j.enable)switch(j.type){case"CIMSolidFill":case"CIMSolidStroke":var x=function(){var u=Object(p.b)(v);if(!u)return"continue";var h=Object(p.d)(u,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),d=Object(i.a)(h,3),O=d[0],x=d[1],k=d[2],S="CIMSolidFill"===j.type,w={type:"sdf",geom:v,asFill:S},P=e.primitiveName,C=e.size,M=e.rotation||0,N=e.offsetX,I=e.offsetY,R=j.primitiveName,L=Object(y.e)(S?m.a.getFillColor(j):m.a.getStrokeColor(j)),_=S?{r:0,g:0,b:0,a:0}:Object(y.e)(m.a.getStrokeColor(j)),A=m.a.getStrokeWidth(j);if(!S&&!A)return"break";var H,X=!1,D="",J=g(r);try{for(J.s();!(H=J.n()).done;){var z=H.value;z.primitiveName!==R&&z.primitiveName!==P||(void 0!==z.value?D+="-".concat(z.primitiveName,"-").concat(z.propertyName,"-").concat(JSON.stringify(z.value)):z.valueExpressionInfo&&(X=!0))}}catch(B){J.e(B)}finally{J.f()}var T=JSON.stringify(b(b({},e),{},{markerGraphics:null})),E=Object(f.b)(JSON.stringify(w)).toString(),F={type:"marker",templateHash:Object(f.b)(JSON.stringify(t)+JSON.stringify(j)+T+D).toString(),materialHash:X?function(){return E}:E,cim:w,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:c,anchorPoint:{x:x,y:k},isAbsoluteAnchorPoint:!1,size:W(e.primitiveName,n,"Size",a,C),rotation:W(e.primitiveName,n,"Rotation",a,M),offsetX:W(e.primitiveName,n,"OffsetX",a,N),offsetY:W(e.primitiveName,n,"OffsetY",a,I),scaleX:1,frameHeight:l,rotateClockwise:e.rotateClockwise,referenceSize:s,sizeRatio:O,color:W(R,n,"Color",a,L,G),outlineColor:W(R,n,"Color",a,_,G),outlineWidth:W(R,n,"Width",a,A),markerPlacement:e.markerPlacement};return o.push(F),"break"}();if("continue"===x)continue;if("break"===x)break;default:B(e,t,n,r,a,o,c,s,l)}}}}function B(e,t,r,n,a,o,c,s,l){var h,p=function(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}(e,t),y=["Rotation","OffsetX","OffsetY"];h=n.filter((function(t){return t.primitiveName!==e.primitiveName||-1===y.indexOf(t.propertyName)}));var v,d="",b=g(n);try{for(b.s();!(v=b.n()).done;){var O=v.value;void 0!==O.value&&(d+="-".concat(O.primitiveName,"-").concat(O.propertyName,"-").concat(JSON.stringify(O.value)))}}catch(L){b.e(L)}finally{b.f()}var j=m.a.getTextureAnchor(p),x=Object(i.a)(j,3),k=x[0],S=x[1],w=x[2],P=e.primitiveName,C=e.rotation||0,M=e.offsetX||0,N=e.offsetY||0,I=Object(f.b)(JSON.stringify(p)+d).toString(),R={type:"marker",templateHash:I,materialHash:0===h.length?I:U(I,r,h,a),cim:p,materialOverrides:h,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:c,anchorPoint:{x:k,y:S},isAbsoluteAnchorPoint:!1,size:e.size,rotation:W(P,r,"Rotation",a,C),offsetX:W(P,r,"OffsetX",a,M),offsetY:W(P,r,"OffsetY",a,N),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:l,rotateClockwise:e.rotateClockwise,referenceSize:s,sizeRatio:w/Object(u.c)(e.size),markerPlacement:e.markerPlacement};o.push(R)}function Y(e){if(e&&0===e.indexOf("Level_")){var t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function G(e){if(!e||0===e.length)return null;var t=new s.a(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function W(e,t,r,n,i,a,o){var c=t[e];if(c){var s=c[r];if("string"==typeof s||"number"==typeof s||s instanceof Array)return a?a.call(null,s,o):s;if(null!=s&&s instanceof h.a)return function(e,t,r){var c=Object(v.a)(s,e,{$view:r},n.geometryType,t);return null!==c&&a&&(c=a.call(null,c,o)),null!==c?c:i}}return i}function U(e,t,r,n){var i,a=g(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.valueExpressionInfo&&function(){var e=t[o.primitiveName]&&t[o.primitiveName][o.propertyName];e instanceof h.a&&(o.fn=function(t,r,i){return Object(v.a)(e,t,{$view:i},n.geometryType,r)})}()}}catch(c){a.e(c)}finally{a.f()}return function(t,n,i){var a,o=g(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.fn&&(s.value=s.fn(t,n,i))}}catch(c){o.e(c)}finally{o.f()}return Object(f.b)(e+m.b.buildOverrideKey(r)).toString()}}function q(e,t){if(!t||0===t.length)return e;var r=JSON.parse(JSON.stringify(e));return m.b.applyOverrides(r,t),r}function V(e,t){var r,n=!1,i="",a=g(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.primitiveName===t&&(void 0!==o.value?i+="-".concat(o.primitiveName,"-").concat(o.propertyName,"-").concat(JSON.stringify(o.value)):o.valueExpressionInfo&&(n=!0))}}catch(c){a.e(c)}finally{a.f()}return[n,i]}},Jrv3:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r("aNYv"),i=r("hisu"),a=r("yBJb"),o=r("0942"),c=r("4Mpa"),s=r("CHlC"),l=r("kMo5"),u=r("P+uj"),f=r("+MBG"),h=r("Tkaf"),m=r("0s7n"),p=(r("a1c8"),r("iwTS"),r("J4Pc"),r("B2Uc"),r("cY28"),r("IxxH"),r("0fR5")),y=(r("H8zE"),r("PFYi")),v=r("Zw7s");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var i=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}function b(e,t,r){var n={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return t&&r&&(n.width=t,n.height=r),new p.a(e,n)}var g=function(e){Object(s.a)(r,e);var t=d(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(i.a)(this,r),(e=t.call(this)).requestRenderOnSourceChangedEnabled=c,e._textureInvalidated=!0,e.stencilRef=0,e.coordScale=[1,1],e._height=void 0,e.pixelRatio=1,e.resolution=0,e.rotation=0,e._source=null,e._width=void 0,e.x=0,e.y=0,e.transforms={dvs:Object(h.b)()},e.blendFunction=a,e.source=n,e.requestRender=e.requestRender.bind(Object(o.a)(e)),e}return Object(a.a)(r,[{key:"destroy",value:function(){this._texture&&(this._texture.dispose(),this._texture=null)}},{key:"isSourceScaled",get:function(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}},{key:"height",get:function(){return void 0!==this._height?this._height:this.sourceHeight},set:function(e){this._height=e}},{key:"source",get:function(){return this._source},set:function(e){this._source=e,this.invalidateTexture()}},{key:"sourceHeight",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}},{key:"sourceWidth",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}},{key:"width",get:function(){return void 0!==this._width?this._width:this.sourceWidth},set:function(e){this._width=e}},{key:"beforeRender",value:function(e){Object(c.a)(Object(u.a)(r.prototype),"beforeRender",this).call(this,e),this.updateTexture(e.context)}},{key:"invalidateTexture",value:function(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}},{key:"setTransform",value:function(e){var t=Object(f.b)(this.transforms.dvs),r=e.toScreenNoRotation([0,0],this.x,this.y),i=Object(n.a)(r,2),a=i[0],o=i[1],c=this.resolution/this.pixelRatio/e.resolution,s=c*this.width,l=c*this.height,u=Math.PI*this.rotation/180;Object(f.c)(t,t,Object(m.b)(a,o)),Object(f.c)(t,t,Object(m.b)(s/2,l/2)),Object(f.j)(t,t,-u),Object(f.c)(t,t,Object(m.b)(-s/2,-l/2)),Object(f.g)(t,t,Object(m.b)(s,l)),Object(f.h)(this.transforms.dvs,e.displayViewMat3,t)}},{key:"setSamplingProfile",value:function(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}},{key:"bind",value:function(e,t){this._texture&&e.bindTexture(this._texture,t)}},{key:"updateTexture",value:function(e){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(this._textureInvalidated){this._textureInvalidated=!1,this._texture||(this.source?this._texture=b(e,this.sourceWidth,this.sourceHeight):this._texture=b(e));var r=this.source;if(r){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(e){return e&&"render"in e}(r))if(r instanceof v.a){var n=r.getRenderedRasterPixels();this._texture.setData(n.renderedRasterPixels)}else this._texture.setData(function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(r));else(function(e){return e&&!("render"in e)})(r)&&this._texture.setData(r);this.ready()}else this._texture.setData(null)}}},{key:"onAttach",value:function(){this.invalidateTexture()}},{key:"onDetach",value:function(){this.invalidateTexture()}}]),r}(y.a)},QowV:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("Kp6J");function n(e,t,r,n){var i=e.clone(),a=1<<i.level,o=i.col+t,c=i.row+r;return n&&o<0?(i.col=o+a,i.world-=1):o>=a?(i.col=o-a,i.world+=1):i.col=o,i.row=c,i}},Zw7s:function(e,t,r){"use strict";var n=r("hisu"),i=r("yBJb"),a=function(){function e(t,r,i){Object(n.a)(this,e),this.pixelBlock=t,this.extent=r,this.originalPixelBlock=i}return Object(i.a)(e,[{key:"width",get:function(){return this.pixelBlock?this.pixelBlock.width:0}},{key:"height",get:function(){return this.pixelBlock?this.pixelBlock.height:0}},{key:"render",value:function(e){var t=this.pixelBlock;if(t){var r=this.filter({pixelBlock:t}),n=r.pixelBlock.getAsRGBA(),i=e.createImageData(r.pixelBlock.width,r.pixelBlock.height);i.data.set(n),e.putImageData(i,0,0)}}},{key:"getRenderedRasterPixels",value:function(){var e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}]),e}();t.a=a},hQel:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return h}));var n=r("aNYv"),i=r("aic5"),a=r("zEHB"),o=r("vlc1");function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":var t=e.symbolLayers;return t&&1===t.length?l(t[0]):null;case"CIMVectorMarker":var r=e.markerGraphics;if(!r||1!==r.length)return null;var n=r[0];if(!n)return null;var i=n.geometry;if(!i)return null;var a=n.symbol;return!a||"CIMPolygonSymbol"!==a.type&&"CIMLineSymbol"!==a.type?null:{geom:i,asFill:"CIMPolygonSymbol"===a.type};case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function u(e){var t,r=1/0,n=-1/0,i=1/0,a=-1/0,o=c(e);try{for(o.s();!(t=o.n()).done;){var s,l=c(t.value);try{for(l.s();!(s=l.n()).done;){var u=s.value;u[0]<r&&(r=u[0]),u[0]>n&&(n=u[0]),u[1]<i&&(i=u[1]),u[1]>a&&(a=u[1])}}catch(f){l.e(f)}finally{l.f()}}}catch(f){o.e(f)}finally{o.f()}return[r,i,n,a]}function f(e){return e?e.rings?u(e.rings):e.paths?u(e.paths):Object(i.d)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function h(e,t,r,i,a){var o=Object(n.a)(e,4),c=o[0],s=o[1],l=o[2],u=o[3];if(l<c||u<s)return[0,0,0];var f=l-c,h=u-s,m=Math.floor(31.5),p=(128-2*(m+1))/Math.max(f,h),y=Math.round(f*p)+2*m,v=Math.round(h*p)+2*m,d=1;t&&(d=v/p/(t.ymax-t.ymin));var b=0,g=0;if(i)if(a){if(t&&r&&t.ymax-t.ymin>0){var O=(t.xmax-t.xmin)/(t.ymax-t.ymin);b=i.x/(r*O),g=i.y/r}}else b=i.x,g=i.y;return b=.5*(t.xmax+t.xmin)+b*(t.xmax-t.xmin),g=.5*(t.ymax+t.ymin)+g*(t.ymax-t.ymin),b-=c,g-=s,b*=p,g*=p,[d,(b+=m)/y-.5,-((g+=m)/v-.5)]}function m(e){var t,r=function(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}(e.geom),i=function(e){var t,r=1/0,n=-1/0,i=1/0,a=-1/0,s=c(e);try{for(s.s();!(t=s.n()).done;){var l,u=c(t.value);try{for(u.s();!(l=u.n()).done;){var f=l.value;f[0]<r&&(r=f[0]),f[0]>n&&(n=f[0]),f[1]<i&&(i=f[1]),f[1]>a&&(a=f[1])}}catch(h){u.e(h)}finally{u.f()}}}catch(h){s.e(h)}finally{s.f()}return new o.a(r,i,n-r,a-i)}(r),a=Math.floor(31.5),s=(128-2*(a+1))/Math.max(i.width,i.height),l=Math.round(i.width*s)+2*a,u=Math.round(i.height*s)+2*a,f=[],h=c(r);try{for(h.s();!(t=h.n()).done;){var m=t.value;if(m&&m.length>1){var y,v=[],d=c(m);try{for(d.s();!(y=d.n()).done;){var b=y.value,g=Object(n.a)(b,2),O=g[0],j=g[1];O-=i.x,j-=i.y,O*=s,j*=s,O+=a-.5,j+=a-.5,v.push([O,j])}}catch(S){d.e(S)}finally{d.f()}if(e.asFill){var x=v.length-1;v[0][0]===v[x][0]&&v[0][1]===v[x][1]||v.push(v[0])}f.push(v)}}}catch(S){h.e(S)}finally{h.f()}var k=function(e,t,r,n){for(var i=t*r,a=new Array(i),o=n*n+1,s=0;s<i;++s)a[s]=o;var l,u=c(e);try{for(u.s();!(l=u.n()).done;)for(var f=l.value,h=f.length,m=1;m<h;++m){var p=f[m-1],y=f[m],v=void 0,d=void 0,b=void 0,g=void 0;p[0]<y[0]?(v=p[0],d=y[0]):(v=y[0],d=p[0]),p[1]<y[1]?(b=p[1],g=y[1]):(b=y[1],g=p[1]);var O=Math.floor(v)-n,j=Math.floor(d)+n,x=Math.floor(b)-n,k=Math.floor(g)+n;O<0&&(O=0),j>t&&(j=t),x<0&&(x=0),k>r&&(k=r);for(var w=y[0]-p[0],P=y[1]-p[1],C=w*w+P*P,M=O;M<j;M++)for(var N=x;N<k;N++){var I=void 0,R=void 0,L=(M-p[0])*w+(N-p[1])*P;L<0?(I=p[0],R=p[1]):L>C?(I=y[0],R=y[1]):(L/=C,I=p[0]+L*w,R=p[1]+L*P);var _=(M-I)*(M-I)+(N-R)*(N-R),A=(r-N-1)*t+M;_<a[A]&&(a[A]=_)}}}catch(S){u.e(S)}finally{u.f()}for(var H=0;H<i;++H)a[H]=Math.sqrt(a[H]);return a}(f,l,u,a);return e.asFill&&function(e,t,r,n,i){var a,o=c(e);try{for(o.s();!(a=o.n()).done;)for(var s=a.value,l=s.length,u=1;u<l;++u){var f=s[u-1],h=s[u],m=void 0,p=void 0,y=void 0,v=void 0;f[0]<h[0]?(m=f[0],p=h[0]):(m=h[0],p=f[0]),f[1]<h[1]?(y=f[1],v=h[1]):(y=h[1],v=f[1]);var d=Math.floor(m),b=Math.floor(p)+1,g=Math.floor(y),O=Math.floor(v)+1;d<n&&(d=n),b>t-n&&(b=t-n),g<n&&(g=n),O>r-n&&(O=r-n);for(var j=g;j<O;++j)if(f[1]>j!=h[1]>j){for(var x=(r-j-1)*t,k=d;k<b;++k)k<(h[0]-f[0])*(j-f[1])/(h[1]-f[1])+f[0]&&(i[x+k]=-i[x+k]);for(var w=n;w<d;++w)i[x+w]=-i[x+w]}}}catch(S){o.e(S)}finally{o.f()}}(f,l,u,a,k),[p(k,a),l,u]}function p(e,t){for(var r=2*t,n=e.length,i=new Uint8Array(4*n),o=0;o<n;++o){var c=.5-e[o]/r;Object(a.a)(c,i,4*o)}return i}},tL2s:function(e,t,r){"use strict";r.r(t);var n=r("mK0O"),i=r("eijD"),a=r("hisu"),o=r("yBJb"),c=r("CHlC"),s=r("kMo5"),l=r("P+uj"),u=r("NthX"),f=r.n(u),h=r("dQW7"),m=r("TM+E"),p=r("IH5m"),y=r("xAIp"),v=(r("J4Pc"),r("wckI"),r("iaHD")),d=r("KmCB"),b=r("FXVW"),g=r("55C+"),O=r("KA0i"),j=r("4Mpa"),x=r("FNqF");function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var S=function(e){Object(c.a)(r,e);var t=k(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"renderChildren",value:function(e){if(e.drawPhase===x.c.HIGHLIGHT&&(this.attributeView.bindTextures(e.context),this.children.some((function(e){return e.hasData})))){Object(j.a)(Object(l.a)(r.prototype),"renderChildren",this).call(this,e);var t=e.painter.effects.highlight;t.bind(e),e.context.setColorMask(!0,!0,!0,!0),e.context.clear(16384),this._renderChildren(e,t.defines.concat(["highlightAll"])),t.draw(e),t.unbind()}}}]),r}(r("9c/A").a),w=S=Object(h.a)([Object(v.a)("esri.views.2d.layers.support.HighlightGraphicContainer")],S),P=r("dnRo"),C=r("bPf0"),M=r("6CzD"),N=r("Mp7X"),I=r("7im+"),R=r("NRoO"),L=r("cEAa"),_=r("aIyS"),A=r("DE4D"),H=r("eTpk");function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var z=function(e){var t=function(e){Object(c.a)(n,e);var t,r=J(n);function n(){return Object(a.a)(this,n),r.apply(this,arguments)}return Object(o.a)(n,[{key:"initialize",value:function(){this.exportImageParameters=new L.a({layer:this.layer})}},{key:"destroy",value:function(){this.exportImageParameters.destroy(),this.exportImageParameters=null}},{key:"exportImageVersion",get:function(){var e;return null==(e=this.exportImageParameters)||e.commitProperty("version"),this.commitProperty("timeExtent"),(this._get("exportImageVersion")||0)+1}},{key:"fetchPopupFeatures",value:(t=Object(i.a)(f.a.mark((function e(t,r){var n,a,o,c,s,l,u=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.layer,t){e.next=3;break}return e.abrupt("return",Promise.reject(new N.a("mapimagelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:n})));case 3:return a=this.get("view.scale"),o=[],c=function(){var e=Object(i.a)(f.a.mark((function e(t){var n,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0===t.minScale||a<=t.minScale,i=0===t.maxScale||a>=t.maxScale,t.visible&&n&&i&&(t.sublayers?t.sublayers.forEach(c):t.popupEnabled&&(s=Object(H.a)(t,D(D({},r),{},{defaultPopupTemplateEnabled:!1})),Object(I.i)(s)&&o.unshift({sublayer:t,popupTemplate:s})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=n.sublayers.toArray().reverse().map(c),e.next=6,Promise.all(s);case 6:return l=o.map(function(){var e=Object(i.a)(f.a.mark((function e(n){var i,a,o,c,s,l,h;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.sublayer,a=n.popupTemplate,e.next=3,i.load().catch((function(){}));case 3:return o=i.createQuery(),c=Object(I.i)(r)?r.event:null,s=Object(_.a)({renderer:i.renderer,event:c}),l=u.createFetchPopupFeaturesQueryGeometry(t,s),o.geometry=l,e.next=7,Object(H.b)(i,a);case 7:return o.outFields=e.sent,e.next=10,u._loadArcadeModules(a);case 10:return(h=e.sent)&&h.arcadeUtils.hasGeometryOperations(a)||(o.maxAllowableOffset=l.width/s),e.next=14,i.queryFeatures(o);case 14:return e.abrupt("return",e.sent.features);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Object(p.j)(l);case 9:return e.abrupt("return",e.sent.reduce((function(e,t){return t.value?[].concat(Object(M.a)(e),Object(M.a)(t.value)):e}),[]).filter((function(e){return null!=e})));case 10:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"canResume",value:function(){var e;return!(!Object(j.a)(Object(l.a)(n.prototype),"canResume",this).call(this)||null!=(e=this.timeExtent)&&e.isEmpty)}},{key:"_loadArcadeModules",value:function(e){if(e.get("expressionInfos.length"))return Object(A.e)()}}]),n}(e);return Object(h.a)([Object(y.b)()],t.prototype,"exportImageParameters",void 0),Object(h.a)([Object(y.b)({readOnly:!0})],t.prototype,"exportImageVersion",null),Object(h.a)([Object(y.b)()],t.prototype,"layer",void 0),Object(h.a)([Object(y.b)()],t.prototype,"suspended",void 0),Object(h.a)([Object(y.b)(R.a)],t.prototype,"timeExtent",void 0),t=Object(h.a)([Object(v.a)("esri.views.layers.MapImageLayerView")],t)},T=r("TRFF"),E=r("VLTM");function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var Y=m.a.getLogger("esri.views.2d.layers.MapImageLayerView2D"),G=function(e){Object(c.a)(s,e);var t,r=B(s);function s(){var e;return Object(a.a)(this,s),(e=r.apply(this,arguments))._highlightGraphics=new d.b,e}return Object(o.a)(s,[{key:"hitTest",value:function(){return null}},{key:"update",value:function(e){this.strategy.update(e).catch((function(e){Object(p.m)(e)||Y.error(e)}))}},{key:"attach",value:function(){var e=this,t=this.layer,r=t.imageMaxWidth,n=t.imageMaxHeight,i=t.version,a=i>=10.3,o=i>=10;this._bitmapContainer=new b.a,this.container.addChild(this._bitmapContainer);var c=new O.a({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:function(){return e.requestUpdate()},container:new w(this.view.featuresTilingScheme)});this.container.addChild(c.container),this.strategy=new P.a({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:r,imageMaxHeight:n,imageRotationSupported:a,imageNormalizationSupported:o,hidpi:!0}),this.handles.add(this.watch("exportImageVersion",(function(){return e.requestUpdate()})),"exportImageVersion"),this.requestUpdate()}},{key:"detach",value:function(){this.handles.remove("exportImageVersion"),this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren()}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"highlight",value:function(e,t){var r=this;return this._highlightGraphics.add(e),{remove:function(){r._highlightGraphics.remove(e)}}}},{key:"createFetchPopupFeaturesQueryGeometry",value:function(e,t){return Object(E.a)(e,t,this.view)}},{key:"doRefresh",value:(t=Object(i.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.requestUpdate();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isUpdating",value:function(){return this.strategy.updating||this.updateRequested}},{key:"fetchImage",value:function(e,t,r,i){return this.layer.fetchImage(e,t,r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({timeExtent:this.timeExtent,timestamp:this.refreshTimestamp},i))}}]),s}(z(Object(T.a)(Object(g.a)(C.a))));Object(h.a)([Object(y.b)()],G.prototype,"strategy",void 0),Object(h.a)([Object(y.b)()],G.prototype,"updating",void 0);var W=G=Object(h.a)([Object(v.a)("esri.views.2d.layers.MapImageLayerView2D")],G);t.default=W}}]);
//# sourceMappingURL=54-019a6721adec63ab77cf.js.map