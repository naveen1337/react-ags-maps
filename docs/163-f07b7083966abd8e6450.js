(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{"0cTz":function(e,t,r){"use strict";r.r(t);var n=r("eijD"),i=r("mK0O"),a=r("hisu"),o=r("yBJb"),c=r("4Mpa"),s=r("CHlC"),u=r("kMo5"),l=r("P+uj"),p=r("NthX"),y=r.n(p),f=r("dQW7"),O=r("Mp7X"),d=r("7im+"),h=r("xAIp"),b=(r("J4Pc"),r("wckI"),r("TM+E"),r("iaHD")),v=r("kJId"),j=r("+wab"),m=r("V3XU");function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}function R(e,t){if(Object(d.h)(e)&&Object(d.h)(t))return null;var r={};return Object(d.i)(t)&&(r.geometry=t.toJSON()),Object(d.i)(e)&&(r.where=e),r}var k=function(e){Object(s.a)(i,e);var t,r=S(i);function i(){var e;return Object(a.a)(this,i),(e=r.apply(this,arguments))._enabledDataReceived=!1,e.errorString=null,e.connectionStatus="disconnected",e}return Object(o.a)(i,[{key:"initialize",value:function(){var e=this;this.handles.add([this.layer.watch("purgeOptions",(function(){return e._update()}))])}},{key:"destroy",value:function(){this.connectionStatus="disconnected"}},{key:"connectionError",get:function(){if(this.errorString)return new O.a("stream-controller",this.errorString)}},{key:"on",value:function(e,t){"data-received"===e&&(this._enabledDataReceived=!0,this._proxy.enableEvent("data-received",!0));var r=Object(c.a)(Object(l.a)(i.prototype),"on",this).call(this,e,t),n=this;return{remove:function(){r.remove(),"data-received"===e&&(n._proxy.closed||n.hasEventListener("data-received")||n._proxy.enableEvent("data-received",!1))}}}},{key:"queryLatestObservations",value:function(e,t){var r=this;if(!this.layer.timeInfo.endField&&!this.layer.timeInfo.startField)throw new O.a("streamlayer-no-timeField","queryLatestObservation can only be used with services that define a TrackIdField");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),t).then((function(e){var t=v.default.fromJSON(e);return t.features.forEach((function(e){e.layer=r.layer,e.sourceLayer=r.layer})),t}))}},{key:"_createClientOptions",value:function(){var e=this;return g(g({},Object(c.a)(Object(l.a)(i.prototype),"_createClientOptions",this).call(this)),{},{setProperty:function(t){e.set(t.propertyName,t.value)}})}},{key:"_createTileRendererHash",value:function(e){var t="".concat(JSON.stringify(this.layer.purgeOptions),".").concat(JSON.stringify(R(this.layer.definitionExpression,this.layer.geometryDefinition)),")");return Object(c.a)(Object(l.a)(i.prototype),"_createTileRendererHash",this).call(this,e)+t}},{key:"_createServiceOptions",value:(t=Object(n.a)(y.a.mark((function e(){var t,r,n,i,a,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.layer,r=t.objectIdField,n=t.fields.map((function(e){return e.toJSON()})),i=Object(m.a)(t.geometryType),a=t.timeInfo&&t.timeInfo.toJSON()||null,o=t.spatialReference?t.spatialReference.toJSON():null,e.abrupt("return",{type:"stream",fields:n,geometryType:i,objectIdField:r,timeInfo:a,source:this.layer.parsedUrl,serviceFilter:R(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enableDataReceived:this._enabledDataReceived,spatialReference:o,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval});case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(j.default);Object(f.a)([Object(h.b)()],k.prototype,"errorString",void 0),Object(f.a)([Object(h.b)({readOnly:!0})],k.prototype,"connectionError",null),Object(f.a)([Object(h.b)()],k.prototype,"connectionStatus",void 0);var I=k=Object(f.a)([Object(b.a)("esri.views.2d.layers.StreamLayerView2D")],k);t.default=I}}]);
//# sourceMappingURL=163-f07b7083966abd8e6450.js.map