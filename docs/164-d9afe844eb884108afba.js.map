{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/layers/SubtypeGroupLayerView2D.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","l","_i","_super","value","_this","handles","add","view","_update","s","t","scale","layer","sublayers","r","visible","minScale","maxScale","o","map","subtypeCode","_l","concat","subtypeField","join","where","n","clone","fieldsIndex","get","attributes","name","find","sourceLayer","_this2","Array","from","featureReduction","geometryType","labelingInfo","labelsVisible","renderer","definitionExpression"],"mappings":"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","file":"164-d9afe844eb884108afba.js","sourcesContent":["import _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport { isNone as r } from \"../../../core/maybe.js\";\nimport { init as s } from \"../../../core/watchUtils.js\";\nimport \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/Logger.js\";\nimport { subclass as t } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport i from \"./FeatureLayerView2D.js\";\nimport a from \"../../layers/support/FeatureFilter.js\";\n\nfunction o(e, r) {\n  return !e.visible || 0 !== e.minScale && r > e.minScale || 0 !== e.maxScale && r < e.maxScale;\n}\n\nvar l = /*#__PURE__*/function (_i) {\n  _inherits(l, _i);\n\n  var _super = _createSuper(l);\n\n  function l() {\n    _classCallCheck(this, l);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(l, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this = this;\n\n      this.handles.add([s(this.view, \"viewpoint\", function () {\n        return _this._update();\n      })]);\n    }\n  }, {\n    key: \"_injectOverrides\",\n    value: function _injectOverrides(e) {\n      var s = _get(_getPrototypeOf(l.prototype), \"_injectOverrides\", this).call(this, e),\n          t = this.view.scale,\n          i = this.layer.sublayers.filter(function (e) {\n        return o(e, t);\n      }).map(function (e) {\n        return e.subtypeCode;\n      });\n\n      if (!i.length) return s;\n\n      var _l = \"NOT \".concat(this.layer.subtypeField, \" IN (\").concat(i.join(\",\"), \")\");\n\n      if (r(s)) return new a({\n        where: _l\n      });\n      var n = s.clone();\n      return n.where += \" AND \".concat(_l), n;\n    }\n  }, {\n    key: \"_setLayersForFeature\",\n    value: function _setLayersForFeature(e) {\n      var r = this.layer.fieldsIndex.get(this.layer.subtypeField),\n          s = e.attributes[r.name],\n          t = this.layer.sublayers.find(function (e) {\n        return e.subtypeCode === s;\n      });\n      e.layer = t, e.sourceLayer = this.layer;\n    }\n  }, {\n    key: \"_createSchemaConfig\",\n    value: function _createSchemaConfig() {\n      var _this2 = this;\n\n      var e = {\n        subtypeField: this.layer.subtypeField,\n        sublayers: Array.from(this.layer.sublayers).map(function (e) {\n          return {\n            featureReduction: null,\n            geometryType: _this2.layer.geometryType,\n            labelingInfo: e.labelingInfo,\n            labelsVisible: e.labelsVisible,\n            renderer: e.renderer,\n            subtypeCode: e.subtypeCode\n          };\n        })\n      },\n          r = this.layer.sublayers.map(function (e) {\n        return e.subtypeCode;\n      }).join(\",\"),\n          s = this.layer.sublayers.length ? \"\".concat(this.layer.subtypeField, \" IN (\").concat(r, \")\") : \"1=2\";\n      var t = this.layer.definitionExpression ? this.layer.definitionExpression + \" AND \" : \"\";\n      return t += s, _objectSpread(_objectSpread(_objectSpread({}, _get(_getPrototypeOf(l.prototype), \"_createSchemaConfig\", this).call(this)), e), {}, {\n        definitionExpression: t\n      });\n    }\n  }]);\n\n  return l;\n}(i);\n\nl = e([t(\"esri.views.2d.layers.SubtypeGroupLayerView2D\")], l);\nvar n = l;\nexport default n;"],"sourceRoot":""}