(window.webpackJsonp=window.webpackJsonp||[]).push([[1,8,19,61,113],{"+Gk0":function(e,t,r){"use strict";r.d(t,"a",(function(){return D})),r.d(t,"b",(function(){return C})),r.d(t,"c",(function(){return M}));var n=r("eijD"),a=r("NthX"),i=r.n(a),o=r("Mp7X"),u=r("IZpe"),s=r("YC9x");var l=r("aic5"),c=r("12QT");function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){return e?t?4:3:t?3:2}function d(e,t,r,n,a){if(!e)return!1;var i,o=p(t,r),u=e.coords,s=!1,l=0,c=f(e.lengths);try{for(c.s();!(i=c.n()).done;){var h=i.value;s=y(s,u,o,l,h,n,a),l+=h*o}}catch(d){c.e(d)}finally{c.f()}return s}function y(e,t,r,n,a,i,o){for(var u=e,s=n,l=n,c=n+a*r;l<c;l+=r){(s=l+r)===c&&(s=n);var f=t[l],h=t[l+1],p=t[s],d=t[s+1];(h<o&&d>=o||d<o&&h>=o)&&f+(o-h)/(d-h)*(p-f)<i&&(u=!u)}return u}var v=r("4WE2"),b=r("4zgH"),m=r("pjVo"),g=r("7zgW");function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j="feature-store:unsupported-query",x={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},k={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},I={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},_={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function S(e){return!0===k[e]}function T(e){return!0===I[Object(l.c)(e)]}function A(e){return!0===_[e]}function M(e,t,n,a,i){if(Object(l.g)(t)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){var o=Object(v.g)(new b.a,t,!1,!1);return Promise.resolve((function(e){return function(e,t,r,n){return d(e,t,r,n.coords[0],n.coords[1])}(o,!1,!1,e)}))}if(Object(l.g)(t)&&"esriGeometryMultipoint"===n){var c=Object(v.g)(new b.a,t,!1,!1);if("esriSpatialRelContains"===e)return Promise.resolve((function(e){return function(e,t,r,n,a,i){var o=p(a,i),u=n.coords,s=n.lengths;if(!s)return!1;for(var l=0,c=0;l<s.length;l++,c+=o)if(!d(e,t,r,u[c],u[c+1]))return!1;return!0}(c,!1,!1,e,a,i)}))}if(Object(l.d)(t)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return Promise.resolve((function(e){return Object(u.e)(t,Object(g.c)(n,a,i,e))}));if(Object(l.d)(t)&&"esriGeometryMultipoint"===n&&"esriSpatialRelContains"===e)return Promise.resolve((function(e){return Object(u.d)(t,Object(g.c)(n,a,i,e))}));if(Object(l.d)(t)&&"esriSpatialRelIntersects"===e){var f=function(e){return"mesh"===e?s.a:Object(s.c)(e)}(n);return Promise.resolve((function(e){return f(t,Object(g.c)(n,a,i,e))}))}return Promise.all([r.e(7),r.e(1),r.e(10)]).then(r.bind(null,"TK+P")).then((function(r){var o=r[x[e]].bind(null,t.spatialReference,t);return function(e){return o(Object(g.c)(n,a,i,e))}}))}function C(e,t,r){return P.apply(this,arguments)}function P(){return(P=Object(n.a)(i.a.mark((function e(t,r,n){var a,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.spatialRel,!(u=t.geometry)){e.next=11;break}if(S(a)){e.next=4;break}throw new o.a(j,"Unsupported query spatial relationship",{query:t});case 4:if(!Object(c.j)(u.spatialReference)||!Object(c.j)(n)){e.next=11;break}if(T(u)){e.next=7;break}throw new o.a(j,"Unsupported query geometry type",{query:t});case 7:if(A(r)){e.next=9;break}throw new o.a(j,"Unsupported layer geometry type",{query:t});case 9:if(!t.outSR){e.next=11;break}return e.abrupt("return",Object(m.a)(t.geometry&&t.geometry.spatialReference,t.outSR));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){if(Object(l.d)(e))return!0;if(Object(l.g)(e)){var t,r=O(e.rings);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(5!==n.length)return!1;if(n[0][0]!==n[1][0]||n[0][0]!==n[4][0]||n[2][0]!==n[3][0]||n[0][1]!==n[3][1]||n[0][1]!==n[4][1]||n[1][1]!==n[2][1])return!1}}catch(a){r.e(a)}finally{r.f()}return!0}return!1}},"+voA":function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r("6CzD"),a=r("hisu"),i=r("yBJb"),o=r("4Mpa"),u=r("CHlC"),s=r("kMo5"),l=r("P+uj"),c=r("+MdM"),f=r("Jrv3");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var p=function(e){Object(u.a)(r,e);var t=h(r);function r(e,n,i){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(a.a)(this,r),(o=t.call(this,e,n,i,i)).bitmap=new f.a(u,"standard",!1),o.bitmap.coordScale=i,o.bitmap.once("isReady",(function(){return o.ready()})),o}return Object(i.a)(r,[{key:"destroy",value:function(){Object(o.a)(Object(l.a)(r.prototype),"destroy",this).call(this),this.bitmap.destroy()}},{key:"beforeRender",value:function(e){Object(o.a)(Object(l.a)(r.prototype),"beforeRender",this).call(this,e),this.bitmap.beforeRender(e)}},{key:"afterRender",value:function(e){Object(o.a)(Object(l.a)(r.prototype),"afterRender",this).call(this,e),this.bitmap.afterRender(e)}},{key:"stencilRef",get:function(){return this.bitmap.stencilRef},set:function(e){this.bitmap.stencilRef=e}},{key:"setTransform",value:function(e,t){Object(o.a)(Object(l.a)(r.prototype),"setTransform",this).call(this,e,t),this.bitmap.transforms.dvs=this.transforms.dvs}},{key:"onAttach",value:function(){this.bitmap.stage=this.stage}},{key:"onDetach",value:function(){this.bitmap&&(this.bitmap.stage=null)}}]),r}(r("QPvm").a),d=r("gj5F"),y=r("FNqF");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var b=function(e){Object(u.a)(r,e);var t=v(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"requiresDedicatedFBO",get:function(){return this.children.some((function(e){return"additive"===e.bitmap.blendFunction}))}},{key:"createTile",value:function(e){var t=this._tileInfoView.getTileBounds(Object(c.g)(),e);return new p(e,t,this._tileInfoView.tileInfo.size)}},{key:"destroyTile",value:function(){}},{key:"prepareRenderPasses",value:function(e){var t=this,a=e.registerRenderPass({name:"bitmap (tile)",brushes:[d.a.bitmap],target:function(){return t.children.map((function(e){return e.bitmap}))},drawPhase:y.c.MAP});return[].concat(Object(n.a)(Object(o.a)(Object(l.a)(r.prototype),"prepareRenderPasses",this).call(this,e)),[a])}},{key:"doRender",value:function(e){this.visible&&e.drawPhase===y.c.MAP&&Object(o.a)(Object(l.a)(r.prototype),"doRender",this).call(this,e)}}]),r}(r("ezmY").a)},"/KFZ":function(e,t,r){"use strict";r.d(t,"a",(function(){return z})),r.d(t,"b",(function(){return W})),r.d(t,"c",(function(){return H})),r.d(t,"d",(function(){return V})),r.d(t,"e",(function(){return te}));var n=r("6CzD"),a=r("mK0O"),i=r("WYis"),o=(r("S1zV"),r("7im+")),u=(r("a1Tm"),r("SPOG")),s=r("NSiF"),l=r("s4dv"),c=(r("ZAfR"),r("HpMY")),f=r("U+6s"),h=(r("a93R"),r("hisu")),p=r("yBJb"),d=r("CHlC"),y=r("kMo5"),v=r("P+uj"),b=r("dQW7"),m=r("7i+s"),g=r("xAIp"),O=(r("J4Pc"),r("wckI"),r("TM+E"),r("iaHD")),w=r("0n+b"),j=r("Zexz"),x=r("ursF");function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(v.a)(e);if(t){var a=Object(v.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(y.a)(this,r)}}var I=new m.a({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"}),_=function(e){Object(d.a)(r,e);var t=k(r);function r(){var e;return Object(h.a)(this,r),(e=t.apply(this,arguments)).baseSymbol=null,e.colorRamp=null,e.type=null,e}return r}(w.a);Object(b.a)([Object(g.b)({type:x.a,json:{write:!0}})],_.prototype,"baseSymbol",void 0),Object(b.a)([Object(g.b)({types:j.b,json:{read:{reader:j.a},write:!0}})],_.prototype,"colorRamp",void 0),Object(b.a)([Object(g.b)({json:{read:I.read,write:I.write}})],_.prototype,"type",void 0);var S=_=Object(b.a)([Object(O.a)("esri.rest.support.ClassificationDefinition")],_);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(v.a)(e);if(t){var a=Object(v.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(y.a)(this,r)}}var A=new m.a({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),M=new m.a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),C=function(e){Object(d.a)(r,e);var t=T(r);function r(){var e;return Object(h.a)(this,r),(e=t.apply(this,arguments)).breakCount=null,e.classificationField=null,e.classificationMethod=null,e.normalizationField=null,e.normalizationType=null,e.type="class-breaks-definition",e}return Object(p.a)(r,[{key:"standardDeviationInterval",set:function(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}},{key:"definedInterval",set:function(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}}]),r}(S);Object(b.a)([Object(g.b)({json:{write:!0}})],C.prototype,"breakCount",void 0),Object(b.a)([Object(g.b)({json:{write:!0}})],C.prototype,"classificationField",void 0),Object(b.a)([Object(g.b)({type:String,json:{read:A.read,write:A.write}})],C.prototype,"classificationMethod",void 0),Object(b.a)([Object(g.b)({json:{write:!0}})],C.prototype,"normalizationField",void 0),Object(b.a)([Object(g.b)({json:{read:M.read,write:M.write}})],C.prototype,"normalizationType",void 0),Object(b.a)([Object(g.b)({value:null,json:{write:!0}})],C.prototype,"standardDeviationInterval",null),Object(b.a)([Object(g.b)({value:null,json:{write:!0}})],C.prototype,"definedInterval",null),Object(b.a)([Object(g.b)()],C.prototype,"type",void 0);C=Object(b.a)([Object(O.a)("esri.rest.support.ClassBreaksDefinition")],C);var P=r("YRFe"),D=r("xiHV"),E=r("h+Bk"),R=r("sfoB"),N=(r("zwLX"),r("YRYL"),r("stpy"));function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L=P.a.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),U=P.a.fromJSON(c.a[0]),G=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function z(e,t){var r=e.attributeTable,a=e.colormap;if($(e)){var u=function(e){if(!$(e))return null;var t,r,a;Object(o.i)(e.statistics)&&(t=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:null==(r=e.statistics[0])?void 0:r.min,maxDataValue:null==(a=e.statistics[0])?void 0:a.max}]);var i=new N.a({visualVariables:t});return i.visualVariables=[].concat(Object(n.a)(i.sizeVariables),Object(n.a)(i.rotationVariables)),i}(e);if(Object(o.i)(u))return u}if(Object(o.i)(a)){var s=function(e){if(!K(e))return null;var t,r=e.attributeTable,n=e.colormap;if(Object(o.i)(r)){var a=Z(r,"value"),i=q(r);"string"===i.type&&(t={},r.features.forEach((function(e){var r=e.attributes;t[r[a.name]]=i?r[i.name]:r[a.name]})))}return R.a.createFromColormap(Object(o.p)(n),t)}(e);if(Object(o.i)(s))return s}if(Object(o.i)(r)){var h=function(e,t,r,n){if(!Y(e,t))return null;var a=e.attributeTable,u=e.statistics,s=q(a,t),h=Z(a,"red"),p=Z(a,"green"),d=Z(a,"blue"),y=new l.a,v=[],b=new Set,m=!!(h&&p&&d);if(Object(o.i)(a))a.features.forEach((function(e){var t=e.attributes[s.name];if(!b.has(e.attributes[s.name])&&null!=t){b.add(t);var r=!m||"single"!==h.type&&"double"!==h.type||"single"!==p.type&&"double"!==p.type||"single"!==d.type&&"double"!==d.type||a.features.some((function(e){return e.attributes[h.name]>1||e.attributes[p.name]>1||e.attributes[d.name]>1}))?1:255;v.push(new f.a({value:e.attributes[s.name],label:e.attributes[s.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:new i.a(m?[e.attributes[h.name]*r,e.attributes[p.name]*r,e.attributes[d.name]*r,1]:[0,0,0,0])}}))}}));else if(null!=u&&u[0])for(var g=u[0].min;g<=u[0].max;g++)v.push(new f.a({value:g,label:g.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new i.a([0,0,0,0])}}));if(v.sort((function(e,t){return e.value&&"string"==typeof e.value.valueOf()?0:e.value>t.value?1:-1})),!m){var O=Object(c.b)(U,v.length);v.forEach((function(e,t){return e.symbol.color=new i.a(O[t].slice(1,4))})),y.colorRamp=U}if(r||n){var w=r||Object(c.b)(n,v.length).map((function(e){return e.slice(1)}));v.forEach((function(e,t){return e.symbol.color=new i.a(w[t])})),y.colorRamp=n}return new E.a({field:s.name,uniqueValueInfos:v,authoringInfo:y})}(e);if(Object(o.i)(h))return h}return function(e,t){var r,n,a,i,u=(e=J(e,null==t?void 0:t.variableName)).bandCount,s=t||{},l=s.bandIds,c=s.stretchType;null!=(r=l)&&r.some((function(e){return e>=u}))&&(l=null);var f,h=Object(o.p)(e.statistics),p=Object(o.p)(e.histograms);u>1?(l=null!=(f=l)&&f.length?l:W(e),h=null==h?null:l.map((function(e){return h[e]})),p=null==p?null:l.map((function(e){return p[e]}))):l=[0],null==c&&(c=function(e){var t="percent-clip",r=e.pixelType,n=e.dataType,a=e.histograms,i=e.statistics;return"u8"!==r||"processed"!==n&&Object(o.i)(a)&&Object(o.i)(i)?"u8"===r||"elevation"===n||G.has(n)?t="min-max":Object(o.i)(a)?t="percent-clip":Object(o.i)(i)&&(t="min-max",t="min-max"):t="none",t}(e));var d=!1;switch(c){case"none":d=!1;break;case"percent-clip":d=!(null!=(n=p)&&n.length);break;default:d=!(null!=(a=h)&&a.length)}var y=e.dataType,v=1===(null==(i=l)?void 0:i.length)&&G.has(y)?L:null,b=new D.a({stretchType:c,dynamicRangeAdjustment:d,colorRamp:v,outputMin:0,outputMax:255,gamma:1===l.length?[1]:[1,1,1],useGamma:!1});return"percent-clip"===c?b.maxPercent=b.minPercent=.25:"standard-deviation"===c&&(b.numberOfStandardDeviations=2),!d&&(Object(o.i)(e.multidimensionalInfo)||null!=t&&t.includeStatisticsInStretch)&&("percent-clip"===c?b.histograms=p:"min-max"!==c&&"standard-deviation"!==c||(b.statistics=h)),b}(e,t)}function V(e){var t=["raster-stretch"];return K(e)&&t.push("raster-colormap"),Y(e)&&t.push("unique-value"),Q(e)&&t.push("class-breaks"),X(e)&&t.push("raster-shaded-relief"),$(e)&&t.push("vector-field"),t}function H(e,t,r){var n=["nearest","bilinear","cubic","majority"].find((function(e){return e===(null==r?void 0:r.toLowerCase())}));return"Map"===t?null!=n?n:"bilinear":"standard-time"===e.dataType?null!=n?n:"nearest":"thematic"===e.dataType||e.attributeTable||e.colormap?"nearest"===n||"majority"===n?n:"nearest":null!=n?n:"bilinear"}function J(e,t){if(null==t)return e;var r=Object(o.p)(e.statistics),n=Object(o.p)(e.histograms),a=e.multidimensionalInfo;if(t&&Object(o.i)(a)){var i=a.variables.find((function(e){return e.name===t})),u=i.statistics,l=i.histograms;null!=u&&u.length&&(r=u),null!=l&&l.length&&(n=l)}return s.a.fromJSON(F(F({},e.toJSON()),{},{statistics:r,histograms:n}))}function W(e){var t=e.bandCount;if(1===t)return null;if(2===t)return[0];var r,n=e.keyProperties&&e.keyProperties.BandProperties;if(n&&n.length===t){var a=function(e){for(var t={},r=0;r<e.length;r++){var n,a=e[r],i=null==(n=a.BandName)?void 0:n.toLowerCase();if("red"===i)t.red=r;else if("green"===i)t.green=r;else if("blue"===i)t.blue=r;else if("nearinfrared"===i||"nearinfrared_1"===i||"nir"===i)t.nir=r;else if(a.WavelengthMax&&a.WavelengthMin){var o=a.WavelengthMin,u=a.WavelengthMax;null==t.blue&&o>=410&&o<=480&&u>=480&&u<=540?t.blue=r:null==t.green&&o>=490&&o<=560&&u>=560&&u<=610?t.green=r:null==t.red&&o>=595&&o<=670&&u>=660&&u<=730?t.red=r:null==t.nir&&o>=700&&o<=860&&u>=800&&u<=950&&(t.nir=r)}}return t}(n),i=a.red,o=a.green,u=a.blue,s=a.nir;null!=i&&null!=o&&null!=u?r=[i,o,u]:null!=s&&null!=i&&null!=o&&(r=[s,i,o])}return!r&&t>=3&&(r=[0,1,2]),r}function q(e,t){var r;return Object(o.i)(e)?(r=t?e.fields.find((function(e){return t.toLowerCase()===e.name.toLowerCase()})):e.fields.find((function(e){return"string"===e.type&&e.name.toLowerCase().indexOf("class")>-1})))||((r=e.fields.find((function(e){return"string"===e.type})))||(r=Z(e,"value"))):r=new u.a({name:"value"}),r}function Z(e,t){return Object(o.i)(e)?e.fields.find((function(e){return e.name.toLowerCase()===t})):null}function Y(e,t){var r=e.attributeTable,n=e.bandCount;return!(Object(o.i)(r)||!function(e){var t,r,n;return["u8","s8"].indexOf(e.pixelType)>-1&&null!=(null==(t=e.statistics)||null==(r=t[0])?void 0:r.min)&&null!=(null==(n=e.statistics[0])?void 0:n.max)&&1===e.bandCount}(e))||!(!Object(o.i)(r)||n>1)&&(!t||null!=r.fields.find((function(e){return e.name.toLowerCase()===t.toLowerCase()})))}function K(e){var t=e.bandCount,r=e.colormap;return Object(o.i)(r)&&r.length&&1===t}function X(e){return"elevation"===e.dataType}function Q(e){var t=e.attributeTable;return 1===e.bandCount&&(Object(o.i)(t)||Object(o.i)(e.histograms))}function $(e){var t,r=e.dataType;return!(null!=(t=e.storageInfo)&&t.tileInfo||"vector-uv"!==r&&"vector-magdir"!==r)}function ee(e){var t;return{color:null==(t=e.symbolLayers[0].material)?void 0:t.color,type:"esriSFS",style:"esriSFSSolid"}}function te(e){if("uniqueValue"===e.type){var t,r=e.uniqueValueInfos,n=r[0].symbol;return null!=n&&null!=(t=n.symbolLayers)&&t.length&&(e.uniqueValueInfos=r.map((function(e){return{value:e.value,label:e.label,symbol:e.symbol?ee(e.symbol):null}}))),e}if("classBreaks"===e.type){var a,i=e.classBreakInfos,o=i[0].symbol;return null!=o&&null!=(a=o.symbolLayers)&&a.length&&(e.classBreakInfos=i.map((function(e){return{classMinValue:e.classMinValue,classMaxValue:e.classMaxValue,label:e.label,symbol:e.symbol?ee(e.symbol):null}}))),e}return e}},"/Kk/":function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r("aNYv"),a=r("eijD"),i=r("hisu"),o=r("yBJb"),u=r("NthX"),s=r.n(u),l=r("g+AA"),c=r("DGz/"),f=r("7im+"),h=r("IH5m"),p=r("EOOn"),d=r("eoZi"),y=r("OYdn"),v=function(){function e(t,r,n,a){Object(i.a)(this,e),this.parsedUrl=t,this.portalItem=r,this.apiKey=n,this.signal=a,this.rootDocument=null;var o=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);o&&(this.urlParts={root:o[1],layerId:parseInt(o[2],10)})}var t,r,u,v,b,m,g,O,w;return Object(o.a)(e,[{key:"fetch",value:(w=Object(a.a)(s.a.mark((function e(){var t,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.urlParts){e.next=2;break}return e.abrupt("return",null);case 2:if(null==(t=this.portalItem)){e.next=6;break}e.t0=t,e.next=9;break;case 6:return e.next=8,this.portalItemFromServiceItemId();case 8:e.t0=e.sent;case 9:if(r=e.t0,!Object(f.h)(r)){e.next=12;break}return e.abrupt("return",this.loadFromUrl());case 12:return e.next=14,this.findAndLoadRelatedPortalItem(r);case 14:return n=e.sent,e.abrupt("return",Object(f.h)(n)?null:this.loadFeatureLayerFromPortalItem(n));case 16:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"fetchPortalItem",value:(O=Object(a.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.urlParts){e.next=2;break}return e.abrupt("return",null);case 2:if(null==(t=this.portalItem)){e.next=6;break}e.t0=t,e.next=9;break;case 6:return e.next=8,this.portalItemFromServiceItemId();case 8:e.t0=e.sent;case 9:return r=e.t0,e.abrupt("return",Object(f.h)(r)?null:this.findAndLoadRelatedPortalItem(r));case 11:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"fetchRootDocument",value:(g=Object(a.a)(s.a.mark((function e(){var t,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(f.i)(this.rootDocument)){e.next=2;break}return e.abrupt("return",this.rootDocument);case 2:if(!Object(f.h)(this.urlParts)){e.next=4;break}return e.abrupt("return",(this.rootDocument={},{}));case 4:return t={query:{f:"json",token:this.apiKey},responseType:"json",signal:this.signal},r="".concat(this.urlParts.root,"/SceneServer"),e.prev=5,e.next=8,Object(c.default)(r,t);case 8:n=e.sent,this.rootDocument=n.data,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),this.rootDocument={};case 15:return e.abrupt("return",this.rootDocument);case 16:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(){return g.apply(this,arguments)})},{key:"fetchServiceOwningPortalUrl",value:(m=Object(a.a)(s.a.mark((function e(){var t,r,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(r=null==(t=l.b)?void 0:t.findServerInfo(this.parsedUrl.path))||!r.owningSystemUrl){e.next=3;break}return e.abrupt("return",r.owningSystemUrl);case 3:return n=this.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info",e.prev=4,e.next=7,Object(c.default)(n,{query:{f:"json"},responseType:"json",signal:this.signal});case 7:if(!(a=e.sent.data.owningSystemUrl)){e.next=10;break}return e.abrupt("return",a);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),Object(h.u)(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(){return m.apply(this,arguments)})},{key:"findAndLoadRelatedPortalItem",value:(b=Object(a.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:this.signal});case 3:if(e.t0=e.sent.find((function(e){return"Feature Service"===e.type})),e.t0){e.next=6;break}e.t0=null;case 6:return e.abrupt("return",e.t0);case 9:return e.prev=9,e.t1=e.catch(0),e.abrupt("return",(Object(h.u)(e.t1),null));case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return b.apply(this,arguments)})},{key:"loadFeatureLayerFromPortalItem",value:(v=Object(a.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load({signal:this.signal});case 2:return e.next=4,this.findMatchingAssociatedSublayerUrl(t.url);case 4:return r=e.sent,e.abrupt("return",new p.default({url:r,portalItem:t}).load({signal:this.signal}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"loadFromUrl",value:(u=Object(a.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findMatchingAssociatedSublayerUrl("".concat(this.urlParts.root,"/FeatureServer"));case 2:return t=e.sent,e.abrupt("return",new p.default({url:t}).load({signal:this.signal}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"findMatchingAssociatedSublayerUrl",value:(r=Object(a.a)(s.a.mark((function e(t){var r,a,i,o,u,l,f,h,p,d,y,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),a={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},i=this.urlParts.layerId,o=this.fetchRootDocument(),u=Object(c.default)(r,a),e.next=7,Promise.all([u,o]);case 7:if(l=e.sent,f=Object(n.a)(l,2),h=f[0],p=f[1],d=p&&p.layers,y=h.data&&h.data.layers,Array.isArray(y)){e.next=15;break}throw new Error("expected layers array");case 15:if(!Array.isArray(d)){e.next=25;break}v=0;case 17:if(!(v<Math.min(d.length,y.length))){e.next=23;break}if(d[v].id!==i){e.next=20;break}return e.abrupt("return","".concat(r,"/").concat(y[v].id));case 20:v++,e.next=17;break;case 23:e.next=27;break;case 25:if(!(i<y.length)){e.next=27;break}return e.abrupt("return","".concat(r,"/").concat(y[i].id));case 27:throw new Error("could not find matching associated sublayer");case 28:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"portalItemFromServiceItemId",value:(t=Object(a.a)(s.a.mark((function e(){var t,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchRootDocument();case 2:if(t=e.sent.serviceItemId){e.next=5;break}return e.abrupt("return",null);case 5:return r=new y.default({id:t,apiKey:this.apiKey}),e.next=8,this.fetchServiceOwningPortalUrl();case 8:return n=e.sent,Object(f.i)(n)&&(r.portal=new d.a({url:n})),e.prev=10,e.abrupt("return",r.load({signal:this.signal}));case 14:return e.prev=14,e.t0=e.catch(10),e.abrupt("return",(Object(h.u)(e.t0),null));case 17:case"end":return e.stop()}}),e,this,[[10,14]])}))),function(){return t.apply(this,arguments)})}]),e}()},0:function(e,t){},"0DVy":function(e,t,r){"use strict";var n=r("mK0O"),a=r("eijD"),i=r("hisu"),o=r("yBJb"),u=r("NthX"),s=r.n(u),l=r("Mp7X"),c=r("Akvs"),f=r("sE9J");function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(){function e(){Object(i.a)(this,e),this._workerThread=null,this._destroyed=!1}var t,r,n,u,h,d,y,v;return Object(o.a)(e,[{key:"initialize",value:(v=Object(a.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)("RasterWorker");case 2:t=e.sent,this._destroyed?t.close():this._workerThread=t;case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"destroy",value:function(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}},{key:"decode",value:(y=Object(a.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new l.a("raster-jobhandler:no-connection","no available worker connection");case 2:return e.next=4,this._workerThread.invoke("decode",t,r);case 4:return n=e.sent,e.abrupt("return",n?new f.a(n):null);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"symbolize",value:(d=Object(a.a)(s.a.mark((function e(t,r){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new l.a("raster-jobhandler:no-connection","no available worker connection");case 2:return n={extent:t.extent&&t.extent.toJSON(),pixelBlock:t.pixelBlock.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},e.next=5,this._workerThread.invoke("symbolize",n,r);case 5:return a=e.sent,e.abrupt("return",a?new f.a(a):null);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"updateSymbolizer",value:(h=Object(a.a)(s.a.mark((function e(t,r){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new l.a("raster-jobhandler:no-connection","no available worker connection");case 2:return a=null==t||null==(n=t.rendererJSON)?void 0:n.histograms,e.next=5,Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:a},r));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"stretch",value:(u=Object(a.a)(s.a.mark((function e(t,r){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new l.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return n={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},e.next=7,this._workerThread.invoke("stretch",n,r);case 7:return a=e.sent,e.abrupt("return",a?new f.a(a):null);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"split",value:(n=Object(a.a)(s.a.mark((function e(t,r){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new l.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return n={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel},e.next=7,this._workerThread.invoke("split",n,r);case 7:return a=e.sent,e.abrupt("return",(a&&a.forEach((function(e,t){a.set(t,e?f.a.fromJSON(e):null)})),Promise.resolve(a)));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"estimateStatisticsHistograms",value:(r=Object(a.a)(s.a.mark((function e(t,r){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new l.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return n={srcPixelBlock:t.pixelBlock.toJSON()},e.next=7,this._workerThread.invoke("estimateStatisticsHistograms",n,r);case 7:return a=e.sent,e.abrupt("return",Promise.resolve(a));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"mosaicAndTransform",value:(t=Object(a.a)(s.a.mark((function e(t,r){var n,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new l.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&null!=(n=t.srcPixelBlocks)&&n.length){e.next=4;break}return e.abrupt("return",null);case 4:return a=p(p({},t),{},{srcPixelBlocks:t.srcPixelBlocks.map((function(e){return e?e.toJSON():null}))}),e.next=7,this._workerThread.invoke("mosaicAndTransform",a,r);case 7:return i=e.sent,e.abrupt("return",i?new f.a(i):null);case 9:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}();t.a=d},"0yMr":function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("cWe4"),l=r("nBXx"),c=r("omx3"),f=r("IH5m");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var p=function(e){Object(i.a)(r,e);var t=h(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).declaredClass="esri.layers.featureset.sources.Empty",a._maxProcessing=1e3,a._wset=new l.a([],[],!1,null),a._parent=e.parentfeatureset,a._databaseType=c.a.Standardised,a}return Object(a.a)(r,[{key:"_getSet",value:function(){return Object(f.t)(this._wset)}},{key:"optimisePagingFeatureQueries",value:function(){}},{key:"_isInFeatureSet",value:function(){return c.b.NotInFeatureSet}},{key:"_getFeature",value:function(){return Object(f.s)(new Error("No Feature Found in EmptySet"))}},{key:"queryAttachments",value:function(){return Object(f.t)([])}},{key:"_getFeatures",value:function(){return Object(f.t)("success")}},{key:"_featureFromCache",value:function(){return null}},{key:"_fetchAndRefineFeatures",value:function(){return Object(f.s)(new Error("Fetch and Refine should not be called in this featureset"))}},{key:"_getFilteredSet",value:function(){return Object(f.t)(new l.a([],[],!1,null))}},{key:"_stat",value:function(e,t,r,n,a,i,o){return this._manualStat(e,t,i,o)}},{key:"_canDoAggregates",value:function(){return Object(f.t)(!1)}}]),r}(s.a);t.a=p},1:function(e,t){},"2P+X":function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r("eijD"),a=r("NthX"),i=r.n(a),o=r("a1c8"),u=r("iwTS"),s=r("eHo5"),l=r("0fR5"),c=r("H8zE");function f(e){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(i.a.mark((function e(t){var r,n,a,f,h,p,d,y,v,b,m,g,O;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Image).src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",r.width=5,r.height=5,e.next=6,r.decode();case 6:if(t.gl){e.next=8;break}return e.abrupt("return",!0);case 8:return n=new u.a(t,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),a=o.a.createVertex(t,35044,new Uint16Array([0,0,1,0,0,1,1,1])),f=new c.a(t,new Map([["a_pos",0]]),{geometry:[{name:"a_pos",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:a}),h=new s.a(t,"\n  precision highp float;\n\n  attribute vec2 a_pos;\n  varying vec2 v_uv;\n\n  void main() {\n    v_uv = a_pos;\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ","\n  precision highp float;\n\n  varying vec2 v_uv;\n  uniform sampler2D u_texture;\n\n  void main() {\n    gl_FragColor = texture2D(u_texture, v_uv);\n  }\n  ",new Map([["a_pos",0]])),t.useProgram(h),p=new l.a(t,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},r),t.bindTexture(p,0),h.setUniform1i("u_texture",0),d=t.getBoundFramebufferObject(),y=t.getViewport(),v=y.x,b=y.y,m=y.width,g=y.height,t.bindFramebuffer(n),t.setViewport(0,0,1,1),t.bindVAO(f),t.drawArrays(5,0,4),O=new Uint8Array(4),e.abrupt("return",(n.readPixels(0,0,1,1,6408,5121,O),h.dispose(),f.dispose(!1),a.dispose(),n.dispose(),p.dispose(),t.setViewport(v,b,m,g),t.bindFramebuffer(d),r.src="",255===O[0]));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"2r+S":function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return I})),r.d(t,"e",(function(){return k})),r.d(t,"f",(function(){return g})),r.d(t,"g",(function(){return j})),r.d(t,"h",(function(){return w})),r.d(t,"i",(function(){return x}));var n=r("TM+E"),a=r("7im+"),i=r("+MBG"),o=r("djeU"),u=r("ahxf"),s=r("KcHx"),l=r("4vgF"),c=r("B9Yk"),f=r("mHKk"),h=r("12QT"),p=r("3p7a"),d=r("hALY"),y=r("iuCb"),v=n.a.getLogger("esri.geometry.support.meshUtils.normalProjection");function b(e,t,r,n,a){return S(n)?(_(0,d.u.fromTypedArray(e),d.v.fromTypedArray(t),d.v.fromTypedArray(r),n,d.u.fromTypedArray(a)),a):(v.error("Cannot convert spatial reference to PCPF"),a)}function m(e,t,r,n,a){return S(n)?(_(1,d.u.fromTypedArray(e),d.v.fromTypedArray(t),d.v.fromTypedArray(r),n,d.u.fromTypedArray(a)),a):(v.error("Cannot convert to spatial reference from PCPF"),a)}function g(e,t,r){return Object(c.j)(e,t,0,r,Object(f.g)(t),0,e.length/3),r}function O(e,t,r){return Object(c.j)(e,Object(f.g)(r),0,t,r,0,e.length/3),t}function w(e,t,r){if(Object(a.h)(e))return t;var n=d.v.fromTypedArray(e),i=d.v.fromTypedArray(t);return Object(y.e)(i,n,r),t}function j(e,t,r){if(Object(a.h)(e))return t;Object(i.a)(P,r);var n=d.u.fromTypedArray(e),o=d.u.fromTypedArray(t);return Object(y.a)(o,n,P),Object(i.f)(P)||Object(y.c)(o,o),t}function x(e,t,r){if(Object(a.h)(e))return t;Object(i.a)(P,r);var n=d.u.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT),o=d.u.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT);if(Object(y.a)(o,n,P),Object(i.f)(P)||Object(y.c)(o,o),e!==t)for(var u=3;u<e.length;u+=4)t[u]=e[u];return t}function k(e,t,r,n,a){if(!S(n))return v.error("Cannot convert spatial reference to PCPF"),a;_(0,d.u.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT),d.v.fromTypedArray(t),d.v.fromTypedArray(r),n,d.u.fromTypedArray(a,4*Float32Array.BYTES_PER_ELEMENT));for(var i=3;i<e.length;i+=4)a[i]=e[i];return a}function I(e,t,r,n,a){if(!S(n))return v.error("Cannot convert to spatial reference from PCPF"),a;_(1,d.u.fromTypedArray(e,16),d.v.fromTypedArray(t),d.v.fromTypedArray(r),n,d.u.fromTypedArray(a,16));for(var i=3;i<e.length;i+=4)a[i]=e[i];return a}function _(e,t,r,n,a,o){if(t){var u=r.count,l=Object(f.g)(a);if(T(a))for(var h=0;h<u;h++)n.getVec(h,A),t.getVec(h,M),Object(c.c)(l,A,C,l),Object(i.e)(P,C),1===e&&Object(i.l)(P,P),Object(s.t)(M,M,P),o.setVec(h,M);else for(var d=0;d<u;d++){n.getVec(d,A),t.getVec(d,M),Object(c.c)(l,A,C,l),Object(i.e)(P,C);var y=Object(p.h)(r.get(d,1)),v=Math.cos(y);0===e&&(v=1/v),P[0]*=v,P[1]*=v,P[2]*=v,P[3]*=v,P[4]*=v,P[5]*=v,1===e&&Object(i.l)(P,P),Object(s.t)(M,M,P),Object(s.o)(M,M),o.setVec(d,M)}return o}}function S(e){return T(e)||function(e){return e.isWebMercator}(e)}function T(e){return e.isWGS84||Object(h.e)(e)||Object(h.h)(e)||Object(h.i)(e)}var A=Object(l.e)(),M=Object(l.e)(),C=Object(u.d)(),P=Object(o.b)()},"3I4I":function(e,t,r){"use strict";var n=r("h/Mk"),a=r("zrDt"),i=r("a72Q"),o=function(e,t,r,u,s,l,c,f){for(var h,p=s,d=0,y=!!c&&i(c,f,3);d<u;){if(d in r){if(h=y?y(r[d],d,t):r[d],l>0&&n(h))p=o(e,t,h,a(h.length),p,l-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[p]=h}p++}d++}return p};e.exports=o},"3XYR":function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u}));var n=r("8jRW"),a=r("6J1V");function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(){if(!("document"in n.a))return function(){return null};var e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,function(r){t.clearRect(0,0,1,e.height);var n,a=t.createLinearGradient(0,0,0,e.height),o=i(r.colorStops);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=u.ratio,l=u.color;a.addColorStop(Math.max(s,.001),"rgba(".concat(l[0],", ").concat(l[1],", ").concat(l[2],", ").concat(l[3],")"))}}catch(c){o.e(c)}finally{o.f()}return t.fillStyle=a,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}}();function s(e,t,r,n){var a,o,u=t.blurRadius,s=t.fieldOffset,l=t.field,f=new Float64Array(r*n),h=c(u),p=Math.round(3*u),d=Number.NEGATIVE_INFINITY,y=function(e,t){return null!=e?"string"==typeof t?function(t){return-1*+t.readAttribute(e)}:function(r){return+r.readAttribute(e)+t}:function(e){return 1}}(l,s),v=new Set,b=i(e);try{for(b.s();!(o=b.n()).done;)for(var m=o.value.getCursor();m.next();){var g=m.getObjectId();if(!v.has(g)){v.add(g);var O=m.readLegacyPointGeometry();if(!(O.x<-128||O.x>=r+128||O.y<-128||O.y>n+128))for(var w=+y(m),j=Math.round(O.x)-p,x=Math.round(O.y)-p,k=Math.max(0,j),I=Math.max(0,x),_=Math.min(n,Math.round(O.y)+p),S=Math.min(r,Math.round(O.x)+p),T=I;T<_;T++)for(var A=h[T-x],M=k;M<S;M++){var C=h[M-j];(a=f[T*r+M]+=A*C*w)>d&&(d=a)}}}}catch(P){b.e(P)}finally{b.f()}return{matrix:f.buffer,max:d}}function l(e,t,r,n,i,o){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);var u=e.getImageData(0,0,t,t);r&&n&&u.data.set(new Uint8ClampedArray(function(e,t,r,n,i){for(var o=new Uint32Array(e*e),u=("buffer"in t?t:new Float64Array(t)),s=("buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer)),l=s.length/(i-n),c=0;c<u.length;c++){var f=u[c],h=Math.floor((f-n)*l);o[c]=s[Object(a.e)(h,0,s.length-1)]}return o.buffer}(t,r,n,i,o))),e.putImageData(u,0,0)}function c(e){for(var t=Math.round(3*e),r=2*e*e,n=new Float64Array(2*t+1),a=0;a<=n.length;a++)n[a]=Math.exp(-Math.pow(a-t,2)/r)/Math.sqrt(2*Math.PI)*(e/2);return n}},"42jQ":function(e,t,r){"use strict";var n,a=r("aNYv"),i=r("hisu"),o=r("yBJb"),u=r("CHlC"),s=r("kMo5"),l=r("P+uj"),c=r("dQW7"),f=r("0n+b"),h=r("7im+"),p=r("xAIp"),d=(r("J4Pc"),r("wckI"),r("TM+E"),r("iaHD")),y=r("AjSt"),v=r("ahxf"),b=r("KcHx"),m=r("4vgF"),g=r("OTJA"),O=r("B9Yk"),w=r("mHKk"),j=r("Q+lp"),x=r("hALY"),k=r("iuCb"),I=r("kzti");function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var S=n=function(e){Object(u.a)(r,e);var t=_(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).origin=Object(m.e)(),n.translation=Object(m.e)(),n.rotation=Object(j.d)(),n.scale=Object(m.g)(1,1,1),n.geographic=!0,n}return Object(o.a)(r,[{key:"localMatrix",get:function(){var e=Object(v.d)();return Object(y.l)(e,e,this.scale),Object(y.b)(e,e,Object(j.a)(this.rotation),Object(j.b)(this.rotation)),Object(y.m)(e,e,this.translation),e}},{key:"localMatrixInverse",get:function(){return Object(y.a)(Object(v.d)(),this.localMatrix)}},{key:"applyLocal",value:function(e,t){return Object(b.n)(t,e,this.localMatrix)}},{key:"applyLocalInverse",value:function(e,t){return Object(b.n)(t,e,this.localMatrixInverse)}},{key:"project",value:function(e,t){var r=new Float64Array(e.length),n=x.v.fromTypedArray(r),a=x.v.fromTypedArray(e);if(this.geographic){var i=Object(w.h)(Object(w.e)(t)),o=Object(v.d)();return Object(O.c)(t,this.origin,o,i),Object(y.i)(o,o,this.localMatrix),Object(k.e)(n,a,o),Object(O.j)(r,i,0,r,t,0,r.length/3),r}var u=this.localMatrix,s=this.origin;Object(y.e)(u,v.a)?Object(I.a)(n,a):Object(k.e)(n,a,u);for(var l=0;l<r.length;l+=3)r[l+0]+=s[0],r[l+1]+=s[1],r[l+2]+=s[2];return r}},{key:"getOriginPoint",value:function(e){var t=Object(a.a)(this.origin,3),r=t[0],n=t[1],i=t[2];return new g.a({x:r,y:n,z:i,spatialReference:e})}},{key:"equals",value:function(e){return Object(h.i)(e)&&this.geographic===e.geographic&&Object(b.l)(this.origin,e.origin)&&Object(y.f)(this.localMatrix,e.localMatrix)}},{key:"clone",value:function(){var e={origin:Object(m.c)(this.origin),translation:Object(m.c)(this.translation),rotation:Object(j.d)(this.rotation),scale:Object(m.c)(this.scale),geographic:this.geographic};return new n(e)}}]),r}(f.a);Object(c.a)([Object(p.b)({type:[Number],nonNullable:!0,json:{write:!0}})],S.prototype,"origin",void 0),Object(c.a)([Object(p.b)({type:[Number],nonNullable:!0,json:{write:!0}})],S.prototype,"translation",void 0),Object(c.a)([Object(p.b)({type:[Number],nonNullable:!0,json:{write:!0}})],S.prototype,"rotation",void 0),Object(c.a)([Object(p.b)({type:[Number],nonNullable:!0,json:{write:!0}})],S.prototype,"scale",void 0),Object(c.a)([Object(p.b)({type:Boolean,nonNullable:!0,json:{write:!0}})],S.prototype,"geographic",void 0),Object(c.a)([Object(p.b)()],S.prototype,"localMatrix",null),Object(c.a)([Object(p.b)()],S.prototype,"localMatrixInverse",null);var T=S=n=Object(c.a)([Object(d.a)("esri.geometry.support.MeshTransform")],S);t.a=T},"46Wt":function(e,t,r){"use strict";var n=r("mK0O"),a=r("Mp7X"),i=r("TM+E"),o=r("z4xm");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=new Map;function c(e,t,r){var n=r.transform,u=r.hasZ,c=r.hasM;l.has(t)||l.set(t,function(e){var t={};switch(e){case"esriGeometryPoint":return function(e,r,n,a){return Object(o.e)(r,t,e,n,a)};case"esriGeometryPolygon":return function(e,r,n,a){return Object(o.f)(r,t,e,n,a)};case"esriGeometryPolyline":return function(e,r,n,a){return Object(o.g)(r,t,e,n,a)};case"esriGeometryMultipoint":return function(e,r,n,a){return Object(o.d)(r,t,e,n,a)};default:return i.a.getLogger("esri.views.2d.support.arcadeOnDemand").error(new a.a("mapview-arcade","Unable to handle geometryType: ".concat(e))),function(e){return e}}}(t));var f=l.get(t)(e.geometry,n,u,c);return s(s({},e),{},{geometry:f})}t.a=function(e,t,r,n,a){var o=e.referencesGeometry()&&a?c(t,n,a):t,u=e.repurposeFeature(o);try{return e.evaluate(s(s({},r),{},{$feature:u}))}catch(l){return i.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}},"5IsQ":function(e,t){var r,n,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,l=[],c=!1,f=-1;function h(){c&&s&&(c=!1,s.length?l=s.concat(l):f=-1,l.length&&p())}function p(){if(!c){var e=u(h);c=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||c||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},"5j12":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("dQW7"),l=(r("xAIp"),r("J4Pc"),r("wckI"),r("TM+E"),r("iaHD")),c=r("+voA");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var h=function(e){var t=function(e){Object(i.a)(r,e);var t=f(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"attach",value:function(){this.view.timeline.record("".concat(this.layer.title," (BitmapTileLayer) Attach")),this._bitmapView=new c.a(this._tileInfoView),this.container.addChild(this._bitmapView)}},{key:"detach",value:function(){this.container.removeChild(this._bitmapView),this._bitmapView.removeAllChildren()}}]),r}(e);return t=Object(s.a)([Object(l.a)("esri.views.2d.layers.BitmapTileLayerView2D")],t)}},"6SOj":function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("cWe4"),l=r("nBXx"),c=r("omx3"),f=r("x/s0"),h=r("IH5m"),p=r("xnqp"),d=r("YHXj");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var v=function(e){Object(i.a)(r,e);var t=y(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).declaredClass="esri.arcade.featureset.actions.AttributeFilter",a._maxProcessing=1e3,a._parent=e.parentfeatureset,e.whereclause instanceof p.WhereClause?(a._whereclause=e.whereclause,a._whereClauseFunction=null):(a._whereClauseFunction=e.whereclause,a._whereclause=null),a}return Object(a.a)(r,[{key:"_initialiseFeatureSet",value:function(){null!==this._parent?(this.fields=this._parent.fields.slice(0),this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.fields=[],this.typeIdField="",this.objectIdField="",this.globalIdField="",this.spatialReference=new d.a({wkid:4326}),this.geometryType=c.m.point)}},{key:"_getSet",value:function(e){var t=this;return null===this._wset?this._ensureLoaded().then((function(){return t._parent._getFilteredSet("",null,t._whereclause,null,e)})).then((function(r){return t._checkCancelled(e),null!==t._whereClauseFunction?t._wset=new l.a(r._candidates.slice(0).concat(r._known.slice(0)),[],r._ordered,t._clonePageDefinition(r.pagesDefinition)):t._wset=new l.a(r._candidates.slice(0),r._known.slice(0),r._ordered,t._clonePageDefinition(r.pagesDefinition)),t._wset})):Object(h.t)(this._wset)}},{key:"_isInFeatureSet",value:function(e){var t=this._parent._isInFeatureSet(e);return t===c.b.NotInFeatureSet?t:void 0===(t=this._idstates[e])?c.b.Unknown:t}},{key:"_getFeature",value:function(e,t,r){return this._parent._getFeature(e,t,r)}},{key:"_getFeatures",value:function(e,t,r,n){return this._parent._getFeatures(e,t,r,n)}},{key:"_featureFromCache",value:function(e){return this._parent._featureFromCache(e)}},{key:"executeWhereClause",value:function(e){return this._whereclause.testFeature(e)}},{key:"executeWhereClauseDeferred",value:function(e){if(null!==this._whereClauseFunction)try{var t=this._whereClauseFunction(e);return Object(h.p)(t)?t:Object(h.t)(t)}catch(r){return Object(h.s)(r)}return Object(h.t)(this.executeWhereClause(e))}},{key:"_fetchAndRefineFeatures",value:function(e,t,r){var n=this,a=new l.a([],e,!1,null),i=Math.min(t,e.length);return this._parent._getFeatures(a,-1,i,r).then((function(){if(n._checkCancelled(r),null==n._whereClauseFunction){for(var a=0;a<i;a++){var o=n._parent._featureFromCache(e[a]);!0===n.executeWhereClause(o)?n._idstates[e[a]]=c.b.InFeatureSet:n._idstates[e[a]]=c.b.NotInFeatureSet}return"success"}for(var u=[],s=0;s<i;s++){var l=n._parent._featureFromCache(e[s]);u.push(n.executeWhereClauseDeferred(l))}return Object(h.b)(u).then((function(r){for(var a=0;a<t;a++)!0===r[a]?n._idstates[e[a]]=c.b.InFeatureSet:n._idstates[e[a]]=c.b.NotInFeatureSet;return"success"}))}))}},{key:"_getFilteredSet",value:function(e,t,r,n,a){var i=this;return null!==this._whereClauseFunction||(null!==r?null!==this._whereclause&&(r=Object(f.a)(this._whereclause,r)):r=this._whereclause),this._ensureLoaded().then((function(){return i._parent._getFilteredSet(e,t,r,n,a)})).then((function(e){return i._checkCancelled(a),null!==i._whereClauseFunction?new l.a(e._candidates.slice(0).concat(e._known.slice(0)),[],e._ordered,i._clonePageDefinition(e.pagesDefinition)):new l.a(e._candidates.slice(0),e._known.slice(0),e._ordered,i._clonePageDefinition(e.pagesDefinition))}))}},{key:"_stat",value:function(e,t,r,n,a,i,o){var u=this;if(null!==this._whereClauseFunction)return null===a&&""===r&&null===n?this._manualStat(e,t,i,o):Object(h.t)({calculated:!1});var s=this._whereclause;return null!==a&&null!==this._whereclause&&(s=Object(f.a)(this._whereclause,a)),this._parent._stat(e,t,r,n,s,i,o).then((function(s){return!1===s.calculated?null===a&&""===r&&null===n?u._manualStat(e,t,i,o):{calculated:!1}:s}))}},{key:"_canDoAggregates",value:function(e,t,r,n,a){return null!==this._whereClauseFunction?Object(h.t)(!1):(null!==a?null!==this._whereclause&&(a=Object(f.a)(this._whereclause,a)):a=this._whereclause,null===this._parent?Object(h.t)(!1):this._parent._canDoAggregates(e,t,r,n,a))}},{key:"_getAggregatePagesDataSourceDefinition",value:function(e,t,r,n,a,i,o){return null===this._parent?Object(h.s)(new Error("Should never be called")):(null!==a?null!==this._whereclause&&(a=Object(f.a)(this._whereclause,a)):a=this._whereclause,this._parent._getAggregatePagesDataSourceDefinition(e,t,r,n,a,i,o))}}],[{key:"registerAction",value:function(){s.a._featuresetFunctions.filter=function(e){if("function"==typeof e)return new r({parentfeatureset:this,whereclause:e});var t=null;return e instanceof p.WhereClause&&(t=e),new r({parentfeatureset:this,whereclause:t})}}}]),r}(s.a);t.a=v},"6rmj":function(e,t,r){"use strict";r.r(t),r.d(t,"addOrUpdateResource",(function(){return p})),r.d(t,"contentToBlob",(function(){return w})),r.d(t,"fetchResources",(function(){return f})),r.d(t,"getSiblingOfSameType",(function(){return x})),r.d(t,"getSiblingOfSameTypeI",(function(){return k})),r.d(t,"removeAllResources",(function(){return b})),r.d(t,"removeResource",(function(){return y})),r.d(t,"splitPrefixFileNameAndExtension",(function(){return O}));var n=r("aNYv"),a=r("eijD"),i=r("NthX"),o=r.n(i),u=r("DGz/"),s=r("Mp7X"),l=r("7im+"),c=r("z9dv");function f(e){return h.apply(this,arguments)}function h(){return(h=Object(a.a)(o.a.mark((function e(t){var r,n,a,i,u,s,f,h,p,d,y,v,b=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:{},n=b.length>2?b[2]:void 0,e.next=4,t.load(n);case 4:return a=Object(c.z)(t.itemUrl,"resources"),i=r.start,u=void 0===i?1:i,s=r.num,f=void 0===s?10:s,h=r.sortOrder,p=void 0===h?"asc":h,d=r.sortField,y={query:{start:u,num:f,sortOrder:p,sortField:void 0===d?"created":d,token:t.apiKey},signal:Object(l.g)(n,"signal")},e.next=16,t.portal._request(a,y);case 16:return v=e.sent,e.abrupt("return",{total:v.total,nextStart:v.nextStart,resources:v.resources.map((function(e){var r=e.created,n=e.size,a=e.resource;return{created:new Date(r),size:n,resource:t.resourceFromPath(a)}}))});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t,r,n){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(o.a.mark((function e(t,r,a,i){var u,f,h,p,d,y,v,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasPath()){e.next=2;break}throw new s.a("portal-item-resource-".concat(r,":invalid-path"),"Resource does not have a valid path");case 2:return u=t.portalItem,e.next=5,u.load(i);case 5:return f=Object(c.z)(u.userItemUrl,"add"===r?"addResources":"updateResources"),h=g(t.path),p=Object(n.a)(h,2),d=p[0],y=p[1],e.next=12,w(a);case 12:return v=e.sent,b=new FormData,d&&"."!==d&&b.append("resourcesPrefix",d),b.append("fileName",y),b.append("file",v,y),b.append("f","json"),Object(l.i)(i)&&i.access&&b.append("access",i.access),e.next=21,u.portal._request(f,{method:"post",body:b,signal:Object(l.g)(i,"signal")});case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,r){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(o.a.mark((function e(t,r,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.hasPath()){e.next=2;break}throw new s.a("portal-item-resources-remove:invalid-path","Resource does not have a valid path");case 2:return e.next=4,t.load(n);case 4:return a=Object(c.z)(t.userItemUrl,"removeResources"),e.next=7,t.portal._request(a,{method:"post",query:{resource:r.path},signal:Object(l.g)(n,"signal")});case 7:r.portalItem=null;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load(r);case 2:return n=Object(c.z)(t.userItemUrl,"removeResources"),e.abrupt("return",t.portal._request(n,{method:"post",query:{deleteAll:!0},signal:Object(l.g)(r,"signal")}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){var t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function O(e){var t=function(e){var t=Object(c.n)(e);return Object(l.h)(t)?[e,""]:[e.slice(0,e.length-t.length-1),".".concat(t)]}(e),r=Object(n.a)(t,2),a=r[0],i=r[1],o=g(a),u=Object(n.a)(o,2);return[u[0],u[1],i]}function w(e){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Blob)){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,Object(u.default)(t.url,{responseType:"blob"});case 4:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){if(!e.hasPath())return null;var r=O(e.path),a=Object(n.a)(r,3),i=a[0],o=a[2];return e.portalItem.resourceFromPath(Object(c.z)(i,t+o))}function k(e,t){if(!e.hasPath())return null;var r=O(e.path),a=Object(n.a)(r,3),i=a[0],o=a[2];return e.portalItem.resourceFromPath(Object(c.z)(i,t+o))}},"6zn5":function(e,t,r){"use strict";function n(e,t){for(var r=0,n="",a=0,i=0,o=e.length;r<o;)(a=(i=e[r++])>>4)<8?a=1:15===a?(a=4,i=(7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]):14===a?(a=3,i=(15&i)<<12|(63&e[r++])<<6|63&e[r++]):(a=2,i=(31&i)<<6|63&e[r++]),(0!==i||t)&&(n+=String.fromCharCode(i));return n}r.d(t,"a",(function(){return n}))},"7f4O":function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var n=r("eijD"),a=r("mK0O"),i=r("hisu"),o=r("yBJb"),u=r("CHlC"),s=r("kMo5"),l=r("P+uj"),c=r("NthX"),f=r.n(c),h=r("dQW7"),p=r("DGz/"),d=r("hZBP"),y=r("Mp7X"),v=r("UfAV"),b=r("TM+E"),m=r("tajk"),g=r("DVFM"),O=r("IH5m"),w=r("+JF/"),j=r("z9dv"),x=r("j56I"),k=r("xAIp"),I=(r("J4Pc"),r("gljZ")),_=r("iaHD"),S=r("X6u8"),T=r("0fJP");function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(){function e(){Object(i.a)(this,e),this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}return Object(o.a)(e,[{key:"getAvailability",value:function(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;var r=(e-this.location.top)*this.location.width+(t-this.location.left),n=r%8,a=r>>3,i=this._tileAvailabilityBitSet;return a<0||a>i.length?"unknown":i[a]&1<<n?"available":"unavailable"}},{key:"_updateFromData",value:function(e){for(var t=this.location.width,r=this.location.height,n=!0,a=!0,i=Math.ceil(t*r/8),o=new Uint8Array(i),u=0,s=0;s<e.length;s++){var l=s%8;e[s]?(a=!1,o[u]|=1<<l):n=!1,7===l&&++u}a?this._allAvailability="unavailable":n?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=o,this.byteSize+=o.length)}}],[{key:"fromDefinition",value:function(t,r){var n=t.service.request||p.default,a=t.row,i=t.col,o=t.width,u=t.height,s={query:{f:"json"}};return r=r?M(M({},s),r):s,n(function(e){var t;if("vector-tile"===e.service.type)t="".concat(e.service.url,"/tilemap/").concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height);else{var r=e.service.tileServers;t="".concat(r&&r.length?r[e.row%r.length]:e.service.url,"/tilemap/").concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height)}var n=e.service.query;return n&&(t="".concat(t,"?").concat(n)),t}(t),r).then((function(e){return e.data})).catch((function(e){if(e&&e.details&&422===e.details.httpStatus)return{location:{top:a,left:i,width:o,height:u},valid:!0,data:Object(S.b)(o*u,0)};throw e})).then((function(t){if(t.location&&(t.location.top!==a||t.location.left!==i||t.location.width!==o||t.location.height!==u))throw new y.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:a,left:i,width:o,height:u}});return e.fromJSON(t)}))}},{key:"fromJSON",value:function(t){e.validateJSON(t);var r=new e;return r.location=Object.freeze(Object(T.a)(t.location)),r._updateFromData(t.data),Object.freeze(r)}},{key:"validateJSON",value:function(e){if(!e||!e.location)throw new y.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new y.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new y.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new y.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new y.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}]),e}();function P(e){return"".concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height)}var D;function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var B=b.a.getLogger("esri.layers.support.TilemapCache"),F=D=function(e){Object(u.a)(a,e);var t,r=N(a);function a(e){var t;return Object(i.a)(this,a),(t=r.call(this,e))._handles=new v.a,t._pendingTilemapRequests={},t._availableLevels={},t.levels=5,t.cacheByteSize=2097152,t.request=p.default,t._prefetchingEnabled=!0,t}return Object(o.a)(a,[{key:"initialize",value:function(){var e=this;this._tilemapCache=new m.a(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(function(){return e._initializeTilemapDefinition()})),Object(x.a)(this,"layer.tileInfo.lods",(function(t){return e._initializeAvailableLevels(t)}),!0)]),this._initializeTilemapDefinition()}},{key:"destroy",value:function(){this._handles&&(this._handles.destroy(),this._handles=null)}},{key:"castLevels",value:function(e){return e<=2?(B.error("Minimum levels for Tilemap is 3, but got ",e),3):e}},{key:"size",get:function(){return 1<<this.levels}},{key:"fetchTilemap",value:function(e,t,r,n){var a=this;if(!this._availableLevels[e])return Promise.reject(new y.a("tilemap-cache:level-unavailable","Level ".concat(e," is unavailable in the service")));var i=this._tmpTilemapDefinition,o=this._tilemapFromCache(e,t,r,i);if(o)return Promise.resolve(o);var u=n&&n.signal;return n=R(R({},n),{},{signal:null}),new Promise((function(e,t){Object(O.q)(u,(function(){return t(Object(O.e)())}));var r=P(i),o=a._pendingTilemapRequests[r];if(!o){o=C.fromDefinition(i,n).then((function(e){return a._tilemapCache.put(r,e,e.byteSize),e}));var s=function(){return delete a._pendingTilemapRequests[r]};a._pendingTilemapRequests[r]=o,o.then(s,s)}o.then(e,t)}))}},{key:"getAvailability",value:function(e,t,r){if(!this._availableLevels[e])return"unavailable";var n=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return n?n.getAvailability(t,r):"unknown"}},{key:"getAvailabilityUpsample",value:function(e,t,r,n){n.level=e,n.row=t,n.col=r;var a=this.layer.tileInfo;for(a.updateTileInfo(n);;){var i=this.getAvailability(n.level,n.row,n.col);if("unavailable"!==i)return i;if(!a.upsampleTile(n))return"unavailable"}}},{key:"fetchAvailability",value:function(e,t,r,n){return this._availableLevels[e]?this.fetchTilemap(e,t,r,n).catch((function(e){return e})).then((function(n){if(n instanceof C){var a=n.getAvailability(t,r);return"unavailable"===a?Promise.reject(new y.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):a}if(Object(O.m)(n))throw n;return"unknown"})):Promise.reject(new y.a("tilemap-cache:level-unavailable","Level ".concat(e," is unavailable in the service")))}},{key:"fetchAvailabilityUpsample",value:function(e,t,r,n,a){var i=this;n.level=e,n.row=t,n.col=r;var o=this.layer.tileInfo;o.updateTileInfo(n);var u=this.fetchAvailability(e,t,r,a).catch((function(e){if(Object(O.m)(e))throw e;if(o.upsampleTile(n))return i.fetchAvailabilityUpsample(n.level,n.row,n.col,n);throw e}));return this._fetchAvailabilityUpsamplePrefetch(n.id,e,t,r,a,u),u}},{key:"_fetchAvailabilityUpsamplePrefetch",value:(t=Object(n.a)(f.a.mark((function e(t,r,n,a,i,o){var u,s,l,c,h,p,d,y,v,b=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._prefetchingEnabled){e.next=2;break}return e.abrupt("return");case 2:if(u="prefetch-".concat(t),!this._handles.has(u)){e.next=5;break}return e.abrupt("return");case 5:return s=Object(O.d)(),o.then((function(){return s.abort()}),(function(){return s.abort()})),l=!1,c={remove:function(){l||(l=!0,s.abort())}},this._handles.add(c,u),e.next=12,Object(w.c)(10,s.signal).catch((function(){}));case 12:if(l||(l=!0,this._handles.remove(u)),!Object(O.n)(s)){e.next=15;break}return e.abrupt("return");case 15:for(h={id:t,level:r,row:n,col:a},p=R(R({},i),{},{signal:s.signal}),d=this.layer.tileInfo,y=function(e){var t=b.fetchAvailability(h.level,h.row,h.col,p);D._prefetches.push(t);var r=function(){D._prefetches.removeUnordered(t)};t.then(r,r)},v=0;D._prefetches.length<D._maxPrefetch&&d.upsampleTile(h);++v)y();case 18:case"end":return e.stop()}}),e,this)}))),function(e,r,n,a,i,o){return t.apply(this,arguments)})},{key:"_initializeTilemapDefinition",value:function(){if(this.layer.parsedUrl){var e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?Object(j.E)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}}},{key:"_tilemapFromCache",value:function(e,t,r,n){n.level=e,n.row=t-t%this.size,n.col=r-r%this.size;var a=P(n);return this._tilemapCache.get(a)}},{key:"_initializeAvailableLevels",value:function(e){var t=this;this._availableLevels={},e&&e.forEach((function(e){return t._availableLevels[e.level]=!0}))}},{key:"test",get:function(){var e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:function(t,r,n){return!!e._tilemapFromCache(t,r,n,e._tmpTilemapDefinition)}}}}]),a}(d.a);F._maxPrefetch=4,F._prefetches=new g.a({initialSize:D._maxPrefetch}),Object(h.a)([Object(k.b)({constructOnly:!0,type:Number})],F.prototype,"levels",void 0),Object(h.a)([Object(I.a)("levels")],F.prototype,"castLevels",null),Object(h.a)([Object(k.b)({readOnly:!0,type:Number})],F.prototype,"size",null),Object(h.a)([Object(k.b)({constructOnly:!0,type:Number})],F.prototype,"cacheByteSize",void 0),Object(h.a)([Object(k.b)({constructOnly:!0})],F.prototype,"layer",void 0),Object(h.a)([Object(k.b)({constructOnly:!0})],F.prototype,"request",void 0),F=D=Object(h.a)([Object(_.a)("esri.layers.support.TilemapCache")],F)},"7zgW":function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return P})),r.d(t,"c",(function(){return x})),r.d(t,"d",(function(){return k})),r.d(t,"e",(function(){return _})),r.d(t,"f",(function(){return j}));var n=r("eijD"),a=r("NthX"),i=r.n(a),o=r("7i+s"),u=r("7im+"),s=r("a1Tm"),l=r("qCPK"),c=r("aic5"),f=r("pkWm"),h=r("12QT"),p=(r("Hhu8"),r("4WE2")),d=r("4zgH"),y=r("pjVo"),v=new o.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),b=Object.freeze({}),m=new d.a,g=new d.a,O=new d.a,w={esriGeometryPoint:p.m,esriGeometryPolyline:p.o,esriGeometryPolygon:p.n,esriGeometryMultipoint:p.l};function j(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.hasZ,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.hasM,i=e.hasZ&&n,o=e.hasM&&a;if(r){var u=Object(p.u)(O,t,e.hasZ,e.hasM,"esriGeometryPoint",r,n,a);return Object(p.m)(u,i,o)}return Object(p.m)(t,i,o)}function x(e,t,r,n,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:r,s=t&&o,l=r&&u,c=n?"coords"in n?n:n.geometry:null;if(!c)return null;if(a){var f=Object(p.q)(g,c,t,r,e,a,o,u);return i&&(f=Object(p.u)(O,f,s,l,e,i)),w[e](f,s,l)}if(i){var h=Object(p.u)(O,c,t,r,e,i,o,u);return w[e](h,s,l)}return Object(p.x)(m,c,t,r,o,u),w[e](m,s,l)}function k(e,t,r){return I.apply(this,arguments)}function I(){return(I=Object(n.a)(i.a.mark((function e(t,r,n){var a,o,u,s,l,c,f,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.outFields,o=t.orderByFields,u=t.groupByFieldsForStatistics,s=t.outStatistics,a)for(l=0;l<a.length;l++)a[l]=a[l].trim();if(o)for(c=0;c<o.length;c++)o[c]=o[c].trim();if(u)for(f=0;f<u.length;f++)u[f]=u[f].trim();if(s)for(h=0;h<s.length;h++)s[h].onStatisticField&&(s[h].onStatisticField=s[h].onStatisticField.trim());return e.abrupt("return",(t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),_(t,r,n)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,r){return S.apply(this,arguments)}function S(){return(S=Object(n.a)(i.a.mark((function e(t,r,n){var a,o,s,h,p,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(a=t.where,t.where=a=a&&a.trim(),(!a||/^1 *= *1$/.test(a)||r&&r===a)&&(t.where=null),t.geometry){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,T(t);case 7:return o=e.sent,t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel&&(s=t.geometry.spatialReference,(o=Object(l.a)(o)).spatialReference=s),t.geometry=o,e.next=12,Object(y.a)(o.spatialReference,n);case 12:return e.next=14,Object(f.a)(Object(c.a)(o));case 14:if(h=e.sent[0],!Object(u.h)(h)){e.next=17;break}throw b;case 17:return p=h.toJSON(),e.next=20,Object(y.b)(p,p.spatialReference,n);case 20:if(d=e.sent){e.next=23;break}throw b;case 23:return e.abrupt("return",(d.spatialReference=n,t.geometry=d,t));case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return A.apply(this,arguments)}function A(){return(A=Object(n.a)(i.a.mark((function e(t){var r,n,a,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.geometry,n=t.distance,a=t.units,null!=n&&!("vertexAttributes"in r)){e.next=3;break}return e.abrupt("return",r);case 3:if(o=r.spatialReference,u=a?v.fromJSON(a):Object(s.f)(o),!o||!Object(h.g)(o)&&!Object(h.n)(o)){e.next=9;break}e.t0=r,e.next=12;break;case 9:return e.next=11,Object(y.a)(o,h.a).then((function(){return Object(y.b)(r,h.a)}));case 11:e.t0=e.sent;case 12:return l=e.t0,e.next=15,M();case 15:return e.t1=e.sent,e.abrupt("return",(0,e.t1)(l.spatialReference,l,n,u));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return C.apply(this,arguments)}function C(){return(C=Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(7),r.e(1),r.e(10)]).then(r.bind(null,"TK+P"));case 2:return e.abrupt("return",e.sent.geodesicBuffer);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return e&&D in e?JSON.parse(JSON.stringify(e,E)):e}var D="_geVersion",E=function(e,t){return e!==D?t:void 0}},"8AP4":function(e,t,r){"use strict";r.d(t,"a",(function(){return F})),r.d(t,"b",(function(){return Q})),r.d(t,"c",(function(){return J})),r.d(t,"d",(function(){return he})),r.d(t,"e",(function(){return $})),r.d(t,"f",(function(){return ie}));var n=r("mK0O"),a=r("aNYv"),i=r("6CzD"),o=r("eijD"),u=r("NthX"),s=r.n(u),l=r("vlZn"),c=(r("ZTBZ"),r("DGz/")),f=r("Mp7X");function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r,n=h(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(null!=a&&t(a))return a}}catch(i){n.e(i)}finally{n.f()}}var y=r("7im+"),v=r("IH5m"),b=r("z9dv"),m=r("B9Yk"),g=r("12QT"),O=r("lrNM"),w=r("hrIl");function j(e){var t;return null!=(t=function(e){var t,r,n,a,i=x.exec(e);if(!i)return null;var o=i.groups,u=+o.year,s=+o.month-1,l=+o.day,c=+(null!=(t=o.hours)?t:"0"),f=+(null!=(r=o.minutes)?r:"0"),h=+(null!=(n=o.seconds)?n:"0");if(c>23)return null;if(f>59)return null;if(h>59)return null;var p,d=null!=(a=o.ms)?a:"0",y=d?+d.padEnd(3,"0").substring(0,3):0;if(o.isUTC)p=Date.UTC(u,s,l,c,f,h,y);else if(o.offsetSign){var v=+o.offsetHours,b=+o.offsetMinutes;p=6e4*("+"===o.offsetSign?-1:1)*(60*v+b)+Date.UTC(u,s,l,c,f,h,y)}else p=new Date(u,s,l,c,f,h,y).getTime();return Number.isNaN(p)?null:p}(e))?t:function(e){var t=new Date(e).getTime();return Number.isNaN(t)?null:t}(e)}var x=Object(l.a)(/^(?:(\x2D?[0-9]{4,})\x2D([0-9]{2})\x2D([0-9]{2}))(?:T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\.([0-9]+))?)?(?:(Z)|(?:(\+|\x2D)([0-9]{2}):([0-9]{2})))?$/,{year:1,month:2,day:3,hours:4,minutes:5,seconds:6,ms:7,isUTC:8,offsetSign:9,offsetHours:10,offsetMinutes:11}),k=s.a.mark(T);function I(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r,n=I(e.children);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.localName in t){var i=t[a.localName];if("function"==typeof i){var o=i(a);o&&S(a,o)}else S(a,i)}}}catch(u){n.e(u)}finally{n.f()}}function T(e,t){var r,n,a,i;return s.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r=I(e.children),o.prev=1,r.s();case 3:if((n=r.n()).done){o.next=15;break}if(!((a=n.value).localName in t)){o.next=13;break}if("function"!=typeof(i=t[a.localName])){o.next=12;break}return o.next=10,i(a);case 10:o.next=13;break;case 12:return o.delegateYield(T(a,i),"t0",13);case 13:o.next=3;break;case 15:o.next=20;break;case 17:o.prev=17,o.t1=o.catch(1),r.e(o.t1);case 20:return o.prev=20,r.f(),o.finish(20);case 23:case"end":return o.stop()}}),k,null,[[1,17,20,23]])}var A=r("SPOG"),M=r("YHXj"),C=r("nd5+");function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var N="xlink:href",B="2.0.0",F="__esri_wfs_id__",L="wfs-layer:getWFSLayerTypeInfo-error",U="wfs-layer:empty-service",G="wfs-layer:feature-type-not-found",z="wfs-layer:malformed-json",V="wfs-layer:unknown-geometry-type",H="wfs-layer:unsupported-spatial-reference";function J(e,t){return W.apply(this,arguments)}function W(){return(W=Object(o.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=q,e.next=3,Object(c.default)(t,{responseType:"text",query:D({SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:B},null==r?void 0:r.customParameters),signal:null==r?void 0:r.signal});case 3:return e.t1=e.sent.data,n=(0,e.t0)(e.t1),e.abrupt("return",(K(t,n),n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){var t=ye(e);(function(e){var t=e.firstElementChild.getAttribute("version");if(t&&t!==B)throw new f.a("wfs-layer:unsupported-wfs-version","Unsupported WFS version ".concat(t,". Supported version: ").concat(B))})(t),be(t);var r=t.firstElementChild,n=new Map;return{operations:Y(r),get featureTypes(){return Array.from(X(r,n))},readFeatureTypes:function(){return X(r,n)}}}var Z=new Set(["json","application/json","geojson","application/json; subtype=geojson"]);function Y(e){var t=!1,r={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};if(S(e,{OperationsMetadata:{Operation:function(e){switch(e.getAttribute("name")){case"GetCapabilities":return{DCP:{HTTP:{Get:function(e){r.GetCapabilities.url=e.getAttribute(N)}}}};case"DescribeFeatureType":return{DCP:{HTTP:{Get:function(e){r.DescribeFeatureType.url=e.getAttribute(N)}}}};case"GetFeature":return{DCP:{HTTP:{Get:function(e){r.GetFeature.url=e.getAttribute(N)}}},Parameter:function(e){if("outputFormat"===e.getAttribute("name"))return{AllowedValues:{Value:function(e){var t=e.textContent;Z.has(t.toLowerCase())&&(r.GetFeature.outputFormat=t)}}}}}}},Constraint:function(e){switch(e.getAttribute("name")){case"KVPEncoding":return{DefaultValue:function(e){t="true"===e.textContent.toLowerCase()}};case"ImplementsResultPaging":return{DefaultValue:function(e){r.GetFeature.supportsPagination="true"===e.textContent.toLowerCase()}}}}}}),!t)throw new f.a("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(Object(y.h)(r.GetFeature.outputFormat))throw new f.a("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return r}function K(e,t){Object(b.v)(e)&&(Object(b.q)(e,t.operations.DescribeFeatureType.url,!0)&&(t.operations.DescribeFeatureType.url=Object(b.J)(t.operations.DescribeFeatureType.url)),Object(b.q)(e,t.operations.GetFeature.url,!0)&&(t.operations.GetFeature.url=Object(b.J)(t.operations.GetFeature.url)))}function X(e,t){return T(e,{FeatureTypeList:{FeatureType:function(e){var r;if(t.has(e))return t.get(e);var n={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},o=new Set([4326]),u=function(e){var t,r,n=parseInt(null==(t=e.textContent.match(Object(l.a)(/([0-9]+$)/i,{wkid:1})))||null==(r=t.groups)?void 0:r.wkid,10);Number.isNaN(n)||o.add(n)};return S(e,{Name:function(e){var t=ve(e.textContent),r=t.name,a=t.prefix;n.typeName="".concat(a,":").concat(r),n.name=r,n.namespacePrefix=a,n.namespaceUri=e.lookupNamespaceURI(a)},Abstract:function(e){n.description=e.textContent},Title:function(e){n.title=e.textContent},WGS84BoundingBox:function(e){n.extent=function(e){var t,r,n,i,o,u=E(e.children);try{for(u.s();!(o=u.n()).done;){var s=o.value;switch(s.localName){case"LowerCorner":var l=s.textContent.split(" ").map((function(e){return Number.parseFloat(e)})),c=Object(a.a)(l,2);t=c[0],r=c[1];break;case"UpperCorner":var f=s.textContent.split(" ").map((function(e){return Number.parseFloat(e)})),h=Object(a.a)(f,2);n=h[0],i=h[1]}}}catch(p){u.e(p)}finally{u.f()}return{xmin:t,ymin:r,xmax:n,ymax:i,spatialReference:g.a}}(e)},DefaultSRS:u,DefaultCRS:u,OtherSRS:u,OtherCRS:u}),n.title||(n.title=n.name),(r=n.supportedSpatialReferences).push.apply(r,Object(i.a)(o)),t.set(e,n),n}}})}function Q(e,t,r){return d(e,(function(e){return r?e.name===t&&e.namespaceUri===r:e.typeName===t||e.name===t}))}function $(e,t,r){return ee.apply(this,arguments)}function ee(){return(ee=Object(o.a)(s.a.mark((function e(t,r,n){var a,i,o,u,l,c,f,h,p,d,y,v=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=3,te(t,r,n,a);case 3:return o=e.sent,u=o.featureType,l=o.extent,e.next=8,ne(t,u.typeName,a);case 8:return c=e.sent,f=c.fields,h=c.geometryType,p=c.swapXY,d=c.objectIdField,y=c.geometryField,e.abrupt("return",{url:t.operations.GetCapabilities.url,name:u.name,namespaceUri:u.namespaceUri,fields:f,geometryField:y,geometryType:h,objectIdField:d,spatialReference:null!=(i=a.spatialReference)?i:M.a.WGS84,extent:l,swapXY:p,wfsCapabilities:t,customParameters:a.customParameters});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,r){return re.apply(this,arguments)}function re(){return(re=Object(o.a)(s.a.mark((function e(t,r,n){var a,i,o,u,l,c,h=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=h.length>3&&void 0!==h[3]?h[3]:{},i=a.spatialReference,o=void 0===i?M.a.WGS84:i,u=t.readFeatureTypes(),l=r?Q(u,r,n):u.next().value,!Object(y.h)(l)){e.next=4;break}throw r?new f.a(G,"The type '".concat(r,"' could not be found in the service")):new f.a(U,"The service is empty");case 4:if(c=new C.a(D(D({},l.extent),{},{spatialReference:o})),Object(g.c)(o,g.a)){e.next=15;break}return e.prev=6,e.next=9,Object(m.e)(g.a,o,void 0,a);case 9:c=Object(m.i)(c,g.a),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(6),new f.a(H,"Projection not supported");case 15:return e.abrupt("return",{extent:c,spatialReference:o,featureType:l});case 16:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}function ne(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(o.a)(s.a.mark((function e(t,r){var n,i,o,u,l,c,h,p,d,b,m=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.length>2&&void 0!==m[2]?m[2]:{},e.next=3,Object(v.j)([se(t.operations.DescribeFeatureType.url,r,n),oe(t,r,n)]);case 3:if(i=e.sent,o=Object(a.a)(i,2),u=o[0],l=o[1],!u.error&&!l.error){e.next=9;break}throw new f.a(L,"An error occurred while getting info about the feature type '".concat(r,"'"),{error:u.error||l.error});case 9:if(c=u.value,h=c.fields,p=c.errors,d=u.value.geometryType||l.value.geometryType,b=l.value.swapXY,!Object(y.h)(d)){e.next=12;break}throw new f.a(V,"The geometry type could not be determined for type '".concat(r),{typeName:r,geometryType:d,fields:h,errors:p});case 12:return e.abrupt("return",D(D({},ie(h)),{},{geometryType:d,swapXY:b}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){var t,r=e.find((function(e){return"geometry"===e.type})),n=e.find((function(e){return"oid"===e.type}));return e=e.filter((function(e){return"geometry"!==e.type})),n||(n=new A.a({name:F,type:"oid",alias:F}),e.unshift(n)),{geometryField:null!=(t=null==r?void 0:r.name)?t:null,objectIdField:n.name,fields:e}}function oe(e,t){return ue.apply(this,arguments)}function ue(){return(ue=Object(o.a)(s.a.mark((function e(t,r){var n,i,o,u,l,f,h,p,d,y,v,b,m,g,j=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.length>2&&void 0!==j[2]?j[2]:{},u=!1,e.next=4,Promise.all([he(t.operations.GetFeature.url,r,t.operations.GetFeature.outputFormat,D(D({},n),{},{count:1})),Object(c.default)(t.operations.GetFeature.url,{responseType:"text",query:de(r,void 0,D(D({},n),{},{count:1})),signal:null==n?void 0:n.signal})]);case 4:if(l=e.sent,f=Object(a.a)(l,2),h=f[0],p=f[1],!(d="FeatureCollection"===h.type&&(null==(i=h.features[0])?void 0:i.geometry))){e.next=22;break}e.t0=(o=O.a.fromJSON(Object(w.b)(d.type)),d.type),e.next="Point"===e.t0?13:"LineString"===e.t0||"MultiPoint"===e.t0?15:"MultiLineString"===e.t0||"Polygon"===e.t0?17:"MultiPolygon"===e.t0?19:20;break;case 13:return y=d.coordinates,e.abrupt("break",20);case 15:return y=d.coordinates[0],e.abrupt("break",20);case 17:return y=d.coordinates[0][0],e.abrupt("break",20);case 19:y=d.coordinates[0][0][0];case 20:(v=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(p.data))&&(b=y[0].toFixed(3),m=y[1].toFixed(3),g=parseFloat(v[1]).toFixed(3),b===parseFloat(v[2]).toFixed(3)&&m===g&&(u=!0));case 22:return e.abrupt("return",{geometryType:o,swapXY:u});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t,r){return le.apply(this,arguments)}function le(){return(le=Object(o.a)(s.a.mark((function e(t,r,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ce,e.t1=r,e.next=4,Object(c.default)(t,{responseType:"text",query:D({SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:B,TYPENAME:r},null==n?void 0:n.customParameters),signal:null==n?void 0:n.signal});case 4:return e.t2=e.sent.data,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t){var r=ve(e).name,n=ye(t);be(n);var a=d(T(n.firstElementChild,{element:function(e){return{name:e.getAttribute("name"),typeName:ve(e.getAttribute("type")).name}}}),(function(e){return e.name===r}));if(Object(y.i)(a)){var i=d(T(n.firstElementChild,{complexType:function(e){return e}}),(function(e){return e.getAttribute("name")===a.typeName}));if(Object(y.i)(i))return function(e){var t,r,n,a,i=[],o=[],u=E(T(e,{complexContent:{extension:{sequence:{element:function(e){return e}}}}}));try{for(u.s();!(a=u.n()).done;){var s=a.value,l=s.getAttribute("name");if(l){var c=void 0,h=void 0;if(s.hasAttribute("type")?c=ve(s.getAttribute("type")).name:S(s,{simpleType:{restriction:function(e){return c=ve(e.getAttribute("base")).name,{maxLength:function(e){h=+e.getAttribute("value")}}}}}),c){var p="true"===s.getAttribute("nillable"),d=!1;switch(c.toLowerCase()){case"integer":case"nonpositiveinteger":case"negativeinteger":case"long":case"int":case"short":case"byte":case"nonnegativeinteger":case"unsignedlong":case"unsignedint":case"unsignedshort":case"unsignedbyte":case"positiveinteger":o.push(new A.a({name:l,alias:l,type:"integer",nullable:p}));break;case"float":case"double":case"decimal":o.push(new A.a({name:l,alias:l,type:"double",nullable:p}));break;case"boolean":case"string":case"gyearmonth":case"gyear":case"gmonthday":case"gday":case"gmonth":case"anyuri":case"qname":case"notation":case"normalizedstring":case"token":case"language":case"idrefs":case"entities":case"nmtoken":case"nmtokens":case"name":case"ncname":case"id":case"idref":case"entity":case"duration":case"time":o.push(new A.a({name:l,alias:l,type:"string",nullable:p,length:null!=(t=h)?t:255}));break;case"datetime":case"date":o.push(new A.a({name:l,alias:l,type:"date",nullable:p,length:null!=(r=h)?r:36}));break;case"pointpropertytype":n="point",d=!0;break;case"multipointpropertytype":n="multipoint",d=!0;break;case"curvepropertytype":case"multicurvepropertytype":case"multilinestringpropertytype":n="polyline",d=!0;break;case"surfacepropertytype":case"multisurfacepropertytype":case"multipolygonpropertytype":n="polygon",d=!0;break;case"geometrypropertytype":case"multigeometrypropertytype":d=!0,i.push(new f.a(V,"geometry type '".concat(c,"' is not supported"),{type:(new XMLSerializer).serializeToString(e)}));break;default:i.push(new f.a("wfs-layer:unknown-field-type","Unknown field type '".concat(c,"'"),{type:(new XMLSerializer).serializeToString(e)}))}d&&o.push(new A.a({name:l,alias:l,type:"geometry",nullable:p}))}}}}catch(m){u.e(m)}finally{u.f()}for(var y=0,v=o;y<v.length;y++){var b=v[y];if("integer"===b.type&&!b.nullable&&fe.has(b.name.toLowerCase())){b.type="oid";break}}return{geometryType:n,fields:o,errors:i}}(i)}throw new f.a(G,"Type '".concat(e,"' not found in document"),{document:(new XMLSerializer).serializeToString(n)})}var fe=new Set(["objectid","fid"]);function he(e,t,r,n){return pe.apply(this,arguments)}function pe(){return(pe=Object(o.a)(s.a.mark((function e(t,r,n,a){var i,o,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.default)(t,{responseType:"text",query:de(r,n,a),signal:null==a?void 0:a.signal});case 2:if(i=e.sent,o=(o=i.data).replace(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3'),e.prev=5,null==a||null==(u=a.dateFields)||!u.length){e.next=9;break}return l=new Set(a.dateFields),e.abrupt("return",JSON.parse(o,(function(e,t){return l.has(e)?j(t):t})));case 9:return e.abrupt("return",JSON.parse(o));case 12:throw e.prev=12,e.t0=e.catch(5),new f.a(z,"Error while parsing the response",{response:o,error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}function de(e,t,r){return D({SERVICE:"WFS",REQUEST:"GetFeature",VERSION:B,TYPENAMES:e,OUTPUTFORMAT:t,SRSNAME:"EPSG:4326",STARTINDEX:null==r?void 0:r.startIndex,COUNT:null==r?void 0:r.count},null==r?void 0:r.customParameters)}function ye(e){return(new DOMParser).parseFromString(e.trim(),"text/xml")}function ve(e){var t=e.split(":"),r=Object(a.a)(t,2),n=r[0],i=r[1];return{prefix:i?n:"",name:null!=i?i:n}}function be(e){var t,r;if(S(e.firstElementChild,{Exception:function(e){return t=e.getAttribute("exceptionCode"),{ExceptionText:function(e){r=e.textContent}}}}),t)throw new f.a("wfs-layer:".concat(t),r)}},"8t8S":function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return y}));var n=r("aNYv"),a=r("7im+"),i=r("sE9J"),o=180/Math.PI,u=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0},s=new Map;function l(e,t){return s.get(e)/s.get(t)||1}function c(e){return(450-e)%360}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",r=Object(n.a)(e,2),a=r[0],i=r[1],u=Math.sqrt(a*a+i*i),s=Math.atan2(i,a)*o;return s=(360+s)%360,"geographic"===t&&(s=c(s)),[u,s]}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",r=e[1];"geographic"===t&&(r=c(r)),r%=360;var n=e[0];return[n*Math.cos(r/o),n*Math.sin(r/o)]}function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"geographic",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!u(e))return e;for(var o=e.pixels,s=e.width,l=e.height,c=s*l,p=o[0],d=o[1],y=i.a.createEmptyBand(e.pixelType,c),v=i.a.createEmptyBand(e.pixelType,c),b=0,m=0;m<l;m++)for(var g=0;g<s;g++){var O,w,j,x;"vector-uv"===t?(O=f([p[b],d[b]],r),w=Object(n.a)(O,2),y[b]=w[0],v[b]=w[1],y[b]*=a):(j=h([p[b],d[b]],r),x=Object(n.a)(j,2),y[b]=x[0],v[b]=x[1],y[b]*=a,v[b]*=a),b++}var k=new i.a({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[y,v]});return k.updateStatistics(),k}function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(1===r||!u(e))return e;for(var n=e.clone(),a=n.pixels,i=n.width,o=n.height,s=a[0],l=a[1],c=0,f=0;f<o;f++)for(var h=0;h<i;h++)"vector-uv"===t?(s[c]*=r,l[c]*=r):s[c]*=r,c++;return n.updateStatistics(),n}function y(e,t,r,n,i){if(!Object(a.i)(i)||!i.spatialReference.equals(e.spatialReference))return{extent:e,width:t,height:r,resolution:e.width/t};var o=i.xmin,u=i.ymax;n=Math.max(n||0,30);var s=Math.ceil(t*(1/n)),l=Math.ceil(r*(1/n)),c=((e.xmax-e.xmin)/s+(e.ymax-e.ymin)/l)/2;return e.xmin=o+Math.floor((e.xmin-o)/c)*c,e.xmax=o+Math.ceil((e.xmax-o)/c)*c,e.ymin=u+Math.floor((e.ymin-u)/c)*c,e.ymax=u+Math.ceil((e.ymax-u)/c)*c,{extent:e,width:Math.round(e.width/c),height:Math.round(e.height/c),resolution:c}}s.set("meter-per-second",1),s.set("kilometer-per-hour",.277778),s.set("knots",.514444),s.set("feet-per-second",.3048),s.set("mile-per-hour",.44704)},"9Emo":function(e,t,r){"use strict";function n(){return new Float32Array(3)}function a(e,t,r){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}function i(){return n()}function o(){return a(1,1,1)}function u(){return a(1,0,0)}function s(){return a(0,1,0)}function l(){return a(0,0,1)}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var c=i(),f=o(),h=u(),p=s(),d=l();Object.freeze({__proto__:null,create:n,clone:function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:a,createView:function(e,t){return new Float32Array(e,t,3)},zeros:i,ones:o,unitX:u,unitY:s,unitZ:l,ZEROS:c,ONES:f,UNIT_X:h,UNIT_Y:p,UNIT_Z:d})},"9wAn":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return l})),r.d(t,"h",(function(){return c}));var n=Number.POSITIVE_INFINITY,a=Math.PI,i=2*a,o=128/a,u=a/180,s=1/Math.LN2;function l(e,t){return(e%=t)>=0?e:e+t}function c(e){return l(e*o,256)}function f(e){return Math.log(e)*s}function h(e,t,r){return e*(1-r)+t*r}},A1aO:function(e,t,r){"use strict";r.r(t),r.d(t,"constructAssociationMetaDataFeatureSetFromUrl",(function(){return ve})),r.d(t,"constructFeatureSet",(function(){return de})),r.d(t,"constructFeatureSetFromPortalItem",(function(){return ke})),r.d(t,"constructFeatureSetFromRelationship",(function(){return be})),r.d(t,"constructFeatureSetFromUrl",(function(){return pe})),r.d(t,"createFeatureSetCollectionFromMap",(function(){return Oe})),r.d(t,"createFeatureSetCollectionFromService",(function(){return we})),r.d(t,"getPortal",(function(){return je})),r.d(t,"initialiseMetaDataCache",(function(){return fe})),r.d(t,"lookupUser",(function(){return xe}));var n=r("mK0O"),a=r("hisu"),i=r("yBJb"),o=r("CHlC"),u=r("kMo5"),s=r("P+uj"),l=r("g+AA"),c=r("DGz/"),f=r("b8W3"),h=r("6SOj"),p=r("4VMI"),d=r("u6Q5"),y=r("O3Ru"),v=r("dg0F"),b=r("cWe4"),m=r("nBXx"),g=r("Raue"),O=r("omx3"),w=r("x/s0"),j=r("K+fz"),x=r("xnqp");var k=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"clone",value:function(){var t=new e;return t.field=this.field,t.tofieldname=this.tofieldname,t.typeofstat=this.typeofstat,t.workingexpr=this.workingexpr,t}},{key:"toStatisticsName",value:function(){switch(this.typeofstat.toUpperCase()){case"MIN":return"min";case"MAX":return"max";case"SUM":return"sum";case"COUNT":return"count";case"VAR":return"var";case"STDDEV":return"stddev";case"AVG":return"avg";default:return"count"}}}],[{key:"parseStatField",value:function(t,r,n){var a=new e;a.field=t;var i=x.WhereClause.create(r,n),o=function(e){if("function"===e.parseTree.type){if(0===e.parseTree.args.value.length)return{name:e.parseTree.name,expr:null};if(e.parseTree.args.value.length>1)throw new Error("Statistic does not have 1 or 0 Parameters");var t=x.WhereClause.create(Object(w.j)(e.parseTree.args.value[0],O.a.Standardised,e.parameters),e.fieldsIndex);return{name:e.parseTree.name,expr:t}}return null}(i);if(null===o)throw new Error("Invalid Statistic Function");var u=o.name.toUpperCase().trim();if("MIN"===u){if(a.typeofstat="MIN",a.workingexpr=o.expr,null===i)throw new Error("Invalid Statistic Function Parameters")}else if("MAX"===u){if(a.typeofstat="MAX",a.workingexpr=o.expr,null===i)throw new Error("Invalid Statistic Function Parameters")}else if("COUNT"===u)a.typeofstat="COUNT",a.workingexpr=o.expr;else if("STDEV"===u){if(a.typeofstat="STDDEV",a.workingexpr=o.expr,null===i)throw new Error("Invalid Statistic Function Parameters")}else if("SUM"===u){if(a.typeofstat="SUM",a.workingexpr=o.expr,null===i)throw new Error("Invalid Statistic Function Parameters")}else if("MEAN"===u){if(a.typeofstat="AVG",a.workingexpr=o.expr,null===i)throw new Error("Invalid Statistic Function Parameters")}else if("AVG"===u){if(a.typeofstat="AVG",a.workingexpr=o.expr,null===i)throw new Error("Invalid Statistic Function Parameters")}else{if("VAR"!==u)throw new Error("Invalid Statistic Function");if(a.typeofstat="VAR",a.workingexpr=o.expr,null===i)throw new Error("Invalid Statistic Function Parameters")}return a}}]),e}(),I=r("pcZT"),_=r("IH5m"),S=r("YHXj"),T=r("SPOG"),A=r("nyn0");function M(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}function D(e){if(!e)return"COUNT";switch(e.toLowerCase()){case"max":return"MAX";case"var":case"variance":return"VAR";case"avg":case"average":case"mean":return"AVG";case"min":return"MIN";case"sum":return"SUM";case"stdev":case"stddev":return"STDDEV";case"count":return"COUNT"}return"COUNT"}var E=function(e){Object(o.a)(r,e);var t=P(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e))._decodedStatsfield=[],n._decodedGroupbyfield=[],n._candosimplegroupby=!0,n.phsyicalgroupbyfields=[],n.objectIdField="ROW__ID",n._internalObjectIdField="ROW__ID",n._adaptedFields=[],n.declaredClass="esri.arcade.featureset.actions.Aggregate",n._uniqueIds=1,n._maxQuery=10,n._maxProcessing=10,n._parent=e.parentfeatureset,n._config=e,n}return Object(i.a)(r,[{key:"isTable",value:function(){return!0}},{key:"_getSet",value:function(e){var t=this;return null===this._wset?this._getFilteredSet("",null,null,null,e).then((function(e){return t._wset=e,t._wset})):Object(_.t)(this._wset)}},{key:"_isInFeatureSet",value:function(){return O.b.InFeatureSet}},{key:"nextUniqueName",value:function(e){for(;1===e["T"+this._uniqueIds.toString()];)this._uniqueIds++;var t="T"+this._uniqueIds.toString();return e[t]=1,t}},{key:"convertToEsriFieldType",value:function(e){return e}},{key:"_initialiseFeatureSet",value:function(){var e={},t=!1,r=1,n=this._parent?this._parent.getFieldsIndex():new A.a([]);for(this.objectIdField="ROW__ID",this.globalIdField="";!1===t;){for(var a=!1,i=0;i<this._config.groupbyfields.length;i++)if(this._config.groupbyfields[i].name.toLowerCase()===this.objectIdField.toLowerCase()){a=!0;break}if(!1===a)for(var o=0;o<this._config.statsfields.length;o++)if(this._config.statsfields[o].name.toLowerCase()===this.objectIdField.toLowerCase()){a=!0;break}!1===a?t=!0:(this.objectIdField="ROW__ID"+r.toString(),r++)}var u,s=M(this._config.statsfields);try{for(s.s();!(u=s.n()).done;){var l=u.value,c=new k;c.field=l.name,c.tofieldname=l.name,c.workingexpr=l.expression instanceof x.WhereClause?l.expression:x.WhereClause.create(l.expression,n),c.typeofstat=D(l.statistic),this._decodedStatsfield.push(c)}}catch(z){s.e(z)}finally{s.f()}this._decodedGroupbyfield=[];var f,h=M(this._config.groupbyfields);try{for(h.s();!(f=h.n()).done;){var p=f.value,d={name:p.name,singlefield:null,tofieldname:p.name,expression:p.expression instanceof x.WhereClause?p.expression:x.WhereClause.create(p.expression,n)};this._decodedGroupbyfield.push(d)}}catch(z){h.e(z)}finally{h.f()}if(null!==this._parent){this.geometryType=this._parent.geometryType,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField="";var v,b=M(this._parent.fields);try{for(b.s();!(v=b.n()).done;){e[v.value.name.toUpperCase()]=1}}catch(z){b.e(z)}finally{b.f()}this.types=null}else this.geometryType=O.m.point,this.typeIdField="",this.types=null,this.spatialReference=new S.a({wkid:4326});this.fields=[];var m=new k;m.field=this.nextUniqueName(e),m.tofieldname=this.objectIdField,m.workingexpr=x.WhereClause.create(this._parent.objectIdField,this._parent.getFieldsIndex()),m.typeofstat="MIN",this._decodedStatsfield.push(m);var g,j=M(this._decodedGroupbyfield);try{for(j.s();!(g=j.n()).done;){var I=g.value,_=new T.a;if(I.name=this.nextUniqueName(e),_.name=I.tofieldname,_.alias=_.name,Object(w.c)(I.expression)){var C=this._parent.getField(Object(w.i)(I.expression,O.a.Standardised));if(!C)throw new Error("Field is not present for Aggregation");I.name=C.name,I.singlefield=C.name,this.phsyicalgroupbyfields.push(C.name),_.type=C.type}else{_.type=this.convertToEsriFieldType(Object(w.f)(I.expression,this._parent.fields));var P=new T.a;P.name=I.name,P.alias=P.name,this.phsyicalgroupbyfields.push(I.name),this._adaptedFields.push(new y.d(P,I.expression)),this._candosimplegroupby=!1}this.fields.push(_)}}catch(z){j.e(z)}finally{j.f()}if(this._adaptedFields.length>0){var E,R=M(this._parent.fields);try{for(R.s();!(E=R.n()).done;){var N=E.value;this._adaptedFields.push(new y.c(N))}}catch(z){R.e(z)}finally{R.f()}}for(var B=0;B<this._decodedStatsfield.length;B++){var F=new T.a,L=null,U=this._decodedStatsfield[B];U.field=this.nextUniqueName(e),U.tofieldname===this.objectIdField&&(this._internalObjectIdField=U.field),F.name=U.tofieldname,F.alias=F.name;var G=null!==U.workingexpr&&Object(w.c)(U.workingexpr)?Object(w.i)(U.workingexpr,O.a.Standardised):"";switch(this._decodedStatsfield[B].typeofstat){case"SUM":if(""!==G){if(!(L=this._parent.getField(G)))throw new Error("Field is not present for Aggregation");F.type=L.type}else F.type="double";break;case"MIN":case"MAX":if(""!==G){if(!(L=this._parent.getField(G)))throw new Error("Field is not present for Aggregation");F.type=L.type}else F.type="double";break;case"COUNT":F.type="integer";break;case"STDDEV":case"VAR":case"AVG":if(""!==G&&!(L=this._parent.getField(G)))throw new Error("Field is not present for Aggregation");F.type="double"}this.fields.push(F)}}},{key:"_canDoAggregates",value:function(){return Object(_.t)(!1)}},{key:"_getFeatures",value:function(e,t,r,n){var a=this;-1!==t&&this._featureCache[t];var i=this._maxQuery;return!0===this._checkIfNeedToExpandKnownPage(e,i)?this._expandPagedSet(e,i,0,0,n).then((function(){return a._getFeatures(e,t,r,n)})):Object(_.t)("success")}},{key:"_getFilteredSet",value:function(e,t,r,n,a){var i=this;if(""!==e)return Object(_.t)(new m.a([],[],!0,null));var o=null,u={ordered:!1,nowhereclause:!1};return this._ensureLoaded().then((function(){if(null!==r)for(var e=0;e<i._decodedStatsfield.length;e++)if(!0===Object(w.h)(r,i._decodedStatsfield[e].tofieldname)){u.nowhereclause=!0,r=null;break}if(null!==n){u.ordered=!0;for(var t=0;t<i._decodedStatsfield.length;t++)if(!0===n.scanForField(i._decodedStatsfield[t].tofieldname)){n=null,u.ordered=!1;break}if(null!==n){var a,o=M(i._decodedGroupbyfield);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(null===s.singlefield&&!0===n.scanForField(s.tofieldname)){n=null,u.ordered=!1;break}}}catch(l){o.e(l)}finally{o.f()}}}return!1===i._candosimplegroupby?Object(_.t)(!1):i._parent._canDoAggregates(i.phsyicalgroupbyfields,i._decodedStatsfield,"",null,null)})).then((function(e){if(e){var t=null;r&&(t=i._reformulateWhereClauseWithoutGroupByFields(r));var s=null;return n&&(s=i._reformulateOrderClauseWithoutGroupByFields(n)),i._parent._getAggregatePagesDataSourceDefinition(i.phsyicalgroupbyfields,i._decodedStatsfield,"",null,t,s,i._internalObjectIdField).then((function(e){return i._checkCancelled(a),o=!0===u.nowhereclause?new m.a(e._candidates.slice(0).concat(e._known.slice(0)),[],!0===u.ordered&&e._ordered,i._clonePageDefinition(e.pagesDefinition)):new m.a(e._candidates.slice(0),e._known.slice(0),!0===u.ordered&&e._ordered,i._clonePageDefinition(e.pagesDefinition))}))}var l=i._parent;if(i._adaptedFields.length>0&&(l=new y.a({parentfeatureset:i._parent,adaptedFields:i._adaptedFields,extraFilter:null})),!0===u.nowhereclause)o=new m.a(["GETPAGES"],[],!1,{aggregatefeaturesetpagedefinition:!0,resultOffset:0,resultRecordCount:i._maxQuery,internal:{fullyResolved:!1,workingItem:null,type:"manual",iterator:null,set:[],subfeatureset:new v.a({parentfeatureset:l,orderbyclause:new g.a(i.phsyicalgroupbyfields.join(",")+","+i._parent.objectIdField+" ASC")})}});else{var c=l;if(null!==r){var f=null;r&&(f=i._reformulateWhereClauseWithoutGroupByFields(r)),c=new h.a({parentfeatureset:c,whereclause:f})}o=new m.a(["GETPAGES"],[],!1,{aggregatefeaturesetpagedefinition:!0,resultOffset:0,resultRecordCount:i._maxQuery,internal:{fullyResolved:!1,workingItem:null,type:"manual",iterator:null,set:[],subfeatureset:new v.a({parentfeatureset:c,orderbyclause:new g.a(i.phsyicalgroupbyfields.join(",")+","+i._parent.objectIdField+" ASC")})}})}return o}))}},{key:"_reformulateWhereClauseWithoutStatsFields",value:function(e){var t,r=M(this._decodedStatsfield);try{for(r.s();!(t=r.n()).done;){var n=t.value;e=Object(w.g)(e,n.tofieldname,Object(w.i)(n.workingexpr,O.a.Standardised),this._parent.getFieldsIndex())}}catch(a){r.e(a)}finally{r.f()}return e}},{key:"_reformulateWhereClauseWithoutGroupByFields",value:function(e){var t,r=M(this._decodedGroupbyfield);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.tofieldname!==n.name&&(e=Object(w.g)(e,n.tofieldname,Object(w.i)(n.expression,O.a.Standardised),this._parent.getFieldsIndex()))}}catch(a){r.e(a)}finally{r.f()}return e}},{key:"_reformulateOrderClauseWithoutGroupByFields",value:function(e){var t,r=[],n=M(this._decodedGroupbyfield);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.tofieldname!==a.name&&r.push({field:a.tofieldname,newfield:a.name})}}catch(i){n.e(i)}finally{n.f()}return r.length>0?e.replaceFields(r):e}},{key:"_clonePageDefinition",value:function(e){return null===e?null:!0===e.aggregatefeaturesetpagedefinition?{aggregatefeaturesetpagedefinition:!0,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,internal:e.internal}:this._parent._clonePageDefinition(e)}},{key:"_refineSetBlock",value:function(e,t,r){var n=this;try{if(!0===this._checkIfNeedToExpandCandidatePage(e,this._maxQuery))return this._expandPagedSet(e,this._maxQuery,0,0,r).then((function(){return n._refineSetBlock(e,t,r)}));this._checkCancelled(r);e._candidates.length;return this._refineKnowns(e,t),e._candidates.length,e._candidates.length,Object(_.t)(e)}catch(a){return Object(_.s)(a)}}},{key:"_expandPagedSet",value:function(e,t,r,n,a){return this._expandPagedSetFeatureSet(e,t,r,n,a)}},{key:"_getPhysicalPage",value:function(e,t,r){var n=this;return!0===e.pagesDefinition.aggregatefeaturesetpagedefinition?Object(_.c)((function(t,a){n._sequentialGetPhysicalItem(e,e.pagesDefinition.resultRecordCount,r,[]).then((function(e){t(e)}),a)})):this._getAgregagtePhysicalPage(e,t,r).then((function(e){var t,r=M(e);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o={geometry:i.geometry,attributes:{}},u=M(n._decodedGroupbyfield);try{for(u.s();!(a=u.n()).done;){var s=a.value;o.attributes[s.tofieldname]=i.attributes[s.name]}}catch(h){u.e(h)}finally{u.f()}var l,c=M(n._decodedStatsfield);try{for(c.s();!(l=c.n()).done;){var f=l.value;o.attributes[f.tofieldname]=i.attributes[f.field]}}catch(h){c.e(h)}finally{c.f()}n._featureCache[o.attributes[n.objectIdField]]=new p.a(o)}}catch(h){r.e(h)}finally{r.f()}return e.length}))}},{key:"_sequentialGetPhysicalItem",value:function(e,t,r,n){var a=this;return Object(_.c)((function(i,o){null===e.pagesDefinition.internal.iterator&&(e.pagesDefinition.internal.iterator=e.pagesDefinition.internal.subfeatureset.iterator(r)),!0===e.pagesDefinition.internal.fullyResolved||0===t?i(n.length):a._nextAggregateItem(e,t,r,n,(function(o){null===o?i(n.length):(t-=1,i(a._sequentialGetPhysicalItem(e,t,r,n)))}),o)}))}},{key:"_nextAggregateItem",value:function(e,t,r,n,a,i){var o=this;try{Object(d.q)(e.pagesDefinition.internal.iterator.next()).then((function(u){if(null===u)if(null!==e.pagesDefinition.internal.workingItem){var s=o._calculateAndAppendAggregateItem(e.pagesDefinition.internal.workingItem);n.push(s),e.pagesDefinition.internal.workingItem=null,e.pagesDefinition.internal.set.push(s.attributes[o.objectIdField]),e.pagesDefinition.internal.fullyResolved=!0,a(null)}else e.pagesDefinition.internal.fullyResolved=!0,a(null);else{var l=o._generateAggregateHash(u);if(null===e.pagesDefinition.internal.workingItem)e.pagesDefinition.internal.workingItem={features:[u],id:l};else{if(l!==e.pagesDefinition.internal.workingItem.id){var c=o._calculateAndAppendAggregateItem(e.pagesDefinition.internal.workingItem);return n.push(c),e.pagesDefinition.internal.workingItem=null,e.pagesDefinition.internal.set.push(c.attributes[o.objectIdField]),t-=1,e.pagesDefinition.internal.workingItem={features:[u],id:l},void a(c)}e.pagesDefinition.internal.workingItem.features.push(u)}o._nextAggregateItem(e,t,r,n,a,i)}}),i)}catch(u){i(u)}}},{key:"_calculateFieldStat",value:function(e,t,r){for(var n=[],a=0;a<e.features.length;a++)if(null!==t.workingexpr){var i=t.workingexpr.calculateValue(e.features[a]);null!==i&&n.push(i)}else n.push(null);switch(t.typeofstat){case"MIN":r.attributes[t.tofieldname]=Object(j.a)("min",n,-1);break;case"MAX":r.attributes[t.tofieldname]=Object(j.a)("max",n,-1);break;case"SUM":r.attributes[t.tofieldname]=Object(j.a)("sum",n,-1);break;case"COUNT":r.attributes[t.tofieldname]=n.length;break;case"VAR":r.attributes[t.tofieldname]=Object(j.a)("var",n,-1);break;case"STDDEV":r.attributes[t.tofieldname]=Object(j.a)("stddev",n,-1);break;case"AVG":r.attributes[t.tofieldname]=Object(j.a)("avg",n,-1)}return!0}},{key:"_calculateAndAppendAggregateItem",value:function(e){var t,r={attributes:{},geometry:null},n=M(this._decodedGroupbyfield);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.singlefield?e.features[0].attributes[a.singlefield]:a.expression.calculateValue(e.features[0]);r.attributes[a.tofieldname]=i}}catch(f){n.e(f)}finally{n.f()}var o,u=M(this._decodedStatsfield);try{for(u.s();!(o=u.n()).done;){var s=o.value;this._calculateFieldStat(e,s,r)}}catch(f){u.e(f)}finally{u.f()}for(var l=[],c=0;c<this._decodedStatsfield.length;c++)l.push(this._calculateFieldStat(e,this._decodedStatsfield[c],r));return this._featureCache[r.attributes[this.objectIdField]]=new p.a({attributes:r.attributes,geometry:r.geometry}),r}},{key:"_generateAggregateHash",value:function(e){var t,r="",n=M(this._decodedGroupbyfield);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.singlefield?e.attributes[a.singlefield]:a.expression.calculateValue(e);r+=null==i?":":":"+i.toString()}}catch(o){n.e(o)}finally{n.f()}return Object(I.a)(r,I.b.String)}},{key:"_stat",value:function(){return Object(_.t)({calculated:!1})}},{key:"getFeatureByObjectId",value:function(){return Object(_.t)(null)}}],[{key:"registerAction",value:function(){b.a._featuresetFunctions.groupby=function(e,t){return new r({parentfeatureset:this,groupbyfields:e,statsfields:t})}}}]),r}(b.a),R=r("Nt9s"),N=r("ZWCB"),B=r("+7Wu"),F=r("aic5"),L=r("EOOn"),U=r("4WE2"),G=r("NJ4k"),z=r("kJId"),V=r("hdDo"),H=r("u0xB"),J=r("sVZi"),W=r("KbHJ");function q(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var K=function(e){Object(o.a)(r,e);var t=Y(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).declaredClass="esri.arcade.featureset.sources.FeatureLayerDynamic",n._removeGeometry=!1,n._overrideFields=null,n.formulaCredential=null,n._pageJustIds=!1,n._requestStandardised=!1,e.spatialReference&&(n.spatialReference=e.spatialReference),n._transparent=!0,n._maxProcessing=1e3,n._layer=e.layer,n._wset=null,void 0!==e.outFields&&(n._overrideFields=e.outFields),void 0!==e.includeGeometry&&(n._removeGeometry=!1===e.includeGeometry),n}return Object(i.a)(r,[{key:"_maxQueryRate",value:function(){return O.f}},{key:"end",value:function(){return this._layer}},{key:"optimisePagingFeatureQueries",value:function(e){this._pageJustIds=e}},{key:"convertQueryToLruCacheKey",value:function(e){var t=Object(O.q)(e.toJSON());return Object(I.a)(t,I.b.String)}},{key:"load",value:function(){var e=this;return null===this._loadPromise&&(this._loadPromise=Object(_.c)((function(t,r){try{if(!0===e._layer.loaded)return e._initialiseFeatureSet(),void t(e);e._layer.when().then((function(){try{e._initialiseFeatureSet(),t(e)}catch(n){r(n)}}),r),e._layer.load()}catch(n){r(n)}}))),this._loadPromise}},{key:"_initialiseFeatureSet",value:function(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this._layer.geometryType,this.fields=this._layer.fields.slice(0),this._layer.outFields)if(1===this._layer.outFields.length&&"*"===this._layer.outFields[0]);else{var e,t=[],r=q(this.fields);try{for(r.s();!(e=r.n()).done;){var n=e.value;if("oid"===n.type)t.push(n);else{var a,i=q(this._layer.outFields);try{for(i.s();!(a=i.n()).done;){if(a.value.toLowerCase()===n.name.toLowerCase()){t.push(n);break}}}catch(b){i.e(b)}finally{i.f()}}}}catch(b){r.e(b)}finally{r.f()}this.fields=t}if(null!==this._overrideFields)if(1===this._overrideFields.length&&"*"===this._overrideFields[0])this._overrideFields=null;else{var o,u=[],s=[],l=q(this.fields);try{for(l.s();!(o=l.n()).done;){var c=o.value;if("oid"===c.type)u.push(c),s.push(c.name);else{var f,h=q(this._overrideFields);try{for(h.s();!(f=h.n()).done;){if(f.value.toLowerCase()===c.name.toLowerCase()){u.push(c),s.push(c.name);break}}}catch(b){h.e(b)}finally{h.f()}}}}catch(b){l.e(b)}finally{l.f()}this.fields=u,this._overrideFields=s}if(this._layer.source&&this._layer.source.sourceJSON){var p=this._layer.source.sourceJSON.currentVersion;!0===this._layer.source.sourceJSON.useStandardizedQueries?(this._databaseType=O.a.StandardisedNoInterval,null!=p&&p>=10.61&&(this._databaseType=O.a.Standardised)):null!=p&&(p>=10.5&&(this._databaseType=O.a.StandardisedNoInterval,this._requestStandardised=!0),p>=10.61&&(this._databaseType=O.a.Standardised))}this.objectIdField=this._layer.objectIdField;var d,y=q(this.fields);try{for(y.s();!(d=y.n()).done;){var v=d.value;"global-id"===v.type&&(this.globalIdField=v.name)}}catch(b){y.e(b)}finally{y.f()}this.hasM=this._layer.supportsM,this.hasZ=this._layer.supportsZ,this.typeIdField=this._layer.typeIdField,this.types=this._layer.types}},{key:"_isInFeatureSet",value:function(){return O.b.InFeatureSet}},{key:"_refineSetBlock",value:function(e){return Object(_.t)(e)}},{key:"_candidateIdTransform",value:function(e){return e}},{key:"_getSet",value:function(e){var t=this;return null===this._wset?this._ensureLoaded().then((function(){return t._getFilteredSet("",null,null,null,e)})).then((function(e){return t._wset=e,e})):Object(_.t)(this._wset)}},{key:"_runDatabaseProbe",value:function(e){var t=this;return Object(_.c)((function(r,n){try{t._ensureLoaded().then((function(){try{var a=new V.a;a.where=e.replace("OBJECTID",t._layer.objectIdField),t._layer.queryObjectIds(a).then((function(){r(!0)}),(function(){try{r(!1)}catch(e){n(e)}}))}catch(i){n(i)}}))}catch(a){n(a)}}))}},{key:"_canUsePagination",value:function(){return!(!this._layer.capabilities||!this._layer.capabilities.query||!0!==this._layer.capabilities.query.supportsPagination)}},{key:"_cacheableFeatureSetSourceKey",value:function(){return this._layer.url}},{key:"pbfSupportedForQuery",value:function(e){return!e.outStatistics&&this._layer&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsFormatPBF&&!0===this._layer.capabilities.query.supportsQuantizationEditMode}},{key:"queryPBF",value:function(e){return e.quantizationParameters={mode:"edit"},Object(W.executeQueryPBF)(this._layer.parsedUrl,e,new G.b({})).then((function(e){return z.default.fromJSON(Object(U.j)(e.data)).unquantize()}))}},{key:"gdbVersion",get:function(){return this._layer&&this._layer.capabilities&&this._layer.capabilities.data&&this._layer.capabilities.data.isVersioned?this._layer.gdbVersion?this._layer.gdbVersion:"SDE.DEFAULT":""}},{key:"nativeCapabilities",value:function(){return{title:this._layer.title,source:this,canQueryRelated:!0,capabilities:this._layer.capabilities,databaseType:this._databaseType,requestStandardised:this._requestStandardised}}},{key:"executeQuery",value:function(e,t){var r=this,n=new J.a({url:this._layer.parsedUrl.path}),a="execute"===t&&this.pbfSupportedForQuery(e),i=null;if(this.recentlyUsedQueries){var o=this.convertQueryToLruCacheKey(e);null===(i=this.recentlyUsedQueries.getFromCache(o))&&(i=!0!==a?n[t](e):this.queryPBF(e),this.recentlyUsedQueries.addToCache(o,i),i=i.catch((function(e){throw r.recentlyUsedQueries.removeFromCache(o),e})))}return this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:e,method:t}),null===i&&(i=!0!==a?n[t](e):this.queryPBF(e)),i}},{key:"_getFilteredSet",value:function(e,t,r,n,a){var i=this;return this.databaseType().then((function(o){if(i.isTable()&&t&&null!==e&&""!==e)return new m.a([],[],!0,null);if(i._canUsePagination())return i._getFilteredSetUsingPaging(e,t,r,n,a);var u="",s=!1;null!==n&&i._layer.capabilities&&i._layer.capabilities.query&&!0===i._layer.capabilities.query.supportsOrderBy&&(u=n.constructClause(),s=!0);var l=new V.a;return l.where=null===r?null===t?"1=1":"":Object(w.i)(r,o),i._requestStandardised&&(l.sqlFormat="standard"),l.spatialRelationship=i._makeRelationshipEnum(e),l.outSpatialReference=i.spatialReference,l.orderByFields=""!==u?u.split(","):null,l.geometry=null===t?null:t,l.relationParameter=i._makeRelationshipParam(e),i.executeQuery(l,"executeForIds").then((function(e){return null===e&&(e=[]),i._checkCancelled(a),new m.a([],e,s,null)}))}))}},{key:"_expandPagedSet",value:function(e,t,r,n,a){return this._expandPagedSetFeatureSet(e,t,r,n,a)}},{key:"_getFilteredSetUsingPaging",value:function(e,t,r,n,a){var i=this;try{var o="",u=!1;return null!==n&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(o=n.constructClause(),u=!0),this.databaseType().then((function(n){var s=null===r?null===t?"1=1":"":Object(w.i)(r,n);i._layer.definitionExpression&&(s=""!==s?"(("+i._layer.definitionExpression+") AND ("+s+"))":i._layer.definitionExpression);var l=i._maxQueryRate(),c=i._layer.capabilities.query.maxRecordCount;void 0!==c&&c<l&&(l=c);var f=null;if(!0===i._pageJustIds)f=new m.a([],["GETPAGES"],u,{spatialRel:i._makeRelationshipEnum(e),relationParam:i._makeRelationshipParam(e),outFields:i._layer.objectIdField,resultRecordCount:l,resultOffset:0,geometry:null===t?null:t,where:s,orderByFields:o,returnGeometry:!1,returnIdsOnly:"false",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}});else{var h=!0;!0===i._removeGeometry&&(h=!1);var p=null!==i._overrideFields?i._overrideFields:i._fieldsIncludingObjectId(i._layer.outFields?i._layer.outFields:["*"]);f=new m.a([],["GETPAGES"],u,{spatialRel:i._makeRelationshipEnum(e),relationParam:i._makeRelationshipParam(e),outFields:p.join(","),resultRecordCount:l,resultOffset:0,geometry:null===t?null:t,where:s,orderByFields:o,returnGeometry:h,returnIdsOnly:"false",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}return i._expandPagedSet(f,l,0,1,a).then((function(){return f}))}))}catch(s){return Object(_.s)(s)}}},{key:"_clonePageDefinition",value:function(e){return null===e?null:!0!==e.groupbypage?{groupbypage:!1,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}:{groupbypage:!0,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,useOIDpagination:e.useOIDpagination,generatedOid:e.generatedOid,groupByFieldsForStatistics:e.groupByFieldsForStatistics,resultOffset:e.resultOffset,outStatistics:e.outStatistics,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}}},{key:"_getPhysicalPage",value:function(e,t,r){var n=this;try{var a=e.pagesDefinition.internal.lastRetrieved,i=a,o=e.pagesDefinition.internal.lastPage,u=new V.a;return this._requestStandardised&&(u.sqlFormat="standard"),u.spatialRelationship=e.pagesDefinition.spatialRel,u.relationParameter=e.pagesDefinition.relationParam,u.outFields=e.pagesDefinition.outFields.split(","),u.num=e.pagesDefinition.resultRecordCount,u.start=e.pagesDefinition.internal.lastPage,u.geometry=e.pagesDefinition.geometry,u.where=e.pagesDefinition.where,u.orderByFields=""!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(","):null,u.returnGeometry=e.pagesDefinition.returnGeometry,u.outSpatialReference=this.spatialReference,this.executeQuery(u,"execute").then((function(t){if(n._checkCancelled(r),e.pagesDefinition.internal.lastPage!==o)return"done";for(var u=0;u<t.features.length;u++)e.pagesDefinition.internal.set[i+u]=t.features[u].attributes[n._layer.objectIdField];if(!1===n._pageJustIds)for(var s=0;s<t.features.length;s++)n._featureCache[t.features[s].attributes[n._layer.objectIdField]]=t.features[s];return(void 0===t.exceededTransferLimit&&t.features.length!==e.pagesDefinition.resultRecordCount||!1===t.exceededTransferLimit)&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=a+t.features.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,"done"}))}catch(s){return Object(_.s)(s)}}},{key:"_fieldsIncludingObjectId",value:function(e){if(null===e)return[this.objectIdField];var t=e.slice(0);if(t.indexOf("*")>-1)return t;var r,n=!1,a=q(t);try{for(a.s();!(r=a.n()).done;){if(r.value.toUpperCase()===this.objectIdField.toUpperCase()){n=!0;break}}}catch(i){a.e(i)}finally{a.f()}return!1===n&&t.push(this.objectIdField),t}},{key:"_getFeatures",value:function(e,t,r,n){var a=this,i=[];try{if(-1!==t&&void 0===this._featureCache[t]&&i.push(t),!0===this._checkIfNeedToExpandKnownPage(e,this._maxProcessingRate()))return this._expandPagedSet(e,this._maxProcessingRate(),0,0,n).then((function(){return a._getFeatures(e,t,r,n)}));for(var o=0,u=e._lastFetchedIndex;u<e._known.length;u++){if(e._lastFetchedIndex+=1,o++,void 0===this._featureCache[e._known[u]]){var s=!1;if(null!==this._layer._mode&&void 0!==this._layer._mode){var l=this._layer._mode;if(void 0!==l._featureMap[e._known[u]]){var c=l._featureMap[e._known[u]];null!==c&&(s=!0,this._featureCache[e._known[u]]=c)}}if(!1===s&&(e._known[u]!==t&&i.push(e._known[u]),i.length>=this._maxProcessingRate()-1))break}if(o>=r&&0===i.length)break}if(0===i.length)return Object(_.t)("success");try{var f=new V.a;return this._requestStandardised&&(f.sqlFormat="standard"),f.objectIds=i,f.outFields=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._layer.outFields?this._layer.outFields:["*"]),f.returnGeometry=!0,!0===this._removeGeometry&&(f.returnGeometry=!1),f.outSpatialReference=this.spatialReference,this.executeQuery(f,"execute").then((function(e){if(a._checkCancelled(n),void 0!==e.error)return Object(_.s)(new Error(e.error));for(var t=0;t<e.features.length;t++)a._featureCache[e.features[t].attributes[a._layer.objectIdField]]=e.features[t];return"success"}))}catch(h){return Object(_.s)(h)}}catch(h){return Object(_.s)(h)}}},{key:"_getDistinctPages",value:function(e,t,r,n,a,i,o,u,s){var l=this;return this._ensureLoaded().then((function(){return l.databaseType()})).then((function(c){for(var f=r.parseTree.column,h=0;h<l._layer.fields.length;h++)if(l._layer.fields[h].name.toLowerCase()===f.toLowerCase()){f=l._layer.fields[h].name;break}var p=new V.a;l._requestStandardised&&(p.sqlFormat="standard");var d=null===i?null===a?"1=1":"":Object(w.i)(i,c);return l._layer.definitionExpression&&(d=""!==d?"(("+l._layer.definitionExpression+") AND ("+d+"))":l._layer.definitionExpression),p.where=d,p.spatialRelationship=l._makeRelationshipEnum(n),p.relationParameter=l._makeRelationshipParam(n),p.geometry=null===a?null:a,p.returnDistinctValues=!0,p.returnGeometry=!1,p.outFields=[f],l.executeQuery(p,"execute").then((function(c){if(l._checkCancelled(s),!c.hasOwnProperty("features"))return Object(_.s)(new Error("Unnexected Result querying statistics from layer"));for(var h=!1,p=0;p<l._layer.fields.length;p++)if(l._layer.fields[p].name===f){"date"===l._layer.fields[p].type&&(h=!0);break}for(var d=0;d<c.features.length;d++){if(h){var y=c.features[d].attributes[f];null!==y?u.push(new Date(y)):u.push(y)}else u.push(c.features[d].attributes[f]);if(u.length>=o)break}return 0===c.features.length?u:c.features.length===l._layer.capabilities.query.maxRecordCount&&u.length<o?l._getDistinctPages(e+c.features.length,t,r,n,a,i,o,u,s).then((function(e){return{calculated:!0,result:e}})):u}))}))}},{key:"_distinctStat",value:function(e,t,r,n,a,i,o){return this._getDistinctPages(0,e,t,r,n,a,i,[],o).then((function(e){return{calculated:!0,result:e}}))}},{key:"isTable",value:function(){return this._layer.isTable||null===this._layer.geometryType||"table"===this._layer.type||""===this._layer.geometryType}},{key:"_countstat",value:function(e,t,r,n){var a=this;return this.databaseType().then((function(e){var i=new V.a;if(a._requestStandardised&&(i.sqlFormat="standard"),a.isTable()&&r&&null!==t&&""!==t)return{calculated:!0,result:0};var o=null===n?null===r?"1=1":"":Object(w.i)(n,e);return a._layer.definitionExpression&&(o=""!==o?"(("+a._layer.definitionExpression+") AND ("+o+"))":a._layer.definitionExpression),i.where=o,i.where=o,i.spatialRelationship=a._makeRelationshipEnum(t),i.relationParameter=a._makeRelationshipParam(t),i.geometry=null===r?null:r,i.returnGeometry=!1,a.executeQuery(i,"executeForCount").then((function(e){return{calculated:!0,result:e}}))}))}},{key:"_stats",value:function(e,t,r,n,a,i,o){var u=this;return this._ensureLoaded().then((function(){var s=u._layer.capabilities&&u._layer.capabilities.query&&!0===u._layer.capabilities.query.supportsSqlExpression,l=u._layer.capabilities&&u._layer.capabilities.query&&!0===u._layer.capabilities.query.supportsStatistics,c=u._layer.capabilities&&u._layer.capabilities.query&&!0===u._layer.capabilities.query.supportsDistinct;return"count"===e?c?u._countstat(e,r,n,a):{calculated:!1}:!1===l||!1===Object(w.c)(t)&&!1===s||!1===t.isStandardized?""!==r||null!==a?{calculated:!1}:u._manualStat(e,t,i,o):"distinct"===e?!1===c?""!==r||null!==a?{calculated:!1}:u._manualStat(e,t,i,o):u._distinctStat(e,t,r,n,a,i,o):u.databaseType().then((function(i){if(u.isTable()&&n&&null!==r&&""!==r)return{calculated:!0,result:null};var o=new V.a;u._requestStandardised&&(o.sqlFormat="standard");var s=null===a?null===n?"1=1":"":Object(w.i)(a,i);u._layer.definitionExpression&&(s=""!==s?"(("+u._layer.definitionExpression+") AND ("+s+"))":u._layer.definitionExpression),o.where=s,o.spatialRelationship=u._makeRelationshipEnum(r),o.relationParameter=u._makeRelationshipParam(r),o.geometry=null===n?null:n;var l=new H.a;l.statisticType=Object(j.c)(e),l.onStatisticField=Object(w.i)(t,i),l.outStatisticFieldName="ARCADE_STAT_RESULT",o.returnGeometry=!1;var c="ARCADE_STAT_RESULT";return o.outStatistics=[l],u.executeQuery(o,"execute").then((function(e){if(!e.hasOwnProperty("features")||0===e.features.length)return Object(_.s)(new Error("Unnexected Result querying statistics from layer"));for(var t=!1,r=0;r<e.fields.length;r++)if("ARCADE_STAT_RESULT"===e.fields[r].name.toUpperCase()){c=e.fields[r].name,"date"===e.fields[r].type&&(t=!0);break}if(t){var n=e.features[0].attributes[c];return null!==n&&(n=new Date(e.features[0].attributes[c])),{calculated:!0,result:n}}return{calculated:!0,result:e.features[0].attributes[c]}}))}))}))}},{key:"_stat",value:function(e,t,r,n,a,i,o){return this._stats(e,t,r,n,a,i,o)}},{key:"_canDoAggregates",value:function(e,t){var r=this;return this._ensureLoaded().then((function(){var e=!1,n=r._layer.capabilities&&r._layer.capabilities.query&&!0===r._layer.capabilities.query.supportsSqlExpression;if(void 0!==r._layer.capabilities&&null!==r._layer.capabilities.query&&!0===r._layer.capabilities.query.supportsStatistics&&!0===r._layer.capabilities.query.supportsOrderBy&&(e=!0),e)for(var a=0;a<t.length-1;a++)null!==t[a].workingexpr&&(!1===t[a].workingexpr.isStandardized||!1===Object(w.c)(t[a].workingexpr)&&!1===n)&&(e=!1);return!1!==e}))}},{key:"_makeRelationshipEnum",value:function(e){if(e.indexOf("esriSpatialRelRelation")>=0)return"relation";switch(e){case"esriSpatialRelRelation":return"relation";case"esriSpatialRelIntersects":return"intersects";case"esriSpatialRelContains":return"contains";case"esriSpatialRelOverlaps":return"overlaps";case"esriSpatialRelWithin":return"within";case"esriSpatialRelTouches":return"touches";case"esriSpatialRelCrosses":return"crosses";case"esriSpatialRelEnvelopeIntersects":return"envelope-intersects"}return e}},{key:"_makeRelationshipParam",value:function(e){return e.indexOf("esriSpatialRelRelation")>=0?e.split(":")[1]:""}},{key:"_getAggregatePagesDataSourceDefinition",value:function(e,t,r,n,a,i,o){var u=this;return this._ensureLoaded().then((function(){return u.databaseType()})).then((function(s){var l="",c=!1,f=!1;null!==i&&u._layer.capabilities&&u._layer.capabilities.query&&!0===u._layer.capabilities.query.supportsOrderBy&&(l=i.constructClause(),f=!0),u._layer.capabilities&&u._layer.capabilities.query&&!1===u._layer.capabilities.query.supportsPagination&&(f=!1,c=!0,l=u._layer.objectIdField);for(var h=[],p=0;p<t.length;p++){var d=new H.a;d.onStatisticField=null!==t[p].workingexpr?Object(w.i)(t[p].workingexpr,s):"",d.outStatisticFieldName=t[p].field,d.statisticType=t[p].toStatisticsName(),h.push(d)}""===l&&(l=e.join(","));var y=u._maxQueryRate(),v=u._layer.capabilities.query.maxRecordCount;void 0!==v&&v<y&&(y=v);var b=null===a?null===n?"1=1":"":Object(w.i)(a,s);return u._layer.definitionExpression&&(b=""!==b?"(("+u._layer.definitionExpression+") AND ("+b+"))":u._layer.definitionExpression),new m.a([],["GETPAGES"],f,{groupbypage:!0,spatialRel:u._makeRelationshipEnum(r),relationParam:u._makeRelationshipParam(r),outFields:["*"],useOIDpagination:c,generatedOid:o,resultRecordCount:y,resultOffset:0,groupByFieldsForStatistics:e,outStatistics:h,geometry:null===n?null:n,where:b,orderByFields:l,returnGeometry:!1,returnIdsOnly:!1,internal:{lastMaxId:-1,set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}))}},{key:"_getAgregagtePhysicalPage",value:function(e,t,r){var n=this;try{var a=e.pagesDefinition.where;!0===e.pagesDefinition.useOIDpagination&&(a=""!==a?"("+a+") AND ("+e.pagesDefinition.generatedOid+">"+e.pagesDefinition.internal.lastMaxId.toString()+")":e.pagesDefinition.generatedOid+">"+e.pagesDefinition.internal.lastMaxId.toString());var i=e.pagesDefinition.internal.lastRetrieved,o=i,u=e.pagesDefinition.internal.lastPage,s=new V.a;return this._requestStandardised&&(s.sqlFormat="standard"),s.where=a,s.spatialRelationship=e.pagesDefinition.spatialRel,s.relationParameter=e.pagesDefinition.relationParam,s.outFields=e.pagesDefinition.outFields,s.outStatistics=e.pagesDefinition.outStatistics,s.geometry=e.pagesDefinition.geometry,s.groupByFieldsForStatistics=e.pagesDefinition.groupByFieldsForStatistics,s.num=e.pagesDefinition.resultRecordCount,s.start=e.pagesDefinition.internal.lastPage,s.returnGeometry=e.pagesDefinition.returnGeometry,s.orderByFields=""!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(","):null,this.isTable()&&s.geometry&&s.spatialRelationship?Object(_.t)([]):this.executeQuery(s,"execute").then((function(t){if(n._checkCancelled(r),!t.hasOwnProperty("features"))return Object(_.s)(new Error("Unnexected Result querying aggregates from layer"));var a=[];if(e.pagesDefinition.internal.lastPage!==u)return[];for(var s=0;s<t.features.length;s++)e.pagesDefinition.internal.set[o+s]=t.features[s].attributes[e.pagesDefinition.generatedOid];for(var l=0;l<t.features.length;l++)a.push(new p.a({attributes:t.features[l].attributes,geometry:null}));return!0===e.pagesDefinition.useOIDpagination?0===t.features.length?e.pagesDefinition.internal.fullyResolved=!0:e.pagesDefinition.internal.lastMaxId=t.features[t.features.length-1].attributes[e.pagesDefinition.generatedOid]:(void 0===t.exceededTransferLimit&&t.features.length!==e.pagesDefinition.resultRecordCount||!1===t.exceededTransferLimit)&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=i+t.features.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,a}))}catch(l){return Object(_.s)(l)}}},{key:"relationshipMetaData",value:function(){return this._layer&&this._layer.source&&this._layer.source.sourceJSON&&this._layer.source.sourceJSON.relationships?this._layer.source.sourceJSON.relationships:[]}},{key:"serviceUrl",value:function(){return Object(O.i)(this._layer.parsedUrl.path)}},{key:"queryAttachments",value:function(e,t,r,n){var a=this;if(this._layer.capabilities.data.supportsAttachment&&this._layer.capabilities.operations.supportsQueryAttachments){var i={objectIds:[e]};return(t&&t>0||r&&r>0)&&(i.size=[t&&t>0?t:0,r&&r>0?r:t+1]),n&&n.length>0&&(i.attachmentTypes=n),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:i,method:"attachments"}),this._layer.queryAttachments(i).then((function(t){var r=[];return t&&t[e]&&t[e].forEach((function(t){var n=a._layer.parsedUrl.path+"/"+e.toString()+"/attachments/"+t.id.toString();r.push(new B.a(t.id,t.name,t.contentType,t.size,n))})),r}))}return Object(_.t)([])}},{key:"queryRelatedFeatures",value:function(e){var t={f:"json",relationshipId:e.relationshipId.toString(),definitionExpression:e.where,outFields:e.outFields.join(","),returnGeometry:e.returnGeometry.toString()};return void 0!==e.resultOffset&&null!==e.resultOffset&&(t.resultOffset=e.resultOffset.toString()),void 0!==e.resultRecordCount&&null!==e.resultRecordCount&&(t.resultRecordCount=e.resultRecordCount.toString()),e.orderByFields&&(t.orderByFields=e.orderByFields.join(",")),e.objectIds.length>0&&(t.objectIds=e.objectIds.join(",")),e.outSpatialReference&&(t.outSR=JSON.stringify(e.outSpatialReference.toJSON())),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preRequestCallback({layer:this._layer,queryPayload:t,method:"relatedrecords",url:this._layer.parsedUrl.path+"/queryRelatedRecords"}),Object(c.default)(this._layer.parsedUrl.path+"/queryRelatedRecords",{responseType:"json",query:t}).then((function(e){if(e.data){var t={},r=e.data;if(r&&r.relatedRecordGroups){var n,a=r.spatialReference,i=q(r.relatedRecordGroups);try{for(i.s();!(n=i.n()).done;){var o,u=n.value,s=u.objectId,l=[],c=q(u.relatedRecords);try{for(c.s();!(o=c.n()).done;){var f=o.value;f.geometry&&(f.geometry.spatialReference=a);var h=new p.a({geometry:f.geometry?Object(F.a)(f.geometry):null,attributes:f.attributes});l.push(h)}}catch(d){c.e(d)}finally{c.f()}t[s]={features:l,exceededTransferLimit:!0===r.exceededTransferLimit}}}catch(d){i.e(d)}finally{i.f()}}return t}return Object(_.s)("Invalid Request")}))}},{key:"getFeatureByObjectId",value:function(e,t){var r=new J.a({url:this._layer.parsedUrl.path}),n=new V.a;return n.outFields=t,n.returnGeometry=!1,n.outSpatialReference=this.spatialReference,n.where=this.objectIdField+"="+e.toString(),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:n,method:"execute"}),r.execute(n).then((function(e){return 1===e.features.length?e.features[0]:null}))}},{key:"getIdentityUser",value:function(){var e=this;return this.load().then((function(){var t,r=null==(t=l.b)?void 0:t.findCredential(e._layer.url);return r?r.userId:null}))}},{key:"getOwningSystemUrl",value:function(){var e=this;return this.load().then((function(){var t,r=null==(t=l.b)?void 0:t.findServerInfo(e._layer.url);if(r)return Object(_.t)(r.owningSystemUrl);var n=e._layer.url,a=n.toLowerCase().indexOf("/rest/services");return(n=a>-1?n.substring(0,a):n)?(n+="/rest/info",Object(_.c)((function(e,t){Object(c.default)(n,{query:{f:"json"}}).then((function(t){var r="";t.data&&t.data.owningSystemUrl&&(r=t.data.owningSystemUrl),e(r)}),(function(t){e("")}))}))):Object(_.t)("")}))}}],[{key:"create",value:function(e,t,n,a,i){return new r({layer:new L.default({url:e,outFields:null===t?["*"]:t}),spatialReference:n,lrucache:a,interceptor:i})}}]),r}(b.a),X=r("YNd3"),Q=r("ax7y");function $(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var re=function(e){Object(o.a)(r,e);var t=te(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).declaredClass="esri.arcade.featureset.sources.FeatureLayerRelated",n._findObjectId=-1,n._requestStandardised=!1,n._removeGeometry=!1,n._overrideFields=null,n.featureObjectId=null,n.relatedLayer=null,n.relationship=null,e.spatialReference&&(n.spatialReference=e.spatialReference),n._transparent=!0,n._maxProcessing=1e3,n._layer=e.layer,n._wset=null,n._findObjectId=e.objectId,n.featureObjectId=e.objectId,n.relationship=e.relationship,n.relatedLayer=e.relatedLayer,void 0!==e.outFields&&(n._overrideFields=e.outFields),void 0!==e.includeGeometry&&(n._removeGeometry=!1===e.includeGeometry),n}return Object(i.a)(r,[{key:"_maxQueryRate",value:function(){return O.f}},{key:"end",value:function(){return this._layer}},{key:"optimisePagingFeatureQueries",value:function(){}},{key:"load",value:function(){var e=this;return null===this._loadPromise&&(this._loadPromise=Object(_.c)((function(t,r){Object(_.b)([e._layer.load(),e.relatedLayer.load()]).then((function(){e._initialiseFeatureSet(),t(e)}),r)}))),this._loadPromise}},{key:"nativeCapabilities",value:function(){return this.relatedLayer.nativeCapabilities()}},{key:"_initialiseFeatureSet",value:function(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this.relatedLayer.geometryType,this.fields=this.relatedLayer.fields.slice(0),null!==this._overrideFields)if(1===this._overrideFields.length&&"*"===this._overrideFields[0])this._overrideFields=null;else{var e,t=[],r=[],n=$(this.fields);try{for(n.s();!(e=n.n()).done;){var a=e.value;if("oid"===a.type)t.push(a),r.push(a.name);else{var i,o=$(this._overrideFields);try{for(o.s();!(i=o.n()).done;){if(i.value.toLowerCase()===a.name.toLowerCase()){t.push(a),r.push(a.name);break}}}catch(s){o.e(s)}finally{o.f()}}}}catch(s){n.e(s)}finally{n.f()}this.fields=t,this._overrideFields=r}var u=this._layer.nativeCapabilities();u&&(this._databaseType=u.databaseType,this._requestStandardised=u.requestStandardised),this.objectIdField=this.relatedLayer.objectIdField,this.globalIdField=this.relatedLayer.globalIdField,this.hasM=this.relatedLayer.supportsM,this.hasZ=this.relatedLayer.supportsZ,this.typeIdField=this.relatedLayer.typeIdField,this.types=this.relatedLayer.types}},{key:"databaseType",value:function(){var e=this;return this.relatedLayer.databaseType().then((function(){return e._databaseType=e.relatedLayer._databaseType,e._databaseType}))}},{key:"isTable",value:function(){return this.relatedLayer.isTable()}},{key:"_isInFeatureSet",value:function(){return O.b.InFeatureSet}},{key:"_candidateIdTransform",value:function(e){return e}},{key:"_getSet",value:function(e){var t=this;return null===this._wset?this._ensureLoaded().then((function(){return t._getFilteredSet("",null,null,null,e)})).then((function(e){return t._wset=e,e})):Object(_.t)(this._wset)}},{key:"_changeFeature",value:function(e){var t,r={},n=$(this.fields);try{for(n.s();!(t=n.n()).done;){var a=t.value;r[a.name]=e.attributes[a.name]}}catch(i){n.e(i)}finally{n.f()}return new p.a({geometry:!0===this._removeGeometry?null:e.geometry,attributes:r})}},{key:"_getFilteredSet",value:function(e,t,r,n,a){var i=this;return this.databaseType().then((function(){if(i.isTable()&&t&&null!==e&&""!==e)return new m.a([],[],!0,null);var o=i._layer.nativeCapabilities();if(!1===o.canQueryRelated)return new m.a([],[],!0,null);if(o.capabilities.queryRelated&&o.capabilities.queryRelated.supportsPagination)return i._getFilteredSetUsingPaging(e,t,r,n,a);var u="",s=!1;null!==n&&o.capabilities&&o.capabilities.queryRelated&&!0===o.capabilities.queryRelated.supportsOrderBy&&(u=n.constructClause(),s=!0);var l=new Q.a;l.objectIds=[i._findObjectId];var c=null!==i._overrideFields?i._overrideFields:i._fieldsIncludingObjectId(i.relatedLayer.fields?i.relatedLayer.fields.map((function(e){return e.name})):["*"]);l.outFields=c,l.relationshipId=i.relationship.id,l.where="1=1";var f=!0;return!0===i._removeGeometry&&(f=!1),l.returnGeometry=f,i._requestStandardised&&(l.sqlFormat="standard"),l.outSpatialReference=i.spatialReference,l.orderByFields=""!==u?u.split(","):null,o.source.queryRelatedFeatures(l).then((function(n){i._checkCancelled(a);for(var o=n[i._findObjectId]?n[i._findObjectId].features:[],u=[],l=0;l<o.length;l++)i._featureCache[o[l].attributes[i._layer.objectIdField]]=o[l],u.push(o[l].attributes[i._layer.objectIdField]);var c=t&&null!==e&&""!==e,f=null!=r;return new m.a(c||f?u:[],c||f?[]:u,s,null)}))}))}},{key:"_fieldsIncludingObjectId",value:function(e){if(null===e)return[this.objectIdField];var t=e.slice(0);if(t.indexOf("*")>-1)return t;var r,n=!1,a=$(t);try{for(a.s();!(r=a.n()).done;){if(r.value.toUpperCase()===this.objectIdField.toUpperCase()){n=!0;break}}}catch(i){a.e(i)}finally{a.f()}return!1===n&&t.push(this.objectIdField),t}},{key:"_getFilteredSetUsingPaging",value:function(e,t,r,n,a){var i=this;try{var o="",u=!1,s=this._layer.nativeCapabilities();return null!==n&&s&&s.capabilities.queryRelated&&!0===s.capabilities.queryRelated.supportsOrderBy&&(o=n.constructClause(),u=!0),this.databaseType().then((function(){var n=i._maxQueryRate(),l=s.capabilities.query.maxRecordCount;void 0!==l&&l<n&&(n=l);var c,f=t&&null!==e&&""!==e,h=null!=r,p=!0;!0===i._removeGeometry&&(p=!1);var d=null!==i._overrideFields?i._overrideFields:i._fieldsIncludingObjectId(i.relatedLayer.fields?i.relatedLayer.fields.map((function(e){return e.name})):["*"]);return c=new m.a(f||h?["GETPAGES"]:[],f||h?[]:["GETPAGES"],u,{outFields:d.join(","),resultRecordCount:n,resultOffset:0,objectIds:[i._findObjectId],where:"1=1",orderByFields:o,returnGeometry:p,returnIdsOnly:"false",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}}),i._expandPagedSet(c,n,0,0,a).then((function(){return c}))}))}catch(l){return Object(_.s)(l)}}},{key:"_expandPagedSet",value:function(e,t,r,n,a){return this._expandPagedSetFeatureSet(e,t,r,n,a)}},{key:"_clonePageDefinition",value:function(e){return null===e?null:!0!==e.groupbypage?{groupbypage:!1,outFields:e.outFields,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,where:e.where,objectIds:e.objectIds,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}:{groupbypage:!0,outFields:e.outFields,resultRecordCount:e.resultRecordCount,useOIDpagination:e.useOIDpagination,generatedOid:e.generatedOid,groupByFieldsForStatistics:e.groupByFieldsForStatistics,resultOffset:e.resultOffset,outStatistics:e.outStatistics,geometry:e.geometry,where:e.where,objectIds:e.objectIds,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}}},{key:"_getPhysicalPage",value:function(e,t,r){var n=this;try{var a=e.pagesDefinition.internal.lastRetrieved,i=a,o=e.pagesDefinition.internal.lastPage,u=this._layer.nativeCapabilities(),s=new Q.a;return!0===this._requestStandardised&&(s.sqlFormat="standard"),s.relationshipId=this.relationship.id,s.objectIds=e.pagesDefinition.objectIds,s.resultOffset=e.pagesDefinition.internal.lastPage,s.resultRecordCount=e.pagesDefinition.resultRecordCount,s.outFields=e.pagesDefinition.outFields.split(","),s.where=e.pagesDefinition.where,s.orderByFields=""!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(","):null,s.returnGeometry=e.pagesDefinition.returnGeometry,s.outSpatialReference=this.spatialReference,u.source.queryRelatedFeatures(s).then((function(t){if(n._checkCancelled(r),e.pagesDefinition.internal.lastPage!==o)return 0;for(var u=t[n._findObjectId]?t[n._findObjectId].features:[],s=0;s<u.length;s++)e.pagesDefinition.internal.set[i+s]=u[s].attributes[n._layer.objectIdField];for(var l=0;l<u.length;l++)n._featureCache[u[l].attributes[n._layer.objectIdField]]=u[l];var c=!t[n._findObjectId]||!1===t[n._findObjectId].exceededTransferLimit;return u.length!==e.pagesDefinition.resultRecordCount&&c&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=a+u.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,u.length}))}catch(l){return Object(_.s)(l)}}},{key:"_getFeatures",value:function(e,t,r,n){var a=this,i=[];-1!==t&&void 0===this._featureCache[t]&&i.push(t);var o=this._maxQueryRate();if(!0===this._checkIfNeedToExpandKnownPage(e,o))return this._expandPagedSet(e,o,0,0,n).then((function(){return a._getFeatures(e,t,r,n)}));for(var u=0,s=e._lastFetchedIndex;s<e._known.length&&(++u<=r&&(e._lastFetchedIndex+=1),!("GETPAGES"!==e._known[s]&&void 0===this._featureCache[e._known[s]]&&(e._known[s]!==t&&i.push(e._known[s]),i.length>r)))&&!(u>=r&&0===i.length);s++);return 0===i.length?Object(_.t)("success"):Object(_.s)(new Error("Unaccounted for Features. Not in Feature Collection"))}},{key:"_refineSetBlock",value:function(e,t,r){return Object(_.t)(e)}},{key:"_stat",value:function(e,t,r,n,a,i,o){return Object(_.t)({calculated:!1})}},{key:"gdbVersion",get:function(){return this.relatedLayer.gdbVersion}},{key:"_canDoAggregates",value:function(e,t,r,n,a){return Object(_.t)(!1)}},{key:"relationshipMetaData",value:function(){return this.relatedLayer.relationshipMetaData()}},{key:"serviceUrl",value:function(){return this.relatedLayer.serviceUrl()}},{key:"queryAttachments",value:function(e,t,r,n){return this.relatedLayer.queryAttachments(e,t,r,n)}},{key:"getFeatureByObjectId",value:function(e,t){return this.relatedLayer.getFeatureByObjectId(e,t)}},{key:"getOwningSystemUrl",value:function(){return this.relatedLayer.getOwningSystemUrl()}},{key:"getIdentityUser",value:function(){return this.relatedLayer.getIdentityUser()}}]),r}(b.a),ne=r("JUpu"),ae=r("eoZi"),ie=r("OYdn");function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}function le(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fe(){null===ne.a.applicationCache&&(ne.a.applicationCache=new ne.a)}function he(e,t){if(ne.a.applicationCache){var r=ne.a.applicationCache.getLayerInfo(e);if(r)return r.then((function(r){return Object(_.t)(new L.default({url:e,outFields:t,sourceJSON:r}))}));var n=new L.default({url:e,outFields:t}),a=Object(_.c)((function(e,t){n.load().then((function(){e(n.sourceJSON)}),(function(e){t(e)}))}));return ne.a.applicationCache&&(ne.a.applicationCache.setLayerInfo(e,a),a=a.catch((function(t){throw ne.a.applicationCache.clearLayerInfo(e),t}))),a.then((function(){return Object(_.t)(n)}))}return Object(_.t)(new L.default({url:e,outFields:t}))}function pe(e,t,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return he(e,["*"]).then((function(e){return Object(_.t)(de(e,t,r,n,a,i))}))}function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return!0===e._hasMemorySource()?new X.a({layer:e,spatialReference:t,outFields:r,includeGeometry:n,lrucache:a,interceptor:i}):new K({layer:e,spatialReference:t,outFields:r,includeGeometry:n,lrucache:a,interceptor:i})}function ye(e){if(null!==ne.a.applicationCache){var t=ne.a.applicationCache.getLayerInfo(e);if(null!==t)return t}var r=Object(c.default)(e,{responseType:"json",query:{f:"json"}}).then((function(e){if(e.data){var t=e.data;return t.layers||(t.layers=[]),t.tables||(t.tables=[]),Object(_.t)(t)}return Object(_.t)({layers:[],tables:[]})}));return null!==ne.a.applicationCache&&(ne.a.applicationCache.setLayerInfo(e,r),r=r.catch((function(t){throw ne.a.applicationCache.clearLayerInfo(e),t}))),r}function ve(e,t){var r={metadata:null,networkId:-1,unVersion:3,terminals:[],queryelem:null,layerNameLkp:{},lkp:null};return ye(e).then((function(n){if(r.metadata=n,n.controllerDatasetLayers&&void 0!==n.controllerDatasetLayers.utilityNetworkLayerId&&null!==n.controllerDatasetLayers.utilityNetworkLayerId){if(n.layers){var a,i=le(n.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.layerNameLkp[o.id]=o.name}}catch(h){i.e(h)}finally{i.f()}}if(n.tables){var u,s=le(n.tables);try{for(s.s();!(u=s.n()).done;){var l=u.value;r.layerNameLkp[l.id]=l.name}}catch(h){s.e(h)}finally{s.f()}}var f=n.controllerDatasetLayers.utilityNetworkLayerId;return r.networkId=f,function(e,t){var r="QUERYDATAELEMTS:"+t.toString()+":"+e;if(null!==ne.a.applicationCache){var n=ne.a.applicationCache.getLayerInfo(r);if(null!==n)return n}var a=Object(c.default)(e+"/queryDataElements",{method:"post",responseType:"json",query:{layers:JSON.stringify([t.toString()]),f:"json"}}).then((function(e){if(e.data){var t=e.data;if(t.layerDataElements&&t.layerDataElements[0])return t.layerDataElements[0]}throw new Error("Not Found")}));return null!==ne.a.applicationCache&&(ne.a.applicationCache.setLayerInfo(r,a),a=a.catch((function(e){throw ne.a.applicationCache.clearLayerInfo(r),e}))),a}(e,f).then((function(n){if(n){r.queryelem=n,r.queryelem&&r.queryelem.dataElement&&void 0!==r.queryelem.dataElement.schemaGeneration&&(r.unVersion=r.queryelem.dataElement.schemaGeneration),r.lkp={},r.queryelem.dataElement.domainNetworks||(r.queryelem.dataElement.domainNetworks=[]);var a,i=le(r.queryelem.dataElement.domainNetworks);try{for(i.s();!(a=i.n()).done;){var o,u=a.value,s=le(u.edgeSources?u.edgeSources:[]);try{for(s.s();!(o=s.n()).done;){var l=o.value,p={layerId:l.layerId,sourceId:l.sourceId,className:r.layerNameLkp[l.layerId]?r.layerNameLkp[l.layerId]:null};p.className&&(r.lkp[p.className]=p)}}catch(h){s.e(h)}finally{s.f()}var d,y=le(u.junctionSources?u.junctionSources:[]);try{for(y.s();!(d=y.n()).done;){var v=d.value,b={layerId:v.layerId,sourceId:v.sourceId,className:r.layerNameLkp[v.layerId]?r.layerNameLkp[v.layerId]:null};b.className&&(r.lkp[b.className]=b)}}catch(h){y.e(h)}finally{y.f()}}}catch(h){i.e(h)}finally{i.f()}if(r.queryelem.dataElement.terminalConfigurations){var m,g=le(r.queryelem.dataElement.terminalConfigurations);try{for(g.s();!(m=g.n()).done;){var O,w=le(m.value.terminals);try{for(w.s();!(O=w.n()).done;){var j=O.value;r.terminals.push({terminalId:j.terminalId,terminalName:j.terminalName})}}catch(h){w.e(h)}finally{w.f()}}}catch(h){g.e(h)}finally{g.f()}}return function(e){if(null!==ne.a.applicationCache){var t=ne.a.applicationCache.getLayerInfo(e);if(null!==t)return t}var r=Object(c.default)(e,{responseType:"json",query:{f:"json"}}).then((function(e){if(e.data){var t=e.data;return Object(_.t)(t)}return Object(_.t)(null)}));return null!==ne.a.applicationCache&&(ne.a.applicationCache.setLayerInfo(e,r),r=r.catch((function(t){throw ne.a.applicationCache.clearLayerInfo(e),t}))),r}(e+"/"+f).then((function(n){if(n.systemLayers&&void 0!==n.systemLayers.associationsTableId&&null!==n.systemLayers.associationsTableId){var a=[];return r.unVersion>=4&&(a.push("STATUS"),a.push("PERCENTALONG")),pe(e+"/"+n.systemLayers.associationsTableId.toString(),t,["OBJECTID","FROMNETWORKSOURCEID","TONETWORKSOURCEID","FROMGLOBALID","TOGLOBALID","TOTERMINALID","FROMTERMINALID","ASSOCIATIONTYPE","ISCONTENTVISIBLE","GLOBALID"].concat(a),!1,null,null).then((function(e){return e.load()})).then((function(e){return r.unVersion>=4?(e=e.filter(x.WhereClause.create("STATUS NOT IN (1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 36, 37, 38, 39, 41, 42, 43, 44, 45, 46, 47, 49, 50, 51, 52, 53, 54, 55, 57, 58, 59, 60, 61, 62,63)",e.getFieldsIndex()))).load():e})).then((function(e){return{lkp:r.lkp,associations:e,unVersion:r.unVersion,terminals:r.terminals}}))}return{associations:null,unVersion:r.unVersion,lkp:null,terminals:[]}}))}return{associations:null,unVersion:r.unVersion,lkp:null,terminals:[]}}))}return{associations:null,unVersion:r.unVersion,lkp:null,terminals:[]}}))}function be(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,s=e.serviceUrl();return s?pe(s="/"===s.charAt(s.length-1)?s+t.relatedTableId.toString():s+"/"+t.relatedTableId.toString(),n,a,i,o,u).then((function(s){return new re({layer:e,relatedLayer:s,relationship:t,objectId:r,spatialReference:n,outFields:a,includeGeometry:i,lrucache:o,interceptor:u})})):null}h.a.registerAction(),E.registerAction(),v.a.registerAction(),R.a.registerAction(),N.a.registerAction();var me=function(e){Object(o.a)(r,e);var t=se(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(a.a)(this,r),(n=t.call(this))._map=e,n._overridespref=i,n.lrucache=o,n.interceptor=u,n._instantLayers=[],n}return Object(i.a)(r,[{key:"makeAndAddFeatureSet",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=de(e,this._overridespref,null===r?["*"]:r,t,this.lrucache,this.interceptor);return this._instantLayers.push({featureset:n,opitem:e,includeGeometry:t,outFields:JSON.stringify(r)}),n}},{key:"featureSetByName",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return this._map.load().then((function(){try{return t.featureSetByName(e,r,n)}catch(a){return Object(_.s)(a)}}));null===n&&(n=["*"]),n=(n=n.slice(0)).sort();for(var a=JSON.stringify(n),i=0;i<this._instantLayers.length;i++){var o=this._instantLayers[i];if(o.opitem.title===e&&o.includeGeometry===r&&o.outFields===a)return this.resolvePromise(this._instantLayers[i].featureset)}var u=this._map.layers.find((function(t){return t instanceof L.default&&t.title===e}));if(u)return this.resolvePromise(this.makeAndAddFeatureSet(u,r,n));if(this._map.tables){var s=this._map.tables.find((function(t){return!!(t.title&&t.title===e||t.title&&t.title===e)}));if(s){if(s instanceof L.default)return this.resolvePromise(this.makeAndAddFeatureSet(s,r,n));if(s._materializedTable);else{var l=s.outFields?s:ue(ue({},s),{},{outFields:["*"]});s._materializedTable=new L.default(l)}return s._materializedTable.load().then((function(){return t.resolvePromise(t.makeAndAddFeatureSet(s._materializedTable,r,n))}))}}return this.resolvePromise(null)}},{key:"featureSetById",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return this._map.load().then((function(){try{return t.featureSetById(e,r,n)}catch(a){return Object(_.s)(a)}}));null===n&&(n=["*"]),n=(n=n.slice(0)).sort();for(var a=JSON.stringify(n),i=0;i<this._instantLayers.length;i++){var o=this._instantLayers[i];if(o.opitem.id===e&&o.includeGeometry===r&&o.outFields===a)return this.resolvePromise(this._instantLayers[i].featureset)}var u=this._map.layers.find((function(t){return t instanceof L.default&&t.id===e}));if(u)return this.resolvePromise(this.makeAndAddFeatureSet(u,r,n));if(this._map.tables){var s=this._map.tables.find((function(t){return t.id===e}));if(s){if(s instanceof L.default)return this.resolvePromise(this.makeAndAddFeatureSet(s,r,n));if(s._materializedTable);else{var l=ue(ue({},s),{},{outFields:["*"]});s._materializedTable=new L.default(l)}return s._materializedTable.load().then((function(){return t.resolvePromise(t.makeAndAddFeatureSet(s._materializedTable,r,n))}))}}return this.resolvePromise(null)}}]),r}(f.a),ge=function(e){Object(o.a)(r,e);var t=se(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(a.a)(this,r),(n=t.call(this))._url=e,n._overridespref=i,n.lrucache=o,n.interceptor=u,n.metadata=null,n._instantLayers=[],n}return Object(i.a)(r,[{key:"url",get:function(){return this._url}},{key:"makeAndAddFeatureSet",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=de(e,this._overridespref,null===r?["*"]:r,t,this.lrucache);return this._instantLayers.push({featureset:n,opitem:e,includeGeometry:t,outFields:JSON.stringify(r)}),n}},{key:"_loadMetaData",value:function(){var e=this;return ye(this._url).then((function(t){return e.metadata=t,t}))}},{key:"load",value:function(){return this._loadMetaData()}},{key:"clone",value:function(){return new r(this._url,this._overridespref,this.lrucache,this.interceptor)}},{key:"featureSetByName",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=["*"]),n=(n=n.slice(0)).sort();for(var a=JSON.stringify(n),i=0;i<this._instantLayers.length;i++){var o=this._instantLayers[i];if(o.opitem.title===e&&o.includeGeometry===r&&o.outFields===a)return this.resolvePromise(this._instantLayers[i].featureset)}return this._loadMetaData().then((function(a){var i,o=null,u=le(a.layers?a.layers:[]);try{for(u.s();!(i=u.n()).done;){var s=i.value;s.name===e&&(o=s)}}catch(h){u.e(h)}finally{u.f()}if(!o){var l,c=le(a.tables?a.tables:[]);try{for(c.s();!(l=c.n()).done;){var f=l.value;f.name===e&&(o=f)}}catch(h){c.e(h)}finally{c.f()}}return o?he(t._url+"/"+o.id,["*"]).then((function(e){return t.makeAndAddFeatureSet(e,r,n)})):t.resolvePromise(null)}))}},{key:"featureSetById",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];null===n&&(n=["*"]),n=(n=n.slice(0)).sort();var a=JSON.stringify(n);e=null!=e?e.toString():"";for(var i=0;i<this._instantLayers.length;i++){var o=this._instantLayers[i];if(o.opitem.id===e&&o.includeGeometry===r&&o.outFields===a)return this.resolvePromise(this._instantLayers[i].featureset)}return this._loadMetaData().then((function(a){var i,o=null,u=le(a.layers?a.layers:[]);try{for(u.s();!(i=u.n()).done;){var s=i.value;null!==s.id&&void 0!==s.id&&s.id.toString()===e&&(o=s)}}catch(h){u.e(h)}finally{u.f()}if(!o){var l,c=le(a.tables?a.tables:[]);try{for(c.s();!(l=c.n()).done;){var f=l.value;null!==f.id&&void 0!==f.id&&f.id.toString()===e&&(o=f)}}catch(h){c.e(h)}finally{c.f()}}return o?he(t._url+"/"+o.id,["*"]).then((function(e){return t.makeAndAddFeatureSet(e,r,n)})):t.resolvePromise(null)}))}}]),r}(f.a);function Oe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new me(e,t,r,n)}function we(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new ge(e,t,r,n)}function je(e,t){return null===e?t:new ae.a({url:e.field("url")})}function xe(e,t,r){return l.b.findCredential(e.restUrl)?"loaded"===e.loadStatus&&""===t&&e.user&&e.user.sourceJSON&&!1===r?Object(_.t)(e.user.sourceJSON):""===t?Object(c.default)(e.restUrl+"/community/self",{responseType:"json",query:ue({f:"json"},!1===r?{}:{returnUserLicenseTypeExtensions:!0})}).then((function(e){if(e.data){var t=e.data;if(t&&t.username)return Object(_.t)(t)}return Object(_.t)(null)})):Object(c.default)(e.restUrl+"/community/users/"+t,{responseType:"json",query:{f:"json"}}).then((function(e){if(e.data){var t=e.data;return t.error?null:Object(_.t)(t)}return Object(_.t)(null)})):Object(_.t)(null)}function ke(e,t,r,n,a,i,o){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(ne.a.applicationCache){var s=ne.a.applicationCache.getLayerInfo(e+":"+i.url);if(s)return s.then((function(e){try{var s=new L.default({url:Object(O.i)(e.url)+"/"+t,outFields:["*"]});return Object(_.t)(de(s,r,n,a,o,u))}catch(i){return Object(_.s)(i)}}),(function(e){return Object(_.s)(e)}))}return Object(_.c)((function(s,l){var c=new ie.default({id:e,portal:i}).load();ne.a.applicationCache&&ne.a.applicationCache.setLayerInfo(e+":"+i.url,c),c.then((function(e){try{var c=new L.default({url:Object(O.i)(e.url)+"/"+t,outFields:["*"]});s(de(c,r,n,a,o,u))}catch(i){l(i)}}),(function(t){ne.a.applicationCache&&ne.a.applicationCache.clearLayerInfo(e+":"+i.url),l(t)}))}))}},"A6/9":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var n=r("7i+s"),a=Object(n.b)()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),i=Object(n.b)()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"})},BZlr:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n,a,i,o={exports:{}};a=o,void 0!==(n=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,r=t?t.byteLength:0;if(e<r)return t;for(var n=512;n<e;)n<<=1;for(var a=new Uint8Array(n),i=0;i<r;++i)a[i]=t[i];return this.buffer=a},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var r=t+e;!this.eof&&this.bufferLength<r;)this.readBlock();var n=this.bufferLength;r>n&&(r=n)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}return this.pos=r,this.buffer.subarray(t,r)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,r){for(var n=e+t;this.bufferLength<=n&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,r)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}(),i=function(){if(!self||!self.Uint32Array)return null;var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),r=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),a=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],i=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function o(e){throw new Error(e)}function u(e){var t=0,r=e[t++],a=e[t++];-1!=r&&-1!=a||o("Invalid header in flate stream"),8!=(15&r)&&o("Unknown compression method in flate stream"),((r<<8)+a)%31!=0&&o("Bad FCHECK in flate stream"),32&a&&o("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,n.call(this)}return u.prototype=Object.create(n.prototype),u.prototype.getBits=function(e){for(var t,r=this.codeSize,n=this.codeBuf,a=this.bytes,i=this.bytesPos;r<e;)void 0===(t=a[i++])&&o("Bad encoding in flate stream"),n|=t<<r,r+=8;return t=n&(1<<e)-1,this.codeBuf=n>>e,this.codeSize=r-=e,this.bytesPos=i,t},u.prototype.getCode=function(e){for(var t=e[0],r=e[1],n=this.codeSize,a=this.codeBuf,i=this.bytes,u=this.bytesPos;n<r;){var s;void 0===(s=i[u++])&&o("Bad encoding in flate stream"),a|=s<<n,n+=8}var l=t[a&(1<<r)-1],c=l>>16,f=65535&l;return(0==n||n<c||0==c)&&o("Bad encoding in flate stream"),this.codeBuf=a>>c,this.codeSize=n-c,this.bytesPos=u,f},u.prototype.generateHuffmanTable=function(e){for(var t=e.length,r=0,n=0;n<t;++n)e[n]>r&&(r=e[n]);for(var a=1<<r,i=new Uint32Array(a),o=1,u=0,s=2;o<=r;++o,u<<=1,s<<=1)for(var l=0;l<t;++l)if(e[l]==o){var c=0,f=u;for(n=0;n<o;++n)c=c<<1|1&f,f>>=1;for(n=c;n<a;n+=s)i[n]=o<<16|l;++u}return[i,r]},u.prototype.readBlock=function(){function n(e,t,r,n,a){for(var i=e.getBits(r)+n;i-- >0;)t[d++]=a}var u=this.getBits(3);if(1&u&&(this.eof=!0),0!=(u>>=1)){var s,l;if(1==u)s=a,l=i;else if(2==u){for(var c=this.getBits(5)+257,f=this.getBits(5)+1,h=this.getBits(4)+4,p=Array(e.length),d=0;d<h;)p[e[d++]]=this.getBits(3);for(var y=this.generateHuffmanTable(p),v=0,b=(d=0,c+f),m=new Array(b);d<b;){var g=this.getCode(y);16==g?n(this,m,2,3,v):17==g?n(this,m,3,3,v=0):18==g?n(this,m,7,11,v=0):m[d++]=v=g}s=this.generateHuffmanTable(m.slice(0,c)),l=this.generateHuffmanTable(m.slice(c,b))}else o("Unknown block type in flate stream");for(var O=(P=this.buffer)?P.length:0,w=this.bufferLength;;){var j=this.getCode(s);if(j<256)w+1>=O&&(O=(P=this.ensureBuffer(w+1)).length),P[w++]=j;else{if(256==j)return void(this.bufferLength=w);var x=(j=t[j-=257])>>16;x>0&&(x=this.getBits(x)),v=(65535&j)+x,j=this.getCode(l),(x=(j=r[j])>>16)>0&&(x=this.getBits(x));var k=(65535&j)+x;w+v>=O&&(O=(P=this.ensureBuffer(w+v)).length);for(var I=0;I<v;++I,++w)P[w]=P[w-k]}}}else{var _,S=this.bytes,T=this.bytesPos;void 0===(_=S[T++])&&o("Bad block header in flate stream");var A=_;void 0===(_=S[T++])&&o("Bad block header in flate stream"),A|=_<<8,void 0===(_=S[T++])&&o("Bad block header in flate stream");var M=_;void 0===(_=S[T++])&&o("Bad block header in flate stream"),(M|=_<<8)!=(65535&~A)&&o("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var C=this.bufferLength,P=this.ensureBuffer(C+A),D=C+A;this.bufferLength=D;for(var E=C;E<D;++E){if(void 0===(_=S[T++])){this.eof=!0;break}P[E]=_}this.bytesPos=T}},u}())&&(a.exports=i);var u=o.exports},BmJW:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("hisu"),a=r("yBJb"),i=r("7im+"),o=r("1w7Q"),u=function(){function e(t){var r=this;Object(n.a)(this,e),this.allocator=t,this.items=[],this.itemsPtr=0,this.tickHandle=o.a.before((function(){return r.reset()})),this.grow()}return Object(a.a)(e,[{key:"destroy",value:function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(i.m)(this.tickHandle)),this.items=Object(i.m)(this.items)}},{key:"get",value:function(){return 0===this.itemsPtr&&Object(o.a)((function(){})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}},{key:"reset",value:function(){var e=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*s);this.items.length=Math.min(e,this.items.length),this.itemsPtr=0}},{key:"grow",value:function(){for(var e=0;e<Math.max(8,Math.min(this.items.length,s));e++)this.items.push(this.allocator())}}]),e}(),s=1024},"C+Hs":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("6J1V");function a(e,t,r){var a,l=e.byteLength/(4*t),c=new Uint32Array(e,0,l*t),f=new Uint32Array(l),h=null!=(a=null==r?void 0:r.minReduction)?a:0,p=(null==r?void 0:r.originalIndices)||null,d=p?p.length:0,y=(null==r?void 0:r.componentOffsets)||null,v=0;if(y)for(var b=0;b<y.length-1;b++){var m=y[b+1]-y[b];m>v&&(v=m)}else v=l;var g=Math.floor(1.1*v)+1;(null==s||s.length<2*g)&&(s=new Uint32Array(Object(n.o)(2*g)));for(var O=0;O<2*g;O++)s[O]=0;for(var w=0,j=!!y&&!!p,x=j?d:l,k=j?new Uint32Array(d):null,I=1.96,_=0!==h?Math.ceil(7.84*I/(h*h)*h*(1-h)):x,S=1,T=y?y[1]:x,A=0;A<x;A++){if(A===_){var M=1-w/A;if(M+I*Math.sqrt(M*(1-M)/A)<h)return null;_*=2}if(A===T){for(var C=0;C<2*g;C++)s[C]=0;if(p)for(var P=y[S-1];P<y[S];P++)k[P]=f[p[P]];T=y[++S]}for(var D=j?p[A]:A,E=D*t,R=u(c,E,t),N=R%g,B=w;0!==s[2*N+1];){if(s[2*N]===R){var F=s[2*N+1]-1;if(i(c,E,F*t,t)){B=f[F];break}}++N>=g&&(N-=g)}B===w&&(s[2*N]=R,s[2*N+1]=D+1,w++),f[D]=B}if(0!==h&&1-w/l<h)return null;if(j){for(var L=y[S-1];L<k.length;L++)k[L]=f[p[L]];f=k}var U=new Uint32Array(t*w);w=0;for(var G=0;G<x;G++)f[G]===w&&(o(c,(j?p[G]:G)*t,U,w*t,t),w++);if(p&&!j){for(var z=new Uint32Array(d),V=0;V<z.length;V++)z[V]=f[p[V]];f=z}return{buffer:U.buffer,indices:f,uniqueCount:w}}function i(e,t,r,n){for(var a=0;a<n;a++)if(e[t+a]!==e[r+a])return!1;return!0}function o(e,t,r,n,a){for(var i=0;i<a;i++)r[n+i]=e[t+i]}function u(e,t,r){for(var n=0,a=0;a<r;a++)n=(n=e[t+a]+n|0)+(n<<11)+(n>>>2)|0;return n>>>0}var s=null},CQtW:function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));var i=1;function o(e,t){var r,a=0,i=n(t);try{for(i.s();!(r=i.n()).done;){var o,u=null==(o=r.value.attributes)?void 0:o[e];"number"==typeof u&&isFinite(u)&&(a=Math.max(a,u))}}catch(s){i.e(s)}finally{i.f()}return a}},D4DT:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("TPtt");function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var c=function(e){Object(i.a)(r,e);var t=l(r);function r(e,a){var i;return Object(n.a)(this,r),(i=t.call(this,s.a.createInstance()))._currentIndex=-1,i._reader=e,i._indices=a,i}return Object(a.a)(r,[{key:"hasNext",get:function(){return this._currentIndex+1<this._indices.length}},{key:"getSize",value:function(){return this._indices.length}},{key:"getCursor",value:function(){return this.copy()}},{key:"copy",value:function(){var e=new r(this._reader.copy(),this._indices);return e._currentIndex=this._currentIndex,e}},{key:"next",value:function(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}},{key:"_nextIndex",value:function(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}},{key:"setArcadeSpatialReference",value:function(e){this._reader.setArcadeSpatialReference(e)}},{key:"attachStorage",value:function(e){this._reader.attachStorage(e)}},{key:"geometryType",get:function(){return this._reader.geometryType}},{key:"hasFeatures",get:function(){return this._reader.hasFeatures}},{key:"exceededTransferLimit",get:function(){return this._reader.exceededTransferLimit}},{key:"hasZ",get:function(){return this._reader.hasZ}},{key:"hasM",get:function(){return this._reader.hasM}},{key:"getStorage",value:function(){return this._reader.getStorage()}},{key:"getComputedNumeric",value:function(e){return this._reader.getComputedNumericAtIndex(0)}},{key:"setComputedNumeric",value:function(e,t){return this._reader.setComputedNumericAtIndex(t,0)}},{key:"getComputedString",value:function(e){return this._reader.getComputedStringAtIndex(0)}},{key:"setComputedString",value:function(e,t){return this._reader.setComputedStringAtIndex(0,t)}},{key:"getComputedNumericAtIndex",value:function(e){return this._reader.getComputedNumericAtIndex(e)}},{key:"setComputedNumericAtIndex",value:function(e,t){this._reader.setComputedNumericAtIndex(e,t)}},{key:"getComputedStringAtIndex",value:function(e){return this._reader.getComputedStringAtIndex(e)}},{key:"setComputedStringAtIndex",value:function(e,t){return this._reader.setComputedStringAtIndex(e,t)}},{key:"transform",value:function(e,t,r,n){var a=this.copy();return a._reader=this._reader.transform(e,t,r,n),a}},{key:"readAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._reader.readAttribute(e,t)}},{key:"readAttributes",value:function(){return this._reader.readAttributes()}},{key:"joinAttributes",value:function(e){return this._reader.joinAttributes(e)}},{key:"readArcadeFeature",value:function(){return this._reader.readArcadeFeature()}},{key:"geometry",value:function(){return this._reader.geometry()}},{key:"field",value:function(e){return this.readAttribute(e,!0)}},{key:"hasField",value:function(e){return this._reader.hasField(e)}},{key:"setField",value:function(e,t){return this._reader.setField(e,t)}},{key:"keys",value:function(){return this._reader.keys()}},{key:"castToText",value:function(){return this._reader.castToText()}},{key:"getQuantizationTransform",value:function(){return this._reader.getQuantizationTransform()}},{key:"getAttributeHash",value:function(){return this._reader.getAttributeHash()}},{key:"getObjectId",value:function(){return this._reader.getObjectId()}},{key:"getDisplayId",value:function(){return this._reader.getDisplayId()}},{key:"setDisplayId",value:function(e){return this._reader.setDisplayId(e)}},{key:"getGroupId",value:function(){return this._reader.getGroupId()}},{key:"setGroupId",value:function(e){return this._reader.setGroupId(e)}},{key:"getXHydrate",value:function(){return this._reader.getXHydrate()}},{key:"getYHydrate",value:function(){return this._reader.getYHydrate()}},{key:"getX",value:function(){return this._reader.getX()}},{key:"getY",value:function(){return this._reader.getY()}},{key:"setIndex",value:function(e){return this._reader.setIndex(e)}},{key:"getIndex",value:function(){return this._reader.getIndex()}},{key:"readLegacyFeature",value:function(){return this._reader.readLegacyFeature()}},{key:"readOptimizedFeature",value:function(){return this._reader.readOptimizedFeature()}},{key:"readLegacyPointGeometry",value:function(){return this._reader.readLegacyPointGeometry()}},{key:"readLegacyGeometry",value:function(){return this._reader.readLegacyGeometry()}},{key:"readLegacyCentroid",value:function(){return this._reader.readLegacyCentroid()}},{key:"readGeometryArea",value:function(){return this._reader.readGeometryArea()}},{key:"readUnquantizedGeometry",value:function(){return this._reader.readUnquantizedGeometry()}},{key:"readHydratedGeometry",value:function(){return this._reader.readHydratedGeometry()}},{key:"readGeometry",value:function(){return this._reader.readGeometry()}},{key:"readCentroid",value:function(){return this._reader.readCentroid()}},{key:"_readAttribute",value:function(e,t){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}},{key:"_readAttributes",value:function(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}],[{key:"from",value:function(e,t){return new r(e.copy(),t)}}]),r}(s.a)},ERXM:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("eijD"),a=r("NthX"),i=r.n(a),o=r("DGz/");function u(e){return s.apply(this,arguments)}function s(){return(s=Object(n.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.default)(t,{responseType:"json",query:{f:"json"}});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},EjXB:function(e,t,r){"use strict";function n(e){return 32+e.length}function a(e){if(!e)return 0;var t=32;for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];switch(typeof a){case"string":t+=n(a);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function i(e,t){return 32+e.length*t}r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}))},FMHe:function(e,t,r){"use strict";function n(e,t){var r;return e.isGeographic||e.isWebMercator&&(null==(r=null==t?void 0:t.geographic)||r)}r.d(t,"a",(function(){return n}))},HORG:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("dQW7"),l=r("FYmP"),c=r("xAIp"),f=(r("J4Pc"),r("wckI"),r("TM+E"),r("iaHD"));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var p=function(e){Object(i.a)(r,e);var t=h(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).tiles=new Map,a}return Object(a.a)(r,[{key:"destroy",value:function(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}},{key:"updating",get:function(){return this.isUpdating()}},{key:"acquireTile",value:function(e){var t=this,r=this.createTile(e);return r.once("isReady",(function(){return t.notifyChange("updating")})),this.tiles.set(e.id,r),r}},{key:"forceAttributeTextureUpload",value:function(){}},{key:"forEachTile",value:function(e){this.tiles.forEach(e)}},{key:"releaseTile",value:function(e){this.tiles.delete(e.key.id),this.disposeTile(e)}},{key:"isUpdating",value:function(){var e=!0;return this.tiles.forEach((function(t){e=e&&t.isReady})),!e}},{key:"setHighlight",value:function(){}},{key:"invalidateLabels",value:function(){}},{key:"requestUpdate",value:function(){this.layerView.requestUpdate()}}]),r}(l.a);Object(s.a)([Object(c.b)()],p.prototype,"layer",void 0),Object(s.a)([Object(c.b)()],p.prototype,"layerView",void 0),Object(s.a)([Object(c.b)()],p.prototype,"tileInfoView",void 0),Object(s.a)([Object(c.b)()],p.prototype,"updating",null);var d=p=Object(s.a)([Object(f.a)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],p);t.a=d},HYzH:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(){var e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,1===t[0]}()},Hj62:function(e,t,r){"use strict";r.d(t,"a",(function(){return H})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return g})),r.d(t,"f",(function(){return $})),r.d(t,"g",(function(){return E})),r.d(t,"h",(function(){return T})),r.d(t,"i",(function(){return x})),r.d(t,"j",(function(){return k})),r.d(t,"k",(function(){return X})),r.d(t,"l",(function(){return ie})),r.d(t,"m",(function(){return W})),r.d(t,"n",(function(){return te})),r.d(t,"o",(function(){return oe})),r.d(t,"p",(function(){return F})),r.d(t,"q",(function(){return I})),r.d(t,"r",(function(){return C})),r.d(t,"s",(function(){return z})),r.d(t,"t",(function(){return A})),r.d(t,"u",(function(){return ne})),r.d(t,"v",(function(){return ae})),r.d(t,"w",(function(){return M})),r.d(t,"x",(function(){return Y})),r.d(t,"y",(function(){return P})),r.d(t,"z",(function(){return N})),r.d(t,"A",(function(){return _})),r.d(t,"B",(function(){return U})),r.d(t,"C",(function(){return S}));r("mK0O");var n,a=r("eijD"),i=r("NthX"),o=r.n(i),u=(r("ZTBZ"),r("Akvs")),s=(r("OTJA"),r("aic5"));function l(e){var t;return Array.isArray(e)?null==(t=e[0])?void 0:t.spatialReference:null==e?void 0:e.spatialReference}function c(e){return e?Array.isArray(e)?e.map(c):e.toJSON?e.toJSON():e:e}function f(e){return Array.isArray(e)?e.map((function(e){return Object(s.a)(e)})):Object(s.a)(e)}function h(e,t){var r;return Array.isArray(e)?r=e:((r=[]).push(e),null!=t&&r.push(t)),r}function p(){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(n||(n=Object(u.b)("geometryEngineWorker",{strategy:"distributed"})),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return e.abrupt("return",e.sent.invoke("executeGEOperation",{operation:t,parameters:c(r)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,y("clip",[l(t),t,r]);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,y("cut",[l(t),t,r]);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return y("contains",[l(e),e,t])}function j(e,t){return y("crosses",[l(e),e,t])}function x(e,t,r){return y("distance",[l(e),e,t,r])}function k(e,t){return y("equals",[l(e),e,t])}function I(e,t){return y("intersects",[l(e),e,t])}function _(e,t){return y("touches",[l(e),e,t])}function S(e,t){return y("within",[l(e),e,t])}function T(e,t){return y("disjoint",[l(e),e,t])}function A(e,t){return y("overlaps",[l(e),e,t])}function M(e,t,r){return y("relate",[l(e),e,t,r])}function C(e){return y("isSimple",[l(e),e])}function P(e){return D.apply(this,arguments)}function D(){return(D=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,y("simplify",[l(t),t]);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return R.apply(this,arguments)}function R(){return(R=Object(a.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,y("difference",[l(t),t,r]);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return B.apply(this,arguments)}function B(){return(B=Object(a.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,y("symmetricDifference",[l(t),t,r]);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return L.apply(this,arguments)}function L(){return(L=Object(a.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,y("intersect",[l(t),t,r]);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return G.apply(this,arguments)}function G(){return(G=Object(a.a)(o.a.mark((function e(t){var r,n,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:null,n=h(t,r),e.t0=f,e.next=5,y("union",[l(n),n]);case 5:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,r,n,a,i){return V.apply(this,arguments)}function V(){return(V=Object(a.a)(o.a.mark((function e(t,r,n,a,i,u){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,y("offset",[l(t),t,r,n,a,i,u]);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t,r){return J.apply(this,arguments)}function J(){return(J=Object(a.a)(o.a.mark((function e(t,r,n){var a,i,u=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>3&&void 0!==u[3]&&u[3],i=[l(t),t,r,n,a],e.t0=f,e.next=5,y("buffer",i);case 5:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,r,n,a,i){return q.apply(this,arguments)}function q(){return(q=Object(a.a)(o.a.mark((function e(t,r,n,a,i,u){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[l(t),t,r,n,a,i,u],e.t0=f,e.next=4,y("geodesicBuffer",s);case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return"xmin"in e?e.center:"x"in e?e:e.extent.center}function Y(e,t,r){return K.apply(this,arguments)}function K(){return(K=Object(a.a)(o.a.mark((function e(t,r,n){var a,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("Illegal Argument Exception");case 2:return i=t.spatialReference,n=null!=(a=n)?a:Z(t),e.t0=t.constructor,e.next=7,y("rotate",[i,t,r,n]);case 7:return e.t1=e.sent,u=e.t0.fromJSON.call(e.t0,e.t1),e.abrupt("return",(u.spatialReference=i,u));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t,r,n){return Q.apply(this,arguments)}function Q(){return(Q=Object(a.a)(o.a.mark((function e(t,r,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,y("generalize",[l(t),t,r,n,a]);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,r){return ee.apply(this,arguments)}function ee(){return(ee=Object(a.a)(o.a.mark((function e(t,r,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,y("densify",[l(t),t,r,n]);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,r){return re.apply(this,arguments)}function re(){return(re=Object(a.a)(o.a.mark((function e(t,r,n){var a,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]?i[3]:0,e.t0=f,e.next=4,y("geodesicDensify",[l(t),t,r,n,a]);case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return y("planarArea",[l(e),e,t])}function ae(e,t){return y("planarLength",[l(e),e,t])}function ie(e,t,r){return y("geodesicArea",[l(e),e,t,r])}function oe(e,t,r){return y("geodesicLength",[l(e),e,t,r])}},"Hl/n":function(e,t,r){"use strict";r.d(t,"a",(function(){return Z})),r.d(t,"b",(function(){return T}));var n=r("mK0O"),a=r("aNYv"),i=r("eijD"),o=r("NthX"),u=r.n(o),s=r("WYis"),l=r("TM+E"),c=r("frPA"),f=r("lZmO"),h=r("DE4D"),p=r("jCQE"),d=r("hQel"),y=r("g9+Q"),v=r("46Wt");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=l.a.getLogger("esri.symbols.cim.cimAnalyzer");function j(e){switch(e){case"Butt":return 0;case"Square":return 2;case"Round":default:return 1}}function x(e){switch(e){case"Bevel":return 0;case"Miter":return 2;case"Round":default:return 1}}function k(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function I(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function _(e,t,r,n){var a;e[t]?a=e[t]:(a={},e[t]=a),a[r]=n}function S(e){var t=e.markerPlacement;return t&&t.angleToLine?1:0}function T(e,t,r,n){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(u.a.mark((function e(t,r,n,a){var i,o,s,l,c,f,p,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!=n?n:[],t){e.next=3;break}return e.abrupt("return",i);case 3:if(l={},"CIMSymbolReference"===t.type){e.next=6;break}return e.abrupt("return",(w.error("Expect cim type to be 'CIMSymbolReference'"),i));case 6:if(o=t.symbol,!(s=t.primitiveOverrides)){e.next=12;break}c=[],f=g(s);try{for(d=function(){var e=p.value,t=e.valueExpressionInfo;if(t&&r){var n=t.expression,a=Object(h.d)(n,r.spatialReference,r.fields).then((function(t){t&&_(l,e.primitiveName,e.propertyName,t)}));c.push(a)}else null!=e.value&&_(l,e.primitiveName,e.propertyName,e.value)},f.s();!(p=f.n()).done;)d()}catch(u){f.e(u)}finally{f.f()}return e.next=12,Promise.all(c);case 12:switch(o.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":M(o,s,l,r,i,a)}return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,r,n,a,i){if(e){var o=e.symbolLayers;if(o){var u,s=p.a.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(u=1);for(var l=o.length;l--;){var c=o[l];if(c&&!1!==c.enable){var f=[];switch(p.b.findApplicableOverrides(c,t,f),c.type){case"CIMSolidFill":C(c,r,f,n,a);break;case"CIMPictureFill":P(c,r,f,n,a);break;case"CIMHatchFill":D(c,r,f,n,a);break;case"CIMGradientFill":E(c,r,f,n,a);break;case"CIMSolidStroke":R(c,r,f,n,a,"CIMPolygonSymbol"===e.type,s);break;case"CIMPictureStroke":N(c,r,f,n,a,"CIMPolygonSymbol"===e.type,s);break;case"CIMGradientStroke":B(c,r,f,n,a,"CIMPolygonSymbol"===e.type,s);break;case"CIMCharacterMarker":if(F(c,r,f,n,a))break;break;case"CIMPictureMarker":if(F(c,r,f,n,a))break;"CIMLineSymbol"===e.type&&(u=S(c)),L(c,r,f,n,a,u,s);break;case"CIMVectorMarker":if(F(c,r,f,n,a))break;"CIMLineSymbol"===e.type&&(u=S(c)),U(c,r,f,n,a,u,s,i);break;default:w.error("Cannot analyze CIM layer",c.type)}}}}}}function C(e,t,r,n,i){var o=e.primitiveName,u=Object(y.e)(e.color),s=Y(r,o),l=Object(a.a)(s,2),c=l[0],h=l[1],p=Object(f.b)(JSON.stringify(e)+h).toString();i.push({type:"fill",templateHash:p,materialHash:c?function(){return p}:p,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:W(o,t,"Color",n,u,J),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e.effects})}function P(e,t,r,n,i){var o=e.primitiveName,u=e.tintColor?Object(y.e)(e.tintColor):{r:255,g:255,b:255,a:1},s=Y(r,o),l=Object(a.a)(s,2),c=l[0],h=l[1],p=Object(f.b)(JSON.stringify(e)+h).toString(),d=Object(f.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString();i.push({type:"fill",templateHash:p,materialHash:c?function(){return d}:d,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:W(o,t,"TintColor",n,u,J),height:W(o,t,"Height",n,e.height),scaleX:W(o,t,"ScaleX",n,e.scaleX),angle:W(o,t,"Rotation",n,e.rotation),offsetX:W(o,t,"OffsetX",n,e.offsetX),offsetY:W(o,t,"OffsetY",n,e.offsetY)})}function D(e,t,r,n,i){var o=["Rotation","OffsetX","OffsetY"],u=r.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===o.indexOf(t.propertyName)})),s=e.primitiveName,l=Y(r,s),c=Object(a.a)(l,2),h=c[0],p=c[1],d=Object(f.b)(JSON.stringify(e)+p).toString(),y=Object(f.b)("".concat(e.separation).concat(JSON.stringify(e.lineSymbol))).toString();i.push({type:"fill",templateHash:d,materialHash:h?q(y,t,u,n):y,cim:e,materialOverrides:u,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:W(s,t,"Separation",n,e.separation),scaleX:1,angle:W(s,t,"Rotation",n,e.rotation),offsetX:W(s,t,"OffsetX",n,e.offsetX),offsetY:W(s,t,"OffsetY",n,e.offsetY)})}function E(e,t,r,n,i){var o=Y(r,e.primitiveName),u=Object(a.a)(o,2),s=u[0],l=u[1],c=Object(f.b)(JSON.stringify(e)+l).toString();i.push({type:"fill",templateHash:c,materialHash:s?q(c,t,r,n):c,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function R(e,t,r,n,i,o,u){var s=e.primitiveName,l=Object(y.e)(e.color),c=void 0!==e.width?e.width:4,h=j(e.capStyle),p=x(e.joinStyle),d=e.miterLimit,v=Y(r,s),b=Object(a.a)(v,2),m=b[0],g=b[1],O=Object(f.b)(JSON.stringify(e)+g).toString();i.push({type:"line",templateHash:O,materialHash:m?function(){return O}:O,cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:W(s,t,"Color",n,l,J),width:W(s,t,"Width",n,c),cap:W(s,t,"CapStyle",n,h),join:W(s,t,"JoinStyle",n,p),miterLimit:W(s,t,"MiterLimit",n,d),referenceWidth:u,zOrder:H(e.name),isDashed:!1})}function N(e,t,r,n,i,o,u){var s=Object(f.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),l=e.primitiveName,c=Object(y.e)(e.tintColor),h=void 0!==e.width?e.width:4,p=j(e.capStyle),d=x(e.joinStyle),v=e.miterLimit,b=Y(r,l),m=Object(a.a)(b,2),g=m[0],O=m[1],w=Object(f.b)(JSON.stringify(e)+O).toString();i.push({type:"line",templateHash:w,materialHash:g?function(){return s}:s,cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:W(l,t,"TintColor",n,c,J),width:W(l,t,"Width",n,h),cap:W(l,t,"CapStyle",n,p),join:W(l,t,"JoinStyle",n,d),miterLimit:W(l,t,"MiterLimit",n,v),referenceWidth:u,zOrder:H(e.name),isDashed:!1})}function B(e,t,r,n,i,o,u){var s=e.primitiveName,l=void 0!==e.width?e.width:4,c=j(e.capStyle),h=x(e.joinStyle),p=e.miterLimit,d=Y(r,s),y=Object(a.a)(d,2),v=y[0],b=y[1],m=Object(f.b)(JSON.stringify(e)+b).toString();i.push({type:"line",templateHash:m,materialHash:v?q(m,t,r,n):m,cim:e,materialOverrides:null,isOutline:o,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},width:W(s,t,"Width",n,l),cap:W(s,t,"CapStyle",n,c),join:W(s,t,"JoinStyle",n,h),miterLimit:W(s,t,"MiterLimit",n,p),referenceWidth:u,zOrder:H(e.name),isDashed:!1})}function F(e,t,r,n,i){var o=e.markerPlacement;if(!o||"CIMMarkerPlacementInsidePolygon"!==o.type)return!1;var u=o,s=["Rotation","OffsetX","OffsetY"],l=r.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===s.indexOf(t.propertyName)})),c=Y(r,u.primitiveName),h=Object(a.a)(c,2),p=h[0],d=h[1],y=Object(f.b)(JSON.stringify(e)+d).toString();return i.push({type:"fill",templateHash:y,materialHash:p?q(y,t,l,n):y,cim:e,materialOverrides:l,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:W(u.primitiveName,t,"StepY",n,u.stepY),scaleX:1,angle:W(u.primitiveName,t,"GridAngle",n,u.gridAngle),offsetX:W(u.primitiveName,t,"OffsetX",n,u.offsetX),offsetY:W(u.primitiveName,t,"OffsetY",n,u.offsetY)}),!0}function L(e,t,r,n,i,o,u){var s=e.primitiveName,l=e.size,c=e.scaleX,h=e.rotation,p=e.offsetX,d=e.offsetY,v=Object(y.e)(e.tintColor),b=Object(f.b)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),m=Y(r,s),g=Object(a.a)(m,2),O=g[0],w=g[1],j=Object(f.b)(JSON.stringify(e)+w).toString();i.push({type:"marker",templateHash:j,materialHash:O?function(){return b}:b,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:!1,alignment:o,size:W(s,t,"Size",n,l),scaleX:W(s,t,"ScaleX",n,c),rotation:W(s,t,"Rotation",n,h),offsetX:W(s,t,"OffsetX",n,p),offsetY:W(s,t,"OffsetY",n,d),color:W(s,t,"TintColor",n,v,J),anchorPoint:e.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:u,sizeRatio:1,markerPlacement:e.markerPlacement})}function U(e,t,r,n,a,i,o,u){var s=e.markerGraphics;if(s){var l=0;if(e.scaleSymbolsProportionally){var c=e.frame;c&&(l=c.ymax-c.ymin)}var f,h=g(s);try{for(h.s();!(f=h.n()).done;){var p=f.value;if(p){var d=p.symbol;if(!d)continue;switch(d.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":z(e,p,r,t,n,a,i,o,l,u);break;case"CIMTextSymbol":G(e,p,t,r,n,a,i,o,l)}}}}catch(y){h.e(y)}finally{h.f()}}}function G(e,t,r,n,a,i,o,u,s){p.b.findApplicableOverrides(t,n,[]);var l=t.geometry;if("x"in l&&"y"in l){var c=t.symbol,h=function(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}(c),d=function(e){var t="normal",r="normal";if(e){var n=e.toLowerCase();-1!==n.indexOf("italic")?t="italic":-1!==n.indexOf("oblique")&&(t="oblique"),-1!==n.indexOf("bold")?r="bold":-1!==n.indexOf("light")&&(r="lighter")}return{style:t,weight:r}}(c.fontStyleName);c.font=m({family:c.fontFamilyName,decoration:h},d);var v=e.frame,b=l.x-.5*(v.xmin+v.xmax),O=l.y-.5*(v.ymin+v.ymax),w=e.size/s,j=e.primitiveName,x=(c.height||0)*w,_=c.angle||0,S=((c.offsetX||0)+b)*w,T=((c.offsetY||0)+O)*w,A=Object(y.e)(p.a.getFillColor(c)),M=Object(y.e)(p.a.getStrokeColor(c)),C=p.a.getStrokeWidth(c);C||(M=Object(y.e)(p.a.getFillColor(c.haloSymbol)),C=c.haloSize*w);var P,D="",E=g(n);try{for(E.s();!(P=E.n()).done;){var R=P.value;R.primitiveName===j&&void 0!==R.value&&(D+="-".concat(R.primitiveName,"-").concat(R.propertyName,"-").concat(JSON.stringify(R.value)))}}catch(F){E.e(F)}finally{E.f()}var N=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),B=Object(f.b)(JSON.stringify(t)+N+D).toString();i.push({type:"text",templateHash:B,materialHash:function(){return Object(f.b)(JSON.stringify(c.font)).toString()},cim:c,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,alignment:o,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:c.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:W(j,r,"Size",a,x),angle:W(j,r,"Rotation",a,_),offsetX:W(j,r,"OffsetX",a,S),offsetY:W(j,r,"OffsetY",a,T),horizontalAlignment:k(c.horizontalAlignment),verticalAlignment:I(c.verticalAlignment),text:W(t.primitiveName,r,"TextString",a,t.textString,y.a,c.textCase),color:A,outlineColor:M,outlineSize:C,referenceSize:u,sizeRatio:1,markerPlacement:e.markerPlacement})}}function z(e,t,r,n,i,o,u,s,l,c){var h=t.symbol,v=t.geometry;if(v){var b=h.symbolLayers;if(b)if(c)V(e,t,n,r,i,o,u,s,l);else for(var O=b.length;O--;){var w=b[O];if(w&&!1!==w.enable)switch(w.type){case"CIMSolidFill":case"CIMSolidStroke":var j=function(){var c=Object(d.b)(v);if(!c)return"continue";var h=Object(d.d)(c,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),b=Object(a.a)(h,3),O=b[0],j=b[1],x=b[2],k="CIMSolidFill"===w.type,I={type:"sdf",geom:v,asFill:k},_=e.primitiveName,S=e.size,T=e.rotation||0,A=e.offsetX,M=e.offsetY,C=w.primitiveName,P=Object(y.e)(k?p.a.getFillColor(w):p.a.getStrokeColor(w)),D=k?{r:0,g:0,b:0,a:0}:Object(y.e)(p.a.getStrokeColor(w)),E=p.a.getStrokeWidth(w);if(!k&&!E)return"break";var R,N=!1,B="",F=g(r);try{for(F.s();!(R=F.n()).done;){var L=R.value;L.primitiveName!==C&&L.primitiveName!==_||(void 0!==L.value?B+="-".concat(L.primitiveName,"-").concat(L.propertyName,"-").concat(JSON.stringify(L.value)):L.valueExpressionInfo&&(N=!0))}}catch(V){F.e(V)}finally{F.f()}var U=JSON.stringify(m(m({},e),{},{markerGraphics:null})),G=Object(f.b)(JSON.stringify(I)).toString(),z={type:"marker",templateHash:Object(f.b)(JSON.stringify(t)+JSON.stringify(w)+U+B).toString(),materialHash:N?function(){return G}:G,cim:I,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:u,anchorPoint:{x:j,y:x},isAbsoluteAnchorPoint:!1,size:W(e.primitiveName,n,"Size",i,S),rotation:W(e.primitiveName,n,"Rotation",i,T),offsetX:W(e.primitiveName,n,"OffsetX",i,A),offsetY:W(e.primitiveName,n,"OffsetY",i,M),scaleX:1,frameHeight:l,rotateClockwise:e.rotateClockwise,referenceSize:s,sizeRatio:O,color:W(C,n,"Color",i,P,J),outlineColor:W(C,n,"Color",i,D,J),outlineWidth:W(C,n,"Width",i,E),markerPlacement:e.markerPlacement};return o.push(z),"break"}();if("continue"===j)continue;if("break"===j)break;default:V(e,t,n,r,i,o,u,s,l)}}}}function V(e,t,r,n,i,o,u,s,l){var h,d=function(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}(e,t),y=["Rotation","OffsetX","OffsetY"];h=n.filter((function(t){return t.primitiveName!==e.primitiveName||-1===y.indexOf(t.propertyName)}));var v,b="",m=g(n);try{for(m.s();!(v=m.n()).done;){var O=v.value;void 0!==O.value&&(b+="-".concat(O.primitiveName,"-").concat(O.propertyName,"-").concat(JSON.stringify(O.value)))}}catch(P){m.e(P)}finally{m.f()}var w=p.a.getTextureAnchor(d),j=Object(a.a)(w,3),x=j[0],k=j[1],I=j[2],_=e.primitiveName,S=e.rotation||0,T=e.offsetX||0,A=e.offsetY||0,M=Object(f.b)(JSON.stringify(d)+b).toString(),C={type:"marker",templateHash:M,materialHash:0===h.length?M:q(M,r,h,i),cim:d,materialOverrides:h,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:u,anchorPoint:{x:x,y:k},isAbsoluteAnchorPoint:!1,size:e.size,rotation:W(_,r,"Rotation",i,S),offsetX:W(_,r,"OffsetX",i,T),offsetY:W(_,r,"OffsetY",i,A),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:l,rotateClockwise:e.rotateClockwise,referenceSize:s,sizeRatio:I/Object(c.c)(e.size),markerPlacement:e.markerPlacement};o.push(C)}function H(e){if(e&&0===e.indexOf("Level_")){var t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function J(e){if(!e||0===e.length)return null;var t=new s.a(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function W(e,t,r,n,a,i,o){var u=t[e];if(u){var s=u[r];if("string"==typeof s||"number"==typeof s||s instanceof Array)return i?i.call(null,s,o):s;if(null!=s&&s instanceof h.a)return function(e,t,r){var u=Object(v.a)(s,e,{$view:r},n.geometryType,t);return null!==u&&i&&(u=i.call(null,u,o)),null!==u?u:a}}return a}function q(e,t,r,n){var a,i=g(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.valueExpressionInfo&&function(){var e=t[o.primitiveName]&&t[o.primitiveName][o.propertyName];e instanceof h.a&&(o.fn=function(t,r,a){return Object(v.a)(e,t,{$view:a},n.geometryType,r)})}()}}catch(u){i.e(u)}finally{i.f()}return function(t,n,a){var i,o=g(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.fn&&(s.value=s.fn(t,n,a))}}catch(u){o.e(u)}finally{o.f()}return Object(f.b)(e+p.b.buildOverrideKey(r)).toString()}}function Z(e,t){if(!t||0===t.length)return e;var r=JSON.parse(JSON.stringify(e));return p.b.applyOverrides(r,t),r}function Y(e,t){var r,n=!1,a="",i=g(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.primitiveName===t&&(void 0!==o.value?a+="-".concat(o.primitiveName,"-").concat(o.propertyName,"-").concat(JSON.stringify(o.value)):o.valueExpressionInfo&&(n=!0))}}catch(u){i.e(u)}finally{i.f()}return[n,a]}},HpMY:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l}));var n=r("WYis"),a=r("jaCC"),i=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],o={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};function u(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]>t[r]+2||e[r]<t[r]-2)return!1;return!0}function s(e,t,r){var n=Object(a.b)(e),i=Object(a.b)(t),o={l:n.l*(1-r)+r*i.l,a:n.a*(1-r)+r*i.a,b:n.b*(1-r)+r*i.b};return Object(a.d)(o)}function l(e){var t=function(e,t){if(e){var r,a=t||i,o=null;return"algorithmic"===e.type?a.some((function(t){if(u(e.fromColor.toRgb(),t.fromColor)&&u(e.toColor.toRgb(),t.toColor))return o=t.id,!0})):"multipart"===e.type&&a.some((function(t){if(e.colorRamps&&t.colorRamps&&e.colorRamps.length===t.colorRamps.length&&(r=e.colorRamps,!t.colorRamps.some((function(e,t){if(!u(r[t].fromColor.toRgb(),new n.a(e.fromColor).toRgb())||!u(r[t].toColor.toRgb(),new n.a(e.toColor).toRgb()))return!0})))){if(o)return!0;o=t.id}})),o}}(e);return t?o[t]:null}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t&&!(t<1)){var n,a,i,o,u,l="toJSON"in e?e.toJSON():e,c="multipart"===l.type?l.colorRamps.length:1,f=[],h=[],p=0;if(1===t)return n="multipart"===l.type?l.colorRamps[0].fromColor:l.fromColor,h.push([0].concat(n)),h;for(var d=0;d<c;d++)f[d]={start:null,end:null},f[d].start=p,f[d].end=p+1/c,p=f[d].end;for(var y=function(e){o=e/(t-1),f.forEach((function(f,p){if(o>=f.start&&(o<f.end||e===t-1&&p===c-1)){u=(o-f.start)/(f.end-f.start),"multipart"===l.type?(n=l.colorRamps[p].fromColor,a=l.colorRamps[p].toColor):(n=l.fromColor,a=l.toColor),0===e?h.push([e].concat(n.slice(0,3))):e===t-1?h.push([e].concat(a.slice(0,3))):(i=s({r:n[0],g:n[1],b:n[2]},{r:a[0],g:a[1],b:a[2]},u),h.push([e,i.r,i.g,i.b]));var d=null!=n[3]?n[3]>1?n[3]/255:n[3]:1,y=null!=a[3]?a[3]>1?a[3]/255:a[3]:1;r&&h[e].push(Math.min(255,Math.round(255*(d*(1-u)+y*u))))}}))},v=0;v<t;v++)y(v);return h}}},IjGd:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("W32V");function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(){function e(t,r){var a=this;if(Object(n.a)(this,e),this._style=t,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,t.layers||(t.layers=[]),this.version=parseFloat(t.version),this.sprite=r?r.spriteUrl:t.sprite,this.glyphs=r?r.glyphsUrl:t.glyphs,this.layers=t.layers.map((function(e,t,r){return a._create(e,t,r)})),this.layers)for(var i,o=0;o<this.layers.length;o++)i=this.layers[o],this._layerByName[i.id.toLowerCase()]=i,this._uidToLayer.set(i.uid,i),0===i.type&&this.backgroundBucketIds.push(i.id);this._identifyRefLayers()}return Object(a.a)(e,[{key:"isPainterDataDriven",value:function(e){var t=this._layerByName[e.toLowerCase()];return!!t&&t.isPainterDataDriven()}},{key:"getStyleLayerId",value:function(e){return e>=this.layers.length?null:this.layers[e].id}},{key:"getStyleLayerByUID",value:function(e){var t=this._uidToLayer.get(e);return null!=t?t:null}},{key:"getStyleLayerIndex",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?this.layers.indexOf(t):-1}},{key:"setStyleLayer",value:function(t,r){if(t&&t.id){var n=this._style;null!=r&&r>=this.layers.length&&(r=this.layers.length-1);var a,i=!0,o=this._layerByName[t.id.toLowerCase()];if(o){var u=this.layers.indexOf(o);r||(r=u),r===u?(i=!1,a=e._recreateLayer(t,o),this.layers[r]=a,n.layers[r]=t):(this.layers.splice(u,1),n.layers.splice(u,1),a=this._create(t,r,this.layers),this.layers.splice(r,0,a),n.layers.splice(r,0,t))}else a=this._create(t,r,this.layers),!r||r>=this.layers.length?(this.layers.push(a),n.layers.push(t)):(this.layers.splice(r,0,a),n.layers.splice(r,0,t));this._layerByName[t.id.toLowerCase()]=a,this._uidToLayer.set(a.uid,a),i&&this._recomputeZValues(),this._identifyRefLayers()}}},{key:"getStyleLayer",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?{type:t.typeName,id:t.id,source:t.source,"source-layer":t.sourceLayer,minzoom:t.minzoom,maxzoom:t.maxzoom,filter:t.filter,layout:t.layout,paint:t.paint}:null}},{key:"deleteStyleLayer",value:function(e){var t=this._layerByName[e.toLowerCase()];if(t){delete this._layerByName[e.toLowerCase()],this._uidToLayer.delete(t.uid);var r=this.layers.indexOf(t);this.layers.splice(r,1),this._style.layers.splice(r,1),this._recomputeZValues(),this._identifyRefLayers()}}},{key:"getLayerById",value:function(e){return this._layerByName[e.toLowerCase()]}},{key:"getLayoutProperties",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?t.layout:null}},{key:"getPaintProperties",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?t.paint:null}},{key:"setPaintProperties",value:function(t,r){var n=this._layerByName[t.toLowerCase()];if(n){var a={type:n.typeName,id:n.id,source:n.source,"source-layer":n.sourceLayer,minzoom:n.minzoom,maxzoom:n.maxzoom,filter:n.filter,layout:n.layout,paint:r},i=e._recreateLayer(a,n),o=this.layers.indexOf(n);this.layers[o]=i,this._style.layers[o].paint=r,this._layerByName[n.id.toLowerCase()]=i,this._uidToLayer.set(n.uid,i)}}},{key:"setLayoutProperties",value:function(t,r){var n=this._layerByName[t.toLowerCase()];if(n){var a={type:n.typeName,id:n.id,source:n.source,"source-layer":n.sourceLayer,minzoom:n.minzoom,maxzoom:n.maxzoom,filter:n.filter,layout:r,paint:n.paint},i=e._recreateLayer(a,n),o=this.layers.indexOf(n);this.layers[o]=i,this._style.layers[o].layout=r,this._layerByName[n.id.toLowerCase()]=i,this._uidToLayer.set(n.uid,i)}}},{key:"setStyleLayerVisibility",value:function(t,r){var n=this._layerByName[t.toLowerCase()];if(n){var a=n.layout||{};a.visibility=r;var i={type:n.typeName,id:n.id,source:n.source,"source-layer":n.sourceLayer,minzoom:n.minzoom,maxzoom:n.maxzoom,filter:n.filter,layout:a,paint:n.paint},o=e._recreateLayer(i,n),u=this.layers.indexOf(n);this.layers[u]=o,this._style.layers[u].layout=a,this._layerByName[n.id.toLowerCase()]=o,this._uidToLayer.set(n.uid,o)}}},{key:"getStyleLayerVisibility",value:function(e){var t,r=this._layerByName[e.toLowerCase()];if(!r)return"none";var n=r.layout;return null!=(t=null==n?void 0:n.visibility)?t:"visible"}},{key:"_recomputeZValues",value:function(){for(var e=this.layers,t=1/(e.length+1),r=0;r<e.length;r++)e[r].z=1-(1+r)*t}},{key:"_identifyRefLayers",value:function(){var e,t=[],r=[],n=0,a=o(this.layers);try{for(a.s();!(e=a.n()).done;){var i=e.value,u=i.layout;if(1===i.type){var s,l=i,c=i.source+"|"+i.sourceLayer;c+=null!=(s="|"+(null==u?void 0:u.visibility))?s:"",c+="|"+i.minzoom,c+="|"+i.maxzoom,c+="|"+JSON.stringify(i.filter),(l.hasDataDrivenFill||l.hasDataDrivenOutline)&&(c+="|"+n),t.push({key:c,layer:i})}else if(2===i.type){var f,h=i,p=i.source+"|"+i.sourceLayer;p+=null!=(f="|"+(null==u?void 0:u.visibility))?f:"",p+="|"+i.minzoom,p+="|"+i.maxzoom,p+="|"+JSON.stringify(i.filter),p+="|"+(void 0!==u?u["line-cap"]:""),p+="|"+(void 0!==u?u["line-join"]:""),h.hasDataDrivenLine&&(p+="|"+n),r.push({key:p,layer:i})}++n}}catch(d){a.e(d)}finally{a.f()}this._assignRefLayers(t),this._assignRefLayers(r)}},{key:"_assignRefLayers",value:function(e){var t,r;e.sort((function(e,t){return e.key<t.key?-1:e.key>t.key?1:0}));for(var n=e.length,a=0;a<n;a++){var i=e[a];if(i.key===t)i.layer.refLayerId=r;else if(t=i.key,r=i.layer.id,1===i.layer.type){if(!i.layer.getPaintProperty("fill-outline-color"))for(var o=a+1;o<n;o++){var u=e[o];if(u.key!==t)break;if(u.layer.getPaintProperty("fill-outline-color")){e[a]=u,e[o]=i,r=u.layer.id;break}}}else if(2===i.layer.type)for(var s=i.layer,l=a+1;l<n;l++){var c=e[l];if(c.key!==t)break;var f=c.layer;(s.canUseThinTessellation&&!f.canUseThinTessellation||!s.canUseThinTessellation&&(f.getPaintProperty("line-pattern")||f.getPaintProperty("line-dasharray")))&&(s=f,e[a]=c,e[l]=i,r=c.layer.id)}}}},{key:"_create",value:function(e,t,r){var n=1-(1+t)*(1/(r.length+1)),a=this._runningId++;switch(e.type){case"background":return new i.a(0,e,n,a);case"fill":return new i.c(1,e,n,a);case"line":return new i.e(2,e,n,a);case"symbol":return new i.f(3,e,n,a);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new i.b(4,e,n,a)}throw new Error("Unknown vector tile layer")}}],[{key:"_recreateLayer",value:function(e,t){switch(e.type){case"background":return new i.a(0,e,t.z,t.uid);case"fill":return new i.c(1,e,t.z,t.uid);case"line":return new i.e(2,e,t.z,t.uid);case"symbol":return new i.f(3,e,t.z,t.uid);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new i.b(4,e,t.z,t.uid)}}}]),e}();t.a=s},JKOu:function(e,t,r){"use strict";var n=r("mK0O"),a=r("hisu"),i=r("yBJb"),o=r("CHlC"),u=r("kMo5"),s=r("P+uj"),l=r("dQW7"),c=r("jaCC"),f=r("0n+b"),h=r("TM+E"),p=r("7im+"),d=r("xAIp"),y=(r("J4Pc"),r("wckI"),r("iaHD")),v=r("NSiF"),b=r("WBSb"),m=r("aNYv"),g=r("sE9J"),O=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0};function w(e){var t=e.altitude,r=e.azimuth,n=e.hillshadeType,a=e.pixelSizePower,i=e.pixelSizeFactor,o=e.scalingType,u=e.isGCS,s=e.resolution,l="multi-directional"===n?2*e.zFactor:e.zFactor,c=s.x,f=s.y,h=l/(8*c),p=l/(8*f);if(u&&l>.001&&(h/=111e3,p/=111e3),"adjusted"===o)if(u){var d=111e3*c,y=111e3*f;h=(l+Math.pow(d,a)*i)/(8*d),p=(l+Math.pow(y,a)*i)/(8*y)}else h=(l+Math.pow(c,a)*i)/(8*c),p=(l+Math.pow(f,a)*i)/(8*f);var v=(90-t)*Math.PI/180,b=Math.cos(v),m=(360-r+90)*Math.PI/180,g=Math.sin(v)*Math.cos(m),O=Math.sin(v)*Math.sin(m),w=[315,270,225,360,180,0],j=[60,60,60,60,60,90],x=new Float32Array([3,5,3,2,1,4]),k=x.reduce((function(e,t){return e+t})),I=x.map((function(e){return e/k})),_="multi-directional"===n?w.length:1,S=new Float32Array(6),T=new Float32Array(6),A=new Float32Array(6);if("multi-directional"===n)for(var M=0;M<_;M++)r=w[M],v=(90-(t=j[M]))*Math.PI/180,b=Math.cos(v),m=(360-r+90)*Math.PI/180,g=Math.sin(v)*Math.cos(m),O=Math.sin(v)*Math.sin(m),S[M]=b,T[M]=g,A[M]=O;else S.fill(b),T.fill(g),A.fill(O);return{resolution:s,factor:[h,p],sinZcosA:g,sinZsinA:O,cosZ:b,sinZcosAs:T,sinZsinAs:A,cosZs:S,weights:I,hillshadeType:["traditional","multi-directional"].indexOf(n)}}var j=r("HpMY");function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var _=h.a.getLogger("esri.renderers.support.RasterSymbolizer");var S={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},T=function(e){Object(o.a)(r,e);var t=I(r);function r(e){return Object(a.a)(this,r),t.call(this,e)}return Object(i.a)(r,[{key:"bind",value:function(){var e,t=this.rendererJSON;if(!t)return!1;switch(this.lookup={rendererJSON:{}},t.type){case"uniqueValue":e=this._updateUVRenderer(t);break;case"rasterColormap":e=this._updateColormapRenderer(t);break;case"rasterStretch":e=this._updateStretchRenderer(t);break;case"classBreaks":e=this._updateClassBreaksRenderer(t);break;case"rasterShadedRelief":e=this._updateShadedReliefRenderer(t)}return e}},{key:"symbolize",value:function(e){var t=e&&e.pixelBlock;if(!this.isValidPixelBlock(t))return t;if(e.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(t,e.simpleStretchParams);try{var r;switch(t.pixels.length>3&&(t=Object(b.h)(t,[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolize_colormap(t);break;case"classBreaks":r=this._symbolize_classBreaks(t);break;case"rasterStretch":r=this._symbolize_stretch(t,e.bandIds);break;case"rasterShadedRelief":var n=e.extent,a=n.spatialReference.isGeographic,i={x:(n.xmax-n.xmin)/t.width,y:(n.ymax-n.ymin)/t.height};r=this._symbolize_shadedRelief(t,{isGCS:a,resolution:i})}return r}catch(o){return _.error("symbolize",o.message),t}}},{key:"simpleStretch",value:function(e,t){if(!this.isValidPixelBlock(e))return e;try{return e.pixels.length>3&&(e=Object(b.h)(e,[0,1,2])),Object(b.o)(e,t)}catch(r){return _.error("symbolize",r.message),e}}},{key:"generateWebGLParameters",value:function(e){if(["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)>-1){var t,r=(null==(t=this.lookup)?void 0:t.colormapLut)||{};return{colormap:r.indexedColormap,colormapOffset:r.offset,type:"lut"}}var n=e.pixelBlock,a=e.isGCS,i=e.resolution,o=e.bandIds,u=this.rendererJSON;return"rasterStretch"===u.type?this.generateStretchWebGLParams(n,u,o):"rasterShadedRelief"===u.type?this.generateShadedReliefWebGLParams(u,a,i):null}},{key:"_isLUTChanged",value:function(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){var t=this.rendererJSON.colorRamp;return e?JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}},{key:"_symbolize_colormap",value:function(e){return this._isLUTChanged()&&!this.bind()?e:Object(b.b)(e,this.lookup.colormapLut)}},{key:"_symbolize_classBreaks",value:function(e){var t=this.rasterInfo.pixelType,r=["u8","u16","s8","s16"].indexOf(t)>-1;return this._isLUTChanged()&&!this.bind()?e:r?Object(b.b)(e,this.lookup.colormapLut):Object(b.l)(e,this.lookup.remapLut)}},{key:"_symbolize_stretch",value:function(e,t){var r,n,a=this.rasterInfo,i=a.pixelType,o=a.bandCount,u=this.rendererJSON,s=["u8","u16","s8","s16"].indexOf(i)>-1,l=u.dra,c=u.useGamma?u.gamma:null;if("histogramEqualization"===u.stretchType){var f=l?null:this.lookup.histogramLut,h=this.getStretchCutoff(u,e,t,!f),p=Object(b.o)(e,k(k({},h),{},{gamma:c}));n=Object(b.i)(p,{lut:l?h.histogramLut:f,offset:0})}else if(s){var d;if(l){var y=this.getStretchCutoff(u,e,t);r=Object(b.e)(k(k({pixelType:i},y),{},{gamma:c}))}else if(this._isLUTChanged()){if(!this.bind())return e;r=this.lookup?this.lookup.stretchLut:null}else r=this.lookup?this.lookup.stretchLut:null;if(!r)return e;o>1&&(null==t?void 0:t.length)===e.pixels.length&&(null==(d=r)?void 0:d.lut.length)===o&&(r={lut:t.map((function(e){return r.lut[e]})),offset:r.offset}),n=Object(b.i)(e,r)}else{var v=this.getStretchCutoff(u,e,t);n=Object(b.o)(e,k(k({},v),{},{gamma:c}))}if(u.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return e;n=Object(b.b)(n,this.lookup.colormapLut)}return n}},{key:"_symbolize_shadedRelief",value:function(e,t){var r,n,a,i=this.rendererJSON,o=function(e,t){if(!O(e))return e;var r=e.width,n=e.height,a=e.mask,i=new Uint8Array(r*n);a&&i.set(a);for(var o,u,s,l,c,f,h,p,d=w(t),y=d.factor,v=d.sinZcosA,b=d.sinZsinA,j=d.cosZ,x=d.sinZcosAs,k=d.sinZsinAs,I=d.cosZs,_=d.weights,S=Object(m.a)(y,2),T=S[0],A=S[1],M=t.hillshadeType,C=e.pixels[0],P=new Uint8Array(r*n),D=1;D<n-1;D++)for(var E=D*r,R=1;R<r-1;R++)if(!a||a[E+R]){var N=8;if(a&&(N=a[E-r+R-1]+a[E-r+R]+a[E-r+R+1]+a[E+R-1]+a[E+R+1]+a[E+r+R-1]+a[E+r+R]+a[E+r+R+1])<7)P[E+R]=0,i[E+R]=0;else{7===N?(o=a[E-r+R-1]?C[E-r+R-1]:C[E+R],u=a[E-r+R]?C[E-r+R]:C[E+R],s=a[E-r+R+1]?C[E-r+R+1]:C[E+R],l=a[E+R-1]?C[E+R-1]:C[E+R],c=a[E+R+1]?C[E+R+1]:C[E+R],f=a[E+r+R-1]?C[E+r+R-1]:C[E+R],h=a[E+r+R]?C[E+r+R]:C[E+R],p=a[E+r+R+1]?C[E+r+R+1]:C[E+R]):(o=C[E-r+R-1],u=C[E-r+R],s=C[E-r+R+1],l=C[E+R-1],c=C[E+R+1],f=C[E+r+R-1],h=C[E+r+R],p=C[E+r+R+1]);var B=(s+c+c+p-(o+l+l+f))*T,F=(f+h+h+p-(o+u+u+s))*A,L=Math.sqrt(1+B*B+F*F),U=0;if("traditional"===M){var G=255*(j+b*F-v*B)/L;G<0&&(G=0),U=G}else for(var z=k.length,V=0;V<z;V++){var H=255*(I[V]+k[V]*F-x[V]*B)/L;H<0&&(H=0),U+=H*_[V]}P[E+R]=255&U}}else P[E+R]=0;for(var J=0;J<n;J++)P[J*r]=P[J*r+1],P[(J+1)*r-1]=P[(J+1)*r-2];for(var W=1;W<r-1;W++)P[W]=P[W+r],P[W+(n-1)*r]=P[W+(n-2)*r];return new g.a({width:r,height:n,pixels:[P],mask:a?i:null,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}(e,k(k({},i),t));if(!i.colorRamp)return o;if(this._isLUTChanged(!0)){if(!this.bind())return o;a=this.lookup?this.lookup.hsvMap:null}else a=this.lookup?this.lookup.hsvMap:null;return a?(function(e,t,r,n){if(O(e)&&O(t)){for(var a=n.min,i=n.max,o=e.pixels[0],u=t.pixels,s=t.mask,l=u[0],c=255.00001/(i-a),f=new Uint8ClampedArray(l.length),h=new Uint8ClampedArray(l.length),p=new Uint8ClampedArray(l.length),d=r.length-1,y=0;y<l.length;y++)if(!s||0!==s[y]){var v=Math.floor((l[y]-a)*c),b=Object(m.a)(r[v<0?0:v>d?d:v],2),g=b[0],w=b[1],j=o[y],x=j*w,k=x*(1-Math.abs(g%2-1)),I=j-x;switch(Math.floor(g)){case 0:f[y]=x+I,h[y]=k+I,p[y]=I;break;case 1:f[y]=k+I,h[y]=x+I,p[y]=I;break;case 2:f[y]=I,h[y]=x+I,p[y]=k+I;break;case 3:f[y]=I,h[y]=k+I,p[y]=x+I;break;case 4:f[y]=k+I,h[y]=I,p[y]=x+I;break;case 5:case 6:f[y]=x+I,h[y]=I,p[y]=k+I}}e.pixels=[f,h,p],e.updateStatistics()}}(o,e,a,null!=(r=null==(n=Object(p.p)(this.rasterInfo.statistics))?void 0:n[0])?r:{min:0,max:8e3}),o):o}},{key:"_updateUVRenderer",value:function(e){var t=this.rasterInfo,r=t.bandCount,n=t.attributeTable,a=t.pixelType,i=e.field1;if(!i)return!1;var o=1===r&&["u8","s8"].includes(a);if(!function(e,t){var r=e.attributeTable,n=e.bandCount;return!(!Object(p.i)(r)||n>1)&&(!t||null!=r.fields.find((function(e){return e.name.toLowerCase()===t.toLowerCase()})))}(this.rasterInfo,i)&&!o)return!1;var u=[];if(n){var s=n.fields.filter((function(e){return"value"===e.name.toLowerCase()}))[0];if(!s)return!1;n.features.forEach((function(t){var r,n=e.uniqueValueInfos.filter((function(e){return String(e.value)===String(t.attributes[i])}))[0],a=null==n||null==(r=n.symbol)?void 0:r.color;a&&u.push([t.attributes[s.name]].concat(a))}))}else{if("value"!==i.toLowerCase())return!1;e.uniqueValueInfos.forEach((function(e){var t,r=null==e||null==(t=e.symbol)?void 0:t.color;r&&u.push([parseInt(""+e.value,10)].concat(r))}))}if(0===u.length)return!1;var l=Object(b.c)({colormap:u});return this.lookup={rendererJSON:e,colormapLut:l},this.canRenderInWebGL=!0,!0}},{key:"_updateColormapRenderer",value:function(e){if(!function(e){var t=e.bandCount,r=e.colormap;return Object(p.i)(r)&&r.length&&1===t}(this.rasterInfo))return!1;var t=e.colormapInfos.map((function(e){return[e.value].concat(e.color)})).sort((function(e,t){return e[0]-t[0]}));if(!t||0===t.length)return!1;var r=Object(b.c)({colormap:t});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=!0,!0}},{key:"_updateShadedReliefRenderer",value:function(e){if(!function(e){return"elevation"===e.dataType}(this.rasterInfo))return!1;if(e.colorRamp){for(var t=Object(j.b)(e.colorRamp,256,!0),r=Object(b.c)({colormap:t}),n=[],a=r.indexedColormap,i=0;i<a.length;i+=4){var o=Object(c.a)({r:a[i],g:a[i+1],b:a[i+2]});n.push([o.h/60,o.s/100,255*o.v/100])}this.lookup={rendererJSON:e,colormapLut:r,hsvMap:n}}else this.lookup=null;return this.canRenderInWebGL=!0,!0}},{key:"_updateClassBreaksRenderer",value:function(e){var t=this.rasterInfo.pixelType,r=["u8","u16","s8","s16"].indexOf(t)>-1,n=e.classBreakInfos;if(null==n||!n.length)return!1;var a=n.sort((function(e,t){return e.classMaxValue-t.classMaxValue})),i=a[a.length-1],o=e.minValue;if(!r){for(var u=[],s=0;s<a.length;s++){var l;u.push({value:null!=(l=a[s].classMinValue)?l:o,mappedColor:a[s].symbol.color}),o=a[s].classMaxValue}return u.push({value:i.classMaxValue,mappedColor:i.symbol.color}),this.lookup={rendererJSON:e,remapLut:u},this.canRenderInWebGL=!1,!0}var c=[];o=Math.floor(e.minValue);for(var f=0;f<a.length;f++){for(var h=a[f],p=o;p<h.classMaxValue;p++)c.push([p].concat(h.symbol.color));o=Math.ceil(h.classMaxValue)}i.classMaxValue===o&&c.push([i.classMaxValue].concat(i.symbol.color));var d=Object(b.c)({colormap:c,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:d},this.canRenderInWebGL=!0,!0}},{key:"_isHistogramRequired",value:function(e){return"percentClip"===e||"histogramEqualization"===e}},{key:"_isValidRasterStatistics",value:function(e){return Object(p.i)(e)&&e.length>0&&null!=e[0].min&&null!=e[0].max}},{key:"_updateStretchRenderer",value:function(e){var t,r=e.stretchType,n=e.dra;if(!("none"===r||null!=(t=e.statistics)&&t.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||n))return!1;var a=Object(p.p)(e.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(e.stretchType)||null!=a&&a.length||n||(r="minMax");var i=e.gamma,o=e.useGamma,u=e.colorRamp,s=this.rasterInfo.pixelType,l=!n&&["u8","u16","s8","s16"].indexOf(s)>-1;if("histogramEqualization"===r){var c=a.map((function(e){return Object(b.d)(e)}));this.lookup={rendererJSON:e,histogramLut:c}}else if(l){var f=this.getStretchCutoff(e),h=Object(b.e)(k(k({pixelType:s},f),{},{gamma:o?i:null}));this.lookup={rendererJSON:e,stretchLut:h}}if(u){var d=Object(j.b)(u,256,!0);this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=Object(b.c)({colormap:d}),this.lookup.rendererJSON=e}return this.canRenderInWebGL=!0,!0}},{key:"getStretchCutoff",value:function(e,t,r,n){var a,i,o,u,s,l,c=e.stretchType;if(e.dra)if("minMax"===c&&t.statistics)u=t.statistics.map((function(e){return[e.minValue,e.maxValue,0,0]}));else{var f=Object(b.g)(t);u=f.statistics,s=f.histograms}else u=(null==(l=e.statistics)?void 0:l.length)>0?e.statistics:Object(p.p)(this.rasterInfo.statistics),s=e.histograms||Object(p.p)(this.rasterInfo.histograms);!this._isHistogramRequired(c)||null!=(a=s)&&a.length||(c="minMax");var h,d,y,v,m,g,O,w,j,x,k,I,_=(null==(i=u)?void 0:i.length)||(null==(o=s)?void 0:o.length)||this.rasterInfo.bandCount,T=[],A=[];switch(u&&!Array.isArray(u[0])&&(u=u.map((function(e){return[e.min,e.max,e.avg,e.stddev]}))),c){case"none":var M=S[this.rasterInfo.pixelType]||S.f32;for(w=0;w<_;w++)T[w]=M[0],A[w]=M[1];break;case"minMax":for(w=0;w<_;w++)T[w]=u[w][0],A[w]=u[w][1];break;case"standardDeviation":for(w=0;w<_;w++)T[w]=u[w][2]-e.numberOfStandardDeviations*u[w][3],A[w]=u[w][2]+e.numberOfStandardDeviations*u[w][3],T[w]<u[w][0]&&(T[w]=u[w][0]),A[w]>u[w][1]&&(A[w]=u[w][1]);break;case"histogramEqualization":for(w=0;w<_;w++)T[w]=s[w].min,A[w]=s[w].max;break;case"percentClip":for(w=0;w<s.length;w++){for(h=s[w],m=new Uint32Array(h.size),v=h.counts,y=0,d=(h.max-h.min)/h.size,O=-.5===h.min&&1===d?.5:0,j=0;j<h.size;j++)y+=v[j],m[j]=y;for(g=e.minPercent*y/100,j=0;j<h.size;j++)if(m[j]>g){T[w]=h.min+d*(j+O);break}for(g=(1-e.maxPercent/100)*y,j=h.size-2;j>=0;j--)if(m[j]<g){A[w]=h.min+d*(j+2-O);break}}break;default:for(w=0;w<_;w++)T[w]=u[w][0],A[w]=u[w][1]}"histogramEqualization"===c?(k=s[0].size||256,x=0,n&&(I=s.map((function(e){return Object(b.d)(e)})))):(k=e.max||255,x=e.min||0);var C={minCutOff:T,maxCutOff:A,outMax:k,outMin:x,histogramLut:I};return this.getSelectedBandCutoffs(C,r)}},{key:"getSelectedBandCutoffs",value:function(e,t){if(null==t||0===t.length)return e;var r=Math.max.apply(null,t),n=e.minCutOff,a=e.maxCutOff,i=e.outMin,o=e.outMax,u=e.histogramLut;return n.length===t.length||n.length<=r?e:{minCutOff:t.map((function(e){return n[e]})),maxCutOff:t.map((function(e){return a[e]})),histogramLut:u?t.map((function(e){return u[e]})):null,outMin:i,outMax:o}}},{key:"generateStretchWebGLParams",value:function(e,t,r){var n,a=null,i=null,o=this.lookup&&this.lookup.colormapLut;t.colorRamp&&o&&(a=o.indexedColormap,i=o.offset),"histogramEqualization"===t.stretchType&&(t=k(k({},t),{},{stretchType:"minMax"}));var u=t.gamma,s=!!(t.useGamma&&u&&u.some((function(e){return 1!==e}))),l=this.getStretchCutoff(t,e,r),c=l.minCutOff,f=l.maxCutOff,h=l.outMin,p=l.outMax,d=null==(n=e)?void 0:n.getPlaneCount();2===d&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]);var y,v=Math.min(3,(null==r?void 0:r.length)||d||this.rasterInfo.bandCount),b=new Float32Array(v),m=a||s?1:255;for(y=0;y<v;y++)b[y]=(p-h)/(f[y]-c[y])/m;var g=new Float32Array(v);if(s)for(y=0;y<v;y++)u[y]>1?u[y]>2?g[y]=6.5+Math.pow(u[y]-2,2.5):g[y]=6.5+100*Math.pow(2-u[y],4):g[y]=1;return{bandCount:v,outMin:h/m,outMax:p/m,minCutOff:c,maxCutOff:f,factor:b,useGamma:s,gamma:s?u:[1,1,1],gammaCorrection:s?g:[1,1,1],colormap:a,colormapOffset:i,type:"stretch"}}},{key:"generateShadedReliefWebGLParams",value:function(e,t,r){var n,a,i,o=null,u=null,s=this.lookup&&this.lookup.colormapLut;e.colorRamp&&s&&(o=s.indexedColormap,u=s.offset);var l=w(k(k({},e),{},{isGCS:t,resolution:r})),c=null==(n=Object(p.p)(this.rasterInfo.statistics))?void 0:n[0];return k(k({},l),{},{minValue:null!=(a=null==c?void 0:c.min)?a:0,maxValue:null!=(i=null==c?void 0:c.max)?i:8e3,hillshadeType:"traditional"===e.hillshadeType?0:1,type:"hillshade",colormap:o,colormapOffset:u})}},{key:"isValidPixelBlock",value:function(e){return!!(e&&e.pixels&&e.pixels.length>0&&0!==e.validPixelCount)}}]),r}(f.a);Object(l.a)([Object(d.b)({json:{write:!0}})],T.prototype,"rendererJSON",void 0),Object(l.a)([Object(d.b)({type:v.a,json:{write:!0}})],T.prototype,"rasterInfo",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],T.prototype,"lookup",void 0),Object(l.a)([Object(d.b)()],T.prototype,"canRenderInWebGL",void 0);var A=T=Object(l.a)([Object(y.a)("esri.renderers.support.RasterSymbolizer")],T);t.a=A},JUpu:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=function(){function e(){Object(n.a)(this,e),this._databaseTypeMetaData={},this._layerInfo={}}return Object(a.a)(e,[{key:"clearDatabaseType",value:function(e){void 0===this._databaseTypeMetaData[e]&&delete this._databaseTypeMetaData[e]}},{key:"getDatabaseType",value:function(e){return"MUSTBESET"===e||void 0===this._databaseTypeMetaData[e]?null:this._databaseTypeMetaData[e]}},{key:"setDatabaseType",value:function(e,t){this._databaseTypeMetaData[e]=t}},{key:"getLayerInfo",value:function(e){return void 0===this._layerInfo[e]?null:this._layerInfo[e]}},{key:"setLayerInfo",value:function(e,t){this._layerInfo[e]=t}},{key:"clearLayerInfo",value:function(e){void 0!==this._layerInfo[e]&&delete this._layerInfo[e]}}]),e}();i.applicationCache=null,t.a=i},JqcG:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return p}));var n=r("mK0O"),a=r("aNYv"),i=r("lZmO"),o=r("Vs6/");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var s={ar:[".",","],bs:[",","."],ca:[",","."],cs:[","," "],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[","," "],fi:[","," "],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[","," "],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[","," "],lv:[","," "],mk:[",","."],nb:[","," "],nl:[",","."],pl:[","," "],pt:[",","."],"pt-pt":[","," "],ro:[",","."],ru:[","," "],sk:[","," "],sl:[",","."],sr:[",","."],sv:[","," "],th:[".",","],tr:[",","."],uk:[","," "],vi:[",","."],zh:[".",","]};function l(e){e||(e=Object(o.b)());var t=e in s;if(!t){var r=e.split("-");r.length>1&&r[0]in s&&(e=r[0],t=!0),t||(e="en")}var n=Object(a.a)(s[e],3),i=n[0],u=n[1],l=n[2];return{decimal:i,group:u,pattern:void 0===l?"#,##0.###":l}}function c(e,t){var r=l((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t)).locale);t.customs=r;var a=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,r){var n=(r=r||{}).customs.group,a=r.customs.decimal,i=t.split(";"),o=i[0];if(-1!==(t=i[e<0?1:0]||"-"+o).indexOf("%"))e*=100;else if(-1!==t.indexOf("‰"))e*=1e3;else{if(-1!==t.indexOf("¤"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}var u=f,s=o.match(u);if(!s)throw new Error("unable to find a number expression in pattern: "+t);return!1===r.fractional&&(r.places=0),t.replace(u,function(e,t,r){!0===(r=r||{}).places&&(r.places=0),r.places===1/0&&(r.places=6);var n=t.split("."),a="string"==typeof r.places&&r.places.indexOf(","),i=r.places;a?i=r.places.substring(a+1):i>=0||(i=(n[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(i))));var o=String(Math.abs(e)).split("."),u=o[1]||"";if(n[1]||r.places){a&&(r.places=r.places.substring(0,a));var s=void 0!==r.places?r.places:n[1]&&n[1].lastIndexOf("0")+1;s>u.length&&(o[1]=u.padEnd(Number(s),"0")),i<u.length&&(o[1]=u.substr(0,Number(i)))}else o[1]&&o.pop();var l=n[0].replace(",",""),c=l.indexOf("0");-1!==c&&((c=l.length-c)>o[0].length&&(o[0]=o[0].padStart(c,"0")),-1===l.indexOf("#")&&(o[0]=o[0].substr(o[0].length-c)));var f,h,p=n[0].lastIndexOf(",");if(-1!==p){f=n[0].length-p-1;var d=n[0].substr(0,p);-1!==(p=d.lastIndexOf(","))&&(h=d.length-p-1)}for(var y=[],v=o[0];v;){var b=v.length-f;y.push(b>0?v.substr(b):v),v=b>0?v.slice(0,b):"",h&&(f=h,h=void 0)}return o[0]=y.reverse().join(r.group||","),o.join(r.decimal||".")}(e,s[0],{decimal:a,group:n,places:r.places,round:r.round}))}(e,a,t)}var f=/[#0,]*[#0](?:\.0*#*)?/;function h(e){var t=l((e=e||{}).locale),r=e.pattern||t.pattern,n=t.group,a=t.decimal,o=1;if(-1!==r.indexOf("%"))o/=100;else if(-1!==r.indexOf("‰"))o/=1e3;else if(-1!==r.indexOf("¤"))throw new Error("currency notation not supported");var u=r.split(";");return 1===u.length&&u.push("-"+u[0]),{regexp:y(u,(function(t){return(t="(?:"+Object(i.a)(t,".")+")").replace(f,(function(t){var r={signed:!1,separator:e.strict?n:[n,""],fractional:e.fractional,decimal:a,exponent:!1},i=t.split("."),u=e.places;1===i.length&&1!==o&&(i[1]="###"),1===i.length||0===u?r.fractional=!1:(void 0===u&&(u=e.pattern?i[1].lastIndexOf("0")+1:1/0),u&&null==e.fractional&&(r.fractional=!0),!e.places&&u<i[1].length&&(u+=","+i[1].length),r.places=u);var s=i[0].split(",");return s.length>1&&(r.groupSize=s.pop().length,s.length>1&&(r.groupSize2=s.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var t=d(e),r=y(e.fractional,(function(t){var r="";return t&&0!==e.places&&(r="\\"+e.decimal,e.places===1/0?r="(?:"+r+"\\d+)?":r+="\\d{"+e.places+"}"),r}),!0),n=t+r;return r&&(n="(?:(?:"+n+")|(?:"+r+"))"),n+y(e.exponent,(function(t){return t?"([eE]"+d({signed:e.eSigned})+")":""}))}(r)+")"}))}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:n,decimal:a,factor:o}}function p(e,t){var r=h(t),n=new RegExp("^"+r.regexp+"$").exec(e);if(!n)return NaN;var a=n[1];if(!n[1]){if(!n[2])return NaN;a=n[2],r.factor*=-1}return a=a.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(a)*r.factor}function d(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",y(e.signed,(function(e){return e?"[-+]":""}),!0)+y(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=Object(i.a)(t))?t="\\s":" "===t&&(t="\\s\\xa0");var r=e.groupSize,n=e.groupSize2;if(n){var a="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*["+t+"]\\d{"+r+"})";return r-n>0?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":a}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"}),!0)}var y=function(e,t,r){if(!(e instanceof Array))return t(e);for(var n=[],a=0;a<e.length;a++)n.push(t(e[a]));return v(n.join("|"),r)},v=function(e,t){return"("+(t?"?:":"")+e+")"}},Jrv3:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r("aNYv"),a=r("hisu"),i=r("yBJb"),o=r("0942"),u=r("4Mpa"),s=r("CHlC"),l=r("kMo5"),c=r("P+uj"),f=r("+MBG"),h=r("Tkaf"),p=r("0s7n"),d=(r("a1c8"),r("iwTS"),r("J4Pc"),r("B2Uc"),r("cY28"),r("IxxH"),r("0fR5")),y=(r("H8zE"),r("PFYi")),v=r("Zw7s");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}function m(e,t,r){var n={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return t&&r&&(n.width=t,n.height=r),new d.a(e,n)}var g=function(e){Object(s.a)(r,e);var t=b(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(a.a)(this,r),(e=t.call(this)).requestRenderOnSourceChangedEnabled=u,e._textureInvalidated=!0,e.stencilRef=0,e.coordScale=[1,1],e._height=void 0,e.pixelRatio=1,e.resolution=0,e.rotation=0,e._source=null,e._width=void 0,e.x=0,e.y=0,e.transforms={dvs:Object(h.b)()},e.blendFunction=i,e.source=n,e.requestRender=e.requestRender.bind(Object(o.a)(e)),e}return Object(i.a)(r,[{key:"destroy",value:function(){this._texture&&(this._texture.dispose(),this._texture=null)}},{key:"isSourceScaled",get:function(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}},{key:"height",get:function(){return void 0!==this._height?this._height:this.sourceHeight},set:function(e){this._height=e}},{key:"source",get:function(){return this._source},set:function(e){this._source=e,this.invalidateTexture()}},{key:"sourceHeight",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}},{key:"sourceWidth",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}},{key:"width",get:function(){return void 0!==this._width?this._width:this.sourceWidth},set:function(e){this._width=e}},{key:"beforeRender",value:function(e){Object(u.a)(Object(c.a)(r.prototype),"beforeRender",this).call(this,e),this.updateTexture(e.context)}},{key:"invalidateTexture",value:function(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}},{key:"setTransform",value:function(e){var t=Object(f.b)(this.transforms.dvs),r=e.toScreenNoRotation([0,0],this.x,this.y),a=Object(n.a)(r,2),i=a[0],o=a[1],u=this.resolution/this.pixelRatio/e.resolution,s=u*this.width,l=u*this.height,c=Math.PI*this.rotation/180;Object(f.c)(t,t,Object(p.b)(i,o)),Object(f.c)(t,t,Object(p.b)(s/2,l/2)),Object(f.j)(t,t,-c),Object(f.c)(t,t,Object(p.b)(-s/2,-l/2)),Object(f.g)(t,t,Object(p.b)(s,l)),Object(f.h)(this.transforms.dvs,e.displayViewMat3,t)}},{key:"setSamplingProfile",value:function(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}},{key:"bind",value:function(e,t){this._texture&&e.bindTexture(this._texture,t)}},{key:"updateTexture",value:function(e){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(this._textureInvalidated){this._textureInvalidated=!1,this._texture||(this.source?this._texture=m(e,this.sourceWidth,this.sourceHeight):this._texture=m(e));var r=this.source;if(r){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(e){return e&&"render"in e}(r))if(r instanceof v.a){var n=r.getRenderedRasterPixels();this._texture.setData(n.renderedRasterPixels)}else this._texture.setData(function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(r));else(function(e){return e&&!("render"in e)})(r)&&this._texture.setData(r);this.ready()}else this._texture.setData(null)}}},{key:"onAttach",value:function(){this.invalidateTexture()}},{key:"onDetach",value:function(){this.invalidateTexture()}}]),r}(y.a)},"K+fz":function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return x})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return v})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return m})),r.d(t,"i",(function(){return g})),r.d(t,"j",(function(){return b}));var n=r("u6Q5"),a=r("omx3"),i=r("x/s0"),o=r("IH5m");function u(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length}function s(e){for(var t=u(e),r=0,n=0;n<e.length;n++)r+=Math.pow(t-e[n],2);return r/e.length}function l(e){for(var t=u(e),r=0,n=0;n<e.length;n++)r+=Math.pow(t-e[n],2);return r/(e.length-1)}function c(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}function f(e,t){for(var r=[],n={},i=[],o=0;o<e.length;o++){if(void 0!==e[o]&&null!==e[o]){var u=e[o];if(Object(a.j)(u)||Object(a.k)(u))void 0===n[u]&&(r.push(u),n[u]=1);else{for(var s=!1,l=0;l<i.length;l++)!0===Object(a.g)(i[l],u)&&(s=!0);!1===s&&(i.push(u),r.push(u))}}if(r.length>=t&&-1!==t)return r}return r}function h(e){switch(e.toLowerCase()){case"distinct":return"distinct";case"avg":case"mean":return"avg";case"min":return"min";case"sum":return"sum";case"max":return"max";case"stdev":case"stddev":return"stddev";case"var":case"variance":return"var";case"count":return"count"}return""}function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;switch(e.toLowerCase()){case"distinct":return f(t,r);case"avg":case"mean":return u(t);case"min":return Math.min.apply(Math,t);case"sum":return c(t);case"max":return Math.max.apply(Math,t);case"stdev":case"stddev":return Math.sqrt(s(t));case"var":case"variance":return s(t);case"count":return t.length}return 0}function d(e,t,r){return w(e,t,r,!0).then((function(e){return 0===e.length?null:Math.min.apply(Math,e)}))}function y(e,t,r){return w(e,t,r,!0).then((function(e){return 0===e.length?null:Math.max.apply(Math,e)}))}function v(e,t,r){var n="";return!1===Object(i.c)(t)&&(n=Object(i.f)(t,e.fields,null)),w(e,t,r,!0).then((function(e){if(0===e.length)return null;var t=u(e);return null===t?t:"integer"===n?function(e){return e=+e,isFinite(e)?e-e%1||(e<0?-0:0===e?e:0):e}(t):t}))}function b(e,t,r){return w(e,t,r,!0).then((function(e){return 0===e.length?null:l(e)}))}function m(e,t,r){return w(e,t,r,!0).then((function(e){return 0===e.length?null:Math.sqrt(l(e))}))}function g(e,t,r){return w(e,t,r,!0).then((function(e){return 0===e.length?null:c(e)}))}function O(e,t){try{return e.iterator(t).count()}catch(r){return Object(o.s)(r)}}function w(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{var a=e.iterator(r);return Object(o.c)((function(e,r){j(a,[],t,n,e,r)}))}catch(i){return Object(o.s)(i)}}function j(e,t,r,a,i,o){Object(n.q)(e.next().then((function(n){try{if(null!==n){var u=r.calculateValue(n);return null===u?!1===a&&(t[t.length]=u):t[t.length]=u,j(e,t,r,a,i,o)}i(t)}catch(s){o(s)}}),o))}function x(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return k(e,t,r,n)}function k(e,t,r,n){try{return function e(t,r,n,a,i){return t.next().then((function(o){if(null!==o){var u=a.calculateValue(o);return null!=u&&void 0===r[u]&&(n.push(u),r[u]=1),n.length>=i&&-1!==i?n:e(t,r,n,a,i)}return n}))}(e.iterator(n),{},[],t,r)}catch(a){return Object(o.s)(a)}}},KF2M:function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return w}));var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("pyQ+"),l=r("v3KF"),c=(r("J4Pc"),r("7im+")),f=r("C2Pn"),h=r("jOoW"),p=r("pvOr"),d=r("D4DT");function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}function m(e,t){return e<<16|t}function g(e){return(4294901760&e)>>>16}function O(e){return 65535&e}var w={getObjectId:function(e){return e.getObjectId()},getAttributes:function(e){return e.readAttributes()},getAttribute:function(e,t){return e.readAttribute(t)},cloneWithGeometry:function(e,t){return e},getGeometry:function(e){return e.readHydratedGeometry()},getCentroid:function(e,t){return e.readCentroid()}},j=function(e){Object(i.a)(r,e);var t=b(r);function r(e,a,i){var o;return Object(n.a)(this,r),(o=t.call(this,e,a)).featureAdapter=w,o.events=new l.a,o._featureSetsByInstance=new Map,o._objectIdToDisplayId=new Map,o._spatialIndexInvalid=!0,o._indexSearchCache=new s.a(50),o._index=Object(f.a)(9,(function(e){return{minX:o._storage.getXMin(e),minY:o._storage.getYMin(e),maxX:o._storage.getXMax(e),maxY:o._storage.getYMax(e)}})),o._storage=a,o.mode=i,o}return Object(a.a)(r,[{key:"storage",get:function(){return this._storage}},{key:"storeStatistics",get:function(){return{featureCount:0,vertexCount:0}}},{key:"hasInstance",value:function(e){return this._featureSetsByInstance.has(e)}},{key:"onTileData",value:function(e,t){if(Object(c.h)(t.addOrUpdate))return t;if(t.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){for(var r=t.addOrUpdate.getCursor();r.next();){var n=r.getDisplayId();this.setComputedAttributes(this._storage,r,n,e.scale)}return t}this._featureSetsByInstance.set(t.addOrUpdate.instance,t.addOrUpdate);for(var a=t.addOrUpdate.getCursor();a.next();)this._insertFeature(a,e.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),t}},{key:"search",value:function(e){var t=this;this._rebuildIndex();var r=e.id,n=this._indexSearchCache.find((function(e){return e.tileId===r}));if(Object(c.i)(n))return n.readers;var a,i=new Map,o=this._searchIndex(e.bounds),u=[],s=y(o);try{for(s.s();!(a=s.n()).done;){var l=a.value,f=this._storage.getInstanceId(l),h=g(f),p=O(f);i.has(h)||i.set(h,[]),i.get(h).push(p)}}catch(v){s.e(v)}finally{s.f()}return i.forEach((function(e,r){var n=t._featureSetsByInstance.get(r);u.push(d.a.from(n,e))})),this._indexSearchCache.enqueue({tileId:r,readers:u}),u}},{key:"insert",value:function(e){for(var t=e.getCursor(),r=this._storage;t.next();){var n,a=m(t.instance,t.getIndex()),i=t.getObjectId(),o=null!=(n=this._objectIdToDisplayId.get(i))?n:this._storage.createDisplayId();t.setDisplayId(o),r.setInstanceId(o,a),this._objectIdToDisplayId.set(i,o)}this._featureSetsByInstance.set(e.instance,e),this._spatialIndexInvalid=!0}},{key:"remove",value:function(e){var t=this._objectIdToDisplayId.get(e);if(t){var r=this._storage.getInstanceId(t),n=O(r),a=g(r),i=this._featureSetsByInstance.get(a);this._objectIdToDisplayId.delete(e),this._storage.releaseDisplayId(t),i.removeAtIndex(n),i.isEmpty&&this._featureSetsByInstance.delete(a),this._spatialIndexInvalid=!0}}},{key:"forEach",value:function(e){var t=this;this._objectIdToDisplayId.forEach((function(r){var n=t._storage.getInstanceId(r),a=t._lookupFeature(n);e(a)}))}},{key:"forEachUnsafe",value:function(e){var t=this;this._objectIdToDisplayId.forEach((function(r){var n=t._storage.getInstanceId(r),a=g(n),i=O(n),o=t._getFeatureSet(a);o.setIndex(i),e(o)}))}},{key:"forEachInBounds",value:function(e,t){var r,n=y(this._searchIndex(e));try{for(n.s();!(r=n.n()).done;){var a=r.value,i=this.lookupFeatureByDisplayId(a,this._storage);t(Object(c.p)(i))}}catch(o){n.e(o)}finally{n.f()}}},{key:"forEachBounds",value:function(e,t,r){this._rebuildIndex();var n,a=[0,0,0,0],i=y(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.readGeometry()){var u=o.getDisplayId();a[0]=this._storage.getXMin(u),a[1]=this._storage.getYMin(u),a[2]=this._storage.getXMax(u),a[3]=this._storage.getYMax(u),t(Object(h.h)(r,a))}}}catch(s){i.e(s)}finally{i.f()}}},{key:"sweepFeatures",value:function(e,t,r){var n=this;this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((function(a,i){e.has(a)||(t.releaseDisplayId(a),r&&r.unsetAttributeData(a),n._objectIdToDisplayId.delete(i))})),this.events.emit("changed")}},{key:"sweepFeatureSets",value:function(e){var t=this;this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((function(r,n){e.has(n)||t._featureSetsByInstance.delete(n)}))}},{key:"lookupObjectId",value:function(e,t){var r=this.lookupFeatureByDisplayId(e,t);return Object(c.h)(r)?null:r.getObjectId()}},{key:"lookupDisplayId",value:function(e){return this._objectIdToDisplayId.get(e)}},{key:"lookupFeatureByDisplayId",value:function(e,t){var r=t.getInstanceId(e);return this._lookupFeature(r)}},{key:"lookupByDisplayIdUnsafe",value:function(e){var t=this._storage.getInstanceId(e),r=g(t),n=O(t),a=this._getFeatureSet(r);return a?(a.setIndex(n),a):null}},{key:"_insertFeature",value:function(e,t){var r=this._storage,n=e.getObjectId(),a=m(e.instance,e.getIndex());r.getInstanceId(e.getDisplayId());var i=this._objectIdToDisplayId.get(n);i||(i=r.createDisplayId(),this._objectIdToDisplayId.set(n,i),this._spatialIndexInvalid=!0),e.setDisplayId(i),r.setInstanceId(i,a),this.setComputedAttributes(r,e,i,t)}},{key:"_searchIndex",value:function(e){this._rebuildIndex();var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this._index.search(t)}},{key:"_rebuildIndex",value:function(){var e=this;if(this._spatialIndexInvalid){var t=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach((function(r){for(var n=r.getCursor();n.next();){var a=n.getDisplayId();e._storage.setBounds(a,n)&&t.push(a)}})):this._objectIdToDisplayId.forEach((function(r){var n=e._storage.getInstanceId(r);e._storage.setBounds(r,e._lookupFeature(n))&&t.push(r)})),this._index.clear(),this._index.load(t),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}}},{key:"_lookupFeature",value:function(e){var t=g(e),r=O(e),n=this._getFeatureSet(t);if(!n)return null;var a=n.getCursor();return a.setIndex(r),a}},{key:"_getFeatureSet",value:function(e){return this._featureSetsByInstance.get(e)}}]),r}(p.a)},KUAb:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("xYvT");Object.freeze({__proto__:null,copy:function(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,i=t.typedBuffer,o=t.typedBufferStride,u=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*a,l=(r&&r.srcIndex?r.srcIndex:0)*o,c=0;c<u;++c){for(var f=0;f<9;++f)n[s+f]=i[l+f];s+=a,l+=o}}});Object.freeze({__proto__:null,copy:function(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,i=t.typedBuffer,o=t.typedBufferStride,u=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*a,l=(r&&r.srcIndex?r.srcIndex:0)*o,c=0;c<u;++c){for(var f=0;f<16;++f)n[s+f]=i[l+f];s+=a,l+=o}}}),r("XaoK"),r("ixqo"),r("kzti"),r("x2Fc");function a(e,t){return new e(new ArrayBuffer(t*e.ElementCount*Object(n.a)(e.ElementType)))}},KoAU:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return p}));var n=r("KcHx"),a=r("4vgF"),i=r("BmJW");r("EOw0"),r("6J1V"),r("UPdV");function o(e){return e?{origin:Object(a.c)(e.origin),vector:Object(a.c)(e.vector)}:{origin:Object(a.e)(),vector:Object(a.e)()}}Object(a.e)(),Object(a.e)(),new i.a((function(){return{origin:null,vector:null}}));new i.a(o),new i.a((function(){return{p0:null,p1:null,p2:null}}));var u=Object(a.e)(),s=Object(a.e)(),l=function(){for(var e=new Uint32Array(131072),t=0;t<e.length;++t)e[t]=t;return e}(),c=new Uint16Array([0]),f=function(){for(var e=new Uint16Array(65536),t=0;t<e.length;++t)e[t]=t;return e}();function h(e){if(1===e)return c;if(e<f.length)return new Uint16Array(f.buffer,0,e);if(e>l.length){var t=Math.max(2*l.length,e);l=new Uint32Array(t);for(var r=0;r<l.length;r++)l[r]=r}return new Uint32Array(l.buffer,0,e)}function p(e){if(1===e)return new Uint16Array(c);if(e<f.length)return new Uint16Array(f.slice(0,e));if(e>l.length){for(var t=new Uint32Array(e),r=0;r<t.length;r++)t[r]=r;return t}return new Uint32Array(l.slice(0,e))}function d(e,t,r){if(!e)return!1;var a=e.size,i=e.data;Object(n.s)(r,0,0,0),Object(n.s)(g,0,0,0);for(var o,l,c,f=0,h=0,p=0;p<t.length-2;p+=3){var d=t[p+0]*a,y=t[p+1]*a,O=t[p+2]*a;Object(n.s)(v,i[d+0],i[d+1],i[d+2]),Object(n.s)(b,i[y+0],i[y+1],i[y+2]),Object(n.s)(m,i[O+0],i[O+1],i[O+2]);var w=(o=v,l=b,c=m,Object(n.g)(u,l,o),Object(n.g)(s,c,o),Object(n.m)(Object(n.d)(u,u,s))/2);w?(Object(n.c)(v,v,b),Object(n.c)(v,v,m),Object(n.b)(v,v,1/3*w),Object(n.c)(r,r,v),f+=w):(Object(n.c)(g,g,v),Object(n.c)(g,g,b),Object(n.c)(g,g,m),h+=3)}return!(0===h&&0===f||(0!==f?(Object(n.b)(r,r,1/f),0):0===h||(Object(n.b)(r,g,1/h),0)))}function y(e,t,r){if(!e||!t)return!1;var a=e.size,i=e.data;Object(n.s)(r,0,0,0);for(var o=-1,u=0,s=0;s<t.length;s++){var l=t[s]*a;o!==l&&(r[0]+=i[l+0],r[1]+=i[l+1],r[2]+=i[l+2],u++),o=l}return u>1&&Object(n.b)(r,r,1/u),u>0}var v=Object(a.e)(),b=Object(a.e)(),m=Object(a.e)(),g=Object(a.e)()},KuRq:function(e,t,r){"use strict";r.d(t,"a",(function(){return L})),r.d(t,"b",(function(){return F}));var n=r("mK0O"),a=r("eijD"),i=r("NthX"),o=r.n(i),u=r("Mp7X"),s=r("sE9J"),l=r("hisu"),c=r("yBJb"),f=r("IH5m"),h=r("BZlr"),p=function(){function e(t){Object(l.a)(this,e),t&&(this.canvas=t.canvas,this.ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}return Object(c.a)(e,[{key:"decode",value:function(t,r,n){var a=this;if(!t||t.byteLength<10)throw new u.a("imagecanvasdecoder: decode","required a valid encoded data as input.");var i=r.width,o=r.height,s=r.format,l=r.applyJpegMask;if(l&&(!i||!o))throw new u.a("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((function(u,c){var h=null;"jpg"===s&&l&&(h=e.getMask(t,{width:i,height:o}));var p,d=new Blob([new Uint8Array(t)],{type:"image/"+s=="jpg"?"jpeg":s}),y=URL.createObjectURL(d),v=new Image;v.src=y,v.onload=function(){if(URL.revokeObjectURL(y),Object(f.n)(n))c(Object(f.e)());else{i=v.width,o=v.height,a.canvas?(a.canvas.width===i&&a.canvas.height===o||(a.canvas.width=i,a.canvas.height=o),a.ctx.clearRect(0,0,i,o)):(a.canvas=document.createElement("canvas"),a.canvas.width=i,a.canvas.height=o,a.ctx=a.canvas.getContext("2d")),a.ctx.drawImage(v,0,0);var e,t=a.ctx.getImageData(0,0,i,o);if(p=t.data,r.renderOnCanvas){if(h)for(e=0;e<h.length;e++)h[e]?p[4*e+3]=255:p[4*e+3]=0;return a.ctx.putImageData(t,0,0),void u(null)}var s=i*o,l=new Uint8Array(s),d=new Uint8Array(s),b=new Uint8Array(s);if(h)for(e=0;e<s;e++)l[e]=p[4*e],d[e]=p[4*e+1],b[e]=p[4*e+2];else for(h=new Uint8Array(s),e=0;e<s;e++)l[e]=p[4*e],d[e]=p[4*e+1],b[e]=p[4*e+2],h[e]=p[4*e+3];u({width:i,height:o,pixels:[l,d,b],mask:h,pixelType:"u8"})}},v.onerror=function(){URL.revokeObjectURL(y),c("cannot load image")}}))}}],[{key:"getMask",value:function(e,t){var r=null;try{var n=new Uint8Array(e),a=Math.ceil(n.length/2),i=0,o=n.length-2;for(i=a;i<o&&(255!==n[i]||217!==n[i+1]);i++);if((i+=2)<n.length-1){var u=new h.a(n.subarray(i)).getBytes();r=new Uint8Array(t.width*t.height);for(var s=0,l=0;l<u.length;l++)for(var c=7;c>=0;c--)r[s++]=u[l]>>c&1}}catch(f){}return r}}]),e}(),d=r("WSH1"),y=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"decode",value:function(e){var t=new Uint8Array(e),r=new d.a;r.parse(t);var n,a=r.width,i=r.height,o=r.numComponents,u=r.eof,s=r.getData(a,i,!0),l=a*i,c=0,f=0,p=0;if(u<t.length-1){var y=new h.a(t.subarray(u)).getBytes();n=new Uint8Array(l);var v=0;for(c=0;c<y.length;c++)for(p=7;p>=0;p--)n[v++]=y[c]>>p&1}var b,m=null;if(1===o)m=[s,s,s];else{for(m=[],c=0;c<3;c++)b=new Uint8Array(l),m.push(b);for(p=0,f=0;f<l;f++)for(c=0;c<3;c++)m[c][f]=s[p++]}return{width:a,height:i,pixels:m,mask:n}}}]),e}(),v=r("lYc8"),b=r("aeN+"),m=function(e,t){var r=t.width*t.height,n=t.pixelType;return Math.floor(e.byteLength/(r*g(n)))},g=function(e){var t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},O=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"decode",value:function(e,t){var r,n,a,i,o,u=t.pixelType,s=[],l=t.width*t.height,c=m(e,t),f=t.bandIds,h=t.format,p=f&&f.length||m(e,t),d=e.byteLength-e.byteLength%(l*g(u)),y=new u(e,0,l*c);if("bip"===h)for(r=0;r<p;r++){for(i=new u(l),o=f?f[r]:r,n=0;n<l;n++)i[n]=y[n*c+o];s.push(i)}else if("bsq"===h)for(r=0;r<p;r++)o=f?f[r]:r,s.push(y.subarray(o*l,(o+1)*l));return d<e.byteLength-1&&(a=function(e,t){if(8*e.byteLength<t)return null;var r=new Uint8Array(e,0,Math.ceil(t/8)),n=new Uint8Array(t),a=0,i=0,o=0,u=0;for(o=0;o<r.length-1;o++)for(i=r[o],u=7;u>=0;u--)n[a++]=i>>u&1;for(u=7;a<t-1;)i=r[r.length-1],n[a++]=i>>u&1,u--;return n}(e.slice(d),l)),{pixels:s,mask:a}}}]),e}(),w=r("HYzH");function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=function(e){var t,r,n;function a(e){var t,r,n,a,i,o,u,s,l,c,f,h,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),s=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},a=this.readUInt16(),n=this.readUInt16()||100,i.delay=1e3*a/n,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===s&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,f=0;0<=t?f<t:f>t;0<=t?++f:--f)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(t),(l=255-this.transparency.indexed.length)>0)for(h=0;0<=l?h<l:h>l;0<=l?++h:--h)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(c=this.read(t)).indexOf(0),u=String.fromCharCode.apply(String,c.slice(0,o)),this.text[u]=String.fromCharCode.apply(String,c.slice(o+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return a.load=function(e,t,r){var n;return"function"==typeof t&&(r=t),(n=new XMLHttpRequest).open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){var e;return e=new a(new Uint8Array(n.response||n.mozResponseArrayBuffer)),"function"==typeof(null!=t?t.getContext:void 0)&&e.render(t),"function"==typeof r?r(e):void 0},n.send(null)},1,2,0,a.prototype.read=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(e){var t,r,n,a,i,o,u,s,l,c,f,p,d,y,v,b,m,g,O,w,j,x,k;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);for(e=(e=new h.a(e)).getBytes(),b=(p=this.pixelBitlength/8)*this.width,d=new Uint8Array(b*this.height),o=e.length,v=0,y=0,r=0;y<o;){switch(e[y++]){case 0:for(a=O=0;O<b;a=O+=1)d[r++]=e[y++];break;case 1:for(a=w=0;w<b;a=w+=1)t=e[y++],i=a<p?0:d[r-p],d[r++]=(t+i)%256;break;case 2:for(a=j=0;j<b;a=j+=1)t=e[y++],n=(a-a%p)/p,m=v&&d[(v-1)*b+n*p+a%p],d[r++]=(m+t)%256;break;case 3:for(a=x=0;x<b;a=x+=1)t=e[y++],n=(a-a%p)/p,i=a<p?0:d[r-p],m=v&&d[(v-1)*b+n*p+a%p],d[r++]=(t+Math.floor((i+m)/2))%256;break;case 4:for(a=k=0;k<b;a=k+=1)t=e[y++],n=(a-a%p)/p,i=a<p?0:d[r-p],0===v?m=g=0:(m=d[(v-1)*b+n*p+a%p],g=n&&d[(v-1)*b+(n-1)*p+a%p]),u=i+m-g,s=Math.abs(u-i),c=Math.abs(u-m),f=Math.abs(u-g),l=s<=c&&s<=f?i:c<=f?m:g,d[r++]=(t+l)%256;break;default:throw new Error("Invalid filter algorithm: "+e[y-1])}v++}return d},a.prototype.decodePalette=function(){var e,t,r,n,a,i,o,u,s;for(r=this.palette,i=this.transparency.indexed||[],a=new Uint8Array((i.length||0)+r.length),n=0,r.length,e=0,t=o=0,u=r.length;o<u;t=o+=3)a[n++]=r[t],a[n++]=r[t+1],a[n++]=r[t+2],a[n++]=null!=(s=i[e++])?s:255;return a},a.prototype.copyToImageData=function(e,t){var r,n,a,i,o,u,s,l,c,f,h;if(n=this.colors,c=null,r=this.hasAlphaChannel,this.palette.length&&(c=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),n=4,r=!0),l=(a=e.data||e).length,o=c||t,i=u=0,1===n)for(;i<l;)s=c?4*t[i/4]:u,f=o[s++],a[i++]=f,a[i++]=f,a[i++]=f,a[i++]=r?o[s++]:this.transparency.grayscale&&this.transparency.grayscale===f?0:255,u=s;else for(;i<l;)s=c?4*t[i/4]:u,a[i++]=o[s++],a[i++]=o[s++],a[i++]=o[s++],a[i++]=r?o[s++]:this.transparency.rgb&&this.transparency.rgb[1]===o[s-3]&&this.transparency.rgb[3]===o[s-2]&&this.transparency.rgb[5]===o[s-1]?0:255,u=s},a.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e},r=e.document&&e.document.createElement("canvas"),n=r&&r.getContext("2d"),t=function(e){var t;return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(t=new Image).src=r.toDataURL(),t},a.prototype.decodeFrames=function(e){var r,n,a,i,o,u,s,l;if(this.animation){for(l=[],n=o=0,u=(s=this.animation.frames).length;o<u;n=++o)r=s[n],a=e.createImageData(r.width,r.height),i=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(a,i),r.imageData=a,l.push(r.image=t(a));return l}},a.prototype.renderFrame=function(e,t){var r,n,a;return r=(n=this.animation.frames)[t],a=n[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=a?a.disposeOp:void 0)?e.clearRect(a.xOffset,a.yOffset,a.width,a.height):2===(null!=a?a.disposeOp:void 0)&&e.putImageData(a.imageData,a.xOffset,a.yOffset),0===r.blendOp&&e.clearRect(r.xOffset,r.yOffset,r.width,r.height),e.drawImage(r.image,r.xOffset,r.yOffset)},a.prototype.animate=function(e){var t,r,n,a,i,o,u=this;return r=0,o=this.animation,a=o.numFrames,n=o.frames,i=o.numPlays,(t=function(){var o,s;if(o=r++%a,s=n[o],u.renderFrame(e,o),a>1&&r/a<i)return u.animation._timeout=setTimeout(t,s.delay)})()},a.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},a.prototype.render=function(e){var t,r;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(r=t.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0))},a}(self),I=new Set(["jpg","png","bmp","gif"]);function _(e,t){if(!w.a)throw new u.a("rasterCoded:decode","lerc decoder is not supported on big endian platform");for(var r,n,a=t.width,i=t.height,o=t.pixelType,l=N(o),c=l.pixelTypeCtor,f=null==t.noDataValue?l.noDataValue:t.noDataValue,h=0,p=0,d=e.byteLength-10;p<d;){var y=Object(b.a)(e,{inputOffset:p,encodedMaskData:r,returnMask:0===h,returnEncodedMask:0===h,returnFileInfo:!0,pixelType:c,noDataValue:f});if(a&&i&&(y.width!==a||y.height!==i))throw new u.a("rasterCoded:decode","lerc decoded result has width or height different from specified in options");if(p=y.fileInfo.eofOffset,0===h&&(r=y.encodedMaskData,n=new s.a({width:y.width,height:y.height,pixels:[],pixelType:o,mask:y.maskData,statistics:[]})),h++,n.addData({pixels:y.pixelData,statistics:{minValue:y.minValue,maxValue:y.maxValue,noDataValue:y.noDataValue}}),d-p>10){var v=String.fromCharCode.apply(null,new Uint8Array(e,p,10));p+=v.indexOf("CntZ")>-1?v.indexOf("CntZ"):0}}return n}function S(e,t){if(!w.a)throw new u.a("rasterCoded:decode","lerc decoder is not supported on big endian platform");for(var r,n,a,i=0,o=t.offset||0,l=0,c=t.eof||e.byteLength-10,f=[],h=t.width,p=t.height,d=0;o<c;){var y;if(n=v.a.decode(e,{inputOffset:o,maskData:r,returnFileInfo:!0}),h&&p&&(n.width!==h||n.height!==p))throw new u.a("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");if(o=n.fileInfo.eofOffset,r=n.maskData,0===i&&(l=n.fileInfo.numValidPixel,a=new s.a({width:n.width,height:n.height,pixels:[],pixelType:n.fileInfo.pixelType,mask:r,statistics:[]})),n.fileInfo.mask&&n.fileInfo.mask.numBytes>0&&d++,r&&f.push(r),n.dimCount>1&&(null==(y=n.pixelData)?void 0:y.length)===n.width*n.height*n.dimCount){var b,m,g,O;n.pixelData=n.pixelData.slice(-n.width*n.height);var j=null==(b=n.dimStats)||null==(m=b.minValues)?void 0:m[n.dimCount-1],x=null==(g=n.dimStats)||null==(O=g.maxValues)?void 0:O[n.dimCount-1];null!=j&&null!=x&&(n.minValue=j,n.maxValue=x)}if(i++,a.addData({pixels:n.pixelData,statistics:{minValue:n.minValue,maxValue:n.maxValue}}),c-o>10){var k=String.fromCharCode.apply(null,new Uint8Array(e,o,10));o+=k.indexOf("Lerc")>-1?k.indexOf("Lerc"):0}}var I=0,_=0,S=0;if(d>1){for(S=a.width*a.height,(r=new Uint8Array(S)).set(f[0]),I=1;I<f.length;I++){var T=f[I];for(_=0;_<S;_++)r[_]=r[_]&T[_]}for(l=0,_=0;_<S;_++)l+=r[_];a.mask=r}return a.validPixelCount=l,a}function T(e,t){var r=Object(v.b)(e,t.pyramidLevel||0),n=new s.a({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return n.updateStatistics(),n}function A(e,t){var r=Object(v.e)(e,t.customOptions),n=new s.a({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return n.updateStatistics(),n}function M(e){var t=y.decode(e),r=new s.a({width:t.width,height:t.height,pixels:t.pixels,pixelType:"U8",mask:t.mask,statistics:null});return r.updateStatistics(),r}function C(e,t){var r,n=new Uint8Array(e),a=new k(n),i=t.width,o=t.height,u=i*o,l=a.decode(),c=0,f=0,h=new Uint8Array(u);for(c=0;c<u;c++)h[c]=l[4*c+3];var p=new s.a({width:i,height:o,pixels:[],pixelType:"U8",mask:h,statistics:[]});for(c=0;c<3;c++){for(r=new Uint8Array(u),f=0;f<u;f++)r[f]=l[4*f+c];p.addData({pixels:r})}return p.updateStatistics(),p}function P(e,t,r,n){return D.apply(this,arguments)}function D(){return(D=Object(a.a)(o.a.mark((function e(t,r,n,a){var i,u,l,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new p,u=x({applyJpegMask:!1,format:r},n),e.next=4,i.decode(t,u,a);case 4:return l=e.sent,c=new s.a(l),e.abrupt("return",(c.updateStatistics(),c));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){if(null==e)throw new u.a("rasterCodec:decode","parameter encodeddata is required.");var t=new Uint8Array(e,0,10),r="";return 255===t[0]&&216===t[1]?r="jpg":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?r="png":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===t[7]&&101===t[8]&&32===t[9]?r="lerc":76===t[0]&&101===t[1]&&114===t[2]&&99===t[3]&&50===t[4]&&32===t[5]?r="lerc2":73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3]||73===t[0]&&73===t[1]&&43===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&43===t[3]?r="tiff":71===t[0]&&73===t[1]&&70===t[2]?r="gif":66===t[0]&&77===t[1]?r="bmp":String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")>-1&&(r="error"),r}function R(e){var t=null;switch(e){case"lerc":t=_;break;case"lerc2":t=S;break;case"jpg":t=M;break;case"png":t=C;break;case"bsq":case"bip":t=function(t,r){return function(e,t,r){var n=N(t.pixelType).pixelTypeCtor,a=(0,O.decode)(e,{width:t.width,height:t.height,pixelType:n,format:r}),i=new s.a({width:t.width,height:t.height,pixels:a.pixels,pixelType:t.pixelType,mask:a.mask,statistics:null});return i.updateStatistics(),i}(t,r,e)};break;case"tiff":t=T;break;case"error":t=function(){throw new u.a("rasterCodec:decode","input data contains error")};break;default:t=function(){throw new u.a("rasterCodec:decode","unsupported raster format")}}return t}function N(e){var t=null,r=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":r=255,t=Uint8Array;break;case"u16":r=r||65535,t=Uint16Array;break;case"u32":r=r||Math.pow(2,32)-1,t=Uint32Array;break;case"s8":r=r||-128,t=Int8Array;break;case"s16":r=r||-32768,t=Int16Array;break;case"s32":r=r||0-Math.pow(2,31),t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:r}}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e){var r=e.pixels,n=e.width,a=e.height,i=e.mask;if(r&&0!==r.length){var o,u,l,c,f,h,p,d=r.length,y=n-1,v=a-1,b=[],m=s.a.getPixelArrayConstructor(e.pixelType);if(0===t){for(o=0;o<d;o++){for(f=r[o],h=new m(y*v),u=0;u<v;u++)for(c=u*n,l=0;l<y;l++)h[u*y+l]=f[c+l];b.push(h)}if(i)for(p=new Uint8Array(y*v),u=0;u<v;u++)for(c=u*n,l=0;l<y;l++)p[u*y+l]=i[c+l]}else{for(o=0;o<d;o++){for(f=r[o],h=new m(y*v),u=0;u<v;u++)for(c=u*n,l=0;l<y;l++)h[u*y+l]=(f[c+l]+f[c+l+1]+f[c+n+l]+f[c+n+l+1])/4;b.push(h)}if(i)for(p=new Uint8Array(y*v),u=0;u<v;u++)for(c=u*n,l=0;l<y;l++)p[u*y+l]=Math.min.apply(null,[i[c+l],i[c+l+1],i[c+n+l],i[c+n+l+1]])}e.width=y,e.height=v,e.mask=p,e.pixels=b}}}function F(e){var t=E(e);return"lerc2"===t?t="lerc":"error"===t&&(t=""),t}function L(e){return U.apply(this,arguments)}function U(){return(U=Object(a.a)(o.a.mark((function e(t){var r,n,a,i,s,l=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},n=l.length>2?l[2]:void 0,null!=t){e.next=4;break}throw new u.a("rasterCodec:decode","missing encodeddata parameter.");case 4:if("bsq"!==(s=r.format&&r.format.toLowerCase())&&"bip"!==s||null!=r.width&&null!=r.height){e.next=7;break}throw new u.a("rasterCodec:decode","requires width and height in options parameter.");case 7:if("tiff"!==s||!r.customOptions){e.next=11;break}e.t0=A(t,r),e.next=20;break;case 11:if((!s||"bsq"!==s&&"bip"!==s)&&(s=E(t)),!r.useCanvas||!I.has(s)){e.next=18;break}return e.next=15,P(t,s,r,n);case 15:i=e.sent,e.next=19;break;case 18:a=R(s),r.isPoint&&((r=x({},r)).width++,r.height++),i=a(t,r),r.isPoint&&B(i);case 19:e.t0=i;case 20:return e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},LYNQ:function(e,t,r){"use strict";r.d(t,"a",(function(){return S})),r.d(t,"b",(function(){return A})),r.d(t,"c",(function(){return C})),r.d(t,"d",(function(){return D})),r.d(t,"e",(function(){return R})),r.d(t,"f",(function(){return B})),r.d(t,"g",(function(){return F})),r.d(t,"h",(function(){return U})),r.d(t,"i",(function(){return z}));var n=r("mK0O"),a=r("eijD"),i=r("NthX"),o=r.n(i),u=r("vlZn"),s=(r("ZTBZ"),r("DGz/")),l=r("Mp7X"),c=r("TM+E"),f=r("7im+"),h=r("12QT"),p=r("3p7a"),d=r("4WE2"),y=r("TFJl"),v=r("hrIl"),b=r("YwDY"),m=r("nyn0"),g=r("uYTh"),O=r("kJId"),w=r("YHXj");function j(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=c.a.getLogger("esri.layers.graphics.sources.ogcfeature");function S(e,t){return T.apply(this,arguments)}function T(){return(T=Object(a.a)(o.a.mark((function e(t,r){var n,a,i,u,c,h,p,d,y,O,w,x,k,S,T,A,M,C,P,D,E,R=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=R.length>2&&void 0!==R[2]?R[2]:{},a=R.length>3&&void 0!==R[3]?R[3]:5,i=t.links,u=Y(i,"items","application/geo+json")||Y(i,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"),!Object(f.h)(u)){e.next=5;break}throw new l.a("ogc-feature-layer:missing-items-page","Missing items url");case 5:return e.next=7,Object(s.default)(u.href,{signal:n.signal,query:I(I({limit:a},n.customParameters),{},{token:n.apiKey}),headers:{accept:"application/geo+json"}});case 7:return c=e.sent,h=c.data,e.next=11,Object(v.d)(h);case 11:if(p=Object(v.c)(h,{geometryType:r.geometryType}),d=r.fields||p.fields||[],y=null!=r.hasZ?r.hasZ:p.hasZ,O=p.geometryType,w=r.objectIdField||p.objectIdFieldName||"OBJECTID",x=r.timeInfo,k=d.find((function(e){return e.name===w}))){e.next=20;break}if(p.objectIdFieldType){e.next=17;break}throw new l.a("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");case 17:d.unshift({name:w,alias:w,type:"esriFieldTypeOID",editable:!1,nullable:!1}),e.next=21;break;case 20:k.type="esriFieldTypeOID",k.editable=!1,k.nullable=!1;case 21:if(w!==p.objectIdFieldName&&(S=d.find((function(e){return e.name===p.objectIdFieldName})))&&(S.type="esriFieldTypeInteger"),O){e.next=24;break}throw new l.a("ogc-feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");case 24:d===p.fields&&p.unknownFields.length>0&&_.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:p.unknownFields}}),T=j(d),e.prev=26,T.s();case 28:if((A=T.n()).done){e.next=36;break}if(null==(M=A.value).name&&(M.name=M.alias),null==M.alias&&(M.alias=M.name),"esriFieldTypeOID"!==M.type&&"esriFieldTypeGlobalID"!==M.type&&(M.editable=null==M.editable||!!M.editable,M.nullable=null==M.nullable||!!M.nullable),M.name){e.next=32;break}throw new l.a("ogc-feature-layer:invalid-field-name","field name is missing",{field:M});case 32:if(-1!==g.a.jsonValues.indexOf(M.type)){e.next=34;break}throw new l.a("ogc-feature-layer:invalid-field-type",'invalid type for field "'.concat(M.name,'"'),{field:M});case 34:e.next=28;break;case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(26),T.e(e.t0);case 41:return e.prev=41,T.f(),e.finish(41);case 44:return x&&(C=new m.a(d),x.startTimeField&&((P=C.get(x.startTimeField))?(x.startTimeField=P.name,P.type="esriFieldTypeDate"):x.startTimeField=null),x.endTimeField&&((D=C.get(x.endTimeField))?(x.endTimeField=D.name,D.type="esriFieldTypeDate"):x.endTimeField=null),x.trackIdField&&((E=C.get(x.trackIdField))?x.trackIdField=E.name:(x.trackIdField=null,_.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:x}}))),x.startTimeField||x.endTimeField||(_.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:x}}),x=null)),e.abrupt("return",{drawingInfo:Object(b.d)(O),geometryType:O,fields:d,hasZ:!!y,objectIdField:w,timeInfo:x});case 46:case"end":return e.stop()}}),e,null,[[26,38,41,44]])})))).apply(this,arguments)}function A(e){return M.apply(this,arguments)}function M(){return(M=Object(a.a)(o.a.mark((function e(t){var r,n,a,i,u,c,h,p,d=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},n=t.links,a=Y(n,"data","application/json")||Y(n,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json"),!Object(f.h)(a)){e.next=4;break}throw new l.a("ogc-feature-layer:missing-collections-page","Missing collections url");case 4:return i=r.apiKey,u=r.customParameters,c=r.signal,e.next=9,Object(s.default)(a.href,{signal:c,headers:{accept:"application/json"},query:I(I({},u),{},{token:i})});case 9:return h=e.sent,p=h.data,e.abrupt("return",p);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return P.apply(this,arguments)}function P(){return(P=Object(a.a)(o.a.mark((function e(t){var r,n,a,i,u,c,h,p,d=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},n=t.links,a=Y(n,"conformance","application/json")||Y(n,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json"),!Object(f.h)(a)){e.next=4;break}throw new l.a("ogc-feature-layer:missing-conformance-page","Missing conformance url");case 4:return i=r.apiKey,u=r.customParameters,c=r.signal,e.next=9,Object(s.default)(a.href,{signal:c,headers:{accept:"application/json"},query:I(I({},u),{},{token:i})});case 9:return h=e.sent,p=h.data,e.abrupt("return",p);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return E.apply(this,arguments)}function E(){return(E=Object(a.a)(o.a.mark((function e(t){var r,n,a,i,u,l,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},n=r.apiKey,a=r.customParameters,i=r.signal,e.next=6,Object(s.default)(t,{signal:i,headers:{accept:"application/json"},query:I(I({},a),{},{token:n})});case 6:return u=e.sent,l=u.data,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return N.apply(this,arguments)}function N(){return(N=Object(a.a)(o.a.mark((function e(t){var r,n,a,i,u,l,c,h,p=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:{},n="application/vnd.oai.openapi+json;version=3.0",a=Y(t.links,"service-desc",n),!Object(f.h)(a)){e.next=4;break}return e.abrupt("return",(_.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null));case 4:return i=r.apiKey,u=r.customParameters,l=r.signal,e.next=9,Object(s.default)(a.href,{signal:l,headers:{accept:n},query:I(I({},u),{},{token:i})});case 9:return c=e.sent,h=c.data,e.abrupt("return",h);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=Object(u.a)(/^http:\/\/www\.opengis.net\/def\/crs\/(.*)\/(.*)\/(.*)$/i,{authority:1,version:2,code:3}).exec(e),r=null==t?void 0:t.groups;if(!r)return null;var n=r.authority,a=r.code;switch(n.toLowerCase()){case"ogc":switch(a.toLowerCase()){case"crs27":return w.a.GCS_NAD_1927;case"crs83":return new w.a({wkid:4269});case"crs84":case"crs84h":return w.a.WGS84;default:return null}case"esri":case"epsg":var i=Number.parseInt(a,10);return Number.isNaN(i)?null:900913===i?w.a.WebMercator:new w.a({wkid:i});default:return null}}function F(e,t,r){return L.apply(this,arguments)}function L(){return(L=Object(a.a)(o.a.mark((function e(t,r,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t,r,n);case 2:return a=e.sent,e.abrupt("return",O.default.fromJSON(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t,r){return G.apply(this,arguments)}function G(){return(G=Object(a.a)(o.a.mark((function e(t,r,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t,r,n);case 2:return a=e.sent,e.abrupt("return",Object(d.j)(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,r){return V.apply(this,arguments)}function V(){return(V=Object(a.a)(o.a.mark((function e(t,r,n){var a,i,u,c,b,m,g,O,x,k,_,S,T,A,M,C,P,D,E,R,N,B,F,L,U,G,z,V,J,K,X,Q,$,ee,te,re,ne,ae,ie,oe,ue;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.capabilities.query.maxRecordCount,i=t.collection,u=t.layerDefinition,c=t.queryParameters,b=c.apiKey,m=c.customParameters,g=t.spatialReference,O=t.supportedCrs,x=i.links,k=Y(x,"items","application/geo+json")||Y(x,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"),!Object(f.h)(k)){e.next=3;break}throw new l.a("ogc-feature-layer:missing-items-page","Missing items url");case 3:if(_=r.geometry,S=r.num,T=r.start,A=r.timeExtent,M=r.where,!r.objectIds){e.next=6;break}throw new l.a("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");case 6:return C=w.a.fromJSON(g),P=Object(f.q)(r.outSpatialReference,C),D=P.isWGS84?null:H(P,O),E=Z(_,O),R=W(A),N=q(M),B=null!=S?S:null!=T&&void 0!==T?10:a,e.next=15,Object(s.default)(k.href,I(I({},n),{},{query:I(I(I({},m),E),{},{crs:D,datetime:R,query:N,limit:B,startindex:T,token:b}),headers:{accept:"application/geo+json"}}));case 15:if(F=e.sent,L=F.data,U=!1,L.links&&(U=!!L.links.find((function(e){return"next"===e.rel}))),!U&&Number.isInteger(L.numberMatched)&&Number.isInteger(L.numberReturned)&&(U=L.numberReturned<L.numberMatched),G=u.fields,z=u.globalIdField,V=u.hasM,J=u.hasZ,K=u.objectIdField,X=u.geometryType,Q=Object(v.a)(L,{geometryType:X,hasZ:J,objectIdField:K}),!D&&P.isWebMercator){$=j(Q);try{for($.s();!(ee=$.n()).done;)(te=ee.value).geometry&&((re=Object(d.k)(te.geometry,X,J,!1)).spatialReference=w.a.WGS84,te.geometry=Object(d.d)(Object(p.d)(re,P)))}catch(o){$.e(o)}finally{$.f()}}ne=j(Q);try{for(ne.s();!(ae=ne.n()).done;)(ie=ae.value).objectId=ie.attributes[K]}catch(o){ne.e(o)}finally{ne.f()}return oe=D||!D&&P.isWebMercator?P.toJSON():h.a,ue=new y.a,e.abrupt("return",(ue.exceededTransferLimit=U,ue.features=Q,ue.fields=G,ue.geometryType=X,ue.globalIdFieldName=z,ue.hasM=V,ue.hasZ=J,ue.objectIdFieldName=K,ue.spatialReference=oe,ue));case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return t.find((function(t){var r=B(t);return Object(h.c)(r,e)}))}function J(e){var t=e.xmin,r=e.ymin,n=e.xmax,a=e.ymax;return"".concat(t,",").concat(r,",").concat(n,",").concat(a)}function W(e){if(Object(f.h)(e))return null;var t=e.start,r=e.end;return"".concat(Object(f.i)(t)?t.toISOString():"..","/").concat(Object(f.i)(r)?r.toISOString():"..")}function q(e){return Object(f.h)(e)||!e||"1=1"===e?null:e}function Z(e,t){if(!function(e){return Object(f.i)(e)&&"extent"===e.type}(e))return null;var r=e.spatialReference;if(!r||r.isWGS84)return{bbox:J(e)};var n=H(r,t);return n?{bbox:J(e),"bbox-crs":n}:r.isWebMercator?{bbox:J(Object(p.d)(e,w.a.WGS84))}:null}function Y(e,t,r){return e.find((function(e){return e.rel===t&&e.type===r}))||e.find((function(e){return e.rel===t&&!e.type}))}},NSiF:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("dQW7"),l=r("0n+b"),c=r("7im+"),f=r("xAIp"),h=(r("J4Pc"),r("wckI"),r("TM+E"),r("iaHD")),p=r("nd5+"),d=r("YHXj"),y=r("d/mo");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var b=function(e){Object(i.a)(r,e);var t=v(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).attributeTable=null,a.bandCount=null,a.colormap=null,a.extent=null,a.format=void 0,a.height=null,a.width=null,a.histograms=null,a.keyProperties={},a.multidimensionalInfo=null,a.noDataValue=null,a.pixelSize=null,a.pixelType=null,a.isPseudoSpatialReference=!1,a.spatialReference=null,a.statistics=null,a.storageInfo=null,a.transform=null,a}return Object(a.a)(r,[{key:"dataType",get:function(){var e,t,r,n=null!=(e=null==(t=this.keyProperties)||null==(r=t.DataType)?void 0:r.toLowerCase())?e:"generic";return"stdtime"===n?"standard-time":n}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(e){e&&this._set("nativeExtent",e)}},{key:"nativePixelSize",get:function(){if(!Object(c.i)(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;var e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}}]),r}(l.a);Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"attributeTable",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"bandCount",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"colormap",void 0),Object(s.a)([Object(f.b)({type:String,readOnly:!0})],b.prototype,"dataType",null),Object(s.a)([Object(f.b)({type:p.a,json:{write:!0}})],b.prototype,"extent",void 0),Object(s.a)([Object(f.b)({type:p.a,json:{write:!0}})],b.prototype,"nativeExtent",null),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"nativePixelSize",null),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"format",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"height",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"width",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"histograms",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"keyProperties",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"multidimensionalInfo",void 0),Object(s.a)([Object(f.b)()],b.prototype,"noDataValue",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"pixelSize",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"pixelType",void 0),Object(s.a)([Object(f.b)()],b.prototype,"isPseudoSpatialReference",void 0),Object(s.a)([Object(f.b)({type:d.a,json:{write:!0}})],b.prototype,"spatialReference",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"statistics",void 0),Object(s.a)([Object(f.b)({type:y.a,json:{write:!0}})],b.prototype,"storageInfo",void 0),Object(s.a)([Object(f.b)({json:{write:!0}})],b.prototype,"transform",void 0);var m=b=Object(s.a)([Object(h.a)("esri.layers.support.RasterInfo")],b);t.a=m},Nt9s:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("0yMr"),l=r("cWe4"),c=r("nBXx"),f=r("omx3"),h=r("IH5m"),p=r("Hj62");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var y=function(e){Object(i.a)(r,e);var t=d(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e))._relation="",a._relationGeom=null,a._relationString="",a.declaredClass="esri.arcade.featureset.actions.SpatialFilter",a._relationString=e.relationString,a._parent=e.parentfeatureset,a._maxProcessing=40,a._relation=e.relation,a._relationGeom=e.relationGeom,a}return Object(a.a)(r,[{key:"_getSet",value:function(e){var t=this;return null===this._wset?this._ensureLoaded().then((function(){return t._parent._getFilteredSet("esriSpatialRelRelation"!==t._relation?t._relation:t._relation+":"+t._relationString,t._relationGeom,null,null,e)})).then((function(r){return t._checkCancelled(e),t._wset=new c.a(r._candidates.slice(0),r._known.slice(0),r._ordered,t._clonePageDefinition(r.pagesDefinition)),t._wset})):Object(h.t)(this._wset)}},{key:"_isInFeatureSet",value:function(e){var t=this._parent._isInFeatureSet(e);return t===f.b.NotInFeatureSet?t:void 0===(t=this._idstates[e])?f.b.Unknown:t}},{key:"_getFeature",value:function(e,t,r){return this._parent._getFeature(e,t,r)}},{key:"_getFeatures",value:function(e,t,r,n){return this._parent._getFeatures(e,t,r,n)}},{key:"_featureFromCache",value:function(e){return this._parent._featureFromCache(e)}},{key:"executeSpatialRelationTest",value:function(e){if(null===e.geometry)return Object(h.t)(!1);switch(this._relation){case"esriSpatialRelEnvelopeIntersects":var t=Object(f.p)(this._relationGeom),r=Object(f.p)(e.geometry);return Object(p.q)(t,r);case"esriSpatialRelIntersects":return Object(p.q)(this._relationGeom,e.geometry);case"esriSpatialRelContains":return Object(p.c)(this._relationGeom,e.geometry);case"esriSpatialRelOverlaps":return Object(p.t)(this._relationGeom,e.geometry);case"esriSpatialRelWithin":return Object(p.C)(this._relationGeom,e.geometry);case"esriSpatialRelTouches":return Object(p.A)(this._relationGeom,e.geometry);case"esriSpatialRelCrosses":return Object(p.d)(this._relationGeom,e.geometry);case"esriSpatialRelRelation":return Object(p.w)(this._relationGeom,e.geometry,this._relationString)}}},{key:"_fetchAndRefineFeatures",value:function(e,t,r){var n=this,a=new c.a([],e,!1,null),i=Math.min(t,e.length);return this._parent._getFeatures(a,-1,i,r).then((function(){n._checkCancelled(r);for(var t=[],a=0;a<i;a++){var o=n._parent._featureFromCache(e[a]);t.push(n.executeSpatialRelationTest(o))}return Object(h.b)(t)})).then((function(r){for(var a=0;a<t;a++)!0===r[a]?n._idstates[e[a]]=f.b.InFeatureSet:n._idstates[e[a]]=f.b.NotInFeatureSet;return"success"}))}},{key:"_getFilteredSet",value:function(e,t,r,n,a){var i=this;return this._ensureLoaded().then((function(){return i._parent._getFilteredSet("esriSpatialRelRelation"!==i._relation?i._relation:i._relation+":"+i._relationString,i._relationGeom,r,n,a)})).then((function(e){return i._checkCancelled(a),null!==t?new c.a(e._candidates.slice(0).concat(e._known.slice(0)),[],e._ordered,i._clonePageDefinition(e.pagesDefinition)):new c.a(e._candidates.slice(0),e._known.slice(0),e._ordered,i._clonePageDefinition(e.pagesDefinition))}))}},{key:"_stat",value:function(e,t,r,n,a,i,o){var u=this;return""!==r?Object(h.t)({calculated:!1}):this._parent._stat(e,t,"esriSpatialRelRelation"!==this._relation?this._relation:this._relation+":"+this._relationString,this._relationGeom,a,i,o).then((function(s){return!1===s.calculated?null===a&&""===r&&null===n?u._manualStat(e,t,i,o):{calculated:!1}:s}))}},{key:"_canDoAggregates",value:function(e,t,r,n,a){return""!==r||null!==n||null===this._parent?Object(h.t)(!1):this._parent._canDoAggregates(e,t,"esriSpatialRelRelation"!==this._relation?this._relation:this._relation+":"+this._relationString,this._relationGeom,a)}},{key:"_getAggregatePagesDataSourceDefinition",value:function(e,t,r,n,a,i,o){return null===this._parent?Object(h.s)(new Error("Should never be called")):this._parent._getAggregatePagesDataSourceDefinition(e,t,"esriSpatialRelRelation"!==this._relation?this._relation:this._relation+":"+this._relationString,this._relationGeom,a,i,o)}}],[{key:"registerAction",value:function(){l.a._featuresetFunctions.intersects=function(e){return null==e?new s.a({parentfeatureset:this}):new r({parentfeatureset:this,relation:"esriSpatialRelIntersects",relationGeom:e})},l.a._featuresetFunctions.envelopeIntersects=function(e){return null==e?new s.a({parentfeatureset:this}):new r({parentfeatureset:this,relation:"esriSpatialRelEnvelopeIntersects",relationGeom:e})},l.a._featuresetFunctions.contains=function(e){return null==e?new s.a({parentfeatureset:this}):new r({parentfeatureset:this,relation:"esriSpatialRelContains",relationGeom:e})},l.a._featuresetFunctions.overlaps=function(e){return null==e?new s.a({parentfeatureset:this}):new r({parentfeatureset:this,relation:"esriSpatialRelOverlaps",relationGeom:e})},l.a._featuresetFunctions.within=function(e){return null==e?new s.a({parentfeatureset:this}):new r({parentfeatureset:this,relation:"esriSpatialRelWithin",relationGeom:e})},l.a._featuresetFunctions.touches=function(e){return null==e?new s.a({parentfeatureset:this}):new r({parentfeatureset:this,relation:"esriSpatialRelTouches",relationGeom:e})},l.a._featuresetFunctions.crosses=function(e){return null==e?new s.a({parentfeatureset:this}):new r({parentfeatureset:this,relation:"esriSpatialRelCrosses",relationGeom:e})},l.a._featuresetFunctions.relate=function(e,t){return null==e?new s.a({parentfeatureset:this}):new r({parentfeatureset:this,relation:"esriSpatialRelRelation",relationGeom:e,relationString:t})}}}]),r}(l.a);t.a=y},O3Ru:function(e,t,r){"use strict";r.d(t,"a",(function(){return I})),r.d(t,"b",(function(){return j})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return k})),r.d(t,"e",(function(){return x}));var n=r("CHlC"),a=r("kMo5"),i=r("P+uj"),o=r("hisu"),u=r("yBJb"),s=r("4VMI"),l=r("9r7x"),c=r("cWe4"),f=r("nBXx"),h=r("omx3"),p=r("x/s0"),d=r("IH5m"),y=r("xnqp"),v=r("YHXj");function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var o=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}var O=function(){function e(){Object(o.a)(this,e),this.sqlRewritable=!1}return Object(u.a)(e,[{key:"postInitialization",value:function(e,t){}}]),e}(),w=function(e){Object(n.a)(r,e);var t=g(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this)).field=e,n.sqlRewritable=!0,n}return Object(u.a)(r,[{key:"extractValue",value:function(e){return e.attributes[this.field.name]}},{key:"rewriteSql",value:function(e){return{rewritten:this.sqlRewritable,where:e}}}]),r}(O),j=function(e){Object(n.a)(r,e);var t=g(r);function r(e,n,a){var i;return Object(o.a)(this,r),(i=t.call(this)).originalField=e,i.sqlRewritable=!0,i.field=Object(h.c)(e),i.field.name=n,i.field.alias=a,i}return Object(u.a)(r,[{key:"rewriteSql",value:function(e,t){return{rewritten:this.sqlRewritable,where:Object(p.g)(e,this.field.name,this.originalField.name,t.getFieldsIndex())}}},{key:"extractValue",value:function(e){return e.attributes[this.originalField.name]}}]),r}(O),x=function(e){Object(n.a)(r,e);var t=g(r);function r(e,n,a){var i;for(var u in Object(o.a)(this,r),(i=t.call(this)).field=e,i.codefield=n,i.lkp=a,i.reverseLkp={},a)i.reverseLkp[a[u]]=u;return i.sqlRewritable=!0,i}return Object(u.a)(r,[{key:"rewriteSql",value:function(e,t){var n=this.evaluateNodeToWhereClause(e.parseTree,h.a.Standardised,this.field.name,this.codefield instanceof y.WhereClause?Object(p.i)(this.codefield,h.a.Standardised):this.codefield,e.parameters);return n.indexOf(r.BADNESS)>=0?{rewritten:!1,where:e}:{rewritten:this.sqlRewritable,where:y.WhereClause.create(n,t._parent.getFieldsIndex())}}},{key:"evaluateNodeToWhereClause",value:function(e,t){var n,a,i,o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4?arguments[4]:void 0;switch(e.type){case"interval":return Object(p.b)(this.evaluateNodeToWhereClause(e.value,t,u,s,l),e.qualifier,e.op);case"case_expression":var c=" CASE ";"simple"===e.format&&(c+=this.evaluateNodeToWhereClause(e.operand,t,u,r.BADNESS,l));for(var f=0;f<e.clauses.length;f++)c+=" WHEN "+this.evaluateNodeToWhereClause(e.clauses[f].operand,t,u,r.BADNESS,l)+" THEN "+this.evaluateNodeToWhereClause(e.clauses[f].value,t,u,r.BADNESS,l);return null!==e.else&&(c+=" ELSE "+this.evaluateNodeToWhereClause(e.else,t,u,r.BADNESS,l)),c+=" END ";case"param":var h=l[e.value.toLowerCase()];if("string"==typeof h)return"'"+l[e.value.toLowerCase()].toString().replace(/'/g,"''")+"'";if(h instanceof Date)return Object(p.d)(h,t);if(h instanceof Array){for(var d=[],y=0;y<h.length;y++)"string"==typeof h[y]?d.push("'"+h[y].toString().replace(/'/g,"''")+"'"):h[y]instanceof Date?d.push(Object(p.d)(h[y],t)):d.push(h[y].toString());return d}return h.toString();case"expr_list":a=[];var v,m=b(e.value);try{for(m.s();!(v=m.n()).done;){var g=v.value;a.push(this.evaluateNodeToWhereClause(g,t,u,s,l))}}catch(C){m.e(C)}finally{m.f()}return a;case"unary_expr":return" ( NOT "+this.evaluateNodeToWhereClause(e.expr,t,u,r.BADNESS,l)+" ) ";case"binary_expr":switch(e.operator){case"AND":return" ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" AND "+this.evaluateNodeToWhereClause(e.right,t,u,s,l)+") ";case"OR":return" ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" OR "+this.evaluateNodeToWhereClause(e.right,t,u,s,l)+") ";case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return" ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" IS NULL )";case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return" ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" IS NOT NULL )";case"IN":if(n=[],"expr_list"===e.right.type){if("column_ref"===e.left.type&&e.left.column.toUpperCase()===this.field.name.toUpperCase()){var O,w=[],j=!0,x=b(e.right.value);try{for(x.s();!(O=x.n()).done;){var k=O.value;if("string"!==k.type){j=!1;break}if(void 0===this.lkp[k.value]){j=!1;break}w.push(this.lkp[k.value].toString())}}catch(C){x.e(C)}finally{x.f()}if(j)return" ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" IN ("+w.join(",")+")) "}return n=this.evaluateNodeToWhereClause(e.right,t,u,s,l)," ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" IN ("+n.join(",")+")) "}return(o=this.evaluateNodeToWhereClause(e.right,t,u,s,l))instanceof Array?" ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" IN ("+o.join(",")+")) ":" ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" IN ("+o+")) ";case"NOT IN":if(n=[],"expr_list"===e.right.type){if("column_ref"===e.left.type&&e.left.column.toUpperCase()===this.field.name.toUpperCase()){var I,_=[],S=!0,T=b(e.right.value);try{for(T.s();!(I=T.n()).done;){var A=I.value;if("string"!==A.type){S=!1;break}if(void 0===this.lkp[A.value]){S=!1;break}_.push(this.lkp[A.value].toString())}}catch(C){T.e(C)}finally{T.f()}if(S)return" ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" NOT IN ("+_.join(",")+")) "}return n=this.evaluateNodeToWhereClause(e.right,t,u,s,l)," ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" NOT IN ("+n.join(",")+")) "}return(o=this.evaluateNodeToWhereClause(e.right,t,u,s,l))instanceof Array?" ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" NOT IN ("+o.join(",")+")) ":" ("+this.evaluateNodeToWhereClause(e.left,t,u,s,l)+" NOT IN ("+o+")) ";case"BETWEEN":return i=this.evaluateNodeToWhereClause(e.right,t,u,r.BADNESS,l)," ("+this.evaluateNodeToWhereClause(e.left,t,u,r.BADNESS,l)+" BETWEEN "+i[0]+" AND "+i[1]+" ) ";case"NOTBETWEEN":return i=this.evaluateNodeToWhereClause(e.right,t,u,r.BADNESS,l)," ("+this.evaluateNodeToWhereClause(e.left,t,u,r.BADNESS,l)+" NOT BETWEEN "+i[0]+" AND "+i[1]+" ) ";case"LIKE":return""!==e.escape?" ("+this.evaluateNodeToWhereClause(e.left,t,u,r.BADNESS,l)+" LIKE "+this.evaluateNodeToWhereClause(e.right,t,u,r.BADNESS,l)+" ESCAPE '"+e.escape+"') ":" ("+this.evaluateNodeToWhereClause(e.left,t,u,r.BADNESS,l)+" LIKE "+this.evaluateNodeToWhereClause(e.right,t,u,r.BADNESS,l)+") ";case"NOT LIKE":return""!==e.escape?" ("+this.evaluateNodeToWhereClause(e.left,t,u,r.BADNESS,l)+" NOT LIKE "+this.evaluateNodeToWhereClause(e.right,t,u,r.BADNESS,l)+" ESCAPE '"+e.escape+"') ":" ("+this.evaluateNodeToWhereClause(e.left,t,u,r.BADNESS,l)+" NOT LIKE "+this.evaluateNodeToWhereClause(e.right,t,u,r.BADNESS,l)+") ";case"<>":case"=":if("column_ref"===e.left.type&&"string"===e.right.type){if(e.left.column.toUpperCase()===this.field.name.toUpperCase()&&void 0!==this.lkp[e.right.value.toString()])return" ("+s+" "+e.operator+" "+this.lkp[e.right.value.toString()].toString()+") "}else if("column_ref"===e.right.type&&"string"===e.left.type&&e.right.column.toUpperCase()===this.field.name.toUpperCase())return" ("+this.lkp[e.right.value.toString()].toString()+" "+e.operator+" "+s+") ";return" ("+this.evaluateNodeToWhereClause(e.left,t,u,r.BADNESS,l)+" "+e.operator+" "+this.evaluateNodeToWhereClause(e.right,t,u,r.BADNESS,l)+") ";case"<":case">":case">=":case"<=":case"*":case"-":case"+":case"/":return" ("+this.evaluateNodeToWhereClause(e.left,t,u,r.BADNESS,l)+" "+e.operator+" "+this.evaluateNodeToWhereClause(e.right,t,u,r.BADNESS,l)+") "}throw new Error("Not Supported Operator "+e.operator);case"null":return"null";case"bool":return!0===e.value?"1":"0";case"string":return"'"+e.value.toString().replace(/'/g,"''")+"'";case"timestamp":case"date":return Object(p.d)(e.value,t);case"number":return e.value.toString();case"current_time":return Object(p.e)("date"===e.mode,t);case"column_ref":return u&&u.toLowerCase()===e.column.toLowerCase()?"("+s+")":e.column;case"function":var M=this.evaluateNodeToWhereClause(e.args,t,u,r.BADNESS,l);return Object(p.k)(e.name,M,t)}throw new Error("Unsupported sql syntax "+e.type)}},{key:"extractValue",value:function(e){return this.codefield instanceof y.WhereClause?this.reverseLkp[this.codefield.calculateValueCompiled(e)]:this.reverseLkp[e.attributes[this.codefield]]}}]),r}(O);x.BADNESS="_!!!_BAD_LKP_!!!!";var k=function(e){Object(n.a)(r,e);var t=g(r);function r(e,n){var a;return Object(o.a)(this,r),(a=t.call(this)).field=e,a.sql=n,a}return Object(u.a)(r,[{key:"rewriteSql",value:function(e,t){return{rewritten:!0,where:Object(p.g)(e,this.field.name,Object(p.i)(this.sql,h.a.Standardised),t.getFieldsIndex())}}},{key:"extractValue",value:function(e){return this.sql.calculateValueCompiled(e)}}]),r}(O),I=function(e){Object(n.a)(r,e);var t=g(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e))._calcFunc=null,n.declaredClass="esri.arcade.featureset.actions.Adapted",n.adaptedFields=null,n._extraFilter=null,n._extraFilter=e.extraFilter,n._parent=e.parentfeatureset,n._maxProcessing=30,n.adaptedFields=e.adaptedFields,n}return Object(u.a)(r,[{key:"_initialiseFeatureSet",value:function(){null!==this._parent?(this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.spatialReference=new v.a({wkid:4326}),this.objectIdField="",this.globalIdField="",this.geometryType=h.m.point,this.typeIdField="",this.types=null),this.fields=[];var e,t=b(this.adaptedFields);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.postInitialization(this,this._parent),this.fields.push(r.field)}}catch(n){t.e(n)}finally{t.f()}}},{key:"_getSet",value:function(e){var t=this;return null===this._wset?this._ensureLoaded().then((function(){return t._extraFilter?t._getFilteredSet("",null,null,null,e):t._parent._getSet(e)})).then((function(r){return t._checkCancelled(e),t._wset=new f.a(r._candidates.slice(0),r._known.slice(0),r._ordered,t._clonePageDefinition(r.pagesDefinition)),t._wset})):Object(d.t)(this._wset)}},{key:"_isInFeatureSet",value:function(e){return this._parent._isInFeatureSet(e)}},{key:"_getFeatures",value:function(e,t,r,n){var a=this,i=[];-1!==t&&void 0===this._featureCache[t]&&i.push(t);var o=this._maxQueryRate();if(!0===this._checkIfNeedToExpandKnownPage(e,o))return this._expandPagedSet(e,o,0,0,n).then((function(){return a._getFeatures(e,t,r,n)}));for(var u=0,c=e._lastFetchedIndex;c<e._known.length&&(++u<=r&&(e._lastFetchedIndex+=1),!(void 0===this._featureCache[e._known[c]]&&(e._known[c]!==t&&i.push(e._known[c]),i.length>=o)));c++);if(0===i.length)return Object(d.t)("success");e=new f.a([],i,e._ordered,null);var h=Math.min(i.length,r);return this._parent._getFeatures(e,-1,h,n).then((function(){a._checkCancelled(n);for(var e=[],t=0;t<h;t++){var r=a._parent._featureFromCache(i[t]);void 0!==r&&e.push({geometry:r.geometry,attributes:r.attributes,id:i[t]})}for(var o=0,u=e;o<u.length;o++){var c,f=u[o],p=[],d=b(a.adaptedFields);try{for(d.s();!(c=d.n()).done;){var y=c.value;p[y.field.name]=y.extractValue(f)}}catch(v){d.e(v)}finally{d.f()}a._featureCache[f.id]=new s.a({attributes:p,geometry:Object(l.a)(f.geometry)})}return"success"}))}},{key:"_fetchAndRefineFeatures",value:function(){return Object(d.s)(new Error("Fetch and Refine should not be called in this featureset"))}},{key:"_getFilteredSet",value:function(e,t,r,n,a){var i,o=this,u=this.reformulateWithoutAdaptions(r);i=u.cannot,r=u.where;var s=!1;if(null!==n){s=!0;var l,c=[],h=b(this.adaptedFields);try{for(h.s();!(l=h.n()).done;){var d=l.value;if(!(d instanceof w)&&!0===n.scanForField(d.field.name)){if(!(d instanceof j)){n=null,s=!1;break}c.push({field:d.field.name,newfield:d.originalField.name})}}}catch(y){h.e(y)}finally{h.f()}n&&c.length>0&&(n=n.replaceFields(c))}return null!==r?null!==this._extraFilter&&(r=Object(p.a)(this._extraFilter,r)):r=this._extraFilter,this._ensureLoaded().then((function(){return o._parent._getFilteredSet(e,t,r,n,a)})).then((function(e){return o._checkCancelled(a),!0===i?new f.a(e._candidates.slice(0).concat(e._known.slice(0)),[],!0===s&&e._ordered,o._clonePageDefinition(e.pagesDefinition)):new f.a(e._candidates.slice(0),e._known.slice(0),!0===s&&e._ordered,o._clonePageDefinition(e.pagesDefinition))}))}},{key:"reformulateWithoutAdaptions",value:function(e){var t={cannot:!1,where:e};if(null!==e){var r,n=b(this.adaptedFields);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(!0===Object(p.h)(e,a.field.name)){var i=a.rewriteSql(e,this);if(!0!==i.rewritten){t.cannot=!0,t.where=null;break}t.where=i.where}}}catch(o){n.e(o)}finally{n.f()}}return t}},{key:"_stat",value:function(e,t,r,n,a,i,o){var u=this,s=!1,l=this.reformulateWithoutAdaptions(t);return s=l.cannot,t=l.where,l=this.reformulateWithoutAdaptions(a),s=s||l.cannot,null!==(a=l.where)?null!==this._extraFilter&&(a=Object(p.a)(this._extraFilter,a)):a=this._extraFilter,!0===s?null===a&&""===r&&null===n?this._manualStat(e,t,i,o):Object(d.t)({calculated:!1}):this._parent._stat(e,t,r,n,a,i,o).then((function(s){return!1===s.calculated?null===a&&""===r&&null===n?u._manualStat(e,t,i,o):{calculated:!1}:s}))}},{key:"_canDoAggregates",value:function(e,t,r,n,a){if(null===this._parent)return Object(d.t)(!1);for(var i=0;i<e.length;i++){var o,u=b(this.adaptedFields);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(e[i].toLowerCase()===s.field.name.toLowerCase()&&!(s instanceof w))return Object(d.t)(!1)}}catch(m){u.e(m)}finally{u.f()}}for(var l=[],c=0;c<t.length;c++){var f=t[c];if(null!==f.workingexpr){var h=this.reformulateWithoutAdaptions(f.workingexpr);if(h.cannot)return Object(d.t)(!1);var y=f.clone();y.workingexpr=h.where,l.push(y)}else l.push(f)}var v=this.reformulateWithoutAdaptions(a);return v.cannot?Object(d.t)(!1):(null!==(a=v.where)?null!==this._extraFilter&&(a=Object(p.a)(this._extraFilter,a)):a=this._extraFilter,this._parent._canDoAggregates(e,l,r,n,a))}},{key:"_getAggregatePagesDataSourceDefinition",value:function(e,t,r,n,a,i,o){if(null===this._parent)return Object(d.s)(new Error("Should never be called"));for(var u=[],s=0;s<t.length;s++){var l=t[s];if(null!==l.workingexpr){var c=this.reformulateWithoutAdaptions(l.workingexpr);if(c.cannot)return Object(d.s)(new Error("Should never be called"));var f=l.clone();f.workingexpr=c.where,u.push(f)}else u.push(l)}var h=this.reformulateWithoutAdaptions(a);return h.cannot?Object(d.s)(new Error("Should never be called")):(null!==(a=h.where)?null!==this._extraFilter&&(a=Object(p.a)(this._extraFilter,a)):a=this._extraFilter,this._parent._getAggregatePagesDataSourceDefinition(e,u,r,n,a,i,o))}}],[{key:"findField",value:function(e,t){var r,n=b(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.name.toLowerCase()===t.toString().toLowerCase())return a}}catch(i){n.e(i)}finally{n.f()}return null}}]),r}(c.a)},PZVk:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r("eijD"),a=r("hisu"),i=r("yBJb"),o=r("NthX"),u=r.n(o),s=r("DGz/"),l=r("EKEt"),c=r("Mp7X"),f=r("7im+"),h=r("IH5m"),p=r("z9dv"),d=function(){function e(t){Object(a.a)(this,e),this.streamDataRequester=t}var t,r,o,d;return Object(i.a)(e,[{key:"loadJSON",value:(d=Object(n.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load("json",t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"loadBinary",value:(o=Object(n.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p.u)(t)?(Object(h.v)(r),Object(p.j)(t)):this.load("binary",t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"loadImage",value:(r=Object(n.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load("image",t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"load",value:(t=Object(n.a)(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(f.h)(this.streamDataRequester)){e.next=4;break}return e.next=3,Object(s.default)(r,{responseType:y[t]});case 3:return e.abrupt("return",e.sent.data);case 4:return e.next=6,Object(l.c)(this.streamDataRequester.request(r,t,n));case 6:if(!0!==(a=e.sent).ok){e.next=9;break}return e.abrupt("return",a.value);case 9:throw Object(h.u)(a.error),new c.a("","Request for resource failed: ".concat(a.error));case 10:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})}]),e}(),y={image:"image",binary:"array-buffer",json:"json"}},"Q+lp":function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return s}));var n=r("6J1V"),a=r("WW+m"),i=r("qFFn"),o=r("KcHx");function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return[e[0],e[1],e[2],e[3]]}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return Object(o.h)(r,e),r[3]=t,r}function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return Object(a.f)(d,e,f(e)),Object(a.f)(y,t,f(t)),Object(a.e)(d,y,d),h(r,Object(n.q)(Object(a.b)(r,d)))}function c(e){return e}function f(e){return Object(n.g)(e[3])}function h(e,t){return e[3]=t,e}var p=[0,0,1,0],d=Object(i.b)(),y=Object(i.b)();u()},QowV:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("Kp6J");function n(e,t,r,n){var a=e.clone(),i=1<<a.level,o=a.col+t,u=a.row+r;return n&&o<0?(a.col=o+i,a.world-=1):o>=i?(a.col=o-i,a.world+=1):a.col=o,a.row=u,a}},RG1N:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("dQW7"),l=r("FYmP"),c=r("xAIp"),f=(r("J4Pc"),r("wckI"),r("TM+E"),r("iaHD"));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var p=function(e){Object(i.a)(r,e);var t=h(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"initialize",value:function(){}},{key:"destroy",value:function(){}},{key:"supportsTileUpdates",get:function(){return!1}},{key:"spatialReference",get:function(){var e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}}]),r}(l.a);Object(s.a)([Object(c.b)({readOnly:!0})],p.prototype,"supportsTileUpdates",null),Object(s.a)([Object(c.b)({constructOnly:!0})],p.prototype,"remoteClient",void 0),Object(s.a)([Object(c.b)({constructOnly:!0})],p.prototype,"service",void 0),Object(s.a)([Object(c.b)()],p.prototype,"spatialReference",null),Object(s.a)([Object(c.b)({constructOnly:!0})],p.prototype,"tileInfo",void 0),Object(s.a)([Object(c.b)({constructOnly:!0})],p.prototype,"tileStore",void 0);var d=p=Object(s.a)([Object(f.a)("esri.views.2d.layers.features.processors.BaseProcessor")],p);t.a=d},Raue:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb");function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){return e===t?0:null===e?-1:null===t?1:e<t?-1:1}var s=function(){function e(t){Object(n.a)(this,e);var r=t.split(",");this._fields=[],this._directions=[];for(var a=0;a<r.length;a++){var i=r[a].match(/\S+/g);this._fields.push(i[0]),2===i.length?"asc"===i[1].toLowerCase()?this._directions.push(1):this._directions.push(0):this._directions.push(1)}}return Object(a.a)(e,[{key:"constructClause",value:function(){for(var e="",t=0;t<this._fields.length;t++)0!==t&&(e+=","),e+=this._fields[t],1===this._directions[t]?e+=" ASC":e+=" DESC";return e}},{key:"order",value:function(e){var t=this;e.sort((function(e,r){for(var n=0;n<t._fields.length;n++){var a,i=t.featureValue(e.feature,t._fields[n],n),o=t.featureValue(r.feature,t._fields[n],n);if(0!==(a=1===t._directions[n]?u(i,o):-1*u(i,o)))return a}return 0}))}},{key:"scanForField",value:function(e){for(var t=0;t<this._fields.length;t++)if(this._fields[t].toLowerCase().trim()===e.toLowerCase().trim())return!0;return!1}},{key:"replaceFields",value:function(t){for(var r="",n=0;n<this._fields.length;n++){0!==n&&(r+=",");var a,o=this._fields[n],u=i(t);try{for(u.s();!(a=u.n()).done;){var s=a.value;if(o.toLowerCase()===s.field.toLowerCase()){o=s.newfield;break}}}catch(l){u.e(l)}finally{u.f()}r+=o,1===this._directions[n]?r+=" ASC":r+=" DESC"}return new e(r)}},{key:"featureValue",value:function(e,t,r){var n=e.attributes[t];if(void 0!==n)return n;for(var a in e.attributes)if(t.toLowerCase()===a.toLowerCase())return this._fields[r]=a,e.attributes[a];return null}}]),e}();t.a=s},RrpW:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return O}));var n=r("7im+"),a=r("a1Tm"),i=r("djeU"),o=r("AjSt"),u=r("ahxf"),s=r("+MBG"),l=r("B9Yk"),c=r("mHKk"),f=r("42jQ"),h=r("hALY"),p=r("iuCb"),d=r("FMHe"),y=r("2r+S");function v(e,t,r){return Object(d.a)(t.spatialReference,r)?function(e,t,r){var n=t.spatialReference,a=I(t,r,A),i=new Float64Array(e.position.length),o=function(e,t,r,n){Object(p.e)(h.v.fromTypedArray(n),h.v.fromTypedArray(e),t);var a=new Float64Array(e.length);return Object(y.a)(n,a,r)}(e.position,a,n,i),u=Object(s.a)(C,a);return{position:o,normal:w(o,i,e.normal,u,n),tangent:j(o,i,e.tangent,u,n)}}(e,t,r):function(e,t,r){for(var n=new Float64Array(e.position.length),a=e.position,i=t.x,o=t.y,u=t.z||0,s=T(r?r.unit:null,t.spatialReference),l=s.horizontal,c=s.vertical,f=0;f<a.length;f+=3)n[f+0]=a[f+0]*l+i,n[f+1]=a[f+1]*l+o,n[f+2]=a[f+2]*c+u;return{position:n,normal:e.normal,tangent:e.tangent}}(e,t,r)}function b(e,t,r){var a=e.position,i=e.normal,o=e.tangent;if(Object(n.h)(t))return{position:a,normal:i,tangent:o};var u=t.localMatrix;return v({position:Object(y.h)(a,new Float64Array(a.length),u),normal:Object(n.i)(i)?Object(y.g)(i,new Float32Array(i.length),u):null,tangent:Object(n.i)(o)?Object(y.i)(o,new Float32Array(o.length),u):null},t.getOriginPoint(r),{geographic:t.geographic})}function m(e,t,r){var n;return null!=r&&r.useTransform?{vertexAttributes:{position:e.position,normal:e.normal,tangent:e.tangent},transform:new f.a({origin:[t.x,t.y,null!=(n=t.z)?n:0],geographic:Object(d.a)(t.spatialReference,r)})}:{vertexAttributes:v(e,t,r),transform:null}}function g(e,t,r){return Object(d.a)(t.spatialReference,r)?k(e,t,r):x(e,t,r)}function O(e,t,r,a){if(Object(n.h)(t))return g(e,r,a);var i=b(e,t,r.spatialReference);return r.equals(t.getOriginPoint(r.spatialReference))?x(i,r,a):Object(d.a)(r.spatialReference,a)?k(i,r,a):x(i,r,a)}function w(e,t,r,a,i){if(Object(n.h)(r))return null;var o=new Float32Array(r.length);return Object(p.a)(h.u.fromTypedArray(o),h.u.fromTypedArray(r),a),Object(y.b)(o,e,t,i,o),o}function j(e,t,r,a,i){if(Object(n.h)(r))return null;var o=new Float32Array(r.length);Object(p.a)(h.u.fromTypedArray(o,4*Float32Array.BYTES_PER_ELEMENT),h.u.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),a);for(var u=3;u<o.length;u+=4)o[u]=r[u];return Object(y.d)(o,e,t,i,o),o}function x(e,t,r){for(var n=new Float64Array(e.position.length),a=e.position,i=t.x,o=t.y,u=t.z||0,s=T(r?r.unit:null,t.spatialReference),l=s.horizontal,c=s.vertical,f=0;f<a.length;f+=3)n[f+0]=(a[f+0]-i)/l,n[f+1]=(a[f+1]-o)/l,n[f+2]=(a[f+2]-u)/c;return{position:n,normal:e.normal,tangent:e.tangent}}function k(e,t,r){var n=t.spatialReference;I(t,r,A);var a=Object(o.a)(M,A),i=new Float64Array(e.position.length),u=function(e,t,r,n){var a=Object(y.f)(e,t,n),i=h.v.fromTypedArray(a),o=new Float64Array(a.length),u=h.v.fromTypedArray(o);return Object(p.e)(u,i,r),o}(e.position,n,a,i),l=Object(s.a)(C,a);return{position:u,normal:_(e.normal,e.position,i,n,l),tangent:S(e.tangent,e.position,i,n,l)}}function I(e,t,r){Object(l.c)(e.spatialReference,[e.x,e.y,e.z||0],r,Object(c.g)(e.spatialReference));var n=T(t?t.unit:null,e.spatialReference),a=n.horizontal,i=n.vertical;return Object(o.l)(r,r,[a,a,i]),r}function _(e,t,r,a,i){if(Object(n.h)(e))return null;var o=Object(y.c)(e,t,r,a,new Float32Array(e.length)),u=h.u.fromTypedArray(o);return Object(p.a)(u,u,i),o}function S(e,t,r,a,i){if(Object(n.h)(e))return null;var o=Object(y.e)(e,t,r,a,new Float32Array(e.length)),u=h.u.fromTypedArray(o,4*Float32Array.BYTES_PER_ELEMENT);return Object(p.a)(u,u,i),o}function T(e,t){if(Object(n.h)(e))return P;var r=t.isGeographic?1:Object(a.c)(t),i=t.isGeographic?1:Object(a.e)(t),o=Object(a.b)(1,e,"meters");return{horizontal:o*r,vertical:o*i}}var A=Object(u.d)(),M=Object(u.d)(),C=Object(i.b)(),P={horizontal:1,vertical:1}},S1zV:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return d}));var n=r("mK0O"),a=r("8N15"),i=r("YRYL"),o=r("sfoB"),u=r("zwLX"),s=r("xiHV"),l=r("h+Bk"),c=r("stpy");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={key:"type",base:null,typeMap:{"unique-value":l.a,"class-breaks":i.a,"raster-colormap":o.a,"raster-stretch":s.a,"vector-field":c.a,"raster-shaded-relief":u.a}},d=h(h({},p),{},{typeMap:h({},p.typeMap)});delete d.typeMap["vector-field"];var y={uniqueValue:l.a,classBreaks:i.a,rasterStretch:s.a,rasterColormap:o.a,vectorField:c.a,rasterShadedRelief:u.a};function v(e,t){if(!e)return null;if("classBreaks"===e.type&&e.classificationMethod){var r=e.authoringInfo||{classificationMethod:""};r.classificationMethod=e.classificationMethod,e.authoringInfo=r}var n,i=(n=e)&&y[n.type]||null;if(i){var o=new i;return o.read(e,t),o}return t&&t.messages&&e&&t.messages.push(new a.a("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}},Se8w:function(e,t,r){"use strict";var n=r("JRM0"),a=r("3I4I"),i=r("9pAD"),o=r("zrDt"),u=r("wTAb"),s=r("iSxr");n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),r=o(t.length),n=s(t,0);return n.length=a(n,t,t,r,0,void 0===e?1:u(e)),n}})},T2ou:function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return m}));var n=r("hisu"),a=r("CHlC"),i=r("kMo5"),o=r("P+uj"),u=r("dQW7"),s=r("0n+b"),l=r("xAIp"),c=(r("J4Pc"),r("wckI"),r("TM+E"),r("vo12")),f=r("iaHD");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var a=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var p=function(e){Object(a.a)(r,e);var t=h(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).nodesPerPage=null,e.rootIndex=0,e.lodSelectionMetricType=null,e}return r}(s.a);Object(u.a)([Object(l.b)({type:Number})],p.prototype,"nodesPerPage",void 0),Object(u.a)([Object(l.b)({type:Number})],p.prototype,"rootIndex",void 0),Object(u.a)([Object(l.b)({type:String})],p.prototype,"lodSelectionMetricType",void 0),p=Object(u.a)([Object(f.a)("esri.layer.support.I3SNodePageDefinition")],p);var d=function(e){Object(a.a)(r,e);var t=h(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).factor=1,e}return r}(s.a);Object(u.a)([Object(l.b)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],d.prototype,"id",void 0),Object(u.a)([Object(l.b)({type:Number})],d.prototype,"factor",void 0),d=Object(u.a)([Object(f.a)("esri.layer.support.I3SMaterialTexture")],d);var y=function(e){Object(a.a)(r,e);var t=h(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).baseColorFactor=[1,1,1,1],e.baseColorTexture=null,e.metallicRoughnessTexture=null,e.metallicFactor=1,e.roughnessFactor=1,e}return r}(s.a);Object(u.a)([Object(l.b)({type:[Number]})],y.prototype,"baseColorFactor",void 0),Object(u.a)([Object(l.b)({type:d})],y.prototype,"baseColorTexture",void 0),Object(u.a)([Object(l.b)({type:d})],y.prototype,"metallicRoughnessTexture",void 0),Object(u.a)([Object(l.b)({type:Number})],y.prototype,"metallicFactor",void 0),Object(u.a)([Object(l.b)({type:Number})],y.prototype,"roughnessFactor",void 0),y=Object(u.a)([Object(f.a)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],y);var v=function(e){Object(a.a)(r,e);var t=h(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).alphaMode="opaque",e.alphaCutoff=.25,e.doubleSided=!1,e.cullFace="none",e.normalTexture=null,e.occlusionTexture=null,e.emissiveTexture=null,e.emissiveFactor=null,e.pbrMetallicRoughness=null,e}return r}(s.a);Object(u.a)([Object(c.a)({opaque:"opaque",mask:"mask",blend:"blend"})],v.prototype,"alphaMode",void 0),Object(u.a)([Object(l.b)({type:Number})],v.prototype,"alphaCutoff",void 0),Object(u.a)([Object(l.b)({type:Boolean})],v.prototype,"doubleSided",void 0),Object(u.a)([Object(c.a)({none:"none",back:"back",front:"front"})],v.prototype,"cullFace",void 0),Object(u.a)([Object(l.b)({type:d})],v.prototype,"normalTexture",void 0),Object(u.a)([Object(l.b)({type:d})],v.prototype,"occlusionTexture",void 0),Object(u.a)([Object(l.b)({type:d})],v.prototype,"emissiveTexture",void 0),Object(u.a)([Object(l.b)({type:[Number]})],v.prototype,"emissiveFactor",void 0),Object(u.a)([Object(l.b)({type:y})],v.prototype,"pbrMetallicRoughness",void 0),v=Object(u.a)([Object(f.a)("esri.layer.support.I3SMaterialDefinition")],v);var b=function(e){Object(a.a)(r,e);var t=h(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(s.a);Object(u.a)([Object(l.b)({type:String,json:{read:{source:["name","index"],reader:function(e,t){return null!=e?e:"".concat(t.index)}}}})],b.prototype,"name",void 0),Object(u.a)([Object(c.a)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],b.prototype,"format",void 0),b=Object(u.a)([Object(f.a)("esri.layer.support.I3STextureFormat")],b);var m=function(e){Object(a.a)(r,e);var t=h(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).atlas=!1,e}return r}(s.a);Object(u.a)([Object(l.b)({type:[b]})],m.prototype,"formats",void 0),Object(u.a)([Object(l.b)({type:Boolean})],m.prototype,"atlas",void 0),m=Object(u.a)([Object(f.a)("esri.layer.support.I3STextureSetDefinition")],m);var g=function(e){Object(a.a)(r,e);var t=h(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(s.a);Object(u.a)([Object(c.a)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],g.prototype,"type",void 0),Object(u.a)([Object(l.b)({type:Number})],g.prototype,"component",void 0),g=Object(u.a)([Object(f.a)("esri.layer.support.I3SGeometryAttribute")],g);var O=function(e){Object(a.a)(r,e);var t=h(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(s.a);Object(u.a)([Object(c.a)({draco:"draco"})],O.prototype,"encoding",void 0),Object(u.a)([Object(l.b)({type:[String]})],O.prototype,"attributes",void 0),O=Object(u.a)([Object(f.a)("esri.layer.support.I3SGeometryCompressedAttributes")],O);var w=function(e){Object(a.a)(r,e);var t=h(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).offset=0,e}return r}(s.a);Object(u.a)([Object(l.b)({type:Number})],w.prototype,"offset",void 0),Object(u.a)([Object(l.b)({type:g})],w.prototype,"position",void 0),Object(u.a)([Object(l.b)({type:g})],w.prototype,"normal",void 0),Object(u.a)([Object(l.b)({type:g})],w.prototype,"uv0",void 0),Object(u.a)([Object(l.b)({type:g})],w.prototype,"color",void 0),Object(u.a)([Object(l.b)({type:g})],w.prototype,"uvRegion",void 0),Object(u.a)([Object(l.b)({type:g})],w.prototype,"featureId",void 0),Object(u.a)([Object(l.b)({type:g})],w.prototype,"faceRange",void 0),Object(u.a)([Object(l.b)({type:O})],w.prototype,"compressedAttributes",void 0),w=Object(u.a)([Object(f.a)("esri.layer.support.I3SGeometryBuffer")],w);var j=function(e){Object(a.a)(r,e);var t=h(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(s.a);Object(u.a)([Object(c.a)({triangle:"triangle"})],j.prototype,"topology",void 0),Object(u.a)([Object(l.b)()],j.prototype,"geometryBuffers",void 0),j=Object(u.a)([Object(f.a)("esri.layer.support.I3SGeometryDefinition")],j)},UPdV:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return y}));var n=r("hisu"),a=r("yBJb"),i=r("7im+"),o=r("1w7Q"),u=r("djeU"),s=r("ahxf"),l=r("qFFn"),c=r("MJqN"),f=r("4vgF"),h=r("MPZ8"),p=function(){function e(t,r,a){var i=this;Object(n.a)(this,e),this.itemByteSize=t,this.itemCreate=r,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(a/this.itemByteSize),this.tickHandle=o.a.before((function(){return i.reset()}))}return Object(a.a)(e,[{key:"destroy",value:function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(i.m)(this.tickHandle)),this.itemsPtr=0,this.items=Object(i.m)(this.items),this.buffers=Object(i.m)(this.buffers)}},{key:"get",value:function(){0===this.itemsPtr&&Object(o.a)((function(){}));for(var e=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=e;){for(var t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize),r=0;r<this.itemsPerBuffer;++r)this.items.push(this.itemCreate(t,r*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]}},{key:"reset",value:function(){for(var e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}},{key:"test",get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}],[{key:"createVec2f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return new e(16,c.b,t)}},{key:"createVec3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return new e(24,f.d,t)}},{key:"createVec4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return new e(32,h.a,t)}},{key:"createMat3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return new e(72,u.a,t)}},{key:"createMat4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return new e(128,s.b,t)}},{key:"createQuatf64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return new e(32,l.d,t)}}]),e}(),d=4096,y=(p.createVec2f64(),p.createVec3f64()),v=(p.createVec4f64(),p.createMat3f64(),p.createMat4f64());p.createQuatf64()},Ufyo:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return p})),r.d(t,"h",(function(){return g}));r("ZTBZ");var n=r("7im+"),a=r("hisu"),i=r("yBJb"),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;Object(a.a)(this,e),this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=t,this._interval=Math.min(t,r)}return Object(i.a)(e,[{key:"decreaseRefCount",value:function(e,t){var r=e+"/"+t,n=this._cachedBlocks;if(n.has(r)){var a=n.get(r);return a.refCount--,a.refCount<=0&&(n.delete(r),a.controller&&a.controller.abort()),a.refCount}return 0}},{key:"getBlock",value:function(e,t){var r=e+"/"+t,n=this._cachedBlocks;if(n.has(r)){var a=n.get(r);return a.ts=Date.now(),a.refCount++,n.delete(r),n.set(r,a),a.block}return null}},{key:"putBlock",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this._cachedBlocks,i=e+"/"+t;if(a.has(i)){var o=a.get(i);o.ts=Date.now(),o.refCount++}else a.set(i,{block:r,ts:Date.now(),refCount:1,controller:n});this.trim(),this.updateTimer()}},{key:"deleteBlock",value:function(e,t){var r=this._cachedBlocks,n=e+"/"+t;r.has(n)&&r.delete(n)}},{key:"updateMaxSize",value:function(e){this._size=e,this.trim()}},{key:"empty",value:function(){this._cachedBlocks.clear(),this.clearTimer()}},{key:"getCurrentSize",value:function(){return this._cachedBlocks.size}},{key:"updateTimer",value:function(){var e=this;if(null==this._timer){var t=this._cachedBlocks;this._timer=setInterval((function(){for(var r=Array.from(t),n=Date.now(),a=0;a<r.length&&r[a][1].ts<=n-e._duration;a++)t.delete(r[a][0]);0===t.size&&e.clearTimer()}),this._interval)}}},{key:"trim",value:function(){var e=this._cachedBlocks;if(!(-1===this._size||this._size>=e.size))for(var t=Array.from(e),r=0;r<t.length-this._size;r++)e.delete(t[r][0])}},{key:"clearTimer",value:function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}}]),e}(),u=r("lWwP"),s=r("OTJA"),l=new Map,c=new o;function f(e,t){return null==t?e:"".concat(e,"?sliceId=").concat(t)}function h(e,t){var r={extent:null,rasterInfo:t,cache:new Map};if(l.has(e)){var n=l.get(e);return n.push(r),n.length-1}return l.set(e,[r]),0}function p(e,t){if(l.has(e)){var r=l.get(e);r[t]=null,r.some((function(e){return null!=e}))||l.delete(e)}}function d(e,t,r){if(!l.has(e))return null==t?c.decreaseRefCount(e,r):0;var n=l.get(e);if(null==n[t])return c.decreaseRefCount(e,r);var a=n[t].cache;if(a.has(r)){var i=a.get(r);if(i.refCount--,0===i.refCount){a.delete(r);for(var o=0;o<n.length;o++)n[o]&&n[o].cache.has(r)&&n[o].cache.delete(r);i.controller&&i.controller.abort()}return i.refCount}return 0}function y(e,t,r){if(!l.has(e))return null==t?c.getBlock(e,r):null;var n=l.get(e);if(null==n[t]){for(var a=0;a<n.length;a++)if(n[a]&&n[a].cache.has(r)){var i=n[a].cache.get(r);return i.refCount++,i.block}return c.getBlock(e,r)}var o=n[t].cache;if(o.has(r)){var u=o.get(r);return u.refCount++,u.block}for(var s=0;s<n.length;s++)if(s!==t&&n[s]&&n[s]&&n[s].cache.has(r)){var f=n[s].cache.get(r);return f.refCount++,o.set(r,f),f.block}return null}function v(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(l.has(e)){var i=l.get(e);if(null!=i[t]){var o={refCount:1,block:n,isResolved:!1,isRejected:!1,controller:a};n.then((function(){return o.isResolved=!0})).catch((function(){return o.isRejected=!0})),i[t].cache.set(r,o)}else c.putBlock(e,r,n,a)}else null==t&&c.putBlock(e,r,n,a)}function b(e,t,r){if(l.has(e)){var n=l.get(e);null!=n[t]?n[t].cache.delete(r):c.deleteBlock(e,r)}else null==t&&c.deleteBlock(e,r)}function m(e,t){if(!l.has(e))return null;var r=l.get(e);return null==r[t]?null:r[t]}function g(e,t,r,a,i,o){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=m(e,t),f=c.extent,h=c.cache,p=c.rasterInfo;if(!f||f.xmin!==r.xmin||f.xmax!==r.xmax||f.ymin!==r.ymin||f.ymax!==r.ymax){for(var d=r.clone().normalize(),y=p.spatialReference,v=p.transform,b=new Set,g=0;g<d.length;g++){var O=d[g];if(!(O.xmax-O.xmin<=a||O.ymax-O.ymin<=a)){var w=Object(u.g)(O,y,l);Object(n.i)(v)&&(w=v.inverseTransform(w));var j=new s.a({x:a,y:a,spatialReference:O.spatialReference});if(null==i&&!(i=Object(u.i)(j,y,O,l)))return;var x=Object(u.k)(i,p,o||"closest"),k=x.pyramidLevel,I=x.pyramidResolution,_=x.excessiveReading;if(_)return;for(var S=p.storageInfo,T=S.origin,A={x:Math.max(0,Math.floor((w.xmin-T.x)/I.x)),y:Math.max(0,Math.floor((T.y-w.ymax)/I.y))},M=Math.ceil((w.xmax-w.xmin)/I.x-.1),C=Math.ceil((w.ymax-w.ymin)/I.y-.1),P=k>0?S.pyramidBlockWidth:S.blockWidth,D=k>0?S.pyramidBlockHeight:S.blockHeight,E=1,R=Math.max(0,Math.floor(A.x/P)-E),N=Math.max(0,Math.floor(A.y/D)-E),B=Math.floor((A.x+M-1)/P)+E,F=Math.floor((A.y+C-1)/D)+E,L=N;L<=F;L++)for(var U=R;U<=B;U++)b.add("".concat(k,"/").concat(L,"/").concat(U))}}h.forEach((function(e,t){if(!b.has(t)){var r=h.get(t);(null==r||r.isResolved||r.isRejected)&&h.delete(t)}})),c.extent={xmin:r.xmin,ymin:r.ymin,xmax:r.xmax,ymax:r.ymax}}}},W32V:function(e,t,r){"use strict";r.d(t,"a",(function(){return ut})),r.d(t,"b",(function(){return ft})),r.d(t,"c",(function(){return st})),r.d(t,"d",(function(){return ht})),r.d(t,"e",(function(){return lt})),r.d(t,"f",(function(){return ct})),r.d(t,"g",(function(){return pt}));var n=r("CHlC"),a=r("kMo5"),i=r("P+uj"),o=r("hisu"),u=r("yBJb"),s=r("mK0O"),l=r("7im+"),c=r("r9FC");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(){function e(t){Object(o.a)(this,e),this._locations=new Map,this._key=t}return Object(u.a)(e,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return 7&this._key}},{key:"defines",value:function(){return[]}},{key:"getStride",value:function(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}},{key:"getAttributeLocations",value:function(){return 0===this._locations.size&&this._buildAttributesInfo(),this._locations}},{key:"getLayoutInfo",value:function(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}},{key:"getEncodingInfos",value:function(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}},{key:"getUniforms",value:function(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}},{key:"getShaderHeader",value:function(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}},{key:"getShaderMain",value:function(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}},{key:"setDataUniforms",value:function(e,t,r,n,a){var i,o=p(this.getUniforms());try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.name,l=u.type,c=(0,u.getValue)(r,t,n,a);if(null!==c)switch(l){case"float":e.setUniform1f(s,c);break;case"vec2":e.setUniform2fv(s,c);break;case"vec4":e.setUniform4fv(s,c)}}}catch(f){o.e(f)}finally{o.f()}}},{key:"encodeAttributes",value:function(e,t,r,n){for(var a=this.attributesInfo(),i=this.getEncodingInfos(),o=[],u=0,s=0,l=0,c=Object.keys(i);l<c.length;l++){var f,h,d=c[l],y=i[d],v=a[d],b=v.type,m=v.precisionFactor,g=v.isLayout?r.getLayoutProperty(d):r.getPaintProperty(d),O=null==(f=g.interpolator)?void 0:f.getInterpolationRange(t),w=0,j=p(y);try{for(j.s();!(h=j.n()).done;){var x=h.value,k=x.offset,I=x.bufferElementsToAdd;if(I>0){for(var _=0;_<I;_++)o.push(0);u+=s,s=x.bufferElementsToAdd}var S=null!=n?n:g.getValue(O?O[w]:t,e);switch(b){case 0:case 1:o[u]|=this._encodeByte(S*(m||1),8*k);break;case 2:case 3:o[u]|=this._encodeShort(S*(m||1),8*k);break;case 4:case 5:o[u]|=this._encodeByte(S*(m||1),8*k),o[u]|=this._encodeByte(S*(m||1),8*k+8);break;case 6:case 7:o[u]|=this._encodeShort(S*(m||1),8*k),o[u]|=this._encodeShort(S*(m||1),8*k+16);break;case 8:case 9:o[u]|=this._encodeByte(S*(m||1),8*k),o[u]|=this._encodeByte(S*(m||1),8*k+8),o[u]|=this._encodeByte(S*(m||1),8*k+16),o[u]|=this._encodeByte(S*(m||1),8*k+24);break;case 10:o[u]=this._encodeColor(S);break;case 11:case 12:this._encodePattern(u,o,S);break;default:throw new Error("Unsupported encoding type")}w++}}catch(T){j.e(T)}finally{j.f()}}return o}},{key:"getAtributeState",value:function(e){var t=0,r=3+2*e;return t|=this._bit(r),t|=this._bit(r+1)<<1}},{key:"_buildAttributesInfo",value:function(){var t,r=[],n={},a={},i=-1,o=this.attributesInfo(),u=-1,s=p(this.attributes());try{for(s.s();!(t=s.n()).done;){var l=t.value;u++;var c=this.getAtributeState(u);if(0!==c&&3!==c){var f=o[l],h=[];n[l]=h;for(var d=f.type,y=0;y<c;y++){var v=e._encodingInfo[d],b=v.dataType,m=v.bytesPerElement,g=v.count,O=v.normalized,w=m*g,j=a[b],x=0;if(!j||j.count+g>4)j={dataIndex:++i,count:0,offset:0},4!==g&&(a[b]=j),r.push({location:-1,name:"a_data_"+i,count:g,type:b,normalized:O}),x=Math.ceil(Math.max(w/4,1));else{var k=r[j.dataIndex];k.count+=g,x=Math.ceil(Math.max(k.count*m/4,1))-Math.ceil(Math.max(j.offset/4,1))}h.push({dataIndex:j.dataIndex,offset:j.offset,bufferElementsToAdd:x}),j.offset+=w,j.count+=g}}}}catch(N){s.e(N)}finally{s.f()}for(var I=0,_=r;I<_.length;I++){var S=_[I];switch(S.type){case 5120:case 5121:S.count=4;case 5122:case 5123:S.count+=S.count%2}}this._buildVertexBufferLayout(r);var T,A=0,M=p(this._layoutInfo.geometry);try{for(M.s();!(T=M.n()).done;){var C=T.value;this._locations.set(C.name,A++)}}catch(N){M.e(N)}finally{M.f()}var P=this._layoutInfo.opacity;if(P){var D,E=p(P);try{for(E.s();!(D=E.n()).done;){var R=D.value;this._locations.set(R.name,A++)}}catch(N){E.e(N)}finally{E.f()}}this._buildShaderInfo(r,n),this._propertyEncodingInfo=n}},{key:"_buildVertexBufferLayout",value:function(e){var t={},r=this.geometryInfo(),n=r[0].stride;if(0===e.length)t.geometry=r;else{var a,i=[],o=n,u=p(e);try{for(u.s();!(a=u.n()).done;){var s=a.value;n+=v(s.type)*s.count}}catch(m){u.e(m)}finally{u.f()}var l,c=p(r);try{for(c.s();!(l=c.n()).done;){var f=h({},l.value);f.stride=n,i.push(f)}}catch(m){c.e(m)}finally{c.f()}var d,y=p(e);try{for(y.s();!(d=y.n()).done;){var b=d.value;i.push({name:b.name,count:b.count,type:b.type,offset:o,stride:n,normalized:b.normalized||!1,divisor:0}),o+=v(b.type)*b.count}}catch(m){y.e(m)}finally{y.f()}t.geometry=i}this.opacityInfo()&&(t.opacity=this.opacityInfo()),this._layoutInfo=t,this._stride=n}},{key:"_buildShaderInfo",value:function(t,r){var n,a=this,i="\n",o="\n",u=[],s=p(t);try{for(s.s();!(n=s.n()).done;){var c=n.value;i+="attribute ".concat(this._getType(c.count)," ").concat(c.name,";\n")}}catch(g){s.e(g)}finally{s.f()}var f,h=this.attributes(),d=this.attributesInfo(),y=-1,v=p(h);try{var m=function(){var t=f.value;y++;var n=d[t],s=n.name,c=n.type,h=n.precisionFactor,p=n.isLayout,v=h&&1!==h?" * "+1/h:"",m=e._encodingInfo[c],g=m.bytesPerElement,O=m.count,w=function(e){return"a_data_".concat(e.dataIndex).concat(b(O,e.offset,g))};switch(a.getAtributeState(y)){case 0:var j=a._getType(O),x="u_".concat(s);u.push({name:x,type:j,getValue:function(e,r,n,a){var i=p?e.getLayoutValue(t,r):e.getPaintValue(t,r);if(11===c){var o=e.getDashKey(i,e.getLayoutValue("line-cap",r)),u=a.getMosaicItemPosition(o,!1);if(Object(l.h)(u))return null;var s=u.tl,f=u.br;return[s[0],f[1],f[0],s[1]]}if(12===c){var h=a.getMosaicItemPosition(i,-1===t.indexOf("line-"));if(Object(l.h)(h))return null;var d=h.tl,y=h.br;return[d[0],y[1],y[0],d[1]]}if(10===c){var v=i[3];return[v*i[0],v*i[1],v*i[2],v]}return i}}),i+="uniform ".concat(j," ").concat(x,";\n"),o+="".concat(j," ").concat(s," = ").concat(x,";\n");break;case 1:var k=w(r[t][0]);o+="".concat(a._getType(O)," ").concat(s," = ").concat(k).concat(v,";\n");break;case 2:var I="u_t_".concat(s);u.push({name:I,type:"float",getValue:function(e,r,n,a){return(p?e.getLayoutProperty(t):e.getPaintProperty(t)).interpolator.interpolationUniformValue(n,r)}}),i+="uniform float ".concat(I,";\n");var _=w(r[t][0]),S=w(r[t][1]);o+="".concat(a._getType(O)," ").concat(s," = mix(").concat(_).concat(v,", ").concat(S).concat(v,", ").concat(I,");\n")}};for(v.s();!(f=v.n()).done;)m()}catch(g){v.e(g)}finally{v.f()}this._shaderHeader=i,this._shaderMain=o,this._uniforms=u}},{key:"_bit",value:function(e){return(this._key&1<<e)>>e}},{key:"_getType",value:function(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw new Error("Invalid count")}},{key:"_encodeColor",value:function(e){var t=255*e[3];return c.a.i8888to32(e[0]*t,e[1]*t,e[2]*t,t)}},{key:"_encodePattern",value:function(e,t,r){if(r&&r.rect){var n=r.rect,a=r.width,i=r.height;t[e]=this._encodeShort(n.x+2,0),t[e]|=this._encodeShort(n.y+2+i,16),t[e+1]=this._encodeShort(n.x+2+a,0),t[e+1]|=this._encodeShort(n.y+2,16)}}},{key:"_encodeByte",value:function(e,t){return(255&e)<<t}},{key:"_encodeShort",value:function(e,t){return(65535&e)<<t}}]),e}();y._encodingInfo={0:{dataType:5120,bytesPerElement:1,count:1,normalized:!1},1:{dataType:5121,bytesPerElement:1,count:1,normalized:!1},2:{dataType:5122,bytesPerElement:2,count:1,normalized:!1},3:{dataType:5123,bytesPerElement:2,count:1,normalized:!1},4:{dataType:5120,bytesPerElement:1,count:2,normalized:!1},5:{dataType:5121,bytesPerElement:1,count:2,normalized:!1},6:{dataType:5122,bytesPerElement:2,count:2,normalized:!1},7:{dataType:5123,bytesPerElement:2,count:2,normalized:!1},8:{dataType:5120,bytesPerElement:1,count:4,normalized:!1},9:{dataType:5121,bytesPerElement:1,count:4,normalized:!1},10:{dataType:5121,bytesPerElement:1,count:4,normalized:!0},11:{dataType:5123,bytesPerElement:2,count:4,normalized:!1},12:{dataType:5123,bytesPerElement:2,count:4,normalized:!1}};var v=function(e){switch(e){case 5126:case 5124:case 5125:return 4;case 5122:case 5123:return 2;case 5120:case 5121:return 1}},b=function(e,t,r){var n=t/r;if(1===e)switch(n){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===e)switch(n){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===e)switch(n){case 0:return".xyz";case 1:return".yzw"}return""};function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var o=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}var g=function(e){Object(n.a)(r,e);var t=m(r);function r(e){return Object(o.a)(this,r),t.call(this,e)}return Object(u.a)(r,[{key:"geometryInfo",value:function(){return r.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return r.ATTRIBUTES}},{key:"attributesInfo",value:function(){return r.ATTRIBUTES_INFO}}]),r}(y);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var o=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}g.ATTRIBUTES=[],g.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}],g.ATTRIBUTES_INFO={};var w=function(e){Object(n.a)(r,e);var t=O(r);function r(e){return Object(o.a)(this,r),t.call(this,e)}return Object(u.a)(r,[{key:"geometryInfo",value:function(){return r.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return r.ATTRIBUTES}},{key:"attributesInfo",value:function(){return r.ATTRIBUTES_INFO}}]),r}(y);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var o=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}w.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],w.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}],w.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:1},"circle-color":{name:"color",type:10},"circle-opacity":{name:"opacity",type:1,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:1,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:10},"circle-stroke-opacity":{name:"stroke_opacity",type:1,precisionFactor:100},"circle-blur":{name:"blur",type:1,precisionFactor:32}};var x=function(e){Object(n.a)(r,e);var t=j(r);function r(e){return Object(o.a)(this,r),t.call(this,e)}return Object(u.a)(r,[{key:"geometryInfo",value:function(){return r.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return r.ATTRIBUTES}},{key:"attributesInfo",value:function(){return r.ATTRIBUTES_INFO}}]),r}(y);x.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"],x.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}],x.ATTRIBUTES_INFO={"fill-color":{name:"color",type:10},"fill-opacity":{name:"opacity",type:1,precisionFactor:100},"fill-pattern":{name:"tlbr",type:12,isOptional:!0}};var k=function(e){Object(n.a)(r,e);var t=j(r);function r(e,n){var a;return Object(o.a)(this,r),(a=t.call(this,e)).usefillColor=n,a}return Object(u.a)(r,[{key:"geometryInfo",value:function(){return r.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return this.usefillColor?r.ATTRIBUTES_FILL:r.ATTRIBUTES_OUTLINE}},{key:"attributesInfo",value:function(){return this.usefillColor?r.ATTRIBUTES_INFO_FILL:r.ATTRIBUTES_INFO_OUTLINE}}]),r}(y);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var o=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}k.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],k.ATTRIBUTES_FILL=["fill-color","fill-opacity"],k.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}],k.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:10},"fill-opacity":{name:"opacity",type:1,precisionFactor:100}},k.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:10},"fill-opacity":{name:"opacity",type:1,precisionFactor:100}};var _=function(e){Object(n.a)(r,e);var t=I(r);function r(e){return Object(o.a)(this,r),t.call(this,e)}return Object(u.a)(r,[{key:"geometryInfo",value:function(){return r.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return r.ATTRIBUTES}},{key:"attributesInfo",value:function(){return r.ATTRIBUTES_INFO}}]),r}(y);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var o=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}_.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width","line-pattern","line-dasharray"],_.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_extrude_offset",count:4,type:5120,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_dir_normal",count:4,type:5120,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,offset:12,stride:16,normalized:!1,divisor:0}],_.ATTRIBUTES_INFO={"line-width":{name:"width",type:1,precisionFactor:2},"line-gap-width":{name:"gap_width",type:1,precisionFactor:2},"line-offset":{name:"offset",type:0,precisionFactor:2},"line-color":{name:"color",type:10},"line-opacity":{name:"opacity",type:1,precisionFactor:100},"line-blur":{name:"blur",type:1,precisionFactor:4},"line-pattern":{name:"tlbr",type:12,isOptional:!0},"line-dasharray":{name:"tlbr",type:11,isOptional:!0}};var T=[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_texAngleRange",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}],A=[{name:"a_opacityInfo",count:1,type:5121,offset:0,stride:1,normalized:!1,divisor:0}],M=function(e){Object(n.a)(r,e);var t=S(r);function r(e){return Object(o.a)(this,r),t.call(this,e)}return Object(u.a)(r,[{key:"geometryInfo",value:function(){return T}},{key:"opacityInfo",value:function(){return A}},{key:"attributes",value:function(){return r.ATTRIBUTES}},{key:"attributesInfo",value:function(){return r.ATTRIBUTES_INFO}}]),r}(y);M.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],M.ATTRIBUTES_INFO={"icon-color":{name:"color",type:10},"icon-opacity":{name:"opacity",type:1,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:10},"icon-halo-width":{name:"halo_width",type:1,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:1,precisionFactor:4},"icon-size":{name:"size",type:1,precisionFactor:32,isLayout:!0}};var C=function(e){Object(n.a)(r,e);var t=S(r);function r(e){return Object(o.a)(this,r),t.call(this,e)}return Object(u.a)(r,[{key:"geometryInfo",value:function(){return T}},{key:"opacityInfo",value:function(){return A}},{key:"attributes",value:function(){return r.ATTRIBUTES}},{key:"attributesInfo",value:function(){return r.ATTRIBUTES_INFO}}]),r}(y);C.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],C.ATTRIBUTES_INFO={"text-color":{name:"color",type:10},"text-opacity":{name:"opacity",type:1,precisionFactor:100},"text-halo-color":{name:"halo_color",type:10},"text-halo-width":{name:"halo_width",type:1,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:1,precisionFactor:4},"text-size":{name:"size",type:1,isLayout:!0}};var P=r("6CzD"),D=r("WYis"),E=r("jaCC"),R=r("r5cT"),N=r("9wAn");function B(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L={kind:"null"},U={kind:"number"},G={kind:"string"},z={kind:"boolean"},V={kind:"color"},H={kind:"object"},J={kind:"value"};function W(e,t){return{kind:"array",itemType:e,n:t}}var q=[L,U,G,z,V,H,W(J)];function Z(e){if("array"===e.kind){var t=Z(e.itemType);return"number"==typeof e.n?"array<".concat(t,", ").concat(e.n,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}function Y(e){if(null===e)return L;if("string"==typeof e)return G;if("boolean"==typeof e)return z;if("number"==typeof e)return U;if(e instanceof D.a)return V;if(Array.isArray(e)){var t,r,n=B(e);try{for(n.s();!(r=n.n()).done;){var a=Y(r.value);if(t){if(t!==a){t=J;break}}else t=a}}catch(i){n.e(i)}finally{n.f()}return W(t||J,e.length)}return"object"==typeof e?H:J}function K(e,t){if("array"===t.kind)return"array"===e.kind&&(0===e.n&&"value"===e.itemType.kind||K(e.itemType,t.itemType))&&("number"!=typeof t.n||t.n===e.n);if("value"===t.kind){var r,n=B(q);try{for(n.s();!(r=n.n()).done;){if(K(e,r.value))return!0}}catch(a){n.e(a)}finally{n.f()}}return t.kind===e.kind}function X(e){if(null===e)return"";var t=typeof e;return"string"===t?e:"number"===t||"boolean"===t?String(e):e instanceof D.a?e.toString():JSON.stringify(e)}function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var o=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}var ne=function(){function e(t){Object(o.a)(this,e),this.parent=t,this.vars={}}return Object(u.a)(e,[{key:"add",value:function(e,t){this.vars[e]=t}},{key:"get",value:function(e){return this.vars[e]?this.vars[e]:this.parent?this.parent.get(e):null}}]),e}(),ae=function(){function e(){Object(o.a)(this,e),this.type=J}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return null==e?void 0:e.id}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new e}}]),e}(),ie=function(){function e(){Object(o.a)(this,e),this.type=G}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){if(!e)return null;switch(e.type){case 1:return"Point";case 2:return"LineString";case 3:return"Polygon";default:return null}}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new e}}]),e}(),oe=function(){function e(){Object(o.a)(this,e),this.type=H}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return null==e?void 0:e.values}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new e}}]),e}(),ue=function(){function e(){Object(o.a)(this,e),this.type=U}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return t}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new e}}]),e}(),se=function(){function e(t,r,n){Object(o.a)(this,e),this.lhs=t,this.rhs=r,this.compare=n,this.type=z}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return this.compare(this.lhs.evaluate(e,t),this.rhs.evaluate(e,t))}}],[{key:"parse",value:function(t,r,n){if(3!==t.length&&4!==t.length)throw new Error('"'.concat(t[0],'" expects 2 or 3 arguments'));if(4===t.length)throw new Error('"'.concat(t[0],'" collator not supported'));return new e(Ye(t[1],r),Ye(t[2],r),n)}}]),e}(),le=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){return se.parse(e,t,(function(e,t){return e===t}))}}]),r}(se),ce=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){return se.parse(e,t,(function(e,t){return e!==t}))}}]),r}(se),fe=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){return se.parse(e,t,(function(e,t){return e<t}))}}]),r}(se),he=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){return se.parse(e,t,(function(e,t){return e<=t}))}}]),r}(se),pe=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){return se.parse(e,t,(function(e,t){return e>t}))}}]),r}(se),de=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){return se.parse(e,t,(function(e,t){return e>=t}))}}]),r}(se),ye=function(){function e(t){Object(o.a)(this,e),this.arg=t,this.type=z}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return!this.arg.evaluate(e,t)}}],[{key:"parse",value:function(t,r){if(2!==t.length)throw new Error('"!" expects 1 argument');return new e(Ye(t[1],r))}}]),e}(),ve=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=z}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r,n=ee(this.args);try{for(n.s();!(r=n.n()).done;){if(!r.value.evaluate(e,t))return!1}}catch(a){n.e(a)}finally{n.f()}return!0}}],[{key:"parse",value:function(t,r){for(var n=[],a=1;a<t.length;a++)n.push(Ye(t[a],r));return new e(n)}}]),e}(),be=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=z}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r,n=ee(this.args);try{for(n.s();!(r=n.n()).done;){if(r.value.evaluate(e,t))return!0}}catch(a){n.e(a)}finally{n.f()}return!1}}],[{key:"parse",value:function(t,r){for(var n=[],a=1;a<t.length;a++)n.push(Ye(t[a],r));return new e(n)}}]),e}(),me=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=z}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r,n=ee(this.args);try{for(n.s();!(r=n.n()).done;){if(r.value.evaluate(e,t))return!1}}catch(a){n.e(a)}finally{n.f()}return!0}}],[{key:"parse",value:function(t,r){for(var n=[],a=1;a<t.length;a++)n.push(Ye(t[a],r));return new e(n)}}]),e}(),ge=function(){function e(t,r,n){Object(o.a)(this,e),this.type=t,this.args=r,this.fallback=n}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r,n=ee(this.args);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.condition.evaluate(e,t))return a.output.evaluate(e,t)}}catch(i){n.e(i)}finally{n.f()}return this.fallback.evaluate(e,t)}}],[{key:"parse",value:function(t,r,n){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');for(var a,i=[],o=1;o<t.length-1;o+=2){var u=Ye(t[o],r),s=Ye(t[o+1],r,n);a||(a=s.type),i.push({condition:u,output:s})}var l=Ye(t[t.length-1],r,n);return a||(a=l.type),new e(a,i,l)}}]),e}(),Oe=function(){function e(t,r){Object(o.a)(this,e),this.type=t,this.args=r}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r,n=ee(this.args);try{for(n.s();!(r=n.n()).done;){var a=r.value.evaluate(e,t);if(null!==a)return a}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"parse",value:function(t,r){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');for(var n,a=[],i=1;i<t.length;i++){var o=Ye(t[i],r);n||(n=o.type),a.push(o)}return new e(n,a)}}]),e}(),we=function(){function e(t,r,n,a,i){Object(o.a)(this,e),this.type=t,this.input=r,this.labels=n,this.outputs=a,this.fallback=i}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this.input.evaluate(e,t);return(this.outputs[this.labels[r]]||this.fallback).evaluate(e,t)}}],[{key:"parse",value:function(t,r){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');for(var n,a,i=Ye(t[1],r),o=[],u={},s=2;s<t.length-1;s+=2){var l=t[s];Array.isArray(l)||(l=[l]);var c,f=ee(l);try{for(f.s();!(c=f.n()).done;){var h=c.value,p=typeof h;if("string"!==p&&"number"!==p)throw new Error('"match" requires string or number literal as labels');if(a){if(p!==a)throw new Error('"match" requires labels to have the same type')}else a=p;u[h]=o.length}}catch(y){f.e(y)}finally{f.f()}var d=Ye(t[s+1],r);n||(n=d.type),o.push(d)}return new e(n,i,u,o,Ye(t[t.length-1],r))}}]),e}(),je=function(){function e(t,r,n,a,i){Object(o.a)(this,e),this.operator=t,this.type=r,this.interpolation=n,this.input=a,this.stops=i}return Object(u.a)(e,[{key:"evaluate",value:function(t,r){var n=this.stops;if(1===n.length)return n[0][1].evaluate(t,r);var a=this.input.evaluate(t,r);if(a<=n[0][0])return n[0][1].evaluate(t,r);if(a>=n[n.length-1][0])return n[n.length-1][1].evaluate(t,r);for(var i=0;++i<n.length&&!(a<n[i][0]););var o=n[i-1][0],u=n[i][0],s=e.interpolationRatio(this.interpolation,a,o,u),l=n[i-1][1].evaluate(t,r),c=n[i][1].evaluate(t,r);if("interpolate"===this.operator){if("array"===this.type.kind&&Array.isArray(l)&&Array.isArray(c))return l.map((function(e,t){return Object(N.e)(e,c[t],s)}));if("color"===this.type.kind&&l instanceof D.a&&c instanceof D.a){var f=new D.a(l),h=new D.a(c);return new D.a([Object(N.e)(f.r,h.r,s),Object(N.e)(f.g,h.g,s),Object(N.e)(f.b,h.b,s),Object(N.e)(f.a,h.a,s)])}if("number"===this.type.kind&&"number"==typeof l&&"number"==typeof c)return Object(N.e)(l,c,s);throw new Error('"'.concat(this.operator,'" cannot interpolate type ').concat(Z(this.type)))}if("interpolate-hcl"===this.operator){var p=Object(E.c)(l),d=Object(E.c)(c),y=d.h-p.h,v=Object(E.d)({h:p.h+s*(y>180||y<-180?y-360*Math.round(y/360):y),c:Object(N.e)(p.c,d.c,s),l:Object(N.e)(p.l,d.l,s)});return new D.a($({a:Object(N.e)(l.a,c.a,s)},v))}if("interpolate-lab"===this.operator){var b=Object(E.b)(l),m=Object(E.b)(c),g=Object(E.d)({l:Object(N.e)(b.l,m.l,s),a:Object(N.e)(b.a,m.a,s),b:Object(N.e)(b.b,m.b,s)});return new D.a($({a:Object(N.e)(l.a,c.a,s)},g))}throw new Error('Unexpected operator "'.concat(this.operator,'"'))}},{key:"interpolationUniformValue",value:function(t,r){var n=this.stops;if(1===n.length)return 0;if(t>=n[n.length-1][0])return 0;for(var a=0;++a<n.length&&!(t<n[a][0]););var i=n[a-1][0],o=n[a][0];return e.interpolationRatio(this.interpolation,r,i,o)}},{key:"getInterpolationRange",value:function(e){var t=this.stops;if(1===t.length){var r=t[0][0];return[r,r]}var n=t[t.length-1][0];if(e>=n)return[n,n];for(var a=0;++a<t.length&&!(e<t[a][0]););return[t[a-1][0],t[a][0]]}}],[{key:"parse",value:function(t,r,n){var a=t[0];if(t.length<5)throw new Error('"'.concat(a,'" expects at least 4 arguments'));var i=t[1];if(!Array.isArray(i)||0===i.length)throw new Error('"'.concat(i,'" is not a valid interpolation'));switch(i[0]){case"linear":if(1!==i.length)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(2!==i.length||"number"!=typeof i[1])throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(5!==i.length)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var o=1;o<5;o++){var u=i[o];if("number"!=typeof u||u<0||u>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error('"'.concat(t[0],'" unknown interpolation type "').concat(i[0],'"'))}if(t.length%2!=1)throw new Error('"'.concat(a,'" expects an even number of arguments'));var s,l=Ye(t[2],r,U);"interpolate-hcl"===a||"interpolate-lab"===a?s=V:n&&"value"!==n.kind&&(s=n);for(var c=[],f=3;f<t.length;f+=2){var h=t[f];if("number"!=typeof h)throw new Error('"'.concat(a,'" requires stop inputs as literal numbers'));if(c.length&&c[c.length-1][0]>=h)throw new Error('"'.concat(a,'" requires strictly ascending stop inputs'));var p=Ye(t[f+1],r,s);s||(s=p.type),c.push([h,p])}if(s&&s!==V&&s!==U&&("array"!==s.kind||s.itemType!==U))throw new Error('"'.concat(a,'" cannot interpolate type ').concat(Z(s)));return new e(a,s,i,l,c)}},{key:"interpolationRatio",value:function(t,r,n,a){var i=0;return"linear"===t[0]?i=e.exponentialInterpolationRatio(r,1,n,a):"exponential"===t[0]?i=e.exponentialInterpolationRatio(r,t[1],n,a):"cubic-bezier"===t[0]&&(i=Object(R.c)(t[1],t[2],t[3],t[4])(e.exponentialInterpolationRatio(r,1,n,a),1e-5)),i<0?i=0:i>1&&(i=1),i}},{key:"exponentialInterpolationRatio",value:function(e,t,r,n){var a=n-r;if(0===a)return 0;var i=e-r;return 1===t?i/a:(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}}]),e}(),xe=function(){function e(t,r,n){Object(o.a)(this,e),this.type=t,this.input=r,this.stops=n}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this.stops;if(1===r.length)return r[0][1].evaluate(e,t);for(var n=this.input.evaluate(e,t),a=0;++a<r.length&&!(n<r[a][0]););return this.stops[a-1][1].evaluate(e,t)}}],[{key:"parse",value:function(t,r){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');var n,a=Ye(t[1],r,U),i=[];i.push([-1/0,Ye(t[2],r)]);for(var o=3;o<t.length;o+=2){var u=t[o];if("number"!=typeof u)throw new Error('"step" requires stop inputs as literal numbers');if(i.length&&i[i.length-1][0]>=u)throw new Error('"step" requires strictly ascending stop inputs');var s=Ye(t[o+1],r);n||(n=s.type),i.push([u,s])}return new e(n,a,i)}}]),e}(),ke=function(){function e(t,r){Object(o.a)(this,e),this.type=t,this.output=r}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return this.output.evaluate(e,t)}}],[{key:"parse",value:function(t,r,n){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');for(var a=new ne(r),i=1;i<t.length-1;i+=2){var o=t[i];if("string"!=typeof o)throw new Error('"let" requires a string to define variable names - found '.concat(o));a.add(o,Ye(t[i+1],r))}var u=Ye(t[t.length-1],a,n);return new e(u.type,u)}}]),e}(),Ie=function(){function e(t,r){Object(o.a)(this,e),this.type=t,this.output=r}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return this.output.evaluate(e,t)}}],[{key:"parse",value:function(t,r,n){if(2!==t.length||"string"!=typeof t[1])throw new Error('"var" requires just one literal string argument');var a=r.get(t[1]);if(!a)throw new Error("".concat(t[1],' must be defined before being used in a "var" expression'));return new e(n||J,a)}}]),e}(),_e=function(){function e(t,r,n){Object(o.a)(this,e),this.type=t,this.index=r,this.array=n}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this.index.evaluate(e,t),n=this.array.evaluate(e,t);if(r<0||r>=n.length)throw new Error('"at" index out of bounds');if(r!==Math.floor(r))throw new Error('"at" index must be an integer');return n[r]}}],[{key:"parse",value:function(t,r){if(3!==t.length)throw new Error('"at" expects 2 arguments');var n=Ye(t[1],r,U),a=Ye(t[2],r);return new e(a.type.itemType,n,a)}}]),e}(),Se=function(){function e(t,r){Object(o.a)(this,e),this.key=t,this.obj=r,this.type=J}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this.key.evaluate(e,t);return this.obj?this.obj.evaluate(e,t)[r]:null==e?void 0:e.values[r]}}],[{key:"parse",value:function(t,r){switch(t.length){case 2:return new e(Ye(t[1],r));case 3:return new e(Ye(t[1],r),Ye(t[2],r));default:throw new Error('"get" expects 1 or 2 arguments')}}}]),e}(),Te=function(){function e(t,r){Object(o.a)(this,e),this.key=t,this.obj=r,this.type=z}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this.key.evaluate(e,t);return this.obj?r in this.obj.evaluate(e,t):!(null==e||!e.values[r])}}],[{key:"parse",value:function(t,r){switch(t.length){case 2:return new e(Ye(t[1],r));case 3:return new e(Ye(t[1],r),Ye(t[2],r));default:throw new Error('"has" expects 1 or 2 arguments')}}}]),e}(),Ae=function(){function e(t,r){Object(o.a)(this,e),this.key=t,this.vals=r,this.type=z}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this.key.evaluate(e,t);return-1!==this.vals.evaluate(e,t).indexOf(r)}}],[{key:"parse",value:function(t,r){if(3!==t.length)throw new Error('"in" expects 2 arguments');return new e(Ye(t[1],r),Ye(t[2],r))}}]),e}(),Me=function(){function e(t,r,n){Object(o.a)(this,e),this.item=t,this.array=r,this.from=n,this.type=U}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this.item.evaluate(e,t),n=this.array.evaluate(e,t);if(this.from){var a=this.from.evaluate(e,t);if(a!==Math.floor(a))throw new Error('"index-of" index must be an integer');return n.indexOf(r,a)}return n.indexOf(r)}}],[{key:"parse",value:function(t,r){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');var n=Ye(t[1],r),a=Ye(t[2],r);return 4===t.length?new e(n,a,Ye(t[3],r,U)):new e(n,a)}}]),e}(),Ce=function(){function e(t){Object(o.a)(this,e),this.arg=t,this.type=U}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this.arg.evaluate(e,t);if("string"==typeof r)return r.length;if(Array.isArray(r))return r.length;throw new Error('"length" expects string or array')}}],[{key:"parse",value:function(t,r){if(2!==t.length)throw new Error('"length" expects 2 arguments');return new e(Ye(t[1],r))}}]),e}(),Pe=function(){function e(t,r,n,a){Object(o.a)(this,e),this.type=t,this.array=r,this.from=n,this.to=a}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this.array.evaluate(e,t);if(!Array.isArray(r)&&"string"!=typeof r)throw new Error('"slice" input must be an array or a string');var n=this.from.evaluate(e,t);if(n<0||n>=r.length)throw new Error('"slice" index out of bounds');if(n!==Math.floor(n))throw new Error('"slice" index must be an integer');if(this.to){var a=this.to.evaluate(e,t);if(a<0||a>=r.length)throw new Error('"slice" index out of bounds');if(a!==Math.floor(a))throw new Error('"slice" index must be an integer');return r.slice(n,a)}return r.slice(n)}}],[{key:"parse",value:function(t,r){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');var n=Ye(t[1],r),a=Ye(t[2],r,U);if(a.type!==U)throw new Error('"slice" index must return a number');if(4===t.length){var i=Ye(t[3],r,U);if(i.type!==U)throw new Error('"slice" index must return a number');return new e(n.type,n,a,i)}return new e(n.type,n,a)}}]),e}(),De=function(){function e(){Object(o.a)(this,e),this.type=z}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return e&&void 0!==e.id}}],[{key:"parse",value:function(t){if(1!==t.length)throw new Error('"has-id" expects no arguments');return new e}}]),e}(),Ee=function(){function e(t,r){Object(o.a)(this,e),this.args=t,this.calculate=r,this.type=U}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r;return this.args&&(r=this.args.map((function(r){return r.evaluate(e,t)}))),this.calculate(r)}}],[{key:"parse",value:function(t,r,n){return new e(t.slice(1).map((function(e){return Ye(e,r)})),n)}}]),e}(),Re=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){switch(e.length){case 2:return Ee.parse(e,t,(function(e){return-e[0]}));case 3:return Ee.parse(e,t,(function(e){return e[0]-e[1]}));default:throw new Error('"-" expects 1 or 2 arguments')}}}]),r}(Ee),Ne=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){return Ee.parse(e,t,(function(e){var t,r=1,n=ee(e);try{for(n.s();!(t=n.n()).done;){r*=t.value}}catch(a){n.e(a)}finally{n.f()}return r}))}}]),r}(Ee),Be=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){if(3===e.length)return Ee.parse(e,t,(function(e){return e[0]/e[1]}));throw new Error('"/" expects 2 arguments')}}]),r}(Ee),Fe=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){if(3===e.length)return Ee.parse(e,t,(function(e){return e[0]%e[1]}));throw new Error('"%" expects 2 arguments')}}]),r}(Ee),Le=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){if(3===e.length)return Ee.parse(e,t,(function(e){return Math.pow(e[0],e[1])}));throw new Error('"^" expects 1 or 2 arguments')}}]),r}(Ee),Ue=function(e){Object(n.a)(r,e);var t=re(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,null,[{key:"parse",value:function(e,t){return Ee.parse(e,t,(function(e){var t,r=0,n=ee(e);try{for(n.s();!(t=n.n()).done;){r+=t.value}}catch(a){n.e(a)}finally{n.f()}return r}))}}]),r}(Ee),Ge=function(){function e(t,r){Object(o.a)(this,e),this.args=t,this.calculate=r,this.type=U}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r;return this.args&&(r=this.args.map((function(r){return r.evaluate(e,t)}))),this.calculate(r)}}],[{key:"parse",value:function(t,r){return new e(t.slice(1).map((function(e){return Ye(e,r)})),e.ops[t[0]])}}]),e}();Ge.ops={abs:function(e){return Math.abs(e[0])},acos:function(e){return Math.acos(e[0])},asin:function(e){return Math.asin(e[0])},atan:function(e){return Math.atan(e[0])},ceil:function(e){return Math.ceil(e[0])},cos:function(e){return Math.cos(e[0])},e:function(){return Math.E},floor:function(e){return Math.floor(e[0])},ln:function(e){return Math.log(e[0])},ln2:function(){return Math.LN2},log10:function(e){return Math.log(e[0])/Math.LN10},log2:function(e){return Math.log(e[0])/Math.LN2},max:function(e){return Math.max.apply(Math,Object(P.a)(e))},min:function(e){return Math.min.apply(Math,Object(P.a)(e))},pi:function(){return Math.PI},round:function(e){return Math.round(e[0])},sin:function(e){return Math.sin(e[0])},sqrt:function(e){return Math.sqrt(e[0])},tan:function(e){return Math.tan(e[0])}};var ze=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=G}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return this.args.map((function(r){return r.evaluate(e,t)})).join("")}}],[{key:"parse",value:function(t,r){return new e(t.slice(1).map((function(e){return Ye(e,r)})))}}]),e}(),Ve=function(){function e(t,r){Object(o.a)(this,e),this.arg=t,this.calculate=r,this.type=G}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return this.calculate(this.arg.evaluate(e,t))}}],[{key:"parse",value:function(t,r){if(2!==t.length)throw new Error("".concat(t[0]," expects 1 argument"));return new e(Ye(t[1],r),e.ops[t[0]])}}]),e}();Ve.ops={downcase:function(e){return e.toLowerCase()},upcase:function(e){return e.toUpperCase()}};var He=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=V}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this._validate(this.args[0].evaluate(e,t)),n=this._validate(this.args[1].evaluate(e,t)),a=this._validate(this.args[2].evaluate(e,t));return new D.a({r:r,g:n,b:a})}},{key:"_validate",value:function(e){if("number"!=typeof e||e<0||e>255)throw new Error("".concat(e,": invalid color component"));return Math.round(e)}}],[{key:"parse",value:function(t,r){if(4!==t.length)throw new Error('"rgb" expects 3 arguments');return new e(t.slice(1).map((function(e){return Ye(e,r)})))}}]),e}(),Je=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=V}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r=this._validate(this.args[0].evaluate(e,t)),n=this._validate(this.args[1].evaluate(e,t)),a=this._validate(this.args[2].evaluate(e,t)),i=this._validateAlpha(this.args[3].evaluate(e,t));return new D.a({r:r,g:n,b:a,a:i})}},{key:"_validate",value:function(e){if("number"!=typeof e||e<0||e>255)throw new Error("".concat(e,": invalid color component"));return Math.round(e)}},{key:"_validateAlpha",value:function(e){if("number"!=typeof e||e<0||e>1)throw new Error("".concat(e,": invalid alpha color component"));return e}}],[{key:"parse",value:function(t,r){if(5!==t.length)throw new Error('"rgba" expects 4 arguments');return new e(t.slice(1).map((function(e){return Ye(e,r)})))}}]),e}(),We=function(){function e(t){Object(o.a)(this,e),this.color=t,this.type=W(U,4)}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return new D.a(this.color.evaluate(e,t)).toRgba()}}],[{key:"parse",value:function(t,r){if(2!==t.length)throw new Error('"to-rgba" expects 1 argument');return new e(Ye(t[1],r))}}]),e}(),qe=function(){function e(t,r){Object(o.a)(this,e),this.type=t,this.args=r}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){var r,n,a=ee(this.args);try{for(a.s();!(n=a.n()).done;){var i=n.value.evaluate(e,t);if(K(r=Y(i),this.type))return i}}catch(o){a.e(o)}finally{a.f()}throw new Error("Expected ".concat(Z(this.type)," but got ").concat(Z(r)))}}],[{key:"parse",value:function(t,r){var n=t[0];if(t.length<2)throw new Error("".concat(n," expects at least one argument"));var a,i=1;if("array"===n){if(t.length>2){switch(t[1]){case"string":a=G;break;case"number":a=U;break;case"boolean":a=z;break;default:throw new Error('"array" type argument must be string, number or boolean')}i++}else a=J;var o;if(t.length>3){if(null!==(o=t[2])&&("number"!=typeof o||o<0||o!==Math.floor(o)))throw new Error('"array" length argument must be a positive integer literal');i++}a=W(a,o)}else switch(n){case"string":a=G;break;case"number":a=U;break;case"boolean":a=z;break;case"object":a=H}for(var u=[];i<t.length;i++){var s=Ye(t[i],r);u.push(s)}return new e(a,u)}}]),e}(),Ze=function(){function e(t,r){Object(o.a)(this,e),this.type=t,this.args=r}return Object(u.a)(e,[{key:"evaluate",value:function(t,r){if(this.type===z)return Boolean(this.args[0].evaluate(t,r));if(this.type===G)return X(this.args[0].evaluate(t,r));if(this.type===U){var n,a=ee(this.args);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=Number(i.evaluate(t,r));if(!isNaN(o))return o}}catch(f){a.e(f)}finally{a.f()}return null}if(this.type===V){var u,s=ee(this.args);try{for(s.s();!(u=s.n()).done;){var l=u.value;try{var c=e.toColor(l.evaluate(t,r));if(c instanceof D.a)return c}catch(h){}}}catch(f){s.e(f)}finally{s.f()}return null}}}],[{key:"parse",value:function(t,r){var n=t[0],a=e.types[n];if(a===z||a===G){if(2!==t.length)throw new Error("".concat(n," expects one argument"))}else if(t.length<2)throw new Error("".concat(n," expects at least one argument"));for(var i=[],o=1;o<t.length;o++){var u=Ye(t[o],r);i.push(u)}return new e(a,i)}},{key:"toBoolean",value:function(e){return Boolean(e)}},{key:"toString",value:function(e){return X(e)}},{key:"toNumber",value:function(e){var t=Number(e);if(isNaN(t))throw new Error('"'.concat(e,'" is not a number'));return t}},{key:"toColor",value:function(e){if(e instanceof D.a)return e;if("string"==typeof e){var t=D.a.fromString(e);if(t)return t;throw new Error('"'.concat(e,'" is not a color'))}if(Array.isArray(e))return D.a.fromArray(e);throw new Error('"'.concat(e,'" is not a color'))}}]),e}();function Ye(e,t,r){var n=typeof e;if("string"===n||"boolean"===n||"number"===n||null===e){if(r)switch(r.kind){case"string":"string"!==n&&(e=Ze.toString(e));break;case"number":"number"!==n&&(e=Ze.toNumber(e));break;case"color":e=Ze.toColor(e)}e=["literal",e]}if(!Array.isArray(e)||0===e.length)throw new Error("Expression must be a non empty array");var a=e[0];if("string"!=typeof a)throw new Error("First element of expression must be a string");var i=Ke[a];if(void 0===i)throw new Error('Invalid expression operator "'.concat(a,'"'));if(!i)throw new Error('Unimplemented expression operator "'.concat(a,'"'));return i.parse(e,t,r)}Ze.types={"to-boolean":z,"to-color":V,"to-number":U,"to-string":G};var Ke={array:qe,boolean:qe,collator:null,format:null,image:null,literal:function(){function e(t){Object(o.a)(this,e),this.val=t,this.type=Y(t)}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return this.val}}],[{key:"parse",value:function(t){if(2!==t.length)throw new Error('"literal" expects 1 argument');return new e(t[1])}}]),e}(),number:qe,"number-format":null,object:qe,string:qe,"to-boolean":Ze,"to-color":Ze,"to-number":Ze,"to-string":Ze,typeof:function(){function e(t){Object(o.a)(this,e),this.arg=t,this.type=G}return Object(u.a)(e,[{key:"evaluate",value:function(e,t){return Z(Y(this.arg.evaluate(e,t)))}}],[{key:"parse",value:function(t,r){if(2!==t.length)throw new Error('"typeof" expects 1 argument');return new e(Ye(t[1],r))}}]),e}(),accumulated:null,"feature-state":null,"geometry-type":ie,id:ae,"line-progress":null,properties:oe,at:_e,get:Se,has:Te,in:Ae,"index-of":Me,length:Ce,slice:Pe,"!":ye,"!=":ce,"<":fe,"<=":he,"==":le,">":pe,">=":de,all:ve,any:be,case:ge,coalesce:Oe,match:we,within:null,interpolate:je,"interpolate-hcl":je,"interpolate-lab":je,step:xe,let:ke,var:Ie,concat:ze,downcase:Ve,"is-supported-script":null,"resolved-locale":null,upcase:Ve,rgb:He,rgba:Je,"to-rgba":We,"-":Re,"*":Ne,"/":Be,"%":Fe,"^":Le,"+":Ue,abs:Ge,acos:Ge,asin:Ge,atan:Ge,ceil:Ge,cos:Ge,e:Ge,floor:Ge,ln:Ge,ln2:Ge,log10:Ge,log2:Ge,max:Ge,min:Ge,pi:Ge,round:Ge,sin:Ge,sqrt:Ge,tan:Ge,zoom:ue,"heatmap-density":null,"has-id":De,none:me},Xe=function(){function e(t){Object(o.a)(this,e),this._expression=t}return Object(u.a)(e,[{key:"filter",value:function(e,t){if(!this._expression)return!0;try{return this._expression.evaluate(e,t)}catch(r){return console.log(r.message),!0}}}],[{key:"createFilter",value:function(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{var r;return new e(Ye(t,null,z))}catch(r){return console.log(r.message),null}}},{key:"isLegacyFilter",value:function(e){if(!Array.isArray(e))return!0;if(0===e.length)return!0;switch(e[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return 3===e.length&&"string"==typeof e[1]&&!Array.isArray(e[2]);case"in":return e.length>=3&&"string"==typeof e[1]&&!Array.isArray(e[2]);case"!in":return!0;case"any":case"all":for(var t=1;t<e.length;t++)if(!this.isLegacyFilter(e[1]))return!1;return!0;case"none":return!0;case"has":return 2===e.length&&("$id"===e[1]||"$type"===e[1]);case"!has":return!0;default:return!1}}},{key:"convertLegacyFilter",value:function(t){if(!Array.isArray(t)||0===t.length)return!0;var r=t[0];if(1===t.length)return"any"!==r;switch(r){case"==":return e.convertComparison("==",t[1],t[2]);case"!=":return e.negate(e.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return e.convertComparison(r,t[1],t[2]);case"in":return e.convertIn(t[1],t.slice(2));case"!in":return e.negate(e.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return e.convertCombining(r,t.slice(1));case"has":return e.convertHas(t[1]);case"!has":return e.negate(e.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}},{key:"convertComparison",value:function(e,t,r){switch(t){case"$type":return[e,["geometry-type"],r];case"$id":return[e,["id"],r];default:return[e,["get",t],r]}}},{key:"convertIn",value:function(e,t){switch(e){case"$type":return["in",["geometry-type"],["literal",t]];case"$id":return["in",["id"],["literal",t]];default:return["in",["get",e],["literal",t]]}}},{key:"convertHas",value:function(e){switch(e){case"$type":return!0;case"$id":return["has-id"];default:return["has",e]}}},{key:"convertCombining",value:function(e,t){return[e].concat(t.map(this.convertLegacyFilter))}},{key:"negate",value:function(e){return["!",e]}}]),e}(),Qe=function e(){Object(o.a)(this,e)};function $e(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Qe.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},Qe.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},Qe.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0},"line-cap":{type:"enum",values:["butt","round","square"],default:0},"line-join":{type:"enum",values:["bevel","round","miter"],default:2},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},Qe.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:0},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:0},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:2},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:0},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:2},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:2},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:0},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[0]}},Qe.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},Qe.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},Qe.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:0}},Qe.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:0},"line-width":{type:"number",minimum:0,default:1}},Qe.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:0},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:0}},Qe.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},Qe.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:0}};var tt=function(){function e(t,r){var n;switch(Object(o.a)(this,e),this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":n=!0;break;case"array":n="number"===t.value;break;default:n=!1}if(null==r&&(r=t.default),Array.isArray(r)&&r.length>0&&Ke[r[0]]){var a={number:U,color:V,string:G,boolean:z,enum:G};try{var i=Ye(r,null,"array"===t.type?W(a[t.value]||J,t.length):a[t.type]);this.getValue=this._buildExpression(i,t),this.isDataDriven=!0,i instanceof je&&i.input instanceof ue&&(this.interpolator=i)}catch(f){console.log(f.message),this.getValue=this._buildSimple(t.default)}}else{n&&"interval"===r.type&&(n=!1);var u=r&&r.stops&&r.stops.length>0;if(u){var s,l=$e(r.stops);try{for(l.s();!(s=l.n()).done;){var c=s.value;c[1]=this._validate(c[1],t)}}catch(h){l.e(h)}finally{l.f()}}if(this.isDataDriven=!!r&&!!r.property,this.isDataDriven)if(void 0!==r.default&&(r.default=this._validate(r.default,t)),u)switch(r.type){case"identity":this.getValue=this._buildIdentity(r,t);break;case"categorical":this.getValue=this._buildCategorical(r,t);break;default:this.getValue=n?this._buildInterpolate(r,t):this._buildInterval(r,t)}else this.getValue=this._buildIdentity(r,t);else u?this.getValue=n?this._buildZoomInterpolate(r):this._buildZoomInterval(r):(r=this._validate(r,t),this.getValue=this._buildSimple(r))}}return Object(u.a)(e,[{key:"_validate",value:function(t,r){if("number"===r.type){if(t<r.minimum)return r.minimum;if(t>r.maximum)return r.maximum}else"color"===r.type?t=e._parseColor(t):"enum"===r.type?"string"==typeof t&&(t=r.values.indexOf(t)):"array"===r.type&&"enum"===r.value?t=t.map((function(e){return"string"==typeof t?r.values.indexOf(e):e})):"string"===r.type&&(t=X(t));return t}},{key:"_buildSimple",value:function(e){return function(){return e}}},{key:"_buildExpression",value:function(e,t){var r=this;return function(n,a){try{var i=e.evaluate(a,n);return void 0===i?t.default:r._validate(i,t)}catch(o){return console.log(o.message),t.default}}}},{key:"_buildIdentity",value:function(e,t){var r=this;return function(n,a){var i;return a&&(i=a.values[e.property]),void 0!==i?r._validate(i,t):void 0!==e.default?e.default:t.default}}},{key:"_buildCategorical",value:function(e,t){var r=this;return function(n,a){var i;return a&&(i=a.values[e.property]),void 0!==(i=r._categorical(i,e.stops))?i:void 0!==e.default?e.default:t.default}}},{key:"_buildInterval",value:function(e,t){var r=this;return function(n,a){var i;return a&&(i=a.values[e.property]),"number"==typeof i?r._interval(i,e.stops):void 0!==e.default?e.default:t.default}}},{key:"_buildInterpolate",value:function(e,t){var r=this;return function(n,a){var i;return a&&(i=a.values[e.property]),"number"==typeof i?r._interpolate(i,e.stops,e.base||1):void 0!==e.default?e.default:t.default}}},{key:"_buildZoomInterpolate",value:function(e){var t=this;return function(r){return t._interpolate(r,e.stops,e.base||1)}}},{key:"_buildZoomInterval",value:function(e){var t=this;return function(r){return t._interval(r,e.stops)}}},{key:"_categorical",value:function(e,t){for(var r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1]}},{key:"_interval",value:function(e,t){for(var r=t.length,n=0,a=0;a<r&&t[a][0]<=e;a++)n=a;return t[n][1]}},{key:"_interpolate",value:function(e,t,r){for(var n,a,i=t.length,o=0;o<i;o++){var u=t[o];if(!(u[0]<=e)){a=u;break}n=u}if(n&&a){var s=a[0]-n[0],l=e-n[0],c=1===r?l/s:(Math.pow(r,l)-1)/(Math.pow(r,s)-1);if(Array.isArray(n[1])){for(var f=n[1],h=a[1],p=[],d=0;d<f.length;d++)p.push(Object(N.e)(f[d],h[d],c));return p}return Object(N.e)(n[1],a[1],c)}return n?n[1]:a?a[1]:void 0}}],[{key:"_isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"_parseColor",value:function(e){return Array.isArray(e)?e:("string"==typeof e&&(e=new D.a(e)),e instanceof D.a?this._isEmpty(e)?void 0:D.a.toUnitRGBA(e):e)}}]),e}(),rt=r("PmOk");function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var o=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}function at(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return it(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return it(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ot=function(){function e(t,r,n,a){switch(Object(o.a)(this,e),this.type=t,this.typeName=r.type,this.id=r.id,this.source=r.source,this.sourceLayer=r["source-layer"],this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,this.filter=r.filter,this.layout=r.layout,this.paint=r.paint,this.z=n,this.uid=a,t){case 0:this._layoutDefinition=Qe.backgroundLayoutDefinition,this._paintDefinition=Qe.backgroundPaintDefinition;break;case 1:this._layoutDefinition=Qe.fillLayoutDefinition,this._paintDefinition=Qe.fillPaintDefinition;break;case 2:this._layoutDefinition=Qe.lineLayoutDefinition,this._paintDefinition=Qe.linePaintDefinition;break;case 3:this._layoutDefinition=Qe.symbolLayoutDefinition,this._paintDefinition=Qe.symbolPaintDefinition;break;case 4:this._layoutDefinition=Qe.circleLayoutDefinition,this._paintDefinition=Qe.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return Object(u.a)(e,[{key:"getFeatureFilter",value:function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=Xe.createFilter(this.filter)}},{key:"getLayoutProperty",value:function(e){return this._layoutProperties[e]}},{key:"getPaintProperty",value:function(e){return this._paintProperties[e]}},{key:"getLayoutValue",value:function(e,t,r){var n,a=this._layoutProperties[e];return a&&(n=a.getValue(t,r)),void 0===n&&(n=this._layoutDefinition[e].default),n}},{key:"getPaintValue",value:function(e,t,r){var n,a=this._paintProperties[e];return a&&(n=a.getValue(t,r)),void 0===n&&(n=this._paintDefinition[e].default),n}},{key:"isPainterDataDriven",value:function(){var e=this._paintProperties;if(e)for(var t in e)if(e[t].isDataDriven)return!0;return!1}},{key:"_parseLayout",value:function(e){var t={};for(var r in e){var n=this._layoutDefinition[r];n&&(t[r]=new tt(n,e[r]))}return t}},{key:"_parsePaint",value:function(e){var t={};for(var r in e){var n=this._paintDefinition[r];n&&(t[r]=new tt(n,e[r]))}return t}},{key:"computeAttributesKey",value:function(e,t,r,n){var a,i=0,o=0,u=at(t);try{for(u.s();!(a=u.n()).done;){var s=a.value,l=3;if(!s||s!==n){var c=r[s],f=c.isLayout,h=c.isOptional,p=f?this.getLayoutProperty(s):this.getPaintProperty(s);l=null!=p&&p.interpolator?2:null!=p&&p.isDataDriven?1:h&&!p?3:0}o|=l<<i,i+=2}}catch(d){u.e(d)}finally{u.f()}return o<<3|e}}]),e}(),ut=function(e){Object(n.a)(r,e);var t=nt(r);function r(e,n,a,i){var u;return Object(o.a)(this,r),(u=t.call(this,e,n,a,i)).backgroundMaterial=new g(u.computeAttributesKey(0,g.ATTRIBUTES,g.ATTRIBUTES_INFO)),u}return r}(ot),st=function(e){Object(n.a)(r,e);var t=nt(r);function r(e,n,a,i){var u;Object(o.a)(this,r);var s=(u=t.call(this,e,n,a,i)).getPaintProperty("fill-color"),l=u.getPaintProperty("fill-opacity"),c=u.getPaintProperty("fill-pattern");u.hasDataDrivenColor=null==s?void 0:s.isDataDriven,u.hasDataDrivenOpacity=null==l?void 0:l.isDataDriven,u.hasDataDrivenFill=u.hasDataDrivenColor||u.hasDataDrivenOpacity||(null==c?void 0:c.isDataDriven);var f=u.getPaintProperty("fill-outline-color");return u.outlineUsesFillColor=!f,u.hasDataDrivenOutlineColor=null==f?void 0:f.isDataDriven,u.hasDataDrivenOutline=f?f.isDataDriven:!!s&&s.isDataDriven,u.hasDataDrivenOutline=(f?u.hasDataDrivenOutlineColor:u.hasDataDrivenColor)||u.hasDataDrivenOpacity,u.fillMaterial=new x(u.computeAttributesKey(1,x.ATTRIBUTES,x.ATTRIBUTES_INFO)),u.outlineMaterial=new k(u.computeAttributesKey(2,u.outlineUsesFillColor?k.ATTRIBUTES_FILL:k.ATTRIBUTES_OUTLINE,u.outlineUsesFillColor?k.ATTRIBUTES_INFO_FILL:k.ATTRIBUTES_INFO_OUTLINE),u.outlineUsesFillColor),u}return r}(ot),lt=function(e){Object(n.a)(r,e);var t=nt(r);function r(e,n,a,i){var u,s,l,c,f,h,p,d,y,v;Object(o.a)(this,r);var b=(u=t.call(this,e,n,a,i)).getPaintProperty("line-pattern");if(u.lineMaterial=new _(u.computeAttributesKey(3,_.ATTRIBUTES,_.ATTRIBUTES_INFO,b?"line-dasharray":"")),u.hasDataDrivenLine=(null==(s=u.getPaintProperty("line-blur"))?void 0:s.isDataDriven)||(null==(l=u.getPaintProperty("line-color"))?void 0:l.isDataDriven)||(null==(c=u.getPaintProperty("line-gap-width"))?void 0:c.isDataDriven)||(null==(f=u.getPaintProperty("line-offset"))?void 0:f.isDataDriven)||(null==(h=u.getPaintProperty("line-opacity"))?void 0:h.isDataDriven)||(null==(p=u.getPaintProperty("line-pattern"))?void 0:p.isDataDriven)||(null==(d=u.getPaintProperty("line-dasharray"))?void 0:d.isDataDriven)||(null==(y=u.getLayoutProperty("line-cap"))?void 0:y.isDataDriven)||(null==(v=u.getPaintProperty("line-width"))?void 0:v.isDataDriven),u.canUseThinTessellation=!1,!u.hasDataDrivenLine){var m=u.getPaintProperty("line-width");if(!m||"number"==typeof m&&.5*m<rt.D){var g=u.getPaintProperty("line-offset");(!g||"number"==typeof g&&0===g)&&(u.canUseThinTessellation=!0)}}return u}return Object(u.a)(r,[{key:"getDashKey",value:function(e,t){var r;switch(t){case 0:r="Butt";break;case 1:r="Round";break;case 2:r="Square";break;default:r="Butt"}return"dasharray-[".concat(e.toString(),"]-").concat(r)}}]),r}(ot),ct=function(e){Object(n.a)(r,e);var t=nt(r);function r(e,n,a,i){var u,s,l,c,f,h,p,d,y,v,b,m,g;return Object(o.a)(this,r),(u=t.call(this,e,n,a,i)).iconMaterial=new M(u.computeAttributesKey(4,M.ATTRIBUTES,M.ATTRIBUTES_INFO)),u.textMaterial=new C(u.computeAttributesKey(6,C.ATTRIBUTES,C.ATTRIBUTES_INFO)),u.hasDataDrivenIcon=(null==(s=u.getPaintProperty("icon-color"))?void 0:s.isDataDriven)||(null==(l=u.getPaintProperty("icon-halo-blur"))?void 0:l.isDataDriven)||(null==(c=u.getPaintProperty("icon-halo-color"))?void 0:c.isDataDriven)||(null==(f=u.getPaintProperty("icon-halo-width"))?void 0:f.isDataDriven)||(null==(h=u.getPaintProperty("icon-opacity"))?void 0:h.isDataDriven)||(null==(p=u.getLayoutProperty("icon-size"))?void 0:p.isDataDriven),u.hasDataDrivenText=(null==(d=u.getPaintProperty("text-color"))?void 0:d.isDataDriven)||(null==(y=u.getPaintProperty("text-halo-blur"))?void 0:y.isDataDriven)||(null==(v=u.getPaintProperty("text-halo-color"))?void 0:v.isDataDriven)||(null==(b=u.getPaintProperty("text-halo-width"))?void 0:b.isDataDriven)||(null==(m=u.getPaintProperty("text-opacity"))?void 0:m.isDataDriven)||(null==(g=u.getLayoutProperty("text-size"))?void 0:g.isDataDriven),u}return r}(ot),ft=function(e){Object(n.a)(r,e);var t=nt(r);function r(e,n,a,i){var u;return Object(o.a)(this,r),(u=t.call(this,e,n,a,i)).circleMaterial=new w(u.computeAttributesKey(5,w.ATTRIBUTES,w.ATTRIBUTES_INFO)),u}return r}(ot),ht=function(){function e(t,r,n){var a,i,u,s,l,c;Object(o.a)(this,e),this.allowOverlap=t.getLayoutValue("icon-allow-overlap",r),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",r),this.keepUpright=t.getLayoutValue("icon-keep-upright",r),this.optional=t.getLayoutValue("icon-optional",r),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",r),2===this.rotationAlignment&&(this.rotationAlignment=n?0:1),null!=(a=c=t.getLayoutProperty("icon-anchor"))&&a.isDataDriven?this._anchorProp=c:this.anchor=t.getLayoutValue("icon-anchor",r),null!=(i=c=t.getLayoutProperty("icon-offset"))&&i.isDataDriven?this._offsetProp=c:this.offset=t.getLayoutValue("icon-offset",r),null!=(u=c=t.getLayoutProperty("icon-padding"))&&u.isDataDriven?this._paddingProp=c:this.padding=t.getLayoutValue("icon-padding",r),null!=(s=c=t.getLayoutProperty("icon-rotate"))&&s.isDataDriven?this._rotateProp=c:this.rotate=t.getLayoutValue("icon-rotate",r),null!=(l=c=t.getLayoutProperty("icon-size"))&&l.isDataDriven?this._sizeProp=c:this.size=t.getLayoutValue("icon-size",r)}return Object(u.a)(e,[{key:"update",value:function(e,t){this._anchorProp&&(this.anchor=this._anchorProp.getValue(e,t)),this._offsetProp&&(this.offset=this._offsetProp.getValue(e,t)),this._paddingProp&&(this.padding=this._paddingProp.getValue(e,t)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(e,t)),this._sizeProp&&(this.size=this._sizeProp.getValue(e,t))}}]),e}(),pt=function(){function e(t,r,n){var a,i,u,s,l,c,f,h,p,d,y,v;Object(o.a)(this,e),this.allowOverlap=t.getLayoutValue("text-allow-overlap",r),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",r),this.keepUpright=t.getLayoutValue("text-keep-upright",r),this.optional=t.getLayoutValue("text-optional",r),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",r),2===this.rotationAlignment&&(this.rotationAlignment=n?0:1),null!=(a=v=t.getLayoutProperty("text-anchor"))&&a.isDataDriven?this._anchorProp=v:this.anchor=t.getLayoutValue("text-anchor",r),null!=(i=v=t.getLayoutProperty("text-justify"))&&i.isDataDriven?this._justifyProp=v:this.justify=t.getLayoutValue("text-justify",r),null!=(u=v=t.getLayoutProperty("text-letter-spacing"))&&u.isDataDriven?this._letterSpacingProp=v:this.letterSpacing=t.getLayoutValue("text-letter-spacing",r),null!=(s=v=t.getLayoutProperty("text-line-height"))&&s.isDataDriven?this._lineHeightProp=v:this.lineHeight=t.getLayoutValue("text-line-height",r),null!=(l=v=t.getLayoutProperty("text-max-angle"))&&l.isDataDriven?this._maxAngleProp=v:this.maxAngle=t.getLayoutValue("text-max-angle",r),null!=(c=v=t.getLayoutProperty("text-max-width"))&&c.isDataDriven?this._maxWidthProp=v:this.maxWidth=t.getLayoutValue("text-max-width",r),null!=(f=v=t.getLayoutProperty("text-offset"))&&f.isDataDriven?this._offsetProp=v:this.offset=t.getLayoutValue("text-offset",r),null!=(h=v=t.getLayoutProperty("text-padding"))&&h.isDataDriven?this._paddingProp=v:this.padding=t.getLayoutValue("text-padding",r),null!=(p=v=t.getLayoutProperty("text-rotate"))&&p.isDataDriven?this._rotateProp=v:this.rotate=t.getLayoutValue("text-rotate",r),null!=(d=v=t.getLayoutProperty("text-size"))&&d.isDataDriven?this._sizeProp=v:this.size=t.getLayoutValue("text-size",r),null!=(y=v=t.getLayoutProperty("text-writing-mode"))&&y.isDataDriven?this._writingModeProp=v:this.writingMode=t.getLayoutValue("text-writing-mode",r)}return Object(u.a)(e,[{key:"update",value:function(e,t){this._anchorProp&&(this.anchor=this._anchorProp.getValue(e,t)),this._justifyProp&&(this.justify=this._justifyProp.getValue(e,t)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(e,t)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(e,t)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(e,t)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(e,t)),this._offsetProp&&(this.offset=this._offsetProp.getValue(e,t)),this._paddingProp&&(this.padding=this._paddingProp.getValue(e,t)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(e,t)),this._sizeProp&&(this.size=this._sizeProp.getValue(e,t)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(e,t))}}]),e}()},WBSb:function(e,t,r){"use strict";r.d(t,"a",(function(){return _})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return i})),r.d(t,"i",(function(){return p})),r.d(t,"j",(function(){return b})),r.d(t,"k",(function(){return y})),r.d(t,"l",(function(){return d})),r.d(t,"m",(function(){return m})),r.d(t,"n",(function(){return I})),r.d(t,"o",(function(){return h}));var n=r("sE9J"),a=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0};function i(e,t){if(null==t||!t.length||!a(e))return e;var r=e.pixels.length;return t&&t.some((function(e){return e>=r}))||1===r&&1===t.length&&0===t[0]?e:r!==t.length||t.some((function(e,t){return e!==t}))?new n.a({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:t.map((function(t){return e.pixels[t]})),statistics:e.statistics&&t.map((function(t){return e.statistics[t]}))}):e}function o(e){if(e){var t=e.colormap;if(t&&0!==t.length){var r=t.sort((function(e,t){return e[0]-t[0]})),n=0;r[0][0]<0&&(n=r[0][0]);var a,i=Math.max(256,r[r.length-1][0]-n+1),o=new Uint8Array(4*i),u=[],s=0,l=0,c=5===r[0].length;if(i>65536)return r.forEach((function(e){u[e[0]-n]=c?e.slice(1):e.slice(1).concat([255])})),{indexed2DColormap:u,offset:n,alphaSpecified:c};if(e.fillUnspecified)for(s=(a=r[l])[0]-n;s<i;s++)o[4*s]=a[1],o[4*s+1]=a[2],o[4*s+2]=a[3],o[4*s+3]=c?a[4]:255,s===a[0]-n&&(a=l===r.length-1?a:r[++l]);else for(s=0;s<r.length;s++)o[l=4*((a=r[s])[0]-n)]=a[1],o[l+1]=a[2],o[l+2]=a[3],o[l+3]=c?a[4]:255;return{indexedColormap:o,offset:n,alphaSpecified:c}}}}function u(e,t){if(!a(e))return e;if(!t&&(t.indexedColormap||t.indexed2DColormap))return e;var r=e.clone(),n=r.pixels,i=r.mask,o=r.width*r.height;if(1!==n.length)return e;var u,s=t.indexedColormap,l=t.indexed2DColormap,c=t.offset,f=t.alphaSpecified,h=s.length-1,p=0,d=n[0],y=new Uint8Array(d.length),v=new Uint8Array(d.length),b=new Uint8Array(d.length),m=0;if(s)if(i)for(p=0;p<o;p++)i[p]&&((m=4*(d[p]-c))<c||m>h?i[p]=0:(y[p]=s[m],v[p]=s[m+1],b[p]=s[m+2],i[p]=s[m+3]));else{for(i=new Uint8Array(o),p=0;p<o;p++)(m=4*(d[p]-c))<c||m>h?i[p]=0:(y[p]=s[m],v[p]=s[m+1],b[p]=s[m+2],i[p]=s[m+3]);r.mask=i}else if(i)for(p=0;p<o;p++)i[p]&&(u=l[d[p]],y[p]=u[0],v[p]=u[1],b[p]=u[2],i[p]=u[3]);else{for(i=new Uint8Array(o),p=0;p<o;p++)u=l[d[p]],y[p]=u[0],v[p]=u[1],b[p]=u[2],i[p]=u[3];r.mask=i}return r.pixels=[y,v,b],r.statistics=null,r.pixelType="u8",r.maskIsAlpha=f,r}function s(e){if(!a(e))return null;e.statistics||e.updateStatistics();var t,r,n,i,o,u,s,l,c,f,h,p,d,y,v=e.pixels,b=e.mask,m=e.pixelType,g=e.statistics,O=e.width*e.height,w=v.length,j=[],x=[],k=256;for(i=0;i<w;i++){if(u=new Uint32Array(k),l=v[i],"u8"===m)if(t=-.5,r=255.5,b)for(o=0;o<O;o++)b[o]&&u[l[o]]++;else for(o=0;o<O;o++)u[l[o]]++;else{if(t=g[i].minValue,n=((r=g[i].maxValue)-t)/k,s=new Uint32Array(257),b)for(o=0;o<O;o++)b[o]&&s[Math.floor((l[o]-t)/n)]++;else for(o=0;o<O;o++)s[Math.floor((l[o]-t)/n)]++;for(o=0;o<255;o++)u[o]=s[o];u[255]=s[255]+s[256]}for(j.push({min:t,max:r,size:k,counts:u}),c=0,f=0,d=0,o=0;o<k;o++)c+=u[o],f+=o*u[o];for(y=f/c,o=0;o<k;o++)d+=u[o]*Math.pow(o-y,2);h=(y+.5)*(n=(r-t)/k)+t,p=Math.sqrt(d/(c-1))*n,x.push({min:t,max:r,avg:h,stddev:p})}return{statistics:x,histograms:j}}function l(e){for(var t=[],r=0;r<e.length;r++){for(var n=e[r],a=n.min,i=n.max,o=n.size,u=n.counts,s=0,l=0,c=0;c<o;c++)s+=u[c],l+=c*u[c];for(var f=l/s,h=0,p=0;p<o;p++)h+=u[p]*Math.pow(p-f,2);var d=(i-a)/o,y=(f+.5)*d+a,v=Math.sqrt(h/(s-1))*d;t.push({min:a,max:i,avg:y,stddev:v})}return t}function c(e){var t=e.minCutOff,r=e.maxCutOff,n=e.gamma,a=e.pixelType,i=e.outMin||0,o=e.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(a))return null;var u,s,l=t.length,c=0;"s8"===a?c=-127:"s16"===a&&(c=-32767);var f=256;["u16","s16"].indexOf(a)>-1&&(f=65536);var h=[],p=[],d=o-i;for(u=0;u<l;u++)p[u]=r[u]-t[u],h[u]=d/(r[u]-t[u]);var y,v=n&&n.length>=l,b=[];if(v)for(u=0;u<l;u++)n[u]>1?n[u]>2?b[u]=6.5+Math.pow(n[u]-2,2.5):b[u]=6.5+100*Math.pow(2-n[u],4):b[u]=1;var m,g,O,w=[];if(v)for(u=0;u<l;u++){for(O=[],s=0;s<f;s++)y=((m=s+c)-t[u])/p[u],g=1,n[u]>1&&(g-=Math.pow(1/d,y*b[u])),m<r[u]&&m>t[u]?O[s]=Math.floor(g*d*Math.pow(y,1/n[u]))+i:m>=r[u]?O[s]=o:O[s]=i;w[u]=O}else for(u=0;u<l;u++){for(O=[],s=0;s<f;s++)(m=s+c)<=t[u]?O[s]=i:m>=r[u]?O[s]=o:O[s]=Math.floor((m-t[u])/p[u]*d)+i;w[u]=O}if(null!=e.contrastOffset){var j=function(e,t){var r,n,a=Math.min(Math.max(e,-100),100),i=Math.min(Math.max(t,-100),100),o=255,u=new Uint8Array(256);for(r=0;r<256;r++)a>0&&a<100?n=(200*r-25500+510*i)/(2*(100-a))+128:a<=0&&a>-100?n=(200*r-25500+510*i)*(100+a)/2e4+128:100===a?n=(n=200*r-25500+256*(100-a)+510*i)>0?o:0:-100===a&&(n=128),u[r]=n>o?o:n<0?0:n;return u}(e.contrastOffset,e.brightnessOffset);for(u=0;u<l;u++)for(O=w[u],s=0;s<f;s++)O[s]=j[O[s]]}return{lut:w,offset:c}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;t=Math.min(t,256);for(var r=e.size,n=e.counts,a=new Uint8Array(r),i=n.reduce((function(e,r){return e+r/t}),0),o=0,u=0,s=0,l=i,c=0;c<r;c++)if(s+=n[c],!(c<r-1&&s+n[c+1]<l)){for(;o<t-1&&l<s;)o++,l+=i;for(var f=u;f<=c;f++)a[f]=o;u=c+1}for(var h=u;h<r;h++)a[h]=t-1;return a}function h(e,t){if(!a(e))return null;var r,n,i,o,u,s=e.clone(),l=s.pixels,c=s.mask,f=t.minCutOff,h=t.maxCutOff,p=t.gamma,d=t.outMin||0,y=t.outMax||255,v=s.width*s.height,b=l.length,m=y-d,g=[],O=[];for(r=0;r<b;r++)O[r]=h[r]-f[r],g[r]=m/(h[r]-f[r]);var w=p&&p.length>=b,j=[];if(w)for(r=0;r<b;r++)p[r]>1?p[r]>2?j[r]=6.5+Math.pow(p[r]-2,2.5):j[r]=6.5+100*Math.pow(2-p[r],4):j[r]=1;if(w)if(null!=c){for(n=0;n<v;n++)if(c[n])for(r=0;r<b;r++)u=((i=l[r][n])-f[r])/O[r],o=1,p[r]>1&&(o-=Math.pow(1/m,u*j[r])),i<h[r]&&i>f[r]?l[r][n]=Math.floor(o*m*Math.pow(u,1/p[r]))+d:i>=h[r]?l[r][n]=y:l[r][n]=d}else for(n=0;n<v;n++)for(r=0;r<b;r++)u=((i=l[r][n])-f[r])/O[r],o=1,p[r]>1&&(o-=Math.pow(1/m,u*j[r])),i<h[r]&&i>f[r]?l[r][n]=Math.floor(o*m*Math.pow(u,1/p[r]))+d:i>=h[r]?l[r][n]=y:l[r][n]=d;else if(null!=c){for(n=0;n<v;n++)if(c[n])for(r=0;r<b;r++)(i=l[r][n])<h[r]&&i>f[r]?l[r][n]=Math.floor((i-f[r])/O[r]*m)+d:i>=h[r]?l[r][n]=y:l[r][n]=d}else for(n=0;n<v;n++)for(r=0;r<b;r++)(i=l[r][n])<h[r]&&i>f[r]?l[r][n]=Math.floor((i-f[r])/O[r]*m)+d:i>=h[r]?l[r][n]=y:l[r][n]=d;return s.pixelType="u8",s.updateStatistics(),s}function p(e,t){if(!a(e))return null;var r,i,o=e.pixels,u=e.mask,s=e.width*e.height,l=o.length,c=t.lut,f=t.offset;c&&1===c[0].length&&(c=o.map((function(){return c})));var h,p,d,y=[];if(f)if(null==u)for(r=0;r<l;r++){for(h=o[r],p=c[r],d=new Uint8Array(s),i=0;i<s;i++)d[i]=p[h[i]-f];y.push(d)}else for(r=0;r<l;r++){for(h=o[r],p=c[r],d=new Uint8Array(s),i=0;i<s;i++)u[i]&&(d[i]=p[h[i]-f]);y.push(d)}else if(null==u)for(r=0;r<l;r++){for(h=o[r],p=c[r],d=new Uint8Array(s),i=0;i<s;i++)d[i]=p[h[i]];y.push(d)}else for(r=0;r<l;r++){for(h=o[r],p=c[r],d=new Uint8Array(s),i=0;i<s;i++)u[i]&&(d[i]=p[h[i]]);y.push(d)}var v=new n.a({width:e.width,height:e.height,pixels:y,mask:u,pixelType:"u8"});return v.updateStatistics(),v}function d(e,t){if(!a(e))return null;var r,n,i,o,u,s,l=e.clone(),c=l.pixels,f=l.width*l.height,h=t.length,p=Math.floor(h/2),d=t[Math.floor(p)],y=c[0],v=!1,b=new Uint8Array(f),m=new Uint8Array(f),g=new Uint8Array(f),O=l.mask,w=4===t[0].mappedColor.length;for(O||((O=new Uint8Array(f)).fill(w?255:1),l.mask=O),u=0;u<f;u++)if(O[u]){for(r=y[u],v=!1,s=p,n=d,i=0,o=h-1;o-i>1;){if(r===n.value){v=!0;break}r>n.value?i=s:o=s,s=Math.floor((i+o)/2),n=t[Math.floor(s)]}v||(r===t[i].value?(n=t[i],v=!0):r===t[o].value?(n=t[o],v=!0):r<t[i].value?(v=!1,n=null):r>t[i].value&&(r<t[o].value?(n=t[i],v=!0):o===h-1?(v=!1,n=null):(n=t[o],v=!0))),v?(b[u]=n.mappedColor[0],m[u]=n.mappedColor[1],g[u]=n.mappedColor[2],O[u]=n.mappedColor[3]):b[u]=m[u]=g[u]=O[u]=0}return l.pixels=[b,m,g],l.mask=O,l.pixelType="u8",l.maskIsAlpha=w,l}function y(e,t){if(!e||0===e.length)return null;var r=e.filter((function(e){return e.pixelBlock}))[0];if(!r)return null;var n=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width,a=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,i=.01*Math.min(n,a),o=e.sort((function(e,t){return Math.abs(e.extent.ymax-t.extent.ymax)>i?t.extent.ymax-e.extent.ymax:Math.abs(e.extent.xmin-t.extent.xmin)>i?e.extent.xmin-t.extent.xmin:0})),u=Math.min.apply(null,o.map((function(e){return e.extent.xmin}))),s=Math.min.apply(null,o.map((function(e){return e.extent.ymin}))),l=Math.max.apply(null,o.map((function(e){return e.extent.xmax}))),c=Math.max.apply(null,o.map((function(e){return e.extent.ymax}))),f={x:Math.round((t.xmin-u)/n),y:Math.round((c-t.ymax)/a)},h={width:Math.round((l-u)/n),height:Math.round((c-s)/a)},p={width:Math.round((t.xmax-t.xmin)/n),height:Math.round((t.ymax-t.ymin)/a)};return Math.round(h.width/r.pixelBlock.width)*Math.round(h.height/r.pixelBlock.height)!==o.length||f.x<0||f.y<0||h.width<p.width||h.height<p.height?null:{extent:t,pixelBlock:b(o.map((function(e){return e.pixelBlock})),h,f,p)}}function v(e,t,r,n,a,i){var o=r.block,u=o.width,s=o.height,l=r.offset,c=l.x,f=l.y,h=r.mosaic,p=h.width,d=function(e,t,r,n,a,i,o,u){return{xmin:a<=r*e?0:a<r*e+e?a-r*e:e,ymin:i<=n*t?0:i<n*t+t?i-n*t:t,xmax:a+o<=r*e?0:a+o<r*e+e?a+o-r*e:e,ymax:i+u<=n*t?0:i+u<n*t+t?i+u-n*t:t}}(u,s,n,a,c,f,p,h.height),y=0,v=0;if(i){var b=i.hasGCSSShiftTransform?360:i.halfWorldWidth,m=u*i.resolutionX,g=i.startX+n*m;g<b&&g+m>b?v=i.rightPadding:g>=b&&(y=i.leftMargin-i.rightPadding,v=0)}if(d.xmax-=v,"number"!=typeof t)for(var O=d.ymin;O<d.ymax;O++)for(var w=(a*s+O-f)*p+(n*u-c)+y,j=O*u,x=d.xmin;x<d.xmax;x++)e[w+x]=t[j+x];else for(var k=d.ymin;k<d.ymax;k++)for(var I=(a*s+k-f)*p+(n*u-c)+y,_=d.xmin;_<d.xmax;_++)e[I+_]=t}function b(e,t,r,i,o){var u=e.filter((function(e){return a(e)}))[0];if(null==u)return null;for(var s,l,c=i?i.width:t.width,f=i?i.height:t.height,h=u.width,p=u.height,d=t.width/h,y=t.height/p,b={offset:r||{x:0,y:0},mosaic:i||t,block:{width:h,height:p}},m=u.pixelType,g=n.a.getPixelArrayConstructor(m),O=u.pixels.length,w=[],j=0;j<O;j++){s=new g(c*f);for(var x=0;x<y;x++)for(var k=0;k<d;k++){var I=e[x*d+k];a(I)&&v(s,I.pixels[j],b,k,x,o)}w.push(s)}if(e.some((function(e){return null==e||e.mask&&e.mask.length>0}))){l=new Uint8Array(c*f);for(var _=0;_<y;_++)for(var S=0;S<d;S++){var T=e[_*d+S];v(l,(T?T.mask:null)||(T?1:0),b,S,_,o)}}var A=new n.a({width:c,height:f,pixels:w,pixelType:m,mask:l});return A.updateStatistics(),A}function m(e,t,r){if(!a(e))return null;var n=e.width,i=e.height,o=t.x,u=t.y,s=r.width+o,l=r.height+u;if(o<0||u<0||s>n||l>i)return e;if(0===o&&0===u&&s===n&&l===i)return e;e.mask||(e.mask=new Uint8Array(n*i));for(var c=e.mask,f=0;f<i;f++)for(var h=f*n,p=0;p<n;p++)c[h+p]=f<u||f>=l||p<o||p>=s?0:1;return e.updateStatistics(),e}function g(e){if(!a(e))return null;for(var t=e.clone(),r=e.width,n=e.height,i=e.pixels,o=e.mask,u=i[0],s=t.pixels[0],l=2;l<n-1;l++){for(var c=new Map,f=l-2;f<l+2;f++)for(var h=0;h<4;h++){var p=f*r+h;j(c,u[p],o?o[p]:1)}s[l*r]=O(c),s[l*r+1]=s[l*r+2]=s[l*r];for(var d=3;d<r-1;d++){var y=(l-2)*r+d+1;j(c,u[y],o?o[y]:1),j(c,u[y=(l-1)*r+d+1],o?o[y]:1),j(c,u[y=l*r+d+1],o?o[y]:1),j(c,u[y=(l+1)*r+d+1],o?o[y]:1),w(c,u[y=(l-2)*r+d-3],o?o[y]:1),w(c,u[y=(l-1)*r+d-3],o?o[y]:1),w(c,u[y=l*r+d-3],o?o[y]:1),w(c,u[y=(l+1)*r+d-3],o?o[y]:1),s[l*r+d]=O(c)}s[l*r+d+1]=s[l*r+d]}for(var v=0;v<r;v++)s[v]=s[r+v]=s[2*r+v],s[(n-1)*r+v]=s[(n-2)*r+v];return t.updateStatistics(),t}function O(e){if(0===e.size)return 0;for(var t=0,r=-1,n=0,a=e.keys(),i=a.next();!i.done;)(n=e.get(i.value))>t&&(r=i.value,t=n),i=a.next();return r}function w(e,t,r){if(0!==r){var n=e.get(t);1===n?e.delete(t):e.set(t,n-1)}}function j(e,t,r){0!==r&&e.set(t,e.has(t)?e.get(t)+1:1)}function x(e,t,r){var i=t.x,o=t.y,u=r.width,s=r.height;if(0===i&&0===o&&s===e.height&&u===e.width)return e;var l=e.width,c=e.height,f=Math.max(0,o),h=Math.max(0,i),p=Math.min(i+u,l),d=Math.min(o+s,c);if(p<0||d<0||!a(e))return null;i=Math.max(0,-i),o=Math.max(0,-o);for(var y=e.pixels,v=e.mask,b=u*s,m=y.length,g=[],O=0;O<m;O++){for(var w=y[O],j=n.a.createEmptyBand(e.pixelType,b),x=f;x<d;x++)for(var k=x*l,I=(x+o-f)*u+i,_=h;_<p;_++)j[I++]=w[k+_];g.push(j)}for(var S=new Uint8Array(b),T=f;T<d;T++)for(var A=T*l,M=(T+o-f)*u+i,C=h;C<p;C++)S[M++]=v?v[A+C]:1;var P=new n.a({width:r.width,height:r.height,pixelType:e.pixelType,pixels:g,mask:S});return P.updateStatistics(),P}function k(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!a(e))return null;for(var r=e.pixels,i=e.width,o=e.height,u=e.mask,s=e.pixelType,l=[],c=Math.round(i/2),f=Math.round(o/2),h=o-1,p=i-1,d=0;d<r.length;d++){for(var y=r[d],v=n.a.createEmptyBand(s,c*f),b=0,m=0;m<o;m+=2)for(var g=0;g<i;g+=2){var O=y[m*i+g];if(t){var w=g===p?O:y[m*i+g+1],j=m===h?O:y[m*i+g+i],x=g===p?j:m===h?w:y[m*i+g+i+1];v[b++]=(O+w+j+x)/4}else v[b++]=O}l.push(v)}var k=null;if(u){k=new Uint8Array(c*f);for(var I=0,_=0;_<o;_+=2)for(var S=0;S<i;S+=2){var T=u[_*i+S];if(t){var A=S===p?T:u[_*i+S+1],M=_===h?T:u[_*i+S+i],C=S===p?M:_===h?A:u[_*i+S+i+1];k[I++]=T*A*M*C?1:0}else k[I++]=T}}return new n.a({width:c,height:f,pixelType:s,pixels:l,mask:k})}function I(e,t,r){if(!a(e))return null;for(var n=t.width,i=t.height,o=e.width,u=e.height,s=new Map,l={x:0,y:0},c=null==r?1:1+r,f=e,h=0;h<c;h++){for(var p=Math.ceil(o/n),d=Math.ceil(u/i),y=0;y<d;y++){l.y=y*i;for(var v=0;v<p;v++){l.x=v*n;var b=x(f,l,t);s.set("".concat(h,"/").concat(y,"/").concat(v),b)}}h<c-1&&(f=k(f)),o=Math.round(o/2),u=Math.round(u/2)}return s}function _(e,t,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"nearest";if(!a(e))return null;"majority"===o&&(e=g(e));for(var u,s,l,c,f,h,p,d=e,y=d.pixels,v=d.mask,b=d.pixelType,m=e.width,O=e.height,w=n.a.getPixelArrayConstructor(b),j=y.length,x=t.width,k=t.height,I=i.cols,_=i.rows,S=Math.ceil(x/I),T=Math.ceil(k/_),A=!1,M=0;M<r.length;M+=3)-1===r[M]&&-1===r[M+1]&&-1===r[M+2]&&(A=!0);for(var C,P,D=new Float32Array(x*k),E=new Float32Array(x*k),R=0,N="majority"===o?0:.5,B=0;B<T;B++)for(var F=0;F<S;F++){s=r[u=12*(B*S+F)],l=r[u+1],c=r[u+2],f=r[u+3],h=r[u+4],p=r[u+5];for(var L=0;L<_;L++){R=(B*_+L)*x+F*I,P=(L+.5)/_;for(var U=0;U<L;U++)C=(U+.5)/I,D[R+U]=Math.round((s*C+l*P+c)*m-N),E[R+U]=Math.round((f*C+h*P+p)*O-N)}s=r[u+=6],l=r[u+1],c=r[u+2],f=r[u+3],h=r[u+4],p=r[u+5];for(var G=0;G<_;G++){R=(B*_+G)*x+F*I,P=(G+.5)/_;for(var z=G;z<I;z++)C=(z+.5)/I,D[R+z]=Math.round((s*C+l*P+c)*m-N),E[R+z]=Math.round((f*C+h*P+p)*O-N)}}for(var V,H=function(e,t){for(var r=0;r<k;r++){u=r*x;for(var n=0;n<x;n++)D[u]<0||E[u]<0?e[u]=0:e[u]=t[D[u]+E[u]*m],u++}},J=[],W=0;W<j;W++)H(V=new w(x*k),y[W]),J.push(V);var q=new n.a({width:x,height:k,pixelType:b,pixels:J});if(v)q.mask=new Uint8Array(x*k),H(q.mask,v);else if(A){q.mask=new Uint8Array(x*k);for(var Z=0;Z<x*k;Z++)q.mask[Z]=D[Z]<0||E[Z]<0?0:1}return q.updateStatistics(),q}},WSH1:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n,a,i,o={exports:{}};n=o,a=function(){var e=function(){function e(e){this.message="JPEG error: "+e}return e.prototype=new Error,e.prototype.name="JpegError",e.constructor=e,e}();return function(){if(!self||!self.Uint8ClampedArray)return null;var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,n=799,a=3406,i=2276,o=1567,u=3784,s=5793,l=2896;function c(){this.decodeTransform=null,this.colorTransform=-1}function f(e,t){for(var r,n,a=0,i=[],o=16;o>0&&!e[o-1];)o--;i.push({children:[],index:0});var u,s=i[0];for(r=0;r<o;r++){for(n=0;n<e[r];n++){for((s=i.pop()).children[s.index]=t[a];s.index>0;)s=i.pop();for(s.index++,i.push(s);i.length<=r;)i.push(u={children:[],index:0}),s.children[s.index]=u.children,s=u;a++}r+1<o&&(i.push(u={children:[],index:0}),s.children[s.index]=u.children,s=u)}return i[0].children}function h(e,t,r){return 64*((e.blocksPerLine+1)*t+r)}function p(r,n,a,i,o,u,s,l,c){var f=a.mcusPerLine,p=a.progressive,d=n,y=0,b=0;function m(){if(b>0)return b--,y>>b&1;if(255===(y=r[n++])){var t=r[n++];if(t)throw new e("unexpected marker "+(y<<8|t).toString(16))}return b=7,y>>>7}function g(t){for(var r=t;;){if("number"==typeof(r=r[m()]))return r;if("object"!=typeof r)throw new e("invalid huffman sequence")}}function O(e){for(var t=0;e>0;)t=t<<1|m(),e--;return t}function w(e){if(1===e)return 1===m()?1:-1;var t=O(e);return t>=1<<e-1?t:t+(-1<<e)+1}var j=0;var x,k=0;function I(e,t,r,n,a){var i=r%f;t(e,h(e,(r/f|0)*e.v+n,i*e.h+a))}function _(e,t,r){t(e,h(e,r/e.blocksPerLine|0,r%e.blocksPerLine))}var S,T,A,M,C,P,D=i.length;P=p?0===u?0===l?function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:w(r)<<c;e.blockData[t]=e.pred+=n}:function(e,t){e.blockData[t]|=m()<<c}:0===l?function(e,r){if(j>0)j--;else for(var n=u,a=s;n<=a;){var i=g(e.huffmanTableAC),o=15&i,l=i>>4;if(0!==o){var f=t[n+=l];e.blockData[r+f]=w(o)*(1<<c),n++}else{if(l<15){j=O(l)+(1<<l)-1;break}n+=16}}}:function(r,n){for(var a,i,o=u,l=s,f=0;o<=l;){var h=t[o];switch(k){case 0:if(f=(i=g(r.huffmanTableAC))>>4,0==(a=15&i))f<15?(j=O(f)+(1<<f),k=4):(f=16,k=1);else{if(1!==a)throw new e("invalid ACn encoding");x=w(a),k=f?2:3}continue;case 1:case 2:r.blockData[n+h]?r.blockData[n+h]+=m()<<c:0==--f&&(k=2===k?3:0);break;case 3:r.blockData[n+h]?r.blockData[n+h]+=m()<<c:(r.blockData[n+h]=x<<c,k=0);break;case 4:r.blockData[n+h]&&(r.blockData[n+h]+=m()<<c)}o++}4===k&&0==--j&&(k=0)}:function(e,r){var n=g(e.huffmanTableDC),a=0===n?0:w(n);e.blockData[r]=e.pred+=a;for(var i=1;i<64;){var o=g(e.huffmanTableAC),u=15&o,s=o>>4;if(0!==u){var l=t[i+=s];e.blockData[r+l]=w(u),i++}else{if(s<15)break;i+=16}}};var E,R,N,B,F=0;for(R=1===D?i[0].blocksPerLine*i[0].blocksPerColumn:f*a.mcusPerColumn;F<R;){var L=o?Math.min(R-F,o):R;for(T=0;T<D;T++)i[T].pred=0;if(j=0,1===D)for(S=i[0],C=0;C<L;C++)_(S,P,F),F++;else for(C=0;C<L;C++){for(T=0;T<D;T++)for(N=(S=i[T]).h,B=S.v,A=0;A<B;A++)for(M=0;M<N;M++)I(S,P,F,A,M);F++}b=0,(E=v(r,n))&&E.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+E.invalid),n=E.offset);var U=E&&E.marker;if(!U||U<=65280)throw new e("marker was not found");if(!(U>=65488&&U<=65495))break;n+=2}return(E=v(r,n))&&E.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+E.invalid),n=E.offset),n-d}function d(t,c,f){var h,p,d,y,v,b,m,g,O,w,j,x,k,I,_,S,T,A=t.quantizationTable,M=t.blockData;if(!A)throw new e("missing required Quantization Table.");for(var C=0;C<64;C+=8)O=M[c+C],w=M[c+C+1],j=M[c+C+2],x=M[c+C+3],k=M[c+C+4],I=M[c+C+5],_=M[c+C+6],S=M[c+C+7],O*=A[C],0!=(w|j|x|k|I|_|S)?(w*=A[C+1],j*=A[C+2],x*=A[C+3],k*=A[C+4],I*=A[C+5],_*=A[C+6],S*=A[C+7],p=(h=(h=s*O+128>>8)+(p=s*k+128>>8)+1>>1)-p,T=(d=j)*u+(y=_)*o+128>>8,d=d*o-y*u+128>>8,m=(v=(v=l*(w-S)+128>>8)+(m=I<<4)+1>>1)-m,b=(g=(g=l*(w+S)+128>>8)+(b=x<<4)+1>>1)-b,y=(h=h+(y=T)+1>>1)-y,d=(p=p+d+1>>1)-d,T=v*i+g*a+2048>>12,v=v*a-g*i+2048>>12,g=T,T=b*n+m*r+2048>>12,b=b*r-m*n+2048>>12,m=T,f[C]=h+g,f[C+7]=h-g,f[C+1]=p+m,f[C+6]=p-m,f[C+2]=d+b,f[C+5]=d-b,f[C+3]=y+v,f[C+4]=y-v):(T=s*O+512>>10,f[C]=T,f[C+1]=T,f[C+2]=T,f[C+3]=T,f[C+4]=T,f[C+5]=T,f[C+6]=T,f[C+7]=T);for(var P=0;P<8;++P)O=f[P],0!=((w=f[P+8])|(j=f[P+16])|(x=f[P+24])|(k=f[P+32])|(I=f[P+40])|(_=f[P+48])|(S=f[P+56]))?(p=(h=4112+((h=s*O+2048>>12)+(p=s*k+2048>>12)+1>>1))-p,T=(d=j)*u+(y=_)*o+2048>>12,d=d*o-y*u+2048>>12,y=T,m=(v=(v=l*(w-S)+2048>>12)+(m=I)+1>>1)-m,b=(g=(g=l*(w+S)+2048>>12)+(b=x)+1>>1)-b,T=v*i+g*a+2048>>12,v=v*a-g*i+2048>>12,g=T,T=b*n+m*r+2048>>12,b=b*r-m*n+2048>>12,O=(O=(h=h+y+1>>1)+g)<16?0:O>=4080?255:O>>4,w=(w=(p=p+d+1>>1)+(m=T))<16?0:w>=4080?255:w>>4,j=(j=(d=p-d)+b)<16?0:j>=4080?255:j>>4,x=(x=(y=h-y)+v)<16?0:x>=4080?255:x>>4,k=(k=y-v)<16?0:k>=4080?255:k>>4,I=(I=d-b)<16?0:I>=4080?255:I>>4,_=(_=p-m)<16?0:_>=4080?255:_>>4,S=(S=h-g)<16?0:S>=4080?255:S>>4,M[c+P]=O,M[c+P+8]=w,M[c+P+16]=j,M[c+P+24]=x,M[c+P+32]=k,M[c+P+40]=I,M[c+P+48]=_,M[c+P+56]=S):(T=(T=s*O+8192>>14)<-2040?0:T>=2024?255:T+2056>>4,M[c+P]=T,M[c+P+8]=T,M[c+P+16]=T,M[c+P+24]=T,M[c+P+32]=T,M[c+P+40]=T,M[c+P+48]=T,M[c+P+56]=T)}function y(e,t){for(var r=t.blocksPerLine,n=t.blocksPerColumn,a=new Int16Array(64),i=0;i<n;i++)for(var o=0;o<r;o++)d(t,h(t,i,o),a);return t.blockData}function v(e,t,r){function n(t){return e[t]<<8|e[t+1]}var a=e.length-1,i=r<t?r:t;if(t>=a)return null;var o=n(t);if(o>=65472&&o<=65534)return{invalid:null,marker:o,offset:t};for(var u=n(i);!(u>=65472&&u<=65534);){if(++i>=a)return null;u=n(i)}return{invalid:o.toString(16),marker:u,offset:i}}return c.prototype={parse:function(r){function n(){var e=r[s]<<8|r[s+1];return s+=2,e}function a(){var e=n(),t=s+e-2,a=v(r,t,s);a&&a.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+a.invalid),t=a.offset);var i=r.subarray(s,t);return s+=i.length,i}function i(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),r=Math.ceil(e.scanLines/8/e.maxV),n=0;n<e.components.length;n++){F=e.components[n];var a=Math.ceil(Math.ceil(e.samplesPerLine/8)*F.h/e.maxH),i=Math.ceil(Math.ceil(e.scanLines/8)*F.v/e.maxV),o=t*F.h,u=r*F.v*64*(o+1);F.blockData=new Int16Array(u),F.blocksPerLine=a,F.blocksPerColumn=i}e.mcusPerLine=t,e.mcusPerColumn=r}var o,u,s=0,l=null,c=null,h=[],d=[],b=[],m=n();if(65496!==m)throw new e("SOI not found");for(m=n();65497!==m;){var g,O,w;switch(m){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var j=a();65504===m&&74===j[0]&&70===j[1]&&73===j[2]&&70===j[3]&&0===j[4]&&(l={version:{major:j[5],minor:j[6]},densityUnits:j[7],xDensity:j[8]<<8|j[9],yDensity:j[10]<<8|j[11],thumbWidth:j[12],thumbHeight:j[13],thumbData:j.subarray(14,14+3*j[12]*j[13])}),65518===m&&65===j[0]&&100===j[1]&&111===j[2]&&98===j[3]&&101===j[4]&&(c={version:j[5]<<8|j[6],flags0:j[7]<<8|j[8],flags1:j[9]<<8|j[10],transformCode:j[11]});break;case 65499:for(var x=n()+s-2;s<x;){var k=r[s++],I=new Uint16Array(64);if(k>>4==0)for(O=0;O<64;O++)I[t[O]]=r[s++];else{if(k>>4!=1)throw new e("DQT - invalid table spec");for(O=0;O<64;O++)I[t[O]]=n()}h[15&k]=I}break;case 65472:case 65473:case 65474:if(o)throw new e("Only single frame JPEGs supported");n(),(o={}).extended=65473===m,o.progressive=65474===m,o.precision=r[s++],o.scanLines=n(),o.samplesPerLine=n(),o.components=[],o.componentIds={};var _,S=r[s++],T=0,A=0;for(g=0;g<S;g++){_=r[s];var M=r[s+1]>>4,C=15&r[s+1];T<M&&(T=M),A<C&&(A=C);var P=r[s+2];w=o.components.push({h:M,v:C,quantizationId:P,quantizationTable:null}),o.componentIds[_]=w-1,s+=3}o.maxH=T,o.maxV=A,i(o);break;case 65476:var D=n();for(g=2;g<D;){var E=r[s++],R=new Uint8Array(16),N=0;for(O=0;O<16;O++,s++)N+=R[O]=r[s];var B=new Uint8Array(N);for(O=0;O<N;O++,s++)B[O]=r[s];g+=17+N,(E>>4==0?b:d)[15&E]=f(R,B)}break;case 65501:n(),u=n();break;case 65498:n();var F,L=r[s++],U=[];for(g=0;g<L;g++){var G=o.componentIds[r[s++]];F=o.components[G];var z=r[s++];F.huffmanTableDC=b[z>>4],F.huffmanTableAC=d[15&z],U.push(F)}var V=r[s++],H=r[s++],J=r[s++],W=p(r,s,o,U,u,V,H,J>>4,15&J);s+=W;break;case 65535:255!==r[s]&&s--;break;default:if(255===r[s-3]&&r[s-2]>=192&&r[s-2]<=254){s-=3;break}throw new e("unknown marker "+m.toString(16))}m=n()}for(this.width=o.samplesPerLine,this.height=o.scanLines,this.jfif=l,this.eof=s,this.adobe=c,this.components=[],g=0;g<o.components.length;g++){var q=h[(F=o.components[g]).quantizationId];q&&(F.quantizationTable=q),this.components.push({output:y(0,F),scaleX:F.h/o.maxH,scaleY:F.v/o.maxV,blocksPerLine:F.blocksPerLine,blocksPerColumn:F.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(e,t){var r,n,a,i,o,u,s,l,c,f,h,p=this.width/e,d=this.height/t,y=0,v=this.components.length,b=e*t*v,m=new Uint8ClampedArray(b),g=new Uint32Array(e),O=4294967288;for(s=0;s<v;s++){for(n=(r=this.components[s]).scaleX*p,a=r.scaleY*d,y=s,h=r.output,i=r.blocksPerLine+1<<3,o=0;o<e;o++)l=0|o*n,g[o]=(l&O)<<3|7&l;for(u=0;u<t;u++)for(f=i*((l=0|u*a)&O)|(7&l)<<3,o=0;o<e;o++)m[y]=h[f+g[o]],y+=v}var w=this.decodeTransform;if(w)for(s=0;s<b;)for(l=0,c=0;l<v;l++,s++,c+=2)m[s]=(m[s]*w[c]>>8)+w[c+1];return m},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(e){for(var t,r,n,a=0,i=e.length;a<i;a+=3)t=e[a],r=e[a+1],n=e[a+2],e[a]=t-179.456+1.402*n,e[a+1]=t+135.459-.344*r-.714*n,e[a+2]=t-226.816+1.772*r;return e},_convertYcckToRgb:function(e){for(var t,r,n,a,i=0,o=0,u=e.length;o<u;o+=4)t=e[o],r=e[o+1],n=e[o+2],a=e[o+3],e[i++]=r*(-660635669420364e-19*r+.000437130475926232*n-54080610064599e-18*t+.00048449797120281*a-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*t-.00477271405408747*a+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*a+.48357088451265)+a*(-.000336197177618394*a+.484791561490776),e[i++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*n+.000659397001245577*t+.000426105652938837*a-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*t+.000770482631801132*a-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*a+.25802910206845)+a*(-.000318913117588328*a-.213742400323665),e[i++]=r*(-.000570115196973677*r-263409051004589e-19*n+.0020741088115012*t-.00288260236853442*a+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*t+.000560833691242812*a-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*a+.116935020465145)+a*(-.000343531996510555*a+.24165260232407);return e},_convertYcckToCmyk:function(e){for(var t,r,n,a=0,i=e.length;a<i;a+=4)t=e[a],r=e[a+1],n=e[a+2],e[a]=434.456-t-1.402*n,e[a+1]=119.541-t+.344*r+.714*n,e[a+2]=481.816-t-1.772*r;return e},_convertCmykToRgb:function(e){for(var t,r,n,a,i=0,o=1/255,u=0,s=e.length;u<s;u+=4)t=e[u]*o,r=e[u+1]*o,n=e[u+2]*o,a=e[u+3]*o,e[i++]=255+t*(-4.387332384609988*t+54.48615194189176*r+18.82290502165302*n+212.25662451639585*a-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*n-17.873870861415444*a-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*a+17.5119270841813)-a*(21.86122147463605*a+189.48180835922747),e[i++]=255+t*(8.841041422036149*t+60.118027045597366*r+6.871425592049007*n+31.159100130055922*a-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*a-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*a-24.86741582555878)-a*(20.737325471181034*a+187.80453709719578),e[i++]=255+t*(.8842522430003296*t+8.078677503112928*r+30.89978309703729*n-.23883238689178934*a-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*a-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*a-193.58209356861505)-a*(22.33816807309886*a+180.12613974708367);return e},getData:function(t,r,n){if(this.numComponents>4)throw new e("Unsupported color mode");var a=this._getLinearizedBlockData(t,r);if(1===this.numComponents&&n){for(var i=a.length,o=new Uint8ClampedArray(3*i),u=0,s=0;s<i;s++){var l=a[s];o[u++]=l,o[u++]=l,o[u++]=l}return o}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return n?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(n)return this._convertCmykToRgb(a)}return a}},c}()},void 0!==(i=a())&&(n.exports=i);var u=o.exports},"WW+m":function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return T})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return l}));var n=r("djeU"),a=r("qFFn"),i=r("4vgF"),o=r("p0eS"),u=r("KcHx"),s=r("ccBF");function l(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function c(e,t){var r=2*Math.acos(t[3]),n=Math.sin(r/2);return n>o.a?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r}function f(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],u=r[0],s=r[1],l=r[2],c=r[3];return e[0]=n*c+o*u+a*l-i*s,e[1]=a*c+o*s+i*u-n*l,e[2]=i*c+o*l+n*s-a*u,e[3]=o*c-n*u-a*s-i*l,e}function h(e,t,r,n){var a,i,u,s,l,c=t[0],f=t[1],h=t[2],p=t[3],d=r[0],y=r[1],v=r[2],b=r[3];return(i=c*d+f*y+h*v+p*b)<0&&(i=-i,d=-d,y=-y,v=-v,b=-b),1-i>o.a?(a=Math.acos(i),u=Math.sin(a),s=Math.sin((1-n)*a)/u,l=Math.sin(n*a)/u):(s=1-n,l=n),e[0]=s*c+l*d,e[1]=s*f+l*y,e[2]=s*h+l*v,e[3]=s*p+l*b,e}function p(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function d(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;r=Math.sqrt(t[3*a+a]-t[3*i+i]-t[3*o+o]+1),e[a]=.5*r,r=.5/r,e[3]=(t[3*i+o]-t[3*o+i])*r,e[i]=(t[3*i+a]+t[3*a+i])*r,e[o]=(t[3*o+a]+t[3*a+o])*r}return e}function y(e,t,r,n){var a=.5*Math.PI/180;t*=a,r*=a,n*=a;var i=Math.sin(t),o=Math.cos(t),u=Math.sin(r),s=Math.cos(r),l=Math.sin(n),c=Math.cos(n);return e[0]=i*s*c-o*u*l,e[1]=o*u*c+i*s*l,e[2]=o*s*l-i*u*c,e[3]=o*s*c+i*u*l,e}var v=s.c,b=s.k,m=s.a,g=f,O=s.b,w=s.d,j=s.i,x=s.e,k=x,I=s.f,_=I,S=s.j,T=s.g,A=s.h;var M=Object(i.e)(),C=Object(i.g)(1,0,0),P=Object(i.g)(0,1,0);var D=Object(a.b)(),E=Object(a.b)();var R=Object(n.b)();Object.freeze({__proto__:null,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},setAxisAngle:l,getAxisAngle:c,multiply:f,rotateX:function(e,t,r){r*=.5;var n=t[0],a=t[1],i=t[2],o=t[3],u=Math.sin(r),s=Math.cos(r);return e[0]=n*s+o*u,e[1]=a*s+i*u,e[2]=i*s-a*u,e[3]=o*s-n*u,e},rotateY:function(e,t,r){r*=.5;var n=t[0],a=t[1],i=t[2],o=t[3],u=Math.sin(r),s=Math.cos(r);return e[0]=n*s-i*u,e[1]=a*s+o*u,e[2]=i*s+n*u,e[3]=o*s-a*u,e},rotateZ:function(e,t,r){r*=.5;var n=t[0],a=t[1],i=t[2],o=t[3],u=Math.sin(r),s=Math.cos(r);return e[0]=n*s+a*u,e[1]=a*s-n*u,e[2]=i*s+o*u,e[3]=o*s-i*u,e},calculateW:function(e,t){var r=t[0],n=t[1],a=t[2];return e[0]=r,e[1]=n,e[2]=a,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),e},slerp:h,random:function(e){var t=Object(o.b)(),r=Object(o.b)(),n=Object(o.b)(),a=Math.sqrt(1-t),i=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*r),e[1]=a*Math.cos(2*Math.PI*r),e[2]=i*Math.sin(2*Math.PI*n),e[3]=i*Math.cos(2*Math.PI*n),e},invert:function(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r*r+n*n+a*a+i*i,u=o?1/o:0;return e[0]=-r*u,e[1]=-n*u,e[2]=-a*u,e[3]=i*u,e},conjugate:p,fromMat3:d,fromEuler:y,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},copy:v,set:b,add:m,mul:g,scale:O,dot:w,lerp:j,length:x,len:k,squaredLength:I,sqrLen:_,normalize:S,exactEquals:T,equals:A,rotationTo:function(e,t,r){var n=Object(u.e)(t,r);return n<-.999999?(Object(u.d)(M,C,t),Object(u.u)(M)<1e-6&&Object(u.d)(M,P,t),Object(u.o)(M,M),l(e,M,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Object(u.d)(M,t,r),e[0]=M[0],e[1]=M[1],e[2]=M[2],e[3]=1+n,S(e,e))},sqlerp:function(e,t,r,n,a,i){return h(D,t,a,i),h(E,r,n,i),h(e,D,E,2*i*(1-i)),e},setAxes:function(e,t,r,n){var a=R;return a[0]=r[0],a[3]=r[1],a[6]=r[2],a[1]=n[0],a[4]=n[1],a[7]=n[2],a[2]=-t[0],a[5]=-t[1],a[8]=-t[2],S(e,d(e,a))}})},XEiz:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("dQW7"),l=r("hZBP"),c=r("FYmP"),f=r("xAIp"),h=(r("J4Pc"),r("wckI"),r("TM+E"),r("iaHD"));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var d={visible:"visibleSublayers"},y=function(e){Object(i.a)(r,e);var t=p(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).scale=0,a}return Object(a.a)(r,[{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("wms-sublayer-update",(function(e){return t.notifyChange(d[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){return this.visibleSublayers.filter((function(e){return e.name})).map((function(e){return e.name})).join(",")}},{key:"version",get:function(){this.commitProperty("layers");var e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this.layer,t=this.scale,r=null==e?void 0:e.sublayers,n=[];return null==r||r.forEach((function e(r){var a=r.minScale,i=r.maxScale,o=r.sublayers;r.visible&&(0===t||(0===a||t<=a)&&(0===i||t>=i))&&(o?o.forEach(e):n.unshift(r))})),n}},{key:"toJSON",value:function(){var e=this.layer,t=this.layers;return{format:e.imageFormat,request:"GetMap",service:"WMS",styles:"",transparent:e.imageTransparency,version:e.version,layers:t}}}]),r}(Object(c.b)(l.a));Object(s.a)([Object(f.b)()],y.prototype,"layer",null),Object(s.a)([Object(f.b)({readOnly:!0})],y.prototype,"layers",null),Object(s.a)([Object(f.b)({type:Number})],y.prototype,"scale",void 0),Object(s.a)([Object(f.b)({readOnly:!0})],y.prototype,"version",null),Object(s.a)([Object(f.b)({readOnly:!0})],y.prototype,"visibleSublayers",null),y=Object(s.a)([Object(h.a)("esri.layers.support.ExportWMSImageParameters")],y)},XaoK:function(e,t,r){"use strict";function n(e,t){var r=e.count;t||(t=new e.TypedArrayConstructor(r));for(var n=0;n<r;n++)t[n]=e.get(n);return t}r.d(t,"a",(function(){return n}));Object.freeze({__proto__:null,copy:function(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,i=t.typedBuffer,o=t.typedBufferStride,u=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*a,l=(r&&r.srcIndex?r.srcIndex:0)*o,c=0;c<u;++c)n[s]=i[l],s+=a,l+=o},makeDense:n})},XdFM:function(e,t,r){"use strict";r.r(t),r.d(t,"registerFunctions",(function(){return b}));var n=r("g+AA"),a=r("9r7x"),i=r("u6Q5"),o=r("dK4N"),u=r("nd5+"),s=r("DjXQ"),l=r("Hj62"),c=r("XeQg"),f=r("OTJA"),h=r("cFtQ"),p=r("AQ8/"),d=r("aic5");function y(e){return 0===n.d.indexOf("4.")?h.a.fromExtent(e):new h.a({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function v(e){if(Object(i.J)(e,2,2),e[0]instanceof s.a&&e[1]instanceof s.a);else if(e[0]instanceof s.a&&null===e[1]);else if(e[1]instanceof s.a&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new Error("Illegal Argument")}function b(e){"async"===e.mode&&(e.functions.disjoint=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return v(r=Object(i.g)(r)),null===r[0]||null===r[1]||Object(l.h)(r[0],r[1])}))},e.functions.intersects=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return v(r=Object(i.g)(r)),null!==r[0]&&null!==r[1]&&Object(l.q)(r[0],r[1])}))},e.functions.touches=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return v(r=Object(i.g)(r)),null!==r[0]&&null!==r[1]&&Object(l.A)(r[0],r[1])}))},e.functions.crosses=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return v(r=Object(i.g)(r)),null!==r[0]&&null!==r[1]&&Object(l.d)(r[0],r[1])}))},e.functions.within=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return v(r=Object(i.g)(r)),null!==r[0]&&null!==r[1]&&Object(l.C)(r[0],r[1])}))},e.functions.contains=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return v(r=Object(i.g)(r)),null!==r[0]&&null!==r[1]&&Object(l.c)(r[0],r[1])}))},e.functions.overlaps=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return v(r=Object(i.g)(r)),null!==r[0]&&null!==r[1]&&Object(l.t)(r[0],r[1])}))},e.functions.equals=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return Object(i.J)(r,2,2),r[0]===r[1]||(r[0]instanceof s.a&&r[1]instanceof s.a?Object(l.j)(r[0],r[1]):!(!Object(i.I)(r[0])||!Object(i.I)(r[1]))&&r[0].getTime()===r[1].getTime())}))},e.functions.relate=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,3,3),r[0]instanceof s.a&&r[1]instanceof s.a)return Object(l.w)(r[0],r[1],Object(i.x)(r[2]));if(r[0]instanceof s.a&&null===r[1])return!1;if(r[1]instanceof s.a&&null===r[0])return!1;if(null===r[0]&&null===r[1])return!1;throw new Error("Illegal Argument")}))},e.functions.intersection=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return v(r=Object(i.g)(r)),null===r[0]||null===r[1]?null:Object(l.p)(r[0],r[1])}))},e.functions.union=function(t,r){return e.standardFunctionAsync(t,r,(function(e,r,n){var o=[];if(0===(n=Object(i.g)(n)).length)throw new Error("Function called with wrong number of Parameters");if(1===n.length)if(Object(i.u)(n[0])){for(var u=Object(i.g)(n[0]),c=0;c<u.length;c++)if(null!==u[c]){if(!(u[c]instanceof s.a))throw new Error("Illegal Argument");o.push(u[c])}}else{if(!Object(i.v)(n[0])){if(n[0]instanceof s.a)return Object(i.z)(Object(a.a)(n[0]),t.spatialReference);if(null===n[0])return null;throw new Error("Illegal Argument")}for(var f=Object(i.g)(n[0].toArray()),h=0;h<f.length;h++)if(null!==f[h]){if(!(f[h]instanceof s.a))throw new Error("Illegal Argument");o.push(f[h])}}else for(var p=0;p<n.length;p++)if(null!==n[p]){if(!(n[p]instanceof s.a))throw new Error("Illegal Argument");o.push(n[p])}return 0===o.length?null:Object(l.B)(o)}))},e.functions.difference=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return v(r=Object(i.g)(r)),null!==r[0]&&null===r[1]?Object(a.a)(r[0]):null===r[0]?null:Object(l.g)(r[0],r[1])}))},e.functions.symmetricdifference=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){return v(r=Object(i.g)(r)),null===r[0]&&null===r[1]?null:null===r[0]?Object(a.a)(r[1]):null===r[1]?Object(a.a)(r[0]):Object(l.z)(r[0],r[1])}))},e.functions.clip=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,2,2),!(r[1]instanceof u.a)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return null;if(!(r[0]instanceof s.a))throw new Error("Illegal Argument");return null===r[1]?null:Object(l.b)(r[0],r[1])}))},e.functions.cut=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,2,2),!(r[1]instanceof p.a)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return[];if(!(r[0]instanceof s.a))throw new Error("Illegal Argument");return null===r[1]?[Object(a.a)(r[0])]:Object(l.e)(r[0],r[1])}))},e.functions.area=function(t,r){return e.standardFunctionAsync(t,r,(function(e,r,n){if(Object(i.J)(n,1,2),null===(n=Object(i.g)(n))[0])return 0;if(Object(i.K)(n[0]))return n[0].sumArea(Object(a.c)(Object(i.c)(n[1],-1)),!1,t.abortSignal).then((function(e){if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if(Object(i.u)(n[0])||Object(i.v)(n[0])){var o=Object(i.j)(n[0],t.spatialReference);return null===o?0:Object(l.u)(o,Object(a.c)(Object(i.c)(n[1],-1)))}if(!(n[0]instanceof s.a))throw new Error("Illegal Argument");return Object(l.u)(n[0],Object(a.c)(Object(i.c)(n[1],-1)))}))},e.functions.areageodetic=function(t,r){return e.standardFunctionAsync(t,r,(function(e,r,n){if(Object(i.J)(n,1,2),null===(n=Object(i.g)(n))[0])return 0;if(Object(i.K)(n[0]))return n[0].sumArea(Object(a.c)(Object(i.c)(n[1],-1)),!0,t.abortSignal).then((function(e){if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if(Object(i.u)(n[0])||Object(i.v)(n[0])){var o=Object(i.j)(n[0],t.spatialReference);return null===o?0:Object(l.l)(o,Object(a.c)(Object(i.c)(n[1],-1)))}if(!(n[0]instanceof s.a))throw new Error("Illegal Argument");return Object(l.l)(n[0],Object(a.c)(Object(i.c)(n[1],-1)))}))},e.functions.length=function(t,r){return e.standardFunctionAsync(t,r,(function(e,r,n){if(Object(i.J)(n,1,2),null===(n=Object(i.g)(n))[0])return 0;if(Object(i.K)(n[0]))return n[0].sumLength(Object(a.b)(Object(i.c)(n[1],-1)),!1,t.abortSignal).then((function(e){if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if(Object(i.u)(n[0])||Object(i.v)(n[0])){var o=Object(i.h)(n[0],t.spatialReference);return null===o?0:Object(l.v)(o,Object(a.b)(Object(i.c)(n[1],-1)))}if(!(n[0]instanceof s.a))throw new Error("Illegal Argument");return Object(l.v)(n[0],Object(a.b)(Object(i.c)(n[1],-1)))}))},e.functions.lengthgeodetic=function(t,r){return e.standardFunctionAsync(t,r,(function(e,r,n){if(Object(i.J)(n,1,2),null===(n=Object(i.g)(n))[0])return 0;if(Object(i.K)(n[0]))return n[0].sumLength(Object(a.b)(Object(i.c)(n[1],-1)),!0,t.abortSignal).then((function(e){if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if(Object(i.u)(n[0])||Object(i.v)(n[0])){var o=Object(i.h)(n[0],t.spatialReference);return null===o?0:Object(l.o)(o,Object(a.b)(Object(i.c)(n[1],-1)))}if(!(n[0]instanceof s.a))throw new Error("Illegal Argument");return Object(l.o)(n[0],Object(a.b)(Object(i.c)(n[1],-1)))}))},e.functions.distance=function(t,r){return e.standardFunctionAsync(t,r,(function(e,r,n){n=Object(i.g)(n),Object(i.J)(n,2,3);var o=n[0];(Object(i.u)(n[0])||Object(i.v)(n[0]))&&(o=Object(i.k)(n[0],t.spatialReference));var u=n[1];if((Object(i.u)(n[1])||Object(i.v)(n[1]))&&(u=Object(i.k)(n[1],t.spatialReference)),!(o instanceof s.a))throw new Error("Illegal Argument");if(!(u instanceof s.a))throw new Error("Illegal Argument");return Object(l.i)(o,u,Object(a.b)(Object(i.c)(n[2],-1)))}))},e.functions.distancegeodetic=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){r=Object(i.g)(r),Object(i.J)(r,2,3);var n=r[0],o=r[1];if(!(n instanceof f.a))throw new Error("Illegal Argument");if(!(o instanceof f.a))throw new Error("Illegal Argument");var u=new p.a({paths:[],spatialReference:n.spatialReference});return u.addPath([n,o]),Object(l.o)(u,Object(a.b)(Object(i.c)(r[2],-1)))}))},e.functions.densify=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof s.a))throw new Error("Illegal Argument");var n=Object(i.N)(r[1]);if(isNaN(n))throw new Error("Illegal Argument");if(n<=0)throw new Error("Illegal Argument");return r[0]instanceof h.a||r[0]instanceof p.a?Object(l.f)(r[0],n,Object(a.b)(Object(i.c)(r[2],-1))):r[0]instanceof u.a?Object(l.f)(y(r[0]),n,Object(a.b)(Object(i.c)(r[2],-1))):r[0]}))},e.functions.densifygeodetic=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof s.a))throw new Error("Illegal Argument");var n=Object(i.N)(r[1]);if(isNaN(n))throw new Error("Illegal Argument");if(n<=0)throw new Error("Illegal Argument");return r[0]instanceof h.a||r[0]instanceof p.a?Object(l.n)(r[0],n,Object(a.b)(Object(i.c)(r[2],-1))):r[0]instanceof u.a?Object(l.n)(y(r[0]),n,Object(a.b)(Object(i.c)(r[2],-1))):r[0]}))},e.functions.generalize=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,2,4),null===r[0])return null;if(!(r[0]instanceof s.a))throw new Error("Illegal Argument");var n=Object(i.N)(r[1]);if(isNaN(n))throw new Error("Illegal Argument");return Object(l.k)(r[0],n,Object(i.O)(Object(i.c)(r[2],!0)),Object(a.b)(Object(i.c)(r[3],-1)))}))},e.functions.buffer=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof s.a))throw new Error("Illegal Argument");var n=Object(i.N)(r[1]);if(isNaN(n))throw new Error("Illegal Argument");return 0===n?Object(a.a)(r[0]):Object(l.a)(r[0],n,Object(a.b)(Object(i.c)(r[2],-1)))}))},e.functions.buffergeodetic=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof s.a))throw new Error("Illegal Argument");var n=Object(i.N)(r[1]);if(isNaN(n))throw new Error("Illegal Argument");return 0===n?Object(a.a)(r[0]):Object(l.m)(r[0],n,Object(a.b)(Object(i.c)(r[2],-1)))}))},e.functions.offset=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,2,6),null===r[0])return null;if(!(r[0]instanceof h.a||r[0]instanceof p.a))throw new Error("Illegal Argument");var n=Object(i.N)(r[1]);if(isNaN(n))throw new Error("Illegal Argument");var o=Object(i.N)(Object(i.c)(r[4],10));if(isNaN(o))throw new Error("Illegal Argument");var u=Object(i.N)(Object(i.c)(r[5],0));if(isNaN(u))throw new Error("Illegal Argument");return Object(l.s)(r[0],n,Object(a.b)(Object(i.c)(r[2],-1)),Object(i.x)(Object(i.c)(r[3],"round")).toLowerCase(),o,u)}))},e.functions.rotate=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){r=Object(i.g)(r),Object(i.J)(r,2,3);var n=r[0];if(null===n)return null;if(!(n instanceof s.a))throw new Error("Illegal Argument");n instanceof u.a&&(n=h.a.fromExtent(n));var a=Object(i.N)(r[1]);if(isNaN(a))throw new Error("Illegal Argument");var o=Object(i.c)(r[2],null);if(null===o)return Object(l.x)(n,a);if(o instanceof f.a)return Object(l.x)(n,a,o);throw new Error("Illegal Argument")}))},e.functions.centroid=function(t,r){return e.standardFunctionAsync(t,r,(function(e,r,n){if(n=Object(i.g)(n),Object(i.J)(n,1,1),null===n[0])return null;var l=n[0];if((Object(i.u)(n[0])||Object(i.v)(n[0]))&&(l=Object(i.k)(n[0],t.spatialReference)),null===l)return null;if(!(l instanceof s.a))throw new Error("Illegal Argument");return l instanceof f.a?Object(i.z)(Object(a.a)(n[0]),t.spatialReference):l instanceof h.a?l.centroid:l instanceof p.a?Object(o.f)(l):l instanceof c.a?Object(o.e)(l):l instanceof u.a?l.center:null}))},e.functions.multiparttosinglepart=function(t,r){return e.standardFunctionAsync(t,r,(function(e,r,n){n=Object(i.g)(n),Object(i.J)(n,1,1);var o=[];if(null===n[0])return null;if(!(n[0]instanceof s.a))throw new Error("Illegal Argument");return n[0]instanceof f.a||n[0]instanceof u.a?[Object(i.z)(Object(a.a)(n[0]),t.spatialReference)]:Object(l.y)(n[0]).then((function(e){if(e instanceof h.a){for(var r=[],u=[],s=0;s<e.rings.length;s++)if(e.isClockwise(e.rings[s])){var l=Object(d.a)({rings:[e.rings[s]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});r.push(l)}else u.push({ring:e.rings[s],pt:e.getPoint(s,0)});for(var f=0;f<u.length;f++)for(var y=0;y<r.length;y++)if(r[y].contains(u[f].pt)){r[y].addRing(u[f].ring);break}return r}if(e instanceof p.a){for(var v=[],b=0;b<e.paths.length;b++){var m=Object(d.a)({paths:[e.paths[b]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});v.push(m)}return v}if(n[0]instanceof c.a){for(var g=Object(i.z)(Object(a.a)(n[0]),t.spatialReference),O=0;O<g.points.length;O++)o.push(g.getPoint(O));return o}return null}))}))},e.functions.issimple=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,1,1),null===r[0])return!0;if(!(r[0]instanceof s.a))throw new Error("Illegal Argument");return Object(l.r)(r[0])}))},e.functions.simplify=function(t,r){return e.standardFunctionAsync(t,r,(function(e,t,r){if(r=Object(i.g)(r),Object(i.J)(r,1,1),null===r[0])return null;if(!(r[0]instanceof s.a))throw new Error("Illegal Argument");return Object(l.y)(r[0])}))})}},Xqmc:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("z9dv"),a=r("eoZi");function i(e){return{origin:"portal-item",url:Object(n.K)(e.itemUrl),portal:e.portal||a.a.getDefault(),portalItem:e,readResourcePaths:[]}}},YAOx:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("eijD"),a=r("NthX"),i=r.n(a),o=r("DGz/"),u=r("Mp7X"),s=r("7im+");function l(e,t,r,n,a,i){return c.apply(this,arguments)}function c(){return(c=Object(n.a)(i.a.mark((function e(t,r,n,a,l,c){var f,h,p,d,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=null,!Object(s.i)(n)){e.next=17;break}return h="".concat(t,"/nodepages/"),p=h+Math.floor(n.rootIndex/n.nodesPerPage),e.prev=3,e.next=6,Object(o.default)(p,{query:{f:"json",token:a},responseType:"json",signal:c});case 6:return e.t0=e.sent.data,e.t1=n.rootIndex,e.t2=n.nodesPerPage,e.t3=n.lodSelectionMetricType,e.t4=h,e.abrupt("return",{type:"page",rootPage:e.t0,rootIndex:e.t1,pageSize:e.t2,lodMetric:e.t3,urlPrefix:e.t4});case 14:e.prev=14,e.t5=e.catch(3),Object(s.i)(l)&&l.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",p,e.t5),f=e.t5;case 17:if(r){e.next=19;break}return e.abrupt("return",null);case 19:return d="".concat(t,"/nodes/"),y=d+(r&&r.split("/").pop()),e.prev=20,e.next=23,Object(o.default)(y,{query:{f:"json",token:a},responseType:"json",signal:c});case 23:return e.t6=e.sent.data,e.t7=d,e.abrupt("return",{type:"node",rootNode:e.t6,urlPrefix:e.t7});case 28:throw e.prev=28,e.t8=e.catch(20),new u.a("sceneservice:root-node-missing","Root node missing.",{pageError:f,nodeError:e.t8,url:y});case 31:case"end":return e.stop()}}),e,null,[[3,14],[20,28]])})))).apply(this,arguments)}},YNd3:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("4VMI"),l=r("cWe4"),c=r("nBXx"),f=r("omx3"),h=r("x/s0"),p=r("IH5m"),d=r("DjXQ"),y=r("EOOn"),v=r("Rby8"),b=r("SPOG"),m=r("hdDo");function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var j=function(e){Object(i.a)(r,e);var t=w(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).declaredClass="esri.arcade.featureset.sources.FeatureLayerMemory",a._removeGeometry=!1,a._overrideFields=null,a._forceIsTable=!1,e.spatialReference&&(a.spatialReference=e.spatialReference),a._transparent=!0,a._maxProcessing=1e3,a._layer=e.layer,a._wset=null,!0===e.isTable&&(a._forceIsTable=!0),void 0!==e.outFields&&(a._overrideFields=e.outFields),void 0!==e.includeGeometry&&(a._removeGeometry=!1===e.includeGeometry),a}return Object(a.a)(r,[{key:"_maxQueryRate",value:function(){return f.f}},{key:"end",value:function(){return this._layer}},{key:"optimisePagingFeatureQueries",value:function(){}},{key:"load",value:function(){var e=this;return null===this._loadPromise&&(this._loadPromise=Object(p.c)((function(t,r){if(!0===e._layer.loaded)return e._initialiseFeatureSet(),void t(e);e._layer.when().then((function(){try{e._initialiseFeatureSet(),t(e)}catch(n){r(n)}}),r),e._layer.load()}))),this._loadPromise}},{key:"gdbVersion",get:function(){return""}},{key:"_initialiseFeatureSet",value:function(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this._layer.geometryType,this.fields=this._layer.fields.slice(0),this._layer.outFields)if(1===this._layer.outFields.length&&"*"===this._layer.outFields[0]);else{var e,t=[],r=g(this.fields);try{for(r.s();!(e=r.n()).done;){var n=e.value;if("oid"===n.type)t.push(n);else{var a,i=g(this._layer.outFields);try{for(i.s();!(a=i.n()).done;){if(a.value.toLowerCase()===n.name.toLowerCase()){t.push(n);break}}}catch(b){i.e(b)}finally{i.f()}}}}catch(b){r.e(b)}finally{r.f()}this.fields=t}if(null!==this._overrideFields)if(1===this._overrideFields.length&&"*"===this._overrideFields[0])this._overrideFields=null;else{var o,u=[],s=[],l=g(this.fields);try{for(l.s();!(o=l.n()).done;){var c=o.value;if("oid"===c.type)u.push(c),s.push(c.name);else{var h,p=g(this._overrideFields);try{for(p.s();!(h=p.n()).done;){if(h.value.toLowerCase()===c.name.toLowerCase()){u.push(c),s.push(c.name);break}}}catch(b){p.e(b)}finally{p.f()}}}}catch(b){l.e(b)}finally{l.f()}this.fields=u,this._overrideFields=s}this.objectIdField=this._layer.objectIdField;var d,y=g(this.fields);try{for(y.s();!(d=y.n()).done;){var v=d.value;"global-id"===v.type&&(this.globalIdField=v.name)}}catch(b){y.e(b)}finally{y.f()}this.hasM=this._layer.supportsM,this.hasZ=this._layer.supportsZ,this._databaseType=f.a.Standardised,this.typeIdField=this._layer.typeIdField,this.types=this._layer.types}},{key:"isTable",value:function(){return this._forceIsTable||this._layer.isTable||"table"===this._layer.type||!this._layer.geometryType}},{key:"_isInFeatureSet",value:function(){return f.b.InFeatureSet}},{key:"_candidateIdTransform",value:function(e){return e}},{key:"_getSet",value:function(e){var t=this;return null===this._wset?this._ensureLoaded().then((function(){return t._getFilteredSet("",null,null,null,e)})).then((function(e){return t._wset=e,e})):Object(p.t)(this._wset)}},{key:"_changeFeature",value:function(e){var t,r={},n=g(this.fields);try{for(n.s();!(t=n.n()).done;){var a=t.value;r[a.name]=e.attributes[a.name]}}catch(i){n.e(i)}finally{n.f()}return new s.a({geometry:!0===this._removeGeometry?null:e.geometry,attributes:r})}},{key:"_getFilteredSet",value:function(e,t,r,n,a){var i=this,o="",u=!1;if(null!==n&&(o=n.constructClause(),u=!0),this.isTable()&&t&&null!==e&&""!==e){var s=new c.a([],[],!0,null);return Object(p.t)(s)}var l=new m.a;return l.where=null===r?null===t?"1=1":"":Object(h.i)(r,f.a.Standardised),l.spatialRelationship=this._makeRelationshipEnum(e),l.outSpatialReference=this.spatialReference,l.orderByFields=""!==o?o.split(","):null,l.geometry=null===t?null:t,l.returnGeometry=!0,l.relationParameter=this._makeRelationshipParam(e),this._layer.queryFeatures(l).then((function(e){if(null===e)return new c.a([],[],u,null);i._checkCancelled(a);var t=[];return e.features.forEach((function(e){var r=e.attributes[i._layer.objectIdField];t.push(r),i._featureCache[r]=i._changeFeature(e)})),new c.a([],t,u,null)}))}},{key:"_makeRelationshipEnum",value:function(e){if(e.indexOf("esriSpatialRelRelation")>=0)return"relation";switch(e){case"esriSpatialRelRelation":return"relation";case"esriSpatialRelIntersects":return"intersects";case"esriSpatialRelContains":return"contains";case"esriSpatialRelOverlaps":return"overlaps";case"esriSpatialRelWithin":return"within";case"esriSpatialRelTouches":return"touches";case"esriSpatialRelCrosses":return"crosses";case"esriSpatialRelEnvelopeIntersects":return"envelope-intersects"}return e}},{key:"_makeRelationshipParam",value:function(e){return e.indexOf("esriSpatialRelRelation")>=0?e.split(":")[1]:""}},{key:"_queryAllFeatures",value:function(){var e=this;if(this._wset)return Object(p.t)(this._wset);var t=new m.a;return t.where="1=1",this._ensureLoaded().then((function(){if(e._layer.source&&e._layer.source.items){var r=[];return e._layer.source.items.forEach((function(t){var n=t.attributes[e._layer.objectIdField];r.push(n),e._featureCache[n]=e._changeFeature(t)})),e._wset=new c.a([],r,!1,null),e._wset}return e._layer.queryFeatures(t).then((function(t){var r=[];return t.features.forEach((function(t){var n=t.attributes[e._layer.objectIdField];r.push(n),e._featureCache[n]=e._changeFeature(t)})),e._wset=new c.a([],r,!1,null),e._wset}))}))}},{key:"_getFeatures",value:function(e,t,r){var n=[];-1!==t&&void 0===this._featureCache[t]&&n.push(t);for(var a=e._lastFetchedIndex;a<e._known.length&&(e._lastFetchedIndex+=1,!(void 0===this._featureCache[e._known[a]]&&(e._known[a]!==t&&n.push(e._known[a]),n.length>r)));a++);return 0===n.length?Object(p.t)("success"):Object(p.s)(new Error("Unaccounted for Features. Not in Feature Collection"))}},{key:"_refineSetBlock",value:function(e){return Object(p.t)(e)}},{key:"_stat",value:function(){return Object(p.t)({calculated:!1})}},{key:"_canDoAggregates",value:function(){return Object(p.t)(!1)}},{key:"relationshipMetaData",value:function(){return[]}},{key:"nativeCapabilities",value:function(){return{title:this._layer.title,canQueryRelated:!1,source:this,capabilities:this._layer.capabilities,databaseType:this._databaseType,requestStandardised:!0}}},{key:"queryAttachments",value:function(){return Object(p.t)([])}},{key:"getFeatureByObjectId",value:function(e){var t=new m.a;return t.where=this.objectIdField+"="+e.toString(),this._layer.queryFeatures(t).then((function(e){return 1===e.features.length?e.features[0]:null}))}},{key:"getOwningSystemUrl",value:function(){return Object(p.t)("")}},{key:"getIdentityUser",value:function(){return Object(p.t)("")}}],[{key:"_cloneAttr",value:function(e){var t={};for(var r in e)t[r]=e[r];return t}},{key:"create",value:function(e,t){var n=e.layerDefinition.objectIdField,a=e.layerDefinition.typeIdField?e.layerDefinition.typeIdField:"",i=[];if(e.layerDefinition.types){var o,u=g(e.layerDefinition.types);try{for(u.s();!(o=u.n()).done;){var s=o.value;i.push(v.a.fromJSON(s))}}catch(F){u.e(F)}finally{u.f()}}var l=e.layerDefinition.geometryType;void 0===l&&(l=e.featureSet.geometryType||"");var c=e.featureSet.features,f=t.toJSON();if(""===n||void 0===n){var h,p=!1,m=g(e.layerDefinition.fields);try{for(m.s();!(h=m.n()).done;){var O=h.value;if("oid"===O.type||"esriFieldTypeOID"===O.type){n=O.name,p=!0;break}}}catch(F){m.e(F)}finally{m.f()}if(!1===p){for(var w="FID",j=!0,x=0;j;){var k,I=!0,_=g(e.layerDefinition.fields);try{for(_.s();!(k=_.n()).done;){if(k.value.name===w){I=!1;break}}}catch(F){_.e(F)}finally{_.f()}!0===I?j=!1:w="FID"+(++x).toString()}e.layerDefinition.fields.push({type:"esriFieldTypeOID",name:w,alias:w});for(var S=[],T=0;T<c.length;T++)S.push({geometry:e.featureSet.features[T].geometry,attributes:e.featureSet.features[T].attributes?this._cloneAttr(e.featureSet.features[T].attributes):{}}),S[T].attributes[w]=T;c=S,n=w}}var A,M=[],C=g(e.layerDefinition.fields);try{for(C.s();!(A=C.n()).done;){var P=A.value;P instanceof b.a?M.push(P):M.push(b.a.fromJSON(P))}}catch(F){C.e(F)}finally{C.f()}var D=l;switch(D){case"esriGeometryPoint":D="point";break;case"esriGeometryPolyline":D="polyline";break;case"esriGeometryPolygon":D="polygon";break;case"esriGeometryExtent":D="extent";break;case"esriGeometryMultipoint":D="multipoint"}var E,R=g(c);try{for(R.s();!(E=R.n()).done;){var N=E.value;N.geometry&&N.geometry instanceof d.a==0&&(N.geometry.type=D,void 0===N.geometry.spatialReference&&(N.geometry.spatialReference=f))}}catch(F){R.e(F)}finally{R.f()}var B={outFields:["*"],source:c,fields:M,types:i,typeIdField:a,objectIdField:n,spatialReference:t};return B.geometryType=D||"point",new r({layer:new y.default(B),spatialReference:t,isTable:null===D||""===D})}}]),r}(l.a);t.a=j},Ym0J:function(e,t,r){"use strict";r.d(t,"a",(function(){return _})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return k})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return j}));var n=r("eijD"),a=r("NthX"),i=r.n(a),o=r("sc0P"),u=r("g+AA"),s=r("hKEQ"),l=r("DGz/"),c=r("0fJP"),f=r("z9dv"),h=r("YHXj"),p=r("jOoW"),d=r("XKgO"),y=r("qCZy"),v=r("kJId");function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function O(e){var t=e.folders||[],r=t.slice(),n=new Map,a=new Map,i=new Map,o=new Map,u=new Map,s={esriGeometryPoint:a,esriGeometryPolyline:i,esriGeometryPolygon:o};(e.featureCollection&&e.featureCollection.layers||[]).forEach((function(e){var t=Object(c.a)(e);t.featureSet.features=[];var r=e.featureSet.geometryType;n.set(r,t);var u=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?x(a,u,e.featureSet.features):"esriGeometryPolyline"===r?x(i,u,e.featureSet.features):"esriGeometryPolygon"===r&&x(o,u,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((function(e){u.set(e.id,e)})),t.forEach((function(t){t.networkLinkIds.forEach((function(n){var a=function(e,t,r){var n=function(e,t){var r;return t.some((function(t){return t.id===e&&(r=t,!0)})),r}(e,r);return n&&(n.parentFolderId=t,n.networkLink=n),n}(n,t.id,e.networkLinks);a&&r.push(a)}))})),r.forEach((function(e){e.featureInfos&&(e.points=Object(c.a)(n.get("esriGeometryPoint")),e.polylines=Object(c.a)(n.get("esriGeometryPolyline")),e.polygons=Object(c.a)(n.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos.map((function(t){switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":var r=s[t.type].get(t.id);r&&e[g[t.type]].featureSet.features.push(r);break;case"GroundOverlay":var n=u.get(t.id);n&&e.mapImages.push(n)}})),e.fullExtent=_([e]))}));var l=_(r);return{folders:t,sublayers:r,extent:l}}function w(e,t,r,n){var a=u.b&&u.b.findCredential(e);e=Object(f.e)(e,{token:a&&a.token});var i=o.a.kmlServiceUrl;return Object(l.default)(i,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:n})}function j(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=[],i={},o=t.sublayers,u=t.folders.map((function(e){return e.id}));return o.forEach((function(t){var o=new e;if(r?o.read(t,r):o.read(t),n.length&&u.indexOf(o.id)>-1&&(o.visible=-1!==n.indexOf(o.id)),i[t.id]=o,null!=t.parentFolderId&&-1!==t.parentFolderId){var s=i[t.parentFolderId];s.sublayers||(s.sublayers=[]),s.sublayers.unshift(o)}else a.unshift(o)})),a}function x(e,t,r){r.forEach((function(r){e.set(r.attributes[t],r)}))}function k(e){return I.apply(this,arguments)}function I(){return(I=Object(n.a)(i.a.mark((function e(t){var r,n,a,o,u,l,c,f,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=v.default.fromJSON(t.featureSet).features,n=t.layerDefinition,a=Object(y.a)(n.drawingInfo.renderer),o=s.a.fromJSON(t.popupInfo),u=[],l=b(r),e.prev=2,l.s();case 4:if((c=l.n()).done){e.next=12;break}return f=c.value,e.next=8,a.getSymbolAsync(f);case 8:h=e.sent,f.symbol=h,f.popupTemplate=o,f.visible=!0,u.push(f);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),l.e(e.t0);case 17:return e.prev=17,l.f(),e.finish(17);case 20:return e.abrupt("return",u);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}function _(e){var t,r=Object(p.b)(),n=Object(p.b)(p.a),a=b(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.polygons&&i.polygons.featureSet&&i.polygons.featureSet.features){var o,u=b(i.polygons.featureSet.features);try{for(u.s();!(o=u.n()).done;){var s=o.value;Object(d.b)(r,s.geometry),Object(p.e)(n,r)}}catch(j){u.e(j)}finally{u.f()}}if(i.polylines&&i.polylines.featureSet&&i.polylines.featureSet.features){var l,c=b(i.polylines.featureSet.features);try{for(c.s();!(l=c.n()).done;){var f=l.value;Object(d.b)(r,f.geometry),Object(p.e)(n,r)}}catch(j){c.e(j)}finally{c.f()}}if(i.points&&i.points.featureSet&&i.points.featureSet.features){var y,v=b(i.points.featureSet.features);try{for(v.s();!(y=v.n()).done;){var m=y.value;Object(d.b)(r,m.geometry),Object(p.e)(n,r)}}catch(j){v.e(j)}finally{v.f()}}if(i.mapImages){var g,O=b(i.mapImages);try{for(O.s();!(g=O.n()).done;){var w=g.value;Object(d.b)(r,w.extent),Object(p.e)(n,r)}}catch(j){O.e(j)}finally{O.f()}}}}catch(j){a.e(j)}finally{a.f()}return Object(p.d)(n,p.a)?null:{xmin:n[0],ymin:n[1],zmin:n[2],xmax:n[3],ymax:n[4],zmax:n[5],spatialReference:h.a.WGS84}}},ZWCB:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("cWe4"),l=r("nBXx"),c=r("omx3"),f=r("IH5m");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var p=function(e){Object(i.a)(r,e);var t=h(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e))._topnum=0,a.declaredClass="esri.arcade.featureset.actions.Top",a._countedin=0,a._maxProcessing=100,a._topnum=e.topnum,a._parent=e.parentfeatureset,a}return Object(a.a)(r,[{key:"_getSet",value:function(e){var t=this;return null===this._wset?this._ensureLoaded().then((function(){return t._parent._getSet(e)})).then((function(e){return t._wset=new l.a(e._candidates.slice(0),e._known.slice(0),!1,t._clonePageDefinition(e.pagesDefinition)),t._setKnownLength(t._wset)>t._topnum&&(t._wset._known=t._wset._known.slice(0,t._topnum)),t._setKnownLength(t._wset)>=t._topnum&&(t._wset._candidates=[]),t._wset})):Object(f.t)(this._wset)}},{key:"_setKnownLength",value:function(e){return e._known.length>0&&"GETPAGES"===e._known[e._known.length-1]?e._known.length-1:e._known.length}},{key:"_isInFeatureSet",value:function(e){var t=this._parent._isInFeatureSet(e);if(t===c.b.NotInFeatureSet)return t;var r=this._idstates[e];return r===c.b.InFeatureSet||r===c.b.NotInFeatureSet?r:t===c.b.InFeatureSet&&void 0===r?this._countedin<this._topnum?(this._idstates[e]=c.b.InFeatureSet,this._countedin++,c.b.InFeatureSet):(this._idstates[e]=c.b.NotInFeatureSet,c.b.NotInFeatureSet):c.b.Unknown}},{key:"_expandPagedSet",value:function(e,t,r,n,a){var i=this;if(null===this._parent)return Object(f.s)(new Error("Parent Paging not implemented"));if(t>this._topnum&&(t=this._topnum),this._countedin>=this._topnum&&e.pagesDefinition.internal.set.length<=e.pagesDefinition.resultOffset){var o=e._known.length;return o>0&&"GETPAGES"===e._known[o-1]&&(e._known.length=o-1),(o=e._candidates.length)>0&&"GETPAGES"===e._candidates[o-1]&&(e._candidates.length=o-1),Object(f.t)("success")}return this._parent._expandPagedSet(e,t,r,n,a).then((function(t){return i._setKnownLength(e)>i._topnum&&(e._known.length=i._topnum),i._setKnownLength(e)>=i._topnum&&(e._candidates.length=0),t}))}},{key:"_getFeatures",value:function(e,t,r,n){var a=this,i=[],o=this._maxQueryRate();if(!0===this._checkIfNeedToExpandKnownPage(e,o))return this._expandPagedSet(e,o,0,0,n).then((function(){return a._getFeatures(e,t,r,n)}));-1!==t&&void 0===this._featureCache[t]&&i.push(t);for(var u=0,s=e._lastFetchedIndex;s<e._known.length&&(++u<=r&&(e._lastFetchedIndex+=1),!(void 0===this._featureCache[e._known[s]]&&(e._known[s]!==t&&i.push(e._known[s]),i.length>o)));s++);if(0===i.length)return Object(f.t)("success");var c=new l.a([],i,!1,null),h=Math.min(i.length,r);return this._parent._getFeatures(c,-1,h,n).then((function(){for(var e=0;e<h;e++){var t=a._parent._featureFromCache(i[e]);void 0!==t&&(a._featureCache[i[e]]=t)}return"success"}))}},{key:"_getFilteredSet",value:function(e,t,r,n,a){var i=this;return this._ensureLoaded().then((function(){return i._getSet(a)})).then((function(e){return new l.a(e._candidates.slice(0).concat(e._known.slice(0)),[],!1,i._clonePageDefinition(e.pagesDefinition))}))}},{key:"_refineKnowns",value:function(e,t){for(var r=0,n=null,a=[],i=0;i<e._candidates.length;i++){var o=this._isInFeatureSet(e._candidates[i]);if(o===c.b.InFeatureSet){if(e._known.push(e._candidates[i]),r+=1,null===n?n={start:i,end:i}:n.end===i-1?n.end=i:(a.push(n),n={start:i,end:i}),e._known.length>=this._topnum)break}else if(o===c.b.NotInFeatureSet)null===n?n={start:i,end:i}:n.end===i-1?n.end=i:(a.push(n),n={start:i,end:i}),r+=1;else if(o===c.b.Unknown)break;if(r>=t)break}null!==n&&a.push(n);for(var u=a.length-1;u>=0;u--)e._candidates.splice(a[u].start,a[u].end-a[u].start+1);this._setKnownLength(e)>this._topnum&&(e._known=e._known.slice(0,this._topnum)),this._setKnownLength(e)>=this._topnum&&(e._candidates=[])}},{key:"_stat",value:function(){return Object(f.t)({calculated:!1})}},{key:"_canDoAggregates",value:function(){return Object(f.t)(!1)}}],[{key:"registerAction",value:function(){s.a._featuresetFunctions.top=function(e){return new r({parentfeatureset:this,topnum:e})}}}]),r}(s.a);t.a=p},Zw7s:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=function(){function e(t,r,a){Object(n.a)(this,e),this.pixelBlock=t,this.extent=r,this.originalPixelBlock=a}return Object(a.a)(e,[{key:"width",get:function(){return this.pixelBlock?this.pixelBlock.width:0}},{key:"height",get:function(){return this.pixelBlock?this.pixelBlock.height:0}},{key:"render",value:function(e){var t=this.pixelBlock;if(t){var r=this.filter({pixelBlock:t}),n=r.pixelBlock.getAsRGBA(),a=e.createImageData(r.pixelBlock.width,r.pixelBlock.height);a.data.set(n),e.putImageData(a,0,0)}}},{key:"getRenderedRasterPixels",value:function(){var e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}]),e}();t.a=i},a72Q:function(e,t,r){var n=r("jmUq");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)}}return function(){return e.apply(t,arguments)}}},"aeN+":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=new Float32Array(1);function a(e){return i(Math.max(-o,Math.min(e,o)))}function i(e){return n[0]=e,n[0]}var o=i(34028234663852886e22),u={};u.defaultNoDataValue=a(-1/0),u.decode=function(e,t){var r=(t=t||{}).encodedMaskData||null===t.encodedMaskData,n=f(e,t.inputOffset||0,r),i=null!=t.noDataValue?a(t.noDataValue):u.defaultNoDataValue,o=s(n,t.pixelType||Float32Array,t.encodedMaskData,i,t.returnMask),h={width:n.width,height:n.height,pixelData:o.resultPixels,minValue:n.pixels.minValue,maxValue:n.pixels.maxValue,noDataValue:i};return o.resultMask&&(h.maskData=o.resultMask),t.returnEncodedMask&&n.mask&&(h.encodedMaskData=n.mask.bitset?n.mask.bitset:null),t.returnFileInfo&&(h.fileInfo=l(n,i),t.computeUsedBitDepths&&(h.fileInfo.bitDepths=c(n))),h};var s=function(e,t,r,n,a){var i,o,u=0,s=e.pixels.numBlocksX,l=e.pixels.numBlocksY,c=Math.floor(e.width/s),f=Math.floor(e.height/l),p=2*e.maxZError;r=r||(e.mask?e.mask.bitset:null),i=new t(e.width*e.height),a&&r&&(o=new Uint8Array(e.width*e.height));for(var d,y,v=new Float32Array(c*f),b=0;b<=l;b++){var m=b!==l?f:e.height%l;if(0!==m)for(var g=0;g<=s;g++){var O=g!==s?c:e.width%s;if(0!==O){var w,j,x,k,I=b*e.width*f+g*c,_=e.width-O,S=e.pixels.blocks[u];if(S.encoding<2?(0===S.encoding?w=S.rawData:(h(S.stuffedData,S.bitsPerPixel,S.numValidPixels,S.offset,p,v,e.pixels.maxValue),w=v),j=0):x=2===S.encoding?0:S.offset,r)for(y=0;y<m;y++){for(7&I&&(k=r[I>>3],k<<=7&I),d=0;d<O;d++)7&I||(k=r[I>>3]),128&k?(o&&(o[I]=1),i[I++]=S.encoding<2?w[j++]:x):(o&&(o[I]=0),i[I++]=n),k<<=1;I+=_}else if(S.encoding<2)for(y=0;y<m;y++){for(d=0;d<O;d++)i[I++]=w[j++];I+=_}else for(y=0;y<m;y++)if(i.fill)i.fill(x,I,I+O),I+=O+_;else{for(d=0;d<O;d++)i[I++]=x;I+=_}if(1===S.encoding&&j!==S.numValidPixels)throw"Block and Mask do not match";u++}}}return{resultPixels:i,resultMask:o}},l=function(e,t){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:t}}},c=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var a=e.pixels.blocks[n];0===a.encoding?r.float32=!0:1===a.encoding?r[a.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},f=function(e,t,r){var n={},a=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,a),"CntZImage"!=n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var i=new DataView(e,t,24);if(n.fileVersion=i.getInt32(0,!0),n.imageType=i.getInt32(4,!0),n.height=i.getUint32(8,!0),n.width=i.getUint32(12,!0),n.maxZError=i.getFloat64(16,!0),t+=24,!r)if(i=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=i.getUint32(0,!0),n.mask.numBlocksX=i.getUint32(4,!0),n.mask.numBytes=i.getUint32(8,!0),n.mask.maxValue=i.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var o=new Uint8Array(Math.ceil(n.width*n.height/8)),u=(i=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),s=2,l=0;do{if(u>0)for(;u--;)o[l++]=i.getUint8(s++);else{var c=i.getUint8(s++);for(u=-u;u--;)o[l++]=c}u=i.getInt16(s,!0),s+=2}while(s<n.mask.numBytes);if(-32768!==u||l<o.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=o,t+=n.mask.numBytes}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(o=new Uint8Array(Math.ceil(n.width*n.height/8)),n.mask.bitset=o);i=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=i.getUint32(0,!0),n.pixels.numBlocksX=i.getUint32(4,!0),n.pixels.numBytes=i.getUint32(8,!0),n.pixels.maxValue=i.getFloat32(12,!0),t+=16;var f=n.pixels.numBlocksX,h=n.pixels.numBlocksY,p=f+(n.width%f>0?1:0),d=h+(n.height%h>0?1:0);n.pixels.blocks=new Array(p*d);for(var y=1e9,v=0,b=0;b<d;b++)for(var m=0;m<p;m++){var g=0,O=e.byteLength-t;i=new DataView(e,t,Math.min(10,O));var w={};n.pixels.blocks[v++]=w;var j=i.getUint8(0);if(g++,w.encoding=63&j,w.encoding>3)throw"Invalid block encoding ("+w.encoding+")";if(2!==w.encoding){if(0!==j&&2!==j){if(j>>=6,w.offsetType=j,2===j)w.offset=i.getInt8(1),g++;else if(1===j)w.offset=i.getInt16(1,!0),g+=2;else{if(0!==j)throw"Invalid block offset type";w.offset=i.getFloat32(1,!0),g+=4}if(y=Math.min(w.offset,y),1===w.encoding)if(j=i.getUint8(g),g++,w.bitsPerPixel=63&j,j>>=6,w.numValidPixelsType=j,2===j)w.numValidPixels=i.getUint8(g),g++;else if(1===j)w.numValidPixels=i.getUint16(g,!0),g+=2;else{if(0!==j)throw"Invalid valid pixel count type";w.numValidPixels=i.getUint32(g,!0),g+=4}}var x;if(t+=g,3!=w.encoding)if(0===w.encoding){var k=(n.pixels.numBytes-1)/4;if(k!==Math.floor(k))throw"uncompressed block has invalid length";x=new ArrayBuffer(4*k),new Uint8Array(x).set(new Uint8Array(e,t,4*k));for(var I=new Float32Array(x),_=0;_<I.length;_++)y=Math.min(y,I[_]);w.rawData=I,t+=4*k}else if(1===w.encoding){var S=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),T=Math.ceil(S/4);x=new ArrayBuffer(4*T),new Uint8Array(x).set(new Uint8Array(e,t,S)),w.stuffedData=new Uint32Array(x),t+=S}}else t++,y=Math.min(y,0)}return n.pixels.minValue=y,n.eofOffset=t,n},h=function(e,t,r,n,a,i,o){var u,s,l,c=(1<<t)-1,f=0,h=0,p=Math.ceil((o-n)/a),d=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*d,u=0;u<r;u++){if(0===h&&(l=e[f++],h=32),h>=t)s=l>>>h-t&c,h-=t;else{var y=t-h;s=(l&c)<<y&c,s+=(l=e[f++])>>>(h=32-y)}i[u]=s<p?n+s*a:o}return i},p=u.decode},ahxf:function(e,t,r){"use strict";function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function a(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function i(e,t){return new Float64Array(e,t,16)}r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return n}));var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze({__proto__:null,create:n,clone:a,fromValues:function(e,t,r,n,a,i,o,u,s,l,c,f,h,p,d,y){return[e,t,r,n,a,i,o,u,s,l,c,f,h,p,d,y]},createView:i,IDENTITY:o})},b8W3:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("IH5m"),o=function(){function e(){Object(n.a)(this,e),this.declaredRootClass="esri.arcade.featureSetCollection",this._layerById={},this._layerByName={}}return Object(a.a)(e,[{key:"add",value:function(e,t,r){this._layerById[t]=r,this._layerByName[e]=r}},{key:"featureSetByName",value:function(e){return void 0===this._layerByName[e]?this.resolvePromise(null):this.resolvePromise(this._layerByName[e])}},{key:"featureSetById",value:function(e){return void 0===this._layerById[e]?this.resolvePromise(null):this.resolvePromise(this._layerById[e])}},{key:"castToText",value:function(){return"object, FeatureSetCollection"}},{key:"resolvePromise",value:function(e){return Object(i.t)(e)}}]),e}();t.a=o},"cW/n":function(e,t,r){"use strict";r.r(t),r.d(t,"hydratedAdapter",(function(){return s}));var n=r("nd5+"),a=r("XeQg"),i=r("OTJA"),o=r("cFtQ"),u=r("AQ8/"),s={convertToGEGeometry:function(e,t){if(null==t)return null;var r="cache"in t?t.cache._geVersion:void 0;return null==r&&(r=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=r)),r},exportPoint:function(e,t,r){var n=e.hasZ(t),a=e.hasM(t),o=new i.a({x:e.getPointX(t),y:e.getPointY(t),spatialReference:r});return n&&(o.z=e.getPointZ(t)),a&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o},exportPolygon:function(e,t,r){var n=new o.a({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return n.cache._geVersion=t,n},exportPolyline:function(e,t,r){var n=new u.a({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return n.cache._geVersion=t,n},exportMultipoint:function(e,t,r){var n=new a.a({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:r});return n.cache._geVersion=t,n},exportExtent:function(e,t,r){var a=e.hasZ(t),i=e.hasM(t),o=new n.a({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:r});if(a){var u=e.getZExtent(t);o.zmin=u.vmin,o.zmax=u.vmax}if(i){var s=e.getMExtent(t);o.mmin=s.vmin,o.mmax=s.vmax}return o.cache._geVersion=t,o}}},cWe4:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("IH5m"),o=function(){function e(t,r){Object(n.a)(this,e),this._lastId=-1,this._progress=r,this._parent=t}return Object(a.a)(e,[{key:"reset",value:function(){this._lastId=-1}},{key:"nextBatch",value:function(e){var t=this;if(null!==this._parent._mainSetInUse)return this._parent._mainSetInUse.then((function(r){return t.nextBatch(e)}),(function(r){return t.nextBatch(e)}));var r={returnpromise:null,hasset:!1},n=[];return r.returnpromise=Object(i.c)((function(a,i){t._parent._getSet(t._progress).then((function(o){var u=o._known.length-1;if("GETPAGES"===o._known[o._known.length-1]&&(u-=1),t._lastId+e>u&&o._known.length>0&&"GETPAGES"===o._known[o._known.length-1])t._parent._expandPagedSet(o,t._parent._maxQueryRate(),0,0,t._progress).then((function(n){r.hasset=!0,t._parent._mainSetInUse=null,t.nextBatch(e).then(a,i)}),(function(e){r.hasset=!0,t._parent._mainSetInUse=null,i(e)}));else{if(u>=t._lastId+e||0===o._candidates.length){for(var s=0;s<e;s++){var l=s+t._lastId+1;if(l>=o._known.length)break;n[s]=o._known[l]}return t._lastId+=n.length,0===n.length&&(r.hasset=!0,t._parent._mainSetInUse=null,a([])),void t._parent._getFeatureBatch(n,t._progress).then((function(e){r.hasset=!0,t._parent._mainSetInUse=null,a(e)}),(function(e){r.hasset=!0,t._parent._mainSetInUse=null,i(e)}))}t._parent._refineSetBlock(o,t._parent._maxProcessingRate(),t._progress).then((function(){r.hasset=!0,t._parent._mainSetInUse=null,t.nextBatch(e).then(a,i)}),(function(e){r.hasset=!0,t._parent._mainSetInUse=null,i(e)}))}}),(function(e){r.hasset=!0,t._parent._mainSetInUse=null,i(e)}))})),!1===r.hasset&&(this._parent._mainSetInUse=r.returnpromise,r.hasset=!0),r.returnpromise}},{key:"next",value:function(){var e=this;if(null!==this._parent._mainSetInUse)return this._parent._mainSetInUse.then((function(t){return e.next()}),(function(t){return e.next()}));var t={returnpromise:null,hasset:!1};return t.returnpromise=Object(i.c)((function(r,n){e._parent._getSet(e._progress).then((function(a){e._lastId<a._known.length-1?"GETPAGES"===a._known[e._lastId+1]?e._parent._expandPagedSet(a,e._parent._maxQueryRate(),0,0,e._progress).then((function(r){return t.hasset=!0,e._parent._mainSetInUse=null,e.next()})).then(r,n):(e._lastId+=1,e._parent._getFeature(a,a._known[e._lastId],e._progress).then((function(n){t.hasset=!0,e._parent._mainSetInUse=null,r(n)}),(function(r){t.hasset=!0,e._parent._mainSetInUse=null,n(r)}))):a._candidates.length>0?e._parent._refineSetBlock(a,e._parent._maxProcessingRate(),e._progress).then((function(){t.hasset=!0,e._parent._mainSetInUse=null,e.next().then(r,n)}),(function(r){t.hasset=!0,e._parent._mainSetInUse=null,n(r)})):(t.hasset=!0,e._parent._mainSetInUse=null,r(null))}),(function(r){t.hasset=!0,e._parent._mainSetInUse=null,n(r)}))})),!1===t.hasset&&(this._parent._mainSetInUse=t.returnpromise,t.hasset=!0),t.returnpromise}},{key:"count",value:function(){var e=this;return-1!==this._parent._totalCount?Object(i.t)(this._parent._totalCount):this._parent._getSet(this._progress).then((function(t){return e._refineAllSets(t)})).then((function(t){return e._parent._totalCount=t._known.length,Object(i.t)(e._parent._totalCount)}))}},{key:"_refineAllSets",value:function(e){var t=this;return e._known.length>0&&"GETPAGES"===e._known[e._known.length-1]?this._parent._expandPagedSet(e,this._parent._maxQueryRate(),0,1,this._progress).then((function(r){return t._refineAllSets(e)})).then((function(e){return Object(i.t)(e)})):e._candidates.length>0?"GETPAGES"===e._known[e._candidates.length-1]?this._parent._expandPagedSet(e,this._parent._maxQueryRate(),0,2,this._progress).then((function(r){return t._refineAllSets(e)})).then((function(e){return Object(i.t)(e)})):this._parent._refineSetBlock(e,this._parent._maxProcessingRate(),this._progress).then((function(e){return e._candidates.length>0?t._refineAllSets(e):Object(i.t)(e)})):Object(i.t)(e)}}]),e}(),u=r("nBXx"),s=r("omx3"),l=r("JUpu"),c=r("K+fz"),f=r("xnqp"),h=r("Hj62"),p=r("YHXj"),d=r("nyn0");function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(){function e(t){Object(n.a)(this,e),this.recentlyUsedQueries=null,this.featureSetQueryInterceptor=null,this._idstates=[],this._parent=null,this._wset=null,this._mainSetInUse=null,this._maxProcessing=200,this._maxQuery=500,this._totalCount=-1,this._databaseType=s.a.NotEvaluated,this._databaseTypeProbed=null,this.declaredRootClass="esri.arcade.featureset.support.FeatureSet",this._featureCache=[],this.types=null,this.fields=null,this.geometryType="",this.objectIdField="",this.globalIdField="",this.spatialReference=null,this.hasM=!1,this.hasZ=!1,this._transparent=!1,this.loaded=!1,this._loadPromise=null,this._fieldsIndex=null,t&&t.lrucache&&(this.recentlyUsedQueries=t.lrucache),t&&t.interceptor&&(this.featureSetQueryInterceptor=t.interceptor)}return Object(a.a)(e,[{key:"optimisePagingFeatureQueries",value:function(e){this._parent&&this._parent.optimisePagingFeatureQueries(e)}},{key:"_hasMemorySource",value:function(){return!0}},{key:"prop",value:function(e,t){return void 0===t?this[e]:(void 0!==this[e]&&(this[e]=t),this)}},{key:"end",value:function(){return null!==this._parent&&!0===this._parent._transparent?this._parent.end():this._parent}},{key:"_ensureLoaded",value:function(){return this.load()}},{key:"load",value:function(){var e=this;return null===this._loadPromise&&(this._loadPromise=Object(i.c)((function(t,r){if(!0===e._parent.loaded)return e._initialiseFeatureSet(),void t(e);e._parent.load().then((function(){try{e._initialiseFeatureSet(),t(e)}catch(n){r(n)}}),r)}))),this._loadPromise}},{key:"_initialiseFeatureSet",value:function(){null!==this._parent?(this.fields=this._parent.fields.slice(0),this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.fields=[],this.typeIdField="",this.objectIdField="",this.globalIdField="",this.spatialReference=new p.a({wkid:4326}),this.geometryType=s.m.point)}},{key:"getField",value:function(e,t){var r;return(t=t||this.fields)&&(e=e.toLowerCase(),t.some((function(t){return t&&t.name.toLowerCase()===e&&(r=t),!!r}))),r}},{key:"getFieldsIndex",value:function(){return null===this._fieldsIndex&&(this._fieldsIndex=new d.a(this.fields)),this._fieldsIndex}},{key:"_maxProcessingRate",value:function(){return null!==this._parent?Math.min(this._maxProcessing,this._parent._maxProcessingRate()):Math.min(this._maxProcessing,this._maxQueryRate())}},{key:"_maxQueryRate",value:function(){return null!==this._parent?Math.max(this._maxQuery,this._parent._maxQueryRate()):this._maxQuery}},{key:"_checkCancelled",value:function(e){if(null!==e&&e.aborted)throw new Error("Operation has been cancelled.")}},{key:"nativeCapabilities",value:function(){return this._parent.nativeCapabilities()}},{key:"_canDoAggregates",value:function(e,t,r,n,a){return null===this._parent?Object(i.t)(!1):this._parent._canDoAggregates(e,t,r,n,a)}},{key:"_getAggregatePagesDataSourceDefinition",value:function(e,t,r,n,a,o,u){return null===this._parent?Object(i.s)(new Error("Should never be called")):this._parent._getAggregatePagesDataSourceDefinition(e,t,r,n,a,o,u)}},{key:"_getAgregagtePhysicalPage",value:function(e,t,r){return null===this._parent?Object(i.s)(new Error("Should never be called")):this._parent._getAgregagtePhysicalPage(e,t,r)}},{key:"databaseType",value:function(){var e=this;if(this._databaseType===s.a.NotEvaluated){if(null!==l.a.applicationCache){var t=l.a.applicationCache.getDatabaseType(this._cacheableFeatureSetSourceKey());if(null!==t)return t}if(null!==this._databaseTypeProbed)return this._databaseTypeProbed;var r=[{thetype:s.a.SqlServer,testwhere:"(CAST( '2015-01-01' as DATETIME) = CAST( '2015-01-01' as DATETIME)) AND OBJECTID<0"},{thetype:s.a.Oracle,testwhere:"(TO_DATE('2003-11-18','YYYY-MM-DD') = TO_DATE('2003-11-18','YYYY-MM-DD')) AND OBJECTID<0"},{thetype:s.a.StandardisedNoInterval,testwhere:"(date '2015-01-01 10:10:10' = date '2015-01-01 10:10:10') AND OBJECTID<0"}],n=Object(i.c)((function(t,n){e._getDatabaseTypeImpl(r,0).then((function(r){e._databaseType=r,t(e._databaseType)}),(function(e){n(e)}))}));return null!==l.a.applicationCache&&(l.a.applicationCache.setDatabaseType(this._cacheableFeatureSetSourceKey(),n),n=n.catch((function(t){throw l.a.applicationCache.clearDatabaseType(e._cacheableFeatureSetSourceKey()),t}))),this._databaseTypeProbed=n,this._databaseTypeProbed}return Object(i.t)(this._databaseType)}},{key:"_cacheableFeatureSetSourceKey",value:function(){return"MUSTBESET"}},{key:"_getDatabaseTypeImpl",value:function(e,t){var r=this;return t>=e.length?Object(i.t)(s.a.StandardisedNoInterval):this._runDatabaseProbe(e[t].testwhere).then((function(n){return!0===n?e[t].thetype:r._getDatabaseTypeImpl(e,t+1)}))}},{key:"_runDatabaseProbe",value:function(e){return null!==this._parent?this._parent._runDatabaseProbe(e):Object(i.s)(new Error("Not Implemented"))}},{key:"isTable",value:function(){return this._parent.isTable()}},{key:"_featureFromCache",value:function(e){if(void 0!==this._featureCache[e])return this._featureCache[e]}},{key:"_isInFeatureSet",value:function(e){return s.b.Unknown}},{key:"_getSet",value:function(e){throw new Error("Not implemented in abstract class")}},{key:"_getFeature",value:function(e,t,r){var n=this;try{return this._checkCancelled(r),void 0!==this._featureFromCache(t)?Object(i.t)(this._featureFromCache(t)):this._getFeatures(e,t,this._maxProcessingRate(),r).then((function(){return n._checkCancelled(r),void 0!==n._featureFromCache(t)?n._featureFromCache(t):Object(i.s)(new Error("Feature Not Found"))}))}catch(a){return Object(i.s)(a)}}},{key:"_getFeatureBatch",value:function(e,t){var r=this;try{this._checkCancelled(t);var n=new u.a([],e,!1,null),a=[];return this._getFeatures(n,-1,e.length,t).then((function(){r._checkCancelled(t);var n,i=y(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;void 0!==r._featureFromCache(o)&&a.push(r._featureFromCache(o))}}catch(u){i.e(u)}finally{i.f()}return a}))}catch(o){return Object(i.s)(o)}}},{key:"_getFeatures",value:function(e,t,r,n){return Object(i.t)("success")}},{key:"_getFilteredSet",value:function(e,t,r,n,a){throw new Error("Not implemented in abstract class")}},{key:"_refineSetBlock",value:function(e,t,r){var n=this;try{if(!0===this._checkIfNeedToExpandCandidatePage(e,this._maxQueryRate()))return this._expandPagedSet(e,this._maxQueryRate(),0,0,r).then((function(){return n._refineSetBlock(e,t,r)}));this._checkCancelled(r);var a=e._candidates.length;this._refineKnowns(e,t);var o=a-e._candidates.length;return 0===e._candidates.length||o>=t?Object(i.t)(e):this._refineIfParentKnown(e,t-o,r).then((function(){if(n._checkCancelled(r),n._refineKnowns(e,t-o),(o=a-e._candidates.length)<t&&e._candidates.length>0){var i=t-o,u=n._prepareFetchAndRefineSet(e._candidates);return n._fetchAndRefineFeatures(u,u.length>i?i:e._candidates.length,r).then((function(){return n._checkCancelled(r),n._refineKnowns(e,t-o),e}))}return e}))}catch(u){return Object(i.s)(u)}}},{key:"_fetchAndRefineFeatures",value:function(e,t,r){return null}},{key:"_prepareFetchAndRefineSet",value:function(e){for(var t=[],r=0;r<e.length;r++)this._isPhysicalFeature(e[r])&&t.push(e[r]);return t}},{key:"_isPhysicalFeature",value:function(e){return null===this._parent||this._parent._isPhysicalFeature(e)}},{key:"_refineKnowns",value:function(e,t){var r=0,n=null,a=[];t=this._maxQueryRate();for(var i=0;i<e._candidates.length&&"GETPAGES"!==e._candidates[i];i++){var o=!1,u=this._candidateIdTransform(e._candidates[i]);u!==e._candidates[i]&&(o=!0);var l=this._isInFeatureSet(u);if(l===s.b.InFeatureSet)!0===o?e._known.indexOf(u)<0&&(e._known.push(u),r+=1):(e._known.push(e._candidates[i]),r+=1),null===n?n={start:i,end:i}:n.end===i-1?n.end=i:(a.push(n),n={start:i,end:i});else if(l===s.b.NotInFeatureSet)null===n?n={start:i,end:i}:n.end===i-1?n.end=i:(a.push(n),n={start:i,end:i}),r+=1;else if(l===s.b.Unknown&&(r+=1,!0===e._ordered))break;if(r>=t)break}null!==n&&a.push(n);for(var c=a.length-1;c>=0;c--)e._candidates.splice(a[c].start,a[c].end-a[c].start+1)}},{key:"_refineIfParentKnown",value:function(e,t,r){var n=new u.a([],[],e._ordered,null);return n._candidates=e._candidates.slice(0),this._parent._refineSetBlock(n,t,r)}},{key:"_candidateIdTransform",value:function(e){return this._parent._candidateIdTransform(e)}},{key:"_checkIfNeedToExpandKnownPage",value:function(e,t){if(null===e.pagesDefinition)return!1;for(var r=0,n=e._lastFetchedIndex;n<e._known.length;n++){if("GETPAGES"===e._known[n])return!0;if(void 0===this._featureCache[e._known[n]]&&(r+=1)>=t)break}return!1}},{key:"_checkIfNeedToExpandCandidatePage",value:function(e,t){if(null===e.pagesDefinition)return!1;for(var r=0,n=0;n<e._candidates.length;n++){if("GETPAGES"===e._candidates[n])return!0;if((r+=1)>=t)break}return!1}},{key:"_expandPagedSet",value:function(e,t,r,n,a){return null===this._parent?Object(i.s)(new Error("Parent Paging not implemented")):this._parent._expandPagedSet(e,t,r,n,a)}},{key:"_expandPagedSetFeatureSet",value:function(e,t,r,n,a){var o=this;return e._known.length>0&&"GETPAGES"===e._known[e._known.length-1]&&(n=1),0===n&&e._candidates.length>0&&"GETPAGES"===e._candidates[e._candidates.length-1]&&(n=2),0===n?Object(i.t)("finished"):this._getPage(e,n,a).then((function(n){return r+n<t?o._expandPagedSet(e,t,r+n,0,a):"success"}))}},{key:"_getPage",value:function(e,t,r){var n=this,a=1===t?e._known:e._candidates;if(e.pagesDefinition.internal.set.length>e.pagesDefinition.resultOffset||!0===e.pagesDefinition.internal.fullyResolved){a.length=a.length-1;for(var o=0,u=0;u<e.pagesDefinition.resultRecordCount&&!(e.pagesDefinition.resultOffset+u>=e.pagesDefinition.internal.set.length);u++)a[a.length]=e.pagesDefinition.internal.set[e.pagesDefinition.resultOffset+u],o++;e.pagesDefinition.resultOffset+=o;var s=!1;return!0===e.pagesDefinition.internal.fullyResolved&&e.pagesDefinition.internal.set.length<=e.pagesDefinition.resultOffset&&(s=!0),!1===s&&a.push("GETPAGES"),Object(i.t)(o)}return this._getPhysicalPage(e,t,r).then((function(){return n._getPage(e,t,r)}))}},{key:"_getPhysicalPage",value:function(e,t,r){return null}},{key:"_clonePageDefinition",value:function(e){return null===this._parent?null:this._parent._clonePageDefinition(e)}},{key:"_first",value:function(e){return this.iterator(e).next()}},{key:"first",value:function(e){return this._first(e)}},{key:"calculateStatistic",value:function(e,t,r,n){var a=this;return this._ensureLoaded().then((function(){return a._stat(e,t,"",null,null,r,n).then((function(i){return!1===i.calculated?a._manualStat(e,t,r,n).then((function(e){return e.result})):i.result}))}))}},{key:"_manualStat",value:function(e,t,r,n){switch(e.toLowerCase()){case"count":return Object(c.b)(this,n).then((function(e){return{calculated:!0,result:e}}));case"distinct":return Object(c.d)(this,t,r).then((function(e){return{calculated:!0,result:e}}));case"avg":case"mean":return Object(c.f)(this,t,n).then((function(e){return{calculated:!0,result:e}}));case"stdev":return Object(c.h)(this,t,n).then((function(e){return{calculated:!0,result:e}}));case"variance":return Object(c.j)(this,t,n).then((function(e){return{calculated:!0,result:e}}));case"sum":return Object(c.i)(this,t,n).then((function(e){return{calculated:!0,result:e}}));case"min":return Object(c.g)(this,t,n).then((function(e){return{calculated:!0,result:e}}));case"max":return Object(c.e)(this,t,n).then((function(e){return{calculated:!0,result:e}}));default:return Object(i.t)({calculated:!0,result:0})}}},{key:"_stat",value:function(e,t,r,n,a,i,o){var u=this;return this._parent._stat(e,t,r,n,a,i,o).then((function(s){return!1===s.calculated?null===a&&""===r&&null===n?u._manualStat(e,t,i,o):{calculated:!1}:s}))}},{key:"_unionAllGeomSelf",value:function(e){var t=this,r=this.iterator(this._defaultTracker(e)),n=[];return Object(i.c)((function(e,a){t._unionShapeInBatches(n,r,e,a)}))}},{key:"_unionAllGeom",value:function(e){var t=this;return Object(i.c)((function(r,n){var a=t.iterator(t._defaultTracker(e));t._unionShapeInBatches([],a,r,n)}))}},{key:"_unionShapeInBatches",value:function(e,t,r,n){var a=this;t.next().then((function(i){try{null!==i&&null!==i.geometry&&e.push(i.geometry),e.length>30||null===i&&e.length>1?Object(h.B)(e).then((function(o){try{null===i?r(o):(e=[o],a._unionShapeInBatches(e,t,r,n))}catch(u){n(u)}}),n):null===i?1===e.length?r(e[0]):r(null):a._unionShapeInBatches(e,t,r,n)}catch(o){n(o)}}),n)}},{key:"iterator",value:function(e){return new o(this,e)}},{key:"intersection",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e._featuresetFunctions.intersection.bind(this)(t,r)}},{key:"difference",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e._featuresetFunctions.difference.bind(this)(t,r,n)}},{key:"symmetricDifference",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e._featuresetFunctions.symmetricDifference.bind(this)(t,r,n)}},{key:"morphShape",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return e._featuresetFunctions.morphShape.bind(this)(t,r,n,a)}},{key:"morphShapeAndAttributes",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown";return e._featuresetFunctions.morphShapeAndAttributes.bind(this)(t,r,n)}},{key:"union",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e._featuresetFunctions.union.bind(this)(t,r)}},{key:"intersects",value:function(t){return e._featuresetFunctions.intersects.bind(this)(t)}},{key:"envelopeIntersects",value:function(t){return e._featuresetFunctions.envelopeIntersects.bind(this)(t)}},{key:"contains",value:function(t){return e._featuresetFunctions.contains.bind(this)(t)}},{key:"overlaps",value:function(t){return e._featuresetFunctions.overlaps.bind(this)(t)}},{key:"relate",value:function(t,r){return e._featuresetFunctions.relate.bind(this)(t,r)}},{key:"within",value:function(t){return e._featuresetFunctions.within.bind(this)(t)}},{key:"touches",value:function(t){return e._featuresetFunctions.touches.bind(this)(t)}},{key:"top",value:function(t){return e._featuresetFunctions.top.bind(this)(t)}},{key:"crosses",value:function(t){return e._featuresetFunctions.crosses.bind(this)(t)}},{key:"buffer",value:function(t,r,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e._featuresetFunctions.buffer.bind(this)(t,r,n,a)}},{key:"filter",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e._featuresetFunctions.filter.bind(this)(t,r)}},{key:"orderBy",value:function(t){return e._featuresetFunctions.orderBy.bind(this)(t)}},{key:"dissolve",value:function(t,r){return e._featuresetFunctions.dissolve.bind(this)(t,r)}},{key:"groupby",value:function(t,r){return e._featuresetFunctions.groupby.bind(this)(t,r)}},{key:"reduce",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return Object(i.c)((function(a,i){t._reduceImpl(t.iterator(t._defaultTracker(n)),e,r,0,a,i,0)}))}},{key:"_reduceImpl",value:function(e,t,r,n,a,o,u){var s=this;try{if(++u>1e3)return void setTimeout((function(){u=0,s._reduceImpl(e,t,r,n,a,o,u)}));e.next().then((function(l){try{if(null===l)a(r);else{var c=t(r,l,n,s);Object(i.p)(c)?c.then((function(r){s._reduceImpl(e,t,r,n+1,a,o,u)}),o):s._reduceImpl(e,t,c,n+1,a,o,u)}}catch(f){o(f)}}),o)}catch(l){o(l)}}},{key:"removeField",value:function(t){return e._featuresetFunctions.removeField.bind(this)(t)}},{key:"addField",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e._featuresetFunctions.addField.bind(this)(t,r,n)}},{key:"sumArea",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,n=Object(s.e)(e);return this.reduce((function(e,r){return null===r.geometry?0:t?Object(h.l)(r.geometry,n).then((function(t){return e+t})):Object(h.u)(r.geometry,n).then((function(t){return e+t}))}),0,r)}},{key:"sumLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,n=Object(s.d)(e);return this.reduce((function(e,r){return null===r.geometry?0:t?Object(h.o)(r.geometry,n).then((function(t){return e+t})):Object(h.v)(r.geometry,n).then((function(t){return e+t}))}),0,r)}},{key:"_substituteVars",value:function(e,t){if(null!==t){var r={};for(var n in t)r[n.toLowerCase()]=t[n];e.parameters=r}}},{key:"distinct",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return this.load().then((function(){var i=f.WhereClause.create(e,t.getFieldsIndex());return t._substituteVars(i,n),t.calculateStatistic("distinct",i,r,t._defaultTracker(a))}))}},{key:"min",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return this.load().then((function(){var a=f.WhereClause.create(e,t.getFieldsIndex());return t._substituteVars(a,r),t.calculateStatistic("min",a,-1,t._defaultTracker(n))}))}},{key:"max",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return this.load().then((function(){var a=f.WhereClause.create(e,t.getFieldsIndex());return t._substituteVars(a,r),t.calculateStatistic("max",a,-1,t._defaultTracker(n))}))}},{key:"avg",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return this.load().then((function(){var a=f.WhereClause.create(e,t.getFieldsIndex());return t._substituteVars(a,r),t.calculateStatistic("avg",a,-1,t._defaultTracker(n))}))}},{key:"sum",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return this.load().then((function(){var a=f.WhereClause.create(e,t.getFieldsIndex());return t._substituteVars(a,r),t.calculateStatistic("sum",a,-1,t._defaultTracker(n))}))}},{key:"stdev",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return this.load().then((function(){var a=f.WhereClause.create(e,t.getFieldsIndex());return t._substituteVars(a,r),t.calculateStatistic("stdev",a,-1,t._defaultTracker(n))}))}},{key:"variance",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return this.load().then((function(){var a=f.WhereClause.create(e,t.getFieldsIndex());return t._substituteVars(a,r),t.calculateStatistic("variance",a,-1,t._defaultTracker(n))}))}},{key:"count",value:function(e){var t=this;return this.load().then((function(){return t.calculateStatistic("count",f.WhereClause.create("1",t.getFieldsIndex()),-1,t._defaultTracker(e))}))}},{key:"_defaultTracker",value:function(e){return e||{aborted:!1}}},{key:"forEach",value:function(e,t){var r=this;return Object(i.c)((function(n,a){r._forEachImpl(r.iterator(r._defaultTracker(t)),e,r,n,a,0)}))}},{key:"_forEachImpl",value:function(e,t,r,n,a,o){var u=this;try{if(++o>1e3)return void setTimeout((function(){o=0,u._forEachImpl(e,t,r,n,a,o)}),0);e.next().then((function(s){try{if(null===s)n(r);else{var l=t(s);null==l?u._forEachImpl(e,t,r,n,a,o):Object(i.p)(l)?l.then((function(){try{u._forEachImpl(e,t,r,n,a,o)}catch(s){a(s)}}),a):u._forEachImpl(e,t,r,n,a,o)}}catch(c){a(c)}}),a)}catch(s){a(s)}}},{key:"convertToJSON",value:function(e){for(var t={layerDefinition:{geometryType:this.geometryType,fields:[]},featureSet:{features:[],geometryType:this.geometryType}},r=0;r<this.fields.length;r++)t.layerDefinition.fields.push(Object(s.h)(this.fields[r]));return this.reduce((function(e,r){var n={geometry:r.geometry&&r.geometry.toJSON(),attributes:{}};for(var a in r.attributes)n.attributes[a]=r.attributes[a];return t.featureSet.features.push(n),1}),0,e).then((function(){return t}))}},{key:"castToText",value:function(){return"object, FeatureSet"}},{key:"queryAttachments",value:function(e,t,r,n){return this._parent.queryAttachments(e,t,r,n)}},{key:"serviceUrl",value:function(){return this._parent.serviceUrl()}},{key:"subtypes",value:function(){return this.typeIdField?{subtypeField:this.typeIdField,subtypes:this.types?this.types.map((function(e){return{name:e.name,code:e.id}})):[]}:null}},{key:"relationshipMetaData",value:function(){return this._parent.relationshipMetaData()}},{key:"gdbVersion",get:function(){return this._parent?this._parent.gdbVersion:""}},{key:"schema",value:function(){var e,t=[],r=y(this.fields);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(Object(s.h)(n))}}catch(a){r.e(a)}finally{r.f()}return{objectIdField:this.objectIdField,globalIdField:this.globalIdField,geometryType:void 0===s.n[this.geometryType]?"":s.n[this.geometryType],fields:t}}},{key:"convertToText",value:function(e,t){var r=this;return"schema"===e?this._ensureLoaded().then((function(){return JSON.stringify(r.schema())})):"featureset"===e?this._ensureLoaded().then((function(){var e=[];return r.reduce((function(t,r){var n={geometry:r.geometry?r.geometry.toJSON():null,attributes:r.attributes};return null!==n.geometry&&n.geometry.spatialReference&&delete n.geometry.spatialReference,e.push(n),1}),0,t).then((function(){var t=r.schema();return t.features=e,t.spatialReference=r.spatialReference.toJSON(),JSON.stringify(t)}))})):Object(i.t)(this.castToText())}},{key:"getFeatureByObjectId",value:function(e,t){return this._parent.getFeatureByObjectId(e,t)}},{key:"getOwningSystemUrl",value:function(){return this._parent.getOwningSystemUrl()}},{key:"getIdentityUser",value:function(){return this._parent.getIdentityUser()}}]),e}();b._featuresetFunctions={};t.a=b},"d/mo":function(e,t,r){"use strict";var n=r("hisu"),a=r("CHlC"),i=r("kMo5"),o=r("P+uj"),u=r("dQW7"),s=r("0n+b"),l=r("xAIp"),c=(r("J4Pc"),r("wckI"),r("TM+E"),r("iaHD")),f=r("OTJA");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var a=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var p=function(e){Object(a.a)(r,e);var t=h(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).blockWidth=void 0,e.blockHeight=void 0,e.compression=null,e.origin=null,e.firstPyramidLevel=null,e.maximumPyramidLevel=null,e.pyramidScalingFactor=2,e.pyramidBlockWidth=null,e.pyramidBlockHeight=null,e.isVirtualTileInfo=!1,e.tileInfo=null,e.blockBoundary=null,e}return r}(s.a);Object(u.a)([Object(l.b)({type:Number,json:{write:!0}})],p.prototype,"blockWidth",void 0),Object(u.a)([Object(l.b)({type:Number,json:{write:!0}})],p.prototype,"blockHeight",void 0),Object(u.a)([Object(l.b)({type:String,json:{write:!0}})],p.prototype,"compression",void 0),Object(u.a)([Object(l.b)({type:f.a,json:{write:!0}})],p.prototype,"origin",void 0),Object(u.a)([Object(l.b)({type:Number,json:{write:!0}})],p.prototype,"firstPyramidLevel",void 0),Object(u.a)([Object(l.b)({type:Number,json:{write:!0}})],p.prototype,"maximumPyramidLevel",void 0),Object(u.a)([Object(l.b)({json:{write:!0}})],p.prototype,"pyramidResolutions",void 0),Object(u.a)([Object(l.b)({type:Number,json:{write:!0}})],p.prototype,"pyramidScalingFactor",void 0),Object(u.a)([Object(l.b)({type:Number,json:{write:!0}})],p.prototype,"pyramidBlockWidth",void 0),Object(u.a)([Object(l.b)({type:Number,json:{write:!0}})],p.prototype,"pyramidBlockHeight",void 0),Object(u.a)([Object(l.b)({type:Boolean,json:{write:!0}})],p.prototype,"isVirtualTileInfo",void 0),Object(u.a)([Object(l.b)({json:{write:!0}})],p.prototype,"tileInfo",void 0),Object(u.a)([Object(l.b)()],p.prototype,"blockBoundary",void 0);var d=p=Object(u.a)([Object(c.a)("esri.layers.support.RasterStorageInfo")],p);t.a=d},dg0F:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=r("u6Q5"),l=r("cWe4"),c=r("nBXx"),f=r("Raue"),h=r("IH5m");function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var v=function(e){Object(i.a)(r,e);var t=y(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e))._orderbyclause=null,a.declaredClass="esri.arcade.featureset.actions.OrderBy",a._maxProcessing=100,a._orderbyclause=e.orderbyclause,a._parent=e.parentfeatureset,a}return Object(a.a)(r,[{key:"_getSet",value:function(e){var t=this;return null===this._wset?this._ensureLoaded().then((function(){return t._getFilteredSet("",null,null,t._orderbyclause,e)})).then((function(r){return t._checkCancelled(e),t._wset=r,t._wset})):Object(h.t)(this._wset)}},{key:"manualOrderSet",value:function(e,t){var r=this;return this.getIdColumnDictionary(e,[],-1,t).then((function(e){r._orderbyclause.order(e);for(var t=new c.a([],[],!0,null),n=0;n<e.length;n++)t._known.push(e[n].id);return t}))}},{key:"getIdColumnDictionary",value:function(e,t,r,n){var a=this;if(r<e._known.length-1){var i=this._maxQueryRate();if("GETPAGES"===e._known[r+1])return Object(s.q)(this._parent._expandPagedSet(e,i,0,0,n)).then((function(){return a.getIdColumnDictionary(e,t,r,n)}));for(var o=r+1,u=[];o<e._known.length&&"GETPAGES"!==e._known[o];)u.push(e._known[o]),o++;return r+=u.length,Object(s.q)(this._parent._getFeatureBatch(u,n)).then((function(i){a._checkCancelled(n);var o,u=p(i);try{for(u.s();!(o=u.n()).done;){var s=o.value;t.push({id:s.attributes[a.objectIdField],feature:s})}}catch(l){u.e(l)}finally{u.f()}return a.getIdColumnDictionary(e,t,r,n)}))}return e._candidates.length>0?Object(s.q)(this._refineSetBlock(e,this._maxProcessingRate(),n)).then((function(){return a._checkCancelled(n),a.getIdColumnDictionary(e,t,r,n)})):Object(h.t)(t)}},{key:"_isInFeatureSet",value:function(e){return this._parent._isInFeatureSet(e)}},{key:"_getFeatures",value:function(e,t,r,n){return this._parent._getFeatures(e,t,r,n)}},{key:"_featureFromCache",value:function(e){if(void 0===this._featureCache[e]){var t=this._parent._featureFromCache(e);if(void 0===t)return;return null===t?null:(this._featureCache[e]=t,t)}return this._featureCache[e]}},{key:"_fetchAndRefineFeatures",value:function(){return Object(h.s)(new Error("Fetch and Refine should not be called in this featureset"))}},{key:"_getFilteredSet",value:function(e,t,r,n,a){var i=this;return this._ensureLoaded().then((function(){return i._parent._getFilteredSet(e,t,r,null===n?i._orderbyclause:n,a)})).then((function(e){i._checkCancelled(a);var n=new c.a(e._candidates.slice(0),e._known.slice(0),e._ordered,i._clonePageDefinition(e.pagesDefinition)),o=!0;return e._candidates.length>0&&(o=!1),!1===n._ordered?i.manualOrderSet(n,a).then((function(e){return!1===o&&(null===t&&null===r||(e=new c.a(e._candidates.slice(0).concat(e._known.slice(0)),[],e._ordered,i._clonePageDefinition(e.pagesDefinition)))),e})):n}))}}],[{key:"registerAction",value:function(){l.a._featuresetFunctions.orderBy=function(e){return""===e?this:new r({parentfeatureset:this,orderbyclause:new f.a(e)})}}}]),r}(l.a);t.a=v},djeU:function(e,t,r){"use strict";function n(){return[1,0,0,0,1,0,0,0,1]}function a(e,t){return new Float64Array(e,t,9)}r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));Object.freeze({__proto__:null,create:n,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,r,n,a,i,o,u,s){return[e,t,r,n,a,i,o,u,s]},createView:a})},"eVr+":function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i}));var n=r("pYN/"),a=r("KoAU");function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.c;return"number"==typeof e?t(e):Object(n.i)(e)||Object(n.k)(e)?new Uint32Array(e):e}function o(e){var t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);var r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e)for(var a=0,i=0;i<r;i+=1)i%2==0?(n[a++]=i,n[a++]=i+1,n[a++]=i+2):(n[a++]=i+1,n[a++]=i,n[a++]=i+2);else for(var o=0,u=0;u<r;u+=1)if(u%2==0){var s=e[u],l=e[u+1],c=e[u+2];n[o++]=s,n[o++]=l,n[o++]=c}else{var f=e[u+1],h=e[u],p=e[u+2];n[o++]=f,n[o++]=h,n[o++]=p}return n}function u(e){var t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);var r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){for(var a=0,i=0;i<r;++i)n[a++]=0,n[a++]=i+1,n[a++]=i+2;return n}for(var o=e[0],u=e[1],s=0,l=0;l<r;++l){var c=e[l+2];n[s++]=o,n[s++]=u,n[s++]=c,u=c}return n}},eyU2:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("IH5m"),o=r("7f4O"),u=r("60x+"),s=function(){function e(t){if(Object(n.a)(this,e),t instanceof o.a)this._tilemapCache=t;else{if(!t||!("index"in t))throw new Error("Invalid tilemap!");this._tilemap=t.index}}return Object(a.a)(e,[{key:"dataKey",value:function(e,t){if(this._tilemapCache){var r=e.level,n=e.row,a=e.col,o=new u.a(e);return this._tilemapCache.fetchAvailabilityUpsample(r,n,a,o,t).then((function(){return o.world=e.world,o})).catch((function(e){if(Object(i.m)(e))throw e;return null}))}return this._getIndexedDataKey(e)}},{key:"forEach",value:function(e,t,r,n,a){this._callback=a,this._maxLevel=t+e,this._forEach(this._tilemap,t,r,n)}},{key:"_forEach",value:function(e,t,r,n){0!==e&&(this._callback(t,r,n),t!==this._maxLevel&&"object"==typeof e&&(this._forEach(e[0],t+1,2*r,2*n),this._forEach(e[1],t+1,2*r,2*n+1),this._forEach(e[2],t+1,2*r+1,2*n),this._forEach(e[3],t+1,2*r+1,2*n+1)))}},{key:"_getIndexedDataKey",value:function(e){var t=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return Promise.resolve(null);for(var r=e;0!==r.level;)r=new u.a(r.level-1,r.row>>1,r.col>>1,r.world),t.push(r);var n,a,i=this._tilemap,o=t.pop();if(1===i)return Promise.resolve(o);for(;t.length;)if(a=(1&(n=t.pop()).col)+((1&n.row)<<1),i){if(0===i[a]){o=null;break}if(1===i[a]){o=n;break}o=n,i=i[a]}return Promise.resolve(o)}}]),e}();t.a=s},"h/Mk":function(e,t,r){var n=r("fSIz");e.exports=Array.isArray||function(e){return"Array"==n(e)}},hALY:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return _})),r.d(t,"c",(function(){return W})),r.d(t,"d",(function(){return K})),r.d(t,"e",(function(){return z})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return x})),r.d(t,"h",(function(){return k})),r.d(t,"i",(function(){return I})),r.d(t,"j",(function(){return E})),r.d(t,"k",(function(){return F})),r.d(t,"l",(function(){return M})),r.d(t,"m",(function(){return g})),r.d(t,"n",(function(){return S})),r.d(t,"o",(function(){return q})),r.d(t,"p",(function(){return X})),r.d(t,"q",(function(){return V})),r.d(t,"r",(function(){return R})),r.d(t,"s",(function(){return L})),r.d(t,"t",(function(){return C})),r.d(t,"u",(function(){return O})),r.d(t,"v",(function(){return T})),r.d(t,"w",(function(){return Z})),r.d(t,"x",(function(){return Q})),r.d(t,"y",(function(){return H})),r.d(t,"z",(function(){return N})),r.d(t,"A",(function(){return U})),r.d(t,"B",(function(){return P})),r.d(t,"C",(function(){return w})),r.d(t,"D",(function(){return A})),r.d(t,"E",(function(){return Y})),r.d(t,"F",(function(){return $})),r.d(t,"G",(function(){return J})),r.d(t,"H",(function(){return B})),r.d(t,"I",(function(){return G})),r.d(t,"J",(function(){return D}));var n=r("hisu"),a=r("yBJb"),i=r("CHlC"),o=r("kMo5"),u=r("P+uj"),s=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(n.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=9;var u=this.TypedArrayConstructor;void 0===i&&(i=9*u.BYTES_PER_ELEMENT);var s=0===r.byteLength?0:a;this.typedBuffer=null==o?new u(r,s):new u(r,s,(o-a)/u.BYTES_PER_ELEMENT),this.typedBufferStride=i/u.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(a.a)(e,[{key:"sliceBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.count-t,n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}},{key:"getMat",value:function(e,t){for(var r=e*this.typedBufferStride,n=0;n<9;n++)t[n]=this.typedBuffer[r++];return t}},{key:"setMat",value:function(e,t){for(var r=e*this.typedBufferStride,n=0;n<9;n++)this.typedBuffer[r++]=t[n]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}},{key:"copyFrom",value:function(e,t,r){for(var n=this.typedBuffer,a=t.typedBuffer,i=e*this.typedBufferStride,o=r*t.typedBufferStride,u=0;u<9;++u)n[i++]=a[o++]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();s.ElementCount=9;var l=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(n.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=16;var u=this.TypedArrayConstructor;void 0===i&&(i=16*u.BYTES_PER_ELEMENT);var s=0===r.byteLength?0:a;this.typedBuffer=null==o?new u(r,s):new u(r,s,(o-a)/u.BYTES_PER_ELEMENT),this.typedBufferStride=i/u.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(a.a)(e,[{key:"sliceBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.count-t,n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}},{key:"getMat",value:function(e,t){for(var r=e*this.typedBufferStride,n=0;n<16;n++)t[n]=this.typedBuffer[r++];return t}},{key:"setMat",value:function(e,t){for(var r=e*this.typedBufferStride,n=0;n<16;n++)this.typedBuffer[r++]=t[n]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}},{key:"copyFrom",value:function(e,t,r){for(var n=this.typedBuffer,a=t.typedBuffer,i=e*this.typedBufferStride,o=r*t.typedBufferStride,u=0;u<16;++u)n[i++]=a[o++]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();l.ElementCount=16;var c=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(n.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=1;var u=this.TypedArrayConstructor;void 0===i&&(i=u.BYTES_PER_ELEMENT);var s=0===r.byteLength?0:a;this.typedBuffer=null==o?new u(r,s):new u(r,s,(o-a)/u.BYTES_PER_ELEMENT),this.typedBufferStride=i/u.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(a.a)(e,[{key:"sliceBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.count-t,n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}},{key:"get",value:function(e){return this.typedBuffer[e*this.typedBufferStride]}},{key:"set",value:function(e,t){this.typedBuffer[e*this.typedBufferStride]=t}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();c.ElementCount=1;var f=r("EOw0"),h=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(n.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=2;var u=this.TypedArrayConstructor;void 0===i&&(i=2*u.BYTES_PER_ELEMENT);var s=0===r.byteLength?0:a;this.typedBuffer=null==o?new u(r,s):new u(r,s,(o-a)/u.BYTES_PER_ELEMENT),this.typedBufferStride=i/u.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(a.a)(e,[{key:"sliceBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.count-t,n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}},{key:"getVec",value:function(e,t){return e*=this.typedBufferStride,Object(f.m)(t,this.typedBuffer[e],this.typedBuffer[e+1])}},{key:"setVec",value:function(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e]=t[1]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}},{key:"setValues",value:function(e,t,r){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e]=r}},{key:"copyFrom",value:function(e,t,r){var n=this.typedBuffer,a=t.typedBuffer,i=e*this.typedBufferStride,o=r*t.typedBufferStride;n[i++]=a[o++],n[i]=a[o]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();h.ElementCount=2;var p=r("KcHx"),d=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(n.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=3;var u=this.TypedArrayConstructor;void 0===i&&(i=3*u.BYTES_PER_ELEMENT);var s=0===r.byteLength?0:a;this.typedBuffer=null==o?new u(r,s):new u(r,s,(o-a)/u.BYTES_PER_ELEMENT),this.typedBufferStride=i/u.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(a.a)(e,[{key:"sliceBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.count-t,n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}},{key:"getVec",value:function(e,t){return e*=this.typedBufferStride,Object(p.s)(t,this.typedBuffer[e],this.typedBuffer[e+1],this.typedBuffer[e+2])}},{key:"setVec",value:function(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e++]=t[1],this.typedBuffer[e]=t[2]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}},{key:"setValues",value:function(e,t,r,n){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e++]=r,this.typedBuffer[e]=n}},{key:"copyFrom",value:function(e,t,r){var n=this.typedBuffer,a=t.typedBuffer,i=e*this.typedBufferStride,o=r*t.typedBufferStride;n[i++]=a[o++],n[i++]=a[o++],n[i]=a[o]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();d.ElementCount=3;var y=r("ccBF"),v=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(n.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=4;var u=this.TypedArrayConstructor;void 0===i&&(i=4*u.BYTES_PER_ELEMENT);var s=0===r.byteLength?0:a;this.typedBuffer=null==o?new u(r,s):new u(r,s,(o-a)/u.BYTES_PER_ELEMENT),this.typedBufferStride=i/u.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(a.a)(e,[{key:"sliceBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.count-t,n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}},{key:"getVec",value:function(e,t){return e*=this.typedBufferStride,Object(y.k)(t,this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e])}},{key:"setVec",value:function(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e++]=t[1],this.typedBuffer[e++]=t[2],this.typedBuffer[e]=t[3]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}},{key:"setValues",value:function(e,t,r,n,a){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e++]=r,this.typedBuffer[e++]=n,this.typedBuffer[e]=a}},{key:"copyFrom",value:function(e,t,r){var n=this.typedBuffer,a=t.typedBuffer,i=e*this.typedBufferStride,o=r*t.typedBufferStride;n[i++]=a[o++],n[i++]=a[o++],n[i++]=a[o++],n[i]=a[o]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}v.ElementCount=4;var m=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float32Array,e,i,o,u)).elementType="f32",a}return Object(a.a)(r,null,[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(c);m.ElementType="f32";var g=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float32Array,e,i,o,u)).elementType="f32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(h);g.ElementType="f32";var O=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float32Array,e,i,o,u)).elementType="f32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(d);O.ElementType="f32";var w=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float32Array,e,i,o,u)).elementType="f32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(v);w.ElementType="f32";var j=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float32Array,e,i,o,u)).elementType="f32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(s);j.ElementType="f32";var x=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float64Array,e,i,o,u)).elementType="f64",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(s);x.ElementType="f64";var k=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float32Array,e,i,o,u)).elementType="f32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(l);k.ElementType="f32";var I=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float64Array,e,i,o,u)).elementType="f64",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(l);I.ElementType="f64";var _=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float64Array,e,i,o,u)).elementType="f64",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(c);_.ElementType="f64";var S=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float64Array,e,i,o,u)).elementType="f64",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(h);S.ElementType="f64";var T=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float64Array,e,i,o,u)).elementType="f64",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(d);T.ElementType="f64";var A=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Float64Array,e,i,o,u)).elementType="f64",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(v);A.ElementType="f64";var M=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint8Array,e,i,o,u)).elementType="u8",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(c);M.ElementType="u8";var C=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint8Array,e,i,o,u)).elementType="u8",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(h);C.ElementType="u8";var P=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint8Array,e,i,o,u)).elementType="u8",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(d);P.ElementType="u8";var D=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint8Array,e,i,o,u)).elementType="u8",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(v);D.ElementType="u8";var E=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint16Array,e,i,o,u)).elementType="u16",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(c);E.ElementType="u16";var R=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint16Array,e,i,o,u)).elementType="u16",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(h);R.ElementType="u16";var N=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint16Array,e,i,o,u)).elementType="u16",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(d);N.ElementType="u16";var B=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint16Array,e,i,o,u)).elementType="u16",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(v);B.ElementType="u16";var F=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint32Array,e,i,o,u)).elementType="u32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(c);F.ElementType="u32";var L=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint32Array,e,i,o,u)).elementType="u32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(h);L.ElementType="u32";var U=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint32Array,e,i,o,u)).elementType="u32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(d);U.ElementType="u32";var G=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Uint32Array,e,i,o,u)).elementType="u32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(v);G.ElementType="u32";var z=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int8Array,e,i,o,u)).elementType="i8",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(c);z.ElementType="i8";var V=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int8Array,e,i,o,u)).elementType="i8",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(h);V.ElementType="i8";var H=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int8Array,e,i,o,u)).elementType="i8",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(d);H.ElementType="i8";var J=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int8Array,e,i,o,u)).elementType="i8",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(v);J.ElementType="i8";var W=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int16Array,e,i,o,u)).elementType="i16",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(c);W.ElementType="i16";var q=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int16Array,e,i,o,u)).elementType="i16",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(h);q.ElementType="i16";var Z=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int16Array,e,i,o,u)).elementType="i16",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(d);Z.ElementType="i16";var Y=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int16Array,e,i,o,u)).elementType="i16",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(v);Y.ElementType="i16";var K=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int32Array,e,i,o,u)).elementType="i32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(c);K.ElementType="i32";var X=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int32Array,e,i,o,u)).elementType="i32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(h);X.ElementType="i32";var Q=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int32Array,e,i,o,u)).elementType="i32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(d);Q.ElementType="i32";var $=function(e){Object(i.a)(r,e);var t=b(r);function r(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object(n.a)(this,r),(a=t.call(this,Int32Array,e,i,o,u)).elementType="i32",a}return Object(a.a)(r,[{key:"slice",value:function(e,t){return this.sliceBuffer(r,e,t)}}],[{key:"fromTypedArray",value:function(e,t){return new r(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),r}(v);$.ElementType="i32"},hQel:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return h}));var n=r("aNYv"),a=r("aic5"),i=r("zEHB"),o=r("vlc1");function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":var t=e.symbolLayers;return t&&1===t.length?l(t[0]):null;case"CIMVectorMarker":var r=e.markerGraphics;if(!r||1!==r.length)return null;var n=r[0];if(!n)return null;var a=n.geometry;if(!a)return null;var i=n.symbol;return!i||"CIMPolygonSymbol"!==i.type&&"CIMLineSymbol"!==i.type?null:{geom:a,asFill:"CIMPolygonSymbol"===i.type};case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function c(e){var t,r=1/0,n=-1/0,a=1/0,i=-1/0,o=u(e);try{for(o.s();!(t=o.n()).done;){var s,l=u(t.value);try{for(l.s();!(s=l.n()).done;){var c=s.value;c[0]<r&&(r=c[0]),c[0]>n&&(n=c[0]),c[1]<a&&(a=c[1]),c[1]>i&&(i=c[1])}}catch(f){l.e(f)}finally{l.f()}}}catch(f){o.e(f)}finally{o.f()}return[r,a,n,i]}function f(e){return e?e.rings?c(e.rings):e.paths?c(e.paths):Object(a.d)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function h(e,t,r,a,i){var o=Object(n.a)(e,4),u=o[0],s=o[1],l=o[2],c=o[3];if(l<u||c<s)return[0,0,0];var f=l-u,h=c-s,p=Math.floor(31.5),d=(128-2*(p+1))/Math.max(f,h),y=Math.round(f*d)+2*p,v=Math.round(h*d)+2*p,b=1;t&&(b=v/d/(t.ymax-t.ymin));var m=0,g=0;if(a)if(i){if(t&&r&&t.ymax-t.ymin>0){var O=(t.xmax-t.xmin)/(t.ymax-t.ymin);m=a.x/(r*O),g=a.y/r}}else m=a.x,g=a.y;return m=.5*(t.xmax+t.xmin)+m*(t.xmax-t.xmin),g=.5*(t.ymax+t.ymin)+g*(t.ymax-t.ymin),m-=u,g-=s,m*=d,g*=d,[b,(m+=p)/y-.5,-((g+=p)/v-.5)]}function p(e){var t,r=function(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}(e.geom),a=function(e){var t,r=1/0,n=-1/0,a=1/0,i=-1/0,s=u(e);try{for(s.s();!(t=s.n()).done;){var l,c=u(t.value);try{for(c.s();!(l=c.n()).done;){var f=l.value;f[0]<r&&(r=f[0]),f[0]>n&&(n=f[0]),f[1]<a&&(a=f[1]),f[1]>i&&(i=f[1])}}catch(h){c.e(h)}finally{c.f()}}}catch(h){s.e(h)}finally{s.f()}return new o.a(r,a,n-r,i-a)}(r),i=Math.floor(31.5),s=(128-2*(i+1))/Math.max(a.width,a.height),l=Math.round(a.width*s)+2*i,c=Math.round(a.height*s)+2*i,f=[],h=u(r);try{for(h.s();!(t=h.n()).done;){var p=t.value;if(p&&p.length>1){var y,v=[],b=u(p);try{for(b.s();!(y=b.n()).done;){var m=y.value,g=Object(n.a)(m,2),O=g[0],w=g[1];O-=a.x,w-=a.y,O*=s,w*=s,O+=i-.5,w+=i-.5,v.push([O,w])}}catch(k){b.e(k)}finally{b.f()}if(e.asFill){var j=v.length-1;v[0][0]===v[j][0]&&v[0][1]===v[j][1]||v.push(v[0])}f.push(v)}}}catch(k){h.e(k)}finally{h.f()}var x=function(e,t,r,n){for(var a=t*r,i=new Array(a),o=n*n+1,s=0;s<a;++s)i[s]=o;var l,c=u(e);try{for(c.s();!(l=c.n()).done;)for(var f=l.value,h=f.length,p=1;p<h;++p){var d=f[p-1],y=f[p],v=void 0,b=void 0,m=void 0,g=void 0;d[0]<y[0]?(v=d[0],b=y[0]):(v=y[0],b=d[0]),d[1]<y[1]?(m=d[1],g=y[1]):(m=y[1],g=d[1]);var O=Math.floor(v)-n,w=Math.floor(b)+n,j=Math.floor(m)-n,x=Math.floor(g)+n;O<0&&(O=0),w>t&&(w=t),j<0&&(j=0),x>r&&(x=r);for(var I=y[0]-d[0],_=y[1]-d[1],S=I*I+_*_,T=O;T<w;T++)for(var A=j;A<x;A++){var M=void 0,C=void 0,P=(T-d[0])*I+(A-d[1])*_;P<0?(M=d[0],C=d[1]):P>S?(M=y[0],C=y[1]):(P/=S,M=d[0]+P*I,C=d[1]+P*_);var D=(T-M)*(T-M)+(A-C)*(A-C),E=(r-A-1)*t+T;D<i[E]&&(i[E]=D)}}}catch(k){c.e(k)}finally{c.f()}for(var R=0;R<a;++R)i[R]=Math.sqrt(i[R]);return i}(f,l,c,i);return e.asFill&&function(e,t,r,n,a){var i,o=u(e);try{for(o.s();!(i=o.n()).done;)for(var s=i.value,l=s.length,c=1;c<l;++c){var f=s[c-1],h=s[c],p=void 0,d=void 0,y=void 0,v=void 0;f[0]<h[0]?(p=f[0],d=h[0]):(p=h[0],d=f[0]),f[1]<h[1]?(y=f[1],v=h[1]):(y=h[1],v=f[1]);var b=Math.floor(p),m=Math.floor(d)+1,g=Math.floor(y),O=Math.floor(v)+1;b<n&&(b=n),m>t-n&&(m=t-n),g<n&&(g=n),O>r-n&&(O=r-n);for(var w=g;w<O;++w)if(f[1]>w!=h[1]>w){for(var j=(r-w-1)*t,x=b;x<m;++x)x<(h[0]-f[0])*(w-f[1])/(h[1]-f[1])+f[0]&&(a[j+x]=-a[j+x]);for(var I=n;I<b;++I)a[j+I]=-a[j+I]}}}catch(k){o.e(k)}finally{o.f()}}(f,l,c,i,x),[d(x,i),l,c]}function d(e,t){for(var r=2*t,n=e.length,a=new Uint8Array(4*n),o=0;o<n;++o){var u=.5-e[o]/r;Object(i.a)(u,a,4*o)}return a}},hrIl:function(e,t,r){"use strict";r.d(t,"a",(function(){return C})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return M})),r.d(t,"d",(function(){return A}));var n=r("aNYv"),a=r("NthX"),i=r.n(a),o=r("Mp7X"),u=r("JBec"),s=r("4zgH"),l=i.a.mark(v),c=i.a.mark(b),f=i.a.mark(m);function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function y(e){return d[e]}function v(e){var t,r,n;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e.type,a.next="Feature"===a.t0?3:"FeatureCollection"===a.t0?6:25;break;case 3:return a.next=5,e;case 5:return a.abrupt("break",25);case 6:t=h(e.features),a.prev=7,t.s();case 9:if((r=t.n()).done){a.next=17;break}if(n=r.value,a.t1=n,!a.t1){a.next=15;break}return a.next=15,n;case 15:a.next=9;break;case 17:a.next=22;break;case 19:a.prev=19,a.t2=a.catch(7),t.e(a.t2);case 22:return a.prev=22,t.f(),a.finish(22);case 25:case"end":return a.stop()}}),l,null,[[7,19,22,25]])}function b(e){var t,r,n,a,o,u,s,l,f;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=2;break}return i.abrupt("return",null);case 2:i.t0=e.type,i.next="Point"===i.t0?5:"LineString"===i.t0||"MultiPoint"===i.t0?8:"MultiLineString"===i.t0||"Polygon"===i.t0?10:"MultiPolygon"===i.t0?27:58;break;case 5:return i.next=7,e.coordinates;case 7:return i.abrupt("break",58);case 8:return i.delegateYield(e.coordinates,"t1",9);case 9:return i.abrupt("break",58);case 10:t=h(e.coordinates),i.prev=11,t.s();case 13:if((r=t.n()).done){i.next=18;break}return n=r.value,i.delegateYield(n,"t2",16);case 16:i.next=13;break;case 18:i.next=23;break;case 20:i.prev=20,i.t3=i.catch(11),t.e(i.t3);case 23:return i.prev=23,t.f(),i.finish(23);case 26:return i.abrupt("break",58);case 27:a=h(e.coordinates),i.prev=28,a.s();case 30:if((o=a.n()).done){i.next=50;break}u=o.value,s=h(u),i.prev=33,s.s();case 35:if((l=s.n()).done){i.next=40;break}return f=l.value,i.delegateYield(f,"t4",38);case 38:i.next=35;break;case 40:i.next=45;break;case 42:i.prev=42,i.t5=i.catch(33),s.e(i.t5);case 45:return i.prev=45,s.f(),i.finish(45);case 48:i.next=30;break;case 50:i.next=55;break;case 52:i.prev=52,i.t6=i.catch(28),a.e(i.t6);case 55:return i.prev=55,a.f(),i.finish(55);case 58:case"end":return i.stop()}}),c,null,[[11,20,23,26],[28,52,55,58],[33,42,45,48]])}function m(e){var t,r,n,a,o,l,c,p,d,v,b,m,g,O=arguments;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=O.length>1&&void 0!==O[1]?O[1]:{},r=t.geometryType,n=t.objectIdField,a=h(e),i.prev=3,a.s();case 5:if((o=a.n()).done){i.next=18;break}if(l=o.value,p=l.geometry,d=l.properties,v=l.id,!p||y(p.type)===r){i.next=10;break}return i.abrupt("continue",16);case 10:return m=null!=(c=(b=d||{})[n])?c:null,n&&null!=v&&!b[n]&&(b[n]=m=v),g=new u.a(p?j(new s.a,p,t):null,b,null,m),i.next=16,g;case 16:i.next=5;break;case 18:i.next=23;break;case 20:i.prev=20,i.t0=i.catch(3),a.e(i.t0);case 23:return i.prev=23,a.f(),i.finish(23);case 26:case"end":return i.stop()}}),f,null,[[3,20,23,26]])}function g(e){var t,r=h(e);try{for(r.s();!(t=r.n()).done;){if(t.value.length>2)return!0}}catch(n){r.e(n)}finally{r.f()}return!1}function O(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],a=e[(r+1)%e.length];t+=n[0]*a[1]-a[0]*n[1]}return t<=0}function w(e){var t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function j(e,t,r){switch(t.type){case"LineString":return function(e,t,r){return I(e,t.coordinates,r),e}(e,t,r);case"MultiLineString":return function(e,t,r){var n,a=h(t.coordinates);try{for(a.s();!(n=a.n()).done;){var i=n.value;I(e,i,r)}}catch(o){a.e(o)}finally{a.f()}return e}(e,t,r);case"MultiPoint":return function(e,t,r){return I(e,t.coordinates,r),e}(e,t,r);case"MultiPolygon":return function(e,t,r){var n,a=h(t.coordinates);try{for(a.s();!(n=a.n()).done;){var i=n.value;x(e,i[0],r);for(var o=1;o<i.length;o++)k(e,i[o],r)}}catch(u){a.e(u)}finally{a.f()}return e}(e,t,r);case"Point":return function(e,t,r){return S(e,t.coordinates,r),e}(e,t,r);case"Polygon":return function(e,t,r){var n=t.coordinates;x(e,n[0],r);for(var a=1;a<n.length;a++)k(e,n[a],r);return e}(e,t,r)}}function x(e,t,r){var n=w(t);!function(e){return!O(e)}(n)?I(e,n,r):_(e,n,r)}function k(e,t,r){var n=w(t);!function(e){return O(e)}(n)?I(e,n,r):_(e,n,r)}function I(e,t,r){var n,a=h(t);try{for(a.s();!(n=a.n()).done;){S(e,n.value,r)}}catch(i){a.e(i)}finally{a.f()}e.lengths.push(t.length)}function _(e,t,r){for(var n=t.length-1;n>=0;n--)S(e,t[n],r);e.lengths.push(t.length)}function S(e,t,r){var a=Object(n.a)(t,3),i=a[0],o=a[1],u=a[2];e.coords.push(i,o),r.hasZ&&e.coords.push(u||0)}function T(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function A(e){if(!e)throw new o.a("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new o.a("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});var t=e.crs;if(t){var r="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,n=new RegExp(".*(CRS84H?|4326)$","i");if(!r||!n.test(r))throw new o.a("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}}function M(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[],i=new Set,o=new Set,u=!1,s=Number.NEGATIVE_INFINITY,l=null,c=!1,f=n.geometryType,p=void 0===f?null:f,d=!1,m=h(v(e));try{var O=function(){var e=r.value,n=e.geometry,f=e.properties,h=e.id;if((!n||(p||(p=y(n.type)),y(n.type)===p))&&(u||(u=g(b(n))),c||(c=null!=h)&&("number"===(t=typeof h)&&(l=Object.keys(f).filter((function(e){return f[e]===h})))),c&&"number"===t&&null!=h&&(s=Math.max(s,h),l.length>1?l=l.filter((function(e){return f[e]===h})):1===l.length&&(l=f[l[0]]===h?l:[])),!d&&f)){var v=!0;for(var m in f)if(!i.has(m)){var O=f[m];if(null!=O){var w=T(O);"unknown"!==w?(o.delete(m),i.add(m),a.push({name:m,alias:m,type:w})):o.add(m)}else v=!1,o.add(m)}d=v}};for(m.s();!(r=m.n()).done;)O()}catch(I){m.e(I)}finally{m.f()}var w=l&&1===l.length&&l[0]||null;if(w){var j,x=h(a);try{for(x.s();!(j=x.n()).done;){var k=j.value;k.name===w&&(k.type="esriFieldTypeOID")}}catch(I){x.e(I)}finally{x.f()}}return{fields:a,geometryType:p,hasZ:u,maxObjectId:Math.max(0,s),objectIdFieldName:w,objectIdFieldType:t,unknownFields:Array.from(o)}}function C(e,t){return Array.from(m(v(e),t))}},iC3o:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a}));var n=r("rNep");function a(e,t,r){if(e.count===t.count)for(var a=e.count,i=r[0],o=r[1],u=r[2],s=r[3],l=r[4],c=r[5],f=r[6],h=r[7],p=r[8],d=e.typedBuffer,y=e.typedBufferStride,v=t.typedBuffer,b=t.typedBufferStride,m=0;m<a;m++){var g=m*y,O=m*b,w=v[O],j=v[O+1],x=v[O+2],k=v[O+3];d[g]=i*w+s*j+f*x,d[g+1]=o*w+l*j+h*x,d[g+2]=u*w+c*j+p*x,d[g+3]=k}else n.a.error("source and destination buffers need to have the same number of elements")}function i(e,t,r){for(var n=Math.min(e.count,t.count),a=e.typedBuffer,i=e.typedBufferStride,o=t.typedBuffer,u=t.typedBufferStride,s=0;s<n;s++){var l=s*i,c=s*u;a[l]=r*o[c],a[l+1]=r*o[c+1],a[l+2]=r*o[c+2],a[l+3]=r*o[c+3]}}function o(e,t,r){for(var n=Math.min(e.count,t.count),a=e.typedBuffer,i=e.typedBufferStride,o=t.typedBuffer,u=t.typedBufferStride,s=0;s<n;s++){var l=s*i,c=s*u;a[l]=o[c]>>r,a[l+1]=o[c+1]>>r,a[l+2]=o[c+2]>>r,a[l+3]=o[c+3]>>r}}Object.freeze({__proto__:null,transformMat4:function(e,t,r){if(e.count===t.count)for(var a=e.count,i=r[0],o=r[1],u=r[2],s=r[3],l=r[4],c=r[5],f=r[6],h=r[7],p=r[8],d=r[9],y=r[10],v=r[11],b=r[12],m=r[13],g=r[14],O=r[15],w=e.typedBuffer,j=e.typedBufferStride,x=t.typedBuffer,k=t.typedBufferStride,I=0;I<a;I++){var _=I*j,S=I*k,T=x[S],A=x[S+1],M=x[S+2],C=x[S+3];w[_]=i*T+l*A+p*M+b*C,w[_+1]=o*T+c*A+d*M+m*C,w[_+2]=u*T+f*A+y*M+g*C,w[_+3]=s*T+h*A+v*M+O*C}else n.a.error("source and destination buffers need to have the same number of elements")},transformMat3:a,scale:i,shiftRight:o})},iQat:function(e,t,r){"use strict";r.r(t),r.d(t,"getFirstLayerOrTableId",(function(){return k})),r.d(t,"getNumLayersAndTables",(function(){return _})),r.d(t,"load",(function(){return h})),r.d(t,"preprocessFSItemData",(function(){return j}));var n=r("eijD"),a=r("NthX"),i=r.n(a),o=r("Mp7X"),u=r("qtK3"),s=r("eoZi"),l=r("Xqmc"),c=r("okYM"),f=r("ERXM");function h(e,t){return p.apply(this,arguments)}function p(){return(p=Object(n.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.instance.portalItem)||!n.id){e.next=8;break}return e.next=4,n.load(r);case 4:d(t),e.t0=y(t,r),e.next=9;break;case 8:e.t0=Promise.resolve();case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){var t=e.instance.portalItem;if(-1===e.supportedTypes.indexOf(t.type))throw new o.a("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:t.type,expectedType:e.supportedTypes.join(", ")})}function y(e,t){return v.apply(this,arguments)}function v(){return(v=Object(n.a)(i.a.mark((function e(t,r){var n,a,o,u,s,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.instance,a=n.portalItem,o=a.url,u=a.title,s=Object(l.a)(a),"group"!==n.type){e.next=3;break}return e.abrupt("return",(n.read({title:u},s),b(n,t)));case 3:return o&&n.read({url:o},s),e.next=6,w(t,r);case 6:return f=e.sent,e.abrupt("return",(f&&n.read(f,s),n.resourceReferences={portalItem:a,paths:s.readResourcePaths},n.read({title:u},s),Object(c.a)(n,s)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){var r,a,s=e.portalItem.type;switch(s){case"Feature Service":r=u.a.FeatureLayer;break;case"Stream Service":r=u.a.StreamLayer;break;case"Scene Service":r=u.a.SceneLayer;break;case"Feature Collection":r=u.a.FeatureLayer;break;default:throw new o.a("portal:unsupported-item-type-as-group","The item type '".concat(s,"' is not supported as a 'IGroupLayer'"))}return r().then((function(e){return a=e,w(t)})).then(function(){var t=Object(n.a)(i.a.mark((function t(r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Feature Service"!==s){t.next=7;break}return t.next=3,j(r,e.portalItem.url);case 3:r=t.sent,t.t0=g(e,a,r),t.next=8;break;case 7:t.t0=_(r)>0?g(e,a,r):m(e,a);case 8:return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function m(e,t){return e.portalItem.url?Object(f.a)(e.portalItem.url).then((function(r){var n,a;function i(e){return{id:e.id,name:e.name}}r&&g(e,t,{layers:null==(n=r.layers)?void 0:n.map(i),tables:null==(a=r.tables)?void 0:a.map(i)})})):Promise.resolve()}function g(e,t,r){var n=r.layers||[],a=r.tables||[];"Feature Collection"===e.portalItem.type&&(n.forEach((function(e){var t;"Table"===(null==e||null==(t=e.layerDefinition)?void 0:t.type)&&a.push(e)})),n=n.filter((function(e){var t;return"Table"!==(null==e||null==(t=e.layerDefinition)?void 0:t.type)}))),n.reverse().forEach((function(n){var a=O(e,t,r,n);e.add(a)})),a.reverse().forEach((function(n){var a=O(e,t,r,n);e.tables.add(a)}))}function O(e,t,r,n){var a=new t({portalItem:e.portalItem.clone(),layerId:n.id,sublayerTitleMode:"service-name"});if("Feature Collection"===e.portalItem.type){var i={origin:"portal-item",portal:e.portalItem.portal||s.a.getDefault()};a.read(n,i);var o=r.showLegend;null!=o&&a.read({showLegend:o},i)}return a}function w(e,t){if(!1===e.supportsData)return Promise.resolve(void 0);var r=e.instance;return r.portalItem.fetchData("json",t).catch((function(){return null})).then(function(){var e=Object(n.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S(r)){e.next=3;break}return a=!0,e.abrupt("return",(t&&_(t)>0&&(null==r.layerId&&(r.layerId=k(t)),(n=I(t,r.layerId))&&(1===_(t)&&(a=!1),null!=t.showLegend&&(n.showLegend=t.showLegend))),a&&"service-name"!==r.sublayerTitleMode&&(r.sublayerTitleMode="item-title-and-service-name"),n));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function j(e,t){return x.apply(this,arguments)}function x(){return(x=Object(n.a)(i.a.mark((function e(t,r){var n,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(null==(n=t)?void 0:n.layers)&&null!=(null==(a=t)?void 0:a.tables)){e.next=5;break}return e.next=3,Object(f.a)(r);case 3:o=e.sent,(t=t||{}).layers=t.layers||(null==o?void 0:o.layers),t.tables=t.tables||(null==o?void 0:o.tables);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var t=e.layers;if(t&&t.length)return t[0].id;var r=e.tables;return r&&r.length?r[0].id:null}function I(e,t){var r=e.layers;if(r)for(var n=0;n<r.length;n++)if(r[n].id===t)return r[n];var a=e.tables;if(a)for(var i=0;i<a.length;i++)if(a[i].id===t)return a[i];return null}function _(e){var t,r,n,a;return(null!=(t=null==e||null==(r=e.layers)?void 0:r.length)?t:0)+(null!=(n=null==e||null==(a=e.tables)?void 0:a.length)?n:0)}function S(e){return"stream"!==e.type&&"layerId"in e}},iSxr:function(e,t,r){var n=r("fT8P"),a=r("h/Mk"),i=r("GHf2")("species");e.exports=function(e,t){var r;return a(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!a(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},iuCb:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return a}));var n=r("rNep");function a(e,t,r){if(e.count===t.count)for(var a=e.count,i=r[0],o=r[1],u=r[2],s=r[4],l=r[5],c=r[6],f=r[8],h=r[9],p=r[10],d=r[12],y=r[13],v=r[14],b=e.typedBuffer,m=e.typedBufferStride,g=t.typedBuffer,O=t.typedBufferStride,w=0;w<a;w++){var j=w*m,x=w*O,k=g[x],I=g[x+1],_=g[x+2];b[j]=i*k+s*I+f*_+d,b[j+1]=o*k+l*I+h*_+y,b[j+2]=u*k+c*I+p*_+v}else n.a.error("source and destination buffers need to have the same number of elements")}function i(e,t,r){if(e.count===t.count)for(var a=e.count,i=r[0],o=r[1],u=r[2],s=r[3],l=r[4],c=r[5],f=r[6],h=r[7],p=r[8],d=e.typedBuffer,y=e.typedBufferStride,v=t.typedBuffer,b=t.typedBufferStride,m=0;m<a;m++){var g=m*y,O=m*b,w=v[O],j=v[O+1],x=v[O+2];d[g]=i*w+s*j+f*x,d[g+1]=o*w+l*j+h*x,d[g+2]=u*w+c*j+p*x}else n.a.error("source and destination buffers need to have the same number of elements")}function o(e,t,r){for(var n=Math.min(e.count,t.count),a=e.typedBuffer,i=e.typedBufferStride,o=t.typedBuffer,u=t.typedBufferStride,s=0;s<n;s++){var l=s*i,c=s*u;a[l]=r*o[c],a[l+1]=r*o[c+1],a[l+2]=r*o[c+2]}}function u(e,t){for(var r=Math.min(e.count,t.count),n=e.typedBuffer,a=e.typedBufferStride,i=t.typedBuffer,o=t.typedBufferStride,u=0;u<r;u++){var s=u*a,l=u*o,c=i[l],f=i[l+1],h=i[l+2],p=Math.sqrt(c*c+f*f+h*h);if(p>0){var d=1/p;n[s]=d*c,n[s+1]=d*f,n[s+2]=d*h}}}function s(e,t,r){for(var n=Math.min(e.count,t.count),a=e.typedBuffer,i=e.typedBufferStride,o=t.typedBuffer,u=t.typedBufferStride,s=0;s<n;s++){var l=s*i,c=s*u;a[l]=o[c]>>r,a[l+1]=o[c+1]>>r,a[l+2]=o[c+2]>>r}}Object.freeze({__proto__:null,transformMat4:a,transformMat3:i,scale:o,normalize:u,shiftRight:s})},ixqo:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));var n=r("xYvT");function a(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,i=t.typedBuffer,o=t.typedBufferStride,u=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*a,l=(r&&r.srcIndex?r.srcIndex:0)*o,c=0;c<u;++c)n[s]=i[l],n[s+1]=i[l+1],s+=a,l+=o}function i(e,t,r){var i=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,s=t.typedBufferStride,l=r?r.count:t.count,c=(r&&r.dstIndex?r.dstIndex:0)*o,f=(r&&r.srcIndex?r.srcIndex:0)*s;if(Object(n.b)(t.elementType)){var h=Object(n.d)(t.elementType);if(Object(n.c)(t.elementType))for(var p=0;p<l;++p)i[c]=Math.max(u[f]/h,-1),i[c+1]=Math.max(u[f+1]/h,-1),c+=o,f+=s;else for(var d=0;d<l;++d)i[c]=u[f]/h,i[c+1]=u[f+1]/h,c+=o,f+=s}else a(e,t,r);return e}function o(e,t,r,n){for(var a,i,o=e.typedBuffer,u=e.typedBufferStride,s=null!=(a=null==n?void 0:n.count)?a:e.count,l=(null!=(i=null==n?void 0:n.dstIndex)?i:0)*u,c=0;c<s;++c)o[l]=t,o[l+1]=r,l+=u}Object.freeze({__proto__:null,copy:a,normalizeIntegerBuffer:i,fill:o})},jOoW:function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return b})),r.d(t,"i",(function(){return i})),r.d(t,"j",(function(){return y})),r.d(t,"k",(function(){return d})),r.d(t,"l",(function(){return p})),r.d(t,"m",(function(){return h}));var n=r("7im+");r("nd5+"),r("+MdM");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;return[e[0],e[1],e[2],e[3],e[4],e[5]]}function i(e,t,r,n,i,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a();return u[0]=e,u[1]=t,u[2]=r,u[3]=n,u[4]=i,u[5]=o,u}function o(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function u(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function s(e,t,r){var n=t.length,a=e[0],i=e[1],o=e[2],u=e[3],s=e[4],l=e[5];if(r)for(var c=0;c<n;c++){var f=t[c];a=Math.min(a,f[0]),i=Math.min(i,f[1]),o=Math.min(o,f[2]),u=Math.max(u,f[0]),s=Math.max(s,f[1]),l=Math.max(l,f[2])}else for(var h=0;h<n;h++){var p=t[h];a=Math.min(a,p[0]),i=Math.min(i,p[1]),u=Math.max(u,p[0]),s=Math.max(s,p[1])}e[0]=a,e[1]=i,e[2]=o,e[3]=u,e[4]=s,e[5]=l}function l(e){return e[0]>=e[3]?0:e[3]-e[0]}function c(e){return e[1]>=e[4]?0:e[4]-e[1]}function f(e){return e[2]>=e[5]?0:e[5]-e[2]}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=l(e),t[1]=c(e),t[2]=f(e),t}function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function y(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function v(e){return e?y(e,O):a(O)}function b(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function m(e){return 6===e.length}function g(e,t,r){if(Object(n.h)(e)||Object(n.h)(t))return e===t;if(!m(e)||!m(t))return!1;if(r){for(var a=0;a<e.length;a++)if(!r(e[a],t[a]))return!1}else for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var O=[1/0,1/0,1/0,-1/0,-1/0,-1/0],w=[0,0,0,0,0,0];a()},kzti:function(e,t,r){"use strict";function n(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,i=t.typedBuffer,o=t.typedBufferStride,u=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*a,l=(r&&r.srcIndex?r.srcIndex:0)*o,c=0;c<u;++c)n[s]=i[l],n[s+1]=i[l+1],n[s+2]=i[l+2],s+=a,l+=o}function a(e,t,r,n,a){for(var i,o,u=e.typedBuffer,s=e.typedBufferStride,l=null!=(i=null==a?void 0:a.count)?i:e.count,c=(null!=(o=null==a?void 0:a.dstIndex)?o:0)*s,f=0;f<l;++f)u[c]=t,u[c+1]=r,u[c+2]=n,c+=s}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));Object.freeze({__proto__:null,copy:n,fill:a})},lWwP:function(e,t,r){"use strict";r.d(t,"a",(function(){return R})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return P})),r.d(t,"d",(function(){return C})),r.d(t,"e",(function(){return M})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return I})),r.d(t,"h",(function(){return x})),r.d(t,"i",(function(){return w})),r.d(t,"j",(function(){return D})),r.d(t,"k",(function(){return E}));var n=r("aNYv"),a=r("eijD"),i=r("NthX"),o=r.n(i),u=(r("ZTBZ"),r("Mp7X")),s=r("7im+"),l=r("a1Tm"),c=r("B9Yk"),f=r("3p7a"),h=r("nd5+"),p=r("OTJA"),d=5e-4,y=function(e,t){var r=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||r)},v=function(e,t){var r=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,n=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs(r-e[2*t.rows+2]),Math.abs(n-e[2*t.rows+3])]},b={3395:20037508.342789244,3410:17334193.943686873,3832:3339584.723798206,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,8858:7396237.374497803,8859:2465412.4581659334,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53025:7276828.3848298555,53031:10384677.558821043,53034:20015086.79602057,53036:7389443.187332862,53037:2463147.729110953,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54025:7311399.09166516,54031:10396310.810074743,54034:20037508.342789244,54050:808820.9223376509,54053:1920897.3915568967,54079:20037508.342789244,54080:20037508.342789244,54099:13524439.768288724,54100:20037508.342789244,54101:20037508.342789244,102038:4297258.582585486,102299:5013965.117483125};function m(){return g.apply(this,arguments)}function g(){return(g=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(c.f)()&&Object(c.g)()){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Object(c.h)();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,r){if(!y(e.spatialReference,t))return null;if(!Object(c.f)())throw new u.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");return r?Object(c.d)(t,e.spatialReference,e):Object(c.d)(e.spatialReference,t,e)}function w(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.spatialReference.equals(t))return e;var a=y(e.spatialReference,t);if(a&&!Object(c.f)())throw new u.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");var i=r.center,o=new h.a({xmin:i.x-e.x/2,xmax:i.x+e.x/2,ymin:i.y-e.y/2,ymax:i.y+e.y/2,spatialReference:e.spatialReference}),s=a?Object(c.i)(o,t,n):Object(f.d)(o,t);return null==s?null:{x:s.xmax-s.xmin,y:s.ymax-s.ymin}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;return Object(l.d)(e)?t/Object(l.d)(e):0}function x(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.spatialReference;if(i.equals(t))return e;var o=y(i,t);if(o&&!Object(c.f)())throw new u.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");var s=o?Object(c.i)(e,t,r):Object(f.d)(e,t);if(s&&a&&t.isGeographic){var l=T(i,!0),h=Object(n.a)(l,2),p=h[0],v=h[1],b=j(i);b&&null!=p&&null!=v&&(Math.abs(e.x-p)<b&&Math.abs(180-s.x)<d?s.x-=360:Math.abs(e.x-v)<b&&Math.abs(180+s.x)<d&&(s.x+=360))}return s}function k(e){var t=S(e[0].spatialReference);if(e.length<2||!Object(s.i)(t))return e[0];for(var r=e[0],n=r.xmin,a=r.xmax,i=r.ymin,o=r.ymax,u=1;u<e.length;u++){var l=e[u];a=l.xmax+t*u,i=Math.min(i,l.ymin),o=Math.max(o,l.ymax)}return new h.a({xmin:n,xmax:a,ymin:i,ymax:o,spatialReference:e[0].spatialReference})}function I(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.spatialReference.equals(t))return e;var a=M(e),i=S(e.spatialReference,!0);return Object(s.i)(i)&&0!==a?k(e.clone().normalize().map((function(e){return _(e,t,r,n)}))):_(e,t,r,n)}function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.spatialReference;if(i.equals(t))return e;var o=y(i,t);if(o&&!Object(c.f)())throw new u.a("rasterprojectionhelper-projectExtent","projection engine is not loaded");var s=o?Object(c.i)(e,t,r):Object(f.d)(e,t),l=T(i,!0),h=Object(n.a)(l,2),v=h[0],b=h[1];if(s&&a&&i.isWebMercator&&t.isGeographic&&null!=v&&null!=b){var m=.001,g=1e3;if(Math.abs(e.xmin-v)<m&&Math.abs(b-e.xmax)>g&&Math.abs(180-s.xmax)<d){s.xmin=-180;var O=[];O.push(new p.a(e.xmax,e.ymin,i)),O.push(new p.a(e.xmax,(e.ymin+e.ymax)/2,i)),O.push(new p.a(e.xmax,e.ymax,i));var w=O.map((function(e){return x(e,t,r)})).filter((function(e){return!isNaN(null==e?void 0:e.x)})).map((function(e){return e.x}));s.xmax=Math.max.apply(null,w)}if(Math.abs(e.xmax-b)<m&&Math.abs(v-e.xmin)>g&&Math.abs(180+s.xmin)<d){s.xmax=180;var k=[];k.push(new p.a(e.xmin,e.ymin,i)),k.push(new p.a(e.xmin,(e.ymin+e.ymax)/2,i)),k.push(new p.a(e.xmin,e.ymax,i));var I=k.map((function(e){return x(e,t,r)})).filter((function(e){return!isNaN(null==e?void 0:e.x)})).map((function(e){return e.x}));s.xmin=Math.min.apply(null,I)}}var _=T(t,!0),S=Object(n.a)(_,2);v=S[0],b=S[1];var A=j(t);return A&&null!=v&&null!=b&&(Math.abs(s.xmin-v)<A&&(s.xmin=v),Math.abs(s.xmax-b)<A&&(s.xmax=b)),s}function S(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t?20037508.342787:20037508.342788905;return e.isWebMercator?2*r:e.wkid&&e.isGeographic?360:2*b[e.wkid]||null}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=S(e,t);return Object(s.i)(n)&&(r.push(-n/2),r.push(n/2)),r}function A(e,t,r,n){var a=(e-t)/r;return a-Math.floor(a)!=0?a=Math.floor(a):n&&(a-=1),a}function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=S(e.spatialReference);if(!Object(s.i)(r))return 0;var n=t?0:-r/2;return A(e.xmax,n,r,!0)-A(e.xmin,n,r,!1)}function C(e){var t=e.storageInfo.origin.x,r=S(e.spatialReference,!0);if(!Object(s.i)(r))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};for(var n=r/2,a=e.nativePixelSize,i=e.storageInfo,o=e.extent,u=i.maximumPyramidLevel,l=i.blockWidth,c=i.pyramidScalingFactor,f=a.x,h=[],p=Object(s.i)(e.transform)&&"gcs-shift"===e.transform.type,d=t+n,y=p?r-t:n-t,v=0;v<=u;v++){var b=(o.xmax-t)/f/l,m=b-Math.floor(b)==0?b:Math.ceil(b),g=(r/2-t)/f/l,O=g-Math.floor(g)==0?g:Math.ceil(g),w=Math.floor(d/f/l),j=Math.round(d/f)%l,x=(l-Math.round(y/f)%l)%l;h.push({resolutionX:f,blockWidth:l,datsetColumnCount:m,worldColumnCountFromOrigin:O,leftMargin:j,rightPadding:x,originColumnOffset:w}),f*=c}return{originX:t,halfWorldWidth:n,pyramidsInfo:h,hasGCSSShiftTransform:p}}function P(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[32,32];if(y(e.spatialReference,t.spatialReference)&&!Object(c.f)())throw new u.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&t&&r))return null;var l=e.xmin,f=e.ymin,h=e.xmax,d=e.ymax,b=e.spatialReference,m=t.spatialReference,g=S(m);i=i||"gcs-shift"===(null==a?void 0:a.type);for(var O,w={x:o[0]*r.x,y:o[1]*r.y},j={cols:Math.ceil((h-l)/w.x-.1)+1,rows:Math.ceil((d-f)/w.y-.1)+1},k=w.x,I=w.y,_=[],T=!1,A=0;A<j.cols;A++){for(var M=[],C=0;C<j.rows;C++){var P=x(new p.a({x:l+k*A,y:d-I*C,spatialReference:b}),m,n);a&&(P=a.inverseTransform(P)),M.push(P),A>0&&i&&P&&O[C]&&Object(s.i)(g)&&P.x<O[C].x&&(P.x+=g),P?(_.push((P.x-t.xmin)/(t.xmax-t.xmin)),_.push((t.ymax-P.y)/(t.ymax-t.ymin))):(_.push(NaN),_.push(NaN),T=!0)}O=M}for(var D=v(_,j),E=new Float32Array((j.cols-1)*(j.rows-1)*2*6),R=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),N=new Float32Array([-1,1,0,0,-1,1,1,0,0]),B=0;B<j.cols-1;B++){for(var F=0;F<j.rows-1;F++){for(var L=B*j.rows*2+2*F,U=_[L],G=_[L+1],z=_[L+2],V=_[L+3],H=_[L+=2*j.rows],J=_[L+1],W=_[L+2],q=_[L+3],Z=0,Y=12*(F*(j.cols-1)+B),K=0;K<3;K++)E[Y++]=R[Z++]*U+R[Z++]*z+R[Z++]*W;Z=0;for(var X=0;X<3;X++)E[Y++]=R[Z++]*G+R[Z++]*V+R[Z++]*q;Z=0;for(var Q=0;Q<3;Q++)E[Y++]=N[Z++]*U+N[Z++]*H+N[Z++]*W;Z=0;for(var $=0;$<3;$++)E[Y++]=N[Z++]*G+N[Z++]*J+N[Z++]*q}if(T)for(var ee=0;ee<E.length;ee++)isNaN(E[ee])&&(E[ee]=-1)}return{offsets:_,error:D,coefficients:E,spacing:o,size:[j.cols-1,j.rows-1]}}function D(e){var t=e.clone().normalize();return 1===t.length?t[0]:k(t)}function E(e,t,r){var n,a=t.storageInfo,i=t.pixelSize,o=!1,u=a.pyramidResolutions;if(Object(s.i)(u)&&u.length){var l=(e.x+e.y)/2,c=u[u.length-1],f=(c.x+c.y)/2,h=(i.x+i.y)/2;if(l<=h)n=0;else if(l>=f)n=u.length,o=l/f>8;else for(var d,y=h,v=1;v<=u.length;v++){if(l<=(d=(u[v-1].x+u[v-1].y)/2)){l===d?n=v:"down"===r?(n=v-1,o=l/y>8):n="up"===r||l-y>d-l||l/y>2?v:v-1;break}y=d}var b=0===n?i:u[n-1];return{pyramidLevel:n,pyramidResolution:new p.a({x:b.x,y:b.y,spatialReference:t.spatialReference}),excessiveReading:o}}var m=Math.log(e.x/i.x)/Math.LN2,g=Math.log(e.y/i.y)/Math.LN2,O=t.storageInfo.maximumPyramidLevel||0;(n="down"===r?Math.floor(Math.min(m,g)):"up"===r?Math.ceil(Math.max(m,g)):Math.round((m+g)/2))<0?n=0:n>O&&(o=n>O+3,n=O);var w=Math.pow(2,n);return{pyramidLevel:n,pyramidResolution:new p.a({x:w*t.nativePixelSize.x,y:w*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:o}}function R(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=e.extent,i=e.spatialReference,o=e.pixelSize,u=w(new p.a({x:o.x,y:o.y,spatialReference:i}),t,a);if(null==u)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var s=(u.x+u.y)/2,c=Object(l.d)(t),f=s*c*96*39.37,h=t.isGeographic?256/r*295828763.7958547:256/r*591657527.591555,d=!1,y=I(a,t);n&&(t.isGeographic||t.isWebMercator)&&(d=y.xmin*y.xmax<0);var v,b=f,m=1.001;if(d){b=h;var g=t.isGeographic?1341104507446289e-21:.29858214164761665,O=g*(96*c*39.37),j=t.isGeographic?4326:3857;(v=w(new p.a({x:g,y:g,spatialReference:{wkid:j}}),i,y)).x*=b/O,v.y*=b/O}else{v={x:o.x,y:o.y};for(var x=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2),k=0;b<h*(m/2)&&k<x;)k++,b*=2,v.x*=2,v.y*=2;Math.max(b,h)/Math.min(b,h)<=m&&(b=h)}for(var _=[b],S=[{x:v.x,y:v.y}],T=70.5310735,A=Math.min(T,f)/m;b>=A;)b/=2,v.x/=2,v.y/=2,_.push(b),S.push({x:v.x,y:v.y});return{projectedPixelSize:u,scales:_,srcResolutions:S,isCustomTilingScheme:!d}}},lYc8:function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return W})),r.d(t,"c",(function(){return V})),r.d(t,"d",(function(){return R})),r.d(t,"e",(function(){return J})),r.d(t,"f",(function(){return N})),r.d(t,"g",(function(){return B})),r.d(t,"h",(function(){return z}));var n=r("mK0O"),a=r("6zn5"),i=r("WSH1");function o(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t%4!=0||r%4!=0){var a=new ArrayBuffer(4*Math.ceil(r/4)),i=new Uint8Array(a),o=new Uint8Array(e,t,r);if(n)for(var u=0;u<i.length;u+=4)i[u]=o[u+3],i[u+1]=o[u+2],i[u+2]=o[u+1],i[u+3]=o[u];else i.set(o);return new Uint32Array(i.buffer)}if(n){for(var s=new Uint8Array(e,t,r),l=new Uint8Array(s.length),c=0;c<l.length;c+=4)l[c]=s[c+3],l[c+1]=s[c+2],l[c+2]=s[c+1],l[c+3]=s[c];return new Uint32Array(l.buffer)}return new Uint32Array(e,t,r/4)}function u(){for(var e=[],t=0;t<=257;t++)e[t]=[t];return e}function s(e,t){for(var r=0;r<t.length;r++)e.push(t[r])}var l=new Set;function c(e,t,r){for(var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=o(e,t,r,n),i=9,c=u(),f=32,h=c.length,p=[],d=1,y=a[0],v=0,b=a.length,m=8*(4*b-r),g=[];null!=y;){if(f>=i)f-=i,v=y>>>32-i,y<<=i;else{var O=i-f;v=((v=y>>>32-f)<<O)+((y=a[d++])>>>(f=32-O)),y<<=O}if(257===v)break;if(256!==v){var w=c[v];if(null==w){if(v>c.length)throw"data integrity issue: code does not exist on code page";p.push(p[0]),c[h++]=p.slice(),s(g,p)}else s(g,w),p.push(w[0]),p.length>1&&(c[h++]=p.slice()),p=w.slice();if(l.has(h)&&i++,0===f&&(y=a[d++],f=32),d>b||d===b&&f<=m)break}else i=9,h=(c=u()).length,p=[]}return new Uint8Array(g)}l.add(511),l.add(1023),l.add(2047),l.add(4095),l.add(8191);var f=r("wSxL"),h=r("HYzH"),p=r("BZlr");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v,b,m,g,O={exports:{}};void 0!==(v={unstuff:function(e,t,r,n,a,i,o,u){var s,l,c,f,h,p=(1<<r)-1,d=0,y=0,v=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*v,a)for(s=0;s<n;s++)0===y&&(c=e[d++],y=32),y>=r?(l=c>>>y-r&p,y-=r):(l=(c&p)<<(f=r-y)&p,l+=(c=e[d++])>>>(y=32-f)),t[s]=a[l];else for(h=Math.ceil((u-i)/o),s=0;s<n;s++)0===y&&(c=e[d++],y=32),y>=r?(l=c>>>y-r&p,y-=r):(l=(c&p)<<(f=r-y)&p,l+=(c=e[d++])>>>(y=32-f)),t[s]=l<h?i+l*o:u},unstuffLUT:function(e,t,r,n,a,i){var o,u=(1<<t)-1,s=0,l=0,c=0,f=0,h=0,p=[],d=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*d;var y=Math.ceil((i-n)/a);for(l=0;l<r;l++)0===f&&(o=e[s++],f=32),f>=t?(h=o>>>f-t&u,f-=t):(h=(o&u)<<(c=t-f)&u,h+=(o=e[s++])>>>(f=32-c)),p[l]=h<y?n+h*a:i;return p.unshift(n),p},unstuff2:function(e,t,r,n,a,i,o,u){var s,l,c,f,h=(1<<r)-1,p=0,d=0,y=0;if(a)for(s=0;s<n;s++)0===d&&(c=e[p++],d=32,y=0),d>=r?(l=c>>>y&h,d-=r,y+=r):(l=c>>>y&h,d=32-(f=r-d),l|=((c=e[p++])&(1<<f)-1)<<r-f,y=f),t[s]=a[l];else{var v=Math.ceil((u-i)/o);for(s=0;s<n;s++)0===d&&(c=e[p++],d=32,y=0),d>=r?(l=c>>>y&h,d-=r,y+=r):(l=c>>>y&h,d=32-(f=r-d),l|=((c=e[p++])&(1<<f)-1)<<r-f,y=f),t[s]=l<v?i+l*o:u}return t},unstuffLUT2:function(e,t,r,n,a,i){var o,u=(1<<t)-1,s=0,l=0,c=0,f=0,h=0,p=0,d=[],y=Math.ceil((i-n)/a);for(l=0;l<r;l++)0===f&&(o=e[s++],f=32,p=0),f>=t?(h=o>>>p&u,f-=t,p+=t):(h=o>>>p&u,f=32-(c=t-f),h|=((o=e[s++])&(1<<c)-1)<<t-c,p=c),d[l]=h<y?n+h*a:i;return d.unshift(n),d},originalUnstuff:function(e,t,r,n){var a,i,o,u,s=(1<<r)-1,l=0,c=0,f=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*f,a=0;a<n;a++)0===c&&(o=e[l++],c=32),c>=r?(i=o>>>c-r&s,c-=r):(i=(o&s)<<(u=r-c)&s,i+=(o=e[l++])>>>(c=32-u)),t[a]=i;return t},originalUnstuff2:function(e,t,r,n){var a,i,o,u,s=(1<<r)-1,l=0,c=0,f=0;for(a=0;a<n;a++)0===c&&(o=e[l++],c=32,f=0),c>=r?(i=o>>>f&s,c-=r,f+=r):(i=o>>>f&s,c=32-(u=r-c),i|=((o=e[l++])&(1<<u)-1)<<r-u,f=u),t[a]=i;return t}},b={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,a=Math.floor(n/2),i=0;a;){var o=a>=359?359:a;a-=o;do{t+=e[i++]<<8,r+=t+=e[i++]}while(--o);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=t+=e[i]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),a={};if(a.fileIdentifierString=String.fromCharCode.apply(null,n),0!==a.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+a.fileIdentifierString;r+=6;var i,o=new DataView(e,r,8),u=o.getInt32(0,!0);if(a.fileVersion=u,r+=4,u>=3&&(a.checksum=o.getUint32(4,!0),r+=4),o=new DataView(e,r,12),a.height=o.getUint32(0,!0),a.width=o.getUint32(4,!0),r+=8,u>=4?(a.numDims=o.getUint32(8,!0),r+=4):a.numDims=1,o=new DataView(e,r,40),a.numValidPixel=o.getUint32(0,!0),a.microBlockSize=o.getInt32(4,!0),a.blobSize=o.getInt32(8,!0),a.imageType=o.getInt32(12,!0),a.maxZError=o.getFloat64(16,!0),a.zMin=o.getFloat64(24,!0),a.zMax=o.getFloat64(32,!0),r+=40,t.headerInfo=a,t.ptr=r,u>=3&&(i=u>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-i,a.blobSize-14))!==a.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),a=r.numDims*this.getDataTypeSize(r.imageType),i=this.readSubArray(e,t.ptr,n,a),o=this.readSubArray(e,t.ptr+a,n,a);t.ptr+=2*a;var u,s=!0;for(u=0;u<r.numDims;u++)if(i[u]!==o[u]){s=!1;break}return r.minValues=i,r.maxValues=o,s},readSubArray:function(e,t,r,n){var a;if(r===Uint8Array)a=new Uint8Array(e,t,n);else{var i=new ArrayBuffer(n);new Uint8Array(i).set(new Uint8Array(e,t,n)),a=new r(i)}return a},readMask:function(e,t){var r,n,a=t.ptr,i=t.headerInfo,o=i.width*i.height,u=i.numValidPixel,s=new DataView(e,a,4),l={};if(l.numBytes=s.getUint32(0,!0),a+=4,(0===u||o===u)&&0!==l.numBytes)throw"invalid mask";if(0===u)r=new Uint8Array(Math.ceil(o/8)),l.bitset=r,n=new Uint8Array(o),t.pixels.resultMask=n,a+=l.numBytes;else if(l.numBytes>0){r=new Uint8Array(Math.ceil(o/8));var c=(s=new DataView(e,a,l.numBytes)).getInt16(0,!0),f=2,h=0,p=0;do{if(c>0)for(;c--;)r[h++]=s.getUint8(f++);else for(p=s.getUint8(f++),c=-c;c--;)r[h++]=p;c=s.getInt16(f,!0),f+=2}while(f<l.numBytes);if(-32768!==c||h<r.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(o);var d=0,y=0;for(y=0;y<o;y++)7&y?(d=r[y>>3],d<<=7&y):d=r[y>>3],128&d&&(n[y]=1);t.pixels.resultMask=n,l.bitset=r,a+=l.numBytes}return t.ptr=a,t.mask=l,!0},readDataOneSweep:function(e,t,r,n){var a,i=t.ptr,o=t.headerInfo,u=o.numDims,s=o.width*o.height,l=o.imageType,c=o.numValidPixel*b.getDataTypeSize(l)*u,f=t.pixels.resultMask;if(r===Uint8Array)a=new Uint8Array(e,i,c);else{var h=new ArrayBuffer(c);new Uint8Array(h).set(new Uint8Array(e,i,c)),a=new r(h)}if(a.length===s*u)t.pixels.resultPixels=n?b.swapDimensionOrder(a,s,u,r,!0):a;else{t.pixels.resultPixels=new r(s*u);var p=0,d=0,y=0,v=0;if(u>1){if(n){for(d=0;d<s;d++)if(f[d])for(v=d,y=0;y<u;y++,v+=s)t.pixels.resultPixels[v]=a[p++]}else for(d=0;d<s;d++)if(f[d])for(v=d*u,y=0;y<u;y++)t.pixels.resultPixels[v+y]=a[p++]}else for(d=0;d<s;d++)f[d]&&(t.pixels.resultPixels[d]=a[p++])}return i+=c,t.ptr=i,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var a=n.getInt32(4,!0),i=n.getInt32(8,!0),o=n.getInt32(12,!0);if(i>=o)return!1;var u=new Uint32Array(o-i);b.decodeBits(e,t,u);var s,l,c,f,h=[];for(s=i;s<o;s++)h[l=s-(s<a?0:a)]={first:u[s-i],second:null};var p=e.byteLength-t.ptr,d=Math.ceil(p/4),y=new ArrayBuffer(4*d);new Uint8Array(y).set(new Uint8Array(e,t.ptr,p));var v,g=new Uint32Array(y),O=0,w=0;for(v=g[0],s=i;s<o;s++)(f=h[l=s-(s<a?0:a)].first)>0&&(h[l].second=v<<O>>>32-f,32-O>=f?32===(O+=f)&&(O=0,v=g[++w]):(O+=f-32,v=g[++w],h[l].second|=v>>>32-O));var j,x=0,k=new m;for(s=0;s<h.length;s++)void 0!==h[s]&&(x=Math.max(x,h[s].first));j=x>=r?r:x;var I,_,S,T,A,M=[];for(s=i;s<o;s++)if((f=h[l=s-(s<a?0:a)].first)>0)if(I=[f,l],f<=j)for(_=h[l].second<<j-f,S=1<<j-f,c=0;c<S;c++)M[_|c]=I;else for(_=h[l].second,A=k,T=f-1;T>=0;T--)_>>>T&1?(A.right||(A.right=new m),A=A.right):(A.left||(A.left=new m),A=A.left),0!==T||A.val||(A.val=I[1]);return{decodeLut:M,numBitsLUTQick:j,numBitsLUT:x,tree:k,stuffedData:g,srcPtr:w,bitPos:O}},readHuffman:function(e,t,r,n){var a,i,o,u,s,l,c,f,h,p=t.headerInfo.numDims,d=t.headerInfo.height,y=t.headerInfo.width,v=y*d,m=this.readHuffmanTree(e,t),g=m.decodeLut,O=m.tree,w=m.stuffedData,j=m.srcPtr,x=m.bitPos,k=m.numBitsLUTQick,I=m.numBitsLUT,_=0===t.headerInfo.imageType?128:0,S=t.pixels.resultMask,T=0;x>0&&(j++,x=0);var A,M=w[j],C=1===t.encodeMode,P=new r(v*p),D=P;if(p<2||C){for(A=0;A<p;A++)if(p>1&&(D=new r(P.buffer,v*A,v),T=0),t.headerInfo.numValidPixel===y*d)for(f=0,l=0;l<d;l++)for(c=0;c<y;c++,f++){if(i=0,s=u=M<<x>>>32-k,32-x<k&&(s=u|=w[j+1]>>>64-x-k),g[s])i=g[s][1],x+=g[s][0];else for(s=u=M<<x>>>32-I,32-x<I&&(s=u|=w[j+1]>>>64-x-I),a=O,h=0;h<I;h++)if(!(a=u>>>I-h-1&1?a.right:a.left).left&&!a.right){i=a.val,x=x+h+1;break}x>=32&&(x-=32,M=w[++j]),o=i-_,C?(o+=c>0?T:l>0?D[f-y]:T,o&=255,D[f]=o,T=o):D[f]=o}else for(f=0,l=0;l<d;l++)for(c=0;c<y;c++,f++)if(S[f]){if(i=0,s=u=M<<x>>>32-k,32-x<k&&(s=u|=w[j+1]>>>64-x-k),g[s])i=g[s][1],x+=g[s][0];else for(s=u=M<<x>>>32-I,32-x<I&&(s=u|=w[j+1]>>>64-x-I),a=O,h=0;h<I;h++)if(!(a=u>>>I-h-1&1?a.right:a.left).left&&!a.right){i=a.val,x=x+h+1;break}x>=32&&(x-=32,M=w[++j]),o=i-_,C?(c>0&&S[f-1]?o+=T:l>0&&S[f-y]?o+=D[f-y]:o+=T,o&=255,D[f]=o,T=o):D[f]=o}}else for(f=0,l=0;l<d;l++)for(c=0;c<y;c++)if(f=l*y+c,!S||S[f])for(A=0;A<p;A++,f+=v){if(i=0,s=u=M<<x>>>32-k,32-x<k&&(s=u|=w[j+1]>>>64-x-k),g[s])i=g[s][1],x+=g[s][0];else for(s=u=M<<x>>>32-I,32-x<I&&(s=u|=w[j+1]>>>64-x-I),a=O,h=0;h<I;h++)if(!(a=u>>>I-h-1&1?a.right:a.left).left&&!a.right){i=a.val,x=x+h+1;break}x>=32&&(x-=32,M=w[++j]),o=i-_,D[f]=o}t.ptr=t.ptr+4*(j+1)+(x>0?4:0),t.pixels.resultPixels=P,p>1&&!n&&(t.pixels.resultPixels=b.swapDimensionOrder(P,v,p,r))},decodeBits:function(e,t,r,n,a){var i=t.headerInfo,o=i.fileVersion,u=0,s=e.byteLength-t.ptr>=5?5:e.byteLength-t.ptr,l=new DataView(e,t.ptr,s),c=l.getUint8(0);u++;var f=c>>6,h=0===f?4:3-f,p=(32&c)>0,d=31&c,y=0;if(1===h)y=l.getUint8(u),u++;else if(2===h)y=l.getUint16(u,!0),u+=2;else{if(4!==h)throw"Invalid valid pixel count type";y=l.getUint32(u,!0),u+=4}var b,m,g,O,w,j,x,k,I,_=2*i.maxZError,S=i.numDims>1?i.maxValues[a]:i.zMax;if(p){for(t.counter.lut++,k=l.getUint8(u),u++,O=Math.ceil((k-1)*d/8),w=Math.ceil(O/4),m=new ArrayBuffer(4*w),g=new Uint8Array(m),t.ptr+=u,g.set(new Uint8Array(e,t.ptr,O)),x=new Uint32Array(m),t.ptr+=O,I=0;k-1>>>I;)I++;O=Math.ceil(y*I/8),w=Math.ceil(O/4),m=new ArrayBuffer(4*w),(g=new Uint8Array(m)).set(new Uint8Array(e,t.ptr,O)),b=new Uint32Array(m),t.ptr+=O,j=o>=3?v.unstuffLUT2(x,d,k-1,n,_,S):v.unstuffLUT(x,d,k-1,n,_,S),o>=3?v.unstuff2(b,r,I,y,j):v.unstuff(b,r,I,y,j)}else t.counter.bitstuffer++,I=d,t.ptr+=u,I>0&&(O=Math.ceil(y*I/8),w=Math.ceil(O/4),m=new ArrayBuffer(4*w),(g=new Uint8Array(m)).set(new Uint8Array(e,t.ptr,O)),b=new Uint32Array(m),t.ptr+=O,o>=3?null==n?v.originalUnstuff2(b,r,I,y):v.unstuff2(b,r,I,y,!1,n,_,S):null==n?v.originalUnstuff(b,r,I,y):v.unstuff(b,r,I,y,!1,n,_,S))},readTiles:function(e,t,r,n){var a=t.headerInfo,i=a.width,o=a.height,u=i*o,s=a.microBlockSize,l=a.imageType,c=b.getDataTypeSize(l),f=Math.ceil(i/s),h=Math.ceil(o/s);t.pixels.numBlocksY=h,t.pixels.numBlocksX=f,t.pixels.ptr=0;var p,d,y,v,m,g,O,w,j,x,k=0,I=0,_=0,S=0,T=0,A=0,M=0,C=0,P=0,D=0,E=0,R=0,N=0,B=0,F=0,L=new r(s*s),U=o%s||s,G=i%s||s,z=a.numDims,V=t.pixels.resultMask,H=t.pixels.resultPixels,J=a.fileVersion>=5?14:15,W=a.zMax;for(_=0;_<h;_++)for(T=_!==h-1?s:U,S=0;S<f;S++)for(D=_*i*s+S*s,E=i-(A=S!==f-1?s:G),w=0;w<z;w++){if(z>1?(x=H,D=_*i*s+S*s,H=new r(t.pixels.resultPixels.buffer,u*w*c,u),W=a.maxValues[w]):x=null,M=e.byteLength-t.ptr,d={},F=0,C=(p=new DataView(e,t.ptr,Math.min(10,M))).getUint8(0),F++,j=a.fileVersion>=5?4&C:0,P=C>>6&255,(C>>2&J)!=(S*s>>3&J))throw"integrity issue";if(j&&0===w)throw"integrity issue";if((m=3&C)>3)throw t.ptr+=F,"Invalid block encoding ("+m+")";if(2!==m)if(0===m){if(j)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=F,R=(R=T*A*c)<(N=e.byteLength-t.ptr)?R:N,y=new ArrayBuffer(R%c==0?R:R+c-R%c),new Uint8Array(y).set(new Uint8Array(e,t.ptr,R)),v=new r(y),B=0,V)for(k=0;k<T;k++){for(I=0;I<A;I++)V[D]&&(H[D]=v[B++]),D++;D+=E}else for(k=0;k<T;k++){for(I=0;I<A;I++)H[D++]=v[B++];D+=E}t.ptr+=B*c}else if(g=b.getDataTypeUsed(j&&l<6?4:l,P),O=b.getOnePixel(d,F,g,p),F+=b.getDataTypeSize(g),3===m)if(t.ptr+=F,t.counter.constantoffset++,V)for(k=0;k<T;k++){for(I=0;I<A;I++)V[D]&&(H[D]=j?Math.min(W,x[D]+O):O),D++;D+=E}else for(k=0;k<T;k++){for(I=0;I<A;I++)H[D]=j?Math.min(W,x[D]+O):O,D++;D+=E}else if(t.ptr+=F,b.decodeBits(e,t,L,O,w),F=0,j)if(V)for(k=0;k<T;k++){for(I=0;I<A;I++)V[D]&&(H[D]=L[F++]+x[D]),D++;D+=E}else for(k=0;k<T;k++){for(I=0;I<A;I++)H[D]=L[F++]+x[D],D++;D+=E}else if(V)for(k=0;k<T;k++){for(I=0;I<A;I++)V[D]&&(H[D]=L[F++]),D++;D+=E}else for(k=0;k<T;k++){for(I=0;I<A;I++)H[D++]=L[F++];D+=E}else{if(j)if(V)for(k=0;k<T;k++)for(I=0;I<A;I++)V[D]&&(H[D]=x[D]),D++;else for(k=0;k<T;k++)for(I=0;I<A;I++)H[D]=x[D],D++;t.counter.constant++,t.ptr+=F}}z>1&&!n&&(t.pixels.resultPixels=b.swapDimensionOrder(t.pixels.resultPixels,u,z,r))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:b.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,n=e.headerInfo.zMin,a=e.headerInfo.maxValues,i=e.headerInfo.numDims,o=e.headerInfo.height*e.headerInfo.width,u=0,s=0,l=0,c=e.pixels.resultMask,f=e.pixels.resultPixels;if(c)if(i>1){if(t)for(u=0;u<i;u++)for(l=u*o,r=a[u],s=0;s<o;s++)c[s]&&(f[l+s]=r);else for(s=0;s<o;s++)if(c[s])for(l=s*i,u=0;u<i;u++)f[l+i]=a[u]}else for(s=0;s<o;s++)c[s]&&(f[s]=r);else if(i>1&&n!==r)if(t)for(u=0;u<i;u++)for(l=u*o,r=a[u],s=0;s<o;s++)f[l+s]=r;else for(s=0;s<o;s++)for(l=s*i,u=0;u<i;u++)f[l+u]=a[u];else for(s=0;s<o*i;s++)f[s]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:t=Float32Array;break;case 7:t=Float64Array;break;default:t=Float32Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:t="F32";break;case 7:t="F64";break;default:t="F32"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=5e-324&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,n){var a=0;switch(r){case 0:a=n.getInt8(t);break;case 1:a=n.getUint8(t);break;case 2:a=n.getInt16(t,!0);break;case 3:a=n.getUint16(t,!0);break;case 4:a=n.getInt32(t,!0);break;case 5:a=n.getUInt32(t,!0);break;case 6:a=n.getFloat32(t,!0);break;case 7:a=n.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return a},swapDimensionOrder:function(e,t,r,n,a){var i=0,o=0,u=0,s=0,l=e;if(r>1)if(l=new n(t*r),a)for(i=0;i<t;i++)for(s=i,u=0;u<r;u++,s+=t)l[s]=e[o++];else for(i=0;i<t;i++)for(s=i,u=0;u<r;u++,s+=t)l[o++]=e[s];return l}},m=function(e,t,r){this.val=e,this.left=t,this.right=r},g={decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,a={};if(a.ptr=t.inputOffset||0,a.pixels={},b.readHeaderInfo(e,a)){var i=a.headerInfo,o=i.fileVersion,u=b.getDataTypeArray(i.imageType);if(o>5)throw"unsupported lerc version 2."+o;b.readMask(e,a),i.numValidPixel===i.width*i.height||a.pixels.resultMask||(a.pixels.resultMask=t.maskData);var s=i.width*i.height;a.pixels.resultPixels=new u(s*i.numDims),a.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var l,c=!t.returnPixelInterleavedDims;if(0!==i.numValidPixel)if(i.zMax===i.zMin)b.constructConstantSurface(a,c);else if(o>=4&&b.checkMinMaxRanges(e,a))b.constructConstantSurface(a,c);else{var f=new DataView(e,a.ptr,2),h=f.getUint8(0);if(a.ptr++,h)b.readDataOneSweep(e,a,u,c);else if(o>1&&i.imageType<=1&&Math.abs(i.maxZError-.5)<1e-5){var p=f.getUint8(1);if(a.ptr++,a.encodeMode=p,p>2||o<4&&p>1)throw"Invalid Huffman flag "+p;p?b.readHuffman(e,a,u,c):b.readTiles(e,a,u,c)}else b.readTiles(e,a,u,c)}a.eofOffset=a.ptr,t.inputOffset?(l=a.headerInfo.blobSize+t.inputOffset-a.ptr,Math.abs(l)>=1&&(a.eofOffset=t.inputOffset+a.headerInfo.blobSize)):(l=a.headerInfo.blobSize-a.ptr,Math.abs(l)>=1&&(a.eofOffset=a.headerInfo.blobSize));var d={width:i.width,height:i.height,pixelData:a.pixels.resultPixels,minValue:i.zMin,maxValue:i.zMax,validPixelCount:i.numValidPixel,dimCount:i.numDims,dimStats:{minValues:i.minValues,maxValues:i.maxValues},maskData:a.pixels.resultMask};if(a.pixels.resultMask&&b.isValidPixelValue(i.imageType,r)){var y=a.pixels.resultMask;for(n=0;n<s;n++)y[n]||(d.pixelData[n]=r);d.noDataValue=r}return a.noDataValue=r,t.returnFileInfo&&(d.fileInfo=b.formatFileInfo(a)),d}},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)b.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}})&&(O.exports=g);var w=O.exports,j=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],x=new Set([1,5,6,7,8,34712,34887]);function k(e,t){var r="unknown";return 3===e?r="f32":1===e?1===t?r="u1":2===t?r="u2":4===t?r="u4":t<=8?r="u8":t<=16?r="u16":t<=32&&(r="u32"):2===e&&(t<=8?r="s8":t<=16?r="s16":t<=32&&(r="s32")),r}function I(e){var t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;default:t=Float32Array}return t}function _(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function S(e,t){var r;return null==(r=e.get(t))?void 0:r.values}function T(e,t){var r;return null==(r=e.get(t))?void 0:r.values}function A(e,t){var r;return null==(r=e.get(t))?void 0:r.values[0]}function M(e,t){var r;return null==(r=e.get(t))?void 0:r.values[0]}function C(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.a.TIFF_TAGS,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4,o=8===i,u=o?L(new DataView(e,r,8),0,t):new DataView(e,r,2).getUint16(0,t),s=4+2*i,l=o?8:2,c=l+u*s;if(r+c>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};for(var h,p,d,y,v,b,m,g=r+c+4<=e.byteLength?G(new DataView(e,r+c,8===i?8:4),0,t,8===i):null,O=r+l,w=new Map,j=0;j<u;j++){d=(p=new DataView(e,O+s*j,s)).getUint16(0,t),v=p.getUint16(2,t),y=f.a.getTagName(d,a);var x=[];2===i?(b=p.getUint16(4,t),m=p.getUint16(6,t)):4===i?(b=p.getUint32(4,t),m=p.getUint32(8,t)):8===i&&(b=G(p,4,t,!0),m=G(p,12,t,!0),x.push(p.getUint32(12,t)),x.push(p.getUint32(16,t))),R(e,t,h={id:d,type:v,valueCount:b,valueOffset:m,valueOffsets:x,values:null},n,!1,i),w.set(y,h)}return{success:!0,ifd:w,nextIFD:g,requiredBufferSize:c}}var P=function(e,t,r,n,a){var o,u,s,l,f,d,y,v,b,m=h.a===t,g=M(r,"BITSPERSAMPLE"),O=k(null!=(o=M(r,"SAMPLEFORMAT"))?o:1,g),j=null!=(u=M(r,"COMPRESSION"))?u:1,x=I(O);if(34887===j)return function(e,t){return w.decode(e,{inputOffset:t,returnFileInfo:!0}).pixelData}(e,n);if(1===j)f=e.slice(n,n+a),d=new Uint8Array(f);else if(8===j||32946===j)d=new Uint8Array(e,n,a),v=new p.a(d),b=v.getBytes(),f=new ArrayBuffer(b.length),(d=new Uint8Array(f)).set(b);else if(6===j){d=new Uint8Array(e,n,a);var _=new i.a;_.parse(d);var S=_.getData(_.width,_.height,!0);f=new ArrayBuffer(S.length),(d=new Uint8Array(f)).set(S)}else if(7===j){var T=r.get("JPEGTABLES").values,A=T.length-2;d=new Uint8Array(A+a-2);for(var C=0;C<A;C++)d[C]=T[C];for(var P=new Uint8Array(e,n+2,a-2),D=0;D<P.length;D++)d[A+D]=P[D];var E=new i.a;E.parse(d);var R=E.getData(E.width,E.height,!0);f=new ArrayBuffer(R.length),(d=new Uint8Array(f)).set(R)}else 5===j&&(f=(d=c(e,n,a,t)).buffer);if("u8"===O||"s8"===O||m)l=new x(f);else{switch(f=new ArrayBuffer(d.length),y=new Uint8Array(f),O){case"u16":case"s16":for(s=0;s<d.length;s+=2)y[s]=d[s+1],y[s+1]=d[s];break;case"u32":case"s32":case"f32":for(s=0;s<d.length;s+=4)y[s]=d[s+3],y[s+1]=d[s+2],y[s+2]=d[s+1],y[s+3]=d[s]}l=new x(f)}return l},D=function(e,t,r){var n,a=T(r,"TILEOFFSETS");if(void 0===a)return null;for(var i,o,u,s,l,c,f,h,p,d,y,v,b,m=T(r,"TILEBYTECOUNTS"),g=N([r]),O=g.width,w=g.height,j=g.pixelType,x=g.tileWidth,k=g.tileHeight,_=B(r,t),S=t.planes,A=O*w,C=M(r,"BITSPERSAMPLE"),D=34887===(null!=(n=M(r,"COMPRESSION"))?n:1),E=I(j),R=[],F=0;F<S;F++)R.push(new E(A));var L=Math.ceil(O/x);if(C%8==0)if(D&&_&&S>1){var U=Math.round(a.length/S);for(i=0;i<U;i++){h=(c=Math.floor(i/L)*k)*O+(f=i%L*x);for(var G=0;G<S;G++){var z=i*S+G;for(u=P(e,t.littleEndian,r,a[z],m[z]),d=0,p=h,v=Math.min(x,O-f),y=Math.min(k,w-c),b=R[G],s=0;s<y;s++)for(p=h+s*O,d=s*x,l=0;l<v;l++,p++,d++)b[p]=u[d]}}}else for(i=0;i<a.length;i++)for(h=(c=Math.floor(i/L)*k)*O+(f=i%L*x),u=P(e,t.littleEndian,r,a[i],m[i]),d=0,p=h,v=Math.min(x,O-f),y=Math.min(k,w-c),o=0;o<S;o++)if(b=R[o],_||D)for(s=0;s<y;s++)for(p=h+s*O,d=x*k*o+s*x,l=0;l<v;l++,p++,d++)b[p]=u[d];else for(s=0;s<y;s++)for(p=h+s*O,d=s*x*S+o,l=0;l<v;l++,p++,d+=S)b[p]=u[d];return{width:O,height:w,pixelType:j,pixels:R}},E=function(e,t,r){var n,a=h.a===t.littleEndian,o=T(r,"STRIPOFFSETS");if(void 0===o)return null;var u,s,l,f,d,y,v,b,m,g,O=N([r]),w=O.width,j=O.height,x=O.pixelType,k=t.planes,_=w*j,S=M(r,"BITSPERSAMPLE"),A=I(x),C=new A(_*k),P=T(r,"STRIPBYTECOUNTS"),D=M(r,"ROWSPERSTRIP"),E=null!=(n=M(r,"COMPRESSION"))?n:1,R=D;if(S%8==0)for(u=0;u<o.length;u++){if(d=u*(D*w)*k,R=(u+1)*D>j?j-u*D:D,"u8"===x||"s8"===x||a){if(8===E||32946===E)v=new Uint8Array(e,o[u],P[u]),g=new p.a(v).getBytes(),y=new ArrayBuffer(g.length),(v=new Uint8Array(y)).set(g),v.length!==R*w*k*S/8&&console.log("strip byte counts is different than expected");else if(6===E){v=new Uint8Array(e,o[u],P[u]);var B=new i.a;B.parse(v);var F=B.getData(B.width,B.height,!0);y=new ArrayBuffer(F.length),(v=new Uint8Array(y)).set(F)}else 5===E?y=(v=c(e,o[u],P[u],t.littleEndian)).buffer:1===E&&(P[u]!==R*w*k*S/8&&console.log("strip byte counts is different than expected"),y=e.slice(o[u],o[u]+P[u]));f=new A(y)}else{switch(6===E||8===E||32946===E?(v=new Uint8Array(e,o[u],P[u]),v=new p.a(v).getBytes(),y=new ArrayBuffer(v.length),b=new Uint8Array(y),v.length!==R*w*k*S/8&&console.log("strip byte counts is different than expected")):1===E&&(P[u]!==R*w*k*S/8&&console.log("strip byte counts is different than expected"),y=new ArrayBuffer(P[u]),v=new Uint8Array(e,o[u],P[u]),b=new Uint8Array(y)),x){case"u16":case"s16":for(l=0;l<v.length;l+=2)b[l]=v[l+1],b[l+1]=v[l];break;case"u32":case"s32":case"f32":for(l=0;l<v.length;l+=4)b[l]=v[l+3],b[l+1]=v[l+2],b[l+2]=v[l+1],b[l+3]=v[l]}f=new A(y)}C.set(f,d)}var L=[];if(1===k)L.push(C);else for(u=0;u<k;u++){for(m=new A(_),s=0;s<_;s++)m[s]=C[s*k+u];L.push(m)}return{width:w,height:j,pixelType:x,pixels:L}};function R(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4;if(r.values)return!0;var o,u,s=r.type,l=r.valueCount,c=r.valueOffset,f=[],h=j[s],p=8*h,d=l*h,y=l*j[s]*8,v=8===i?64:32,b=r.valueOffsets;if(y>v&&d>(a?e.byteLength:e?e.byteLength-c+n:0))return r.offlineOffsetSize=[c,d],r.values=null,!1;if(y<=v){if(!t)if(v<=32)c>>>=32-y;else{var m=null!=b&&b.length?b[0]:c>>>0,g=null!=b&&b.length?b[1]:Math.round((c-m)/4294967296);y<=32?(c=m>>>32-y,b[0]=c):(c=m*Math.pow(2,32-y)+(g>>>32-y),b[0]=m,b[1]=g>>>32-y)}if(1===l&&p===v)f=[c];else if(64===v){var O=null!=b&&b.length?b[0]:c>>>0,w=null!=b&&b.length?b[1]:Math.round((c-O)/4294967296),x=O,k=32;for(u=1;u<=l;u++){var I=32-p*u%32;if(k<p){var _=x<<I>>>32-k,S=w<<32-k>>>32-k;x=w,f.push(_+S*Math.pow(2,p-k)),k-=32-(p-k)}else f.push(x<<I>>>32-p),k-=p;0===k&&(k=32,x=w)}}else for(u=1;u<=l;u++){var T=32-p*u;f.push(c<<T>>>32-p)}}else{c-=n,a&&(c=0);for(var A=c;A<c+d;A+=h){switch(s){case 1:case 2:o=new DataView(e,A,1).getUint8(0);break;case 3:o=new DataView(e,A,2).getUint16(0,t);break;case 4:case 13:o=new DataView(e,A,4).getUint32(0,t);break;case 5:o=new DataView(e,A,4).getUint32(0,t)/new DataView(e,A+4,4).getUint32(0,t);break;case 6:o=new DataView(e,A,1).getInt8(0);break;case 7:o=new DataView(e,A,1).getUint8(0);break;case 8:o=new DataView(e,A,2).getInt16(0,t);break;case 9:o=new DataView(e,A,4).getInt32(0,t);break;case 10:o=new DataView(e,A,4).getInt32(0,t)/new DataView(e,A+4,4).getInt32(0,t);break;case 11:o=new DataView(e,A,4).getFloat32(0,t);break;case 12:o=new DataView(e,A,8).getFloat64(0,t);break;case 16:case 18:o=L(new DataView(e,A,8),0,t);break;case 17:o=U(new DataView(e,A,8),0,t);break;default:o=null}f.push(o)}}if(2===s){var M="",C=f;for(f=[],u=0;u<C.length;u++)0===C[u]&&""!==M?(f.push(M),M=""):M+=String.fromCharCode(C[u]);""===M&&0!==f.length||f.push(M)}return r.values=f,!0}function N(e){var t,r,n,a=e[0],i=M(a,"TILEWIDTH"),o=M(a,"TILELENGTH"),u=M(a,"IMAGEWIDTH"),s=M(a,"IMAGELENGTH"),l=M(a,"BITSPERSAMPLE"),c=M(a,"SAMPLESPERPIXEL"),f=null!=(t=M(a,"SAMPLEFORMAT"))?t:1,h=k(f,l),p=B(a),d=S(a,"GDAL_NODATA");null!=d&&d.length&&((n=d.map((function(e){return parseFloat(e)}))).some((function(e){return isNaN(e)}))&&(n=null));var y,v=null!=(r=M(a,"COMPRESSION"))?r:1;switch(v){case 1:y="NONE";break;case 2:case 3:case 4:case 32771:y="CCITT";break;case 5:y="LZW";break;case 6:case 7:y="JPEG";break;case 32773:y="PACKBITS";break;case 8:case 32946:y="DEFLATE";break;case 34712:y="JPEG2000";break;case 34887:y="LERC";break;default:y=String(v)}var b=!0,m="";x.has(v)||(b=!1,m+="unsupported tag compression "+v),f>3&&(b=!1,m+="unsupported tag sampleFormat "+f),l%8!=0&&(b=!1,m+="unsupported tag bitsPerSample "+l);var g,O=A(a,"GEOASCIIPARAMS");if(O){var w=O.split("|").filter((function(e){return e.indexOf("ESRI PE String = ")>-1}))[0],j=w?w.replace("ESRI PE String = ",""):"";g=j.startsWith("COMPD_CS")||j.startsWith("PROJCS")||j.startsWith("GEOGCS")?{wkid:null,wkt:j}:null}var I,C,P=T(a,"GEOTIEPOINTS"),D=T(a,"GEOPIXELSCALE"),E=T(a,"GEOTRANSMATRIX"),R=a.has("GEOKEYDIRECTORY")?a.get("GEOKEYDIRECTORY").data:null,N=!1;if(R){N=2===M(R,"GTRasterTypeGeoKey");var F=M(R,"GTModelTypeGeoKey");if(2===F){var L=M(R,"GeographicTypeGeoKey");L>=1024&&L<=32766&&(g={wkid:L})}else if(1===F){var U=M(R,"ProjectedCSTypeGeoKey");U>=1024&&U<=32766&&(g={wkid:U})}}if(D&&P&&P.length>=6?(I=[D[0],0,P[3]-P[0]*D[0],0,-Math.abs(D[1]),P[4]-P[1]*D[1]],N&&(I[2]-=.5*I[0]+.5*I[1],I[5]-=.5*I[3]+.5*I[4])):E&&16===E.length&&(I=N?[E[0],E[1],E[3]-.5*E[0],E[4],E[5],E[7]-.5*E[5]]:[E[0],E[1],E[3],E[4],E[5],E[7]]),I){for(var G,z=[{x:0,y:s},{x:0,y:0},{x:u,y:s},{x:u,y:0}],V=Number.POSITIVE_INFINITY,J=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,q=Number.NEGATIVE_INFINITY,Z=0;Z<z.length;Z++)V=(G=_(z[Z],I)).x>V?V:G.x,W=G.x<W?W:G.x,J=G.y>J?J:G.y,q=G.y<q?q:G.y;C={xmin:V,xmax:W,ymin:J,ymax:q,spatialReference:g}}else C={xmin:-.5,ymin:.5-s,xmax:u-.5,ymax:.5,spatialReference:g};var Y,K,X,Q,$,ee=e.filter((function(e){return 1===A(e,"NEWSUBFILETYPE")}));if(ee.length>0){Y=Math.round(Math.log(u/M(ee[0],"IMAGEWIDTH"))/Math.LN2);var te=ee[ee.length-1];K=Math.round(Math.log(u/M(te,"IMAGEWIDTH"))/Math.LN2),X=M(te,"TILEWIDTH"),Q=M(te,"TILELENGTH")}X=K>0?X||i:null,Q=K>0?Q||o:null,i&&($=[{maxCol:Math.ceil(u/i)-1,maxRow:Math.ceil(s/o)-1,minRow:0,minCol:0}],ee.forEach((function(e){$.push({maxCol:Math.ceil(M(e,"IMAGEWIDTH")/M(e,"TILEWIDTH"))-1,maxRow:Math.ceil(M(e,"IMAGELENGTH")/M(e,"TILELENGTH"))-1,minRow:0,minCol:0})})));var re=function(e){if(!e)return null;var t=e.match(/<Item(.*?)Item>/gi);if(!t||0===t.length)return null;for(var r,n,a,i,o,u=new Map,s=0;s<t.length;s++)n=(r=t[s]).slice("<Item ".length,r.indexOf(">")),(i=r.indexOf("sample="))>-1&&(o=r.slice(i+'sample="'.length,r.indexOf('"',i+'sample="'.length))),(i=r.indexOf("name="))>-1&&(n=r.slice(i+'name="'.length,r.indexOf('"',i+'name="'.length))),n&&(a=r.slice(r.indexOf(">")+1,r.indexOf("</Item>")).trim(),null!=o?u.has(n)?u.get(n)[o]=a:u.set(n,[a]):u.set(n,a)),o=null;var l=u.get("STATISTICS_MINIMUM"),c=u.get("STATISTICS_MAXIMUM"),f=u.get("STATISTICS_MEAN"),h=u.get("STATISTICS_STDDEV"),p=null;if(l&&c){p=[];for(var d=0;d<l.length;d++)p.push({min:parseFloat(l[d]),max:parseFloat(c[d]),avg:f&&parseFloat(f[d]),stddev:h&&parseFloat(h[d])})}var y=u.get("BandName"),v=u.get("WavelengthMin"),b=u.get("WavelengthMax"),m=null;if(y){m=[];for(var g=0;g<y.length;g++)m.push({BandName:y[g],WavelengthMin:v&&parseFloat(v[g]),WavelengthMax:b&&parseFloat(b[g])})}return{statistics:p,bandProperties:m,dataType:u.get("DataType"),rawMetadata:u}}(A(e[0],"GDAL_METADATA"));return{width:u,height:s,tileWidth:i,tileHeight:o,planes:c,isBSQ:p,pixelType:h,compression:y,noData:n,isSupported:b,message:m+=" "+H({width:u,height:s,tileWidth:i,tileHeight:o,planes:c,ifds:e}),extent:C,affine:D?null:I,firstPyramidLevel:Y,maximumPyramidLevel:K,pyramidBlockWidth:X,pyramidBlockHeight:Q,tileBoundary:$,metadata:re}}function B(e,t){var r=S(e,"PLANARCONFIGURATION");return r?2===r[0]:!!t&&t.isBSQ}function F(e){var t=z(e),r=t.littleEndian,n=t.isBigTiff,a=t.firstIFD,i=[];do{var o=V(e,r,a,0,f.a.TIFF_TAGS,n?8:4);if(!o.success)break;i.push(o.ifd),a=o.nextIFD}while(a>0);return y(y({},N(i)),{},{littleEndian:r,isBigTiff:n,ifds:i})}function L(e,t,r){var n=e.getUint32(t,r),a=e.getUint32(t+4,r);return r?4294967296*a+n:4294967296*n+a}function U(e,t,r){var n=r?e.getInt32(t,r):e.getUint32(t,r),a=r?e.getUint32(t+4,r):e.getInt32(t+4,r),i=(r?n:a)>=0?1:-1;return r?n*=i:a*=i,i*(r?4294967296*a+n:4294967296*n+a)}function G(e,t,r,n){return n?L(e,t,r):e.getUint32(t,r)}function z(e){var t=new DataView(e,0,16),r=t.getUint16(0,!1),n=null;if(18761===r)n=!0;else{if(19789!==r)throw"unexpected endianess byte";n=!1}var a=t.getUint16(2,n);if(42!==a&&43!==a)throw"unexpected tiff identifier";var i=4,o=43===a;if(o){var u=t.getUint16(i,n);if(i+=2,8!==u)throw"unsupported bigtiff version";if(0!==t.getUint16(i,n))throw"unsupported bigtiff version";i+=2}return{littleEndian:n,isBigTiff:o,firstIFD:G(t,i,n,o)}}function V(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.a.TIFF_TAGS,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4,s=C(e,t,r,i,o,u),l=s.ifd;if(l){if(f.a.ifdTags.forEach((function(r,a){l.has(a)&&((n=l.get(a)).data=C(e,t,n.valueOffset-i,i,r).ifd)})),l.has("GEOKEYDIRECTORY")){var c=(n=l.get("GEOKEYDIRECTORY")).values;if(c&&c.length>4){var h=c[0]+"."+c[1]+"."+c[2];n.data=C(e,t,n.valueOffset+6-i,i,f.a.GEO_KEYS,2).ifd,n.data&&n.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[h]})}}if(l.has("XMP")){var p=(n=l.get("XMP")).values;"number"==typeof p[0]&&7===n.type&&(n.values=[Object(a.a)(new Uint8Array(p))])}}return s}function H(e){var t=e.width,r=e.height,n=e.tileHeight,a=e.tileWidth,i=e.planes,o=a?a*n:t*r,u=M(e.ifds[0],"BITSPERSAMPLE"),s="";return o*i>Math.pow(2,30)/(u>8?u/8:1)&&(s=a?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),s}function J(e,t){for(var r,n,a=t.headerInfo,i=t.ifd,o=t.offsets,u=t.sizes,s=o.map((function(t,r){return P(e,a.littleEndian,i,t,u[r]||e.byteLength)})),l=B(i,a),c=a.pixelType,f=a.planes,h=I(c),p=M(i,"TILEWIDTH"),d=M(i,"TILELENGTH"),y=null!=(r=M(i,"COMPRESSION"))?r:1,v=p*d,b=[],m=s[0],g=34887===y,O=0;O<f;O++){if(n=new h(v),l&&g){m=s[O];for(var w=0;w<v;w++)n[w]=m[O][w+O]}else if(l||g&&!l)n=m.slice(v*O,v*(O+1));else for(var j=0;j<v;j++)n[j]=m[j*f+O];b.push(n)}var x,k,_=a.noData?a.noData[0]:null,S=a.metadata?a.metadata.statistics:null,T=S?S.map((function(e){return e.min})):null,A=S?S.map((function(e){return e.max})):null;if(null!=_)if(x=new Uint8Array(v),Math.abs(_)>1e24)for(k=0;k<v;k++)Math.abs((b[0][k]-_)/_)<1e-6?x[k]=0:x[k]=1;else for(k=0;k<v;k++)b[0][k]===_?x[k]=0:x[k]=1;else T&&A&&t.applyMinMaxConstraint&&(x=function(e,t,r){if(!(e&&e.length>0&&t&&r))return null;for(var n,a,i,o=e[0].length,u=e.length,s=new Uint8Array(o),l=0;l<u;l++)if(n=e[l],a=t[l],i=r[l],0===l)for(var c=0;c<o;c++)s[c]=n[c]<a||n[c]>i?0:1;else for(var f=0;f<o;f++)s[f]&&(s[f]=n[f]<a||n[f]>i?0:1);return s}(b,T,A));return{pixelType:c,width:p,height:d,pixels:b,mask:x,noDataValue:_}}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,n=r=r||F(e),a=n.ifds,i=n.noData;if(0===a.length)throw"no valid image file directory";var o,u,s=H(r);if(s)throw s;var l=-1===t?a[a.length-1]:a[t],c=i?i[0]:null;if(u=r.tileWidth?D(e,r,l):E(e,r,l),null!==c){if(u.mask=new Uint8Array(u.width*u.height),Math.abs(c)>1e24)for(o=0;o<u.width*u.height;o++)Math.abs((u.pixels[0][o]-c)/c)<1e-6?u.mask[o]=0:u.mask[o]=1;else for(o=0;o<u.width*u.height;o++)u.pixels[0][o]===c?u.mask[o]=0:u.mask[o]=1;u.noDataValue=c}return u}},mVh5:function(e,t,r){"use strict";r.r(t),r.d(t,"fromItem",(function(){return y})),r.d(t,"selectLayerClassPath",(function(){return v}));var n=r("eijD"),a=r("mK0O"),i=r("NthX"),o=r.n(i),u=r("Mp7X"),s=r("qtK3"),l=r("OYdn"),c=r("iQat"),f=r("fDX0"),h=r("ERXM");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e){return!e.portalItem||e.portalItem instanceof l.default||(e=d(d({},e),{},{portalItem:new l.default(e.portalItem)})),function(e){return e.load().then(v).then(b)}(e.portalItem).then((function(t){var r=d({portalItem:e.portalItem},t.properties),n=t.constructor;return Promise.resolve(new n(r))}))}function v(e){switch(e.type){case"Map Service":return function(e){return Object(h.a)(e.url).then((function(e){return e.tileInfo}))}(e).then((function(e){return e?{className:"TileLayer"}:{className:"MapImageLayer"}}));case"Feature Service":return function(e){return O(e).then((function(e){if("object"==typeof e){var t={};return null!=e.id&&(t.layerId=e.id),{className:"FeatureLayer",properties:t}}return{className:"GroupLayer"}}))}(e);case"Feature Collection":return function(e){return m.apply(this,arguments)}(e);case"Scene Service":return function(e){return O(e).then((function(t){if("object"==typeof t){var r,n={};if(null!=t.id?(n.layerId=t.id,r="".concat(e.url,"/layers/").concat(t.id)):r=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0)for(var a={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},i=0,o=Object.keys(a);i<o.length;i++){var u=o[i];if(-1!==e.typeKeywords.indexOf(u))return{className:a[u]}}return Object(h.a)(r).then((function(e){var t="SceneLayer",r={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&r[e.layerType]&&(t=r[e.layerType]),{className:t,properties:n}}))}return{className:"GroupLayer"}}))}(e);case"Image Service":return function(e){return g.apply(this,arguments)}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};case"Feed":return{className:"StreamLayer"};default:return Promise.reject(new u.a("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function b(e){return(0,s.a[e.className])().then((function(t){return{constructor:t,properties:e.properties}}))}function m(){return(m=Object(n.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if(!Object(f.b)(t,"Map Notes")){e.next=4;break}return e.abrupt("return",{className:"MapNotesLayer"});case 4:if(!Object(f.b)(t,"Route Layer")){e.next=6;break}return e.abrupt("return",{className:"RouteLayer"});case 6:return e.next=8,t.fetchData();case 8:return r=e.sent,e.abrupt("return",1===Object(c.getNumLayersAndTables)(r)?{className:"FeatureLayer"}:{className:"GroupLayer"});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(n.a)(o.a.mark((function e(t){var r,n,a,i,u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if(!((i=null!=(r=null==(n=t.typeKeywords)?void 0:n.map((function(e){return e.toLowerCase()})))?r:[]).indexOf("elevation 3d layer")>-1)){e.next=5;break}return e.abrupt("return",{className:"ElevationLayer"});case 5:if(!(i.indexOf("tiled imagery")>-1)){e.next=7;break}return e.abrupt("return",{className:"ImageryTileLayer"});case 7:return e.next=9,t.fetchData();case 9:if(u=e.sent,"ArcGISTiledImageServiceLayer"!==(s=null==u?void 0:u.layerType)){e.next=13;break}return e.abrupt("return",{className:"ImageryTileLayer"});case 13:if("ArcGISImageServiceLayer"!==s){e.next=15;break}return e.abrupt("return",{className:"ImageryLayer"});case 15:return e.next=17,Object(h.a)(t.url);case 17:if(e.t0=a=e.sent.cacheType,null!=e.t0){e.next=22;break}e.t1=void 0,e.next=23;break;case 22:e.t1=a.toLowerCase();case 23:if(e.t2=e.t1,"map"!==e.t2){e.next=28;break}e.t3={className:"ImageryTileLayer"},e.next=29;break;case 28:e.t3={className:"ImageryLayer"};case 29:return e.abrupt("return",e.t3);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return!e.url||e.url.match(/\/\d+$/)?Promise.resolve({}):e.load().then((function(){return e.fetchData()})).then(function(){var t=Object(n.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Feature Service"!==e.type){t.next=6;break}return t.t0=w,t.next=4,Object(c.preprocessFSItemData)(r,e.url);case 4:return t.t1=r=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 6:return t.abrupt("return",Object(c.getNumLayersAndTables)(r)>0?w(r):Object(h.a)(e.url).then(w));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function w(e){return 1===Object(c.getNumLayersAndTables)(e)&&{id:Object(c.getFirstLayerOrTableId)(e)}}},mynk:function(e,t,r){"use strict";var n=r("aNYv"),a=r("hisu"),i=r("yBJb"),o=r("jCQE"),u=r("vlc1"),s=r("hQel"),l=r("g9+Q");function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"dispose",value:function(){this._rasterizationCanvas=null}},{key:"rasterizeJSONResource",value:function(e,t,r){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){var a=o.c.rasterizeSimpleFill(this._rasterizationCanvas,e.style,t),i=Object(n.a)(a,3),l=i[0];return{size:[i[1],i[2]],image:new Uint32Array(l.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type){var c=o.c.rasterizeSimpleLine(e.style,e.cap),f=Object(n.a)(c,3),h=f[0];return{size:[f[1],f[2]],image:new Uint32Array(h.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}var p,d,y;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(p=o.a.fromSimpleMarker(e),y=Object(s.c)(p)):"CIMHatchFill"===e.type?(p=o.a.fromCIMHatchFill(e),d=new u.a(p.frame.xmin,-p.frame.ymax,p.frame.xmax-p.frame.xmin,p.frame.ymax-p.frame.ymin)):e.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.markerPlacement.type?(p=o.a.fromCIMInsidePolygon(e),d=new u.a(p.frame.xmin,-p.frame.ymax,p.frame.xmax-p.frame.xmin,p.frame.ymax-p.frame.ymin)):(p=e,y=Object(s.c)(p)),y&&!r){var v=Object(s.a)(y),b=Object(n.a)(v,3),m=b[0],g=b[1],O=b[2];return m?{size:[g,O],image:new Uint32Array(m.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}var w=o.a.rasterize(this._rasterizationCanvas,p,d,!r),j=Object(n.a)(w,5),x=j[0],k=j[1],I=j[2],_=j[3],S=j[4];return x?{size:[k,I],image:new Uint32Array(x.buffer),sdf:!1,simplePattern:!1,anchorX:_,anchorY:S}:null}},{key:"rasterizeImageResource",value:function(e,t,r,a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;var i=this._rasterizationCanvas.getContext("2d");r instanceof ImageData?i.putImageData(r,0,0):(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px")),i.drawImage(r,0,0,e,t));var o,u=i.getImageData(0,0,e,t),s=new Uint8Array(u.data);if(a){var f,h=c(a);try{for(h.s();!(f=h.n()).done;){var p=f.value;if(p&&p.oldColor&&4===p.oldColor.length&&p.newColor&&4===p.newColor.length){var d=Object(n.a)(p.oldColor,4),y=d[0],v=d[1],b=d[2],m=d[3],g=Object(n.a)(p.newColor,4),O=g[0],w=g[1],j=g[2],x=g[3];if(y===O&&v===w&&b===j&&m===x)continue;for(var k=0;k<s.length;k+=4)y===s[k]&&v===s[k+1]&&b===s[k+2]&&m===s[k+3]&&(s[k]=O,s[k+1]=w,s[k+2]=j,s[k+3]=x)}}}catch(P){h.e(P)}finally{h.f()}}for(var I=0;I<s.length;I+=4)o=s[I+3]/255,s[I]=s[I]*o,s[I+1]=s[I+1]*o,s[I+2]=s[I+2]*o;var _=s,S=e,T=t,A=512;if(S>=A||T>=A){var M=S/T;M>1?(S=A,T=Math.round(A/M)):(T=A,S=Math.round(A*M)),_=new Uint8Array(4*S*T);var C=new Uint8ClampedArray(_.buffer);Object(l.j)(s,e,t,C,S,T,!1)}return{size:[S,T],image:new Uint32Array(_.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}]),e}();t.a=h},"n+It":function(e,t,r){"use strict";r.d(t,"a",(function(){return M})),r.d(t,"b",(function(){return C})),r.d(t,"c",(function(){return P})),r.d(t,"d",(function(){return D})),r.d(t,"e",(function(){return E})),r.d(t,"f",(function(){return R})),r.d(t,"g",(function(){return N})),r.d(t,"h",(function(){return B})),r.d(t,"i",(function(){return F})),r.d(t,"j",(function(){return L})),r.d(t,"k",(function(){return U})),r.d(t,"l",(function(){return u})),r.d(t,"m",(function(){return s})),r.d(t,"n",(function(){return o})),r.d(t,"o",(function(){return l})),r.d(t,"p",(function(){return i})),r.d(t,"q",(function(){return c})),r.d(t,"r",(function(){return G})),r.d(t,"s",(function(){return f})),r.d(t,"t",(function(){return h})),r.d(t,"u",(function(){return y})),r.d(t,"v",(function(){return m})),r.d(t,"w",(function(){return O})),r.d(t,"x",(function(){return w})),r.d(t,"y",(function(){return j})),r.d(t,"z",(function(){return v})),r.d(t,"A",(function(){return x})),r.d(t,"B",(function(){return I})),r.d(t,"C",(function(){return b})),r.d(t,"D",(function(){return g})),r.d(t,"E",(function(){return p})),r.d(t,"F",(function(){return k})),r.d(t,"G",(function(){return _})),r.d(t,"H",(function(){return d})),r.d(t,"I",(function(){return S})),r.d(t,"J",(function(){return T})),r.d(t,"K",(function(){return A}));var n=r("MJAk"),a=r("0rLw");function i(e){return n.G.extendedSpatialReferenceInfo(e)}function o(e,t,r){return n.G.clip(a.a,e,t,r)}function u(e,t,r){return n.G.cut(a.a,e,t,r)}function s(e,t,r){return n.G.contains(a.a,e,t,r)}function l(e,t,r){return n.G.crosses(a.a,e,t,r)}function c(e,t,r,i){return n.G.distance(a.a,e,t,r,i)}function f(e,t,r){return n.G.equals(a.a,e,t,r)}function h(e,t,r){return n.G.intersects(a.a,e,t,r)}function p(e,t,r){return n.G.touches(a.a,e,t,r)}function d(e,t,r){return n.G.within(a.a,e,t,r)}function y(e,t,r){return n.G.disjoint(a.a,e,t,r)}function v(e,t,r){return n.G.overlaps(a.a,e,t,r)}function b(e,t,r,i){return n.G.relate(a.a,e,t,r,i)}function m(e,t){return n.G.isSimple(a.a,e,t)}function g(e,t){return n.G.simplify(a.a,e,t)}function O(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n.G.convexHull(a.a,e,t,r)}function w(e,t,r){return n.G.difference(a.a,e,t,r)}function j(e,t,r){return n.G.symmetricDifference(a.a,e,t,r)}function x(e,t,r){return n.G.intersect(a.a,e,t,r)}function k(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n.G.union(a.a,e,t,r)}function I(e,t,r,i,o,u,s){return n.G.offset(a.a,e,t,r,i,o,u,s)}function _(e,t,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n.G.buffer(a.a,e,t,r,i,o)}function S(e,t,r,i,o,u,s){return n.G.geodesicBuffer(a.a,e,t,r,i,o,u,s)}function T(e,t,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return n.G.nearestCoordinate(a.a,e,t,r,i)}function A(e,t,r){return n.G.nearestVertex(a.a,e,t,r)}function M(e,t,r,i,o){return n.G.nearestVertices(a.a,e,t,r,i,o)}function C(e,t,r,a){if(null==t||null==a)throw new Error("Illegal Argument Exception");var i=n.G.rotate(t,r,a);return i.spatialReference=e,i}function P(e,t,r){if(null==t||null==r)throw new Error("Illegal Argument Exception");var a=n.G.flipHorizontal(t,r);return a.spatialReference=e,a}function D(e,t,r){if(null==t||null==r)throw new Error("Illegal Argument Exception");var a=n.G.flipVertical(t,r);return a.spatialReference=e,a}function E(e,t,r,i,o){return n.G.generalize(a.a,e,t,r,i,o)}function R(e,t,r,i){return n.G.densify(a.a,e,t,r,i)}function N(e,t,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return n.G.geodesicDensify(a.a,e,t,r,i,o)}function B(e,t,r){return n.G.planarArea(a.a,e,t,r)}function F(e,t,r){return n.G.planarLength(a.a,e,t,r)}function L(e,t,r,i){return n.G.geodesicArea(a.a,e,t,r,i)}function U(e,t,r,i){return n.G.geodesicLength(a.a,e,t,r,i)}var G=Object.freeze({__proto__:null,extendedSpatialReferenceInfo:i,clip:o,cut:u,contains:s,crosses:l,distance:c,equals:f,intersects:h,touches:p,within:d,disjoint:y,overlaps:v,relate:b,isSimple:m,simplify:g,convexHull:O,difference:w,symmetricDifference:j,intersect:x,union:k,offset:I,buffer:_,geodesicBuffer:S,nearestCoordinate:T,nearestVertex:A,nearestVertices:M,rotate:C,flipHorizontal:P,flipVertical:D,generalize:E,densify:R,geodesicDensify:N,planarArea:B,planarLength:F,geodesicArea:L,geodesicLength:U})},nBXx:function(e,t,r){"use strict";var n=r("hisu");t.a=function e(t,r,a,i){Object(n.a)(this,e),this._candidates=null,this._known=null,this._lastFetchedIndex=0,this._ordered=!1,this.pagesDefinition=null,this._candidates=t,this._known=r,this._ordered=a,this.pagesDefinition=i}},oWhe:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=2.1},pvOr:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r("mK0O"),a=r("eijD"),i=r("hisu"),o=r("yBJb"),u=r("NthX"),s=r.n(u),l=r("J4Pc"),c=r("7im+"),f=r("nk/L"),h=r("DE4D"),p=r("TM+E");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e,t,r){e.referencesGeometry();var n=t.readArcadeFeature();try{return e.evaluate(y(y({},r),{},{$feature:n}))}catch(a){return p.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}};function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=r.e(145).then(r.bind(null,"4lhH")),j=function(){function e(t,r){Object(i.a)(this,e),this._canCacheExpressionValue=!1,this._sourceInfo=t,this._bitsets={computed:r.getBitset(r.createBitset())}}var t,r,n;return Object(o.a)(e,[{key:"invalidate",value:function(){this._bitsets.computed.clear()}},{key:"updateSchema",value:(n=Object(a.a)(s.a.mark((function e(t,r){var n,a,i,o,u,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(f.a)(this._schema,r),this._schema=r,r&&!Object(c.h)(n)&&Object(f.b)(n,"attributes")){e.next=3;break}return e.abrupt("return");case 3:Object(l.a)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",n),this._bitsets.computed.clear(),t.targets[r.name]=!0,a=r.attributes,i=[],o=[],e.t0=s.a.keys(a);case 6:if((e.t1=e.t0()).done){e.next=20;break}u=e.t1.value,h=a[u],e.t2=h.type,e.next="field"===e.t2?12:"expression"===e.t2?13:"label-expression"===e.t2?15:"statistic"===e.t2?17:18;break;case 12:return e.abrupt("break",18);case 13:return i.push(this._createArcadeComputedField(h)),e.abrupt("break",18);case 15:return i.push(this._createLabelArcadeComputedField(h)),e.abrupt("break",18);case 17:o.push(h);case 18:e.next=6;break;case 20:return e.next=22,Promise.all(i);case 22:this._computedFields=e.sent,this._canCacheExpressionValue=!this._computedFields.some((function(e){return"expression"===e.type&&e.expression.referencesScale()})),this._statisticFields=o;case 25:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"setComputedAttributes",value:function(e,t,r,n){var a=this._bitsets.computed;if(!this._canCacheExpressionValue||!a.has(r)){a.set(r);var i,o=g(this._computedFields);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=this._evaluateField(t,u,n);switch(u.resultType){case"numeric":e.setComputedNumericAtIndex(r,u.fieldIndex,s);break;case"string":e.setComputedStringAtIndex(r,u.fieldIndex,s)}}}catch(l){o.e(l)}finally{o.f()}}}},{key:"_createArcadeComputedField",value:(r=Object(a.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._sourceInfo.spatialReference,n=this._sourceInfo.fieldsIndex,e.t0=m,e.t1=m({},t),e.t2={},e.next=6,Object(h.d)(t.valueExpression,r,n);case 6:return e.t3=e.sent,e.t4={expression:e.t3},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t4));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_createLabelArcadeComputedField",value:(t=Object(a.a)(s.a.mark((function e(t){var r,n,a,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._sourceInfo.spatialReference,n=this._sourceInfo.fieldsIndex,e.next=4,w;case 4:return a=e.sent,i=a.createLabelFunction,e.next=8,i(t.label,n,r);case 8:return o=e.sent,e.abrupt("return",m(m({},t),{},{builder:o}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_evaluateField",value:function(e,t,r){switch(t.type){case"label-expression":var n=e.readArcadeFeature();return t.builder.evaluate(n)||"";case"expression":var a=t.expression;return v(a,e,{$view:{scale:r}})}}}]),e}()},"pyQ+":function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("7im+");function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;Object(n.a)(this,e),this.size=0,this._start=0,this.maxSize=t,this._buffer=isFinite(t)?new Array(t):[]}return Object(a.a)(e,[{key:"entries",get:function(){return this._buffer}},{key:"enqueue",value:function(e){if(this.size===this.maxSize){var t=this._buffer[this._start];return this._buffer[this._start]=e,this._start=(this._start+1)%this.maxSize,t}return isFinite(this.maxSize)?this._buffer[(this._start+this.size++)%this.maxSize]=e:this._buffer[this._start+this.size++]=e,null}},{key:"dequeue",value:function(){if(0===this.size)return null;var e=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,e}},{key:"peek",value:function(){return 0===this.size?null:this._buffer[this._start]}},{key:"find",value:function(e){if(0===this.size)return null;var t,r=o(this._buffer);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(Object(i.i)(n)&&e(n))return n}}catch(a){r.e(a)}finally{r.f()}return null}},{key:"clear",value:function(e){for(var t=this.dequeue();Object(i.i)(t);)e&&e(t),t=this.dequeue()}}]),e}();t.a=s},qFFn:function(e,t,r){"use strict";function n(){return[0,0,0,1]}function a(e){return[e[0],e[1],e[2],e[3]]}function i(e,t){return new Float64Array(e,t,4)}r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return i}));var o=[0,0,0,1];Object.freeze({__proto__:null,create:n,clone:a,fromValues:function(e,t,r,n){return[e,t,r,n]},createView:i,IDENTITY:o})},qtK3:function(e,t,r){"use strict";r.d(t,"a",(function(){return D}));var n,a,i,o,u,s,l,c,f,h,p,d,y,v,b,m,g,O,w,j,x,k,I,_,S,T,A,M=r("eijD"),C=r("NthX"),P=r.n(C),D={BingMapsLayer:(A=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(120).then(r.bind(null,"fAzw"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return A.apply(this,arguments)}),BuildingSceneLayer:(T=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(121)]).then(r.bind(null,"f1VL"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return T.apply(this,arguments)}),CSVLayer:(S=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(122).then(r.bind(null,"u5G6"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return S.apply(this,arguments)}),ElevationLayer:(_=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(3),r.e(17)]).then(r.bind(null,"BGIR"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return _.apply(this,arguments)}),FeatureLayer:(I=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.bind(null,"EOOn"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return I.apply(this,arguments)}),GroupLayer:(k=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(21).then(r.bind(null,"q+9A"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return k.apply(this,arguments)}),GeoRSSLayer:(x=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(123).then(r.bind(null,"z5J0"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return x.apply(this,arguments)}),ImageryLayer:(j=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(124)]).then(r.bind(null,"6GaR"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return j.apply(this,arguments)}),ImageryTileLayer:(w=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(3),r.e(125)]).then(r.bind(null,"3OBd"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return w.apply(this,arguments)}),IntegratedMeshLayer:(O=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(56).then(r.bind(null,"8nSK"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return O.apply(this,arguments)}),KMLLayer:(g=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(126)]).then(r.bind(null,"w4cL"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return g.apply(this,arguments)}),MapImageLayer:(m=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.bind(null,"2LA6"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)}),MapNotesLayer:(b=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(127)]).then(r.bind(null,"d3un"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return b.apply(this,arguments)}),OGCFeatureLayer:(v=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(128)]).then(r.bind(null,"aqZh"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)}),OpenStreetMapLayer:(y=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(3),r.e(129)]).then(r.bind(null,"jerH"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return y.apply(this,arguments)}),PointCloudLayer:(d=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(130)]).then(r.bind(null,"HDNJ"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)}),RouteLayer:(p=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(131).then(r.bind(null,"vQC4"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)}),SceneLayer:(h=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(132)]).then(r.bind(null,"O0MH"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)}),StreamLayer:(f=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(133).then(r.bind(null,"zzXL"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)}),TileLayer:(c=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(3),r.e(67)]).then(r.bind(null,"Mcxe"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)}),UnknownLayer:(l=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(134).then(r.bind(null,"rR+h"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)}),UnsupportedLayer:(s=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(135).then(r.bind(null,"SqAO"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)}),VectorTileLayer:(u=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(0),r.e(1),r.e(3),r.e(136)]).then(r.bind(null,"i3GQ"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),WebTileLayer:(o=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(3).then(r.bind(null,"3bUX"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)}),WFSLayer:(i=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(137)]).then(r.bind(null,"08cZ"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),WMSLayer:(a=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(138)]).then(r.bind(null,"QFvI"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),WMTSLayer:(n=Object(M.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(3),r.e(139)]).then(r.bind(null,"ricB"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}},qujE:function(e,t,r){"use strict";r.d(t,"a",(function(){return $}));var n=r("6CzD"),a=r("eijD"),i=r("NthX"),o=r.n(i),u=r("7im+"),s=r("ahxf"),l=r("hisu"),c=r("yBJb"),f=r("Mp7X"),h=r("TM+E").a.getLogger("esri.views.3d.glTF"),p=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"error",value:function(e){throw new f.a("gltf-loader-error",e)}},{key:"errorUnsupported",value:function(e){throw new f.a("gltf-loader-unsupported-feature",e)}},{key:"errorUnsupportedIf",value:function(e,t){e&&this.errorUnsupported(t)}},{key:"assert",value:function(e,t){e||this.error(t)}},{key:"warn",value:function(e){h.warn(e)}},{key:"warnUnsupported",value:function(e){this.warn("[Unsupported Feature] "+e)}},{key:"warnUnsupportedIf",value:function(e,t){e&&this.warnUnsupported(t)}}]),e}(),d=r("mK0O");function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=r("S9oG"),m=r("z9dv"),g=r("TwND"),O=r("AjSt"),w=r("WW+m"),j=r("qFFn"),x=r("hALY"),k=r("XaoK"),I=function(){function e(t){Object(l.a)(this,e),this.data=t,this.offset4=0,this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/4))}return Object(c.a)(e,[{key:"readUint32",value:function(){var e=this.offset4;return this.offset4+=1,this.dataUint32[e]}},{key:"readUint8Array",value:function(e){var t=4*this.offset4;return this.offset4+=e/4,new Uint8Array(this.data,t,e)}},{key:"remainingBytes",value:function(){return this.data.byteLength-4*this.offset4}}]),e}();function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},A={pbrMetallicRoughness:T,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},M={ESRI_externalColorMixMode:"tint"},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=S(S({},T),e.pbrMetallicRoughness),r=P(S(S({},M),e.extras));return S(S(S({},A),e),{},{pbrMetallicRoughness:t,extras:r})};function P(e){switch(e.ESRI_externalColorMixMode){case"multiply":case"tint":case"ignore":case"replace":break;default:Object(b.a)(e.ESRI_externalColorMixMode),e.ESRI_externalColorMixMode="tint"}return e}var D={magFilter:9729,minFilter:9987,wrapS:10497,wrapT:10497},E=function(e){return S(S({},D),e)};var R=1179937895,N=1313821514,B=5130562,F=function(){function e(t,r,n,a,i){Object(l.a)(this,e),this.context=t,this.errorContext=r,this.uri=n,this.json=a,this.glbBuffer=i,this.bufferCache=new Map,this.textureCache=new Map,this.materialCache=new Map,this.nodeParentMap=new Map,this.nodeTransformCache=new Map,this.baseUri=function(e){var t,r;return e.replace(/^(.*\/)?([^/]*)$/,(function(e,n,a){return t=n||"",r=a||"",""})),{dirPart:t,filePart:r}}(this.uri).dirPart,this.checkVersionSupported(),this.checkRequiredExtensionsSupported(),r.errorUnsupportedIf(null==a.scenes,"Scenes must be defined."),r.errorUnsupportedIf(null==a.meshes,"Meshes must be defined"),r.errorUnsupportedIf(null==a.nodes,"Nodes must be defined."),this.computeNodeParents()}var t,r,n,i,u,f,h,p,d,y,v,b,j;return Object(c.a)(e,[{key:"getBuffer",value:(j=Object(a.a)(o.a.mark((function e(t,r){var n,a,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.json.buffers[t],a=this.errorContext,null!=n.uri){e.next=3;break}return e.abrupt("return",(a.assert(null!=this.glbBuffer,"GLB buffer not present"),this.glbBuffer));case 3:if(i=this.bufferCache.get(t)){e.next=9;break}return e.next=7,this.context.loadBinary(this.resolveUri(n.uri),r);case 7:u=e.sent,i=new Uint8Array(u),this.bufferCache.set(t,i),a.assert(i.byteLength===n.byteLength,"Buffer byte lengths should match.");case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return j.apply(this,arguments)})},{key:"getAccessor",value:(b=Object(a.a)(o.a.mark((function e(t,r){var n,a,i,u,s,l,c,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.json.accessors[t],(a=this.errorContext).errorUnsupportedIf(null==n.bufferView,"Some accessor does not specify a bufferView."),a.errorUnsupportedIf(n.type in["MAT2","MAT3","MAT4"],"AttributeType ".concat(n.type," is not supported")),i=this.json.bufferViews[n.bufferView],e.next=5,this.getBuffer(i.buffer,r);case 5:return u=e.sent,s=z[n.type],l=V[n.componentType],c=s*l,f=i.byteStride||c,e.abrupt("return",{raw:u.buffer,byteStride:f,byteOffset:u.byteOffset+(i.byteOffset||0)+(n.byteOffset||0),entryCount:n.count,isDenselyPacked:f===c,componentCount:s,componentByteSize:l,componentType:n.componentType,min:n.min,max:n.max,normalized:!!n.normalized});case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"getIndexData",value:(v=Object(a.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.indices){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.getAccessor(t.indices,r);case 4:if(!(n=e.sent).isDenselyPacked){e.next=14;break}e.t0=n.componentType,e.next=5121===e.t0?9:5123===e.t0?10:5125===e.t0?11:12;break;case 9:return e.abrupt("return",new Uint8Array(n.raw,n.byteOffset,n.entryCount));case 10:return e.abrupt("return",new Uint16Array(n.raw,n.byteOffset,n.entryCount));case 11:return e.abrupt("return",new Uint32Array(n.raw,n.byteOffset,n.entryCount));case 12:e.next=20;break;case 14:e.t1=n.componentType,e.next=5121===e.t1?17:5123===e.t1?18:5125===e.t1?19:20;break;case 17:return e.abrupt("return",Object(k.a)(this.wrapAccessor(x.l,n)));case 18:return e.abrupt("return",Object(k.a)(this.wrapAccessor(x.j,n)));case 19:return e.abrupt("return",Object(k.a)(this.wrapAccessor(x.k,n)));case 20:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"getPositionData",value:(y=Object(a.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).errorUnsupportedIf(null==t.attributes.POSITION,"No POSITION vertex data found."),e.next=4,this.getAccessor(t.attributes.POSITION,r);case 4:return a=e.sent,e.abrupt("return",(n.errorUnsupportedIf(5126!==a.componentType,"Expected type FLOAT for POSITION vertex attribute, but found "+Y[a.componentType]),n.errorUnsupportedIf(3!==a.componentCount,"POSITION vertex attribute must have 3 components, but found "+a.componentCount.toFixed()),this.wrapAccessor(x.u,a)));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"getNormalData",value:(d=Object(a.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).assert(null!=t.attributes.NORMAL,"No NORMAL vertex data found."),e.next=4,this.getAccessor(t.attributes.NORMAL,r);case 4:return a=e.sent,e.abrupt("return",(n.errorUnsupportedIf(5126!==a.componentType,"Expected type FLOAT for NORMAL vertex attribute, but found "+Y[a.componentType]),n.errorUnsupportedIf(3!==a.componentCount,"NORMAL vertex attribute must have 3 components, but found "+a.componentCount.toFixed()),this.wrapAccessor(x.u,a)));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"getTangentData",value:(p=Object(a.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).assert(null!=t.attributes.TANGENT,"No TANGENT vertex data found."),e.next=4,this.getAccessor(t.attributes.TANGENT,r);case 4:return a=e.sent,e.abrupt("return",(n.errorUnsupportedIf(5126!==a.componentType,"Expected type FLOAT for TANGENT vertex attribute, but found "+Y[a.componentType]),n.errorUnsupportedIf(4!==a.componentCount,"TANGENT vertex attribute must have 4 components, but found "+a.componentCount.toFixed()),new x.C(a.raw,a.byteOffset,a.byteStride,a.byteOffset+a.byteStride*a.entryCount)));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"getTextureCoordinates",value:(h=Object(a.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).assert(null!=t.attributes.TEXCOORD_0,"No TEXCOORD_0 vertex data found."),e.next=4,this.getAccessor(t.attributes.TEXCOORD_0,r);case 4:return a=e.sent,e.abrupt("return",(n.errorUnsupportedIf(2!==a.componentCount,"TEXCOORD_0 vertex attribute must have 2 components, but found "+a.componentCount.toFixed()),5126===a.componentType?this.wrapAccessor(x.m,a):(n.errorUnsupportedIf(!a.normalized,"Integer component types are only supported for a normalized accessor for TEXCOORD_0."),H(a))));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"getVertexColors",value:(f=Object(a.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).assert(null!=t.attributes.COLOR_0,"No COLOR_0 vertex data found."),e.next=4,this.getAccessor(t.attributes.COLOR_0,r);case 4:if(a=e.sent,n.errorUnsupportedIf(4!==a.componentCount&&3!==a.componentCount,"COLOR_0 attribute must have 3 or 4 components, but found "+a.componentCount.toFixed()),4!==a.componentCount){e.next=14;break}if(5126!==a.componentType){e.next=8;break}return e.abrupt("return",this.wrapAccessor(x.C,a));case 8:if(5121!==a.componentType){e.next=10;break}return e.abrupt("return",this.wrapAccessor(x.J,a));case 10:if(5123!==a.componentType){e.next=12;break}return e.abrupt("return",this.wrapAccessor(x.H,a));case 12:e.next=21;break;case 14:if(3!==a.componentCount){e.next=21;break}if(5126!==a.componentType){e.next=17;break}return e.abrupt("return",this.wrapAccessor(x.u,a));case 17:if(5121!==a.componentType){e.next=19;break}return e.abrupt("return",this.wrapAccessor(x.B,a));case 19:if(5123!==a.componentType){e.next=21;break}return e.abrupt("return",this.wrapAccessor(x.z,a));case 21:n.errorUnsupported("Unsupported component type for COLOR_0 attribute: "+Y[a.componentType]);case 22:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"hasPositions",value:function(e){return void 0!==e.attributes.POSITION}},{key:"hasNormals",value:function(e){return void 0!==e.attributes.NORMAL}},{key:"hasVertexColors",value:function(e){return void 0!==e.attributes.COLOR_0}},{key:"hasTextureCoordinates",value:function(e){return void 0!==e.attributes.TEXCOORD_0}},{key:"hasTangents",value:function(e){return void 0!==e.attributes.TANGENT}},{key:"getMaterial",value:(u=Object(a.a)(o.a.mark((function e(t,r,n){var a,i,u,s,l,c,f,h,p,d,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.errorContext,i=this.materialCache.get(t.material)){e.next=48;break}if(u=null!=t.material?C(this.json.materials[t.material]):C(),s=u.pbrMetallicRoughness,l=this.hasVertexColors(t),e.t0=s.baseColorTexture,!e.t0){e.next=10;break}return a.errorUnsupportedIf(0!==(s.baseColorTexture.texCoord||0),"Only TEXCOORD with index 0 is supported."),e.next=9,this.getTexture(s.baseColorTexture.index,r);case 9:c=e.sent;case 10:if(e.t1=u.normalTexture,!e.t1){e.next=19;break}if(0===(u.normalTexture.texCoord||0)){e.next=16;break}a.warnUnsupported("Only TEXCOORD with index 0 is supported for the normal map texture."),e.next=19;break;case 16:return e.next=18,this.getTexture(u.normalTexture.index,r);case 18:f=e.sent;case 19:if(e.t2=u.occlusionTexture&&n,!e.t2){e.next=28;break}if(0===(u.occlusionTexture.texCoord||0)){e.next=25;break}a.warnUnsupported("Only TEXCOORD with index 0 is supported for the occlusion texture."),e.next=28;break;case 25:return e.next=27,this.getTexture(u.occlusionTexture.index,r);case 27:h=e.sent;case 28:if(e.t3=u.emissiveTexture&&n,!e.t3){e.next=37;break}if(0===(u.emissiveTexture.texCoord||0)){e.next=34;break}a.warnUnsupported("Only TEXCOORD with index 0 is supported for the emissive texture."),e.next=37;break;case 34:return e.next=36,this.getTexture(u.emissiveTexture.index,r);case 36:p=e.sent;case 37:if(e.t4=s.metallicRoughnessTexture&&n,!e.t4){e.next=46;break}if(0===(s.metallicRoughnessTexture.texCoord||0)){e.next=43;break}a.warnUnsupported("Only TEXCOORD with index 0 is supported for the metallicRoughness texture."),e.next=46;break;case 43:return e.next=45,this.getTexture(s.metallicRoughnessTexture.index,r);case 45:d=e.sent;case 46:y=null!=t.material?t.material:-1,i={alphaMode:u.alphaMode,alphaCutoff:u.alphaCutoff,color:s.baseColorFactor,doubleSided:!!u.doubleSided,colorTexture:c,normalTexture:f,name:u.name,id:y,occlusionTexture:h,emissiveTexture:p,emissiveFactor:u.emissiveFactor,metallicFactor:s.metallicFactor,roughnessFactor:s.roughnessFactor,metallicRoughnessTexture:d,vertexColors:l,ESRI_externalColorMixMode:u.extras.ESRI_externalColorMixMode};case 48:return e.abrupt("return",i);case 49:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return u.apply(this,arguments)})},{key:"getTexture",value:(i=Object(a.a)(o.a.mark((function e(t,r){var n,a,i,u,s,l,c,f,h,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.errorContext,a=this.json.textures[t],i=E(null!=a.sampler?this.json.samplers[a.sampler]:{}),n.errorUnsupportedIf(null==a.source,"Source is expected to be defined for a texture."),u=this.json.images[a.source],s=this.textureCache.get(t)){e.next=22;break}if(!u.uri){e.next=11;break}return e.next=8,this.context.loadImage(this.resolveUri(u.uri),r);case 8:l=e.sent,e.next=20;break;case 11:return n.errorUnsupportedIf(null==u.bufferView,"Image bufferView must be defined."),n.errorUnsupportedIf(null==u.mimeType,"Image mimeType must be defined."),c=this.json.bufferViews[u.bufferView],e.next=15,this.getBuffer(c.buffer,r);case 15:return f=e.sent,n.errorUnsupportedIf(null!=c.byteStride,"byteStride not supported for image buffer"),e.next=19,q(new Uint8Array(f.buffer,f.byteOffset+(c.byteOffset||0),c.byteLength),u.mimeType);case 19:l=e.sent;case 20:p=function(e){return n.error("Unexpected TextureSampler WrapMode: ".concat(e,". Using default REPEAT(10497).")),10497},s={data:l,wrapS:(h=function(e){return 33071===e||33648===e||10497===e})(i.wrapS)?i.wrapS:p(i.wrapS),wrapT:h(i.wrapT)?i.wrapT:p(i.wrapT),minFilter:i.minFilter,name:u.name,id:t},this.textureCache.set(t,s);case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getNodeTransform",value:function(e){if(void 0===e)return U;var t=this.nodeTransformCache.get(e);if(!t){var r=this.getNodeTransform(this.getNodeParent(e)),n=this.json.nodes[e];n.matrix?t=Object(O.i)(Object(s.d)(),r,n.matrix):n.translation||n.rotation||n.scale?(t=Object(s.c)(r),n.translation&&Object(O.m)(t,t,n.translation),n.rotation&&(G[3]=Object(w.b)(G,n.rotation),Object(O.b)(t,t,G[3],G)),n.scale&&Object(O.l)(t,t,n.scale)):t=r,this.nodeTransformCache.set(e,t)}return t}},{key:"wrapAccessor",value:function(e,t){return new e(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*(t.entryCount-1)+t.componentByteSize*t.componentCount)}},{key:"resolveUri",value:function(e){return Object(m.A)(e,this.baseUri)}},{key:"getNodeParent",value:function(e){return this.nodeParentMap.get(e)}},{key:"checkVersionSupported",value:function(){var e=g.a.parse(this.json.asset.version,"glTF");L.validate(e)}},{key:"checkRequiredExtensionsSupported",value:function(){var e=this.json,t=this.errorContext;e.extensionsRequired&&0!==e.extensionsRequired.length&&t.errorUnsupported("gltf loader was not able to load unsupported feature. Required extensions: "+e.extensionsRequired.join(", "))}},{key:"computeNodeParents",value:function(){var e=this;this.json.nodes.forEach((function(t,r){t.children&&t.children.forEach((function(t){e.nodeParentMap.set(t,r)}))}))}}],[{key:"load",value:(n=Object(a.a)(o.a.mark((function t(r,n,a,i){var u,s,l,c,f,h;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(m.u)(a)){t.next=13;break}if("model/gltf-binary"===(u=Object(m.i)(a)).mediaType){t.next=10;break}return t.prev=3,s=JSON.parse(u.isBase64?atob(u.data):u.data),t.abrupt("return",new e(r,n,a,s));case 8:t.prev=8,t.t0=t.catch(3);case 10:if(l=Object(m.j)(a),!e.isGLBData(l)){t.next=13;break}return t.abrupt("return",this.fromGLBData(r,n,a,l));case 13:if(!a.endsWith(".gltf")){t.next=18;break}return t.next=16,r.loadJSON(a,i);case 16:return c=t.sent,t.abrupt("return",new e(r,n,a,c));case 18:return t.next=20,r.loadBinary(a,i);case 20:if(f=t.sent,!e.isGLBData(f)){t.next=23;break}return t.abrupt("return",this.fromGLBData(r,n,a,f));case 23:return t.next=25,r.loadJSON(a,i);case 25:return h=t.sent,t.abrupt("return",new e(r,n,a,h));case 27:case"end":return t.stop()}}),t,this,[[3,8]])}))),function(e,t,r,a){return n.apply(this,arguments)})},{key:"isGLBData",value:function(e){var t=new I(e);return t.remainingBytes()>=4&&t.readUint32()===R}},{key:"fromGLBData",value:(r=Object(a.a)(o.a.mark((function t(r,n,a,i){var u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.parseGLBData(n,i);case 2:return u=t.sent,t.abrupt("return",new e(r,n,a,u.json,u.binaryData));case 4:case"end":return t.stop()}}),t)}))),function(e,t,n,a){return r.apply(this,arguments)})},{key:"parseGLBData",value:(t=Object(a.a)(o.a.mark((function e(t,r){var n,a,i,u,s,l,c,f,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new I(r),t.assert(n.remainingBytes()>=12,"GLB binary data is insufficiently large."),a=n.readUint32(),i=n.readUint32(),u=n.readUint32(),t.assert(a===R,"Magic first 4 bytes do not fit to expected GLB value."),t.assert(r.byteLength>=u,"GLB binary data is smaller than header specifies."),t.errorUnsupportedIf(2!==i,"An unsupported GLB container version was detected. Only version 2 is supported."),c=0;case 5:if(!(n.remainingBytes()>=8)){e.next=19;break}if(f=n.readUint32(),h=n.readUint32(),0!==c){e.next=15;break}return t.assert(h===N,"First GLB chunk must be JSON."),t.assert(f>=0,"No JSON data found."),e.next=12,J(n.readUint8Array(f));case 12:s=e.sent,e.next=16;break;case 15:1===c?(t.errorUnsupportedIf(h!==B,"Second GLB chunk expected to be BIN."),l=n.readUint8Array(f)):t.warnUnsupported("More than 2 GLB chunks detected. Skipping.");case 16:c+=1;case 17:e.next=5;break;case 19:return e.abrupt("return",(s||t.error("No GLB JSON chunk detected."),{json:s,binaryData:l}));case 20:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),e}(),L=new g.a(2,0,"glTF"),U=Object(O.j)(Object(s.d)(),Math.PI/2),G=Object(j.b)(),z={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},V={5120:1,5121:1,5122:2,5123:2,5126:4,5125:4};function H(e){switch(e.componentType){case 5120:return new x.q(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case 5121:return new x.t(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case 5122:return new x.o(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case 5123:return new x.r(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case 5125:return new x.s(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case 5126:return new x.m(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);default:return void Object(b.a)(e.componentType)}}function J(e){return W.apply(this,arguments)}function W(){return(W=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=new Blob([t]),a=new FileReader;a.onload=function(){var t=a.result;e(JSON.parse(t))},a.onerror=function(e){r(e)},a.readAsText(n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(a.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new Blob([t],{type:r}),i=URL.createObjectURL(a),o=new Image;o.addEventListener("load",(function(){URL.revokeObjectURL(i),"decode"in o?o.decode().then((function(){return e(o)}),(function(){return e(o)})):e(o)})),o.addEventListener("error",(function(e){URL.revokeObjectURL(i),n(e)})),o.src=i})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"};function K(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=0;function $(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(a.a)(o.a.mark((function e(t,r){var n,i,l,c,f,h,p=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>2&&void 0!==p[2]?p[2]:{},i=!(p.length>3&&void 0!==p[3])||p[3],e.next=4,F.load(t,oe,r,n);case 4:return l=e.sent,c="gltf_"+Q++,f={lods:[],materials:new Map,textures:new Map,meta:te(l)},h=!(!l.json.asset.extras||"symbolResource"!==l.json.asset.extras.ESRI_type),e.next=10,re(l,function(){var e=Object(a.a)(o.a.mark((function e(t,r,a,h){var p,d,y,v,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=void 0!==t.mode?t.mode:4,d=4===p||5===p||6===p?p:null,!Object(u.h)(d)){e.next=3;break}return e.abrupt("return",void oe.warnUnsupported("Unsupported primitive mode ("+se[p]+"). Skipping primitive."));case 3:if(l.hasPositions(t)){e.next=5;break}return e.abrupt("return",void oe.warn("Skipping primitive without POSITION vertex attribute."));case 5:return e.next=7,l.getMaterial(t,n,i);case 7:return y=e.sent,e.t0=Object(s.c)(r),e.next=11,l.getPositionData(t,n);case 11:return e.t1=e.sent,e.t2={position:e.t1,normal:null,texCoord0:null,color:null,tangent:null},e.next=15,l.getIndexData(t,n);case 15:if(e.t3=e.sent,e.t4=d,e.t5=ie(f,y,c),v={transform:e.t0,attributes:e.t2,indices:e.t3,primitiveType:e.t4,material:e.t5},e.t6=l.hasNormals(t),!e.t6){e.next=24;break}return e.next=23,l.getNormalData(t,n);case 23:v.attributes.normal=e.sent;case 24:if(e.t7=l.hasTangents(t),!e.t7){e.next=29;break}return e.next=28,l.getTangentData(t,n);case 28:v.attributes.tangent=e.sent;case 29:if(e.t8=l.hasTextureCoordinates(t),!e.t8){e.next=34;break}return e.next=33,l.getTextureCoordinates(t,n);case 33:v.attributes.texCoord0=e.sent;case 34:if(e.t9=l.hasVertexColors(t),!e.t9){e.next=39;break}return e.next=38,l.getVertexColors(t,n);case 38:v.attributes.color=e.sent;case 39:b=null,Object(u.i)(f.meta)&&Object(u.i)(f.meta.ESRI_lod)&&"screenSpaceRadius"===f.meta.ESRI_lod.metric&&(b=f.meta.ESRI_lod.thresholds[a]),f.lods[a]=f.lods[a]||{parts:[],name:h,lodThreshold:b},f.lods[a].parts.push(v);case 41:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}());case 10:return e.abrupt("return",{model:f,meta:{isEsriSymbolResource:h,uri:l.uri},customMeta:{}});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){var t=e.json,r=null;return t.nodes.forEach((function(e){var t=e.extras;Object(u.i)(t)&&(t.ESRI_proxyEllipsoid||t.ESRI_lod)&&(r=t)})),r}function re(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(a.a)(o.a.mark((function e(t,r){var i,u,s,l,c,f,h,p,d,y,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v=function(){return(v=Object(a.a)(o.a.mark((function e(n,a){var u,s,l,c,f,h,p,d,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i.nodes[n],s=t.getNodeTransform(n),oe.warnUnsupportedIf(null!=u.weights,"Morph targets are not supported."),null==u.mesh){e.next=20;break}l=i.meshes[u.mesh],c=K(l.primitives),e.prev=4,c.s();case 6:if((f=c.n()).done){e.next=12;break}return h=f.value,e.next=10,r(h,s,a,l.name);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:p=K(u.children||[]),e.prev=21,p.s();case 23:if((d=p.n()).done){e.next=29;break}return v=d.value,e.next=27,y(v,a);case 27:e.next=23;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(21),p.e(e.t1);case 34:return e.prev=34,p.f(),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[4,14,17,20],[21,31,34,37]])})))).apply(this,arguments)},y=function(e,t){return v.apply(this,arguments)},i=t.json,u=i.scenes[i.scene||0].nodes,s=u.length>1,l=K(u),e.prev=4,l.s();case 6:if((c=l.n()).done){e.next=14;break}return f=c.value,h=i.nodes[f],p=[y(f,0)],ae(h)&&!s&&(d=h.extensions.MSFT_lod.ids,p.push.apply(p,Object(n.a)(d.map((function(e,t){return y(e,t+1)}))))),e.next=12,Promise.all(p);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),l.e(e.t0);case 19:return e.prev=19,l.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[4,16,19,22]])})))).apply(this,arguments)}function ae(e){return e.extensions&&e.extensions.MSFT_lod&&Array.isArray(e.extensions.MSFT_lod.ids)}function ie(e,t,r){var n=function(t){var n="".concat(r,"_tex_").concat(t&&t.id).concat(t&&t.name?"_"+t.name:"");if(t&&!e.textures.has(n)){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{data:e,parameters:v({wrap:v({s:10497,t:10497},t.wrap),noUnpackFlip:!0,mipmap:!1},t)}}(t.data,{wrap:{s:t.wrapS,t:t.wrapT},mipmap:ue.some((function(e){return e===t.minFilter})),noUnpackFlip:!0});e.textures.set(n,a)}return n},a="".concat(r,"_mat_").concat(t.id,"_").concat(t.name);if(!e.materials.has(a)){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v({color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply"},e)}({color:[t.color[0],t.color[1],t.color[2]],opacity:t.color[3],alphaMode:t.alphaMode,alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,colorMixMode:t.ESRI_externalColorMixMode,textureColor:t.colorTexture?n(t.colorTexture):void 0,textureNormal:t.normalTexture?n(t.normalTexture):void 0,textureOcclusion:t.occlusionTexture?n(t.occlusionTexture):void 0,textureEmissive:t.emissiveTexture?n(t.emissiveTexture):void 0,textureMetallicRoughness:t.metallicRoughnessTexture?n(t.metallicRoughnessTexture):void 0,emissiveFactor:[t.emissiveFactor[0],t.emissiveFactor[1],t.emissiveFactor[2]],metallicFactor:t.metallicFactor,roughnessFactor:t.roughnessFactor});e.materials.set(a,i)}return a}var oe=new p,ue=[9987,9985],se=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]},r6XU:function(e,t,r){"use strict";r.d(t,"a",(function(){return Y}));var n=r("mK0O"),a=r("eijD"),i=r("hisu"),o=r("yBJb"),u=r("CHlC"),s=r("kMo5"),l=r("P+uj"),c=r("NthX"),f=r.n(c),h=r("dQW7"),p=r("DGz/"),d=r("Mp7X"),y=(r("J4Pc"),r("TM+E")),v=r("7im+"),b=r("IH5m"),m=r("z9dv"),g=r("xAIp"),O=(r("wckI"),r("mp5+")),w=r("iaHD"),j=r("jr4m"),x=r("zHpc"),k=r("nd5+"),I=r("ARTo"),_=r("YHXj"),S=r("/BCw"),T=r("NRoO"),A=r("YAOx"),M=r("eoZi"),C=r("OYdn"),P=r("EKEt"),D=r("ErXN"),E=r("6rmj");function R(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t,r){return F.apply(this,arguments)}function F(){return(F=Object(a.a)(f.a.mark((function e(t,r,n){var a,i,o,u,s,l,c,h,p,y,v,m,g,O,w,j,x;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&r.resources){e.next=2;break}return e.abrupt("return");case 2:a=r.portalItem===t.portalItem?new Set(t.paths):new Set,t.paths.length=0,t.portalItem=r.portalItem,i=new Set(r.resources.toKeep.map((function(e){return e.resource.path}))),o=new Set,u=[],i.forEach((function(e){a.delete(e),t.paths.push(e)})),s=R(r.resources.toUpdate);try{for(s.s();!(l=s.n()).done;)c=l.value,a.delete(c.resource.path),i.has(c.resource.path)||o.has(c.resource.path)?(h=c.resource,p=c.content,y=c.finish,v=c.error,m=Object(E.getSiblingOfSameTypeI)(h,Object(D.a)()),t.paths.push(m.path),u.push(L({resource:m,content:p,finish:y,error:v},n))):(t.paths.push(c.resource.path),u.push(G(c,n)),o.add(c.resource.path))}catch(f){s.e(f)}finally{s.f()}g=R(r.resources.toAdd);try{for(g.s();!(O=g.n()).done;)w=O.value,u.push(L(w,n)),t.paths.push(w.resource.path)}catch(f){g.e(f)}finally{g.f()}if(a.forEach((function(e){var t=r.portalItem.resourceFromPath(e);u.push(t.portalItem.removeResource(t).catch((function(){})))})),0!==u.length){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,Object(b.j)(u);case 14:if(j=e.sent,Object(b.v)(n),!((x=j.filter((function(e){return"error"in e})).map((function(e){return e.error}))).length>0)){e.next=19;break}throw new d.a("save:resources","Failed to save one or more resources",{errors:x});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return U.apply(this,arguments)}function U(){return(U=Object(a.a)(f.a.mark((function e(t,r){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.c)(t.resource.portalItem.addResource(t.resource,t.content,r));case 2:if(!0===(n=e.sent).ok){e.next=5;break}throw t.error&&t.error(n.error),n.error;case 5:t.finish&&t.finish(t.resource);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){return z.apply(this,arguments)}function z(){return(z=Object(a.a)(f.a.mark((function e(t,r){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.c)(t.resource.update(t.content,r));case 2:if(!0===(n=e.sent).ok){e.next=5;break}throw t.error(n.error),n.error;case 5:t.finish(t.resource);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var Z=y.a.getLogger("esri.layers.mixins.SceneService"),Y=function(e){var t=function(e){Object(u.a)(w,e);var t,n,s,l,c,h,y,g,O=q(w);function w(){var e;return Object(i.a)(this,w),(e=O.apply(this,arguments)).spatialReference=null,e.fullExtent=null,e.heightModelInfo=null,e.minScale=0,e.maxScale=0,e.version={major:Number.NaN,minor:Number.NaN,versionString:""},e.copyright=null,e.sublayerTitleMode="item-title",e.title=null,e.layerId=null,e.indexInfo=null,e._debouncedSaveOperations=Object(b.i)(function(){var t=Object(a.a)(f.a.mark((function t(r,n,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next=0===t.t0?3:1===t.t0?4:5;break;case 3:return t.abrupt("return",e._save(n));case 4:return t.abrupt("return",e._saveAs(a,n));case 5:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e}return Object(o.a)(w,[{key:"readSpatialReference",value:function(e,t){return this._readSpatialReference(t)}},{key:"_readSpatialReference",value:function(e){if(null!=e.spatialReference)return _.a.fromJSON(e.spatialReference);var t=e.store,r=t.indexCRS||t.geographicCRS,n=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=n?new _.a(n):null}},{key:"readFullExtent",value:function(e,t,r){if(null!=e&&"object"==typeof e)return k.a.fromJSON(e,r);var n=t.store,a=this._readSpatialReference(t);return null==a||null==n||null==n.extent||!Array.isArray(n.extent)||n.extent.some((function(e){return e<K}))?null:new k.a({xmin:n.extent[0],ymin:n.extent[1],xmax:n.extent[2],ymax:n.extent[3],spatialReference:a})}},{key:"readVersion",value:function(e,t){var r=t.store,n=null!=r.version?r.version.toString():"",a={major:Number.NaN,minor:Number.NaN,versionString:n},i=n.split(".");return i.length>=2&&(a.major=parseInt(i[0],10),a.minor=parseInt(i[1],10)),a}},{key:"readTitlePortalItem",value:function(e){return"item-title"!==this.sublayerTitleMode?void 0:e}},{key:"readTitleService",value:function(e,t){var r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return Object(S.j)(this.url,t.name);var n=t.name;if(!n&&this.url){var a=Object(S.f)(this.url);Object(v.i)(a)&&(n=a.title)}return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(n=r+" - "+n),Object(S.a)(n)}},{key:"url",set:function(e){var t=Object(S.i)({layer:this,url:e,nonStandardUrlAllowed:!1,logger:Z});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}},{key:"writeUrl",value:function(e,t,r,n){Object(S.k)(this,e,"layers",t,n)}},{key:"parsedUrl",get:function(){var e=this._get("url");if(!e)return null;var t=Object(m.K)(e);return null!=this.layerId&&(t.path="".concat(t.path,"/layers/").concat(this.layerId)),t}},{key:"_fetchIndexAndUpdateExtent",value:(g=Object(a.a)(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.indexInfo=Object(A.a)(this.parsedUrl.path,this.rootNode,t,this.apiKey,Z,r),e.t0=null==this.fullExtent||this.fullExtent.hasZ,e.t0){e.next=8;break}return e.t1=this,e.next=6,this.indexInfo;case 6:e.t2=e.sent,e.t1._updateExtent.call(e.t1,e.t2);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"_updateExtent",value:function(e){if("page"===(null==e?void 0:e.type)){var t,r,n=e.rootIndex%e.pageSize,a=null==(t=e.rootPage)||null==(r=t.nodes)?void 0:r[n];if(null==a||null==a.obb||null==a.obb.center||null==a.obb.halfSize)throw new d.a("sceneservice:invalid-node-page","Invalid node page.");if(a.obb.center[0]<K||null==this.fullExtent||this.fullExtent.hasZ)return;var i=a.obb.halfSize,o=a.obb.center[2],u=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);this.fullExtent.zmin=o-u,this.fullExtent.zmax=o+u}else if("node"===(null==e?void 0:e.type)){var s,l=null==(s=e.rootNode)?void 0:s.mbs;if(!Array.isArray(l)||4!==l.length||l[0]<K)return;var c=l[2],f=l[3];this.fullExtent.zmin=c-f,this.fullExtent.zmax=c+f}}},{key:"_fetchService",value:(y=Object(a.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.url){e.next=2;break}throw new d.a("sceneservice:url-not-set","Scene service can not be loaded without valid portal item or url");case 2:if(null!=this.layerId||!/SceneServer\/*$/i.test(this.url)){e.next=7;break}return e.next=5,this._fetchFirstLayerId(t);case 5:null!=(r=e.sent)&&(this.layerId=r);case 7:return e.abrupt("return",this._fetchServiceLayer(t));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"_fetchFirstLayerId",value:(h=Object(a.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.default)(this.url,{query:{f:"json",token:this.apiKey},responseType:"json",signal:t});case 2:if(!((r=e.sent).data&&Array.isArray(r.data.layers)&&r.data.layers.length>0)){e.next=5;break}return e.abrupt("return",r.data.layers[0].id);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"_fetchServiceLayer",value:(c=Object(a.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.default)(this.parsedUrl.path,{query:{f:"json",token:this.apiKey},responseType:"json",signal:t});case 2:(r=e.sent).ssl&&(this.url=this.url.replace(/^http:/i,"https:")),n=r.data,this.read(n,{origin:"service",url:this.parsedUrl}),this.validateLayer(n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"_ensureLoadBeforeSave",value:(l=Object(a.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(e.t0="beforeSave"in this&&"function"==typeof this.beforeSave,!e.t0){e.next=6;break}return e.next=6,this.beforeSave();case 6:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"validateLayer",value:function(e){}},{key:"_updateTypeKeywords",value:function(e,t,r){e.typeKeywords||(e.typeKeywords=[]);var n,a=J(t.getTypeKeywords());try{for(a.s();!(n=a.n()).done;){var i=n.value;e.typeKeywords.push(i)}}catch(o){a.e(o)}finally{a.f()}e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((function(e,t,r){return r.indexOf(e)===t})),1===r&&(e.typeKeywords=e.typeKeywords.filter((function(e){return"Hosted Service"!==e}))))}},{key:"_saveAs",value:(s=Object(a.a)(f.a.mark((function e(t,r){var n,a,i,o,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=H(H({},$),r),a=C.default.from(t),e.t0=a,e.t0){e.next=7;break}return Z.error("_saveAs(): requires a portal item parameter"),e.next=7,Promise.reject(new d.a("sceneservice:portal-item-required","_saveAs() requires a portal item to save to"));case 7:return a.id&&((a=a.clone()).id=null),i=a.portal||M.a.getDefault(),e.next=11,this._ensureLoadBeforeSave();case 11:return a.type=Q,a.portal=i,o={origin:"portal-item",url:null,messages:[],portal:i,portalItem:a,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},u={layers:[this.write(null,o)]},e.next=16,Promise.all(o.resources.pendingOperations);case 16:return e.next=18,this._validateAgainstJSONSchema(u,o,n);case 18:return a.url=this.url,a.title||(a.title=this.title),this._updateTypeKeywords(a,n,1),e.next=23,i._signIn();case 23:return e.next=25,i.user.addItem({item:a,folder:n&&n.folder,data:u});case 25:return e.next=27,B(this.resourceReferences,o,null);case 27:return this.portalItem=a,Object(x.a)(o),o.portalItem=a,e.abrupt("return",a);case 31:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"_save",value:(n=Object(a.a)(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=H(H({},$),t),e.t0=this.portalItem,e.t0){e.next=6;break}return Z.error("_save(): requires the .portalItem property to be set"),e.next=6,Promise.reject(new d.a("sceneservice:portal-item-not-set","Portal item to save to has not been set on this SceneService"));case 6:if(e.t1=this.portalItem.type!==Q,!e.t1){e.next=11;break}return Z.error("_save(): Non-matching portal item type. Got "+this.portalItem.type+", expected "+Q),e.next=11,Promise.reject(new d.a("sceneservice:portal-item-wrong-type",'Portal item needs to have type "'.concat(Q,'"')));case 11:return e.next=13,this._ensureLoadBeforeSave();case 13:return n={origin:"portal-item",url:this.portalItem.itemUrl&&Object(m.K)(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||M.a.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},a={layers:[this.write(null,n)]},e.next=16,Promise.all(n.resources.pendingOperations);case 16:return e.next=18,this._validateAgainstJSONSchema(a,n,r);case 18:return this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,r,0),e.next=23,this.portalItem.update({data:a});case 23:return e.next=25,B(this.resourceReferences,n,null);case 25:return Object(x.a)(n),e.abrupt("return",this.portalItem);case 27:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_validateAgainstJSONSchema",value:(t=Object(a.a)(f.a.mark((function e(t,n,a){var i,o,u,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.messages.filter((function(e){return"error"===e.type})).map((function(e){return new d.a(e.name,e.message,e.details)})),a&&a.validationOptions.ignoreUnsupported&&(i=i.filter((function(e){return"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name}))),!a.validationOptions.enabled&&!X){e.next=10;break}return e.next=4,Promise.all([r.e(42),r.e(26),r.e(0),r.e(146)]).then(r.bind(null,"ibSq"));case 4:if(!((o=e.sent.validate(t,a.portalItemLayerType)).length>0)){e.next=10;break}if(u="Layer item did not validate:\n".concat(o.join("\n")),Z.error("_validateAgainstJSONSchema(): ".concat(u)),"throw"!==a.validationOptions.failPolicy){e.next=10;break}throw s=o.map((function(e){return new d.a("sceneservice:schema-validation",e)})).concat(i),new d.a("sceneservice-validate:error","Failed to save layer item due to schema validation, see `details.errors`.",{combined:s});case 10:if(!(i.length>0)){e.next=12;break}throw new d.a("sceneservice:save","Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i});case 12:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})}]),w}(e);return Object(h.a)([Object(g.b)(T.c)],t.prototype,"id",void 0),Object(h.a)([Object(g.b)({type:_.a})],t.prototype,"spatialReference",void 0),Object(h.a)([Object(O.a)("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readSpatialReference",null),Object(h.a)([Object(g.b)({type:k.a})],t.prototype,"fullExtent",void 0),Object(h.a)([Object(O.a)("fullExtent",["fullExtent","store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readFullExtent",null),Object(h.a)([Object(g.b)({readOnly:!0,type:I.a})],t.prototype,"heightModelInfo",void 0),Object(h.a)([Object(g.b)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:{source:"minScale"},write:!1}}}})],t.prototype,"minScale",void 0),Object(h.a)([Object(g.b)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:{source:"maxScale"},write:!1}}}})],t.prototype,"maxScale",void 0),Object(h.a)([Object(g.b)({readOnly:!0})],t.prototype,"version",void 0),Object(h.a)([Object(O.a)("version",["store.version"])],t.prototype,"readVersion",null),Object(h.a)([Object(g.b)({type:String,json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(h.a)([Object(g.b)({type:String,json:{read:!1}})],t.prototype,"sublayerTitleMode",void 0),Object(h.a)([Object(g.b)({type:String})],t.prototype,"title",void 0),Object(h.a)([Object(O.a)("portal-item","title")],t.prototype,"readTitlePortalItem",null),Object(h.a)([Object(O.a)("service","title",["name"])],t.prototype,"readTitleService",null),Object(h.a)([Object(g.b)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{write:{target:"id",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],t.prototype,"layerId",void 0),Object(h.a)([Object(g.b)(T.n)],t.prototype,"url",null),Object(h.a)([Object(j.a)("url")],t.prototype,"writeUrl",null),Object(h.a)([Object(g.b)()],t.prototype,"parsedUrl",null),Object(h.a)([Object(g.b)({readOnly:!0})],t.prototype,"store",void 0),Object(h.a)([Object(g.b)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],t.prototype,"rootNode",void 0),t=Object(h.a)([Object(w.a)("esri.layers.mixins.SceneService")],t),t},K=-1e38,X=!1,Q="Scene Service",$={getTypeKeywords:function(){return[]},portalItemLayerType:"unknown",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:"throw"}}},r99u:function(e,t,r){"use strict";function n(e,t){if(!e)return null;var r=t.featureAdapter,n=e.startTimeField,a=e.endTimeField,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;if(n&&a)t.forEach((function(e){var t=r.getAttribute(e,n),u=r.getAttribute(e,a);null==t||isNaN(t)||(i=Math.min(i,t)),null==u||isNaN(u)||(o=Math.max(o,u))}));else{var u=n||a;t.forEach((function(e){var t=r.getAttribute(e,u);null==t||isNaN(t)||(i=Math.min(i,t),o=Math.max(o,t))}))}return{start:i,end:o}}function a(e,t,r){if(!t||!e)return null;var n=e.startTimeField,a=e.endTimeField;if(!n&&!a)return null;var i=t.start,o=t.end;return null===i&&null===o?null:void 0===i&&void 0===o?function(){return!1}:n&&a?function(e,t,r,n,a){return null!=n&&null!=a?function(i){var o=e.getAttribute(i,t),u=e.getAttribute(i,r);return(null==o||o<=a)&&(null==u||u>=n)}:null!=n?function(t){var a=e.getAttribute(t,r);return null==a||a>=n}:null!=a?function(r){var n=e.getAttribute(r,t);return null==n||n<=a}:void 0}(r,n,a,i,o):function(e,t,r,n){return null!=r&&null!=n&&r===n?function(n){return e.getAttribute(n,t)===r}:null!=r&&null!=n?function(a){var i=e.getAttribute(a,t);return i>=r&&i<=n}:null!=r?function(n){return e.getAttribute(n,t)>=r}:null!=n?function(r){return e.getAttribute(r,t)<=n}:void 0}(r,n||a,i,o)}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}))},r9FC:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=function(){function e(t){Object(n.a)(this,e),this._array=[],t<=0&&console.error("strideInBytes must be positive!"),this._stride=t}return Object(a.a)(e,[{key:"array",get:function(){return this._array}},{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",get:function(){return 4*this._array.length}},{key:"reset",value:function(){this.array.length=0}},{key:"toBuffer",value:function(){return new Uint32Array(this._array).buffer}}],[{key:"i1616to32",value:function(e,t){return 65535&e|t<<16}},{key:"i8888to32",value:function(e,t,r,n){return 255&e|(255&t)<<8|(255&r)<<16|n<<24}},{key:"i8816to32",value:function(e,t,r){return 255&e|(255&t)<<8|r<<16}}]),e}();t.a=i},rK21:function(e,t,r){"use strict";var n,a=r("mK0O"),i=r("hisu"),o=r("yBJb"),u=r("CHlC"),s=r("kMo5"),l=r("P+uj"),c=r("dQW7"),f=r("0fJP"),h=r("xAIp"),p=r("wckI"),d=(r("J4Pc"),r("TM+E"),r("vo12")),y=r("iaHD"),v=r("sPA0"),b=r("d7QU"),m=r("WYis"),g=r("0n+b");function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var w=n=function(e){Object(u.a)(r,e);var t=O(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).description=null,e.label=null,e.values=null,e.color=null,e}return Object(o.a)(r,[{key:"clone",value:function(){return new n({description:this.description,label:this.label,values:Object(f.a)(this.values),color:Object(f.a)(this.color)})}}]),r}(g.a);Object(c.a)([Object(h.b)({type:String,json:{write:!0}})],w.prototype,"description",void 0),Object(c.a)([Object(h.b)({type:String,json:{write:!0}})],w.prototype,"label",void 0),Object(c.a)([Object(h.b)({type:[String],json:{write:!0}})],w.prototype,"values",void 0),Object(c.a)([Object(h.b)({type:m.a,json:{type:[p.a],write:!0}})],w.prototype,"color",void 0);var j,x=w=n=Object(c.a)([Object(y.a)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],w);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var S=j=function(e){Object(u.a)(r,e);var t=_(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="point-cloud-unique-value",n.field=null,n.fieldTransformType=null,n.colorUniqueValueInfos=null,n.legendOptions=null,n}return Object(o.a)(r,[{key:"clone",value:function(){return new j(I(I({},this.cloneProperties()),{},{field:Object(f.a)(this.field),fieldTransformType:Object(f.a)(this.fieldTransformType),colorUniqueValueInfos:Object(f.a)(this.colorUniqueValueInfos),legendOptions:Object(f.a)(this.legendOptions)}))}}]),r}(v.a);Object(c.a)([Object(d.a)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],S.prototype,"type",void 0),Object(c.a)([Object(h.b)({json:{write:!0},type:String})],S.prototype,"field",void 0),Object(c.a)([Object(h.b)({type:v.a.fieldTransformTypeKebabDict.apiValues,json:{type:v.a.fieldTransformTypeKebabDict.jsonValues,read:v.a.fieldTransformTypeKebabDict.read,write:v.a.fieldTransformTypeKebabDict.write}})],S.prototype,"fieldTransformType",void 0),Object(c.a)([Object(h.b)({type:[x],json:{write:!0}})],S.prototype,"colorUniqueValueInfos",void 0),Object(c.a)([Object(h.b)({type:b.a,json:{write:!0}})],S.prototype,"legendOptions",void 0);var T=S=j=Object(c.a)([Object(y.a)("esri.renderers.PointCloudUniqueValueRenderer")],S);t.a=T},rNep:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=r("TM+E").a.getLogger("esri.views.3d.support.buffer.math")},rpQj:function(e,t,r){"use strict";var n,a=r("hisu"),i=r("yBJb"),o=r("CHlC"),u=r("kMo5"),s=r("P+uj"),l=r("dQW7"),c=r("0n+b"),f=r("0fJP"),h=r("xAIp"),p=r("wckI"),d=(r("J4Pc"),r("TM+E"),r("iaHD"));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var v=n=function(e){Object(o.a)(r,e);var t=y(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).variableName=null,n.dimensionName=null,n.values=[],n.isSlice=!1,n}return Object(i.a)(r,[{key:"clone",value:function(){return new n({variableName:this.variableName,dimensionName:this.dimensionName,values:Object(f.a)(this.values),isSlice:this.isSlice})}}]),r}(c.a);Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],v.prototype,"variableName",void 0),Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],v.prototype,"dimensionName",void 0),Object(l.a)([Object(h.b)({type:p.p.array(p.p.oneOf([p.p.native(Number),p.p.array(p.p.native(Number))])),json:{write:!0}})],v.prototype,"values",void 0),Object(l.a)([Object(h.b)({type:Boolean,json:{write:!0}})],v.prototype,"isSlice",void 0);var b=v=n=Object(l.a)([Object(d.a)("esri.layers.support.DimensionalDefinition")],v);t.a=b},sE9J:function(e,t,r){"use strict";var n,a=r("aNYv"),i=r("hisu"),o=r("yBJb"),u=r("CHlC"),s=r("kMo5"),l=r("P+uj"),c=r("dQW7"),f=(r("J4Pc"),r("Mp7X")),h=r("0n+b"),p=r("0fJP"),d=r("TM+E"),y=r("7im+"),v=r("xAIp"),b=r("gljZ"),m=r("iaHD");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var O=d.a.getLogger("esri.layers.support.PixelBlock"),w=n=function(e){Object(u.a)(r,e);var t=g(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).width=null,n.height=null,n.pixelType="f32",n.validPixelCount=null,n.mask=null,n.maskIsAlpha=!1,n.pixels=null,n.statistics=null,n}return Object(o.a)(r,[{key:"castPixelType",value:function(e){if(!e)return"f32";var t=e.toLowerCase();return["u1","u2","u4"].indexOf(t)>-1?t="u8":-1===["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].indexOf(t)&&(t="f32"),t}},{key:"getPlaneCount",value:function(){return this.pixels&&this.pixels.length}},{key:"addData",value:function(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new f.a("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics||{minValue:null,maxValue:null})}},{key:"getAsRGBA",value:function(){var e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}},{key:"getAsRGBAFloat",value:function(){var e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}},{key:"updateStatistics",value:function(){var e=this;this.statistics=this.pixels.map((function(t){return e._calculateBandStatistics(t,e.mask)}));var t=this.mask,r=0;if(t)for(var n=0;n<t.length;n++)t[n]&&r++;else r=this.width*this.height;this.validPixelCount=r}},{key:"clamp",value:function(e){if(e&&"f64"!==e&&"f32"!==e){var t;switch(e){case"u8":t=[0,255];break;case"u16":t=[0,65535];break;case"u32":t=[0,4294967295];break;case"s8":t=[-128,127];break;case"s16":t=[-32768,32767];break;case"s32":t=[-2147483648,2147483647];break;default:t=[-34e38,34e38]}for(var r,i,o,u=t,s=Object(a.a)(u,2),l=s[0],c=s[1],f=this.pixels,h=this.width*this.height,p=f.length,d=[],y=0;y<p;y++){o=n.createEmptyBand(e,h),r=f[y];for(var v=0;v<h;v++)i=r[v],o[v]=i>c?c:i<l?l:i;d.push(o)}this.pixels=d,this.pixelType=e}}},{key:"extractBands",value:function(e){var t=this;if(Object(y.h)(e)||0===e.length||null==this.pixels||0===this.pixels.length)return this;var r=this.pixels.length,a=e.some((function(e){return e>=t.pixels.length})),i=r===e.length&&!e.some((function(e,t){return e!==t}));return a||i?this:new n({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:e.map((function(e){return t.pixels[e]})),statistics:this.statistics&&e.map((function(e){return t.statistics[e]}))})}},{key:"clone",value:function(){var e,t=new n({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(this.mask instanceof Uint8Array?t.mask=new Uint8Array(this.mask):t.mask=this.mask.slice(0));var r=n.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){t.pixels=[];var a=this.pixels[0].slice;for(e=0;e<this.pixels.length;e++)t.pixels[e]=a?this.pixels[e].slice(0,this.pixels[e].length):new r(this.pixels[e])}if(this.statistics)for(t.statistics=[],e=0;e<this.statistics.length;e++)t.statistics[e]=Object(p.a)(this.statistics[e]);return t}},{key:"_fillFrom8Bit",value:function(e){var t=this.mask,r=this.maskIsAlpha,n=this.pixels;if(e&&n&&n.length){var a,i,o,u;a=i=o=n[0],n.length>=3?(i=n[1],o=n[2]):2===n.length&&(i=n[1]);var s=new Uint32Array(e),l=this.width*this.height;if(a.length===l)if(t&&t.length===l)if(r)for(u=0;u<l;u++)t[u]&&(s[u]=t[u]<<24|o[u]<<16|i[u]<<8|a[u]);else for(u=0;u<l;u++)t[u]&&(s[u]=255<<24|o[u]<<16|i[u]<<8|a[u]);else for(u=0;u<l;u++)s[u]=255<<24|o[u]<<16|i[u]<<8|a[u];else O.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}else O.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFromNon8Bit",value:function(e){var t=this.pixels,r=this.mask,n=this.statistics;if(e&&t&&t.length){var a=this.pixelType,i=1,o=0;if(n&&n.length>0)o=n.map((function(e){return e.minValue})).reduce((function(e,t){return Math.min(e,t)})),i=255/n.map((function(e){return e.maxValue-e.minValue})).reduce((function(e,t){return Math.max(e,t)}));else{var u=255;"s8"===a?(o=-128,u=127):"u16"===a?u=65535:"s16"===a?(o=-32768,u=32767):"u32"===a?u=4294967295:"s32"===a?(o=-2147483648,u=2147483647):"f32"===a?(o=-34e38,u=34e38):"f64"===a&&(o=-Number.MAX_VALUE,u=Number.MAX_VALUE),i=255/(u-o)}var s,l,c,f,h,p=new Uint32Array(e),d=this.width*this.height;if((s=l=c=t[0]).length!==d)return O.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(l=t[1],t.length>=3&&(c=t[2]),r&&r.length===d)for(f=0;f<d;f++)r[f]&&(p[f]=255<<24|(c[f]-o)*i<<16|(l[f]-o)*i<<8|(s[f]-o)*i);else for(f=0;f<d;f++)p[f]=255<<24|(c[f]-o)*i<<16|(l[f]-o)*i<<8|(s[f]-o)*i;else if(r&&r.length===d)for(f=0;f<d;f++)h=(s[f]-o)*i,r[f]&&(p[f]=255<<24|h<<16|h<<8|h);else for(f=0;f<d;f++)h=(s[f]-o)*i,p[f]=255<<24|h<<16|h<<8|h}else O.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFrom32Bit",value:function(e){var t,r,n,a,i=this.pixels,o=this.mask;if(!e||!i||!i.length)return O.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");t=r=n=i[0],i.length>=3?(r=i[1],n=i[2]):2===i.length&&(r=i[1]);var u=this.width*this.height;if(t.length!==u)return O.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");var s=0;if(o&&o.length===u)for(a=0;a<u;a++)e[s++]=t[a],e[s++]=r[a],e[s++]=n[a],e[s++]=1&o[a];else for(a=0;a<u;a++)e[s++]=t[a],e[s++]=r[a],e[s++]=n[a],e[s++]=1}},{key:"_calculateBandStatistics",value:function(e,t){var r,n=1/0,a=-1/0,i=e.length,o=0;if(t)for(r=0;r<i;r++)t[r]&&(n=(o=e[r])<n?o:n,a=o>a?o:a);else for(r=0;r<i;r++)n=(o=e[r])<n?o:n,a=o>a?o:a;return{minValue:n,maxValue:a}}}],[{key:"createEmptyBand",value:function(e,t){return new(n.getPixelArrayConstructor(e))(t)}},{key:"getPixelArrayConstructor",value:function(e){var t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"u32":t=Uint32Array;break;case"f32":t=Float32Array;break;case"f64":t=Float64Array;break;case"c64":case"c128":case"unknown":t=Float32Array}return t}}]),r}(h.a);Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"width",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"height",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"pixelType",void 0),Object(c.a)([Object(b.a)("pixelType")],w.prototype,"castPixelType",null),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"validPixelCount",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"mask",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"maskIsAlpha",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"pixels",void 0),Object(c.a)([Object(v.b)({json:{write:!0}})],w.prototype,"statistics",void 0);var j=w=n=Object(c.a)([Object(m.a)("esri.layers.support.PixelBlock")],w);t.a=j},sPA0:function(e,t,r){"use strict";var n,a=r("hisu"),i=r("yBJb"),o=r("CHlC"),u=r("kMo5"),s=r("P+uj"),l=r("dQW7"),c=r("7i+s"),f=r("0n+b"),h=r("0fJP"),p=r("xAIp"),d=(r("wckI"),r("J4Pc"),r("TM+E"),r("iaHD"));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(M){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var v=n=function(e){Object(o.a)(r,e);var t=y(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).field=null,e.minValue=0,e.maxValue=255,e}return Object(i.a)(r,[{key:"clone",value:function(){return new n({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}}]),r}(f.a);Object(l.a)([Object(p.b)({type:String,json:{write:!0}})],v.prototype,"field",void 0),Object(l.a)([Object(p.b)({type:Number,nonNullable:!0,json:{write:!0}})],v.prototype,"minValue",void 0),Object(l.a)([Object(p.b)({type:Number,nonNullable:!0,json:{write:!0}})],v.prototype,"maxValue",void 0);var b=v=n=Object(l.a)([Object(d.a)("esri.renderers.support.pointCloud.ColorModulation")],v);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(M){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var g=new c.a({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"}),O=function(e){Object(o.a)(r,e);var t=m(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return r}(f.a);Object(l.a)([Object(p.b)({type:g.apiValues,readOnly:!0,nonNullable:!0,json:{type:g.jsonValues,read:!1,write:g.write}})],O.prototype,"type",void 0);var w,j=O=Object(l.a)([Object(d.a)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],O),x=r("vo12");function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(M){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var I=w=function(e){Object(o.a)(r,e);var t=k(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).type="fixed-size",e.size=0,e.useRealWorldSymbolSizes=null,e}return Object(i.a)(r,[{key:"clone",value:function(){return new w({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}}]),r}(j);Object(l.a)([Object(x.a)({pointCloudFixedSizeAlgorithm:"fixed-size"})],I.prototype,"type",void 0),Object(l.a)([Object(p.b)({type:Number,nonNullable:!0,json:{write:!0}})],I.prototype,"size",void 0),Object(l.a)([Object(p.b)({type:Boolean,json:{write:!0}})],I.prototype,"useRealWorldSymbolSizes",void 0);var _,S=I=w=Object(l.a)([Object(d.a)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],I);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(M){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var A=_=function(e){Object(o.a)(r,e);var t=T(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).type="splat",e.scaleFactor=1,e}return Object(i.a)(r,[{key:"clone",value:function(){return new _({scaleFactor:this.scaleFactor})}}]),r}(j);Object(l.a)([Object(x.a)({pointCloudSplatAlgorithm:"splat"})],A.prototype,"type",void 0),Object(l.a)([Object(p.b)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],A.prototype,"scaleFactor",void 0);var M={key:"type",base:j,typeMap:{"fixed-size":S,splat:A=_=Object(l.a)([Object(d.a)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],A)}};function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(M){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var P=Object(c.b)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"}),D=function(e){Object(o.a)(r,e);var t=C(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type=void 0,n.pointSizeAlgorithm=null,n.colorModulation=null,n.pointsPerInch=10,n}return Object(i.a)(r,[{key:"clone",value:function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}},{key:"cloneProperties",value:function(){return{pointSizeAlgorithm:Object(h.a)(this.pointSizeAlgorithm),colorModulation:Object(h.a)(this.colorModulation),pointsPerInch:Object(h.a)(this.pointsPerInch)}}}]),r}(f.a);Object(l.a)([Object(p.b)({type:P.apiValues,readOnly:!0,nonNullable:!0,json:{type:P.jsonValues,read:!1,write:P.write}})],D.prototype,"type",void 0),Object(l.a)([Object(p.b)({types:M,json:{write:!0}})],D.prototype,"pointSizeAlgorithm",void 0),Object(l.a)([Object(p.b)({type:b,json:{write:!0}})],D.prototype,"colorModulation",void 0),Object(l.a)([Object(p.b)({json:{write:!0},nonNullable:!0,type:Number})],D.prototype,"pointsPerInch",void 0),D=Object(l.a)([Object(d.a)("esri.renderers.PointCloudRenderer")],D),(D||(D={})).fieldTransformTypeKebabDict=new c.a({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});var E=D;t.a=E},sfoB:function(e,t,r){"use strict";var n=r("6CzD"),a=r("hisu"),i=r("yBJb"),o=r("CHlC"),u=r("kMo5"),s=r("P+uj"),l=r("dQW7"),c=r("0n+b"),f=r("xAIp"),h=(r("J4Pc"),r("wckI")),p=(r("TM+E"),r("vo12")),d=r("iaHD"),y=r("WYis");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var b=function(e){Object(o.a)(r,e);var t=v(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).value=null,e.label=null,e.color=null,e}return r}(c.a);Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],b.prototype,"value",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],b.prototype,"label",void 0),Object(l.a)([Object(f.b)({type:y.a,json:{type:[h.a],write:!0}})],b.prototype,"color",void 0);var m,g=b=Object(l.a)([Object(d.a)("esri.renderers.support.ColormapInfo")],b),O=r("HpMY");function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var j=m=function(e){Object(o.a)(r,e);var t=w(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).colormapInfos=null,n.type="raster-colormap",n}return Object(i.a)(r,[{key:"clone",value:function(){return new m({colormapInfos:this.colormapInfos.map((function(e){return e.toJSON()}))})}},{key:"extractColormap",value:function(){return this.colormapInfos.map((function(e){return[e.value,e.color.r,e.color.g,e.color.b,e.color.a>1?e.color.a:255*e.color.a&255]})).sort((function(e,t){return e[0]-t[0]}))}}],[{key:"createFromColormap",value:function(e,t){if(!e)return null;var r=5===e[0].length,a=Object(n.a)(e).sort((function(e){return e[0][0]-e[1][0]})).map((function(e){var n;return g.fromJSON({value:e[0],color:r?e.slice(1,5):e.slice(1,4).concat([255]),label:t?null!=(n=t[e[0]])?n:"":e[0]})}));return new m({colormapInfos:a})}},{key:"createFromColorramp",value:function(e){var t=Object(O.b)(e,256);return m.createFromColormap(t)}}]),r}(c.a);Object(l.a)([Object(f.b)({type:[g],json:{write:!0}})],j.prototype,"colormapInfos",void 0),Object(l.a)([Object(p.a)({rasterColormap:"raster-colormap"})],j.prototype,"type",void 0);var x=j=m=Object(l.a)([Object(d.a)("esri.renderers.RasterColormapRenderer")],j);t.a=x},stpy:function(e,t,r){"use strict";var n,a=r("eijD"),i=r("hisu"),o=r("yBJb"),u=r("CHlC"),s=r("kMo5"),l=r("P+uj"),c=r("NthX"),f=r.n(c),h=r("dQW7"),p=r("WYis"),d=(r("ZTBZ"),r("4VMI")),y=(r("fb8N"),r("7i+s")),v=r("0n+b"),b=r("0fJP"),m=r("xAIp"),g=(r("wckI"),r("J4Pc"),r("TM+E"),r("vo12")),O=r("mp5+"),w=r("iaHD"),j=r("pkWm"),x=r("8t8S"),k=r("YRYL"),I=r("ql4C"),_=r("ZAfR"),S=r("B8JN"),T=r("/TJE"),A=r("0F8f"),M=r("DKWO"),C=r("I5De"),P=r("QXZs"),D=r("OTJA"),E=r("rgdf");function R(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var F=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),L=new y.a({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),U=new y.a({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),G=new y.a({flow_from:"flow-from",flow_to:"flow-to"}),z=n=function(e){Object(u.a)(l,e);var t,r,s=B(l);function l(e){var t;return Object(i.a)(this,l),(t=s.call(this,e)).attributeField="Magnitude",t.flowRepresentation="flow-from",t.rotationType="arithmetic",t.style="single-arrow",t.symbolTileSize=50,t.type="vector-field",t}return Object(o.a)(l,[{key:"readInputUnit",value:function(e,t){return F.has(e)?L.fromJSON(e):null}},{key:"readOutputUnit",value:function(e,t){return F.has(e)?L.fromJSON(e):null}},{key:"styleRenderer",get:function(){var e=this.style,t=this.attributeField,r=this._createStyleRenderer(e);return r.field=t,r}},{key:"sizeVariables",get:function(){var e=[];if(this.visualVariables){var t,r=R(this.visualVariables);try{for(r.s();!(t=r.n()).done;){var n=t.value;"size"===n.type&&e.push(n)}}catch(i){r.e(i)}finally{r.f()}}if(0===e.length){var a=new T.a({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(a):this._set("visualVariables",[a]),e.push(a)}return e}},{key:"rotationVariables",get:function(){var e=[];if(this.visualVariables){var t,r=R(this.visualVariables);try{for(r.s();!(t=r.n()).done;){var n=t.value;"rotation"===n.type&&e.push(n)}}catch(i){r.e(i)}finally{r.f()}}if(0===e.length){var a=new S.a({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(a):this._set("visualVariables",[a]),e.push(a)}return e}},{key:"clone",value:function(){return new n({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:Object(b.a)(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}},{key:"getGraphicsFromPixelData",value:(r=Object(a.a)(f.a.mark((function e(t){var r,n,a,i,o,u,s,l,c,h,p,y,v,b=this,m=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=m.length>1&&void 0!==m[1]&&m[1],n=m.length>2&&void 0!==m[2]?m[2]:[],a=[],i=Object(x.c)(this.inputUnit,this.outputUnit),o=r?Object(x.a)(t.pixelBlock,"vector-uv",this.rotationType,i):Object(x.b)(t.pixelBlock,"vector-magdir",i),u=t.extent,s=o.mask&&o.mask.length>0,l=0,c=(u.xmax-u.xmin)/o.width,h=(u.ymax-u.ymin)/o.height,p=0;case 6:if(!(p<o.height)){e.next=17;break}y=f.a.mark((function e(t){var r,i,y,v;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new D.a({x:u.xmin+t*c+c/2,y:u.ymax-p*h-h/2,spatialReference:u.spatialReference}),e.next=3,Object(j.a)(r);case 3:r=e.sent[0],i=n.some((function(e){return e.intersects(r)})),s&&!o.mask[l]||i||(y={Magnitude:o.pixels[0][l],Direction:o.pixels[1][l]},(v=new d.a({geometry:{type:"point",x:r.x,y:r.y,spatialReference:u.spatialReference},attributes:y})).symbol=b._getVisualVariablesAppliedSymbol(v),a.push(v));case 6:case"end":return e.stop()}}),e)})),v=0;case 9:if(!(v<o.width)){e.next=14;break}return e.delegateYield(y(v),"t0",11);case 11:v++,l++,e.next=9;break;case 14:p++,e.next=6;break;case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:(t=Object(a.a)(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})},{key:"getSymbols",value:function(){return[]}},{key:"getClassBreakInfos",value:function(){var e;return null==(e=this.styleRenderer)?void 0:e.classBreakInfos}},{key:"getDefaultSymbol",value:function(){var e;return null==(e=this.styleRenderer)?void 0:e.defaultSymbol}},{key:"_getDefaultSymbol",value:function(e){return new C.a({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new M.a({width:0}),size:20,color:e||new p.a([0,92,230])})}},{key:"_getVisualVariablesAppliedSymbol",value:function(e){if(e){var t=this.styleRenderer&&this.styleRenderer.getSymbol(e);t=t.clone();var r=this.sizeVariables,n=this.rotationVariables;if(r&&r.length&&this.sizeVariables.forEach((function(r){return Object(P.d)(t,Object(A.getAllSizes)([r],e))})),n&&n.length){var a=e.attributes.Direction;e.attributes.Direction="flow-from"===this.flowRepresentation?a:a+180,this.rotationVariables.forEach((function(r){return Object(P.c)(t,Object(A.getRotationAngle)(r,e),r.axis)}))}return t}}},{key:"_createStyleRenderer",value:function(e){var t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new k.a(t)}},{key:"_createSingleArrowRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol()}}},{key:"_createBeaufortKnotsRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new p.a([214,47,39])),classBreakInfos:this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])}}},{key:"_createBeaufortMeterRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new p.a([214,47,39])),classBreakInfos:this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortFeetRenderer",value:function(){var e=this._getDefaultSymbol(new p.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 3.28084*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortMilesRenderer",value:function(){var e=this._getDefaultSymbol(new p.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 2.23694*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortKilometersRenderer",value:function(){var e=this._getDefaultSymbol(new p.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 3.6*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createCurrentMeterRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new p.a([177,177,177])),classBreakInfos:this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])}}},{key:"_createCurrentKnotsRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new p.a([177,177,177])),classBreakInfos:this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])}}},{key:"_createClassifiedArrowRenderer",value:function(){var e,t=this._getDefaultSymbol(new p.a([56,168,0])),r=[0,1e-6,3.5,7,10.5,14];if(null!=(e=this.sizeVariables)&&e.length){var n=this.sizeVariables[0].minDataValue,a=this.sizeVariables[0].maxDataValue;if(n&&a){var i=(a-n)/5;r=Array.from(Array(6).keys()).map((function(e){return n+i*e}))}}return{defaultSymbol:t,classBreakInfos:this._getClassBreaks(r,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])}}},{key:"_createSimpleScalarRenderer",value:function(){return{defaultSymbol:E.a.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}},{key:"_createWindBarbsRenderer",value:function(){var e=Array.from(Array(31).keys()).map((function(e){return 5*e})),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],r=E.a.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),n=e.map((function(n,a){var i;if(a!==e.length-1)if(0===a)i={minValue:n,maxValue:e[a+1],symbol:r};else{var o=E.a.fromJSON({type:"esriPMS",imageData:t[a].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});i={minValue:n,maxValue:e[a+1],symbol:o}}return new _.a(i)}));return{defaultSymbol:r,classBreakInfos:n}}},{key:"_getClassBreaks",value:function(e,t){var r=this;return t.map((function(t,n){return new _.a({minValue:e[n],maxValue:e[n+1],symbol:r._getDefaultSymbol(new p.a(t))})}))}}]),l}(Object(I.a)(v.a));Object(h.a)([Object(m.b)({type:String,json:{write:!0}})],z.prototype,"attributeField",void 0),Object(h.a)([Object(m.b)({type:G.apiValues,json:{type:G.jsonValues,read:{reader:G.read},write:{writer:G.write}}})],z.prototype,"flowRepresentation",void 0),Object(h.a)([Object(m.b)({type:["geographic","arithmetic"],json:{write:!0}})],z.prototype,"rotationType",void 0),Object(h.a)([Object(m.b)({type:U.apiValues,json:{type:U.jsonValues,read:{reader:U.read},write:{writer:U.write}}})],z.prototype,"style",void 0),Object(h.a)([Object(m.b)({json:{write:!0}})],z.prototype,"symbolTileSize",void 0),Object(h.a)([Object(m.b)({type:L.apiValues,json:{type:L.jsonValues,write:{writer:L.write}}})],z.prototype,"inputUnit",void 0),Object(h.a)([Object(O.a)("inputUnit")],z.prototype,"readInputUnit",null),Object(h.a)([Object(m.b)({type:L.apiValues,json:{type:L.jsonValues,read:{reader:L.read},write:{writer:L.write}}})],z.prototype,"outputUnit",void 0),Object(h.a)([Object(O.a)("outputUnit")],z.prototype,"readOutputUnit",null),Object(h.a)([Object(g.a)({vectorField:"vector-field"})],z.prototype,"type",void 0),Object(h.a)([Object(m.b)({type:k.a})],z.prototype,"styleRenderer",null),Object(h.a)([Object(m.b)({type:T.a})],z.prototype,"sizeVariables",null),Object(h.a)([Object(m.b)({type:S.a})],z.prototype,"rotationVariables",null);var V=z=n=Object(h.a)([Object(w.a)("esri.renderers.VectorFieldRenderer")],z);t.a=V},tQrJ:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r("hisu"),a=r("yBJb"),i=r("hALY"),o=r("xYvT");function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function(){function e(t,r){Object(n.a)(this,e),this.layout=t,this.buffer="number"==typeof r?new ArrayBuffer(r*t.stride):r;var a,i=u(t.fieldNames);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=t.fields.get(o);this[o]=new s.constructor(this.buffer,s.offset,this.stride)}}catch(l){i.e(l)}finally{i.f()}}return Object(a.a)(e,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}},{key:"getField",value:function(e,t){var r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}},{key:"slice",value:function(t,r){return new e(this.layout,this.buffer.slice(t*this.stride,r*this.stride))}},{key:"copyFrom",value:function(e,t,r,n){var a=this.stride;if(a%4==0){var i=new Uint32Array(e.buffer,t*a,n*a/4);new Uint32Array(this.buffer,r*a,n*a/4).set(i)}else{var o=new Uint8Array(e.buffer,t*a,n*a);new Uint8Array(this.buffer,r*a,n*a).set(o)}}}]),e}(),c=function(){function e(){Object(n.a)(this,e),this.stride=0,this.fields=new Map,this.fieldNames=[]}return Object(a.a)(e,[{key:"vec2f",value:function(e,t){return this.appendField(e,i.m,t),this}},{key:"vec2f64",value:function(e,t){return this.appendField(e,i.n,t),this}},{key:"vec3f",value:function(e,t){return this.appendField(e,i.u,t),this}},{key:"vec3f64",value:function(e,t){return this.appendField(e,i.v,t),this}},{key:"vec4f",value:function(e,t){return this.appendField(e,i.C,t),this}},{key:"vec4f64",value:function(e,t){return this.appendField(e,i.D,t),this}},{key:"mat3f",value:function(e,t){return this.appendField(e,i.f,t),this}},{key:"mat3f64",value:function(e,t){return this.appendField(e,i.g,t),this}},{key:"mat4f",value:function(e,t){return this.appendField(e,i.h,t),this}},{key:"mat4f64",value:function(e,t){return this.appendField(e,i.i,t),this}},{key:"vec4u8",value:function(e,t){return this.appendField(e,i.J,t),this}},{key:"f32",value:function(e,t){return this.appendField(e,i.a,t),this}},{key:"f64",value:function(e,t){return this.appendField(e,i.b,t),this}},{key:"u8",value:function(e,t){return this.appendField(e,i.l,t),this}},{key:"u16",value:function(e,t){return this.appendField(e,i.j,t),this}},{key:"i8",value:function(e,t){return this.appendField(e,i.e,t),this}},{key:"vec2i8",value:function(e,t){return this.appendField(e,i.q,t),this}},{key:"vec2i16",value:function(e,t){return this.appendField(e,i.o,t),this}},{key:"vec2u8",value:function(e,t){return this.appendField(e,i.t,t),this}},{key:"vec4u16",value:function(e,t){return this.appendField(e,i.H,t),this}},{key:"u32",value:function(e,t){return this.appendField(e,i.k,t),this}},{key:"appendField",value:function(e,t,r){var n=t.ElementCount*Object(o.a)(t.ElementType),a=this.stride;this.fields.set(e,{size:n,constructor:t,offset:a,optional:r}),this.stride+=n,this.fieldNames.push(e)}},{key:"alignTo",value:function(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}},{key:"hasField",value:function(e){return this.fieldNames.indexOf(e)>=0}},{key:"createBuffer",value:function(e){return new l(this,e)}},{key:"createView",value:function(e){return new l(this,e)}},{key:"clone",value:function(){var t=new e;return t.stride=this.stride,t.fields=new Map,this.fields.forEach((function(e,r){return t.fields.set(r,e)})),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}]),e}();function f(){return new c}},vlZn:function(e,t,r){"use strict";function n(){n=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,a){var o=new RegExp(e,n);return t.set(o,a||t.get(e)),i(o,r.prototype)}function o(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){return t[r]=e[n[r]],t}),Object.create(null))}return a(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=o(r,this)),r},r.prototype[Symbol.replace]=function(r,n){if("string"==typeof n){var a=t.get(this);return e[Symbol.replace].call(this,r,n.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+a[t]})))}if("function"==typeof n){var i=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(o(e,i)),n.apply(this,e)}))}return e[Symbol.replace].call(this,r,n)},n.apply(this,arguments)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,"a",(function(){return n}))},wCLu:function(e,t,r){"use strict";var n=r("hisu"),a=r("yBJb"),i=r("j92Z"),o=function(){function e(t){Object(n.a)(this,e),this._programCacheByTemplate=new Map,this._rctx=t}return Object(a.a)(e,[{key:"dispose",value:function(){this._programCacheByTemplate.forEach((function(e){return e.programs.forEach((function(e){return e.dispose()}))})),this._programCacheByTemplate=null}},{key:"getProgram",value:function(e,t){var r=this;return this._programCacheByTemplate.has(e)||this.addProgramTemplate(e,(function(t){return Object(i.a)(r._rctx,e,t)})),this.getProgramTemplateInstance(e,t)}},{key:"addProgramTemplate",value:function(e,t){this._programCacheByTemplate.set(e,{constructor:t,programs:new Map})}},{key:"getProgramTemplateInstance",value:function(e,t){var r=this._programCacheByTemplate.get(e);if(r){var n=t?JSON.stringify(t):"default";if(!r.programs.has(n)){var a=r.constructor(t);r.programs.set(n,a)}return r.programs.get(n)}return null}}]),e}();t.a=o},wSxL:function(e,t,r){"use strict";var n=function(){var e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e}(),a=function(){var e=[].concat(n);return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e}(),i=function(){var e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e}(),o=new Map;o.set("EXIFIFD",a),o.set("GPSIFD",["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"]);var u={TIFF_TAGS:n,ifdTags:o,GEO_KEYS:i,getTagName:function(e,t){var r=(t||n)[e];return void 0===r&&(r="unknown"+String(e)),r}};t.a=u},"x/s0":function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return x})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return v})),r.d(t,"g",(function(){return c})),r.d(t,"h",(function(){return O})),r.d(t,"i",(function(){return s})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return p}));var n=r("u6Q5"),a=r("omx3"),i=r("xnqp");function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){return h(e.parseTree,t,e.parameters)}function l(e,t,r){return h(e,t,r)}function c(e,t,r,n){return i.WhereClause.create(h(e.parseTree,a.a.Standardised,e.parameters,t,r),n)}function f(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AND";return i.WhereClause.create("(("+s(e,a.a.Standardised)+")"+r+"("+s(t,a.a.Standardised)+"))",e.fieldsIndex)}function h(e,t,r){var n,a,i,u,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;switch(e.type){case"interval":return x(h(e.value,t,r,s,l),e.qualifier,e.op);case"case_expression":var c=" CASE ";"simple"===e.format&&(c+=h(e.operand,t,r,s,l));for(var f=0;f<e.clauses.length;f++)c+=" WHEN "+h(e.clauses[f].operand,t,r,s,l)+" THEN "+h(e.clauses[f].value,t,r,s,l);return null!==e.else&&(c+=" ELSE "+h(e.else,t,r,s,l)),c+=" END ";case"param":var v=r[e.value.toLowerCase()];if("string"==typeof v)return"'"+r[e.value.toLowerCase()].toString().replace(/'/g,"''")+"'";if(v instanceof Date)return d(v,t);if(v instanceof Array){for(var b=[],m=0;m<v.length;m++)"string"==typeof v[m]?b.push("'"+v[m].toString().replace(/'/g,"''")+"'"):v[m]instanceof Date?b.push(d(v[m],t)):b.push(v[m].toString());return b}return v.toString();case"expr_list":a=[];var g,O=o(e.value);try{for(O.s();!(g=O.n()).done;){var w=g.value;a.push(h(w,t,r,s,l))}}catch(k){O.e(k)}finally{O.f()}return a;case"unary_expr":return" ( NOT "+h(e.expr,t,r,s,l)+" ) ";case"binary_expr":switch(e.operator){case"AND":return" ("+h(e.left,t,r,s,l)+" AND "+h(e.right,t,r,s,l)+") ";case"OR":return" ("+h(e.left,t,r,s,l)+" OR "+h(e.right,t,r,s,l)+") ";case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return" ("+h(e.left,t,r,s,l)+" IS NULL )";case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return" ("+h(e.left,t,r,s,l)+" IS NOT NULL )";case"IN":return n=[],"expr_list"===e.right.type?(n=h(e.right,t,r,s,l)," ("+h(e.left,t,r,s,l)+" IN ("+n.join(",")+")) "):(u=h(e.right,t,r,s,l))instanceof Array?" ("+h(e.left,t,r,s,l)+" IN ("+u.join(",")+")) ":" ("+h(e.left,t,r,s,l)+" IN ("+u+")) ";case"NOT IN":return n=[],"expr_list"===e.right.type?(n=h(e.right,t,r,s,l)," ("+h(e.left,t,r,s,l)+" NOT IN ("+n.join(",")+")) "):(u=h(e.right,t,r,s,l))instanceof Array?" ("+h(e.left,t,r,s,l)+" NOT IN ("+u.join(",")+")) ":" ("+h(e.left,t,r,s,l)+" NOT IN ("+u+")) ";case"BETWEEN":return i=h(e.right,t,r,s,l)," ("+h(e.left,t,r,s,l)+" BETWEEN "+i[0]+" AND "+i[1]+" ) ";case"NOTBETWEEN":return i=h(e.right,t,r,s,l)," ("+h(e.left,t,r,s,l)+" NOT BETWEEN "+i[0]+" AND "+i[1]+" ) ";case"LIKE":return""!==e.escape?" ("+h(e.left,t,r,s,l)+" LIKE "+h(e.right,t,r,s,l)+" ESCAPE '"+e.escape+"') ":" ("+h(e.left,t,r,s,l)+" LIKE "+h(e.right,t,r,s,l)+") ";case"NOT LIKE":return""!==e.escape?" ("+h(e.left,t,r,s,l)+" NOT LIKE "+h(e.right,t,r,s,l)+" ESCAPE '"+e.escape+"') ":" ("+h(e.left,t,r,s,l)+" NOT LIKE "+h(e.right,t,r,s,l)+") ";case"<>":case"<":case">":case">=":case"<=":case"=":case"*":case"-":case"+":case"/":return" ("+h(e.left,t,r,s,l)+" "+e.operator+" "+h(e.right,t,r,s,l)+") "}throw new Error("Not Supported Operator "+e.operator);case"null":return"null";case"bool":return!0===e.value?"1":"0";case"string":return"'"+e.value.toString().replace(/'/g,"''")+"'";case"timestamp":case"date":return d(e.value,t);case"number":return e.value.toString();case"current_time":return y("date"===e.mode,t);case"column_ref":return s&&s.toLowerCase()===e.column.toLowerCase()?"("+l+")":e.column;case"function":var j=h(e.args,t,r,s,l);return p(e.name,j,t)}throw new Error("Unsupported sql syntax "+e.type)}function p(e,t,r){switch(e.toLowerCase().trim()){case"abs":if(1!==t.length)throw new Error("Invalid Parameter for call to ABS");return"abs("+t[0]+")";case"ceiling":case"ceil":if(1!==t.length)throw new Error("Invalid Parameter for call to CEILING");switch(r){case a.a.Standardised:case a.a.StandardisedNoInterval:default:return"CEILING("+t[0]+")"}case"floor":if(1!==t.length)throw new Error("Invalid Parameter for call to Floor");return"FLOOR("+t[0]+")";case"log":if(1!==t.length)throw new Error("Invalid Parameter for call to LOG");return"LOG("+t[0]+")";case"log10":if(1!==t.length)throw new Error("Invalid Parameter for call to LOG10");return"LOG10("+t[0]+")";case"power":if(2!==t.length)throw new Error("Invalid Parameter for call to POWER");return"POWER("+t[0]+","+t[1]+")";case"round":if(2===t.length)return"ROUND("+t[0]+","+t[1]+")";if(1===t.length)return"ROUND("+t[0]+")";throw new Error("Invalid Parameter for call to ROUND");case"truncate":if(t.length<1||t.length>2)throw new Error("Invalid Parameter for TRUNCATE function");switch(r){case a.a.SqlServer:return"ROUND("+t[0]+(1===t.length?"0":","+t[1])+",1)";default:return"TRUNCATE("+t[0]+(1===t.length?")":","+t[1]+")")}case"char_length":case"len":if(1!==t.length)throw new Error("Invalid Parameter for CHAR_LENGTH function");switch(r){case a.a.SqlServer:return"LEN("+t[0]+")";case a.a.Oracle:return"LENGTH("+t[0]+")";default:return"CHAR_LENGTH("+t[0]+")"}case"concat":if(t.length<1)throw new Error("Invalid Parameter for CONCAT function");for(var n="CONCAT(",i=0;i<t.length;i++)0!==i&&(n+=","),n+=t[i];return n+=")";case"lower":case"lcase":if(1!==t.length)throw new Error("Invalid Parameter for Lower function");return"LOWER("+t[0]+")";case"upper":case"ucase":if(1!==t.length)throw new Error("Invalid Parameter for Upper function");return"UPPER("+t[0]+")";case"substring":var o="";switch(r){case a.a.Oracle:return o="SUBSTR("+t[0]+","+t[1],3===t.length&&(o+=","+t[2]),o+=")";case a.a.SqlServer:return o=3===t.length?"SUBSTRING("+t[0]+","+t[1]+","+t[2]+")":"SUBSTRING("+t[0]+",  "+t[1]+", LEN("+t[0]+") - "+t[1]+")";default:return o="SUBSTRING("+t[0]+" FROM "+t[1],3===t.length&&(o+=" FOR "+t[2]),o+=")"}case"extract":return"EXTRACT("+t[0].replace(/\'/g,"")+" FROM "+t[1]+")"}throw new Error("Function Not Recognised")}function d(e,t){var r=n.m.Moment(e),i=0===r.minute()&&0===r.hour()&&0===r.second()&&0===r.millisecond();switch(t){case a.a.FILEGDB:case a.a.Standardised:case a.a.StandardisedNoInterval:return i?"date '"+r.format("YYYY-MM-DD")+"'":"date '"+r.format("YYYY-MM-DD HH:mm:ss")+"'";case a.a.Oracle:return i?"TO_DATE('"+r.format("YYYY-MM-DD")+"','YYYY-MM-DD')":"TO_DATE('"+r.format("YYYY-MM-DD HH:mm:ss")+"','YYYY-MM-DD HH24:MI:SS')";case a.a.SqlServer:return"'"+r.format(i?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss")+"'";case a.a.PGDB:return"#"+r.format(i?"MM-DD-YYYY":"MM-DD-YYYY HH:mm:ss")+"#";case a.a.Postgres:return"TIMESTAMP '"+r.format(i?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss")+"'";default:return"date '"+r.format("YYYY-MM-DD HH:mm:ss")+"'"}}function y(e,t){switch(t){case a.a.FILEGDB:case a.a.Standardised:case a.a.StandardisedNoInterval:case a.a.Oracle:return e?"CURRENT_DATE":"CURRENT_TIMESTAMP";case a.a.SqlServer:return e?"CAST(GETDATE() AS DATE)":"GETDATE()";case a.a.PGDB:case a.a.Postgres:default:return e?"CURRENT_DATE":"CURRENT_TIMESTAMP"}}function v(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={},i={},u={esriFieldTypeSmallInteger:"integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"double",esriFieldTypeDouble:"double",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"integer",oid:"integer",long:"integer","small-integer":"integer",integer:"integer",single:"double",double:"double",date:"date",string:"string"},s=o(t);try{for(s.s();!(r=s.n()).done;){var l=r.value,c=u[l.type];a[l.name.toLowerCase()]=void 0===c?"":c}}catch(p){s.e(p)}finally{s.f()}for(var f in n){var h=u[n[f]];i[f.toLowerCase()]=void 0===h?"":h}switch(b(a,e.parseTree,e.parameters,i)){case"double":return"double";case"integer":return"integer";case"double":return"double";case"date":return"date";case"string":return"string"}return""}function b(e,t,r,n){var a;switch(t.type){case"interval":return"integer";case"case_expression":var i=[];if("simple"===t.format){for(var u=0;u<t.clauses.length;u++)i.push(b(e,t.clauses[u].value,r,n));null!==t.else&&i.push(b(e,t.else,r,n))}else{for(var s=0;s<t.clauses.length;s++)i.push(b(e,t.else,r,n));null!==t.else&&i.push(b(e,t.else,r,n))}return g(i);case"param":var l=n[t.value.toLowerCase()];if(void 0===l&&r){var c=r[t.value.toLowerCase()];if(void 0===c)return"";if(null===c)return"";if("string"==typeof c||c instanceof String)return"string";if("boolean"==typeof c)return"boolean";if(c instanceof Date)return"date";if("number"==typeof c)return c%1==0?"integer":"double"}return void 0===l?"":l;case"expr_list":var f,h=[],p=o(t.value);try{for(p.s();!(f=p.n()).done;){var d=f.value;h.push(b(e,d,r,n))}}catch(m){p.e(m)}finally{p.f()}return h;case"unary_expr":return"boolean";case"binary_expr":switch(t.operator){case"AND":case"OR":return"boolean";case"IS":case"ISNOT":if("null"!==t.right.type)throw new Error("Unsupported RHS for IS");return"boolean";case"IN":case"NOT IN":case"BETWEEN":case"NOTBETWEEN":case"LIKE":case"NOT LIKE":return"boolean";case"<>":case"<":case">":case">=":case"<=":case"=":return"boolean";case"*":case"-":case"+":case"/":return g([b(e,t.left,r,n),b(e,t.right,r,n)]);default:throw new Error("Not Supported Operator "+t.operator)}case"null":return"";case"bool":return"boolean";case"string":return"string";case"number":return null===t.value?"":t.value%1==0?"integer":"double";case"date":case"timestamp":case"current_time":return"date";case"column_ref":var y=e[t.column.toLowerCase()];return void 0===y?"":y;case"function":switch(t.name.toLowerCase()){case"position":case"extract":case"char_length":return"integer";case"round":return(a=b(e,t.args,r,n))instanceof Array?a.length>0?a[0]:"":a;case"sign":return(a=b(e,t.args,r,n))instanceof Array&&(a=g(a)),"integer"===a||"double"===a?a:"double";case"ceiling":case"floor":case"abs":var v=b(e,t.args,r,n);return v instanceof Array?g(v):v;case"area":case"length":case"log":case"log10":case"sin":case"cos":case"tan":case"asin":case"acos":case"atan":case"power":return"double";case"substring":case"trim":case"concat":case"lower":case"upper":return"string";case"truncate":return"double";case"round":return(a=b(e,t.args,r,n))instanceof Array?a.length>0?a[0]:"":a}return""}throw new Error("Unsupported sql syntax "+t.type)}var m={boolean:1,string:2,integer:3,double:4,date:5};function g(e){if(e){var t,r="",n=o(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;""!==a&&(r=""===r||m[r]<m[a]?a:r)}}catch(i){n.e(i)}finally{n.f()}return r}return""}function O(e,t){return function e(t,r){if(null==t)return!1;switch(t.type){case"when_clause":return e(t.operand,r)||e(t.value,r);case"case_expression":var n,a=o(t.clauses);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(e(i,r))return!0}}catch(c){a.e(c)}finally{a.f()}return!("simple"!==t.format||!e(t.operand,r))||!(null===t.else||!e(t.else,r));case"param":return!1;case"expr_list":var u,s=o(t.value);try{for(s.s();!(u=s.n()).done;){var l=u.value;if(e(l,r))return!0}}catch(c){s.e(c)}finally{s.f()}return!1;case"unary_expr":return e(t.expr,r);case"binary_expr":return e(t.left,r)||e(t.right,r);case"null":case"bool":case"date":case"timestamp":case"string":case"number":return!1;case"column_ref":return r.toLowerCase()===t.column.toLowerCase();case"function":return e(t.args,r)}return!1}(e.parseTree,t)}function w(e){return"column_ref"===e.parseTree.type}function j(e){var t="";return t+=e.period.toUpperCase()}function x(e,t,r){return"INTERVAL "+r+" "+e+" "+("interval-period"===t.type?j(t):j(t.start)+" TO "+j(t.end))}},x2Fc:function(e,t,r){"use strict";function n(e,t,r){for(var n=e.typedBuffer,a=e.typedBufferStride,i=t.typedBuffer,o=t.typedBufferStride,u=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*a,l=(r&&r.srcIndex?r.srcIndex:0)*o,c=0;c<u;++c)n[s]=i[l],n[s+1]=i[l+1],n[s+2]=i[l+2],n[s+3]=i[l+3],s+=a,l+=o}function a(e,t,r,n,a,i){for(var o,u,s=e.typedBuffer,l=e.typedBufferStride,c=null!=(o=null==i?void 0:i.count)?o:e.count,f=(null!=(u=null==i?void 0:i.dstIndex)?u:0)*l,h=0;h<c;++h)s[f]=t,s[f+1]=r,s[f+2]=n,s[f+3]=a,f+=l}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));Object.freeze({__proto__:null,copy:n,fill:a})},xYvT:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return o}));r("J4Pc");function n(e){switch(e){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function a(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function i(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},xbnL:function(e,t,r){"use strict";var n,a=r("mK0O"),i=r("hisu"),o=r("yBJb"),u=r("CHlC"),s=r("kMo5"),l=r("P+uj"),c=r("dQW7"),f=r("0fJP"),h=r("xAIp"),p=(r("wckI"),r("J4Pc"),r("TM+E"),r("vo12")),d=r("iaHD"),y=r("sPA0"),v=r("d7QU"),b=r("EwUX");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var w=n=function(e){Object(u.a)(r,e);var t=O(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="point-cloud-stretch",n.field=null,n.legendOptions=null,n.fieldTransformType=null,n.stops=null,n}return Object(o.a)(r,[{key:"clone",value:function(){return new n(g(g({},this.cloneProperties()),{},{field:Object(f.a)(this.field),fieldTransformType:Object(f.a)(this.fieldTransformType),stops:Object(f.a)(this.stops),legendOptions:Object(f.a)(this.legendOptions)}))}}]),r}(y.a);Object(c.a)([Object(p.a)({pointCloudStretchRenderer:"point-cloud-stretch"})],w.prototype,"type",void 0),Object(c.a)([Object(h.b)({json:{write:!0},type:String})],w.prototype,"field",void 0),Object(c.a)([Object(h.b)({type:v.a,json:{write:!0}})],w.prototype,"legendOptions",void 0),Object(c.a)([Object(h.b)({type:y.a.fieldTransformTypeKebabDict.apiValues,json:{type:y.a.fieldTransformTypeKebabDict.jsonValues,read:y.a.fieldTransformTypeKebabDict.read,write:y.a.fieldTransformTypeKebabDict.write}})],w.prototype,"fieldTransformType",void 0),Object(c.a)([Object(h.b)({type:[b.a],json:{write:!0}})],w.prototype,"stops",void 0);var j=w=n=Object(c.a)([Object(d.a)("esri.renderers.PointCloudStretchRenderer")],w);t.a=j},"xgd+":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("mK0O"),a=r("eijD"),i=r("NthX"),o=r.n(i),u=r("DGz/");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.default)(t,l({responseType:"image"},r));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},xiHV:function(e,t,r){"use strict";var n,a=r("hisu"),i=r("yBJb"),o=r("CHlC"),u=r("kMo5"),s=r("P+uj"),l=r("dQW7"),c=r("0n+b"),f=r("0fJP"),h=r("xAIp"),p=r("wckI"),d=(r("J4Pc"),r("TM+E"),r("vo12")),y=r("mp5+"),v=r("iaHD"),b=r("jr4m"),m=r("zr+G"),g=r("Zexz");function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var w=n=function(e){Object(o.a)(r,e);var t=O(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).colorRamp=null,n.computeGamma=!1,n.dynamicRangeAdjustment=!1,n.gamma=[],n.maxPercent=null,n.minPercent=null,n.numberOfStandardDeviations=null,n.outputMax=null,n.outputMin=null,n.sigmoidStrengthLevel=null,n.statistics=[],n.histograms=null,n.useGamma=!1,n.stretchType="none",n.type="raster-stretch",n}return Object(i.a)(r,[{key:"readColorRamp",value:function(e){if(e)return Object(g.a)(e)}},{key:"writeStatistics",value:function(e,t,r){var n;null!=(n=e)&&n.length&&(Array.isArray(e[0])||(e=e.map((function(e){return[e.min,e.max,e.avg,e.stddev]}))),t[r]=e)}},{key:"readStretchType",value:function(e,t){var r=t.stretchType;return"number"==typeof r&&(r=m.a[r]),m.b.read(r)}},{key:"clone",value:function(){return new n({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Object(f.a)(this.statistics),gamma:Object(f.a)(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Object(f.a)(this.colorRamp),histograms:Object(f.a)(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}}]),r}(c.a);Object(l.a)([Object(h.b)({types:g.b,json:{write:!0}})],w.prototype,"colorRamp",void 0),Object(l.a)([Object(y.a)("colorRamp")],w.prototype,"readColorRamp",null),Object(l.a)([Object(h.b)({type:Boolean,json:{write:!0}})],w.prototype,"computeGamma",void 0),Object(l.a)([Object(h.b)({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],w.prototype,"dynamicRangeAdjustment",void 0),Object(l.a)([Object(h.b)({type:[Number],json:{write:!0}})],w.prototype,"gamma",void 0),Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],w.prototype,"maxPercent",void 0),Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],w.prototype,"minPercent",void 0),Object(l.a)([Object(h.b)({type:p.a,json:{write:!0}})],w.prototype,"numberOfStandardDeviations",void 0),Object(l.a)([Object(h.b)({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],w.prototype,"outputMax",void 0),Object(l.a)([Object(h.b)({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],w.prototype,"outputMin",void 0),Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],w.prototype,"sigmoidStrengthLevel",void 0),Object(l.a)([Object(h.b)({json:{type:[[Number]],write:!0}})],w.prototype,"statistics",void 0),Object(l.a)([Object(h.b)()],w.prototype,"histograms",void 0),Object(l.a)([Object(b.a)("statistics")],w.prototype,"writeStatistics",null),Object(l.a)([Object(h.b)({type:Boolean,json:{write:!0}})],w.prototype,"useGamma",void 0),Object(l.a)([Object(h.b)({type:m.b.apiValues,json:{type:m.b.jsonValues,write:m.b.write}})],w.prototype,"stretchType",void 0),Object(l.a)([Object(y.a)("stretchType",["stretchType"])],w.prototype,"readStretchType",null),Object(l.a)([Object(d.a)({rasterStretch:"raster-stretch"})],w.prototype,"type",void 0);var j=w=n=Object(l.a)([Object(v.a)("esri.renderers.RasterStretchRenderer")],w);t.a=j},xnqp:function(e,t,r){"use strict";r.r(t),r.d(t,"WhereClause",(function(){return C})),r.d(t,"defaultAttributeAdapter",(function(){return W}));var n=r("aNYv"),a=r("6CzD"),i=r("hisu"),o=r("yBJb"),u=r("J4Pc");function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c={min:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.min.apply(Math,e[0])}},max:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.max.apply(Math,e[0])}},avg:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:f(e[0])}},sum:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}(e[0])}},stddev:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.sqrt(h(e[0]))}},count:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].length}},var:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:h(e[0])}}};function f(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length}function h(e){var t,r=f(e),n=e.length,a=0,i=s(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a+=Math.pow(o-r,2)}}catch(u){i.e(u)}finally{i.f()}return n>1?a/(n-1):0}var p=r("lZmO"),d=function(){function e(){Object(i.a)(this,e),this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}return Object(o.a)(e,[{key:"valueInMilliseconds",value:function(){return("-"===this.op?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}],[{key:"fixDefaults",value:function(e){if(null!==e.precision||null!==e.secondary)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}},{key:"createFromMilliseconds",value:function(t){var r=new e;return r.second=t/1e3,r}},{key:"createFromValueAndQualifer",value:function(t,r,n){var a=new e;if(a.op="-"===n?"-":"+","interval-period"===r.type){e.fixDefaults(r);var i=new RegExp("^[0-9]{1,}$");if("year"===r.period||"month"===r.period)throw new Error("Year-Month Intervals not supported");if(!i.test(t))throw new Error("Illegal Interval");a[r.period]=parseFloat(t)}else{if(e.fixDefaults(r.start),e.fixDefaults(r.end),"year"===r.start.period||"month"===r.start.period)throw new Error("Year-Month Intervals not supported");if("year"===r.end.period||"month"===r.end.period)throw new Error("Year-Month Intervals not supported");switch(r.start.period){case"day":switch(r.end.period){case"hour":if(!new RegExp("^[0-9]{1,} [0-9]{1,}$").test(t))throw new Error("Illegal Interval");a[r.start.period]=parseFloat(t.split(" ")[0]),a[r.end.period]=parseFloat(t.split(" ")[1]);break;case"minute":if(!new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$").test(t))throw new Error("Illegal Interval");a[r.start.period]=parseFloat(t.split(" ")[0]);var o=t.split(" ")[1].split(":");a.hour=parseFloat(o[0]),a.minute=parseFloat(o[1]);break;case"second":if(!new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$").test(t))throw new Error("Illegal Interval");a[r.start.period]=parseFloat(t.split(" ")[0]);var u=t.split(" ")[1].split(":");a.hour=parseFloat(u[0]),a.minute=parseFloat(u[1]),a.second=parseFloat(u[2]);break;default:throw"Invalid Interval."}break;case"hour":switch(r.end.period){case"minute":if(!new RegExp("^[0-9]{1,}:[0-9]{1,}$").test(t))throw new Error("Illegal Interval");a.hour=parseFloat(t.split(":")[0]),a.minute=parseFloat(t.split(":")[1]);break;case"second":if(!new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$").test(t))throw new Error("Illegal Interval");var s=t.split(":");a.hour=parseFloat(s[0]),a.minute=parseFloat(s[1]),a.second=parseFloat(s[2]);break;default:throw"Invalid Interval."}break;case"minute":switch(r.end.period){case"second":if(!new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$").test(t))throw new Error("Illegal Interval");var l=t.split(":");a.minute=parseFloat(l[0]),a.second=parseFloat(l[1]);break;default:throw"Invalid Interval."}break;default:throw"Invalid Interval."}}return a}}]),e}();function y(e,t){var r=m[e.toLowerCase()];if(null==r)throw new Error("Function Not Recognised");if(t.length<r.minParams||t.length>r.maxParams)throw new Error("Invalid Parameter count for call to ".concat(e.toUpperCase()));return r.evaluate(t)}var v,b,m={extract:{minParams:2,maxParams:2,evaluate:function(e){var t=Object(n.a)(e,2),r=t[0],a=t[1];if(null==a)return null;if(a instanceof Date)switch(r.toUpperCase()){case"SECOND":return a.getSeconds();case"MINUTE":return a.getMinutes();case"HOUR":return a.getHours();case"DAY":return a.getDate();case"MONTH":return a.getMonth()+1;case"YEAR":return a.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:function(e){if(2===e.length){var t=Object(n.a)(e,2),r=t[0],a=t[1];return null==r||null==a?null:r.toString().substring(a-1)}if(3===e.length){var i=Object(n.a)(e,3),o=i[0],u=i[1],s=i[2];return null==o||null==u||null==s?null:s<=0?"":o.toString().substring(u-1,u+s-1)}}},position:{minParams:2,maxParams:2,evaluate:function(e){var t=Object(n.a)(e,2),r=t[0],a=t[1];return null==r||null==a?null:a.indexOf(r)+1}},trim:{minParams:2,maxParams:3,evaluate:function(e){var t=3===e.length,r=t?e[1]:" ",n=t?e[2]:e[1];if(null==r||null==n)return null;var a="(".concat(Object(p.a)(r),")");switch(e[0]){case"BOTH":return n.replace(new RegExp("^".concat(a,"*|").concat(a,"*$"),"g"),"");case"LEADING":return n.replace(new RegExp("^".concat(a,"*"),"g"),"");case"TRAILING":return n.replace(new RegExp("".concat(a,"*$"),"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.abs(e[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.ceil(e[0])}},floor:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.floor(e[0])}},log:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.log(e[0])}},log10:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.log(e[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.sin(e[0])}},cos:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.cos(e[0])}},tan:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.tan(e[0])}},asin:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.asin(e[0])}},acos:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.acos(e[0])}},atan:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.atan(e[0])}},sign:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0]>0?1:e[1]<0?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(e){return null==e[0]||null==e[1]?null:Math.pow(e[0],e[1])}},mod:{minParams:2,maxParams:2,evaluate:function(e){return null==e[0]||null==e[1]?null:e[0]%e[1]}},round:{minParams:1,maxParams:2,evaluate:function(e){var t=e[0],r=2===e.length?Math.pow(10,e[1]):1;return null==t?null:Math.round(t*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:function(e){return null==e[0]?null:1===e.length?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(e){return"string"==typeof e[0]||e[0]instanceof String?e[0].length:0}},concat:{minParams:1,maxParams:1/0,evaluate:function(e){for(var t="",r=0;r<e.length;r++){if(null==e[r])return null;t+=e[r].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].toString().toUpperCase()}}},g=(r("zc/w"),{exports:{}});b=function(){function e(t,r,n,a){this.message=t,this.expected=r,this.found=n,this.location=a,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function t(t,r){r=void 0!==r?r:{};var n,a={},i={start:Je},o=Je,u=function(e,t){var r={type:"expr_list"},n=function(e,t,r){return function(e,t){for(var r=[e],n=0;n<t.length;n++)r.push(t[n][3]);return r}(e,t)}(e,t);return r.value=n,r},s=function(e,t){return dr(e,t)},l=Ue("!",!1),c=Ue("=",!1),f=Ue(">=",!1),h=Ue(">",!1),p=Ue("<=",!1),d=Ue("<>",!1),y=Ue("<",!1),v=Ue("!=",!1),b=function(e){return e[0]+" "+e[2]},m=Ue("+",!1),g=Ue("-",!1),O=Ue("*",!1),w=Ue("/",!1),j=function(e,t){return e+t.join("")},x=/^[A-Za-z_\x80-\uFFFF]/,k=Ge([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),I=/^[A-Za-z0-9_]/,_=Ge([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),S=/^[A-Za-z0-9_.\x80-\uFFFF]/,T=Ge([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),A=Ue("@",!1),M=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},C=function(e,t){return{type:"interval-period",period:"second",precision:e,secondary:t}},P=function(e){return parseFloat(e)},D=Ue("'",!1),E=Ue("N'",!1),R=Ue("''",!1),N=/^[^']/,B=Ge(["'"],!0,!1),F=function(e,t){return{type:"when_clause",operand:e,value:t}},L=Ue(".",!1),U=/^[0-9]/,G=Ge([["0","9"]],!1,!1),z=/^[eE]/,V=Ge(["e","E"],!1,!1),H=/^[+\-]/,J=Ge(["+","-"],!1,!1),W=Ue("NULL",!0),q=Ue("TRUE",!0),Z=Ue("FALSE",!0),Y=Ue("IN",!0),K=Ue("IS",!0),X=Ue("LIKE",!0),Q=Ue("ESCAPE",!0),$=Ue("NOT",!0),ee=Ue("AND",!0),te=Ue("OR",!0),re=Ue("BETWEEN",!0),ne=Ue("FROM",!0),ae=Ue("FOR",!0),ie=Ue("SUBSTRING",!0),oe=Ue("EXTRACT",!0),ue=Ue("TRIM",!0),se=Ue("POSITION",!0),le=Ue("TIMESTAMP",!0),ce=Ue("DATE",!0),fe=Ue("LEADING",!0),he=Ue("TRAILING",!0),pe=Ue("BOTH",!0),de=Ue("TO",!0),ye=Ue("INTERVAL",!0),ve=Ue("YEAR",!0),be=Ue("MONTH",!0),me=Ue("DAY",!0),ge=Ue("HOUR",!0),Oe=Ue("MINUTE",!0),we=Ue("SECOND",!0),je=Ue("CASE",!0),xe=Ue("END",!0),ke=Ue("WHEN",!0),Ie=Ue("THEN",!0),_e=Ue("ELSE",!0),Se=Ue(",",!1),Te=Ue("(",!1),Ae=Ue(")",!1),Me=/^[ \t\n\r]/,Ce=Ge([" ","\t","\n","\r"],!1,!1),Pe=Ue("`",!1),De=/^[^`]/,Ee=Ge(["`"],!0,!1),Re=0,Ne=[{line:1,column:1}],Be=0,Fe=[],Le=0;if("startRule"in r){if(!(r.startRule in i))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=i[r.startRule]}function Ue(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ge(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function ze(e){var r,n=Ne[e];if(n)return n;for(r=e-1;!Ne[r];)r--;for(n={line:(n=Ne[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Ne[e]=n,n}function Ve(e,t){var r=ze(e),n=ze(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function He(e){Re<Be||(Re>Be&&(Be=Re,Fe=[]),Fe.push(e))}function Je(){var e,t;return e=Re,cr()!==a&&(t=qe())!==a&&cr()!==a?e=t:(Re=e,e=a),e}function We(){var e,t,r,n,i,o,s,l;if(e=Re,(t=qe())!==a){for(r=[],n=Re,(i=cr())!==a&&(o=ur())!==a&&(s=cr())!==a&&(l=qe())!==a?n=i=[i,o,s,l]:(Re=n,n=a);n!==a;)r.push(n),n=Re,(i=cr())!==a&&(o=ur())!==a&&(s=cr())!==a&&(l=qe())!==a?n=i=[i,o,s,l]:(Re=n,n=a);r!==a?e=t=u(t,r):(Re=e,e=a)}else Re=e,e=a;return e}function qe(){var e,t,r,n,i,o,u,l;if(e=Re,(t=Ze())!==a){for(r=[],n=Re,(i=cr())!==a&&(o=Rt())!==a&&(u=cr())!==a&&(l=Ze())!==a?n=i=[i,o,u,l]:(Re=n,n=a);n!==a;)r.push(n),n=Re,(i=cr())!==a&&(o=Rt())!==a&&(u=cr())!==a&&(l=Ze())!==a?n=i=[i,o,u,l]:(Re=n,n=a);r!==a?e=t=s(t,r):(Re=e,e=a)}else Re=e,e=a;return e}function Ze(){var e,t,r,n,i,o,u,l;if(e=Re,(t=Ye())!==a){for(r=[],n=Re,(i=cr())!==a&&(o=Et())!==a&&(u=cr())!==a&&(l=Ye())!==a?n=i=[i,o,u,l]:(Re=n,n=a);n!==a;)r.push(n),n=Re,(i=cr())!==a&&(o=Et())!==a&&(u=cr())!==a&&(l=Ye())!==a?n=i=[i,o,u,l]:(Re=n,n=a);r!==a?e=t=s(t,r):(Re=e,e=a)}else Re=e,e=a;return e}function Ye(){var e,r,n,i,o;return e=Re,(r=Dt())===a&&(r=Re,33===t.charCodeAt(Re)?(n="!",Re++):(n=a,0===Le&&He(l)),n!==a?(i=Re,Le++,61===t.charCodeAt(Re)?(o="=",Re++):(o=a,0===Le&&He(c)),Le--,o===a?i=void 0:(Re=i,i=a),i!==a?r=n=[n,i]:(Re=r,r=a)):(Re=r,r=a)),r!==a&&(n=cr())!==a&&(i=Ye())!==a?e=r=function(e){return function(e,t){return{type:"unary_expr",operator:e,expr:t}}("NOT",e)}(i):(Re=e,e=a),e===a&&(e=function(){var e,t,r;return e=Re,(t=$e())!==a&&cr()!==a?((r=function(){var e;return(e=function(){var e,t,r,n,i,o;if(e=[],t=Re,(r=cr())!==a&&(n=Ke())!==a&&(i=cr())!==a&&(o=$e())!==a?t=r=[r,n,i,o]:(Re=t,t=a),t!==a)for(;t!==a;)e.push(t),t=Re,(r=cr())!==a&&(n=Ke())!==a&&(i=cr())!==a&&(o=$e())!==a?t=r=[r,n,i,o]:(Re=t,t=a);else e=a;return e!==a&&(e=function(e){return{type:"arithmetic",tail:e}}(e)),e}())===a&&(e=function(){var e,t,r,n;return e=Re,(t=Qe())!==a&&cr()!==a&&(r=sr())!==a&&cr()!==a&&(n=We())!==a&&cr()!==a&&lr()!==a?e=t=function(e,t){return{op:e,right:t}}(t,n):(Re=e,e=a),e===a&&(e=Re,(t=Qe())!==a&&cr()!==a&&(r=sr())!==a&&cr()!==a&&(n=lr())!==a?e=t=function(e){return{op:e,right:{type:"expr_list",value:[]}}}(t):(Re=e,e=a),e===a&&(e=Re,(t=Qe())!==a&&cr()!==a&&(r=st())!==a?e=t=function(e,t){return{op:e,right:t}}(t,r):(Re=e,e=a))),e}())===a&&(e=function(){var e,t,r,n,i,o;return e=Re,(t=Dt())!==a&&cr()!==a&&(r=Nt())!==a&&cr()!==a&&(n=$e())!==a&&cr()!==a&&(i=Et())!==a&&cr()!==a&&(o=$e())!==a?e=t=function(e,t,r){return{op:"NOT"+e,right:{type:"expr_list",value:[t,r]}}}(r,n,o):(Re=e,e=a),e===a&&(e=Re,(t=Nt())!==a&&cr()!==a&&(r=$e())!==a&&cr()!==a&&(n=Et())!==a&&cr()!==a&&(i=$e())!==a?e=t=function(e,t,r){return{op:e,right:{type:"expr_list",value:[t,r]}}}(t,r,i):(Re=e,e=a)),e}())===a&&(e=function(){var e,t,r,n;return e=Re,(t=Mt())!==a&&cr()!==a&&(r=Dt())!==a&&cr()!==a&&(n=$e())!==a?e=t=function(e,t){return{op:e+"NOT",right:t}}(t,n):(Re=e,e=a),e===a&&(e=Re,(t=Mt())!==a&&cr()!==a&&(r=$e())!==a?e=t=function(e,t){return{op:e,right:t}}(t,r):(Re=e,e=a)),e}())===a&&(e=function(){var e,t,r,n;return e=Re,(t=Xe())!==a&&cr()!==a&&(r=yt())!==a&&cr()!==a&&Pt()!==a&&cr()!==a&&(n=vt())!==a?e=t=function(e,t,r){return{op:e,right:t,escape:r.value}}(t,r,n):(Re=e,e=a),e===a&&(e=Re,(t=Xe())!==a&&cr()!==a&&(r=yt())!==a?e=t=function(e,t){return{op:e,right:t,escape:""}}(t,r):(Re=e,e=a)),e}()),e}())===a&&(r=null),r!==a?e=t=function(e,t){return""==t||null==t||null==t?e:"arithmetic"==t.type?dr(e,t.tail):pr(t.op,e,t.right,t.escape)}(t,r):(Re=e,e=a)):(Re=e,e=a),e}()),e}function Ke(){var e;return">="===t.substr(Re,2)?(e=">=",Re+=2):(e=a,0===Le&&He(f)),e===a&&(62===t.charCodeAt(Re)?(e=">",Re++):(e=a,0===Le&&He(h)),e===a&&("<="===t.substr(Re,2)?(e="<=",Re+=2):(e=a,0===Le&&He(p)),e===a&&("<>"===t.substr(Re,2)?(e="<>",Re+=2):(e=a,0===Le&&He(d)),e===a&&(60===t.charCodeAt(Re)?(e="<",Re++):(e=a,0===Le&&He(y)),e===a&&(61===t.charCodeAt(Re)?(e="=",Re++):(e=a,0===Le&&He(c)),e===a&&("!="===t.substr(Re,2)?(e="!=",Re+=2):(e=a,0===Le&&He(v)))))))),e}function Xe(){var e,t,r,n,i;return e=Re,t=Re,(r=Dt())!==a&&(n=cr())!==a&&(i=Ct())!==a?t=r=[r,n,i]:(Re=t,t=a),t!==a&&(t=b(t)),(e=t)===a&&(e=Ct()),e}function Qe(){var e,t,r,n,i;return e=Re,t=Re,(r=Dt())!==a&&(n=cr())!==a&&(i=At())!==a?t=r=[r,n,i]:(Re=t,t=a),t!==a&&(t=b(t)),(e=t)===a&&(e=At()),e}function $e(){var e,t,r,n,i,o,u,l;if(e=Re,(t=tt())!==a){for(r=[],n=Re,(i=cr())!==a&&(o=et())!==a&&(u=cr())!==a&&(l=tt())!==a?n=i=[i,o,u,l]:(Re=n,n=a);n!==a;)r.push(n),n=Re,(i=cr())!==a&&(o=et())!==a&&(u=cr())!==a&&(l=tt())!==a?n=i=[i,o,u,l]:(Re=n,n=a);r!==a?e=t=s(t,r):(Re=e,e=a)}else Re=e,e=a;return e}function et(){var e;return 43===t.charCodeAt(Re)?(e="+",Re++):(e=a,0===Le&&He(m)),e===a&&(45===t.charCodeAt(Re)?(e="-",Re++):(e=a,0===Le&&He(g))),e}function tt(){var e,t,r,n,i,o,u,s;if(e=Re,(t=nt())!==a){for(r=[],n=Re,(i=cr())!==a&&(o=rt())!==a&&(u=cr())!==a&&(s=nt())!==a?n=i=[i,o,u,s]:(Re=n,n=a);n!==a;)r.push(n),n=Re,(i=cr())!==a&&(o=rt())!==a&&(u=cr())!==a&&(s=nt())!==a?n=i=[i,o,u,s]:(Re=n,n=a);r!==a?e=t=function(e,t){return dr(e,t)}(t,r):(Re=e,e=a)}else Re=e,e=a;return e}function rt(){var e;return 42===t.charCodeAt(Re)?(e="*",Re++):(e=a,0===Le&&He(O)),e===a&&(47===t.charCodeAt(Re)?(e="/",Re++):(e=a,0===Le&&He(w))),e}function nt(){var e,t;return(e=function(){var e;return(e=vt())===a&&(e=function(){var e,t,r,n;return e=Re,(t=function(){var e,t,r,n;return e=Re,(t=Ot())!==a&&(r=wt())!==a&&(n=jt())!==a?e=t=function(e,t,r){return parseFloat(e+t+r)}(t,r,n):(Re=e,e=a),e===a&&(e=Re,(t=Ot())!==a&&(r=wt())!==a?e=t=function(e,t){return parseFloat(e+t)}(t,r):(Re=e,e=a),e===a&&(e=Re,(t=Ot())!==a&&(r=jt())!==a?e=t=function(e,t){return parseFloat(e+t)}(t,r):(Re=e,e=a),e===a&&(e=Re,(t=Ot())!==a&&(t=function(e){return parseFloat(e)}(t)),e=t))),e}())!==a?(r=Re,Le++,n=it(),Le--,n===a?r=void 0:(Re=r,r=a),r!==a?e=t=function(e){return{type:"number",value:e}}(t):(Re=e,e=a)):(Re=e,e=a),e}())===a&&(e=function(){var e,t;return e=Re,(t=St())!==a&&(t={type:"bool",value:!0}),(e=t)===a&&(e=Re,(t=Tt())!==a&&(t={type:"bool",value:!1}),e=t),e}())===a&&(e=function(){var e;return(e=_t())!==a&&(e={type:"null",value:null}),e}())===a&&(e=function(){var e,t;return e=Re,Ht()!==a&&cr()!==a&&(t=yt())!==a?e=function(e){return{type:"date",value:e.value}}(t):(Re=e,e=a),e}())===a&&(e=function(){var e,t;return e=Re,Vt()!==a&&cr()!==a&&(t=yt())!==a?e=function(e){return{type:"timestamp",value:e.value}}(t):(Re=e,e=a),e}())===a&&(e=ct()),e}())===a&&(e=function(){var e,t,r;return e=Re,Ut()!==a&&cr()!==a&&sr()!==a&&cr()!==a&&(t=function(){var e;return(e=Kt())===a&&(e=Xt())===a&&(e=Qt())===a&&(e=$t())===a&&(e=er())===a&&(e=tr()),e}())!==a&&cr()!==a&&Bt()!==a&&cr()!==a&&(r=qe())!==a&&cr()!==a&&lr()!==a?e=function(e,t){return{type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:e},t]}}}(t,r):(Re=e,e=a),e}())===a&&(e=function(){var e,t,r,n,i,o,u,s;return e=Re,Lt()!==a&&cr()!==a&&sr()!==a&&cr()!==a&&(t=qe())!==a&&cr()!==a&&Bt()!==a&&cr()!==a&&(r=qe())!==a&&cr()!==a?(n=Re,(i=Ft())!==a&&(o=cr())!==a&&(u=qe())!==a&&(s=cr())!==a?n=i=[i,o,u,s]:(Re=n,n=a),n===a&&(n=null),n!==a&&(i=lr())!==a?e=function(e,t,r){return{type:"function",name:"substring",args:{type:"expr_list",value:r?[e,t,r[2]]:[e,t]}}}(t,r,n):(Re=e,e=a)):(Re=e,e=a),e}())===a&&(e=function(){var e,t,r,n;return e=Re,Gt()!==a&&cr()!==a&&sr()!==a&&cr()!==a?((t=lt())===a&&(t=null),t!==a&&cr()!==a&&(r=qe())!==a&&cr()!==a&&Bt()!==a&&cr()!==a&&(n=qe())!==a&&cr()!==a&&lr()!==a?e=function(e,t,r){return{type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==e?"BOTH":e},t,r]}}}(t,r,n):(Re=e,e=a)):(Re=e,e=a),e===a&&(e=Re,Gt()!==a&&cr()!==a&&sr()!==a&&cr()!==a?((t=lt())===a&&(t=null),t!==a&&cr()!==a&&(r=qe())!==a&&cr()!==a&&lr()!==a?e=function(e,t){return{type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==e?"BOTH":e},t]}}}(t,r):(Re=e,e=a)):(Re=e,e=a)),e}())===a&&(e=function(){var e,t,r;return e=Re,zt()!==a&&cr()!==a&&sr()!==a&&cr()!==a&&(t=qe())!==a&&cr()!==a&&At()!==a&&cr()!==a&&(r=qe())!==a&&cr()!==a&&lr()!==a?e=function(e,t){return{type:"function",name:"position",args:{type:"expr_list",value:[e,t]}}}(t,r):(Re=e,e=a),e}())===a&&(e=function(){var e,t,r;return e=Re,(t=hr())!==a&&cr()!==a&&sr()!==a&&cr()!==a?((r=We())===a&&(r=null),r!==a&&cr()!==a&&lr()!==a?e=t=function(e,t){return{type:"function",name:e,args:t||{type:"expr_list",value:[]}}}(t,r):(Re=e,e=a)):(Re=e,e=a),e}())===a&&(e=function(){var e;return(e=function(){var e,t,r,n,i;if(e=Re,rr()!==a)if(cr()!==a)if((t=qe())!==a)if(cr()!==a){for(r=[],n=mt();n!==a;)r.push(n),n=mt();r!==a&&(n=cr())!==a&&(i=nr())!==a?e=function(e,t){return{type:"case_expression",format:"simple",operand:e,clauses:t,else:null}}(t,r):(Re=e,e=a)}else Re=e,e=a;else Re=e,e=a;else Re=e,e=a;else Re=e,e=a;if(e===a)if(e=Re,rr()!==a)if(cr()!==a)if((t=qe())!==a)if(cr()!==a){for(r=[],n=mt();n!==a;)r.push(n),n=mt();r!==a&&(n=cr())!==a&&(i=gt())!==a&&cr()!==a&&nr()!==a?e=function(e,t,r){return{type:"case_expression",format:"simple",operand:e,clauses:t,else:r.value}}(t,r,i):(Re=e,e=a)}else Re=e,e=a;else Re=e,e=a;else Re=e,e=a;else Re=e,e=a;return e}())===a&&(e=function(){var e,t,r,n;if(e=Re,rr()!==a)if(cr()!==a){for(t=[],r=bt();r!==a;)t.push(r),r=bt();t!==a&&(r=cr())!==a&&(n=nr())!==a?e=function(e){return{type:"case_expression",format:"searched",clauses:e,else:null}}(t):(Re=e,e=a)}else Re=e,e=a;else Re=e,e=a;if(e===a)if(e=Re,rr()!==a)if(cr()!==a){for(t=[],r=bt();r!==a;)t.push(r),r=bt();t!==a&&(r=cr())!==a&&(n=gt())!==a&&cr()!==a&&nr()!==a?e=function(e,t){return{type:"case_expression",format:"searched",clauses:e,else:t.value}}(t,n):(Re=e,e=a)}else Re=e,e=a;else Re=e,e=a;return e}()),e}())===a&&(e=function(){var e;return(e=function(){var e;return(e=function(){var e,t,r,n;if(e=Re,(t=it())!==a){for(r=[],n=ut();n!==a;)r.push(n),n=ut();r!==a?e=t=j(t,r):(Re=e,e=a)}else Re=e,e=a;return e}())!==a&&(e=e),e}())!==a&&(e=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:e}}(e)),e}())===a&&(e=st())===a&&(e=Re,sr()!==a&&cr()!==a&&(t=qe())!==a&&cr()!==a&&lr()!==a?e=function(e){return e.paren=!0,e}(t):(Re=e,e=a)),e}function at(){var e,t,r,n;if(e=Re,(t=it())!==a){for(r=[],n=ot();n!==a;)r.push(n),n=ot();r!==a?e=t=j(t,r):(Re=e,e=a)}else Re=e,e=a;return e}function it(){var e;return x.test(t.charAt(Re))?(e=t.charAt(Re),Re++):(e=a,0===Le&&He(k)),e}function ot(){var e;return I.test(t.charAt(Re))?(e=t.charAt(Re),Re++):(e=a,0===Le&&He(_)),e}function ut(){var e;return S.test(t.charAt(Re))?(e=t.charAt(Re),Re++):(e=a,0===Le&&He(T)),e}function st(){var e,r,n;return e=Re,64===t.charCodeAt(Re)?(r="@",Re++):(r=a,0===Le&&He(A)),r!==a&&(n=at())!==a?e=r=[r,n]:(Re=e,e=a),e!==a&&(e=function(e){return{type:"param",value:e[1]}}(e)),e}function lt(){var e;return(e=Jt())===a&&(e=Wt())===a&&(e=qt()),e}function ct(){var e,r,n,i;return e=Re,Yt()!==a&&cr()!==a?(45===t.charCodeAt(Re)?(r="-",Re++):(r=a,0===Le&&He(g)),r===a&&(43===t.charCodeAt(Re)?(r="+",Re++):(r=a,0===Le&&He(m))),r!==a&&cr()!==a&&(n=yt())!==a&&cr()!==a&&(i=ft())!==a?e=function(e,t,r){return{type:"interval",value:t,qualifier:r,op:e}}(r,n,i):(Re=e,e=a)):(Re=e,e=a),e===a&&(e=Re,Yt()!==a&&cr()!==a&&(r=yt())!==a&&cr()!==a&&(n=ft())!==a?e=function(e,t){return{type:"interval",value:e,qualifier:t,op:""}}(r,n):(Re=e,e=a)),e}function ft(){var e,t,r;return e=Re,(t=function(){var e,t,r;return e=Re,(t=ht())!==a&&cr()!==a&&sr()!==a&&cr()!==a&&(r=dt())!==a&&cr()!==a&&lr()!==a?e=t=function(e,t){return{type:"interval-period",period:e.value,precision:t,secondary:null}}(t,r):(Re=e,e=a),e===a&&(e=Re,(t=ht())!==a&&(t=M(t)),e=t),e}())!==a&&cr()!==a&&Zt()!==a&&cr()!==a&&(r=function(){var e,t,r,n;return e=Re,(t=ht())!==a&&(t=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}}(t)),(e=t)===a&&(e=Re,(t=tr())!==a&&cr()!==a&&sr()!==a&&cr()!==a&&(r=dt())!==a&&cr()!==a&&ur()!==a&&cr()!==a&&(n=pt())!==a&&cr()!==a&&lr()!==a?e=t=C(r,n):(Re=e,e=a),e===a&&(e=Re,(t=tr())!==a&&cr()!==a&&sr()!==a&&cr()!==a&&(r=dt())!==a&&cr()!==a&&lr()!==a?e=t=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}}(r):(Re=e,e=a),e===a&&(e=Re,(t=tr())!==a&&(t={type:"interval-period",period:"second",precision:null,secondary:null}),e=t))),e}())!==a?e=t=function(e,t){return{type:"interval-qualifier",start:e,end:t}}(t,r):(Re=e,e=a),e===a&&(e=function(){var e,t,r,n;return e=Re,(t=ht())!==a&&cr()!==a&&sr()!==a&&cr()!==a&&(r=pt())!==a&&cr()!==a&&lr()!==a?e=t=function(e,t){return{type:"interval-period",period:e.value,precision:t,secondary:null}}(t,r):(Re=e,e=a),e===a&&(e=Re,(t=ht())!==a&&(t=M(t)),(e=t)===a&&(e=Re,(t=tr())!==a&&cr()!==a&&sr()!==a&&cr()!==a&&(r=dt())!==a&&cr()!==a&&ur()!==a&&cr()!==a&&(n=pt())!==a&&cr()!==a&&lr()!==a?e=t=C(r,n):(Re=e,e=a),e===a&&(e=Re,(t=tr())!==a&&cr()!==a&&sr()!==a&&cr()!==a&&(r=pt())!==a&&cr()!==a&&lr()!==a?e=t=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}}(r):(Re=e,e=a),e===a&&(e=Re,(t=tr())!==a&&(t={type:"interval-period",period:"second",precision:null,secondary:null}),e=t)))),e}()),e}function ht(){var e,t;return e=Re,(t=Qt())!==a&&(t={type:"string",value:"day"}),(e=t)===a&&(e=Re,(t=$t())!==a&&(t={type:"string",value:"hour"}),(e=t)===a&&(e=Re,(t=er())!==a&&(t={type:"string",value:"minute"}),(e=t)===a&&(e=Re,(t=Xt())!==a&&(t={type:"string",value:"month"}),(e=t)===a&&(e=Re,(t=Kt())!==a&&(t={type:"string",value:"year"}),e=t)))),e}function pt(){var e;return(e=xt())!==a&&(e=P(e)),e}function dt(){var e;return(e=xt())!==a&&(e=P(e)),e}function yt(){var e;return(e=vt())===a&&(e=st()),e}function vt(){var e,r,n,i,o;if(e=Re,39===t.charCodeAt(Re)?(r="'",Re++):(r=a,0===Le&&He(D)),r===a&&("N'"===t.substr(Re,2)?(r="N'",Re+=2):(r=a,0===Le&&He(E))),r!==a){for(n=[],i=Re,"''"===t.substr(Re,2)?(o="''",Re+=2):(o=a,0===Le&&He(R)),o!==a&&(o="'"),(i=o)===a&&(N.test(t.charAt(Re))?(i=t.charAt(Re),Re++):(i=a,0===Le&&He(B)));i!==a;)n.push(i),i=Re,"''"===t.substr(Re,2)?(o="''",Re+=2):(o=a,0===Le&&He(R)),o!==a&&(o="'"),(i=o)===a&&(N.test(t.charAt(Re))?(i=t.charAt(Re),Re++):(i=a,0===Le&&He(B)));n!==a?(39===t.charCodeAt(Re)?(i="'",Re++):(i=a,0===Le&&He(D)),i!==a?e=r=function(e){return{type:"string",value:e.join("")}}(n):(Re=e,e=a)):(Re=e,e=a)}else Re=e,e=a;return e}function bt(){var e,t,r;return e=Re,ar()!==a&&cr()!==a&&(t=qe())!==a&&cr()!==a&&ir()!==a&&cr()!==a&&(r=qe())!==a?e=F(t,r):(Re=e,e=a),e}function mt(){var e,t,r;return e=Re,ar()!==a&&cr()!==a&&(t=qe())!==a&&cr()!==a&&ir()!==a&&cr()!==a&&(r=qe())!==a?e=F(t,r):(Re=e,e=a),e}function gt(){var e,t;return e=Re,or()!==a&&cr()!==a&&(t=qe())!==a?e=function(e){return{type:"else_clause",value:e}}(t):(Re=e,e=a),e}function Ot(){var e,r,n;return(e=xt())===a&&(e=Re,45===t.charCodeAt(Re)?(r="-",Re++):(r=a,0===Le&&He(g)),r===a&&(43===t.charCodeAt(Re)?(r="+",Re++):(r=a,0===Le&&He(m))),r!==a&&(n=xt())!==a?e=r=function(e,t){return e[0]+t}(r,n):(Re=e,e=a)),e}function wt(){var e,r,n;return e=Re,46===t.charCodeAt(Re)?(r=".",Re++):(r=a,0===Le&&He(L)),r!==a?((n=xt())===a&&(n=null),n!==a?e=r=function(e){return"."+(null!=e?e:"")}(n):(Re=e,e=a)):(Re=e,e=a),e}function jt(){var e,t,r;return e=Re,(t=It())!==a&&(r=xt())!==a?e=t=function(e,t){return e+t}(t,r):(Re=e,e=a),e}function xt(){var e,t;if(e=[],(t=kt())!==a)for(;t!==a;)e.push(t),t=kt();else e=a;return e!==a&&(e=function(e){return e.join("")}(e)),e}function kt(){var e;return U.test(t.charAt(Re))?(e=t.charAt(Re),Re++):(e=a,0===Le&&He(G)),e}function It(){var e,r,n;return e=Re,z.test(t.charAt(Re))?(r=t.charAt(Re),Re++):(r=a,0===Le&&He(V)),r!==a?(H.test(t.charAt(Re))?(n=t.charAt(Re),Re++):(n=a,0===Le&&He(J)),n===a&&(n=null),n!==a?e=r=function(e,t){return"e"+(null===t?"":t)}(0,n):(Re=e,e=a)):(Re=e,e=a),e}function _t(){var e,r,n,i;return e=Re,"null"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(W)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r=[r,n]:(Re=e,e=a)):(Re=e,e=a),e}function St(){var e,r,n,i;return e=Re,"true"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(q)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r=[r,n]:(Re=e,e=a)):(Re=e,e=a),e}function Tt(){var e,r,n,i;return e=Re,"false"===t.substr(Re,5).toLowerCase()?(r=t.substr(Re,5),Re+=5):(r=a,0===Le&&He(Z)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r=[r,n]:(Re=e,e=a)):(Re=e,e=a),e}function At(){var e,r,n,i;return e=Re,"in"===t.substr(Re,2).toLowerCase()?(r=t.substr(Re,2),Re+=2):(r=a,0===Le&&He(Y)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="IN":(Re=e,e=a)):(Re=e,e=a),e}function Mt(){var e,r,n,i;return e=Re,"is"===t.substr(Re,2).toLowerCase()?(r=t.substr(Re,2),Re+=2):(r=a,0===Le&&He(K)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="IS":(Re=e,e=a)):(Re=e,e=a),e}function Ct(){var e,r,n,i;return e=Re,"like"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(X)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="LIKE":(Re=e,e=a)):(Re=e,e=a),e}function Pt(){var e,r,n,i;return e=Re,"escape"===t.substr(Re,6).toLowerCase()?(r=t.substr(Re,6),Re+=6):(r=a,0===Le&&He(Q)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="ESCAPE":(Re=e,e=a)):(Re=e,e=a),e}function Dt(){var e,r,n,i;return e=Re,"not"===t.substr(Re,3).toLowerCase()?(r=t.substr(Re,3),Re+=3):(r=a,0===Le&&He($)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="NOT":(Re=e,e=a)):(Re=e,e=a),e}function Et(){var e,r,n,i;return e=Re,"and"===t.substr(Re,3).toLowerCase()?(r=t.substr(Re,3),Re+=3):(r=a,0===Le&&He(ee)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="AND":(Re=e,e=a)):(Re=e,e=a),e}function Rt(){var e,r,n,i;return e=Re,"or"===t.substr(Re,2).toLowerCase()?(r=t.substr(Re,2),Re+=2):(r=a,0===Le&&He(te)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="OR":(Re=e,e=a)):(Re=e,e=a),e}function Nt(){var e,r,n,i;return e=Re,"between"===t.substr(Re,7).toLowerCase()?(r=t.substr(Re,7),Re+=7):(r=a,0===Le&&He(re)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="BETWEEN":(Re=e,e=a)):(Re=e,e=a),e}function Bt(){var e,r,n,i;return e=Re,"from"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(ne)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="FROM":(Re=e,e=a)):(Re=e,e=a),e}function Ft(){var e,r,n,i;return e=Re,"for"===t.substr(Re,3).toLowerCase()?(r=t.substr(Re,3),Re+=3):(r=a,0===Le&&He(ae)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="FOR":(Re=e,e=a)):(Re=e,e=a),e}function Lt(){var e,r,n,i;return e=Re,"substring"===t.substr(Re,9).toLowerCase()?(r=t.substr(Re,9),Re+=9):(r=a,0===Le&&He(ie)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="SUBSTRING":(Re=e,e=a)):(Re=e,e=a),e}function Ut(){var e,r,n,i;return e=Re,"extract"===t.substr(Re,7).toLowerCase()?(r=t.substr(Re,7),Re+=7):(r=a,0===Le&&He(oe)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="EXTRACT":(Re=e,e=a)):(Re=e,e=a),e}function Gt(){var e,r,n,i;return e=Re,"trim"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(ue)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="TRIM":(Re=e,e=a)):(Re=e,e=a),e}function zt(){var e,r,n,i;return e=Re,"position"===t.substr(Re,8).toLowerCase()?(r=t.substr(Re,8),Re+=8):(r=a,0===Le&&He(se)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="POSITION":(Re=e,e=a)):(Re=e,e=a),e}function Vt(){var e,r,n,i;return e=Re,"timestamp"===t.substr(Re,9).toLowerCase()?(r=t.substr(Re,9),Re+=9):(r=a,0===Le&&He(le)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="TIMESTAMP":(Re=e,e=a)):(Re=e,e=a),e}function Ht(){var e,r,n,i;return e=Re,"date"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(ce)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="DATE":(Re=e,e=a)):(Re=e,e=a),e}function Jt(){var e,r,n,i;return e=Re,"leading"===t.substr(Re,7).toLowerCase()?(r=t.substr(Re,7),Re+=7):(r=a,0===Le&&He(fe)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="LEADING":(Re=e,e=a)):(Re=e,e=a),e}function Wt(){var e,r,n,i;return e=Re,"trailing"===t.substr(Re,8).toLowerCase()?(r=t.substr(Re,8),Re+=8):(r=a,0===Le&&He(he)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="TRAILING":(Re=e,e=a)):(Re=e,e=a),e}function qt(){var e,r,n,i;return e=Re,"both"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(pe)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="BOTH":(Re=e,e=a)):(Re=e,e=a),e}function Zt(){var e,r,n,i;return e=Re,"to"===t.substr(Re,2).toLowerCase()?(r=t.substr(Re,2),Re+=2):(r=a,0===Le&&He(de)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="TO":(Re=e,e=a)):(Re=e,e=a),e}function Yt(){var e,r,n,i;return e=Re,"interval"===t.substr(Re,8).toLowerCase()?(r=t.substr(Re,8),Re+=8):(r=a,0===Le&&He(ye)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="INTERVAL":(Re=e,e=a)):(Re=e,e=a),e}function Kt(){var e,r,n,i;return e=Re,"year"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(ve)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="YEAR":(Re=e,e=a)):(Re=e,e=a),e}function Xt(){var e,r,n,i;return e=Re,"month"===t.substr(Re,5).toLowerCase()?(r=t.substr(Re,5),Re+=5):(r=a,0===Le&&He(be)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="MONTH":(Re=e,e=a)):(Re=e,e=a),e}function Qt(){var e,r,n,i;return e=Re,"day"===t.substr(Re,3).toLowerCase()?(r=t.substr(Re,3),Re+=3):(r=a,0===Le&&He(me)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="DAY":(Re=e,e=a)):(Re=e,e=a),e}function $t(){var e,r,n,i;return e=Re,"hour"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(ge)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="HOUR":(Re=e,e=a)):(Re=e,e=a),e}function er(){var e,r,n,i;return e=Re,"minute"===t.substr(Re,6).toLowerCase()?(r=t.substr(Re,6),Re+=6):(r=a,0===Le&&He(Oe)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="MINUTE":(Re=e,e=a)):(Re=e,e=a),e}function tr(){var e,r,n,i;return e=Re,"second"===t.substr(Re,6).toLowerCase()?(r=t.substr(Re,6),Re+=6):(r=a,0===Le&&He(we)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="SECOND":(Re=e,e=a)):(Re=e,e=a),e}function rr(){var e,r,n,i;return e=Re,"case"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(je)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="CASE":(Re=e,e=a)):(Re=e,e=a),e}function nr(){var e,r,n,i;return e=Re,"end"===t.substr(Re,3).toLowerCase()?(r=t.substr(Re,3),Re+=3):(r=a,0===Le&&He(xe)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="END":(Re=e,e=a)):(Re=e,e=a),e}function ar(){var e,r,n,i;return e=Re,"when"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(ke)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="WHEN":(Re=e,e=a)):(Re=e,e=a),e}function ir(){var e,r,n,i;return e=Re,"then"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(Ie)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="THEN":(Re=e,e=a)):(Re=e,e=a),e}function or(){var e,r,n,i;return e=Re,"else"===t.substr(Re,4).toLowerCase()?(r=t.substr(Re,4),Re+=4):(r=a,0===Le&&He(_e)),r!==a?(n=Re,Le++,i=ot(),Le--,i===a?n=void 0:(Re=n,n=a),n!==a?e=r="ELSE":(Re=e,e=a)):(Re=e,e=a),e}function ur(){var e;return 44===t.charCodeAt(Re)?(e=",",Re++):(e=a,0===Le&&He(Se)),e}function sr(){var e;return 40===t.charCodeAt(Re)?(e="(",Re++):(e=a,0===Le&&He(Te)),e}function lr(){var e;return 41===t.charCodeAt(Re)?(e=")",Re++):(e=a,0===Le&&He(Ae)),e}function cr(){var e,t;for(e=[],t=fr();t!==a;)e.push(t),t=fr();return e}function fr(){var e;return Me.test(t.charAt(Re))?(e=t.charAt(Re),Re++):(e=a,0===Le&&He(Ce)),e}function hr(){var e,r,n,i;if(e=Re,(r=at())!==a&&(r=r),(e=r)===a)if(e=Re,96===t.charCodeAt(Re)?(r="`",Re++):(r=a,0===Le&&He(Pe)),r!==a){if(n=[],De.test(t.charAt(Re))?(i=t.charAt(Re),Re++):(i=a,0===Le&&He(Ee)),i!==a)for(;i!==a;)n.push(i),De.test(t.charAt(Re))?(i=t.charAt(Re),Re++):(i=a,0===Le&&He(Ee));else n=a;n!==a?(96===t.charCodeAt(Re)?(i="`",Re++):(i=a,0===Le&&He(Pe)),i!==a?e=r=function(e){return e.join("")}(n):(Re=e,e=a)):(Re=e,e=a)}else Re=e,e=a;return e}function pr(e,t,r,n){var a={type:"binary_expr",operator:e,left:t,right:r};return void 0!==n&&(a.escape=n),a}function dr(e,t){for(var r=e,n=0;n<t.length;n++)r=pr(t[n][1],r,t[n][3]);return r}if((n=o())!==a&&Re===t.length)return n;throw n!==a&&Re<t.length&&He({type:"end"}),function(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}(Fe,Be<t.length?t.charAt(Be):null,Be<t.length?Ve(Be,Be+1):Ve(Be,Be))}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){var r={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function o(e){return r[e.type](e)}return"Expected "+function(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:t}},(v=g).exports&&(v.exports=b());var O=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"parse",value:function(e){return g.exports.parse(e)}}]),e}();function w(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,k=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,I=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,_=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,S=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function T(e,t){return(e+="").length>=t?e:new Array(t-e.length+1).join("0")+e}function A(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"0",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"0",s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"0";if("+"===o||"-"===o){var l="".concat(T(parseInt(e,10),4),"-").concat(T(parseInt(t,10),2),"-").concat(T(parseInt(r,10),2)),c="";parseFloat(i)<10&&(c="0");var f="".concat(T(parseInt(n,10),2),":").concat(T(parseInt(a,10),2),":").concat(c+parseFloat(i).toString()),h="".concat(o).concat(T(parseInt(u,10),2),":").concat(T(parseInt(s,10),2));return new Date(l+"T"+f+h)}return new Date(parseInt(e,10),parseInt(t,10)-1,parseInt(r,10),parseInt(n,10),parseInt(a,10),parseFloat(i))}var M=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"makeBool",value:function(e){return E(e)}},{key:"featureValue",value:function(e,t,r,n){return J(e,t,r,n)}},{key:"equalsNull",value:function(e){return null===e}},{key:"applyLike",value:function(e,t,r){return U(e,t,r)}},{key:"ensureArray",value:function(e){return R(e)}},{key:"applyIn",value:function(e,t){return L(e,t)}},{key:"currentDate",value:function(){var e=new Date;return e.setHours(0,0,0,0),e}},{key:"makeSqlInterval",value:function(e,t,r){return d.createFromValueAndQualifer(e,t,r)}},{key:"convertInterval",value:function(e){return e instanceof d?e.valueInMilliseconds():e}},{key:"currentTimestamp",value:function(){return new Date}},{key:"compare",value:function(e,t,r){return z(e,t,r)}},{key:"calculate",value:function(e,t,r){return H(e,t,r)}},{key:"makeComparable",value:function(e){return G(e)}},{key:"evaluateFunction",value:function(e,t){return y(e,t)}},{key:"lookup",value:function(e,t){var r=t[e];return void 0===r?null:r}},{key:"between",value:function(e,t){return null==e||null==t[0]||null==t[1]?null:e>=t[0]&&e<=t[1]}},{key:"notbetween",value:function(e,t){return null==e||null==t[0]||null==t[1]?null:e<t[0]||e>t[1]}},{key:"ternaryNot",value:function(e){return N(e)}},{key:"ternaryAnd",value:function(e,t){return B(e,t)}},{key:"ternaryOr",value:function(e,t){return F(e,t)}}]),e}(),C=function(){function e(t,r){Object(i.a)(this,e),this.fieldsIndex=r,this.datefields={},this.parameters={},this.parseTree=O.parse(t);var n=this.extractExpressionInfo(r),a=n.isStandardized,o=n.isAggregate,u=n.referencedFieldNames;this.referencedFieldNames=u,this.isStandardized=a,this.isAggregate=o}return Object(o.a)(e,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"testSet",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W,n={},a=w(this.fieldNames);try{var i=function(){var a=t.value;n[a]=e.map((function(e){return r.getAttribute(e,a)}))};for(a.s();!(t=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return!!this.evaluateNode(this.parseTree,{attributes:n},W)}},{key:"calculateValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W,r=this.evaluateNode(this.parseTree,e,t);return r instanceof d?r.valueInMilliseconds()/864e5:r}},{key:"calculateValueCompiled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(e,this.parameters,t,this.datefields):Object(u.a)("csp-restrictions")?this.calculateValue(e,t):(this.compileMe(),this.parseTree._compiledVersion(e,this.parameters,t,this.datefields))}},{key:"testFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return!!this.evaluateNode(this.parseTree,e,t)}},{key:"testFeatureCompiled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(e,this.parameters,t,this.datefields):Object(u.a)("csp-restrictions")?this.testFeature(e,t):(this.compileMe(),!!this.parseTree._compiledVersion(e,this.parameters,t,this.datefields))}},{key:"getFunctions",value:function(){var e=[];return this.visitAll(this.parseTree,(function(t){"function"===t.type&&e.push(t.name.toLowerCase())})),V(e)}},{key:"getExpressions",value:function(){var e=new Map;return this.visitAll(this.parseTree,(function(t){if("function"===t.type){var r=t.name.toLowerCase(),n=t.args.value[0];if("column_ref"===n.type){var a=n.column,i="".concat(r,"-").concat(a);e.has(i)||e.set(i,{aggregateType:r,field:a})}}})),Object(a.a)(e.values())}},{key:"getVariables",value:function(){var e=[];return this.visitAll(this.parseTree,(function(t){"param"===t.type&&e.push(t.value.toLowerCase())})),V(e)}},{key:"compileMe",value:function(){var e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",e).bind(M)}},{key:"extractExpressionInfo",value:function(e){var t=this,r=[],n=!0,a=!0;return this.visitAll(this.parseTree,(function(i){switch(i.type){case"column_ref":var o=e.get(i.column),u=o&&o.name;!o||"date"!==o.type&&"esriFieldTypeDate"!==o.type||(t.datefields[o.name]=1),void 0!==u?(r.push(u),i.column=u):r.push(i.column);break;case"function":var s=i.name,l=i.args.value.length;n&&(n=function(e,t){var r=m[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams}(s,l)),a&&(a=function(e,t){var r=c[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams}(s,l))}})),{referencedFieldNames:V(r),isStandardized:n,isAggregate:a}}},{key:"visitAll",value:function(e,t){if(null!=e)switch(t(e),e.type){case"when_clause":this.visitAll(e.operand,t),this.visitAll(e.value,t);break;case"case_expression":var r,n=w(e.clauses);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.visitAll(a,t)}}catch(s){n.e(s)}finally{n.f()}"simple"===e.format&&this.visitAll(e.operand,t),null!==e.else&&this.visitAll(e.else,t);break;case"expr_list":var i,o=w(e.value);try{for(o.s();!(i=o.n()).done;){var u=i.value;this.visitAll(u,t)}}catch(s){o.e(s)}finally{o.f()}break;case"unary_expr":this.visitAll(e.expr,t);break;case"binary_expr":this.visitAll(e.left,t),this.visitAll(e.right,t);break;case"function":this.visitAll(e.args,t)}}},{key:"evaluateNodeToJavaScript",value:function(e){switch(e.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case"case_expression":var t="";if("simple"===e.format){var r="this.makeComparable("+this.evaluateNodeToJavaScript(e.operand)+")";t="( ";for(var n=0;n<e.clauses.length;n++)t+=" ("+r+" === this.makeComparable("+this.evaluateNodeToJavaScript(e.clauses[n].operand)+")) ? ("+this.evaluateNodeToJavaScript(e.clauses[n].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}else{t="( ";for(var a=0;a<e.clauses.length;a++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[a].operand)+")===true ? ("+this.evaluateNodeToJavaScript(e.clauses[a].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}return t;case"param":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case"expr_list":var i,o="[",u=w(e.value);try{for(u.s();!(i=u.n()).done;){var s=i.value;"["!==o&&(o+=","),o+=this.evaluateNodeToJavaScript(s)}}catch(l){u.e(l)}finally{u.f()}return o+="]";case"unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case"binary_expr":switch(e.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")"}throw new Error("Not Supported Operator "+e.operator);case"null":case"bool":case"string":case"number":return JSON.stringify(e.value);case"date":return"(new Date("+D(e.value).getTime().toString()+"))";case"timestamp":return"(new Date("+P(e.value).getTime().toString()+"))";case"current_time":return"date"===e.mode?"this.currentDate()":"this.currentTimestamp()";case"column_ref":return"this.featureValue(feature,"+JSON.stringify(e.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+")"}throw new Error("Unsupported sql syntax "+e.type)}},{key:"evaluateNode",value:function(e,t,r){switch(e.type){case"interval":var n=this.evaluateNode(e.value,t,r);return d.createFromValueAndQualifer(n,e.qualifier,e.op);case"case_expression":if("simple"===e.format){for(var a=G(this.evaluateNode(e.operand,t,r)),i=0;i<e.clauses.length;i++)if(a===G(this.evaluateNode(e.clauses[i].operand,t,r)))return this.evaluateNode(e.clauses[i].value,t,r);if(null!==e.else)return this.evaluateNode(e.else,t,r)}else{for(var o=0;o<e.clauses.length;o++)if(E(this.evaluateNode(e.clauses[o].operand,t,r)))return this.evaluateNode(e.clauses[o].value,t,r);if(null!==e.else)return this.evaluateNode(e.else,t,r)}return null;case"param":return this.parameters[e.value.toLowerCase()];case"expr_list":var u,s=[],l=w(e.value);try{for(l.s();!(u=l.n()).done;){var f=u.value;s.push(this.evaluateNode(f,t,r))}}catch(x){l.e(x)}finally{l.f()}return s;case"unary_expr":return N(this.evaluateNode(e.expr,t,r));case"binary_expr":switch(e.operator){case"AND":return B(this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r));case"OR":return F(this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r));case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null===this.evaluateNode(e.left,t,r);case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null!==this.evaluateNode(e.left,t,r);case"IN":var h=R(this.evaluateNode(e.right,t,r));return L(this.evaluateNode(e.left,t,r),h);case"NOT IN":var p=R(this.evaluateNode(e.right,t,r));return N(L(this.evaluateNode(e.left,t,r),p));case"BETWEEN":var v=this.evaluateNode(e.left,t,r),b=this.evaluateNode(e.right,t,r);return null==v||null==b[0]||null==b[1]?null:v>=G(b[0])&&v<=G(b[1]);case"NOTBETWEEN":var m=this.evaluateNode(e.left,t,r),g=this.evaluateNode(e.right,t,r);return null==m||null==g[0]||null==g[1]?null:m<G(g[0])||m>G(g[1]);case"LIKE":return U(this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r),e.escape);case"NOT LIKE":return N(U(this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return z(e.operator,this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r));case"-":case"+":case"*":case"/":return H(e.operator,this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r))}case"null":case"bool":case"string":case"number":return e.value;case"date":return D(e.value);case"timestamp":return P(e.value);case"current_time":var O=new Date;return"date"===e.mode&&O.setHours(0,0,0,0),O;case"column_ref":return J(t,e.column,this.datefields,r);case"function":var j=this.evaluateNode(e.args,t,r);return this.isAggregate?function(e,t){var r=c[e.toLowerCase()];if(null==r)throw new Error("Function Not Recognised");if(t.length<r.minParams||t.length>r.maxParams)throw new Error("Invalid Parameter count for call to ".concat(e.toUpperCase()));return r.evaluate(t)}(e.name,j):y(e.name,j)}throw new Error("Unsupported sql syntax "+e.type)}}],[{key:"create",value:function(t,r){return new e(t,r)}}]),e}();function P(e){var t=k.exec(e);if(null!==t){var r=t,a=Object(n.a)(r,7);return A(a[1],a[2],a[3],a[4],a[5],a[6])}if(null!==(t=I.exec(e))){var i=t,o=Object(n.a)(i,10);return A(o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9])}if(null!==(t=_.exec(e))){var u=t,s=Object(n.a)(u,9);return A(s[1],s[2],s[3],s[4],s[5],"0",s[6],s[7],s[8])}if(null!==(t=S.exec(e))){var l=t,c=Object(n.a)(l,6);return A(c[1],c[2],c[3],c[4],c[5])}if(null!==(t=x.exec(e))){var f=t,h=Object(n.a)(f,4);return A(h[1],h[2],h[3])}throw new Error("SQL Invalid Timestamp")}function D(e){var t=x.exec(e);if(null===t)throw new Error("SQL Invalid Date");var r=Object(n.a)(t,4),a=r[1],i=r[2],o=r[3];return new Date(parseInt(a,10),parseInt(i,10)-1,parseInt(o,10))}function E(e){return!0===e}function R(e){return Array.isArray(e)?e:[e]}function N(e){return null!==e?!0!==e:null}function B(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function F(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function L(e,t){if(null==e)return null;var r,n=!1,a=w(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(null==i)n=null;else if(e===i){n=!0;break}}}catch(o){a.e(o)}finally{a.f()}return n}function U(e,t,r){if(null==e)return null;for(var n=t,a=r,i="",o="-[]/{}()*+?.\\^$|",u=0,s=0;s<n.length;s++){var l=n.charAt(s);switch(u){case 0:l===a?u=1:o.indexOf(l)>=0?i+="\\"+l:i+="%"===l?".*":"_"===l?".":l;break;case 1:o.indexOf(l)>=0?i+="\\"+l:i+=l,u=0}}return new RegExp("^"+i+"$").test(e)}function G(e){return e instanceof Date?e.valueOf():e}function z(e,t,r){if(null==t||null==r)return null;var n=G(t),a=G(r);switch(e){case"<>":return n!==a;case"=":return n===a;case">":return n>a;case"<":return n<a;case">=":return n>=a;case"<=":return n<=a}}function V(e){var t,r=[],n={},a=w(e);try{for(a.s();!(t=a.n()).done;){var i=t.value,o=i.toLowerCase();void 0===n[o]&&(r.push(i),n[o]=1)}}catch(u){a.e(u)}finally{a.f()}return r}function H(e,t,r){if(t instanceof d)if(r instanceof Date)switch(e){case"+":return new Date(t.valueInMilliseconds()+r.getTime());case"-":return t.valueInMilliseconds()-r.getTime();case"*":return t.valueInMilliseconds()*r.getTime();case"/":return t.valueInMilliseconds()/r.getTime()}else if(r instanceof d)switch(e){case"+":return d.createFromMilliseconds(t.valueInMilliseconds()+r.valueInMilliseconds());case"-":return d.createFromMilliseconds(t.valueInMilliseconds()-r.valueInMilliseconds());case"*":return t.valueInMilliseconds()*r.valueInMilliseconds();case"/":return t.valueInMilliseconds()/r.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(r instanceof d)if(t instanceof Date)switch(e){case"+":return new Date(r.valueInMilliseconds()+t.getTime());case"-":return new Date(t.getTime()-r.valueInMilliseconds());case"*":return t.getTime()*r.valueInMilliseconds();case"/":return t.getTime()/r.valueInMilliseconds()}else r=r.valueInMilliseconds();else if(t instanceof Date&&"number"==typeof r)switch(r=24*r*60*60*1e3,t=t.getTime(),e){case"+":return new Date(t+r);case"-":return new Date(t-r);case"*":return new Date(t*r);case"/":return new Date(t/r)}else if(r instanceof Date&&"number"==typeof t)switch(t=24*t*60*60*1e3,r=r.getTime(),e){case"+":return new Date(t+r);case"-":return new Date(t-r);case"*":return new Date(t*r);case"/":return new Date(t/r)}switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r}}function J(e,t,r,n){var a=n.getAttribute(e,t);return null!=a&&1===r[t]?new Date(a):a}var W={getAttribute:function(e,t){return(function(e){return e&&"object"==typeof e.attributes}(e)?e.attributes:e)[t]}}},"zSy+":function(e,t,r){"use strict";var n,a=r("mK0O"),i=r("hisu"),o=r("yBJb"),u=r("CHlC"),s=r("kMo5"),l=r("P+uj"),c=r("dQW7"),f=r("0fJP"),h=r("xAIp"),p=r("wckI"),d=(r("J4Pc"),r("TM+E"),r("vo12")),y=r("iaHD"),v=r("sPA0"),b=r("d7QU"),m=r("WYis"),g=r("0n+b");function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var w=n=function(e){Object(u.a)(r,e);var t=O(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).description=null,e.label=null,e.minValue=0,e.maxValue=0,e.color=null,e}return Object(o.a)(r,[{key:"clone",value:function(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:Object(f.a)(this.color)})}}]),r}(g.a);Object(c.a)([Object(h.b)({type:String,json:{write:!0}})],w.prototype,"description",void 0),Object(c.a)([Object(h.b)({type:String,json:{write:!0}})],w.prototype,"label",void 0),Object(c.a)([Object(h.b)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],w.prototype,"minValue",void 0),Object(c.a)([Object(h.b)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],w.prototype,"maxValue",void 0),Object(c.a)([Object(h.b)({type:m.a,json:{type:[p.a],write:!0}})],w.prototype,"color",void 0);var j,x=w=n=Object(c.a)([Object(y.a)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],w);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var S=j=function(e){Object(u.a)(r,e);var t=_(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="point-cloud-class-breaks",n.field=null,n.legendOptions=null,n.fieldTransformType=null,n.colorClassBreakInfos=null,n}return Object(o.a)(r,[{key:"clone",value:function(){return new j(I(I({},this.cloneProperties()),{},{field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:Object(f.a)(this.colorClassBreakInfos),legendOptions:Object(f.a)(this.legendOptions)}))}}]),r}(v.a);Object(c.a)([Object(d.a)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],S.prototype,"type",void 0),Object(c.a)([Object(h.b)({json:{write:!0},type:String})],S.prototype,"field",void 0),Object(c.a)([Object(h.b)({type:b.a,json:{write:!0}})],S.prototype,"legendOptions",void 0),Object(c.a)([Object(h.b)({type:v.a.fieldTransformTypeKebabDict.apiValues,json:{type:v.a.fieldTransformTypeKebabDict.jsonValues,read:v.a.fieldTransformTypeKebabDict.read,write:v.a.fieldTransformTypeKebabDict.write}})],S.prototype,"fieldTransformType",void 0),Object(c.a)([Object(h.b)({type:[x],json:{write:!0}})],S.prototype,"colorClassBreakInfos",void 0);var T=S=j=Object(c.a)([Object(y.a)("esri.renderers.PointCloudClassBreaksRenderer")],S);t.a=T},zmWe:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,tileMaxRecordCount:0}}},"zr+G":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var n=new(r("7i+s").a)({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),a={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}},zwLX:function(e,t,r){"use strict";var n,a=r("hisu"),i=r("yBJb"),o=r("CHlC"),u=r("kMo5"),s=r("P+uj"),l=r("dQW7"),c=r("0n+b"),f=r("0fJP"),h=r("xAIp"),p=(r("wckI"),r("J4Pc"),r("TM+E"),r("vo12")),d=r("mp5+"),y=r("iaHD"),v=r("Zexz");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var m=n=function(e){Object(o.a)(r,e);var t=b(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).altitude=45,n.azimuth=315,n.colorRamp=null,n.hillshadeType="multi-directional",n.pixelSizePower=.664,n.pixelSizeFactor=.024,n.scalingType="none",n.type="raster-shaded-relief",n.zFactor=1,n}return Object(i.a)(r,[{key:"readColorRamp",value:function(e){return Object(v.a)(e)}},{key:"clone",value:function(){return new n({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Object(f.a)(this.colorRamp)})}}]),r}(c.a);Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],m.prototype,"altitude",void 0),Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],m.prototype,"azimuth",void 0),Object(l.a)([Object(h.b)({types:v.b,json:{write:!0}})],m.prototype,"colorRamp",void 0),Object(l.a)([Object(d.a)("colorRamp")],m.prototype,"readColorRamp",null),Object(l.a)([Object(h.b)({type:["traditional","multi-directional"],json:{write:!0}})],m.prototype,"hillshadeType",void 0),Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],m.prototype,"pixelSizePower",void 0),Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],m.prototype,"pixelSizeFactor",void 0),Object(l.a)([Object(h.b)({type:["none","adjusted"],json:{write:!0}})],m.prototype,"scalingType",void 0),Object(l.a)([Object(p.a)({rasterShadedRelief:"raster-shaded-relief"})],m.prototype,"type",void 0),Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],m.prototype,"zFactor",void 0);var g=m=n=Object(l.a)([Object(y.a)("esri.renderers.RasterShadedReliefRenderer")],m);t.a=g}}]);
//# sourceMappingURL=c8f7fe3b0e41be846d5687592cf2018ff6e22687-55bccd92eefb5cac2af6.js.map