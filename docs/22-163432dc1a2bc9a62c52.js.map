{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/engine/RasterBitmap.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/engine/RasterTile.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/engine/RasterTileContainer.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/layers/ImageryTileLayerView.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/layers/ImageryTileLayerView2D.js"],"names":["_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","bandCount","outMin","outMax","minCutOff","maxCutOff","factor","useGamma","gamma","gammaCorrection","colormap","colormapOffset","type","_l","x","_super","_this","t","length","undefined","s","_textureInvalidated","_memoryUsed","_supportsBilinear","stencilRef","coordScale","_symbolizerParameters","height","isRendereredSource","pixelRatio","resolution","rotation","_source","rawPixelData","_suspended","_bandIds","_interpolation","_transformGrid","width","y","transforms","dvs","source","transformGrid","interpolation","key","value","getTextures","textures","forEach","dispose","_rasterTexture","_transformGridTexture","_colormapTexture","get","set","_rasterTextureBandIds","stage","ready","requestRender","invalidateTexture","setSamplingMode","o","_t$toScreenNoRotation","toScreenNoRotation","_t$toScreenNoRotation2","n","l","h","d","m","_","Math","PI","displayViewMat3","push","names","_t","map","descriptor","reduce","_ref","r","context","i","a","pixels","_createOrDestroyRasterTexture","_updateColormapTexture","setData","suspended","bandIds","join","capabilities","textureFloat","textureFloatLinear","_colormap","symbolizerParameters","some","_s","_e","bitmap","once","destroy","getMemoryUsage","_o","isCustomTilingScheme","_getTileBounds","_tileInfoView","tileInfo","size","_this2","registerRenderPass","name","brushes","raster","target","children","drawPhase","MAP","concat","visible","getTileBounds","world","_r","spatialReference","lodAt","level","_o2","_n2","_p2","u","_p","_fetchPopupFeatures","_rasterFieldPrefix","layer","view","fullExtent","datumTransformation","renderer","dynamicRangeAdjustment","mark","_callee","p","_yield$s$identify","_u","f","c","_i","_r2","_t2","_i2","wrap","_context","prev","next","abrupt","Promise","reject","popupEnabled","popupTemplate","identify","sent","hasStandardTime","getStandardTimeValue","ObjectId","_formatAttributeValue","rasterInfo","attributeTable","features","filter","attributes","Value","VALUE","String","hasOwnProperty","clone","sourceLayer","stop","_x","_x2","_set","resolve","_t3","_r4","_r3","fieldInfos","_i3","_getFieldInfo","format","trim","indexOf","_formatDelimitedString","_formatNumberFromString","toLowerCase","fieldName","replace","split","Number","isNaN","readOnly","V","getLogger","L","_U","q","_updateGlobalSymbolizerParams2","_redrawImage2","_enqueueTileFetch2","_doRefresh","_tileStrategy","_fetchQueue","_blockCacheRegistryUrl","_blockCacheRegistryId","_bitmapView","_emptyTilePixelBlock","_srcResolutions","_previousLOD","_needBlockCacheUpdate","_globalSymbolizerParams","_symbolizerParams","_abortController","_globalUpdateRequested","_isCustomTilingScheme","useWebGLForProcessing","_redrawOrRefreshDebounced","Date","now","doRefresh","_redrawImage","updateFullExtent","addResolvingPromise","_get","useProgressiveUpdate","removeAllChildren","_getCacheSize","cachePolicy","acquireTile","releaseTile","cacheSize","tileInfoView","requestUpdate","toMap","geometry","pause","state","update","resume","_e$state","extent","scale","getClosestInfoForScale","toJSON","fromJSON","ioConfig","sampling","_updateSymbolizerParams","updateCacheSize","notifyChange","_this3","increaseRasterJobHandlerUsage","supportsTextureFloat","allowPartialFill","_initializeTileInfo","_computeFetchConcurrency","concurrency","process","fetchTile","container","addChild","handles","add","_canUseMajorityInterpolationOnDataSource","catch","error","_updateBlockCacheRegistry","remove","decreaseRasterJobHandlerUsage","clear","_this4","hasTilingEffects","abort","signal","then","_this5","updateRenderer","reset","tiles","_enqueueTileFetch","_this$_tileInfoView$g","_this$_tileInfoView$g2","_this$_tileInfoView$t","_this$_tileInfoView$t2","createTile","getTileCoords","getTileResolution","_this6","id","removeChild","_canUseWebGLForProcessing","registryId","requestRawData","srcResolution","row","col","symbolizer","canRenderInWebGL","xmin","ymax","_w","scales","srcResolutions","create","origin","storageInfo","blockBoundary","maxCol","minCol","maxRow","minRow","_callee2","_s2","_a","_t4","_this7","_context2","has","moving","t0","pixelBlock","applyRenderer","_createEmptyTilePixelBlock","_getLayerInterpolation","t1","_callee4","_this8","_context4","_updateGlobalSymbolizerParams","_callee3","_context3","_x4","_x3","_e2","_t5","Uint8Array","mask","pixelType","_callee5","_context5","fetchPixels","generateWebGLParameters","isGCS","isGeographic","round","_x5","_this$layer","url","multidimensionalDefinition","multidimensionalInfo","getSliceIndex","_e3","_t6","_this$layer$rasterInf","colorRamp","D"],"mappings":"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","file":"22-163432dc1a2bc9a62c52.js","sourcesContent":["import _toConsumableArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isNone as t } from \"../../../core/maybe.js\";\nimport { b as e, c as s, r, k as i, m as a } from \"../../../chunks/mat3.js\";\nimport { c as o } from \"../../../chunks/mat3f32.js\";\nimport { f as u } from \"../../../chunks/vec2f32.js\";\nimport { extractBands as n } from \"../../../layers/support/rasterFunctions/pixelUtils.js\";\nimport { DisplayObject as l } from \"./DisplayObject.js\";\nimport { createTransformTexture as h, createRasterTexture as d, createColormapTexture as m } from \"../../webgl/rasterUtils.js\";\nvar _ = {\n  bandCount: 3,\n  outMin: 0,\n  outMax: 1,\n  minCutOff: [0, 0, 0],\n  maxCutOff: [255, 255, 255],\n  factor: [1 / 255, 1 / 255, 1 / 255],\n  useGamma: !1,\n  gamma: [1, 1, 1],\n  gammaCorrection: [1, 1, 1],\n  colormap: null,\n  colormapOffset: null,\n  type: \"stretch\"\n};\n\nvar x = /*#__PURE__*/function (_l) {\n  _inherits(x, _l);\n\n  var _super = _createSuper(x);\n\n  function x() {\n    var _this;\n\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    _classCallCheck(this, x);\n\n    _this = _super.call(this), _this._textureInvalidated = !0, _this._memoryUsed = null, _this._supportsBilinear = !0, _this.stencilRef = 0, _this.coordScale = [1, 1], _this._symbolizerParameters = null, _this.height = null, _this.isRendereredSource = !1, _this.pixelRatio = 1, _this.resolution = 0, _this.rotation = 0, _this._source = null, _this.rawPixelData = null, _this._suspended = !1, _this._bandIds = null, _this._interpolation = null, _this._transformGrid = null, _this.width = null, _this.x = 0, _this.y = 0, _this.transforms = {\n      dvs: o()\n    }, _this.source = t, _this.transformGrid = e, _this.interpolation = s;\n    return _this;\n  }\n\n  _createClass(x, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var t = this.getTextures();\n      null == t || t.textures.forEach(function (t) {\n        return t.dispose();\n      }), this._rasterTexture = null, this._transformGridTexture = null, this._colormapTexture = null;\n    }\n  }, {\n    key: \"symbolizerParameters\",\n    get: function get() {\n      return this._symbolizerParameters || _;\n    },\n    set: function set(t) {\n      this._symbolizerParameters = t;\n    }\n  }, {\n    key: \"source\",\n    get: function get() {\n      return this._source;\n    },\n    set: function set(t) {\n      this._source = t, this._rasterTexture && (this._rasterTexture.dispose(), this._rasterTexture = null, this._rasterTextureBandIds = null, this._memoryUsed = null);\n    }\n  }, {\n    key: \"suspended\",\n    get: function get() {\n      return this._suspended;\n    },\n    set: function set(t) {\n      this._suspended && !t && this.stage && (this.ready(), this.requestRender()), this._suspended = t;\n    }\n  }, {\n    key: \"bandIds\",\n    get: function get() {\n      return this._bandIds;\n    },\n    set: function set(t) {\n      this._bandIds = t, this.invalidateTexture();\n    }\n  }, {\n    key: \"interpolation\",\n    get: function get() {\n      return this._interpolation;\n    },\n    set: function set(t) {\n      this._interpolation = t, this._rasterTexture && this._rasterTexture.setSamplingMode(!this._supportsBilinear || \"bilinear\" !== t && \"cubic\" !== t ? 9728 : 9729);\n    }\n  }, {\n    key: \"transformGrid\",\n    get: function get() {\n      return this._transformGrid;\n    },\n    set: function set(t) {\n      this._transformGrid = t, this._transformGridTexture && (this._transformGridTexture.dispose(), this._transformGridTexture = null, this._memoryUsed = null);\n    }\n  }, {\n    key: \"invalidateTexture\",\n    value: function invalidateTexture() {\n      this._textureInvalidated || (this._textureInvalidated = !0, this.requestRender());\n    }\n  }, {\n    key: \"setTransform\",\n    value: function setTransform(t) {\n      var o = e(this.transforms.dvs),\n          _t$toScreenNoRotation = t.toScreenNoRotation([0, 0], this.x, this.y),\n          _t$toScreenNoRotation2 = _slicedToArray(_t$toScreenNoRotation, 2),\n          n = _t$toScreenNoRotation2[0],\n          l = _t$toScreenNoRotation2[1],\n          h = this.resolution / this.pixelRatio / t.resolution,\n          d = h * this.width,\n          m = h * this.height,\n          _ = Math.PI * this.rotation / 180;\n\n      s(o, o, u(n, l)), s(o, o, u(d / 2, m / 2)), r(o, o, -_), s(o, o, u(-d / 2, -m / 2)), i(o, o, u(d, m)), a(this.transforms.dvs, t.displayViewMat3, o);\n    }\n  }, {\n    key: \"getTextures\",\n    value: function getTextures() {\n      if (!this._rasterTexture) return null;\n      var t = [],\n          e = [];\n      return this._transformGridTexture && (e.push(this._transformGridTexture), t.push(\"u_transformGrid\")), this._rasterTexture && (e.push(this._rasterTexture), t.push(\"u_image\")), this._colormapTexture && (e.push(this._colormapTexture), t.push(\"u_colormap\")), {\n        names: t,\n        textures: e\n      };\n    }\n  }, {\n    key: \"getMemoryUsage\",\n    value: function getMemoryUsage() {\n      if (t(this._memoryUsed)) {\n        var _t = this.getTextures();\n\n        if (null == _t) return 0;\n        this._memoryUsed = _t.textures.map(function (t) {\n          return t.descriptor.width * t.descriptor.height * 4;\n        }).reduce(function (t, e) {\n          return t + e;\n        });\n      }\n\n      return this._memoryUsed;\n    }\n  }, {\n    key: \"onAttach\",\n    value: function onAttach() {\n      this.invalidateTexture();\n    }\n  }, {\n    key: \"onDetach\",\n    value: function onDetach() {\n      this.invalidateTexture();\n    }\n  }, {\n    key: \"updateTexture\",\n    value: function updateTexture(_ref) {\n      var t = _ref.context;\n      var e, s, r;\n      if (!this.stage) return null == (e = this._rasterTexture) || e.dispose(), null == (s = this._transformGridTexture) || s.dispose(), null == (r = this._colormapTexture) || r.dispose(), this._rasterTexture = null, this._rasterTextureBandIds = null, this._transformGridTexture = null, void (this._colormapTexture = null);\n      if (!this._textureInvalidated) return;\n      this._textureInvalidated = !1;\n      var i = this.source,\n          a = i && i.pixels && i.pixels.length > 0;\n      this._createOrDestroyRasterTexture(t), this._rasterTexture && (a ? (this._updateColormapTexture(t), this.transformGrid && !this._transformGridTexture && (this._transformGridTexture = h(t, this.transformGrid))) : this._rasterTexture.setData(null)), this.suspended || (this.ready(), this.requestRender());\n    }\n  }, {\n    key: \"_createOrDestroyRasterTexture\",\n    value: function _createOrDestroyRasterTexture(t) {\n      var e, s;\n      var r = this.source ? n(this.source, this.bandIds) : null;\n      if (!(r && r.pixels && r.pixels.length > 0)) return void (this._rasterTexture && (this._rasterTexture.dispose(), this._rasterTextureBandIds = null, this._rasterTexture = null));\n      var i = null == this._rasterTextureBandIds && null == this.bandIds || this._rasterTextureBandIds && this.bandIds && this._rasterTextureBandIds.join(\"\") === this.bandIds.join(\"\");\n\n      if (this._rasterTexture) {\n        if (i) return;\n        this._rasterTexture.dispose(), this._rasterTextureBandIds = null, this._rasterTexture = null;\n      }\n\n      var a = this.interpolation || \"nearest\",\n          o = this.isRendereredSource || !(null != (e = t.capabilities.textureFloat) && e.textureFloat);\n      this._rasterTexture = d(t, r, a, o), this._supportsBilinear = null == (s = t.capabilities.textureFloat) ? void 0 : s.textureFloatLinear, this._rasterTextureBandIds = this.bandIds ? _toConsumableArray(this.bandIds) : null;\n    }\n  }, {\n    key: \"_updateColormapTexture\",\n    value: function _updateColormapTexture(t) {\n      var e = this._colormap,\n          s = this.symbolizerParameters.colormap;\n      return s ? e ? s.length !== e.length || s.some(function (t, s) {\n        return t !== e[s];\n      }) ? (this._colormapTexture && (this._colormapTexture.dispose(), this._colormapTexture = null), this._colormapTexture = m(t, s), void (this._colormap = s)) : void 0 : (this._colormapTexture = m(t, s), void (this._colormap = s)) : (this._colormapTexture && (this._colormapTexture.dispose(), this._colormapTexture = null), void (this._colormap = null));\n    }\n  }]);\n\n  return x;\n}(l);\n\nexport { x as RasterBitmap };","import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { RasterBitmap as t } from \"./RasterBitmap.js\";\nimport { TiledDisplayObject as s } from \"./webgl/TiledDisplayObject.js\";\n\nvar e = /*#__PURE__*/function (_s) {\n  _inherits(e, _s);\n\n  var _super = _createSuper(e);\n\n  function e(s, _e, i) {\n    var _this;\n\n    var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    _classCallCheck(this, e);\n\n    _this = _super.call(this, s, _e, i), _this.bitmap = new t(a, null, null), _this.bitmap.coordScale = i, _this.bitmap.once(\"isReady\", function () {\n      return _this.ready();\n    });\n    return _this;\n  }\n\n  _createClass(e, [{\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(e.prototype), \"destroy\", this).call(this), this.bitmap.destroy(), this.bitmap = null, this.stage = null;\n    }\n  }, {\n    key: \"stencilRef\",\n    get: function get() {\n      return this.bitmap.stencilRef;\n    },\n    set: function set(t) {\n      this.bitmap.stencilRef = t;\n    }\n  }, {\n    key: \"getMemoryUsage\",\n    value: function getMemoryUsage() {\n      return this.bitmap.getMemoryUsage();\n    }\n  }, {\n    key: \"setTransform\",\n    value: function setTransform(t, s) {\n      _get(_getPrototypeOf(e.prototype), \"setTransform\", this).call(this, t, s), this.bitmap.transforms.dvs = this.transforms.dvs;\n    }\n  }, {\n    key: \"onAttach\",\n    value: function onAttach() {\n      this.bitmap.stage = this.stage;\n    }\n  }, {\n    key: \"onDetach\",\n    value: function onDetach() {\n      this.bitmap.stage = null;\n    }\n  }]);\n\n  return e;\n}(s);\n\nexport { e as RasterTile };","import _toConsumableArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { create as e } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { getWorldWidth as s } from \"../viewpointUtils.js\";\nimport { brushes as t } from \"./brushes.js\";\nimport { RasterTile as i } from \"./RasterTile.js\";\nimport { WGLDrawPhase as r } from \"./webgl/enums.js\";\nimport o from \"./webgl/TileContainer.js\";\n\nvar n = /*#__PURE__*/function (_o) {\n  _inherits(n, _o);\n\n  var _super = _createSuper(n);\n\n  function n() {\n    var _this;\n\n    _classCallCheck(this, n);\n\n    _this = _super.apply(this, arguments), _this.isCustomTilingScheme = !1;\n    return _this;\n  }\n\n  _createClass(n, [{\n    key: \"createTile\",\n    value: function createTile(e) {\n      var s = this._getTileBounds(e);\n\n      return new i(e, s, this._tileInfoView.tileInfo.size);\n    }\n  }, {\n    key: \"destroyTile\",\n    value: function destroyTile() {}\n  }, {\n    key: \"prepareRenderPasses\",\n    value: function prepareRenderPasses(e) {\n      var _this2 = this;\n\n      var s = e.registerRenderPass({\n        name: \"bitmap (tile)\",\n        brushes: [t.raster],\n        target: function target() {\n          return _this2.children.map(function (e) {\n            return e.bitmap;\n          });\n        },\n        drawPhase: r.MAP\n      });\n      return [].concat(_toConsumableArray(_get(_getPrototypeOf(n.prototype), \"prepareRenderPasses\", this).call(this, e)), [s]);\n    }\n  }, {\n    key: \"doRender\",\n    value: function doRender(e) {\n      this.visible && e.drawPhase === r.MAP && _get(_getPrototypeOf(n.prototype), \"doRender\", this).call(this, e);\n    }\n  }, {\n    key: \"_getTileBounds\",\n    value: function _getTileBounds(t) {\n      var i = this._tileInfoView.getTileBounds(e(), t);\n\n      if (this.isCustomTilingScheme && t.world) {\n        var _e = this._tileInfoView.tileInfo,\n            _r = s(_e.spatialReference);\n\n        if (_r) {\n          var _e$lodAt = _e.lodAt(t.level),\n              _s = _e$lodAt.resolution,\n              _o2 = _r / _s % _e.size[0],\n              _n2 = _o2 ? (_e.size[0] - _o2) * _s : 0;\n\n          i[0] -= _n2 * t.world, i[2] -= _n2 * t.world;\n        }\n      }\n\n      return i;\n    }\n  }]);\n\n  return n;\n}(o);\n\nexport { n as RasterTileContainer };","import _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../Graphic.js\";\nimport r from \"../../core/Error.js\";\nimport { isSome as i } from \"../../core/maybe.js\";\nimport { property as o } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/Logger.js\";\nimport { subclass as s } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { getDefaultDatumTransformationForDataset as a, projectExtent as n } from \"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";\nimport { getFetchPopupTemplate as l } from \"./support/popupUtils.js\";\n\nvar p = function p(_p2) {\n  var u = /*#__PURE__*/function (_p) {\n    _inherits(u, _p);\n\n    var _super = _createSuper(u);\n\n    function u() {\n      var _this;\n\n      _classCallCheck(this, u);\n\n      _this = _super.apply(this, arguments), _this._rasterFieldPrefix = \"Raster.\", _this.layer = null, _this.view = null, _this.fullExtent = null, _this.tileInfo = null, _this.datumTransformation = null;\n      return _this;\n    }\n\n    _createClass(u, [{\n      key: \"hasTilingEffects\",\n      get: function get() {\n        return this.layer.renderer && \"dynamicRangeAdjustment\" in this.layer.renderer && this.layer.renderer.dynamicRangeAdjustment;\n      }\n    }, {\n      key: \"fetchPopupFeatures\",\n      value: function () {\n        var _fetchPopupFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e, o) {\n          var s, a, n, p, _yield$s$identify, _u, f, m, c, _e, _r, _i, _t, _r2, _t2, _i2, _o;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  s = this.layer;\n\n                  if (e) {\n                    _context.next = 3;\n                    break;\n                  }\n\n                  return _context.abrupt(\"return\", Promise.reject(new r(\"imageryTileLayerView:fetchPopupFeatures\", \"Nothing to fetch without area\", {\n                    layer: s\n                  })));\n\n                case 3:\n                  a = s.popupEnabled, n = l(s, o);\n\n                  if (!(!a || !i(n))) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  throw new r(\"imageryTileLayerView:fetchPopupFeatures\", \"Missing required popupTemplate or popupEnabled\", {\n                    popupEnabled: a,\n                    popupTemplate: n\n                  });\n\n                case 6:\n                  p = [];\n                  _context.next = 9;\n                  return s.identify(e);\n\n                case 9:\n                  _yield$s$identify = _context.sent;\n                  _u = _yield$s$identify.value;\n                  f = \"\";\n\n                  if (_u && _u.length) {\n                    f = \"imagery-tile\" === s.type && s.hasStandardTime() && null != _u[0] ? _u.map(function (e) {\n                      return s.getStandardTimeValue(e);\n                    }).join(\", \") : _u.join(\", \");\n                    _e = {\n                      ObjectId: 0\n                    }, _r = \"Raster.ServicePixelValue\";\n                    _e[_r] = this._formatAttributeValue(f, _r);\n                    _i = null == (m = s.rasterInfo) || null == (c = m.attributeTable) ? void 0 : c.features;\n\n                    if (_i && _i.length > 0) {\n                      _t = _i.filter(function (e) {\n                        var t = e.attributes.value || e.attributes.Value || e.attributes.VALUE;\n                        return String(t) === f;\n                      });\n\n                      if (_t.length > 0) {\n                        _r2 = _t[0];\n                        if (_r2) for (_t2 in _r2.attributes) {\n                          if (_r2.attributes.hasOwnProperty(_t2)) {\n                            _i2 = this._rasterFieldPrefix + _t2;\n                            _e[_i2] = this._formatAttributeValue(_r2.attributes[_t2], _i2);\n                          }\n                        }\n                      }\n                    }\n\n                    _o = new t(this.fullExtent.clone(), null, _e);\n                    _o.layer = s, _o.sourceLayer = _o.layer, p.push(_o);\n                  }\n\n                  return _context.abrupt(\"return\", p);\n\n                case 14:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function fetchPopupFeatures(_x, _x2) {\n          return _fetchPopupFeatures.apply(this, arguments);\n        }\n\n        return fetchPopupFeatures;\n      }()\n    }, {\n      key: \"updateFullExtent\",\n      value: function updateFullExtent() {\n        var e = this.layer.tileInfo;\n        var t;\n        e && e.spatialReference || (t = new r(\"layerview:tiling-information-missing\", \"The layer doesn't provide tiling information\", {\n          layer: this.layer\n        }));\n        var i = a(this.layer.fullExtent, this.view.spatialReference, !1),\n            o = n(this.layer.fullExtent, this.view.spatialReference, i);\n        return null == o && (t = new r(\"layerview:projection-not-supported\", \"The layer extent cannot be projected to the view's spatial reference\", {\n          layer: this.layer\n        })), this._set(\"fullExtent\", o), this.datumTransformation || (this.datumTransformation = a(this.layer.fullExtent, this.view.spatialReference, !0)), t ? Promise.reject(t) : Promise.resolve();\n      }\n    }, {\n      key: \"_formatAttributeValue\",\n      value: function _formatAttributeValue(e, t) {\n        if (\"string\" == typeof e) {\n          var _r3 = this.layer.popupTemplate && this.layer.popupTemplate.fieldInfos,\n              _i3 = this._getFieldInfo(_r3, t),\n              _o2 = _i3 && _i3.format;\n\n          if (_o2) {\n            var _t3, _r4;\n\n            return e.trim().indexOf(\",\") > -1 ? (_t3 = \",\", _r4 = _t3 + \" \", this._formatDelimitedString(e, _t3, _r4, _o2)) : e.trim().indexOf(\" \") > -1 ? (_t3 = _r4 = \" \", this._formatDelimitedString(e, _t3, _r4, _o2)) : this._formatNumberFromString(e, _o2);\n          }\n        }\n\n        return e;\n      }\n    }, {\n      key: \"_getFieldInfo\",\n      value: function _getFieldInfo(e, t) {\n        if (!e || !e.length || !t) return;\n        var r = t.toLowerCase();\n        var i;\n        return e.some(function (e) {\n          return !(!e.fieldName || e.fieldName.toLowerCase() !== r && e.fieldName.toLowerCase() !== r.replace(/ /g, \"_\")) && (i = e, !0);\n        }), i;\n      }\n    }, {\n      key: \"_formatDelimitedString\",\n      value: function _formatDelimitedString(e, t, r, i) {\n        var _this2 = this;\n\n        return e && t && r && i ? e.trim().split(t).map(function (e) {\n          return _this2._formatNumberFromString(e, i);\n        }).join(r) : e;\n      }\n    }, {\n      key: \"_formatNumberFromString\",\n      value: function _formatNumberFromString(e, t) {\n        if (!e || !t) return e;\n        var r = Number(e);\n        return isNaN(r) ? e : t.format(r);\n      }\n    }]);\n\n    return u;\n  }(_p2);\n\n  return e([o()], u.prototype, \"layer\", void 0), e([o()], u.prototype, \"view\", void 0), e([o()], u.prototype, \"fullExtent\", void 0), e([o()], u.prototype, \"tileInfo\", void 0), e([o({\n    readOnly: !0\n  })], u.prototype, \"hasTilingEffects\", null), u = e([s(\"esri.views.layers.ImageryTileLayerView\")], u), u;\n};\n\nexport default p;\nexport { p as ImageryTileLayerView };","import _slicedToArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport t from \"../../../Graphic.js\";\nimport i from \"../../../core/Logger.js\";\nimport { isNone as s, unwrap as r } from \"../../../core/maybe.js\";\nimport { debounce as a, isAbortError as o, createAbortController as l, eachAlways as n } from \"../../../core/promiseUtils.js\";\nimport { createScreenPoint as h } from \"../../../core/screenUtils.js\";\nimport { watch as c } from \"../../../core/watchUtils.js\";\nimport { property as u } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as m } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport p from \"../../../layers/support/PixelBlock.js\";\nimport d from \"../../../layers/support/TileInfo.js\";\nimport { update as y, unregister as _, register as g, getRasterId as b } from \"../../../layers/support/rasterDatasets/RawBlockCache.js\";\nimport { extractBands as f } from \"../../../layers/support/rasterFunctions/pixelUtils.js\";\nimport { computeProjectedScales as w } from \"../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";\nimport { RasterTileContainer as I } from \"../engine/RasterTileContainer.js\";\nimport { LayerView2DMixin as P } from \"./LayerView2D.js\";\nimport R from \"../tiling/TileInfoView.js\";\nimport C from \"../tiling/TileQueue.js\";\nimport S from \"../tiling/TileStrategy.js\";\nimport { ImageryTileLayerView as U } from \"../../layers/ImageryTileLayerView.js\";\nimport v from \"../../layers/LayerView.js\";\nimport { RefreshableLayerView as T } from \"../../layers/RefreshableLayerView.js\";\nimport { createQueryGeometry as x } from \"../../support/drapedUtils.js\";\nimport z from \"../../webgl/capabilities.js\";\nimport k from \"../../../geometry/Extent.js\";\nimport j from \"../../../geometry/Point.js\";\nvar V = i.getLogger(\"esri.views.2d.layers.ImageryTileLayerView2D\"),\n    L = [0, 0];\n\nvar q = /*#__PURE__*/function (_U) {\n  _inherits(q, _U);\n\n  var _super = _createSuper(q);\n\n  function q() {\n    var _this;\n\n    _classCallCheck(this, q);\n\n    _this = _super.apply(this, arguments), _this._tileStrategy = null, _this._tileInfoView = null, _this._fetchQueue = null, _this._blockCacheRegistryUrl = null, _this._blockCacheRegistryId = null, _this._bitmapView = null, _this._emptyTilePixelBlock = null, _this._srcResolutions = null, _this._previousLOD = null, _this._needBlockCacheUpdate = !1, _this._globalSymbolizerParams = null, _this._symbolizerParams = null, _this._abortController = null, _this._globalUpdateRequested = !1, _this._isCustomTilingScheme = !1, _this.useWebGLForProcessing = !0, _this._redrawOrRefreshDebounced = a(function (e, t) {\n      return e ? (_this._set(\"refreshTimestamp\", Date.now()), _this.doRefresh()) : _this._redrawImage(t);\n    });\n    return _this;\n  }\n\n  _createClass(q, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var e = this.updateFullExtent();\n      this.addResolvingPromise(e);\n    }\n  }, {\n    key: \"useProgressiveUpdate\",\n    get: function get() {\n      return null == this._get(\"useProgressiveUpdate\") || this._get(\"useProgressiveUpdate\");\n    },\n    set: function set(e) {\n      var _this2 = this;\n\n      if (this._tileStrategy && this.useProgressiveUpdate !== e) {\n        this._tileStrategy.destroy(), this._bitmapView.removeAllChildren();\n\n        var _t = this._getCacheSize(e);\n\n        this._tileStrategy = new S({\n          cachePolicy: \"purge\",\n          acquireTile: function acquireTile(e) {\n            return _this2.acquireTile(e);\n          },\n          releaseTile: function releaseTile(e) {\n            return _this2.releaseTile(e);\n          },\n          cacheSize: _t,\n          tileInfoView: this._tileInfoView\n        }), this._set(\"useProgressiveUpdate\", e), this.requestUpdate();\n      }\n    }\n  }, {\n    key: \"hitTest\",\n    value: function hitTest(e, i) {\n      if (this.suspended) return Promise.resolve(null);\n      var s = this.view.toMap(h(e, i));\n      return Promise.resolve(new t({\n        attributes: {},\n        geometry: s\n      }));\n    }\n  }, {\n    key: \"update\",\n    value: function update(e) {\n      this._fetchQueue.pause(), this._fetchQueue.state = e.state, this._tileStrategy.update(e), this._fetchQueue.resume();\n\n      var _e$state = e.state,\n          t = _e$state.extent,\n          i = _e$state.resolution,\n          s = _e$state.scale,\n          r = this._tileInfoView.getClosestInfoForScale(s);\n\n      if (this.layer.raster) {\n        var a;\n\n        if (!this.useProgressiveUpdate || this._needBlockCacheUpdate) {\n          var _e = this._srcResolutions[r.level],\n              _s = t.toJSON ? t : k.fromJSON(t);\n\n          y(this._blockCacheRegistryUrl, this._blockCacheRegistryId, _s, i, _e, this.layer.raster.ioConfig.sampling);\n        }\n\n        this._needBlockCacheUpdate = !1, (null == (a = this._previousLOD) ? void 0 : a.level) !== r.level && (this._previousLOD = r, null != this._symbolizerParams && this._updateSymbolizerParams(), this._tileStrategy.updateCacheSize(0));\n      }\n\n      this.notifyChange(\"updating\");\n    }\n  }, {\n    key: \"attach\",\n    value: function attach() {\n      var _this3 = this;\n\n      this.layer.increaseRasterJobHandlerUsage(), z().supportsTextureFloat || (this.useWebGLForProcessing = !1), this.layer.raster && (this.layer.raster.ioConfig.allowPartialFill = !0), this._initializeTileInfo(), this._tileInfoView = new R(this.tileInfo, this.fullExtent);\n\n      var e = this._computeFetchConcurrency();\n\n      this._fetchQueue = new C({\n        tileInfoView: this._tileInfoView,\n        concurrency: e,\n        process: function process(e, t) {\n          return _this3.fetchTile(e, t);\n        }\n      });\n\n      var t = this._getCacheSize(this.useProgressiveUpdate);\n\n      this._tileStrategy = new S({\n        cachePolicy: \"purge\",\n        acquireTile: function acquireTile(e) {\n          return _this3.acquireTile(e);\n        },\n        releaseTile: function releaseTile(e) {\n          return _this3.releaseTile(e);\n        },\n        cacheSize: t,\n        tileInfoView: this._tileInfoView\n      }), this._bitmapView = new I(this._tileInfoView), this._bitmapView.isCustomTilingScheme = this._isCustomTilingScheme, this.container.addChild(this._bitmapView), this.handles.add([c(this.layer, [\"bandIds\", \"renderer\", \"interpolation\", \"multidimensionalDefinition\"], function (e, t, i) {\n        var s = \"multidimensionalDefinition\" === i,\n            r = \"interpolation\" === i && (\"majority\" === e || \"majority\" === t) && _this3._canUseMajorityInterpolationOnDataSource(),\n            a = s || r;\n\n        _this3._redrawOrRefreshDebounced(a).catch(function (e) {\n          o(e) || V.error(e);\n        });\n      })], \"attach\"), this._updateBlockCacheRegistry();\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      this.handles.remove(\"attach\"), this.layer.decreaseRasterJobHandlerUsage(), this._tileStrategy.destroy(), this._fetchQueue.clear(), this.container.removeAllChildren(), this._fetchQueue = this._tileStrategy = this._tileInfoView = null, _(this._blockCacheRegistryUrl, this._blockCacheRegistryId);\n    }\n  }, {\n    key: \"moveStart\",\n    value: function moveStart() {\n      this.requestUpdate();\n    }\n  }, {\n    key: \"viewChange\",\n    value: function viewChange() {\n      this.requestUpdate();\n    }\n  }, {\n    key: \"moveEnd\",\n    value: function moveEnd() {\n      var _this4 = this;\n\n      !this.hasTilingEffects && this.useProgressiveUpdate || (this._abortController && this._abortController.abort(), this._abortController = l(), 0 === this._fetchQueue.length && this._redrawImage(this._abortController.signal).then(function () {\n        _this4._globalUpdateRequested = !1, _this4.requestUpdate();\n      }));\n\n      var e = this._getCacheSize(this.useProgressiveUpdate);\n\n      this._tileStrategy.updateCacheSize(e), this.requestUpdate();\n    }\n  }, {\n    key: \"createFetchPopupFeaturesQueryGeometry\",\n    value: function createFetchPopupFeaturesQueryGeometry(e, t) {\n      return x(e, t, this.view);\n    }\n  }, {\n    key: \"doRefresh\",\n    value: function () {\n      var _doRefresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this5 = this;\n\n        var e;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.suspended) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                this.layer.updateRenderer(), this._updateSymbolizerParams(), this._updateBlockCacheRegistry(!0), this._fetchQueue.reset();\n                e = [];\n\n                this._tileStrategy.tiles.forEach(function (t) {\n                  return e.push(_this5._enqueueTileFetch(t));\n                });\n\n                _context.next = 7;\n                return n(e);\n\n              case 7:\n                this.notifyChange(\"updating\");\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function doRefresh() {\n        return _doRefresh.apply(this, arguments);\n      }\n\n      return doRefresh;\n    }()\n  }, {\n    key: \"isUpdating\",\n    value: function isUpdating() {\n      return this._fetchQueue.length > 0 || this._globalUpdateRequested;\n    }\n  }, {\n    key: \"acquireTile\",\n    value: function acquireTile(e) {\n      var _this$_tileInfoView$g, _this$_tileInfoView$g2, _this$_tileInfoView$t, _this$_tileInfoView$t2;\n\n      var t = this._bitmapView.createTile(e),\n          i = t.bitmap;\n\n      return (_this$_tileInfoView$g = this._tileInfoView.getTileCoords(L, t.key), _this$_tileInfoView$g2 = _slicedToArray(_this$_tileInfoView$g, 2), i.x = _this$_tileInfoView$g2[0], i.y = _this$_tileInfoView$g2[1], _this$_tileInfoView$g), i.resolution = this._tileInfoView.getTileResolution(t.key), (_this$_tileInfoView$t = this._tileInfoView.tileInfo.size, _this$_tileInfoView$t2 = _slicedToArray(_this$_tileInfoView$t, 2), i.width = _this$_tileInfoView$t2[0], i.height = _this$_tileInfoView$t2[1], _this$_tileInfoView$t), this._enqueueTileFetch(t), this.requestUpdate(), this._needBlockCacheUpdate = !0, this._globalUpdateRequested = this.hasTilingEffects || !this.useProgressiveUpdate, t;\n    }\n  }, {\n    key: \"releaseTile\",\n    value: function releaseTile(e) {\n      var _this6 = this;\n\n      this._fetchQueue.abort(e.key.id), this._bitmapView.removeChild(e), e.once(\"detach\", function () {\n        e.destroy(), _this6.requestUpdate();\n      }), this.requestUpdate();\n    }\n  }, {\n    key: \"fetchTile\",\n    value: function fetchTile(e, t) {\n      var i = !s(t) && t.signal,\n          a = this._canUseWebGLForProcessing(),\n          o = {\n        tileInfo: this.tileInfo,\n        signal: r(i),\n        registryId: this._blockCacheRegistryId,\n        requestRawData: a,\n        srcResolution: this._srcResolutions[e.level],\n        datumTransformation: this.datumTransformation,\n        interpolation: a ? \"nearest\" : this.layer.interpolation\n      };\n\n      return this.layer.fetchTile(e.level, e.row, e.col, o);\n    }\n  }, {\n    key: \"_canUseWebGLForProcessing\",\n    value: function _canUseWebGLForProcessing() {\n      return this.useWebGLForProcessing && this.layer.symbolizer.canRenderInWebGL && !(\"majority\" === this.layer.interpolation && this._canUseMajorityInterpolationOnDataSource());\n    }\n  }, {\n    key: \"_getCacheSize\",\n    value: function _getCacheSize(e) {\n      return e ? 40 : 0;\n    }\n  }, {\n    key: \"_initializeTileInfo\",\n    value: function _initializeTileInfo() {\n      var e = this.view.spatialReference,\n          t = new j({\n        x: this.fullExtent.xmin,\n        y: this.fullExtent.ymax,\n        spatialReference: e\n      }),\n          _w = w(this.layer.rasterInfo, e),\n          i = _w.scales,\n          s = _w.srcResolutions,\n          r = _w.isCustomTilingScheme,\n          a = d.create({\n        spatialReference: e,\n        size: 512,\n        scales: i\n      });\n\n      (0 === a.origin.x || a.origin.x > t.x) && (a.origin = t), this._isCustomTilingScheme = r, this._set(\"tileInfo\", a), this._srcResolutions = null != s ? s : [];\n    }\n  }, {\n    key: \"_computeFetchConcurrency\",\n    value: function _computeFetchConcurrency() {\n      var e = this.layer.rasterInfo.storageInfo.blockBoundary,\n          t = e[e.length - 1];\n      return (t.maxCol - t.minCol + 1) * (t.maxRow - t.minRow + 1) > 64 ? 2 : 10;\n    }\n  }, {\n    key: \"_enqueueTileFetch\",\n    value: function () {\n      var _enqueueTileFetch2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e, t) {\n        var _this7 = this;\n\n        var _t2, _s2, _r, _a, _i, _t3, _t4;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this._fetchQueue.has(e.key.id)) {\n                  _context2.next = 41;\n                  break;\n                }\n\n                _context2.prev = 1;\n                _context2.next = 4;\n                return this._fetchQueue.push(e.key);\n\n              case 4:\n                _t2 = _context2.sent;\n                _s2 = this.layer.bandIds;\n                _r = !this.useProgressiveUpdate || this.hasTilingEffects && !this._globalSymbolizerParams;\n\n                if (!(this._globalUpdateRequested && !this.moving && 0 === this._fetchQueue.length)) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                _r = !1;\n                _context2.prev = 9;\n                _context2.next = 12;\n                return this._redrawImage(this._abortController && this._abortController.signal);\n\n              case 12:\n                _context2.next = 17;\n                break;\n\n              case 14:\n                _context2.prev = 14;\n                _context2.t0 = _context2[\"catch\"](9);\n                o(_context2.t0) && V.error(_context2.t0);\n\n              case 17:\n                this._globalUpdateRequested = !1;\n\n              case 18:\n                _a = this._canUseWebGLForProcessing();\n\n                if (!(_a && !this.hasTilingEffects && null == this._symbolizerParams && this._updateSymbolizerParams(), _t2 && _t2.pixelBlock)) {\n                  _context2.next = 32;\n                  break;\n                }\n\n                _i = {\n                  extent: _t2.extent,\n                  pixelBlock: _t2.pixelBlock\n                };\n\n                if (!(e.bitmap.rawPixelData = _i, _a)) {\n                  _context2.next = 25;\n                  break;\n                }\n\n                e.bitmap.source = _t2.pixelBlock, e.bitmap.isRendereredSource = !1;\n                _context2.next = 29;\n                break;\n\n              case 25:\n                _context2.next = 27;\n                return this.layer.applyRenderer(_i, this.hasTilingEffects && this._globalSymbolizerParams && \"stretch\" === this._globalSymbolizerParams.type ? this._globalSymbolizerParams : null);\n\n              case 27:\n                _t3 = _context2.sent;\n                e.bitmap.source = _t3, e.bitmap.isRendereredSource = !0;\n\n              case 29:\n                e.bitmap.symbolizerParameters = _a ? this._globalSymbolizerParams || this._symbolizerParams : null, _a ? e.bitmap.transformGrid || (e.bitmap.transformGrid = _t2.transformGrid) : e.bitmap.transformGrid = null;\n                _context2.next = 34;\n                break;\n\n              case 32:\n                _t4 = this._createEmptyTilePixelBlock();\n                e.bitmap.source = _t4, e.bitmap.symbolizerParameters = _a ? this._symbolizerParams : null, e.bitmap.transformGrid = null;\n\n              case 34:\n                e.bitmap.bandIds = _s2, e.bitmap.width = this._tileInfoView.tileInfo.size[0], e.bitmap.height = this._tileInfoView.tileInfo.size[1], e.bitmap.interpolation = this._getLayerInterpolation(), e.bitmap.suspended = _r, e.bitmap.invalidateTexture(), e.once(\"attach\", function () {\n                  return _this7.requestUpdate();\n                }), this._bitmapView.addChild(e);\n                _context2.next = 40;\n                break;\n\n              case 37:\n                _context2.prev = 37;\n                _context2.t1 = _context2[\"catch\"](1);\n                o(_context2.t1) || V.error(_context2.t1);\n\n              case 40:\n                this.requestUpdate();\n\n              case 41:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 37], [9, 14]]);\n      }));\n\n      function _enqueueTileFetch(_x, _x2) {\n        return _enqueueTileFetch2.apply(this, arguments);\n      }\n\n      return _enqueueTileFetch;\n    }()\n  }, {\n    key: \"_redrawImage\",\n    value: function () {\n      var _redrawImage2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n        var _this8 = this;\n\n        var t, i;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.layer.updateRenderer();\n\n                if (!this.hasTilingEffects) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                _context4.next = 4;\n                return this._updateGlobalSymbolizerParams(e);\n\n              case 4:\n                _context4.next = 7;\n                break;\n\n              case 6:\n                this._updateSymbolizerParams(), this._globalSymbolizerParams = null;\n\n              case 7:\n                t = this.layer.bandIds, i = this._bitmapView.children.map( /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n                    var i;\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            i = _this8._canUseWebGLForProcessing();\n\n                            if (!(!i && e.bitmap.rawPixelData)) {\n                              _context3.next = 8;\n                              break;\n                            }\n\n                            _context3.next = 4;\n                            return _this8.layer.applyRenderer(e.bitmap.rawPixelData, _this8.hasTilingEffects && _this8._globalSymbolizerParams && \"stretch\" === _this8._globalSymbolizerParams.type ? _this8._globalSymbolizerParams : null);\n\n                          case 4:\n                            e.bitmap.source = _context3.sent;\n                            e.bitmap.isRendereredSource = !0;\n                            _context3.next = 9;\n                            break;\n\n                          case 8:\n                            e.bitmap.isRendereredSource && e.bitmap.rawPixelData && (e.bitmap.source = e.bitmap.rawPixelData.pixelBlock), e.bitmap.isRendereredSource = !1;\n\n                          case 9:\n                            e.bitmap.symbolizerParameters = i ? _this8._globalSymbolizerParams || _this8._symbolizerParams : null;\n                            e.bitmap.bandIds = t;\n                            e.bitmap.interpolation = _this8._getLayerInterpolation();\n                            e.bitmap.suspended = !1;\n\n                          case 13:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  }));\n\n                  return function (_x4) {\n                    return _ref.apply(this, arguments);\n                  };\n                }());\n                _context4.next = 10;\n                return n(i);\n\n              case 10:\n                this.container.requestRender();\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function _redrawImage(_x3) {\n        return _redrawImage2.apply(this, arguments);\n      }\n\n      return _redrawImage;\n    }()\n  }, {\n    key: \"_createEmptyTilePixelBlock\",\n    value: function _createEmptyTilePixelBlock() {\n      if (!this._emptyTilePixelBlock) {\n        var _e2 = this._tileInfoView.tileInfo.size[0],\n            _t5 = this._tileInfoView.tileInfo.size[1];\n        this._emptyTilePixelBlock = new p({\n          width: _e2,\n          height: _t5,\n          pixels: [new Uint8Array(_e2 * _t5)],\n          mask: new Uint8Array(_e2 * _t5),\n          pixelType: \"u8\"\n        });\n      }\n\n      return this._emptyTilePixelBlock;\n    }\n  }, {\n    key: \"_updateGlobalSymbolizerParams\",\n    value: function () {\n      var _updateGlobalSymbolizerParams2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e) {\n        var t, i, s;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                t = {\n                  srcResolution: this._srcResolutions[this._previousLOD.level],\n                  registryId: this._blockCacheRegistryId,\n                  signal: e\n                };\n                _context5.next = 3;\n                return this.layer.fetchPixels(this.view.extent, this.view.width, this.view.height, t);\n\n              case 3:\n                i = _context5.sent;\n\n                if (!(!i || !i.pixelBlock)) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 6:\n                s = this.layer.symbolizer.generateWebGLParameters({\n                  pixelBlock: f(i.pixelBlock, this.layer.bandIds),\n                  isGCS: this.view.spatialReference.isGeographic,\n                  resolution: {\n                    x: this._previousLOD.resolution,\n                    y: this._previousLOD.resolution\n                  },\n                  bandIds: this.layer.bandIds\n                });\n                !this._canUseWebGLForProcessing() && s && \"stretch\" === s.type && this.layer.renderer && \"raster-stretch\" === this.layer.renderer.type && (s.factor = s.factor.map(function (e) {\n                  return 255 * e;\n                }), s.outMin = Math.round(255 * s.outMin), s.outMax = Math.round(255 * s.outMax)), this._globalSymbolizerParams = s;\n\n              case 8:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function _updateGlobalSymbolizerParams(_x5) {\n        return _updateGlobalSymbolizerParams2.apply(this, arguments);\n      }\n\n      return _updateGlobalSymbolizerParams;\n    }()\n  }, {\n    key: \"_updateSymbolizerParams\",\n    value: function _updateSymbolizerParams() {\n      this._symbolizerParams = this.layer.symbolizer.generateWebGLParameters({\n        pixelBlock: null,\n        isGCS: this.view.spatialReference.isGeographic,\n        resolution: {\n          x: this._previousLOD.resolution,\n          y: this._previousLOD.resolution\n        },\n        bandIds: this.layer.bandIds\n      });\n    }\n  }, {\n    key: \"_updateBlockCacheRegistry\",\n    value: function _updateBlockCacheRegistry() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n      var _this$layer = this.layer,\n          t = _this$layer.url,\n          i = _this$layer.rasterInfo,\n          s = _this$layer.multidimensionalDefinition,\n          r = _this$layer.raster,\n          a = null != i && i.multidimensionalInfo ? r.getSliceIndex(s) : null,\n          o = b(t, a);\n\n      if (o !== this._blockCacheRegistryUrl) {\n        if (null != this._blockCacheRegistryUrl && _(this._blockCacheRegistryUrl, this._blockCacheRegistryId), this._blockCacheRegistryId = g(o, this.layer.raster.rasterInfo), e) {\n          var _e3 = this._tileInfoView.getClosestInfoForScale(this.view.scale),\n              _t6 = this._srcResolutions[_e3.level];\n\n          y(o, this._blockCacheRegistryId, this.view.extent, this.view.resolution, _t6, this.layer.raster.ioConfig.sampling);\n        }\n\n        this._blockCacheRegistryUrl = o;\n      }\n    }\n  }, {\n    key: \"_canUseMajorityInterpolationOnDataSource\",\n    value: function _canUseMajorityInterpolationOnDataSource() {\n      var _this$layer$rasterInf = this.layer.rasterInfo,\n          e = _this$layer$rasterInf.bandCount,\n          t = _this$layer$rasterInf.attributeTable,\n          i = _this$layer$rasterInf.colormap,\n          s = _this$layer$rasterInf.pixelType;\n      return 1 === e && (null != t || null != i || \"u8\" === s || \"s8\" === s);\n    }\n  }, {\n    key: \"_getLayerInterpolation\",\n    value: function _getLayerInterpolation() {\n      var e = this.layer.renderer.type;\n      if (\"raster-colormap\" === e || \"unique-value\" === e || \"class-breaks\" === e) return \"nearest\";\n      var t = this.layer.renderer;\n      return \"raster-stretch\" === t.type && null != t.colorRamp ? \"nearest\" : this.layer.interpolation;\n    }\n  }]);\n\n  return q;\n}(U(T(P(v))));\n\ne([u()], q.prototype, \"useProgressiveUpdate\", null), q = e([m(\"esri.views.2d.layers.ImageryTileLayerView2D\")], q);\nvar D = q;\nexport default D;"],"sourceRoot":""}