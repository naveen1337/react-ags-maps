{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/layers/BaseDynamicLayerView2D.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/engine/Bitmap.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js"],"names":["_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","h","getLogger","c","_m","_doRefresh","_super","key","value","t","strategy","update","catch","error","notifyChange","_bitmapContainer","container","addChild","fetchSource","fetchBitmapData","bind","requestUpdate","destroy","removeChild","removeAllChildren","r","layer","fetchImage","timestamp","refreshTimestamp","mark","_callee","wrap","_context","prev","next","stop","updating","updateRequested","d","x","i","s","target","pixelFormat","internalFormat","dataType","wrapMode","width","height","g","_u","_this","length","undefined","requestRenderOnSourceChangedEnabled","_textureInvalidated","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","y","transforms","dvs","blendFunction","source","requestRender","_texture","dispose","get","sourceWidth","sourceHeight","set","invalidateTexture","HTMLImageElement","naturalHeight","naturalWidth","updateTexture","context","o","_h$toScreenNoRotation","toScreenNoRotation","_h$toScreenNoRotation2","u","a","l","Math","PI","displayViewMat3","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","bindTexture","stage","resize","_t","getRenderedRasterPixels","setData","renderedRasterPixels","document","createElement","render","getContext","ready","_e","pixelBlock","extent","originalPixelBlock","_e2","filter","getAsRGBA","createImageData","data","putImageData","_e3","Uint8Array","buffer"],"mappings":"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","file":"62-51bd041e3682d9ea44da.js","sourcesContent":["import _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport e from \"../../../core/Logger.js\";\nimport { isAbortError as r } from \"../../../core/promiseUtils.js\";\nimport { property as s } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as i } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { BitmapContainer as a } from \"../engine/BitmapContainer.js\";\nimport { LayerView2DMixin as o } from \"./LayerView2D.js\";\nimport p from \"./support/ExportStrategy.js\";\nimport n from \"../../layers/LayerView.js\";\nimport { RefreshableLayerView as m } from \"../../layers/RefreshableLayerView.js\";\nvar h = e.getLogger(\"esri.views.2d.layers.BaseDynamicLayerView2D\");\n\nvar c = /*#__PURE__*/function (_m) {\n  _inherits(c, _m);\n\n  var _super = _createSuper(c);\n\n  function c() {\n    _classCallCheck(this, c);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(c, [{\n    key: \"hitTest\",\n    value: function hitTest() {\n      return null;\n    }\n  }, {\n    key: \"update\",\n    value: function update(t) {\n      this.strategy.update(t).catch(function (t) {\n        r(t) || h.error(t);\n      }), this.notifyChange(\"updating\");\n    }\n  }, {\n    key: \"attach\",\n    value: function attach() {\n      this._bitmapContainer = new a(), this.container.addChild(this._bitmapContainer), this.strategy = new p({\n        container: this._bitmapContainer,\n        fetchSource: this.fetchBitmapData.bind(this),\n        requestUpdate: this.requestUpdate.bind(this)\n      });\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      this.strategy.destroy(), this.strategy = null, this.container.removeChild(this._bitmapContainer), this._bitmapContainer.removeAllChildren();\n    }\n  }, {\n    key: \"moveStart\",\n    value: function moveStart() {}\n  }, {\n    key: \"viewChange\",\n    value: function viewChange() {}\n  }, {\n    key: \"moveEnd\",\n    value: function moveEnd() {\n      this.requestUpdate();\n    }\n  }, {\n    key: \"fetchBitmapData\",\n    value: function fetchBitmapData(t, e, r) {\n      return this.layer.fetchImage(t, e, r, {\n        timestamp: this.refreshTimestamp\n      });\n    }\n  }, {\n    key: \"doRefresh\",\n    value: function () {\n      var _doRefresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.requestUpdate();\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function doRefresh() {\n        return _doRefresh.apply(this, arguments);\n      }\n\n      return doRefresh;\n    }()\n  }, {\n    key: \"isUpdating\",\n    value: function isUpdating() {\n      return this.strategy.updating || this.updateRequested;\n    }\n  }]);\n\n  return c;\n}(m(o(n)));\n\nt([s()], c.prototype, \"strategy\", void 0), t([s()], c.prototype, \"updating\", void 0), c = t([i(\"esri.views.2d.layers.BaseDynamicLayerView2D\")], c);\nvar d = c;\nexport default d;","import _slicedToArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { b as t, c as e, r as i, k as s, m as r } from \"../../../chunks/mat3.js\";\nimport { c as h } from \"../../../chunks/mat3f32.js\";\nimport { f as n } from \"../../../chunks/vec2f32.js\";\nimport \"../../webgl/BufferObject.js\";\nimport \"../../webgl/FramebufferObject.js\";\nimport \"../../../core/has.js\";\nimport \"../../webgl/enums.js\";\nimport \"../../webgl/RenderingContext.js\";\nimport \"../../../chunks/builtins.js\";\nimport o from \"../../webgl/Texture.js\";\nimport \"../../webgl/VertexArrayObject.js\";\nimport { DisplayObject as u } from \"./DisplayObject.js\";\nimport a from \"./ImageryBitmapSource.js\";\n\nfunction d(t) {\n  return t && \"render\" in t;\n}\n\nfunction c(t) {\n  return t && !(\"render\" in t);\n}\n\nfunction l(t) {\n  var e = document.createElement(\"canvas\");\n  return e.width = t.width, e.height = t.height, t.render(e.getContext(\"2d\")), e;\n}\n\nfunction x(t, e, i) {\n  var s = {\n    target: 3553,\n    pixelFormat: 6408,\n    internalFormat: 6408,\n    dataType: 5121,\n    wrapMode: 33071\n  };\n  return e && i && (s.width = e, s.height = i), new o(t, s);\n}\n\nvar g = /*#__PURE__*/function (_u) {\n  _inherits(g, _u);\n\n  var _super = _createSuper(g);\n\n  function g() {\n    var _this;\n\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var e = arguments.length > 1 ? arguments[1] : undefined;\n    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;\n\n    _classCallCheck(this, g);\n\n    _this = _super.call(this), _this.requestRenderOnSourceChangedEnabled = i, _this._textureInvalidated = !0, _this.stencilRef = 0, _this.coordScale = [1, 1], _this._height = void 0, _this.pixelRatio = 1, _this.resolution = 0, _this.rotation = 0, _this._source = null, _this._width = void 0, _this.x = 0, _this.y = 0, _this.transforms = {\n      dvs: h()\n    }, _this.blendFunction = e, _this.source = t, _this.requestRender = _this.requestRender.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(g, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this._texture && (this._texture.dispose(), this._texture = null);\n    }\n  }, {\n    key: \"isSourceScaled\",\n    get: function get() {\n      return this.width !== this.sourceWidth || this.height !== this.sourceHeight;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return void 0 !== this._height ? this._height : this.sourceHeight;\n    },\n    set: function set(t) {\n      this._height = t;\n    }\n  }, {\n    key: \"source\",\n    get: function get() {\n      return this._source;\n    },\n    set: function set(t) {\n      this._source = t, this.invalidateTexture();\n    }\n  }, {\n    key: \"sourceHeight\",\n    get: function get() {\n      return this._source instanceof HTMLImageElement ? this._source.naturalHeight : this._source.height;\n    }\n  }, {\n    key: \"sourceWidth\",\n    get: function get() {\n      return this._source instanceof HTMLImageElement ? this._source.naturalWidth : this._source.width;\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return void 0 !== this._width ? this._width : this.sourceWidth;\n    },\n    set: function set(t) {\n      this._width = t;\n    }\n  }, {\n    key: \"beforeRender\",\n    value: function beforeRender(t) {\n      _get(_getPrototypeOf(g.prototype), \"beforeRender\", this).call(this, t), this.updateTexture(t.context);\n    }\n  }, {\n    key: \"invalidateTexture\",\n    value: function invalidateTexture() {\n      this._textureInvalidated || (this._textureInvalidated = !0, this.requestRenderOnSourceChangedEnabled && this.requestRender());\n    }\n  }, {\n    key: \"setTransform\",\n    value: function setTransform(h) {\n      var o = t(this.transforms.dvs),\n          _h$toScreenNoRotation = h.toScreenNoRotation([0, 0], this.x, this.y),\n          _h$toScreenNoRotation2 = _slicedToArray(_h$toScreenNoRotation, 2),\n          u = _h$toScreenNoRotation2[0],\n          a = _h$toScreenNoRotation2[1],\n          d = this.resolution / this.pixelRatio / h.resolution,\n          c = d * this.width,\n          l = d * this.height,\n          x = Math.PI * this.rotation / 180;\n\n      e(o, o, n(u, a)), e(o, o, n(c / 2, l / 2)), i(o, o, -x), e(o, o, n(-c / 2, -l / 2)), s(o, o, n(c, l)), r(this.transforms.dvs, h.displayViewMat3, o);\n    }\n  }, {\n    key: \"setSamplingProfile\",\n    value: function setSamplingProfile(t) {\n      this._texture && (t.mips && !this._texture.descriptor.hasMipmap && this._texture.generateMipmap(), this._texture.setSamplingMode(t.samplingMode));\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(t, e) {\n      this._texture && t.bindTexture(this._texture, e);\n    }\n  }, {\n    key: \"updateTexture\",\n    value: function updateTexture(t) {\n      var e;\n      if (!this.stage) return null == (e = this._texture) || e.dispose(), void (this._texture = null);\n      if (!this._textureInvalidated) return;\n      this._textureInvalidated = !1, this._texture || (this.source ? this._texture = x(t, this.sourceWidth, this.sourceHeight) : this._texture = x(t));\n      var i = this.source;\n\n      if (i) {\n        if (this._texture.resize(this.sourceWidth, this.sourceHeight), d(i)) {\n          if (i instanceof a) {\n            var _t = i.getRenderedRasterPixels();\n\n            this._texture.setData(_t.renderedRasterPixels);\n          } else this._texture.setData(l(i));\n        } else c(i) && this._texture.setData(i);\n        this.ready();\n      } else this._texture.setData(null);\n    }\n  }, {\n    key: \"onAttach\",\n    value: function onAttach() {\n      this.invalidateTexture();\n    }\n  }, {\n    key: \"onDetach\",\n    value: function onDetach() {\n      this.invalidateTexture();\n    }\n  }]);\n\n  return g;\n}(u);\n\nexport { g as Bitmap };","import _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nvar e = /*#__PURE__*/function () {\n  function e(_e, t, i) {\n    _classCallCheck(this, e);\n\n    this.pixelBlock = _e, this.extent = t, this.originalPixelBlock = i;\n  }\n\n  _createClass(e, [{\n    key: \"width\",\n    get: function get() {\n      return this.pixelBlock ? this.pixelBlock.width : 0;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.pixelBlock ? this.pixelBlock.height : 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render(_e2) {\n      var t = this.pixelBlock;\n      if (!t) return;\n\n      var i = this.filter({\n        pixelBlock: t\n      }),\n          l = i.pixelBlock.getAsRGBA(),\n          h = _e2.createImageData(i.pixelBlock.width, i.pixelBlock.height);\n\n      h.data.set(l), _e2.putImageData(h, 0, 0);\n    }\n  }, {\n    key: \"getRenderedRasterPixels\",\n    value: function getRenderedRasterPixels() {\n      var _e3 = this.filter({\n        pixelBlock: this.pixelBlock\n      });\n\n      return {\n        width: _e3.pixelBlock.width,\n        height: _e3.pixelBlock.height,\n        renderedRasterPixels: new Uint8Array(_e3.pixelBlock.getAsRGBA().buffer)\n      };\n    }\n  }]);\n\n  return e;\n}();\n\nexport default e;"],"sourceRoot":""}