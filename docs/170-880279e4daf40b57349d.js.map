{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/views/2d/layers/features/processors/HeatmapProcessor.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","F","s","done","value","e","_e2","f","TypeError","err","normalCompletion","didErr","step","next","_e3","return","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","NewTarget","this","p","t","offset","extent","c","Map","r","tileInfoView","tileInfo","isWrappable","set","id","l","_n","_onTileMessage","_update","_super","_this","type","_tileKeyToFeatureSets","handles","add","tileStore","on","onTileUpdate","bind","mark","_callee","wrap","_context","prev","schema","processors","abrupt","_schema","mesh","stop","_x","_x2","_step","_iterator","removed","_t","delete","remoteClient","invoke","tileKey","data","clear","_callee2","a","_t2","_r","_a","_n2","_d","_context2","has","get","addOrUpdate","hasFeatures","instance","end","_e","_e$offset","_a2","_n3","transform","intensityInfo","matrix","transferList","_x3","_x4","_x5","error","h"],"mappings":"+FAAA,4QASA,SAASA,EAAQC,EAAQC,GAAkB,IAAIC,EAAOC,OAAOD,KAAKF,GAAS,GAAIG,OAAOC,sBAAuB,CAAE,IAAIC,EAAUF,OAAOC,sBAAsBJ,GAAaC,IAAkBI,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOJ,OAAOK,yBAAyBR,EAAQO,GAAKE,eAAkBP,EAAKQ,KAAKC,MAAMT,EAAMG,GAAY,OAAOH,EAElV,SAASU,EAAcC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAAQA,EAAI,EAAKf,EAAQI,OAAOc,IAAS,GAAMC,SAAQ,SAAUC,GAAO,YAAgBN,EAAQM,EAAKF,EAAOE,OAAsBhB,OAAOiB,0BAA6BjB,OAAOkB,iBAAiBR,EAAQV,OAAOiB,0BAA0BH,IAAmBlB,EAAQI,OAAOc,IAASC,SAAQ,SAAUC,GAAOhB,OAAOmB,eAAeT,EAAQM,EAAKhB,OAAOK,yBAAyBS,EAAQE,OAAe,OAAON,EAE7gB,SAASU,EAA2BC,EAAGC,GAAkB,IAAIC,EAAuB,oBAAXC,QAA0BH,EAAEG,OAAOC,WAAaJ,EAAE,cAAe,IAAKE,EAAI,CAAE,GAAIG,MAAMC,QAAQN,KAAOE,EAE9K,SAAqCF,EAAGO,GAAU,IAAKP,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAOQ,EAAkBR,EAAGO,GAAS,IAAIE,EAAI9B,OAAO+B,UAAUC,SAASC,KAAKZ,GAAGa,MAAM,GAAI,GAAc,WAANJ,GAAkBT,EAAEc,cAAaL,EAAIT,EAAEc,YAAYC,MAAM,GAAU,QAANN,GAAqB,QAANA,EAAa,OAAOJ,MAAMW,KAAKhB,GAAI,GAAU,cAANS,GAAqB,2CAA2CQ,KAAKR,GAAI,OAAOD,EAAkBR,EAAGO,GAFnOW,CAA4BlB,KAAOC,GAAkBD,GAAyB,iBAAbA,EAAER,OAAqB,CAAMU,IAAIF,EAAIE,GAAI,IAAIZ,EAAI,EAAO6B,EAAI,aAAiB,MAAO,CAAEC,EAAGD,EAAGV,EAAG,WAAe,OAAInB,GAAKU,EAAER,OAAe,CAAE6B,MAAM,GAAe,CAAEA,MAAM,EAAOC,MAAOtB,EAAEV,OAAWiC,EAAG,SAAWC,GAAO,MAAMA,GAAQC,EAAGN,GAAO,MAAM,IAAIO,UAAU,yIAA4I,IAA6CC,EAAzCC,GAAmB,EAAMC,GAAS,EAAY,MAAO,CAAET,EAAG,WAAelB,EAAKA,EAAGU,KAAKZ,IAAOS,EAAG,WAAe,IAAIqB,EAAO5B,EAAG6B,OAAsC,OAA9BH,EAAmBE,EAAKT,KAAaS,GAASP,EAAG,SAAWS,GAAOH,GAAS,EAAMF,EAAMK,GAAQP,EAAG,WAAe,IAAWG,GAAiC,MAAb1B,EAAG+B,QAAgB/B,EAAG+B,SAAY,QAAU,GAAIJ,EAAQ,MAAMF,KAI39B,SAASnB,EAAkB0B,EAAKC,IAAkB,MAAPA,GAAeA,EAAMD,EAAI1C,UAAQ2C,EAAMD,EAAI1C,QAAQ,IAAK,IAAIF,EAAI,EAAG8C,EAAO,IAAI/B,MAAM8B,GAAM7C,EAAI6C,EAAK7C,IAAO8C,EAAK9C,GAAK4C,EAAI5C,GAAM,OAAO8C,EAIhL,SAASC,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAsF,OAAhFC,QAAQlC,UAAUmC,QAAQjC,KAAK4B,QAAQC,UAAUG,QAAS,IAAI,iBAAyB,EAAQ,MAAOrB,GAAK,OAAO,GAF9PuB,GAA6B,OAAO,WAAkC,IAAsCC,EAAlCC,EAAQ,YAAgBV,GAAkB,GAAIC,EAA2B,CAAE,IAAIU,EAAY,YAAgBC,MAAMpC,YAAaiC,EAASP,QAAQC,UAAUO,EAAOzD,UAAW0D,QAAqBF,EAASC,EAAM7D,MAAM+D,KAAM3D,WAAc,OAAO,YAA2B2D,KAAMH,IAqB5Z,IAAII,EAAI,SAASA,EAAE5B,EAAG6B,GACpB,YAAgBF,KAAMC,GAEtBD,KAAKG,OAAS9B,EAAG2B,KAAKI,OAASF,GAGjC,SAASG,EAAEhC,GACT,IAAI6B,EAAI7B,EAAE5B,IACNyB,EAAI,IAAIoC,IACRC,EAAI,IACJnE,EAAI,IACJU,EAAIuB,EAAEmC,aAAaC,SAASC,YAChC,OAAOxC,EAAEyC,IAAI,YAAET,GAAI,GAAI,EAAGpD,GAAG8D,GAAI,IAAIX,EAAE,EAAE7D,GAAIA,GAAI,CAACA,EAAImE,EAAGnE,EAAImE,EAAGnE,EAAGA,KAAM8B,EAAEyC,IAAI,YAAET,EAAG,GAAI,EAAGpD,GAAG8D,GAAI,IAAIX,EAAE,CAAC,GAAI7D,GAAI,CAAC,EAAGA,EAAImE,EAAGnE,EAAGA,KAAM8B,EAAEyC,IAAI,YAAET,EAAG,GAAI,EAAGpD,GAAG8D,GAAI,IAAIX,EAAE,CAAC7D,GAAIA,GAAI,CAAC,EAAGA,EAAImE,EAAGA,EAAGnE,KAAM8B,EAAEyC,IAAI,YAAET,GAAI,EAAG,EAAGpD,GAAG8D,GAAI,IAAIX,EAAE,EAAE7D,EAAG,GAAI,CAACA,EAAImE,EAAG,EAAGnE,EAAGA,KAAM8B,EAAEyC,IAAI,YAAET,EAAG,EAAG,EAAGpD,GAAG8D,GAAI,IAAIX,EAAE,CAAC7D,EAAG,GAAI,CAAC,EAAG,EAAGmE,EAAGnE,KAAM8B,EAAEyC,IAAI,YAAET,GAAI,EAAG,EAAGpD,GAAG8D,GAAI,IAAIX,EAAE,EAAE7D,EAAGA,GAAI,CAACA,EAAImE,EAAG,EAAGnE,EAAGmE,KAAMrC,EAAEyC,IAAI,YAAET,EAAG,EAAG,EAAGpD,GAAG8D,GAAI,IAAIX,EAAE,CAAC,EAAG7D,GAAI,CAAC,EAAG,EAAGA,EAAGmE,KAAMrC,EAAEyC,IAAI,YAAET,EAAG,EAAG,EAAGpD,GAAG8D,GAAI,IAAIX,EAAE,CAAC7D,EAAGA,GAAI,CAAC,EAAG,EAAGmE,EAAGA,KAAMrC,EAG7d,IAAI2C,EAAiB,SAAUC,GAC7B,YAAUD,EAAGC,GAEb,IAmFQC,EAhEAC,EAnBJC,EAAS9B,EAAa0B,GAE1B,SAASA,IACP,IAAIK,EAKJ,OAHA,YAAgBlB,KAAMa,IAEtBK,EAAQD,EAAOhF,MAAM+D,KAAM3D,YAAkB8E,KAAO,UAAWD,EAAME,sBAAwB,IAAId,IAC1FY,EAiJT,OA9IA,YAAaL,EAAG,CAAC,CACfpE,IAAK,aACL2B,MAAO,WACL4B,KAAKqB,QAAQC,IAAI,CAACtB,KAAKuB,UAAUC,GAAG,SAAUxB,KAAKyB,aAAaC,KAAK1B,WAEtE,CACDvD,IAAK,SACL2B,OACM4C,EAAU,YAAgC,IAAoBW,MAAK,SAASC,EAAQvD,EAAG6B,GACzF,IAAIhC,EACJ,OAAO,IAAoB2D,MAAK,SAAkBC,GAChD,OACE,OAAQA,EAASC,KAAOD,EAASjD,MAC/B,KAAK,EAGH,GAAM,aAFNX,EAAIgC,EAAE8B,OAAOC,WAAW,IAEFd,KAAO,CAC3BW,EAASjD,KAAO,EAChB,MAGF,OAAOiD,EAASI,OAAO,UAEzB,KAAK,EACH,YAAElC,KAAKmC,QAASjE,KAAOG,EAAE+D,MAAO,EAAIpC,KAAKmC,QAAUjE,GAErD,KAAK,EACL,IAAK,MACH,OAAO4D,EAASO,UAGrBT,EAAS5B,UAGd,SAAgBsC,EAAIC,GAClB,OAAOvB,EAAQ/E,MAAM+D,KAAM3D,cAK9B,CACDI,IAAK,eACL2B,MAAO,SAAsBC,GAC3B,IACImE,EADAC,EAAY5F,EAA2BwB,EAAEqE,SAG7C,IACE,IAAKD,EAAUvE,MAAOsE,EAAQC,EAAUlF,KAAKY,MAAO,CAClD,IAAIwE,EAAKH,EAAMpE,MAEf4B,KAAKoB,sBAAsBwB,OAAOD,EAAGlG,IAAImE,KAE3C,MAAOnC,GACPgE,EAAUpE,EAAEI,GACZ,QACAgE,EAAUlE,OAGb,CACD9B,IAAK,cACL2B,MAAO,SAAqBC,GAI1B,OAAO2B,KAAKoB,sBAAsBwB,OAAOvE,EAAE5B,IAAImE,IAAKZ,KAAK6C,aAAaC,OAAO,0BAA2B,CACtGC,QAAS1E,EAAEuC,GACXoC,KALM,CACNC,OAAO,OAOV,CACDxG,IAAK,gBACL2B,OACM2C,EAAiB,YAAgC,IAAoBY,MAAK,SAASuB,EAAS7E,EAAGkC,EAAGnE,GACpG,IAAI+G,EAAGC,EAAKC,EAAIC,EAAIC,EAAKC,EAEzB,OAAO,IAAoB3B,MAAK,SAAmB4B,GACjD,OACE,OAAQA,EAAU1B,KAAO0B,EAAU5E,MACjC,KAAK,EAIH,GAHAmB,KAAKoB,sBAAsBsC,IAAIrF,EAAE5B,IAAImE,KAAOZ,KAAKoB,sBAAsBT,IAAItC,EAAE5B,IAAImE,GAAI,IAAIN,KACzF6C,EAAInD,KAAKoB,sBAAsBuC,IAAItF,EAAE5B,IAAImE,IAEnC,YAAEL,EAAEqD,cAAgBrD,EAAEqD,YAAYC,aAAeV,EAAExC,IAAIJ,EAAEqD,YAAYE,SAAUvD,IAAIA,EAAEwD,IAAM,CAC/FN,EAAU5E,KAAO,EACjB,MA8BF,OA3BAuE,EAAM,GAAIC,EAAKhD,EAAEhC,GAEjB2B,KAAKoB,sBAAsB5E,SAAQ,SAAUJ,EAAGU,GAC9C,GAAIA,IAAMuB,EAAE5B,IAAImE,GAAIxE,EAAEI,SAAQ,SAAU6B,GACtC,OAAO,YAAEA,EAAEuF,aAAa,SAAUvF,GAChC,OAAO+E,EAAIpH,KAAKqC,cAEZ,GAAIgF,EAAGK,IAAI5G,GAAI,CACrB,IAAIkH,EAAKX,EAAGM,IAAI7G,GACZmH,EAAY,YAAeD,EAAG7D,OAAQ,GACtC+D,EAAMD,EAAU,GAChBE,EAAMF,EAAU,GAEpB7H,EAAEI,SAAQ,SAAU6B,GAClB,OAAO,YAAEA,EAAEuF,aAAa,SAAUvF,GAChC,IAAIH,EAAIG,EAAE+F,UAAUF,EAAKC,EAAK,EAAG,GAEjCf,EAAIpH,KAAKkC,aAMjBoF,EAAK,YAAEF,EAAKpD,KAAKmC,QAAQC,KAAM,IAAK,KAAMmB,EAAM,CAC9CR,QAAS1E,EAAE5B,IAAImE,GACfyD,cAAef,GACdE,EAAK,CAACF,EAAGgB,QACLb,EAAUvB,OAAO,SAAUlC,KAAK6C,aAAaC,OAAO,0BAA2BS,EAAKrH,EAAcA,EAAc,GAAIE,GAAI,GAAI,CACjImI,aAAcf,MAGlB,KAAK,EACL,IAAK,MACH,OAAOC,EAAUpB,UAGtBa,EAAUlD,UAGf,SAAuBwE,EAAKC,EAAKC,GAC/B,OAAO3D,EAAe9E,MAAM+D,KAAM3D,cAKrC,CACDI,IAAK,cACL2B,MAAO,SAAqBC,EAAG6B,EAAGhC,GAChC,OAAO8B,KAAK6C,aAAaC,OAAO,2BAA4B,CAC1DC,QAAS1E,EAAEuC,GACX+D,MAAOzE,GACNhC,OAIA2C,EA5JY,CA6JnB,KAGE+D,EADJ/D,EAAI,YAAE,CAAC,YAAE,8DAA+DA,GAEzD","file":"170-880279e4daf40b57349d.js","sourcesContent":["import _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport \"../../../../../core/has.js\";\nimport { isSome as t, andThen as s } from \"../../../../../core/maybe.js\";\nimport \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/Logger.js\";\nimport { subclass as r } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { diff as i } from \"../../../../../core/accessorSupport/diffUtils.js\";\nimport { calculateHeatmapIntensityInfoReaders as o } from \"../../../../../renderers/support/heatmapUtils.js\";\nimport { TILE_SIZE as a } from \"../../../engine/webgl/definitions.js\";\nimport n from \"./BaseProcessor.js\";\nimport { getPow2NeighborKey as d } from \"../support/tileUtils.js\";\n\nvar p = function p(e, t) {\n  _classCallCheck(this, p);\n\n  this.offset = e, this.extent = t;\n};\n\nfunction c(e) {\n  var t = e.key,\n      s = new Map(),\n      r = 256,\n      i = a,\n      o = e.tileInfoView.tileInfo.isWrappable;\n  return s.set(d(t, -1, -1, o).id, new p([-i, -i], [i - r, i - r, i, i])), s.set(d(t, 0, -1, o).id, new p([0, -i], [0, i - r, i, i])), s.set(d(t, 1, -1, o).id, new p([i, -i], [0, i - r, r, i])), s.set(d(t, -1, 0, o).id, new p([-i, 0], [i - r, 0, i, i])), s.set(d(t, 1, 0, o).id, new p([i, 0], [0, 0, r, i])), s.set(d(t, -1, 1, o).id, new p([-i, i], [i - r, 0, i, r])), s.set(d(t, 0, 1, o).id, new p([0, i], [0, 0, i, r])), s.set(d(t, 1, 1, o).id, new p([i, i], [0, 0, r, r])), s;\n}\n\nvar l = /*#__PURE__*/function (_n) {\n  _inherits(l, _n);\n\n  var _super = _createSuper(l);\n\n  function l() {\n    var _this;\n\n    _classCallCheck(this, l);\n\n    _this = _super.apply(this, arguments), _this.type = \"heatmap\", _this._tileKeyToFeatureSets = new Map();\n    return _this;\n  }\n\n  _createClass(l, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this.handles.add([this.tileStore.on(\"update\", this.onTileUpdate.bind(this))]);\n    }\n  }, {\n    key: \"update\",\n    value: function () {\n      var _update = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e, t) {\n        var s;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                s = t.schema.processors[0];\n\n                if (!(\"heatmap\" !== s.type)) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                i(this._schema, s) && (e.mesh = !0, this._schema = s);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function update(_x, _x2) {\n        return _update.apply(this, arguments);\n      }\n\n      return update;\n    }()\n  }, {\n    key: \"onTileUpdate\",\n    value: function onTileUpdate(e) {\n      var _iterator = _createForOfIteratorHelper(e.removed),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _t = _step.value;\n\n          this._tileKeyToFeatureSets.delete(_t.key.id);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"onTileClear\",\n    value: function onTileClear(e) {\n      var t = {\n        clear: !0\n      };\n      return this._tileKeyToFeatureSets.delete(e.key.id), this.remoteClient.invoke(\"tileRenderer.onTileData\", {\n        tileKey: e.id,\n        data: t\n      });\n    }\n  }, {\n    key: \"onTileMessage\",\n    value: function () {\n      var _onTileMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e, r, i) {\n        var a, _t2, _r, _a, _n2, _d;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this._tileKeyToFeatureSets.has(e.key.id) || this._tileKeyToFeatureSets.set(e.key.id, new Map());\n                a = this._tileKeyToFeatureSets.get(e.key.id);\n\n                if (!(t(r.addOrUpdate) && r.addOrUpdate.hasFeatures && a.set(r.addOrUpdate.instance, r), r.end)) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                _t2 = [], _r = c(e);\n\n                this._tileKeyToFeatureSets.forEach(function (i, o) {\n                  if (o === e.key.id) i.forEach(function (e) {\n                    return s(e.addOrUpdate, function (e) {\n                      return _t2.push(e);\n                    });\n                  });else if (_r.has(o)) {\n                    var _e = _r.get(o),\n                        _e$offset = _slicedToArray(_e.offset, 2),\n                        _a2 = _e$offset[0],\n                        _n3 = _e$offset[1];\n\n                    i.forEach(function (e) {\n                      return s(e.addOrUpdate, function (e) {\n                        var s = e.transform(_a2, _n3, 1, 1);\n\n                        _t2.push(s);\n                      });\n                    });\n                  }\n                });\n\n                _a = o(_t2, this._schema.mesh, 512, 512), _n2 = {\n                  tileKey: e.key.id,\n                  intensityInfo: _a\n                }, _d = [_a.matrix];\n                return _context2.abrupt(\"return\", this.remoteClient.invoke(\"tileRenderer.onTileData\", _n2, _objectSpread(_objectSpread({}, i), {}, {\n                  transferList: _d\n                })));\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function onTileMessage(_x3, _x4, _x5) {\n        return _onTileMessage.apply(this, arguments);\n      }\n\n      return onTileMessage;\n    }()\n  }, {\n    key: \"onTileError\",\n    value: function onTileError(e, t, s) {\n      return this.remoteClient.invoke(\"tileRenderer.onTileError\", {\n        tileKey: e.id,\n        error: t\n      }, s);\n    }\n  }]);\n\n  return l;\n}(n);\n\nl = e([r(\"esri.views.2d.layers.features.processors.HeatmapProcessor\")], l);\nvar h = l;\nexport default h;"],"sourceRoot":""}