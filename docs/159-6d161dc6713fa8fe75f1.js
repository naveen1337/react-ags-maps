(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{"7zBn":function(e,t,r){"use strict";r.r(t);var i=r("hisu"),n=r("yBJb"),a=r("CHlC"),s=r("kMo5"),o=r("P+uj"),l=r("dQW7"),c=r("xAIp"),u=(r("J4Pc"),r("wckI"),r("TM+E"),r("iaHD")),f=r("mK0O"),h=r("4Mpa"),d=(r("a1c8"),r("iwTS"));r("B2Uc"),r("cY28"),r("IxxH"),r("0fR5"),r("H8zE");function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=Object(o.a)(e);if(t){var n=Object(o.a)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return Object(s.a)(this,r)}}var w=function(e){Object(a.a)(r,e);var t=g(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments))._lastWidth=0,e._lastHeight=0,e.requiresDedicatedFBO=!1,e}return Object(n.a)(r,[{key:"dispose",value:function(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)}},{key:"doRender",value:function(e){var t=this.createRenderParams(e),r=t.context,i=t.painter,n=t.profiler;this._prevFBO=r.getBoundFramebufferObject(),n.recordContainerStart(this.name);var a=this._getFbo(t),s=i.getRenderTarget();r.bindFramebuffer(a),i.setRenderTarget(a),r.setDepthWriteEnabled(!0),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);var o,l=b(this.children);try{for(l.s();!(o=l.n()).done;){o.value.beforeRender(e)}}catch(d){l.e(d)}finally{l.f()}var c,u=b(this.children);try{for(u.s();!(c=u.n()).done;){c.value.processRender(t)}}catch(d){u.e(d)}finally{u.f()}var f,h=b(this.children);try{for(h.s();!(f=h.n()).done;){f.value.afterRender(e)}}catch(d){h.e(d)}finally{h.f()}i.setRenderTarget(s),r.bindFramebuffer(this._prevFBO),i.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),i.blitTexture(r,a.colorTexture,9728),i.compositeLayer(t,this.computedOpacity),n.recordContainerEnd()}},{key:"createRenderParams",value:function(e){return v(v({},Object(h.a)(Object(o.a)(r.prototype),"createRenderParams",this).call(this,e)),{},{blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1})}},{key:"_getFbo",value:function(e){var t=e.context,r=e.painter,i=t.getViewport(),n=i.width,a=i.height;if(n!==this._lastWidth||a!==this._lastHeight)if(this._lastWidth=n,this._lastHeight=a,this._renderTarget)this._renderTarget.resize(n,a);else{var s={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:n,height:a};this._renderTarget=new d.a(t,{colorTarget:0,depthStencilTarget:3},s,r.getSharedStencilBuffer())}return this._renderTarget}}]),r}(r("UP7e").a),O=r("55C+"),_=r("kDog"),V=r("LuB+");function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=Object(o.a)(e);if(t){var n=Object(o.a)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return Object(s.a)(this,r)}}var m=function(e){Object(a.a)(r,e);var t=j(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="group",n.layerViews=new _.a,n}return Object(n.a)(r,[{key:"initialize",value:function(){var e=this;this.handles.add([this.layerViews.on("change",(function(t){return e._layerViewsChangeHandler(t)})),this.layerViews.on("after-changes",(function(){return e._layerViewsAfterChangesHandler()})),this.layer.watch("visibilityMode",(function(){return e._visibilityModeHandler()}),!0),this.watch("visible",(function(){return e._visibleHandler()}),!0)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}},{key:"layerViews",set:function(e){this._set("layerViews",Object(V.b)(e,this._get("layerViews")))}},{key:"isUpdating",value:function(){return this.layerViews.some((function(e){return e.updating}))}},{key:"updatingProgress",get:function(){return 0===this.layerViews.length?1:this.layerViews.reduce((function(e,t){return e+t.updatingProgress}),0)/this.layerViews.length}},{key:"_hasLayerViewVisibleOverrides",value:function(){return this.layerViews.some((function(e){return e._isOverridden("visible")}))}},{key:"_findLayerViewForLayer",value:function(e){return e&&this.layerViews.find((function(t){return t.layer===e}))}},{key:"_firstVisibleOnLayerOrder",value:function(){var e=this,t=this.layer.layers.find((function(t){var r=e._findLayerViewForLayer(t);return r&&r.visible}));return t&&this._findLayerViewForLayer(t)}},{key:"_enforceExclusiveVisibility",value:function(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((function(t){t.visible=t===e})))}},{key:"_layerViewsChangeHandler",value:function(e){var t=this;this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map((function(e){return e.watch("visible",(function(r){return t._layerViewVisibleHandler(r,e)}),!0)})).toArray(),"grouplayerview:visible");var r=e.added[e.added.length-1],i=null;r&&r.visible&&(i=r),this._enforceVisibility(i)}},{key:"_layerViewsAfterChangesHandler",value:function(){var e=this;this.handles.remove("grouplayerview:updating"),this.handles.add(this.layerViews.map((function(t){return t.watch("updating",(function(){return e._updateUpdating()}),!0)})).toArray(),"grouplayerview:updating"),this._updateUpdating()}},{key:"_enforceVisibility",value:function(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":var t=this.visible;this.layerViews.forEach((function(e){e.visible=t}));break;case"exclusive":this._enforceExclusiveVisibility(e)}}},{key:"_visibilityModeHandler",value:function(){this._enforceVisibility()}},{key:"_layerViewVisibleHandler",value:function(e,t){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":e!==this.visible&&(t.visible=this.visible);break;case"exclusive":this._enforceExclusiveVisibility(e&&t)}}},{key:"_visibleHandler",value:function(){var e;this._hasLayerViewVisibleOverrides()&&"inherited"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}},{key:"_updateUpdating",value:function(){this.notifyChange("updating")}}]),r}(r("bPf0").a);Object(l.a)([Object(c.b)({cast:V.a})],m.prototype,"layerViews",null),Object(l.a)([Object(c.b)()],m.prototype,"view",void 0),Object(l.a)([Object(c.b)({readOnly:!0})],m.prototype,"updatingProgress",null);var k=m=Object(l.a)([Object(u.a)("esri.views.layers.GroupLayerView")],m);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=Object(o.a)(e);if(t){var n=Object(o.a)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return Object(s.a)(this,r)}}var C=function(e){Object(a.a)(r,e);var t=R(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).container=new w,e}return Object(n.a)(r,[{key:"attach",value:function(){var e=this;this._updateStageChildren(),this.handles.add(this.layerViews.on("after-changes",(function(){return e._updateStageChildren()})),"grouplayerview2d")}},{key:"detach",value:function(){this.handles.remove("grouplayerview2d"),this.container.removeAllChildren()}},{key:"hitTest",value:function(e,t){return null}},{key:"update",value:function(e){}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){}},{key:"_updateStageChildren",value:function(){var e=this;this.container.removeAllChildren(),this.layerViews.forEach((function(t,r){return e.container.addChildAt(t.container,r)}))}}]),r}(Object(O.a)(k)),T=C=Object(l.a)([Object(u.a)("esri.views.2d.layers.GroupLayerView2D")],C);t.default=T}}]);
//# sourceMappingURL=159-6d161dc6713fa8fe75f1.js.map