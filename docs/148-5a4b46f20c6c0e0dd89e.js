(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{U7hs:function(e,t,r){"use strict";r.r(t),r.d(t,"previewCIMSymbol",(function(){return H}));var a=r("eijD"),i=r("NthX"),n=r.n(i),o=r("frPA"),s=r("hisu"),c=r("yBJb"),l=r("DGz/"),h=r("IH5m"),u=r("lZmO"),f=r("aic5"),m=r("Hl/n"),d=r("mynk"),y=r("aNYv");function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw n}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var p=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"rasterizeText",value:function(e,t){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var r=this._textRasterizationCanvas,a=r.getContext("2d");this.setFontProperties(a,t),this.parameters=t,this.textLines=e.split(/\r?\n/),this.lineHeight=this.computeLineHeight();var i=this.computeTextWidth(a,t),n=this.lineHeight*this.textLines.length;r.width=i,r.height=n,this.renderedLineHeight=Math.round(this.lineHeight*t.pixelRatio),this.renderedHaloSize=t.halo.size*t.pixelRatio,this.renderedWidth=i*t.pixelRatio,this.renderedHeight=n*t.pixelRatio,this.fillStyle=function(e){return"rgba(".concat(e.slice(0,3).toString(),",").concat(e[3],")")}(t.color),this.haloStyle=function(e){return"rgb(".concat(e.slice(0,3).toString(),")")}(t.halo.color);var o=this.renderedLineHeight,s=this.renderedHaloSize;this.setFontProperties(a,t);var c=function(e,t){return"center"===e?.5*t:"right"===e?t:0}(a.textAlign,this.renderedWidth)+s,l=s,h=0,u=0;s>0&&this.renderHalo(a,c,l,h,u,t),u+=l,h+=c;var f,m=g(this.textLines);try{for(m.s();!(f=m.n()).done;){var d=f.value;a.globalCompositeOperation="destination-out",a.fillStyle="rgb(0, 0, 0)",a.fillText(d,h,u),a.globalCompositeOperation="source-over",a.fillStyle=this.fillStyle,a.fillText(d,h,u),u+=o}}catch(x){m.e(x)}finally{m.f()}var y=a.getImageData(0,0,this.renderedWidth,this.renderedHeight),v=new Uint8Array(y.data);if(t.premultiplyColors)for(var p,b=0;b<v.length;b+=4)p=v[b+3]/255,v[b]=v[b]*p,v[b+1]=v[b+1]*p,v[b+2]=v[b+2]*p;return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(v.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}},{key:"renderHalo",value:function(e,t,r,a,i,n){var o=this.renderedWidth,s=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas")),this._haloRasterizationCanvas.width=o,this._haloRasterizationCanvas.height=s;var c=this._haloRasterizationCanvas,l=c.getContext("2d");l.clearRect(0,0,o,s),this.setFontProperties(l,n),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;var h=this.renderedHaloSize<3;l.lineJoin=h?"miter":"round",h?this.renderHaloEmulated(l,t,r):this.renderHaloNative(l,t,r),e.globalAlpha=this.parameters.halo.color[3],e.drawImage(c,0,0,o,s,a,i,o,s),e.globalAlpha=1}},{key:"renderHaloEmulated",value:function(e,t,r){var a,i=this.renderedLineHeight,n=this.renderedHaloSize,o=g(this.textLines);try{for(o.s();!(a=o.n()).done;){var s,c=a.value,l=g(b);try{for(l.s();!(s=l.n()).done;){var h=Object(y.a)(s.value,2),u=h[0],f=h[1];e.fillText(c,t+n*u,r+n*f)}}catch(m){l.e(m)}finally{l.f()}r+=i}}catch(m){o.e(m)}finally{o.f()}}},{key:"renderHaloNative",value:function(e,t,r){var a,i=this.renderedLineHeight,n=this.renderedHaloSize,o=g(this.textLines);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,c=2*n,l=0;l<5;l++){var h=.6+.1*l;e.lineWidth=h*c,e.strokeText(s,t,r)}r+=i}}catch(u){o.e(u)}finally{o.f()}}},{key:"setFontProperties",value:function(e,t){var r,a=t.font,i="".concat(a.style," ").concat(a.weight," ").concat(Object(o.c)(t.size*t.pixelRatio),"px ").concat(a.family,", sans-serif");switch(e.font=i,e.textBaseline="top",t.horizontalAlignment){case"left":r="left";break;case"right":r="right";break;case"center":r="center";break;default:r="left"}e.textAlign=r}},{key:"computeTextWidth",value:function(e,t){var r,a=0,i=g(this.textLines);try{for(i.s();!(r=i.n()).done;){var n=r.value;a=Math.max(a,e.measureText(n).width)}}catch(s){i.e(s)}finally{i.f()}var o=t.font;return("italic"===o.style||"oblique"===o.style||"string"==typeof o.weight&&("bold"===o.weight||"bolder"===o.weight)||"number"==typeof o.weight&&o.weight>600)&&(a+=.3*e.measureText("A").width),a+=2*this.parameters.halo.size,Math.round(a)}},{key:"computeLineHeight",value:function(){var e=1.275*this.parameters.size;return Math.round(e+2*this.parameters.halo.size)}}]),e}();for(var b=[],x=0;x<360;x+=22.5)b.push([Math.cos(Math.PI*x/180),Math.sin(Math.PI*x/180)]);var M,w,C=r("g9+Q"),O=r("+3Lk"),I=r("bw5k");function z(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw n}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}(w=M||(M={})).Legend="legend",w.Preview="preview";var j=function(e,t,r){if(e&&e.targetSize){var a;if(r){var i=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);a=e.targetSize/Object(o.c)(i)}else a=e.targetSize/t.referenceSize;return a}return e&&e.scaleFactor?e.scaleFactor:1},S={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};function P(e){return(e?Object.keys(e):[]).map((function(t){return{name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}}))}function _(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function R(e,t,r,a){var i,n;return"function"==typeof e.materialHash?(i=(0,e.materialHash)(t,r,a),n=Object(m.a)(e.cim,e.materialOverrides)):(i=e.materialHash,n=e.cim),{analyzedCIM:n,hash:i}}var A=new(function(){function e(t,r){Object(s.a)(this,e),this._spatialReference=t,this._avoidSDF=r,this._resourceCache=new Map,this._rasterizer=new d.a,this._textRasterizer=new p,this._pictureMarkerCache=new Map}var t,r,i;return Object(c.a)(e,[{key:"rasterizeCIMSymbolAsync",value:(i=Object(a.a)(n.a.mark((function e(t,r,a,i,o,s,c,l){var h;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=i||(r?null!=r.centroid?"esriGeometryPolygon":Object(f.c)(r.geometry):null)||_(t),e.next=3,this.analyzeCIMSymbol(t,r?P(r.attributes):null,a,i,l);case 3:return h=e.sent,e.abrupt("return",this.rasterizeCIMSymbol(h,r,i,o,s,c));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r,a,n,o,s,c){return i.apply(this,arguments)})},{key:"analyzeCIMSymbol",value:(r=Object(a.a)(n.a.mark((function e(t,r,a,i,o){var s,c,l,u,f,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],c=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null,e.next=3,Object(m.b)(t.data,c,s,this._avoidSDF);case 3:for(Object(h.v)(o),u=0,f=s;u<f.length;u++)"CIMPictureMarker"!==(d=f[u]).cim.type&&"CIMPictureFill"!==d.cim.type&&"CIMPictureStroke"!==d.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(d,o))),a&&"text"===d.type&&"string"==typeof d.text&&d.text.indexOf("[")>-1&&(d.text=Object(C.c)(a,d.text,d.cim.textCase));if(e.t0=l,!e.t0){e.next=9;break}return e.next=9,Promise.all(l);case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,a,i,n){return r.apply(this,arguments)})},{key:"fetchPictureMarkerResource",value:(t=Object(a.a)(n.a.mark((function e(t,r){var a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.materialHash,this._pictureMarkerCache.get(a)){e.next=6;break}return e.next=4,Object(l.default)(t.cim.url,{responseType:"image",signal:r&&r.signal});case 4:i=e.sent.data,this._pictureMarkerCache.set(a,i);case 6:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"rasterizeCIMSymbol",value:function(e,t,r,a,i,n){var o,s=[],c=z(e);try{for(c.s();!(o=c.n()).done;){var l=o.value;a&&"function"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,n));var h=this._getRasterizedResource(l,t,r,a,i,n);if(h){var u=0,f=h.anchorX||0,m=h.anchorY||0,d=!1,y=0,g=0;if("esriGeometryPoint"===r){var v=j(a,l,null);if(y=Object(C.d)(l.offsetX,t,i,n)*v||0,g=Object(C.d)(l.offsetY,t,i,n)*v||0,"marker"===l.type)u=Object(C.d)(l.rotation,t,i,n)||0,d=!!l.rotateClockwise&&l.rotateClockwise;else if("text"===l.type){if(u=Object(C.d)(l.angle,t,i,n)||0,void 0!==l.horizontalAlignment)switch(l.horizontalAlignment){case"left":f=-.5;break;case"right":f=.5;break;default:f=0}if(void 0!==l.verticalAlignment)switch(l.verticalAlignment){case"top":m=.5;break;case"bottom":m=-.5;break;case"baseline":m=-.25;break;default:m=0}}}null!=h&&s.push({angle:u,rotateClockWise:d,anchorX:f,anchorY:m,offsetX:y,offsetY:g,rasterizedResource:h})}}}catch(p){c.e(p)}finally{c.f()}return this.getSymbolImage(s)}},{key:"getSymbolImage",value:function(e){for(var t=document.createElement("canvas"),r=t.getContext("2d"),a=0,i=0,n=0,s=0,c=[],l=0;l<e.length;l++){var h=e[l],u=h.rasterizedResource;if(u){var f=u.size,m=h.offsetX,d=h.offsetY,y=h.anchorX,g=h.anchorY,v=h.rotateClockWise||!1,p=h.angle,b=Object(o.c)(m)-f[0]*(.5+y),x=Object(o.c)(d)-f[1]*(.5+g),M=b+f[0],w=x+f[1];if(p){v&&(p=-p);var C=Math.sin(p*Math.PI/180),O=Math.cos(p*Math.PI/180),z=b*O-x*C,k=b*C+x*O,j=b*O-w*C,S=b*C+w*O,P=M*O-w*C,_=M*C+w*O,R=M*O-x*C,A=M*C+x*O;b=Math.min(z,j,P,R),x=Math.min(k,S,_,A),M=Math.max(z,j,P,R),w=Math.max(k,S,_,A)}a=b<a?b:a,i=x<i?x:i,n=M>n?M:n,s=w>s?w:s;var H=r.createImageData(u.size[0],u.size[1]);H.data.set(new Uint8ClampedArray(u.image.buffer));var D={offsetX:m,offsetY:d,rotateClockwise:v,angle:p,rasterizedImage:H,anchorX:y,anchorY:g};c.push(D)}}t.width=n-a,t.height=s-i;for(var T=-a,L=s,F=0;F<c.length;F++){var X=c[F],Y=this._imageDataToCanvas(X.rasterizedImage),W=X.rasterizedImage.width,E=X.rasterizedImage.height,G=T-W*(.5+X.anchorX),U=L-E*(.5-X.anchorY);if(X.angle){var N=(360-X.angle)*Math.PI/180;r.save(),r.translate(Object(o.c)(X.offsetX),-Object(o.c)(X.offsetY)),r.translate(T,L),r.rotate(N),r.translate(-T,-L),r.drawImage(Y,G,U),r.restore()}else r.drawImage(Y,G+Object(o.c)(X.offsetX),U-Object(o.c)(X.offsetY))}var J=new I.b({x:T/t.width-.5,y:L/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:J}}},{key:"_imageDataToCanvas",value:function(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var t=this._imageDataCanvas,r=t.getContext("2d");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}},{key:"_imageTo32Array",value:function(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var a=this._imageDataCanvas,i=a.getContext("2d");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}},{key:"_getRasterizedResource",value:function(e,t,r,a,i,n){var o,s,c,l;if("esriGeometryPolyline"===r||"esriGeometryPolygon"===r){var h=a&&a.style?a.style:M.Legend,f="esriGeometryPolyline"===r?S.stroke[h]:S.fill[h];if("line"===e.type){var m;if("CIMSolidStroke"!==e.cim.type){if("CIMPictureStroke"===e.cim.type){var d=Object(C.d)(e.width,t,i,n),y=this._getPictureResource(e,d),g=y.image,v=y.width,p=y.height;return this._rasterizePictureResource(e,g,v,p,f,d)}return null}o=(m=R(e,t,i,n)).analyzedCIM,c=m.hash,s=this._embedCIMLayerInVectorMarker(o,f)}else if("marker"===e.type){if("CIMPictureMarker"===e.cim.type)return null;if("CIMVectorMarker"!==e.cim.type)return null;e.cim.offsetX=Object(C.d)(e.offsetX,t,i,n),e.cim.offsetY=Object(C.d)(e.offsetY,t,i,n),e.cim.rotation=Object(C.d)(e.rotation,t,i,n),e.cim.markerPlacement=e.markerPlacement,o=R(e,t,i,n).analyzedCIM,c=Object(u.b)(JSON.stringify(o)).toString(),s=this._embedCIMLayerInVectorMarker(o,f)}else{if("text"===e.type)return null;if("fill"===e.type){var b;if("CIMHatchFill"===e.cim.type||"CIMVectorMarker"===e.cim.type||"CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){var x,w,I,z=e.cim.size||e.cim.height;if("CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){var k=this._getPictureResource(e,z);x=k.image,w=k.width,I=k.height}else{var P=R(e,t,i,n);o=P.analyzedCIM,c=P.hash;var _=this._rasterizer.rasterizeJSONResource(o,1,this._avoidSDF);x=_.image,w=_.size[0],I=_.size[1]}return this._rasterizePictureResource(e,x,w,I,f,null)}if("CIMSolidFill"!==e.cim.type)return null;o=(b=R(e,t,i,n)).analyzedCIM,c=b.hash,s=this._embedCIMLayerInVectorMarker(o,f)}}}else{if("text"===e.type)return l=this._rasterizeTextResource(e,t,a,i,n);var A=R(e,t,i,n);o=A.analyzedCIM,c=A.hash;var H=j(a,e,null);if("CIMPictureMarker"===e.cim.type){var D=Object(C.d)(e.size,t,i,n)*H,T=this._getPictureResource(e,D);return l={image:T.image,size:[T.width,T.height],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0}}Object(O.d)(o,H,{preserveOutlineWidth:!1}),s=o}c+=r,a&&(c+=JSON.stringify(a));var L=this._resourceCache;return L.has(c)?L.get(c):(l=this._rasterizer.rasterizeJSONResource(s,window.devicePixelRatio||1,this._avoidSDF),L.set(c,l),l)}},{key:"_rasterizeTextResource",value:function(e,t,r,a,i){var n=j(r,e,null),o=Object(C.d)(e.text,t,a,i);if(!o||0===o.length)return null;var s=Object(C.d)(e.fontName,t,a,i),c=Object(C.d)(e.style,t,a,i),l=Object(C.d)(e.weight,t,a,i),h=Object(C.d)(e.decoration,t,a,i),u=Object(C.d)(e.size,t,a,i)*n,f=Object(C.d)(e.horizontalAlignment,t,a,i),m=Object(C.d)(e.verticalAlignment,t,a,i),d=Object(C.b)(Object(C.d)(e.color,t,a,i)),y=Object(C.b)(Object(C.d)(e.outlineColor,t,a,i)),g={color:d,size:u,horizontalAlignment:f,verticalAlignment:m,font:{family:s,style:c,weight:l,decoration:h},halo:{size:Object(C.d)(e.outlineSize,t,a,i)||0,color:y,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,g)}},{key:"_rasterizePictureResource",value:function(e,t,r,a,i,n){var s=document.createElement("canvas"),c=s.getContext("2d");s.height=Object(o.c)(Math.max(Math.abs(i.frame.ymax-i.frame.ymin),n)),s.width=Object(o.c)(Math.abs(i.frame.xmax-i.frame.xmin));var l=c.createImageData(r,a);l.data.set(new Uint8ClampedArray(t.buffer));var h=this._imageDataToCanvas(l),u=c.createPattern(h,"repeat"),m=Math.cos((-e.cim.rotation||0)*Math.PI/180),d=Math.sin((-e.cim.rotation||0)*Math.PI/180);u.setTransform({m11:m,m12:d,m21:-d,m22:m,m41:Object(o.c)(e.cim.offsetX)||0,m42:Object(o.c)(e.cim.offsetY)||0});var y,g,v,p=i.canvasPaths;Object(f.g)(p)?(y=p.rings,c.fillStyle=u,g=c.fill,v=["evenodd"]):Object(f.h)(p)&&(y=p.paths,c.strokeStyle=u,c.lineWidth=n,g=c.stroke,y[0][0][1]=s.height/2,y[0][1][1]=s.height/2),c.beginPath();var b,x=z(y);try{for(x.s();!(b=x.n()).done;){var M=b.value,w=M?M.length:0;if(w>1){var C=M[0];c.moveTo(Object(o.c)(C[0]),Object(o.c)(C[1]));for(var O=1;O<w;++O)C=M[O],c.lineTo(Object(o.c)(C[0]),Object(o.c)(C[1]));c.closePath()}}}catch(j){x.e(j)}finally{x.f()}g.apply(c,v);var I=c.getImageData(0,0,s.width,s.height),k=new Uint8Array(I.data);return{size:[s.width,s.height],image:new Uint32Array(k.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}},{key:"_getPictureResource",value:function(e,t){var r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;var a=r.height/r.width,i=t?a>1?Object(o.c)(t):Object(o.c)(t)/a:r.width,n=t?a>1?Object(o.c)(t)*a:Object(o.c)(t):r.height;return{image:this._imageTo32Array(r,i,n),width:i,height:n}}},{key:"_embedCIMLayerInVectorMarker",value:function(e,t){var r=Object(f.g)(t.geometry)?"CIMPolygonSymbol":"CIMLineSymbol";return{type:"CIMVectorMarker",frame:t.frame,markerGraphics:[{type:"CIMMarkerGraphic",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}]),e}())(null,!0);function H(e){return D.apply(this,arguments)}function D(){return(D=Object(a.a)(n.a.mark((function e(t){var r,a,i,s,c,l,h,u,f,m,d,y,g,v,p,b,x,M,w,C=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=C.length>1&&void 0!==C[1]?C[1]:{},a=r.size,i=r.maxSize,s=r.node,c=r.opacity,l=r.cimOptions||r,h=l.feature,u=l.fieldMap,f=l.geometryType,m=l.style,d=Object(O.c)(t),(y=Math.min(null!=a?a:d,null!=i?i:Object(o.d)(120)))!==d&&(t=t.clone(),Object(O.e)(t,y,{preserveOutlineWidth:!0})),g=3,t&&t.data&&t.data.symbol&&"CIMPointSymbol"!==t.data.symbol.type&&(g=1),e.next=7,A.rasterizeCIMSymbolAsync(t,h,u,f,{scaleFactor:g,style:m});case 7:return v=e.sent,(p=document.createElement("canvas")).width=v.imageData.width,p.height=v.imageData.height,p.getContext("2d").putImageData(v.imageData,0,0),b=p.width/g,x=p.height/g,null==a||null!=(null==r?void 0:r.scale)&&!(null==r?void 0:r.scale)||(b=(M=b/x)<=1?Math.ceil(y*M):y,x=M<=1?y:Math.ceil(y/M)),w=new Image(b,x),e.abrupt("return",(w.src=p.toDataURL(),null!=c&&(w.style.opacity="".concat(c)),s&&s.appendChild(w),w));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=148-5a4b46f20c6c0e0dd89e.js.map