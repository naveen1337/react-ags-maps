{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/layers/support/Tilemap.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/layers/support/TilemapCache.js","webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/layers/TileLayer.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","l","this","location","left","top","width","height","_allAvailability","byteSize","value","t","e","a","_l","o","_tileAvailabilityBitSet","_l2","Math","ceil","n","Uint8Array","r","s","_i","service","request","row","h","col","c","m","d","query","f","type","concat","url","level","_e","tileServers","then","data","catch","details","httpStatus","valid","response","definition","fromJSON","validateJSON","freeze","_updateFromData","Array","isArray","_w","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","_isNativeReflectConstruct","result","Super","NewTarget","constructor","T","getLogger","j","w","_fetchAvailabilityUpsamplePrefetch2","_super","_this","_handles","_pendingTilemapRequests","_availableLevels","levels","cacheByteSize","_prefetchingEnabled","_this2","_tilemapCache","add","watch","_initializeTilemapDefinition","_initializeAvailableLevels","destroy","error","get","_this3","Promise","reject","_tmpTilemapDefinition","_tilemapFromCache","resolve","signal","fromDefinition","put","getAvailability","layer","tileInfo","updateTileInfo","_e2","upsampleTile","fetchTilemap","_s","_this4","fetchAvailability","fetchAvailabilityUpsample","_fetchAvailabilityUpsamplePrefetch","id","mark","_callee","v","_loop","_p","_this5","wrap","_context","prev","next","abrupt","has","abort","remove","_prefetches","removeUnordered","_maxPrefetch","stop","_x","_x2","_x3","_x4","_x5","_x6","parsedUrl","clear","path","size","_this6","hasTilemap","initialSize","constructOnly","Number","readOnly","I","M","_S","_len","_key","listMode","isReference","operationalLayerType","resampling","sourceJSON","spatialReference","sublayers","addResolvingPromise","loadFromPortal","supportedTypes","_fetchService","toLowerCase","_getDefaultAttribution","_getMapName","loaded","slice","reverse","flatten","_ref","toArray","writeSublayerStructure","write","some","layers","_getDefaultTileServers","map","undefined","timestamp","getTileUrl","responseType","_ts","tilemapCache","supportsBlankTile","blankTile","customParameters","token","apiKey","bandCount","pixelSizeX","serverType","ssl","replace","read","origin","version","_fetchServerVersion","currentVersion","match","_t","indexOf","search","fetchTile","__isDefault__","json","enabled","overridePolicy","String","origins","C"],"mappings":"qcAIA,SAASA,EAAQC,EAAQC,GAAkB,IAAIC,EAAOC,OAAOD,KAAKF,GAAS,GAAIG,OAAOC,sBAAuB,CAAE,IAAIC,EAAUF,OAAOC,sBAAsBJ,GAAaC,IAAkBI,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOJ,OAAOK,yBAAyBR,EAAQO,GAAKE,eAAkBP,EAAKQ,KAAKC,MAAMT,EAAMG,GAAY,OAAOH,EAElV,SAASU,EAAcC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAAQA,EAAI,EAAKf,EAAQI,OAAOc,IAAS,GAAMC,SAAQ,SAAUC,GAAO,YAAgBN,EAAQM,EAAKF,EAAOE,OAAsBhB,OAAOiB,0BAA6BjB,OAAOkB,iBAAiBR,EAAQV,OAAOiB,0BAA0BH,IAAmBlB,EAAQI,OAAOc,IAASC,SAAQ,SAAUC,GAAOhB,OAAOmB,eAAeT,EAAQM,EAAKhB,OAAOK,yBAAyBS,EAAQE,OAAe,OAAON,EAW7gB,IAAI,EAAiB,WACnB,SAASU,IACP,YAAgBC,KAAMD,GAEtBC,KAAKC,SAAW,CACdC,KAAM,EACNC,IAAK,EACLC,MAAO,EACPC,OAAQ,GACPL,KAAKM,iBAAmB,UAAWN,KAAKO,SAAW,GA8FxD,OA3FA,YAAaR,EAAG,CAAC,CACfJ,IAAK,kBACLa,MAAO,SAAyBC,EAAGnB,GACjC,GAAI,YAAcU,KAAKM,iBAAkB,OAAON,KAAKM,iBAErD,IAAII,GAAKD,EAAIT,KAAKC,SAASE,KAAOH,KAAKC,SAASG,OAASd,EAAIU,KAAKC,SAASC,MACvES,EAAID,EAAI,EACRE,EAAKF,GAAK,EACVG,EAAIb,KAAKc,wBAEb,OAAOF,EAAK,GAAKA,EAAKC,EAAErB,OAAS,UAAYqB,EAAED,GAAM,GAAKD,EAAI,YAAc,gBAE7E,CACDhB,IAAK,kBACLa,MAAO,SAAyBC,GAW9B,IAVA,IAAInB,EAAIU,KAAKC,SAASG,MAClBM,EAAIV,KAAKC,SAASI,OAElBM,GAAI,EACJI,GAAM,EAENF,EAAIG,KAAKC,KAAK3B,EAAIoB,EAAI,GACtBQ,EAAI,IAAIC,WAAWN,GACnBO,EAAI,EAECC,EAAI,EAAGA,EAAIZ,EAAEjB,OAAQ6B,IAAK,CACjC,IAAIC,EAAKD,EAAI,EAEbZ,EAAEY,IAAMN,GAAM,EAAIG,EAAEE,IAAM,GAAKE,GAAMX,GAAI,EAAI,IAAMW,KAAQF,EAG7DL,EAAMf,KAAKM,iBAAmB,cAAgBK,EAAIX,KAAKM,iBAAmB,aAAeN,KAAKM,iBAAmB,UAAWN,KAAKc,wBAA0BI,EAAGlB,KAAKO,UAAYW,EAAE1B,WAEjL,CAAC,CACHG,IAAK,iBACLa,MAAO,SAAwBG,EAAGE,GAChC,IAAIO,EAAIT,EAAEY,QAAQC,SAAW,UACzBH,EAAIV,EAAEc,IACNC,EAAIf,EAAEgB,IACNC,EAAIjB,EAAEP,MACNyB,EAAIlB,EAAEN,OACNyB,EAAI,CACNC,MAAO,CACLC,EAAG,SAGP,OAAOnB,EAAIA,EAAIzB,EAAcA,EAAc,GAAI0C,GAAIjB,GAAKiB,EAAGV,EAoDjE,SAAWX,GACT,IAAInB,EACJ,GAAI,gBAAkBmB,EAAEc,QAAQU,KAAM3C,EAAI,GAAG4C,OAAOzB,EAAEc,QAAQY,IAAK,aAAaD,OAAOzB,EAAE2B,MAAO,KAAKF,OAAOzB,EAAEgB,IAAK,KAAKS,OAAOzB,EAAEkB,IAAK,KAAKO,OAAOzB,EAAEL,MAAO,KAAK8B,OAAOzB,EAAEJ,YAAa,CACpL,IAAIgC,EAAK5B,EAAEc,QAAQe,YACnBhD,EAAI,GAAG4C,OAAOG,GAAMA,EAAG7C,OAAS6C,EAAG5B,EAAEgB,IAAMY,EAAG7C,QAAUiB,EAAEc,QAAQY,IAAK,aAAaD,OAAOzB,EAAE2B,MAAO,KAAKF,OAAOzB,EAAEgB,IAAK,KAAKS,OAAOzB,EAAEkB,IAAK,KAAKO,OAAOzB,EAAEL,MAAO,KAAK8B,OAAOzB,EAAEJ,QAE/K,IAAIK,EAAID,EAAEc,QAAQQ,MAClB,OAAOrB,IAAMpB,EAAI,GAAG4C,OAAO5C,EAAG,KAAK4C,OAAOxB,IAAKpB,EA3DkB,CAAEqB,GAAIE,GAAG0B,MAAK,SAAU9B,GACnF,OAAOA,EAAE+B,QACRC,OAAM,SAAUhC,GACjB,GAAIA,GAAKA,EAAEiC,SAAW,MAAQjC,EAAEiC,QAAQC,WAAY,MAAO,CACzD1C,SAAU,CACRE,IAAKkB,EACLnB,KAAMwB,EACNtB,MAAOwB,EACPvB,OAAQwB,GAEVe,OAAO,EACPJ,KAAM,YAAEZ,EAAIC,EAAG,IAEjB,MAAMpB,KACL8B,MAAK,SAAU9B,GAChB,GAAIA,EAAER,WAAaQ,EAAER,SAASE,MAAQkB,GAAKZ,EAAER,SAASC,OAASwB,GAAKjB,EAAER,SAASG,QAAUwB,GAAKnB,EAAER,SAASI,SAAWwB,GAAI,MAAM,IAAI,IAAE,4BAA6B,yDAA0D,CACzNgB,SAAUpC,EACVqC,WAAY,CACV3C,IAAKkB,EACLnB,KAAMwB,EACNtB,MAAOwB,EACPvB,OAAQwB,KAGZ,OAAO9B,EAAEgD,SAAStC,QAGrB,CACDd,IAAK,WACLa,MAAO,SAAkBC,GACvBV,EAAEiD,aAAavC,GACf,IAAInB,EAAI,IAAIS,EACZ,OAAOT,EAAEW,SAAWtB,OAAOsE,OAAO,YAAExC,EAAER,WAAYX,EAAE4D,gBAAgBzC,EAAE+B,MAAO7D,OAAOsE,OAAO3D,KAE5F,CACDK,IAAK,eACLa,MAAO,SAAsBC,GAC3B,IAAKA,IAAMA,EAAER,SAAU,MAAM,IAAI,IAAE,2BAA4B,0CAC/D,IAAI,IAAOQ,EAAEmC,MAAO,MAAM,IAAI,IAAE,kBAAmB,0CACnD,IAAKnC,EAAE+B,KAAM,MAAM,IAAI,IAAE,uBAAwB,sCACjD,IAAKW,MAAMC,QAAQ3C,EAAE+B,MAAO,MAAM,IAAI,IAAE,wBAAyB,oCACjE,GAAI/B,EAAE+B,KAAKhD,SAAWiB,EAAER,SAASG,MAAQK,EAAER,SAASI,OAAQ,MAAM,IAAI,IAAE,wBAAyB,mEAI9FN,EAvGY,GA0GrB,SAAS,EAAEU,GACT,MAAO,GAAGyB,OAAOzB,EAAE2B,MAAO,KAAKF,OAAOzB,EAAEgB,IAAK,KAAKS,OAAOzB,EAAEkB,IAAK,KAAKO,OAAOzB,EAAEL,MAAO,KAAK8B,OAAOzB,EAAEJ,QAatF,IClGXgD,EA9BJ,SAAS,EAAQ7E,EAAQC,GAAkB,IAAIC,EAAOC,OAAOD,KAAKF,GAAS,GAAIG,OAAOC,sBAAuB,CAAE,IAAIC,EAAUF,OAAOC,sBAAsBJ,GAAaC,IAAkBI,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOJ,OAAOK,yBAAyBR,EAAQO,GAAKE,eAAkBP,EAAKQ,KAAKC,MAAMT,EAAMG,GAAY,OAAOH,EAElV,SAAS,EAAcW,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAAQA,EAAI,EAAK,EAAQX,OAAOc,IAAS,GAAMC,SAAQ,SAAUC,GAAO,YAAgBN,EAAQM,EAAKF,EAAOE,OAAsBhB,OAAOiB,0BAA6BjB,OAAOkB,iBAAiBR,EAAQV,OAAOiB,0BAA0BH,IAAmB,EAAQd,OAAOc,IAASC,SAAQ,SAAUC,GAAOhB,OAAOmB,eAAeT,EAAQM,EAAKhB,OAAOK,yBAAyBS,EAAQE,OAAe,OAAON,EAE7gB,SAASiE,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAsF,OAAhFC,QAAQC,UAAUC,QAAQC,KAAKP,QAAQC,UAAUG,QAAS,IAAI,iBAAyB,EAAQ,MAAOnD,GAAK,OAAO,GAF9PuD,GAA6B,OAAO,WAAkC,IAAsCC,EAAlCC,EAAQ,YAAgBZ,GAAkB,GAAIC,EAA2B,CAAE,IAAIY,EAAY,YAAgBpE,MAAMqE,YAAaH,EAAST,QAAQC,UAAUS,EAAO5E,UAAW6E,QAAqBF,EAASC,EAAMhF,MAAMa,KAAMT,WAAc,OAAO,YAA2BS,KAAMkE,IA4B5Z,IAAII,EAAI,IAAEC,UAAU,oCAEhBC,EAAInB,EAAkB,SAAU/B,GAClC,YAAUmD,EAAGnD,GAEb,IAqIQoD,EArIJC,EAASrB,EAAamB,GAE1B,SAASA,EAAE/D,GACT,IAAIkE,EAKJ,OAHA,YAAgB5E,KAAMyE,IAEtBG,EAAQD,EAAOX,KAAKhE,KAAMU,IAAUmE,SAAW,IAAI,IAAKD,EAAME,wBAA0B,GAAIF,EAAMG,iBAAmB,GAAIH,EAAMI,OAAS,EAAGJ,EAAMK,cAAgB,QAASL,EAAMpD,QAAU,UAAGoD,EAAMM,qBAAsB,EAClNN,EAqRT,OAlRA,YAAaH,EAAG,CAAC,CACf9E,IAAK,aACLa,MAAO,WACL,IAAI2E,EAASnF,KAEbA,KAAKoF,cAAgB,IAAI,IAAEpF,KAAKiF,eAAgBjF,KAAK6E,SAASQ,IAAI,CAACrF,KAAKsF,MAAM,CAAC,kBAAmB,uBAAuB,WACvH,OAAOH,EAAOI,kCACZ,YAAEvF,KAAM,uBAAuB,SAAUU,GAC3C,OAAOyE,EAAOK,2BAA2B9E,MACxC,KAAOV,KAAKuF,iCAEhB,CACD5F,IAAK,UACLa,MAAO,WACLR,KAAK6E,WAAa7E,KAAK6E,SAASY,UAAWzF,KAAK6E,SAAW,QAE5D,CACDlF,IAAK,aACLa,MAAO,SAAoBE,GACzB,OAAOA,GAAK,GAAK4D,EAAEoB,MAAM,4CAA6ChF,GAAI,GAAKA,IAEhF,CACDf,IAAK,OACLgG,IAAK,WACH,OAAO,GAAK3F,KAAKgF,SAElB,CACDrF,IAAK,eACLa,MAAO,SAAsBE,EAAGD,EAAGnB,EAAG8B,GACpC,IAAIwE,EAAS5F,KAEb,IAAKA,KAAK+E,iBAAiBrE,GAAI,OAAOmF,QAAQC,OAAO,IAAI,IAAE,kCAAmC,SAAS5D,OAAOxB,EAAG,oCAEjH,IAAIW,EAAIrB,KAAK+F,sBACTpF,EAAIX,KAAKgG,kBAAkBtF,EAAGD,EAAGnB,EAAG+B,GAExC,GAAIV,EAAG,OAAOkF,QAAQI,QAAQtF,GAC9B,IAAIE,EAAIO,GAAKA,EAAE8E,OACf,OAAO9E,EAAI,EAAc,EAAc,GAAIA,GAAI,GAAI,CACjD8E,OAAQ,OACN,IAAIL,SAAQ,SAAUnF,EAAGD,GAC3B,YAAEI,GAAG,WACH,OAAOJ,EAAE,kBAEX,IAAInB,EAAI,EAAE+B,GACNtB,EAAI6F,EAAOd,wBAAwBxF,GAEvC,IAAKS,EAAG,CACNA,EAAI,EAAEoG,eAAe9E,EAAGD,GAAGmB,MAAK,SAAU7B,GACxC,OAAOkF,EAAOR,cAAcgB,IAAI9G,EAAGoB,EAAGA,EAAEH,UAAWG,KAGrD,IAAI2B,EAAK,WACP,cAAcuD,EAAOd,wBAAwBxF,IAG/CsG,EAAOd,wBAAwBxF,GAAKS,EAAGA,EAAEwC,KAAKF,EAAIA,GAGpDtC,EAAEwC,KAAK7B,EAAGD,QAGb,CACDd,IAAK,kBACLa,MAAO,SAAyBE,EAAGD,EAAGnB,GACpC,IAAKU,KAAK+E,iBAAiBrE,GAAI,MAAO,cAEtC,IAAIX,EAAIC,KAAKgG,kBAAkBtF,EAAGD,EAAGnB,EAAGU,KAAK+F,uBAE7C,OAAOhG,EAAIA,EAAEsG,gBAAgB5F,EAAGnB,GAAK,YAEtC,CACDK,IAAK,0BACLa,MAAO,SAAiCE,EAAGD,EAAGnB,EAAGS,GAC/CA,EAAEqC,MAAQ1B,EAAGX,EAAE0B,IAAMhB,EAAGV,EAAE4B,IAAMrC,EAChC,IAAI8B,EAAIpB,KAAKsG,MAAMC,SAEnB,IAAKnF,EAAEoF,eAAezG,KAAM,CAC1B,IAAI0G,EAAMzG,KAAKqG,gBAAgBtG,EAAEqC,MAAOrC,EAAE0B,IAAK1B,EAAE4B,KAEjD,GAAI,gBAAkB8E,EAAK,OAAOA,EAClC,IAAKrF,EAAEsF,aAAa3G,GAAI,MAAO,iBAGlC,CACDJ,IAAK,oBACLa,MAAO,SAA2BE,EAAGD,EAAGnB,EAAG8B,GACzC,OAAOpB,KAAK+E,iBAAiBrE,GAAKV,KAAK2G,aAAajG,EAAGD,EAAGnB,EAAG8B,GAAGqB,OAAM,SAAU/B,GAC9E,OAAOA,KACN6B,MAAK,SAAUnB,GAChB,GAAIA,aAAa,EAAG,CAClB,IAAIwF,EAAKxF,EAAEiF,gBAAgB5F,EAAGnB,GAE9B,MAAO,gBAAkBsH,EAAKf,QAAQC,OAAO,IAAI,IAAE,4BAA6B,wBAAyB,CACvG1D,MAAO1B,EACPe,IAAKhB,EACLkB,IAAKrC,KACDsH,EAGR,GAAI,YAAExF,GAAI,MAAMA,EAChB,MAAO,aACJyE,QAAQC,OAAO,IAAI,IAAE,kCAAmC,SAAS5D,OAAOxB,EAAG,sCAEjF,CACDf,IAAK,4BACLa,MAAO,SAAmCE,EAAGD,EAAGnB,EAAGS,EAAGqB,GACpD,IAAIyF,EAAS7G,KAEbD,EAAEqC,MAAQ1B,EAAGX,EAAE0B,IAAMhB,EAAGV,EAAE4B,IAAMrC,EAChC,IAAI+B,EAAIrB,KAAKsG,MAAMC,SACnBlF,EAAEmF,eAAezG,GACjB,IAAIY,EAAIX,KAAK8G,kBAAkBpG,EAAGD,EAAGnB,EAAG8B,GAAGqB,OAAM,SAAU/B,GACzD,GAAI,YAAEA,GAAI,MAAMA,EAChB,GAAIW,EAAEqF,aAAa3G,GAAI,OAAO8G,EAAOE,0BAA0BhH,EAAEqC,MAAOrC,EAAE0B,IAAK1B,EAAE4B,IAAK5B,GACtF,MAAMW,KAER,OAAOV,KAAKgH,mCAAmCjH,EAAEkH,GAAIvG,EAAGD,EAAGnB,EAAG8B,EAAGT,GAAIA,IAEtE,CACDhB,IAAK,qCACLa,OACMkE,EAAsC,YAAgC,IAAoBwC,MAAK,SAASC,EAAQzG,EAAGD,EAAGnB,EAAGS,EAAGqB,EAAGC,GACjI,IAEIV,EAAGE,EAAGK,EAAGU,EAAGF,EAAGM,EAAGoF,EAAGC,EAAOC,EAF5BC,EAASvH,KAIb,OAAO,IAAoBwH,MAAK,SAAkBC,GAChD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EACH,GAAI3H,KAAKkF,oBAAqB,CAC5BuC,EAASE,KAAO,EAChB,MAGF,OAAOF,EAASG,OAAO,UAEzB,KAAK,EAGH,GAFAjH,EAAI,YAAYuB,OAAOxB,IAElBV,KAAK6E,SAASgD,IAAIlH,GAAI,CACzB8G,EAASE,KAAO,EAChB,MAGF,OAAOF,EAASG,OAAO,UAEzB,KAAK,EAiBH,OAhBA/G,EAAI,cACJQ,EAAEkB,MAAK,WACL,OAAO1B,EAAEiH,WACR,WACD,OAAOjH,EAAEiH,WAEX5G,GAAI,EACJU,EAAI,CACFmG,OAAQ,WACN7G,IAAMA,GAAI,EAAIL,EAAEiH,WAIpB9H,KAAK6E,SAASQ,IAAIzD,EAAGjB,GAErB8G,EAASE,KAAO,GACT,YAAE,GAAI9G,EAAEqF,QAAQzD,OAAM,eAE/B,KAAK,GAGH,GAFAvB,IAAMA,GAAI,EAAIlB,KAAK6E,SAASkD,OAAOpH,KAE9B,YAAEE,GAAI,CACT4G,EAASE,KAAO,GAChB,MAGF,OAAOF,EAASG,OAAO,UAEzB,KAAK,GAsBH,IArBAlG,EAAI,CACFuF,GAAIvG,EACJ0B,MAAO3B,EACPgB,IAAKnC,EACLqC,IAAK5B,GACJiC,EAAI,EAAc,EAAc,GAAIZ,GAAI,GAAI,CAC7C8E,OAAQrF,EAAEqF,SACRkB,EAAIpH,KAAKsG,MAAMC,SAEnBc,EAAQ,SAAeC,GACrB,IAAI5G,EAAI6G,EAAOT,kBAAkBpF,EAAEU,MAAOV,EAAED,IAAKC,EAAEC,IAAKK,GAExDqB,EAAG2E,YAAY9I,KAAKwB,GAEpB,IAAID,EAAI,WACN4C,EAAG2E,YAAYC,gBAAgBvH,IAGjCA,EAAE6B,KAAK9B,EAAGA,IAGP6G,EAAK,EAAGjE,EAAG2E,YAAYxI,OAAS6D,EAAG6E,cAAgBd,EAAEV,aAAahF,KAAM4F,EAC3ED,IAGJ,KAAK,GACL,IAAK,MACH,OAAOI,EAASU,UAGrBhB,EAASnH,UAGd,SAA4CoI,EAAIC,EAAKC,EAAKC,EAAKC,EAAKC,GAClE,OAAO/D,EAAoCvF,MAAMa,KAAMT,cAK1D,CACDI,IAAK,+BACLa,MAAO,WACL,GAAKR,KAAKsG,MAAMoC,UAAhB,CACA,IAAIhI,EAAIV,KAAKsG,MAAMoC,UACfjI,EAAIC,EAAEqB,MACV/B,KAAKoF,cAAcuD,QAAS3I,KAAK+F,sBAAwB,CACvDxE,QAAS,CACPY,IAAKzB,EAAEkI,KACP7G,MAAOtB,EAAI,YAAEA,GAAK,KAClB6B,YAAatC,KAAKsG,MAAMhE,YACxBd,QAASxB,KAAKwB,QACdS,KAAMjC,KAAKsG,MAAMrE,MAEnB7B,MAAOJ,KAAK6I,KACZxI,OAAQL,KAAK6I,KACbzG,MAAO,EACPX,IAAK,EACLE,IAAK,MAGR,CACDhC,IAAK,oBACLa,MAAO,SAA2BE,EAAGD,EAAGnB,EAAGS,GACzCA,EAAEqC,MAAQ1B,EAAGX,EAAE0B,IAAMhB,EAAIA,EAAIT,KAAK6I,KAAM9I,EAAE4B,IAAMrC,EAAIA,EAAIU,KAAK6I,KAC7D,IAAIzH,EAAI,EAAErB,GACV,OAAOC,KAAKoF,cAAcO,IAAIvE,KAE/B,CACDzB,IAAK,6BACLa,MAAO,SAAoCE,GACzC,IAAIoI,EAAS9I,KAEbA,KAAK+E,iBAAmB,GAAIrE,GAAKA,EAAEhB,SAAQ,SAAUgB,GACnD,OAAOoI,EAAO/D,iBAAiBrE,EAAE0B,QAAS,OAG7C,CACDzC,IAAK,OACLgG,IAAK,WACH,IAAIjF,EAAIV,KACR,MAAO,CACL,yBACE,OAAOU,EAAEwE,qBAGX,uBAAuBzE,GACrBC,EAAEwE,oBAAsBzE,GAG1BsI,WAAY,SAAoBtI,EAAGnB,EAAGS,GACpC,QAASW,EAAEsF,kBAAkBvF,EAAGnB,EAAGS,EAAGW,EAAEqF,6BAMzCtB,EAhSiB,CAiSxB,KAEFD,EAAE0D,aAAe,EAAG1D,EAAEwD,YAAc,IAAI,IAAE,CACxCgB,YAAa3F,EAAG6E,eACd,YAAE,CAAC,YAAE,CACPe,eAAe,EACfhH,KAAMiH,UACH1E,EAAEV,UAAW,cAAU,GAAS,YAAE,CAAC,YAAE,WAAYU,EAAEV,UAAW,aAAc,MAAO,YAAE,CAAC,YAAE,CAC3FqF,UAAU,EACVlH,KAAMiH,UACH1E,EAAEV,UAAW,OAAQ,MAAO,YAAE,CAAC,YAAE,CACpCmF,eAAe,EACfhH,KAAMiH,UACH1E,EAAEV,UAAW,qBAAiB,GAAS,YAAE,CAAC,YAAE,CAC/CmF,eAAe,KACZzE,EAAEV,UAAW,aAAS,GAAS,YAAE,CAAC,YAAE,CACvCmF,eAAe,KACZzE,EAAEV,UAAW,eAAW,GAASU,EAAInB,EAAK,YAAE,CAAC,YAAE,qCAAsCmB,I,kCC7V1F,mdAOA,SAASjG,EAAQC,EAAQC,GAAkB,IAAIC,EAAOC,OAAOD,KAAKF,GAAS,GAAIG,OAAOC,sBAAuB,CAAE,IAAIC,EAAUF,OAAOC,sBAAsBJ,GAAaC,IAAkBI,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOJ,OAAOK,yBAAyBR,EAAQO,GAAKE,eAAkBP,EAAKQ,KAAKC,MAAMT,EAAMG,GAAY,OAAOH,EAElV,SAASU,EAAcC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAAQA,EAAI,EAAKf,EAAQI,OAAOc,IAAS,GAAMC,SAAQ,SAAUC,GAAO,YAAgBN,EAAQM,EAAKF,EAAOE,OAAsBhB,OAAOiB,0BAA6BjB,OAAOkB,iBAAiBR,EAAQV,OAAOiB,0BAA0BH,IAAmBlB,EAAQI,OAAOc,IAASC,SAAQ,SAAUC,GAAOhB,OAAOmB,eAAeT,EAAQM,EAAKhB,OAAOK,yBAAyBS,EAAQE,OAAe,OAAON,EAE7gB,SAASiE,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAsF,OAAhFC,QAAQC,UAAUC,QAAQC,KAAKP,QAAQC,UAAUG,QAAS,IAAI,iBAAyB,EAAQ,MAAOnD,GAAK,OAAO,GAF9PuD,GAA6B,OAAO,WAAkC,IAAsCC,EAAlCC,EAAQ,YAAgBZ,GAAkB,GAAIC,EAA2B,CAAE,IAAIY,EAAY,YAAgBpE,MAAMqE,YAAaH,EAAST,QAAQC,UAAUS,EAAO5E,UAAW6E,QAAqBF,EAASC,EAAMhF,MAAMa,KAAMT,WAAc,OAAO,YAA2BS,KAAMkE,IAwC5Z,IAAIkF,EAAI,CAAC,8BAA+B,mCAAoC,+BAAgC,oCAAqC,4BAA6B,iCAAkC,yBAA0B,8BAA+B,gBAAiB,wCAAyC,kDAAmD,iCAAkC,gBAAiB,mBAAoB,kBAEzbC,EAAiB,SAAUC,GAC7B,YAAUD,EAAGC,GAEb,IAAI3E,EAASrB,EAAa+F,GAE1B,SAASA,IACP,IAAIzE,EAEJ,YAAgB5E,KAAMqJ,GAEtB,IAAK,IAAIE,EAAOhK,UAAUC,OAAQkB,EAAI,IAAIyC,MAAMoG,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC5E9I,EAAE8I,GAAQjK,UAAUiK,GAItB,OADA5E,EAAQD,EAAOX,KAAK7E,MAAMwF,EAAQ,CAAC3E,MAAMkC,OAAOxB,KAAW+I,SAAW,OAAQ7E,EAAM8E,YAAc,KAAM9E,EAAM+E,qBAAuB,6BAA8B/E,EAAMgF,YAAa,EAAIhF,EAAMiF,WAAa,KAAMjF,EAAMkF,iBAAmB,KAAMlF,EAAMgE,KAAO,KAAMhE,EAAMmF,UAAY,KAAMnF,EAAM3C,KAAO,OAAQ2C,EAAMzC,IAAM,KACvTyC,EAsLT,OAnLA,YAAayE,EAAG,CAAC,CACf1J,IAAK,oBACLa,MAAO,SAA2BE,EAAGU,GACnC,MAAO,iBAAmBV,EAAItB,EAAc,CAC1C+C,IAAKzB,GACJU,GAAKV,IAET,CACDf,IAAK,OACLa,MAAO,SAAcE,GACnB,IAAIyE,EAASnF,KAEToB,EAAI,YAAEV,GAAKA,EAAEwF,OAAS,KAC1B,OAAOlG,KAAKgK,oBAAoBhK,KAAKiK,eAAe,CAClDC,eAAgB,CAAC,gBAChBxJ,GAAG+B,MAAM,KAAGF,MAAK,WAClB,OAAO4C,EAAOgF,cAAc/I,OACzByE,QAAQI,QAAQjG,QAEtB,CACDL,IAAK,qBACLgG,IAAK,WACH,IAAIjF,EACAU,EAAI,OAASV,EAAIV,KAAK0I,gBAAa,EAAShI,EAAEkI,KAAKwB,cACvD,OAAOhJ,GAAKpB,KAAKqK,uBAAuBrK,KAAKsK,YAAYlJ,MAE1D,CACDzB,IAAK,uBACLa,MAAO,SAA8BE,EAAGU,GACtC,OAAQV,EAAIA,GAAKU,EAAEmF,UAAYnF,EAAEmF,SAASuD,mBAAqB,IAAE/G,SAASrC,KAE3E,CACDf,IAAK,iBACLa,MAAO,SAAwBE,EAAGU,EAAGX,EAAGY,GACtC,GAAKrB,KAAKuK,QAAW7J,EAArB,CAEA,IAAIpB,EAAIoB,EAAE8J,QAAQC,UAAUC,SAAQ,SAAUC,GAC5C,IAAIjK,EAAIiK,EAAKZ,UACb,OAAOrJ,GAAKA,EAAEkK,UAAUH,aACvBG,UACC/J,EAAI,GACJF,EAAIvB,EAAc,CACpByL,wBAAwB,GACvBxJ,GAEH/B,EAAEI,SAAQ,SAAUgB,GAClB,IAAIU,EAAIV,EAAEoK,MAAM,GAAInK,GACpBE,EAAE3B,KAAKkC,MAETP,EAAEkK,MAAK,SAAUrK,GACf,OAAO/B,OAAOD,KAAKgC,GAAGlB,OAAS,OAC1B4B,EAAE4J,OAASnK,MAEnB,CACDlB,IAAK,cACLgG,IAAK,WACH,OAAO3F,KAAKiL,uBAAuBjL,KAAK0I,UAAUE,QAEnD,CACDjJ,IAAK,kBACLa,MAAO,SAAyBE,GAC9B,OAAOyC,MAAMC,QAAQ1C,GAAKA,EAAEwK,KAAI,SAAUxK,GACxC,OAAO,YAAEA,GAAGkI,QACT,OAEN,CACDjJ,IAAK,YACLa,MAAO,SAAmBE,EAAGD,EAAGY,GAC9B,IAAI/B,EAAIC,UAAUC,OAAS,QAAsB2L,IAAjB5L,UAAU,GAAmBA,UAAU,GAAK,GACxEsB,EAAIvB,EAAE4G,OACNvF,EAAIrB,EAAE8L,UACNrL,EAAIC,KAAKqL,WAAW3K,EAAGD,EAAGY,GAC1BH,EAAI,CACNoK,aAAc,QACdpF,OAAQrF,GAEV,OAAO,MAAQF,IAAMO,EAAEa,MAAQ,CAC7BwJ,IAAKjM,EAAE8L,YACL,kBAAErL,EAAGmB,GAAGqB,MAAK,SAAU7B,GACzB,OAAOA,EAAE8B,UAGZ,CACD7C,IAAK,aACLa,MAAO,SAAoBE,EAAGU,EAAGX,GAC/B,IAAIY,GAAKrB,KAAKwL,cAAgBxL,KAAKyL,kBAC/BnM,EAAI,YAAEF,EAAcA,EAAcA,EAAc,GAAIY,KAAK0I,UAAU3G,OAAQ,GAAI,CACjF2J,WAAYrK,GAAK,MAChBrB,KAAK2L,kBAAmB,GAAI,CAC7BC,MAAO5L,KAAK6L,UAEVhL,EAAIb,KAAKsC,YACb,MAAO,GAAGJ,OAAOrB,GAAKA,EAAErB,OAASqB,EAAEO,EAAIP,EAAErB,QAAUQ,KAAK0I,UAAUE,KAAM,UAAU1G,OAAOxB,EAAG,KAAKwB,OAAOd,EAAG,KAAKc,OAAOzB,GAAGyB,OAAO5C,EAAI,IAAMA,EAAI,MAEhJ,CACDK,IAAK,gBACLa,MAAO,SAAuBE,GAC5B,IAAIkF,EAAS5F,KAEb,OAAO,IAAI6F,SAAQ,SAAUxE,EAAGR,GAC9B,GAAI+E,EAAOiE,WAAX,CACE,GAAI,MAAQjE,EAAOiE,WAAWiC,WAAa,MAAQlG,EAAOiE,WAAWkC,WAAY,MAAM,IAAI,IAAE,6BAA8B,sDAC/G1K,EAAE,CACZmB,KAAMoD,EAAOiE,iBAHjB,CAOA,IAAKjE,EAAO8C,UAAW,MAAM,IAAI,IAAE,2BAA4B,8BAC/D,IAAI/H,EAAI,YAAEiF,EAAO8C,UAAUE,MAC3B,GAAI,YAAEjI,IAAM,gBAAkBA,EAAEqL,WAAY,MAAM,IAAI,IAAE,6BAA8B,sDACtF,kBAAEpG,EAAO8C,UAAUE,KAAM,CACvB7G,MAAO3C,EAAcA,EAAcA,EAAc,CAC/C4C,EAAG,QACF4D,EAAO8C,UAAU3G,OAAQ6D,EAAO+F,kBAAmB,GAAI,CACxDC,MAAOhG,EAAOiG,SAEhBP,aAAc,OACdpF,OAAQxF,IACP6B,KAAKlB,EAAGR,OACV0B,MAAK,SAAUnB,GAChB,GAAIA,EAAE6K,MAAQrG,EAAOzD,IAAMyD,EAAOzD,IAAI+J,QAAQ,UAAW,WAAYtG,EAAOiE,WAAazI,EAAEoB,KAAMoD,EAAOuG,KAAK/K,EAAEoB,KAAM,CACnH4J,OAAQ,UACRjK,IAAKyD,EAAO8C,YACV,OAAS9C,EAAOyG,UAAY,YAAEzG,EAAOzD,KAAM,OAAOyD,EAAO0G,oBAAoB1G,EAAOzD,IAAKzB,GAAG6B,MAAK,SAAU7B,GAC7GkF,EAAOuG,KAAK,CACVI,eAAgB7L,OAEjB+B,OAAM,oBAGZ,CACD9C,IAAK,sBACLa,MAAO,SAA6BE,EAAGW,GACrC,IAAK,YAAEX,GAAI,OAAOmF,QAAQC,SAC1B,IAAIxG,EAAIoB,EAAEwL,QAAQ,kBAAmB,MAAQ,QAC7C,OAAO,kBAAE5M,EAAG,CACVyC,MAAO3C,EAAcA,EAAc,CACjC4C,EAAG,QACFhC,KAAK2L,kBAAmB,GAAI,CAC7BC,MAAO5L,KAAK6L,SAEdP,aAAc,OACdpF,OAAQ7E,IACPkB,MAAK,SAAU7B,GAChB,GAAIA,EAAE8B,MAAQ9B,EAAE8B,KAAK+J,eAAgB,OAAO7L,EAAE8B,KAAK+J,eACnD,MAAM,IAAI,IAAE,yCAGf,CACD5M,IAAK,cACLa,MAAO,SAAqBE,GAC1B,IAAIU,EAAIV,EAAE8L,MAAM,gKAChB,OAAOpL,GAAKA,EAAE,KAEf,CACDzB,IAAK,yBACLa,MAAO,SAAgCE,GACrC,GAAKA,EAAL,CACA,IAAIU,EACJV,EAAIA,EAAE0J,cAEN,IAAK,IAAIqC,EAAK,EAAG7F,EAAKwC,EAAE5J,OAAQiN,EAAK7F,EAAI6F,IACvC,IAAIrL,EAAIgI,EAAEqD,IAAOrC,cAAcsC,QAAQhM,IAAM,EAAG,OAAO,YAAE,mCAAqCU,MAGjG,CACDzB,IAAK,yBACLa,MAAO,SAAgCE,GACrC,IAAIU,GAAK,IAAMV,EAAEiM,OAAO,+CACpBlM,GAAK,IAAMC,EAAEiM,OAAO,iDACxB,OAAOvL,GAAKX,EAAI,CAACC,EAAGA,EAAEwL,QAAQ9K,EAAI,wBAA0B,0BAA2BA,EAAI,wBAA0B,wBAA0B,KAEhJ,CACDzB,IAAK,yBACLgG,IAAK,WACH,OAAQ3F,KAAK4M,UAAUC,kBAIpBxD,EArMY,CAsMnB,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,YAAE,kBAE5B,YAAE,CAAC,YAAE,CACHF,UAAU,KACPE,EAAEvF,UAAW,qBAAsB,MAAO,YAAE,CAAC,YAAE,CAClD7B,KAAM,CAAC,OAAQ,OAAQ,oBACpBoH,EAAEvF,UAAW,gBAAY,GAAS,YAAE,CAAC,YAAE,CAC1C7B,KAAM4B,QACNiJ,KAAM,CACJX,MAAM,EACNrB,MAAO,CACLiC,SAAS,EACTC,eAAgB,WACd,MAAO,CACLD,SAAS,SAKd1D,EAAEvF,UAAW,mBAAe,GAAS,YAAE,CAAC,YAAE,CAC7CqF,UAAU,EACVlH,KAAM,CAAC,iCACJoH,EAAEvF,UAAW,4BAAwB,GAAS,YAAE,CAAC,YAAE,CACtD7B,KAAM4B,WACHwF,EAAEvF,UAAW,kBAAc,GAAS,YAAE,CAAC,eAAMuF,EAAEvF,UAAW,kBAAc,GAAS,YAAE,CAAC,YAAE,CACzF7B,KAAM,OACHoH,EAAEvF,UAAW,wBAAoB,GAAS,YAAE,CAAC,YAAE,mBAAoB,CAAC,mBAAoB,cAAeuF,EAAEvF,UAAW,uBAAwB,MAAO,YAAE,CAAC,YAAE,CAC3J7B,KAAMgL,OACNH,KAAM,CACJI,QAAS,CACP,YAAa,CACXf,MAAM,EACNrB,OAAO,IAGXqB,MAAM,MAEL9C,EAAEvF,UAAW,YAAQ,GAAS,YAAE,CAAC,YAAE,CACtCqF,UAAU,KACPE,EAAEvF,UAAW,iBAAa,GAAS,YAAE,CAAC,YAAE,YAAa,CACxDkH,OAAQ,CACN/I,KAAM,CAAC,SAENoH,EAAEvF,UAAW,iBAAkB,MAAO,YAAE,CAAC,YAAE,CAC9CgJ,KAAM,CACJX,MAAM,EACNrB,OAAO,MAENzB,EAAEvF,UAAW,oBAAgB,GAAS,YAAE,CAAC,eAAMuF,EAAEvF,UAAW,cAAe,MAAO,YAAE,CAAC,YAAE,gBAAiBuF,EAAEvF,UAAW,kBAAmB,MAAO,YAAE,CAAC,YAAE,CACvJqF,UAAU,EACV2D,KAAM,CACJX,MAAM,MAEL9C,EAAEvF,UAAW,YAAQ,GAAS,YAAE,CAAC,YAAE,MAAKuF,EAAEvF,UAAW,WAAO,IAASuF,EAAI,YAAE,CAAC,YAAE,0BAA2BA,IAAMvF,UAAU8I,UAAUC,eAAgB,EACxJ,IAAIM,EAAI9D,EACO","file":"67-e89e2ff0623543528155.js","sourcesContent":["import _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from \"../../request.js\";\nimport { constant as i } from \"../../core/arrayUtils.js\";\nimport e from \"../../core/Error.js\";\nimport { clone as a } from \"../../core/lang.js\";\n\nvar l = /*#__PURE__*/function () {\n  function l() {\n    _classCallCheck(this, l);\n\n    this.location = {\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0\n    }, this._allAvailability = \"unknown\", this.byteSize = 40;\n  }\n\n  _createClass(l, [{\n    key: \"getAvailability\",\n    value: function getAvailability(t, i) {\n      if (\"unknown\" !== this._allAvailability) return this._allAvailability;\n\n      var e = (t - this.location.top) * this.location.width + (i - this.location.left),\n          a = e % 8,\n          _l = e >> 3,\n          o = this._tileAvailabilityBitSet;\n\n      return _l < 0 || _l > o.length ? \"unknown\" : o[_l] & 1 << a ? \"available\" : \"unavailable\";\n    }\n  }, {\n    key: \"_updateFromData\",\n    value: function _updateFromData(t) {\n      var i = this.location.width,\n          e = this.location.height;\n\n      var a = !0,\n          _l2 = !0;\n\n      var o = Math.ceil(i * e / 8),\n          n = new Uint8Array(o);\n      var r = 0;\n\n      for (var s = 0; s < t.length; s++) {\n        var _i = s % 8;\n\n        t[s] ? (_l2 = !1, n[r] |= 1 << _i) : a = !1, 7 === _i && ++r;\n      }\n\n      _l2 ? this._allAvailability = \"unavailable\" : a ? this._allAvailability = \"available\" : (this._allAvailability = \"unknown\", this._tileAvailabilityBitSet = n, this.byteSize += n.length);\n    }\n  }], [{\n    key: \"fromDefinition\",\n    value: function fromDefinition(a, o) {\n      var r = a.service.request || t,\n          s = a.row,\n          h = a.col,\n          c = a.width,\n          m = a.height,\n          d = {\n        query: {\n          f: \"json\"\n        }\n      };\n      return o = o ? _objectSpread(_objectSpread({}, d), o) : d, r(n(a), o).then(function (t) {\n        return t.data;\n      }).catch(function (t) {\n        if (t && t.details && 422 === t.details.httpStatus) return {\n          location: {\n            top: s,\n            left: h,\n            width: c,\n            height: m\n          },\n          valid: !0,\n          data: i(c * m, 0)\n        };\n        throw t;\n      }).then(function (t) {\n        if (t.location && (t.location.top !== s || t.location.left !== h || t.location.width !== c || t.location.height !== m)) throw new e(\"tilemap:location-mismatch\", \"Tilemap response for different location than requested\", {\n          response: t,\n          definition: {\n            top: s,\n            left: h,\n            width: c,\n            height: m\n          }\n        });\n        return l.fromJSON(t);\n      });\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(t) {\n      l.validateJSON(t);\n      var i = new l();\n      return i.location = Object.freeze(a(t.location)), i._updateFromData(t.data), Object.freeze(i);\n    }\n  }, {\n    key: \"validateJSON\",\n    value: function validateJSON(t) {\n      if (!t || !t.location) throw new e(\"tilemap:missing-location\", \"Location missing from tilemap response\");\n      if (!1 === t.valid) throw new e(\"tilemap:invalid\", \"Tilemap response was marked as invalid\");\n      if (!t.data) throw new e(\"tilemap:missing-data\", \"Data missing from tilemap response\");\n      if (!Array.isArray(t.data)) throw new e(\"tilemap:data-mismatch\", \"Data must be an array of numbers\");\n      if (t.data.length !== t.location.width * t.location.height) throw new e(\"tilemap:data-mismatch\", \"Number of data items does not match width/height of tilemap\");\n    }\n  }]);\n\n  return l;\n}();\n\nfunction o(t) {\n  return \"\".concat(t.level, \"/\").concat(t.row, \"/\").concat(t.col, \"/\").concat(t.width, \"/\").concat(t.height);\n}\n\nfunction n(t) {\n  var i;\n  if (\"vector-tile\" === t.service.type) i = \"\".concat(t.service.url, \"/tilemap/\").concat(t.level, \"/\").concat(t.row, \"/\").concat(t.col, \"/\").concat(t.width, \"/\").concat(t.height);else {\n    var _e = t.service.tileServers;\n    i = \"\".concat(_e && _e.length ? _e[t.row % _e.length] : t.service.url, \"/tilemap/\").concat(t.level, \"/\").concat(t.row, \"/\").concat(t.col, \"/\").concat(t.width, \"/\").concat(t.height);\n  }\n  var e = t.service.query;\n  return e && (i = \"\".concat(i, \"?\").concat(e)), i;\n}\n\nexport default l;\nexport { l as Tilemap, o as tilemapDefinitionId };","import _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../request.js\";\nimport i from \"../../core/Accessor.js\";\nimport l from \"../../core/Error.js\";\nimport r from \"../../core/Handles.js\";\nimport s from \"../../core/Logger.js\";\nimport a from \"../../core/LRUCache.js\";\nimport o from \"../../core/PooledArray.js\";\nimport { onAbort as n, createAbortError as c, isAbortError as h, createAbortController as p, isAborted as m } from \"../../core/promiseUtils.js\";\nimport { waitTicks as u } from \"../../core/scheduling.js\";\nimport { objectToQuery as f } from \"../../core/urlUtils.js\";\nimport { init as v } from \"../../core/watchUtils.js\";\nimport { property as y } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport { cast as _ } from \"../../core/accessorSupport/decorators/cast.js\";\nimport { subclass as d } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { tilemapDefinitionId as b, Tilemap as g } from \"./Tilemap.js\";\n\nvar _w;\n\nvar T = s.getLogger(\"esri.layers.support.TilemapCache\");\n\nvar j = _w = /*#__PURE__*/function (_i) {\n  _inherits(w, _i);\n\n  var _super = _createSuper(w);\n\n  function w(e) {\n    var _this;\n\n    _classCallCheck(this, w);\n\n    _this = _super.call(this, e), _this._handles = new r(), _this._pendingTilemapRequests = {}, _this._availableLevels = {}, _this.levels = 5, _this.cacheByteSize = 2097152, _this.request = t, _this._prefetchingEnabled = !0;\n    return _this;\n  }\n\n  _createClass(w, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      this._tilemapCache = new a(this.cacheByteSize), this._handles.add([this.watch([\"layer.parsedUrl\", \"layer.tileServers?\"], function () {\n        return _this2._initializeTilemapDefinition();\n      }), v(this, \"layer.tileInfo.lods\", function (e) {\n        return _this2._initializeAvailableLevels(e);\n      }, !0)]), this._initializeTilemapDefinition();\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this._handles && (this._handles.destroy(), this._handles = null);\n    }\n  }, {\n    key: \"castLevels\",\n    value: function castLevels(e) {\n      return e <= 2 ? (T.error(\"Minimum levels for Tilemap is 3, but got \", e), 3) : e;\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return 1 << this.levels;\n    }\n  }, {\n    key: \"fetchTilemap\",\n    value: function fetchTilemap(e, t, i, r) {\n      var _this3 = this;\n\n      if (!this._availableLevels[e]) return Promise.reject(new l(\"tilemap-cache:level-unavailable\", \"Level \".concat(e, \" is unavailable in the service\")));\n\n      var s = this._tmpTilemapDefinition,\n          a = this._tilemapFromCache(e, t, i, s);\n\n      if (a) return Promise.resolve(a);\n      var o = r && r.signal;\n      return r = _objectSpread(_objectSpread({}, r), {}, {\n        signal: null\n      }), new Promise(function (e, t) {\n        n(o, function () {\n          return t(c());\n        });\n        var i = b(s);\n        var l = _this3._pendingTilemapRequests[i];\n\n        if (!l) {\n          l = g.fromDefinition(s, r).then(function (e) {\n            return _this3._tilemapCache.put(i, e, e.byteSize), e;\n          });\n\n          var _e = function _e() {\n            return delete _this3._pendingTilemapRequests[i];\n          };\n\n          _this3._pendingTilemapRequests[i] = l, l.then(_e, _e);\n        }\n\n        l.then(e, t);\n      });\n    }\n  }, {\n    key: \"getAvailability\",\n    value: function getAvailability(e, t, i) {\n      if (!this._availableLevels[e]) return \"unavailable\";\n\n      var l = this._tilemapFromCache(e, t, i, this._tmpTilemapDefinition);\n\n      return l ? l.getAvailability(t, i) : \"unknown\";\n    }\n  }, {\n    key: \"getAvailabilityUpsample\",\n    value: function getAvailabilityUpsample(e, t, i, l) {\n      l.level = e, l.row = t, l.col = i;\n      var r = this.layer.tileInfo;\n\n      for (r.updateTileInfo(l);;) {\n        var _e2 = this.getAvailability(l.level, l.row, l.col);\n\n        if (\"unavailable\" !== _e2) return _e2;\n        if (!r.upsampleTile(l)) return \"unavailable\";\n      }\n    }\n  }, {\n    key: \"fetchAvailability\",\n    value: function fetchAvailability(e, t, i, r) {\n      return this._availableLevels[e] ? this.fetchTilemap(e, t, i, r).catch(function (e) {\n        return e;\n      }).then(function (r) {\n        if (r instanceof g) {\n          var _s = r.getAvailability(t, i);\n\n          return \"unavailable\" === _s ? Promise.reject(new l(\"tile-map:tile-unavailable\", \"Tile is not available\", {\n            level: e,\n            row: t,\n            col: i\n          })) : _s;\n        }\n\n        if (h(r)) throw r;\n        return \"unknown\";\n      }) : Promise.reject(new l(\"tilemap-cache:level-unavailable\", \"Level \".concat(e, \" is unavailable in the service\")));\n    }\n  }, {\n    key: \"fetchAvailabilityUpsample\",\n    value: function fetchAvailabilityUpsample(e, t, i, l, r) {\n      var _this4 = this;\n\n      l.level = e, l.row = t, l.col = i;\n      var s = this.layer.tileInfo;\n      s.updateTileInfo(l);\n      var a = this.fetchAvailability(e, t, i, r).catch(function (e) {\n        if (h(e)) throw e;\n        if (s.upsampleTile(l)) return _this4.fetchAvailabilityUpsample(l.level, l.row, l.col, l);\n        throw e;\n      });\n      return this._fetchAvailabilityUpsamplePrefetch(l.id, e, t, i, r, a), a;\n    }\n  }, {\n    key: \"_fetchAvailabilityUpsamplePrefetch\",\n    value: function () {\n      var _fetchAvailabilityUpsamplePrefetch2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e, t, i, l, r, s) {\n        var _this5 = this;\n\n        var a, o, n, c, h, f, v, _loop, _p;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this._prefetchingEnabled) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                a = \"prefetch-\".concat(e);\n\n                if (!this._handles.has(a)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 5:\n                o = p();\n                s.then(function () {\n                  return o.abort();\n                }, function () {\n                  return o.abort();\n                });\n                n = !1;\n                c = {\n                  remove: function remove() {\n                    n || (n = !0, o.abort());\n                  }\n                };\n\n                this._handles.add(c, a);\n\n                _context.next = 12;\n                return u(10, o.signal).catch(function () {});\n\n              case 12:\n                n || (n = !0, this._handles.remove(a));\n\n                if (!m(o)) {\n                  _context.next = 15;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 15:\n                h = {\n                  id: e,\n                  level: t,\n                  row: i,\n                  col: l\n                }, f = _objectSpread(_objectSpread({}, r), {}, {\n                  signal: o.signal\n                }), v = this.layer.tileInfo;\n\n                _loop = function _loop(_p) {\n                  var e = _this5.fetchAvailability(h.level, h.row, h.col, f);\n\n                  _w._prefetches.push(e);\n\n                  var t = function t() {\n                    _w._prefetches.removeUnordered(e);\n                  };\n\n                  e.then(t, t);\n                };\n\n                for (_p = 0; _w._prefetches.length < _w._maxPrefetch && v.upsampleTile(h); ++_p) {\n                  _loop(_p);\n                }\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _fetchAvailabilityUpsamplePrefetch(_x, _x2, _x3, _x4, _x5, _x6) {\n        return _fetchAvailabilityUpsamplePrefetch2.apply(this, arguments);\n      }\n\n      return _fetchAvailabilityUpsamplePrefetch;\n    }()\n  }, {\n    key: \"_initializeTilemapDefinition\",\n    value: function _initializeTilemapDefinition() {\n      if (!this.layer.parsedUrl) return;\n      var e = this.layer.parsedUrl,\n          t = e.query;\n      this._tilemapCache.clear(), this._tmpTilemapDefinition = {\n        service: {\n          url: e.path,\n          query: t ? f(t) : null,\n          tileServers: this.layer.tileServers,\n          request: this.request,\n          type: this.layer.type\n        },\n        width: this.size,\n        height: this.size,\n        level: 0,\n        row: 0,\n        col: 0\n      };\n    }\n  }, {\n    key: \"_tilemapFromCache\",\n    value: function _tilemapFromCache(e, t, i, l) {\n      l.level = e, l.row = t - t % this.size, l.col = i - i % this.size;\n      var r = b(l);\n      return this._tilemapCache.get(r);\n    }\n  }, {\n    key: \"_initializeAvailableLevels\",\n    value: function _initializeAvailableLevels(e) {\n      var _this6 = this;\n\n      this._availableLevels = {}, e && e.forEach(function (e) {\n        return _this6._availableLevels[e.level] = !0;\n      });\n    }\n  }, {\n    key: \"test\",\n    get: function get() {\n      var e = this;\n      return {\n        get prefetchingEnabled() {\n          return e._prefetchingEnabled;\n        },\n\n        set prefetchingEnabled(t) {\n          e._prefetchingEnabled = t;\n        },\n\n        hasTilemap: function hasTilemap(t, i, l) {\n          return !!e._tilemapFromCache(t, i, l, e._tmpTilemapDefinition);\n        }\n      };\n    }\n  }]);\n\n  return w;\n}(i);\n\nj._maxPrefetch = 4, j._prefetches = new o({\n  initialSize: _w._maxPrefetch\n}), e([y({\n  constructOnly: !0,\n  type: Number\n})], j.prototype, \"levels\", void 0), e([_(\"levels\")], j.prototype, \"castLevels\", null), e([y({\n  readOnly: !0,\n  type: Number\n})], j.prototype, \"size\", null), e([y({\n  constructOnly: !0,\n  type: Number\n})], j.prototype, \"cacheByteSize\", void 0), e([y({\n  constructOnly: !0\n})], j.prototype, \"layer\", void 0), e([y({\n  constructOnly: !0\n})], j.prototype, \"request\", void 0), j = _w = e([d(\"esri.layers.support.TilemapCache\")], j);\nexport { j as TilemapCache };","import _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport \"../geometry.js\";\nimport r from \"../request.js\";\nimport t from \"../core/Error.js\";\nimport { HandleOwnerMixin as s } from \"../core/HandleOwner.js\";\nimport { isSome as i } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as o } from \"../core/MultiOriginJSONSupport.js\";\nimport { throwIfAbortError as a } from \"../core/promiseUtils.js\";\nimport { urlToObject as l, objectToQuery as n, makeAbsolute as p } from \"../core/urlUtils.js\";\nimport { property as c } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport { cast as u } from \"../core/accessorSupport/decorators/cast.js\";\nimport \"../core/Logger.js\";\nimport { reader as m } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as h } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { writer as d } from \"../core/accessorSupport/decorators/writer.js\";\nimport y from \"./Layer.js\";\nimport { APIKeyMixin as f } from \"./mixins/APIKeyMixin.js\";\nimport { ArcGISCachedService as v } from \"./mixins/ArcGISCachedService.js\";\nimport { ArcGISMapService as g } from \"./mixins/ArcGISMapService.js\";\nimport { ArcGISService as _ } from \"./mixins/ArcGISService.js\";\nimport { BlendLayer as S } from \"./mixins/BlendLayer.js\";\nimport { CustomParametersMixin as j } from \"./mixins/CustomParametersMixin.js\";\nimport { OperationalLayer as b } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as T } from \"./mixins/PortalLayer.js\";\nimport { RefreshableLayer as w } from \"./mixins/RefreshableLayer.js\";\nimport { ScaleRangeLayer as O } from \"./mixins/ScaleRangeLayer.js\";\nimport { SublayersOwner as L } from \"./mixins/SublayersOwner.js\";\nimport { parse as R, isHostedAgolService as x, isArcGISUrl as U } from \"./support/arcgisLayerUrl.js\";\nimport { url as P } from \"./support/commonProperties.js\";\nimport A from \"./support/Sublayer.js\";\nimport W from \"../geometry/SpatialReference.js\";\nvar I = [\"Canvas/World_Dark_Gray_Base\", \"Canvas/World_Dark_Gray_Reference\", \"Canvas/World_Light_Gray_Base\", \"Canvas/World_Light_Gray_Reference\", \"Elevation/World_Hillshade\", \"Elevation/World_Hillshade_Dark\", \"Ocean/World_Ocean_Base\", \"Ocean/World_Ocean_Reference\", \"Ocean_Basemap\", \"Reference/World_Boundaries_and_Places\", \"Reference/World_Boundaries_and_Places_Alternate\", \"Reference/World_Transportation\", \"World_Imagery\", \"World_Street_Map\", \"World_Topo_Map\"];\n\nvar M = /*#__PURE__*/function (_S) {\n  _inherits(M, _S);\n\n  var _super = _createSuper(M);\n\n  function M() {\n    var _this;\n\n    _classCallCheck(this, M);\n\n    for (var _len = arguments.length, e = new Array(_len), _key = 0; _key < _len; _key++) {\n      e[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(e)), _this.listMode = \"show\", _this.isReference = null, _this.operationalLayerType = \"ArcGISTiledMapServiceLayer\", _this.resampling = !0, _this.sourceJSON = null, _this.spatialReference = null, _this.path = null, _this.sublayers = null, _this.type = \"tile\", _this.url = null;\n    return _this;\n  }\n\n  _createClass(M, [{\n    key: \"normalizeCtorArgs\",\n    value: function normalizeCtorArgs(e, r) {\n      return \"string\" == typeof e ? _objectSpread({\n        url: e\n      }, r) : e;\n    }\n  }, {\n    key: \"load\",\n    value: function load(e) {\n      var _this2 = this;\n\n      var r = i(e) ? e.signal : null;\n      return this.addResolvingPromise(this.loadFromPortal({\n        supportedTypes: [\"Map Service\"]\n      }, e).catch(a).then(function () {\n        return _this2._fetchService(r);\n      })), Promise.resolve(this);\n    }\n  }, {\n    key: \"attributionDataUrl\",\n    get: function get() {\n      var e;\n      var r = null == (e = this.parsedUrl) ? void 0 : e.path.toLowerCase();\n      return r && this._getDefaultAttribution(this._getMapName(r));\n    }\n  }, {\n    key: \"readSpatialReference\",\n    value: function readSpatialReference(e, r) {\n      return (e = e || r.tileInfo && r.tileInfo.spatialReference) && W.fromJSON(e);\n    }\n  }, {\n    key: \"writeSublayers\",\n    value: function writeSublayers(e, r, t, s) {\n      if (!this.loaded || !e) return;\n\n      var i = e.slice().reverse().flatten(function (_ref) {\n        var e = _ref.sublayers;\n        return e && e.toArray().reverse();\n      }).toArray(),\n          o = [],\n          a = _objectSpread({\n        writeSublayerStructure: !1\n      }, s);\n\n      i.forEach(function (e) {\n        var r = e.write({}, a);\n        o.push(r);\n      });\n      o.some(function (e) {\n        return Object.keys(e).length > 1;\n      }) && (r.layers = o);\n    }\n  }, {\n    key: \"tileServers\",\n    get: function get() {\n      return this._getDefaultTileServers(this.parsedUrl.path);\n    }\n  }, {\n    key: \"castTileServers\",\n    value: function castTileServers(e) {\n      return Array.isArray(e) ? e.map(function (e) {\n        return l(e).path;\n      }) : null;\n    }\n  }, {\n    key: \"fetchTile\",\n    value: function fetchTile(e, t, s) {\n      var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var o = i.signal,\n          a = i.timestamp,\n          l = this.getTileUrl(e, t, s),\n          n = {\n        responseType: \"image\",\n        signal: o\n      };\n      return null != a && (n.query = {\n        _ts: i.timestamp\n      }), r(l, n).then(function (e) {\n        return e.data;\n      });\n    }\n  }, {\n    key: \"getTileUrl\",\n    value: function getTileUrl(e, r, t) {\n      var s = !this.tilemapCache && this.supportsBlankTile,\n          i = n(_objectSpread(_objectSpread(_objectSpread({}, this.parsedUrl.query), {}, {\n        blankTile: !s && null\n      }, this.customParameters), {}, {\n        token: this.apiKey\n      })),\n          o = this.tileServers;\n      return \"\".concat(o && o.length ? o[r % o.length] : this.parsedUrl.path, \"/tile/\").concat(e, \"/\").concat(r, \"/\").concat(t).concat(i ? \"?\" + i : \"\");\n    }\n  }, {\n    key: \"_fetchService\",\n    value: function _fetchService(e) {\n      var _this3 = this;\n\n      return new Promise(function (s, o) {\n        if (_this3.sourceJSON) {\n          if (null != _this3.sourceJSON.bandCount && null != _this3.sourceJSON.pixelSizeX) throw new t(\"tile-layer:unsupported-url\", \"use ImageryTileLayer to open a tiled image service\");\n          return void s({\n            data: _this3.sourceJSON\n          });\n        }\n\n        if (!_this3.parsedUrl) throw new t(\"tile-layer:undefined-url\", \"layer's url is not defined\");\n        var a = R(_this3.parsedUrl.path);\n        if (i(a) && \"ImageServer\" === a.serverType) throw new t(\"tile-layer:unsupported-url\", \"use ImageryTileLayer to open a tiled image service\");\n        r(_this3.parsedUrl.path, {\n          query: _objectSpread(_objectSpread(_objectSpread({\n            f: \"json\"\n          }, _this3.parsedUrl.query), _this3.customParameters), {}, {\n            token: _this3.apiKey\n          }),\n          responseType: \"json\",\n          signal: e\n        }).then(s, o);\n      }).then(function (r) {\n        if (r.ssl && (_this3.url = _this3.url.replace(/^http:/i, \"https:\")), _this3.sourceJSON = r.data, _this3.read(r.data, {\n          origin: \"service\",\n          url: _this3.parsedUrl\n        }), 10.1 === _this3.version && !x(_this3.url)) return _this3._fetchServerVersion(_this3.url, e).then(function (e) {\n          _this3.read({\n            currentVersion: e\n          });\n        }).catch(function () {});\n      });\n    }\n  }, {\n    key: \"_fetchServerVersion\",\n    value: function _fetchServerVersion(e, s) {\n      if (!U(e)) return Promise.reject();\n      var i = e.replace(/(.*\\/rest)\\/.*/i, \"$1\") + \"/info\";\n      return r(i, {\n        query: _objectSpread(_objectSpread({\n          f: \"json\"\n        }, this.customParameters), {}, {\n          token: this.apiKey\n        }),\n        responseType: \"json\",\n        signal: s\n      }).then(function (e) {\n        if (e.data && e.data.currentVersion) return e.data.currentVersion;\n        throw new t(\"tile-layer:version-not-available\");\n      });\n    }\n  }, {\n    key: \"_getMapName\",\n    value: function _getMapName(e) {\n      var r = e.match(/^(?:https?:)?\\/\\/(server\\.arcgisonline\\.com|services\\.arcgisonline\\.com|ibasemaps-api\\.arcgis\\.com)\\/arcgis\\/rest\\/services\\/([^\\/]+(\\/[^\\/]+)*)\\/mapserver/i);\n      return r && r[2];\n    }\n  }, {\n    key: \"_getDefaultAttribution\",\n    value: function _getDefaultAttribution(e) {\n      if (!e) return;\n      var r;\n      e = e.toLowerCase();\n\n      for (var _t = 0, _s = I.length; _t < _s; _t++) {\n        if (r = I[_t], r.toLowerCase().indexOf(e) > -1) return p(\"//static.arcgis.com/attribution/\" + r);\n      }\n    }\n  }, {\n    key: \"_getDefaultTileServers\",\n    value: function _getDefaultTileServers(e) {\n      var r = -1 !== e.search(/^(?:https?:)?\\/\\/server\\.arcgisonline\\.com/i),\n          t = -1 !== e.search(/^(?:https?:)?\\/\\/services\\.arcgisonline\\.com/i);\n      return r || t ? [e, e.replace(r ? /server\\.arcgisonline/i : /services\\.arcgisonline/i, r ? \"services.arcgisonline\" : \"server.arcgisonline\")] : [];\n    }\n  }, {\n    key: \"hasOverriddenFetchTile\",\n    get: function get() {\n      return !this.fetchTile.__isDefault__;\n    }\n  }]);\n\n  return M;\n}(S(L(O(w(b(T(v(g(_(o(s(f(j(y))))))))))))));\n\ne([c({\n  readOnly: !0\n})], M.prototype, \"attributionDataUrl\", null), e([c({\n  type: [\"show\", \"hide\", \"hide-children\"]\n})], M.prototype, \"listMode\", void 0), e([c({\n  type: Boolean,\n  json: {\n    read: !1,\n    write: {\n      enabled: !0,\n      overridePolicy: function overridePolicy() {\n        return {\n          enabled: !1\n        };\n      }\n    }\n  }\n})], M.prototype, \"isReference\", void 0), e([c({\n  readOnly: !0,\n  type: [\"ArcGISTiledMapServiceLayer\"]\n})], M.prototype, \"operationalLayerType\", void 0), e([c({\n  type: Boolean\n})], M.prototype, \"resampling\", void 0), e([c()], M.prototype, \"sourceJSON\", void 0), e([c({\n  type: W\n})], M.prototype, \"spatialReference\", void 0), e([m(\"spatialReference\", [\"spatialReference\", \"tileInfo\"])], M.prototype, \"readSpatialReference\", null), e([c({\n  type: String,\n  json: {\n    origins: {\n      \"web-scene\": {\n        read: !0,\n        write: !0\n      }\n    },\n    read: !1\n  }\n})], M.prototype, \"path\", void 0), e([c({\n  readOnly: !0\n})], M.prototype, \"sublayers\", void 0), e([d(\"sublayers\", {\n  layers: {\n    type: [A]\n  }\n})], M.prototype, \"writeSublayers\", null), e([c({\n  json: {\n    read: !1,\n    write: !1\n  }\n})], M.prototype, \"popupEnabled\", void 0), e([c()], M.prototype, \"tileServers\", null), e([u(\"tileServers\")], M.prototype, \"castTileServers\", null), e([c({\n  readOnly: !0,\n  json: {\n    read: !1\n  }\n})], M.prototype, \"type\", void 0), e([c(P)], M.prototype, \"url\", void 0), M = e([h(\"esri.layers.TileLayer\")], M), M.prototype.fetchTile.__isDefault__ = !0;\nvar C = M;\nexport default C;"],"sourceRoot":""}