{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","F","s","done","value","e","_e6","f","TypeError","err","normalCompletion","didErr","step","next","_e7","return","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","NewTarget","this","q","originalAndCurrentFeatures","none","_","_x","_2","mark","_callee20","_t4","wrap","_context20","prev","abrupt","data","Promise","t","r","FileReader","readAsDataURL","onload","onerror","stop","I","Set","O","_u","_serializeAttachment2","_fetchService2","_queryTopCount","_queryTopExtents","_queryTopObjectIds","_queryTopFeatures","_queryRelatedFeaturesCount","_queryRelatedFeatures","_queryExtent","_queryFeatureCount","_queryObjectIds","_queryFeaturesJSON","_queryFeatures","_queryAttachments","_deleteAttachments","_applyEdits","_updateAttachment","_addAttachment","_super","_this","type","signal","addResolvingPromise","_fetchService","resolve","get","_this$layer","layer","capabilities","query","supportsFormatPBF","parsedUrl","dynamicDataSource","infoFor3D","a","gdbVersion","spatialReference","u","fieldsIndex","url","path","format","sourceSpatialReference","_callee","_e","_context","load","attributes","objectIdField","_getLayerRequestOptions","_getFormDataForAttachment","body","sent","_createFeatureEditResult","addAttachmentResult","t0","_createAttachmentErrorResult","_x2","_x3","_callee2","_e2","_context2","attachmentId","updateAttachmentResult","_x4","_x5","_x6","_callee3","_iterator","_step","_r","_iterator2","_step2","_r2","l","d","c","h","p","_context3","addFeatures","map","_serializeFeature","updateFeatures","_getFeatureIds","deleteFeatures","globalIdUsed","deleteAttachments","addAttachments","_serializeAttachment","t1","t2","finish","updateAttachments","t3","t4","t5","adds","updates","deletes","rollbackOnFailure","rollbackOnFailureEnabled","useGlobalIds","returnEditMoment","usePreviousEditMoment","sessionId","returnServiceEditsOption","edits","JSON","stringify","id","layerId","attachments","toJSON","returnServiceEditsInSourceSR","join","method","_createEditsResult","_x7","_x8","_callee4","_context4","attachmentIds","deleteAttachmentResults","_x9","_x10","_this2","undefined","then","_callee5","_this2$layer","_yield$r","_context5","returnUpdates","concat","extent","fullExtent","timeExtent","fromJSON","start","end","_callee6","_t","_s","_iterator3","_step3","_e3","_t2","_args6","_context6","objectIds","all","parentObjectId","attachmentInfos","queryTask","executeAttachmentQuery","_x11","_callee7","_context7","execute","_createRequestQueryOptions","_x12","_x13","_callee8","_context8","executeJSON","_x14","_x15","_callee9","_context9","executeForIds","_x16","_x17","_callee10","_context10","executeForCount","_x18","_x19","_callee11","_context11","executeForExtent","_x20","_x21","_callee12","_context12","executeRelationshipQuery","_x22","_x23","_callee13","_context13","executeRelationshipQueryForCount","_x24","_x25","_callee14","_context14","executeTopFeaturesQuery","_x26","_x27","_callee15","_context15","executeForTopIds","_x28","_x29","_callee16","_context16","executeForTopExtents","_x30","_x31","_callee17","_context17","executeForTopCount","_x32","_x33","customParameters","token","apiKey","_callee18","_yield$r2","_s2","_context18","sourceJSON","returnAdvancedSymbols","_patchServiceJSON","has","_x34","geometryType","drawingInfo","renderer","defaultSymbol","_t3","geometry","_callee19","_e4","_context19","feature","attachment","globalId","contentType","uploadId","parentGlobalId","globalIdField","mediaType","File","_x35","_canUseGlobalIds","_getGlobalIdsFromFeatureIdentifier","_getObjectIdsFromFeatureIdentifier","_getIdsFromFeatures","objectId","_this3","_step4","_iterator4","_n","editedFeatures","addResults","updateResults","deleteResults","editMoment","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","editedFeatureResults","_step5","_iterator5","_loop","_e$editedFeatures","_createEditedFeature","original","current","success","error","code","description","details","messages","message","httpStatus","messageCode","FormData","elements","_s3","_e5","set","append","_this$layer2","responseType","constructOnly","readOnly","j"],"mappings":"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","file":"141-0cb357e5b3217c1b984b.js","sourcesContent":["import _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e6) { throw _e6; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e7) { didErr = true; err = _e7; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport t from \"../../../Graphic.js\";\nimport r from \"../../../request.js\";\nimport s from \"../../../TimeExtent.js\";\nimport a from \"../../../core/Error.js\";\nimport i from \"../../../core/has.js\";\nimport { JSONMap as o } from \"../../../core/jsonMap.js\";\nimport u from \"../../../core/Loadable.js\";\nimport { isSome as n, isNone as l } from \"../../../core/maybe.js\";\nimport { setDeepValue as d } from \"../../../core/object.js\";\nimport { dataComponents as c } from \"../../../core/urlUtils.js\";\nimport { property as h } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/Logger.js\";\nimport { subclass as p } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport y from \"../../../geometry/Extent.js\";\nimport { fromJSON as m } from \"../../../geometry/support/jsonUtils.js\";\nimport { createDrawingInfo as f } from \"./support/clientSideDefaults.js\";\nimport { processAttachmentQueryResult as g } from \"../../../rest/query/operations/queryAttachments.js\";\nimport { unapplyEditsZUnitScaling as F } from \"../../../rest/query/operations/zscale.js\";\nimport R from \"../../../tasks/QueryTask.js\";\nimport b from \"../../../geometry/SpatialReference.js\";\nvar q = new o({\n  originalAndCurrentFeatures: \"original-and-current-features\",\n  none: \"none\"\n});\n\nfunction _(_x) {\n  return _2.apply(this, arguments);\n}\n\nfunction _2() {\n  _2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee20(e) {\n    var _t4;\n\n    return _regeneratorRuntime.wrap(function _callee20$(_context20) {\n      while (1) {\n        switch (_context20.prev = _context20.next) {\n          case 0:\n            if (!(\"string\" == typeof e)) {\n              _context20.next = 3;\n              break;\n            }\n\n            _t4 = c(e);\n            return _context20.abrupt(\"return\", _t4 || {\n              data: e\n            });\n\n          case 3:\n            return _context20.abrupt(\"return\", new Promise(function (t, r) {\n              var s = new FileReader();\n              s.readAsDataURL(e), s.onload = function () {\n                return t(c(s.result));\n              }, s.onerror = function (e) {\n                return r(e);\n              };\n            }));\n\n          case 4:\n          case \"end\":\n            return _context20.stop();\n        }\n      }\n    }, _callee20);\n  }));\n  return _2.apply(this, arguments);\n}\n\nvar I = new Set([\"Feature Layer\", \"Table\"]);\n\nvar O = /*#__PURE__*/function (_u) {\n  _inherits(O, _u);\n\n  var _super = _createSuper(O);\n\n  function O() {\n    var _this;\n\n    _classCallCheck(this, O);\n\n    _this = _super.apply(this, arguments), _this.type = \"feature-layer\";\n    return _this;\n  }\n\n  _createClass(O, [{\n    key: \"load\",\n    value: function load(e) {\n      var t = n(e) ? e.signal : null;\n      return this.addResolvingPromise(this._fetchService(t)), Promise.resolve(this);\n    }\n  }, {\n    key: \"queryTask\",\n    get: function get() {\n      var _this$layer = this.layer,\n          e = _this$layer.capabilities.query.supportsFormatPBF,\n          t = _this$layer.parsedUrl,\n          r = _this$layer.dynamicDataSource,\n          s = _this$layer.infoFor3D,\n          a = _this$layer.gdbVersion,\n          o = _this$layer.spatialReference,\n          u = _this$layer.fieldsIndex,\n          n = i(\"featurelayer-pbf\") && e && l(s) ? \"pbf\" : \"json\";\n      return new R({\n        url: t.path,\n        format: n,\n        fieldsIndex: u,\n        infoFor3D: s,\n        dynamicDataSource: r,\n        gdbVersion: a,\n        sourceSpatialReference: o\n      });\n    }\n  }, {\n    key: \"addAttachment\",\n    value: function () {\n      var _addAttachment = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e, t) {\n        var s, a, i, o, _e;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.load();\n\n              case 2:\n                s = e.attributes[this.layer.objectIdField], a = this.layer.parsedUrl.path + \"/\" + s + \"/addAttachment\", i = this._getLayerRequestOptions(), o = this._getFormDataForAttachment(t, i.query);\n                _context.prev = 3;\n                _context.next = 6;\n                return r(a, {\n                  body: o\n                });\n\n              case 6:\n                _e = _context.sent;\n                return _context.abrupt(\"return\", this._createFeatureEditResult(_e.data.addAttachmentResult));\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](3);\n                throw this._createAttachmentErrorResult(s, _context.t0);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[3, 10]]);\n      }));\n\n      function addAttachment(_x2, _x3) {\n        return _addAttachment.apply(this, arguments);\n      }\n\n      return addAttachment;\n    }()\n  }, {\n    key: \"updateAttachment\",\n    value: function () {\n      var _updateAttachment = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e, t, s) {\n        var a, i, o, u, _e2;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.load();\n\n              case 2:\n                a = e.attributes[this.layer.objectIdField], i = this.layer.parsedUrl.path + \"/\" + a + \"/updateAttachment\", o = this._getLayerRequestOptions({\n                  query: {\n                    attachmentId: t\n                  }\n                }), u = this._getFormDataForAttachment(s, o.query);\n                _context2.prev = 3;\n                _context2.next = 6;\n                return r(i, {\n                  body: u\n                });\n\n              case 6:\n                _e2 = _context2.sent;\n                return _context2.abrupt(\"return\", this._createFeatureEditResult(_e2.data.updateAttachmentResult));\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](3);\n                throw this._createAttachmentErrorResult(a, _context2.t0);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[3, 10]]);\n      }));\n\n      function updateAttachment(_x4, _x5, _x6) {\n        return _updateAttachment.apply(this, arguments);\n      }\n\n      return updateAttachment;\n    }()\n  }, {\n    key: \"applyEdits\",\n    value: function () {\n      var _applyEdits = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, t) {\n        var s, a, i, o, u, n, _iterator, _step, _r, _iterator2, _step2, _r2, l, d, c, h, p;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.load();\n\n              case 2:\n                s = e.addFeatures.map(this._serializeFeature, this), a = e.updateFeatures.map(this._serializeFeature, this), i = this._getFeatureIds(e.deleteFeatures, null == t ? void 0 : t.globalIdUsed);\n                F(s, a, this.layer.spatialReference);\n                o = [], u = [], n = _toConsumableArray(e.deleteAttachments);\n                _iterator = _createForOfIteratorHelper(e.addAttachments);\n                _context3.prev = 6;\n\n                _iterator.s();\n\n              case 8:\n                if ((_step = _iterator.n()).done) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                _r = _step.value;\n                _context3.t0 = o;\n                _context3.next = 13;\n                return this._serializeAttachment(_r);\n\n              case 13:\n                _context3.t1 = _context3.sent;\n\n                _context3.t0.push.call(_context3.t0, _context3.t1);\n\n              case 15:\n                _context3.next = 8;\n                break;\n\n              case 17:\n                _context3.next = 22;\n                break;\n\n              case 19:\n                _context3.prev = 19;\n                _context3.t2 = _context3[\"catch\"](6);\n\n                _iterator.e(_context3.t2);\n\n              case 22:\n                _context3.prev = 22;\n\n                _iterator.f();\n\n                return _context3.finish(22);\n\n              case 25:\n                _iterator2 = _createForOfIteratorHelper(e.updateAttachments);\n                _context3.prev = 26;\n\n                _iterator2.s();\n\n              case 28:\n                if ((_step2 = _iterator2.n()).done) {\n                  _context3.next = 37;\n                  break;\n                }\n\n                _r2 = _step2.value;\n                _context3.t3 = u;\n                _context3.next = 33;\n                return this._serializeAttachment(_r2);\n\n              case 33:\n                _context3.t4 = _context3.sent;\n\n                _context3.t3.push.call(_context3.t3, _context3.t4);\n\n              case 35:\n                _context3.next = 28;\n                break;\n\n              case 37:\n                _context3.next = 42;\n                break;\n\n              case 39:\n                _context3.prev = 39;\n                _context3.t5 = _context3[\"catch\"](26);\n\n                _iterator2.e(_context3.t5);\n\n              case 42:\n                _context3.prev = 42;\n\n                _iterator2.f();\n\n                return _context3.finish(42);\n\n              case 45:\n                l = o.length || u.length || n.length ? {\n                  adds: o,\n                  updates: u,\n                  deletes: n\n                } : null, d = {\n                  gdbVersion: (null == t ? void 0 : t.gdbVersion) || this.layer.gdbVersion,\n                  rollbackOnFailure: null == t ? void 0 : t.rollbackOnFailureEnabled,\n                  useGlobalIds: null == t ? void 0 : t.globalIdUsed,\n                  returnEditMoment: null == t ? void 0 : t.returnEditMoment,\n                  usePreviousEditMoment: null == t ? void 0 : t.usePreviousEditMoment,\n                  sessionId: null == t ? void 0 : t.sessionId\n                };\n                null != t && t.returnServiceEditsOption ? (d.edits = JSON.stringify([{\n                  id: this.layer.layerId,\n                  adds: s,\n                  updates: a,\n                  deletes: i,\n                  attachments: l\n                }]), d.returnServiceEditsOption = q.toJSON(null == t ? void 0 : t.returnServiceEditsOption), d.returnServiceEditsInSourceSR = null == t ? void 0 : t.returnServiceEditsInSourceSR) : (d.adds = s.length ? JSON.stringify(s) : null, d.updates = a.length ? JSON.stringify(a) : null, d.deletes = i.length ? null != t && t.globalIdUsed ? JSON.stringify(i) : i.join(\",\") : null, d.attachments = l && JSON.stringify(l));\n                c = this._getLayerRequestOptions({\n                  method: \"post\",\n                  query: d\n                });\n                h = null != t && t.returnServiceEditsOption ? this.layer.url : this.layer.parsedUrl.path;\n                _context3.next = 51;\n                return r(h + \"/applyEdits\", c);\n\n              case 51:\n                p = _context3.sent;\n                return _context3.abrupt(\"return\", this._createEditsResult(p));\n\n              case 53:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[6, 19, 22, 25], [26, 39, 42, 45]]);\n      }));\n\n      function applyEdits(_x7, _x8) {\n        return _applyEdits.apply(this, arguments);\n      }\n\n      return applyEdits;\n    }()\n  }, {\n    key: \"deleteAttachments\",\n    value: function () {\n      var _deleteAttachments = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e, t) {\n        var s, a;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.load();\n\n              case 2:\n                s = e.attributes[this.layer.objectIdField], a = this.layer.parsedUrl.path + \"/\" + s + \"/deleteAttachments\";\n                _context4.prev = 3;\n                _context4.next = 6;\n                return r(a, this._getLayerRequestOptions({\n                  query: {\n                    attachmentIds: t.join(\",\")\n                  },\n                  method: \"post\"\n                }));\n\n              case 6:\n                return _context4.abrupt(\"return\", _context4.sent.data.deleteAttachmentResults.map(this._createFeatureEditResult));\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](3);\n                throw this._createAttachmentErrorResult(s, _context4.t0);\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[3, 9]]);\n      }));\n\n      function deleteAttachments(_x9, _x10) {\n        return _deleteAttachments.apply(this, arguments);\n      }\n\n      return deleteAttachments;\n    }()\n  }, {\n    key: \"fetchRecomputedExtents\",\n    value: function fetchRecomputedExtents() {\n      var _this2 = this;\n\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var t = e.signal;\n      return this.load({\n        signal: t\n      }).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var t, _this2$layer, a, i, _yield$r, o, u, n, l, d, c;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                t = _this2._getLayerRequestOptions(_objectSpread(_objectSpread({}, e), {}, {\n                  query: {\n                    returnUpdates: !0\n                  }\n                }));\n                _this2$layer = _this2.layer;\n                a = _this2$layer.layerId;\n                i = _this2$layer.url;\n                _context5.next = 6;\n                return r(\"\".concat(i, \"/\").concat(a), t);\n\n              case 6:\n                _yield$r = _context5.sent;\n                o = _yield$r.data;\n                u = o.id;\n                n = o.extent;\n                l = o.fullExtent;\n                d = o.timeExtent;\n                c = n || l;\n                return _context5.abrupt(\"return\", {\n                  id: u,\n                  fullExtent: c && y.fromJSON(c),\n                  timeExtent: d && s.fromJSON({\n                    start: d[0],\n                    end: d[1]\n                  })\n                });\n\n              case 14:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      })));\n    }\n  }, {\n    key: \"queryAttachments\",\n    value: function () {\n      var _queryAttachments = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e) {\n        var t,\n            s,\n            a,\n            i,\n            _t,\n            _s,\n            _iterator3,\n            _step3,\n            _e3,\n            _t2,\n            _args6 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                t = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : {};\n                s = this.layer.parsedUrl, a = s.path;\n                _context6.next = 4;\n                return this.load();\n\n              case 4:\n                i = this._getLayerRequestOptions(t);\n\n                if (this.layer.get(\"capabilities.operations.supportsQueryAttachments\")) {\n                  _context6.next = 10;\n                  break;\n                }\n\n                _t = e.objectIds, _s = [];\n                _iterator3 = _createForOfIteratorHelper(_t);\n\n                try {\n                  for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                    _e3 = _step3.value;\n                    _t2 = a + \"/\" + _e3 + \"/attachments\";\n\n                    _s.push(r(_t2, i));\n                  }\n                } catch (err) {\n                  _iterator3.e(err);\n                } finally {\n                  _iterator3.f();\n                }\n\n                return _context6.abrupt(\"return\", Promise.all(_s).then(function (e) {\n                  return _t.map(function (t, r) {\n                    return {\n                      parentObjectId: t,\n                      attachmentInfos: e[r].data.attachmentInfos\n                    };\n                  });\n                }).then(function (e) {\n                  return g(e, a);\n                }));\n\n              case 10:\n                return _context6.abrupt(\"return\", this.queryTask.executeAttachmentQuery(e, i));\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function queryAttachments(_x11) {\n        return _queryAttachments.apply(this, arguments);\n      }\n\n      return queryAttachments;\n    }()\n  }, {\n    key: \"queryFeatures\",\n    value: function () {\n      var _queryFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e, t) {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this.load();\n\n              case 2:\n                return _context7.abrupt(\"return\", this.queryTask.execute(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function queryFeatures(_x12, _x13) {\n        return _queryFeatures.apply(this, arguments);\n      }\n\n      return queryFeatures;\n    }()\n  }, {\n    key: \"queryFeaturesJSON\",\n    value: function () {\n      var _queryFeaturesJSON = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(e, t) {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this.load();\n\n              case 2:\n                return _context8.abrupt(\"return\", this.queryTask.executeJSON(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function queryFeaturesJSON(_x14, _x15) {\n        return _queryFeaturesJSON.apply(this, arguments);\n      }\n\n      return queryFeaturesJSON;\n    }()\n  }, {\n    key: \"queryObjectIds\",\n    value: function () {\n      var _queryObjectIds = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(e, t) {\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return this.load();\n\n              case 2:\n                return _context9.abrupt(\"return\", this.queryTask.executeForIds(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function queryObjectIds(_x16, _x17) {\n        return _queryObjectIds.apply(this, arguments);\n      }\n\n      return queryObjectIds;\n    }()\n  }, {\n    key: \"queryFeatureCount\",\n    value: function () {\n      var _queryFeatureCount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(e, t) {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.next = 2;\n                return this.load();\n\n              case 2:\n                return _context10.abrupt(\"return\", this.queryTask.executeForCount(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function queryFeatureCount(_x18, _x19) {\n        return _queryFeatureCount.apply(this, arguments);\n      }\n\n      return queryFeatureCount;\n    }()\n  }, {\n    key: \"queryExtent\",\n    value: function () {\n      var _queryExtent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(e, t) {\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.next = 2;\n                return this.load();\n\n              case 2:\n                return _context11.abrupt(\"return\", this.queryTask.executeForExtent(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function queryExtent(_x20, _x21) {\n        return _queryExtent.apply(this, arguments);\n      }\n\n      return queryExtent;\n    }()\n  }, {\n    key: \"queryRelatedFeatures\",\n    value: function () {\n      var _queryRelatedFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(e, t) {\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.next = 2;\n                return this.load();\n\n              case 2:\n                return _context12.abrupt(\"return\", this.queryTask.executeRelationshipQuery(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function queryRelatedFeatures(_x22, _x23) {\n        return _queryRelatedFeatures.apply(this, arguments);\n      }\n\n      return queryRelatedFeatures;\n    }()\n  }, {\n    key: \"queryRelatedFeaturesCount\",\n    value: function () {\n      var _queryRelatedFeaturesCount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(e, t) {\n        return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                _context13.next = 2;\n                return this.load();\n\n              case 2:\n                return _context13.abrupt(\"return\", this.queryTask.executeRelationshipQueryForCount(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function queryRelatedFeaturesCount(_x24, _x25) {\n        return _queryRelatedFeaturesCount.apply(this, arguments);\n      }\n\n      return queryRelatedFeaturesCount;\n    }()\n  }, {\n    key: \"queryTopFeatures\",\n    value: function () {\n      var _queryTopFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14(e, t) {\n        return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                _context14.next = 2;\n                return this.load();\n\n              case 2:\n                return _context14.abrupt(\"return\", this.queryTask.executeTopFeaturesQuery(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function queryTopFeatures(_x26, _x27) {\n        return _queryTopFeatures.apply(this, arguments);\n      }\n\n      return queryTopFeatures;\n    }()\n  }, {\n    key: \"queryTopObjectIds\",\n    value: function () {\n      var _queryTopObjectIds = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(e, t) {\n        return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _context15.next = 2;\n                return this.load();\n\n              case 2:\n                return _context15.abrupt(\"return\", this.queryTask.executeForTopIds(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      function queryTopObjectIds(_x28, _x29) {\n        return _queryTopObjectIds.apply(this, arguments);\n      }\n\n      return queryTopObjectIds;\n    }()\n  }, {\n    key: \"queryTopExtents\",\n    value: function () {\n      var _queryTopExtents = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(e, t) {\n        return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                _context16.next = 2;\n                return this.load();\n\n              case 2:\n                return _context16.abrupt(\"return\", this.queryTask.executeForTopExtents(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      function queryTopExtents(_x30, _x31) {\n        return _queryTopExtents.apply(this, arguments);\n      }\n\n      return queryTopExtents;\n    }()\n  }, {\n    key: \"queryTopCount\",\n    value: function () {\n      var _queryTopCount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(e, t) {\n        return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                _context17.next = 2;\n                return this.load();\n\n              case 2:\n                return _context17.abrupt(\"return\", this.queryTask.executeForTopCount(e, _objectSpread(_objectSpread({}, t), {}, {\n                  query: this._createRequestQueryOptions(t)\n                })));\n\n              case 3:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this);\n      }));\n\n      function queryTopCount(_x32, _x33) {\n        return _queryTopCount.apply(this, arguments);\n      }\n\n      return queryTopCount;\n    }()\n  }, {\n    key: \"_createRequestQueryOptions\",\n    value: function _createRequestQueryOptions(e) {\n      return _objectSpread(_objectSpread({}, this.layer.customParameters), {}, {\n        token: this.layer.apiKey\n      }, null == e ? void 0 : e.query);\n    }\n  }, {\n    key: \"_fetchService\",\n    value: function () {\n      var _fetchService2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18(e) {\n        var t, _yield$r2, _s2, s;\n\n        return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                t = this.layer.sourceJSON;\n\n                if (t) {\n                  _context18.next = 7;\n                  break;\n                }\n\n                _context18.next = 4;\n                return r(this.layer.parsedUrl.path, this._getLayerRequestOptions({\n                  query: i(\"featurelayer-advanced-symbols\") ? {\n                    returnAdvancedSymbols: !0\n                  } : {},\n                  signal: e\n                }));\n\n              case 4:\n                _yield$r2 = _context18.sent;\n                _s2 = _yield$r2.data;\n                t = _s2;\n\n              case 7:\n                this.sourceJSON = this._patchServiceJSON(t);\n                s = t.type;\n\n                if (I.has(s)) {\n                  _context18.next = 11;\n                  break;\n                }\n\n                throw new a(\"feature-layer-source:unsupported-type\", \"Source type \\\"\".concat(s, \"\\\" is not supported\"));\n\n              case 11:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      function _fetchService(_x34) {\n        return _fetchService2.apply(this, arguments);\n      }\n\n      return _fetchService;\n    }()\n  }, {\n    key: \"_patchServiceJSON\",\n    value: function _patchServiceJSON(e) {\n      var t;\n\n      if (\"Table\" !== e.type && e.geometryType && (null == e || null == (t = e.drawingInfo) || !t.renderer) && !e.defaultSymbol) {\n        var _t3 = f(e.geometryType).renderer;\n        d(\"drawingInfo.renderer\", _t3, e);\n      }\n\n      return \"esriGeometryMultiPatch\" === e.geometryType && e.infoFor3D && (e.geometryType = \"mesh\"), e;\n    }\n  }, {\n    key: \"_serializeFeature\",\n    value: function _serializeFeature(e) {\n      var t = e.geometry,\n          r = e.attributes;\n      return l(t) ? {\n        attributes: r\n      } : \"mesh\" === t.type || \"extent\" === t.type ? null : {\n        geometry: t.toJSON(),\n        attributes: r\n      };\n    }\n  }, {\n    key: \"_serializeAttachment\",\n    value: function () {\n      var _serializeAttachment2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee19(e) {\n        var t, r, s, a, i, o, u, n, _e4;\n\n        return _regeneratorRuntime.wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                t = e.feature, r = e.attachment, s = r.globalId, a = r.name, i = r.contentType, o = r.data, u = r.uploadId, n = {\n                  globalId: s,\n                  parentGlobalId: null,\n                  contentType: null,\n                  name: null,\n                  uploadId: null,\n                  data: null\n                };\n\n                if (!(t && (n.parentGlobalId = \"attributes\" in t ? t.attributes && t.attributes[this.layer.globalIdField] : t.globalId), u)) {\n                  _context19.next = 5;\n                  break;\n                }\n\n                n.uploadId = u;\n                _context19.next = 10;\n                break;\n\n              case 5:\n                if (!o) {\n                  _context19.next = 10;\n                  break;\n                }\n\n                _context19.next = 8;\n                return _(o);\n\n              case 8:\n                _e4 = _context19.sent;\n                n.contentType = _e4.mediaType, n.data = _e4.data, o instanceof File && (n.name = o.name);\n\n              case 10:\n                return _context19.abrupt(\"return\", (a && (n.name = a), i && (n.contentType = i), n));\n\n              case 11:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee19, this);\n      }));\n\n      function _serializeAttachment(_x35) {\n        return _serializeAttachment2.apply(this, arguments);\n      }\n\n      return _serializeAttachment;\n    }()\n  }, {\n    key: \"_getFeatureIds\",\n    value: function _getFeatureIds(e, t) {\n      var r = e[0];\n      return r ? this._canUseGlobalIds(t, e) ? this._getGlobalIdsFromFeatureIdentifier(e) : \"objectId\" in r ? this._getObjectIdsFromFeatureIdentifier(e) : this._getIdsFromFeatures(e) : [];\n    }\n  }, {\n    key: \"_getIdsFromFeatures\",\n    value: function _getIdsFromFeatures(e) {\n      var t = this.layer.objectIdField;\n      return e.map(function (e) {\n        return e.attributes && e.attributes[t];\n      });\n    }\n  }, {\n    key: \"_canUseGlobalIds\",\n    value: function _canUseGlobalIds(e, t) {\n      return e && \"globalId\" in t[0];\n    }\n  }, {\n    key: \"_getObjectIdsFromFeatureIdentifier\",\n    value: function _getObjectIdsFromFeatureIdentifier(e) {\n      return e.map(function (e) {\n        return e.objectId;\n      });\n    }\n  }, {\n    key: \"_getGlobalIdsFromFeatureIdentifier\",\n    value: function _getGlobalIdsFromFeatureIdentifier(e) {\n      return e.map(function (e) {\n        return e.globalId;\n      });\n    }\n  }, {\n    key: \"_createEditsResult\",\n    value: function _createEditsResult(e) {\n      var _this3 = this;\n\n      var t;\n      var r = e.data,\n          s = this.layer.layerId,\n          a = [];\n      var i = null;\n\n      if (Array.isArray(r)) {\n        var _iterator4 = _createForOfIteratorHelper(r),\n            _step4;\n\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _n = _step4.value;\n            a.push({\n              id: _n.id,\n              editedFeatures: _n.editedFeatures\n            }), _n.id === s && (i = {\n              addResults: _n.addResults,\n              updateResults: _n.updateResults,\n              deleteResults: _n.deleteResults,\n              attachments: _n.attachments,\n              editMoment: _n.editMoment\n            });\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n      } else i = r;\n\n      var o = null == (t = i) ? void 0 : t.attachments,\n          u = {\n        addFeatureResults: i.addResults ? i.addResults.map(this._createFeatureEditResult, this) : [],\n        updateFeatureResults: i.updateResults ? i.updateResults.map(this._createFeatureEditResult, this) : [],\n        deleteFeatureResults: i.deleteResults ? i.deleteResults.map(this._createFeatureEditResult, this) : [],\n        addAttachmentResults: o && o.addResults ? o.addResults.map(this._createFeatureEditResult, this) : [],\n        updateAttachmentResults: o && o.updateResults ? o.updateResults.map(this._createFeatureEditResult, this) : [],\n        deleteAttachmentResults: o && o.deleteResults ? o.deleteResults.map(this._createFeatureEditResult, this) : []\n      };\n\n      if (i.editMoment && (u.editMoment = i.editMoment), a.length > 0) {\n        u.editedFeatureResults = [];\n\n        var _iterator5 = _createForOfIteratorHelper(a),\n            _step5;\n\n        try {\n          var _loop = function _loop() {\n            var e = _step5.value;\n            var _e$editedFeatures = e.editedFeatures,\n                t = _e$editedFeatures.adds,\n                r = _e$editedFeatures.updates,\n                s = _e$editedFeatures.deletes,\n                a = _e$editedFeatures.spatialReference,\n                i = a ? new b(a) : null;\n            u.editedFeatureResults.push({\n              layerId: e.id,\n              editedFeatures: {\n                adds: (null == t ? void 0 : t.map(function (e) {\n                  return _this3._createEditedFeature(e, i);\n                })) || [],\n                updates: (null == r ? void 0 : r.map(function (e) {\n                  return {\n                    original: _this3._createEditedFeature(e[0], i),\n                    current: _this3._createEditedFeature(e[1], i)\n                  };\n                })) || [],\n                deletes: (null == s ? void 0 : s.map(function (e) {\n                  return _this3._createEditedFeature(e, i);\n                })) || [],\n                spatialReference: i\n              }\n            });\n          };\n\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            _loop();\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      }\n\n      return u;\n    }\n  }, {\n    key: \"_createEditedFeature\",\n    value: function _createEditedFeature(e, r) {\n      return new t({\n        attributes: e.attributes,\n        geometry: m(_objectSpread(_objectSpread({}, e.geometry), {}, {\n          spatialReference: r\n        }))\n      });\n    }\n  }, {\n    key: \"_createFeatureEditResult\",\n    value: function _createFeatureEditResult(e) {\n      var t = !0 === e.success ? null : e.error || {\n        code: void 0,\n        description: void 0\n      };\n      return {\n        objectId: e.objectId,\n        globalId: e.globalId,\n        error: t ? new a(\"feature-layer-source:edit-failure\", t.description, {\n          code: t.code\n        }) : null\n      };\n    }\n  }, {\n    key: \"_createAttachmentErrorResult\",\n    value: function _createAttachmentErrorResult(e, t) {\n      var r = t.details.messages && t.details.messages[0] || t.message,\n          s = t.details.httpStatus || t.details.messageCode;\n      return {\n        objectId: e,\n        globalId: null,\n        error: new a(\"feature-layer-source:attachment-failure\", r, {\n          code: s\n        })\n      };\n    }\n  }, {\n    key: \"_getFormDataForAttachment\",\n    value: function _getFormDataForAttachment(e, t) {\n      var r = e instanceof FormData ? e : e && e.elements ? new FormData(e) : null;\n      if (r) for (var _s3 in t) {\n        var _e5 = t[_s3];\n        null != _e5 && (r.set ? r.set(_s3, _e5) : r.append(_s3, _e5));\n      }\n      return r;\n    }\n  }, {\n    key: \"_getLayerRequestOptions\",\n    value: function _getLayerRequestOptions() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$layer2 = this.layer,\n          t = _this$layer2.parsedUrl,\n          r = _this$layer2.gdbVersion,\n          s = _this$layer2.dynamicDataSource;\n      return _objectSpread(_objectSpread({}, e), {}, {\n        query: _objectSpread(_objectSpread({\n          gdbVersion: r,\n          layer: s ? JSON.stringify({\n            source: s\n          }) : void 0\n        }, t.query), {}, {\n          f: \"json\"\n        }, this._createRequestQueryOptions(e)),\n        responseType: \"json\"\n      });\n    }\n  }]);\n\n  return O;\n}(u);\n\ne([h()], O.prototype, \"type\", void 0), e([h({\n  constructOnly: !0\n})], O.prototype, \"layer\", void 0), e([h({\n  readOnly: !0\n})], O.prototype, \"queryTask\", null), O = e([p(\"esri.layers.graphics.sources.FeatureLayerSource\")], O);\nvar j = O;\nexport default j;"],"sourceRoot":""}