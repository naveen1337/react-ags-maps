{"version":3,"sources":["webpack:///C:/Users/chubs/development/react-ags-maps/node_modules/@arcgis/core/layers/graphics/editingSupport.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","n","e","applyEdits","l","_x","_x2","_x3","_l","this","mark","_callee","t","a","s","d","_yield$o","_d","_n","_u2","_p","_args","wrap","_context","prev","next","undefined","edits","result","Promise","emit","o","sent","results","addedFeatures","error","map","addFeatureResults","updatedFeatures","updateFeatureResults","deletedFeatures","deleteFeatureResults","addedAttachments","addAttachmentResults","updatedAttachments","updateAttachmentResults","deletedAttachments","deleteAttachmentResults","abrupt","editedFeatureResults","editedFeatures","t0","stop","_x4","_x5","_x6","_x7","_o","_callee2","r","_yield$u","_context2","load","reject","concat","type","layer","editingEnabled","u","options","addFeatures","updateFeatures","deleteFeatures","addAttachments","updateAttachments","deleteAttachments","t1","t2","_x8","_x9","_x10","_u","_callee3","_context3","capabilities","data","isVersioned","gdbVersion","editing","supportsRollbackOnFailure","rollbackOnFailureEnabled","supportsGlobalId","globalIdUsed","returnServiceEditsOption","supportsReturnServiceEditsInSourceSpatialReference","returnServiceEditsInSourceSR","isCollection","toArray","operations","supportsAdd","supportsUpdate","supportsDelete","g","c","m","h","y","f","p","attributes","globalIdField","globalId","geometry","hasZ","supportsZ","hasM","supportsM","supportsGeometryUpdate","feature","attachment","uploadId","File","name","supportsUploadWithItemId","_e","isBase64","_x11","_f","_callee4","_context4","slice"],"mappings":"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","file":"11-a4d1025eb76402f8b157.js","sourcesContent":["import _defineProperty from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"C:/Users/chubs/development/react-ags-maps/docz/node_modules/@babel/runtime/regenerator\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../Graphic.js\";\nimport t from \"../../core/Collection.js\";\nimport a from \"../../core/Error.js\";\nimport { clone as r } from \"../../core/lang.js\";\nimport { isSome as i } from \"../../core/maybe.js\";\nimport { dataComponents as s } from \"../../core/urlUtils.js\";\nimport { normalizeCentralMeridian as d } from \"../../geometry/support/normalizeUtils.js\";\n\nfunction n(e) {\n  return e && null != e.applyEdits;\n}\n\nfunction l(_x, _x2, _x3) {\n  return _l.apply(this, arguments);\n}\n\nfunction _l() {\n  _l = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e, t, a) {\n    var i,\n        s,\n        d,\n        n,\n        l,\n        _yield$o,\n        _d,\n        _n,\n        _u2,\n        _p,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            i = _args.length > 3 && _args[3] !== undefined ? _args[3] : {};\n            n = {\n              edits: a,\n              result: new Promise(function (e, t) {\n                s = e, d = t;\n              })\n            };\n            e.emit(\"apply-edits\", n);\n            _context.prev = 3;\n            _context.next = 6;\n            return o(e, t, a, i);\n\n          case 6:\n            _yield$o = _context.sent;\n            _d = _yield$o.results;\n            _n = _yield$o.edits;\n\n            _u2 = function _u2(e) {\n              return e.filter(function (e) {\n                return !e.error;\n              }).map(r);\n            };\n\n            _p = {\n              edits: _n,\n              addedFeatures: _u2(_d.addFeatureResults),\n              updatedFeatures: _u2(_d.updateFeatureResults),\n              deletedFeatures: _u2(_d.deleteFeatureResults),\n              addedAttachments: _u2(_d.addAttachmentResults),\n              updatedAttachments: _u2(_d.updateAttachmentResults),\n              deletedAttachments: _u2(_d.deleteAttachmentResults)\n            };\n            return _context.abrupt(\"return\", (null != (l = _d.editedFeatureResults) && l.length && (_p.editedFeatures = _d.editedFeatureResults), (_p.addedFeatures.length || _p.updatedFeatures.length || _p.deletedFeatures.length || _p.addedAttachments.length || _p.updatedAttachments.length || _p.deletedAttachments.length) && e.emit(\"edits\", _p), s(_p), _d));\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](3);\n            throw d(_context.t0), _context.t0;\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 14]]);\n  }));\n  return _l.apply(this, arguments);\n}\n\nfunction o(_x4, _x5, _x6, _x7) {\n  return _o.apply(this, arguments);\n}\n\nfunction _o() {\n  _o = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e, t, r, i) {\n    var _yield$u, s, d;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return e.load();\n\n          case 2:\n            if (n(t)) {\n              _context2.next = 4;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", Promise.reject(new a(\"\".concat(e.type, \"-layer:no-editing-support\"), \"Layer source does not support applyEdits capability\", {\n              layer: e\n            })));\n\n          case 4:\n            if (e.editingEnabled) {\n              _context2.next = 6;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:editing-disabled\"), \"Editing is disabled for layer\", {\n              layer: e\n            });\n\n          case 6:\n            _context2.next = 8;\n            return u(e, r, i);\n\n          case 8:\n            _yield$u = _context2.sent;\n            s = _yield$u.edits;\n            d = _yield$u.options;\n\n            if (!(s.addFeatures.length || s.updateFeatures.length || s.deleteFeatures.length || s.addAttachments.length || s.updateAttachments.length || s.deleteAttachments.length)) {\n              _context2.next = 19;\n              break;\n            }\n\n            _context2.t1 = s;\n            _context2.next = 15;\n            return t.applyEdits(s, d);\n\n          case 15:\n            _context2.t2 = _context2.sent;\n            _context2.t0 = {\n              edits: _context2.t1,\n              results: _context2.t2\n            };\n            _context2.next = 20;\n            break;\n\n          case 19:\n            _context2.t0 = {\n              edits: s,\n              results: {\n                addFeatureResults: [],\n                updateFeatureResults: [],\n                deleteFeatureResults: [],\n                addAttachmentResults: [],\n                updateAttachmentResults: [],\n                deleteAttachmentResults: []\n              }\n            };\n\n          case 20:\n            return _context2.abrupt(\"return\", _context2.t0);\n\n          case 21:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _o.apply(this, arguments);\n}\n\nfunction u(_x8, _x9, _x10) {\n  return _u.apply(this, arguments);\n}\n\nfunction _u() {\n  _u = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, r, i) {\n    var s, d, n, l, o;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            s = r && (r.addFeatures || r.updateFeatures || r.deleteFeatures), d = r && (r.addAttachments || r.updateAttachments || r.deleteAttachments);\n\n            if (!(!r || !s && !d)) {\n              _context3.next = 3;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:missing-parameters\"), \"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");\n\n          case 3:\n            if (!(!e.capabilities.data.isVersioned && i && i.gdbVersion)) {\n              _context3.next = 5;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:invalid-parameter\"), \"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");\n\n          case 5:\n            if (!(!e.capabilities.editing.supportsRollbackOnFailure && i && i.rollbackOnFailureEnabled)) {\n              _context3.next = 7;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:invalid-parameter\"), \"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");\n\n          case 7:\n            if (!(!e.capabilities.editing.supportsGlobalId && i && i.globalIdUsed)) {\n              _context3.next = 9;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:invalid-parameter\"), \"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");\n\n          case 9:\n            if (!(!e.capabilities.editing.supportsGlobalId && d)) {\n              _context3.next = 11;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:invalid-parameter\"), \"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");\n\n          case 11:\n            if (!((!i || !i.globalIdUsed) && d)) {\n              _context3.next = 13;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:invalid-parameter\"), \"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\");\n\n          case 13:\n            n = _objectSpread({}, i);\n\n            if (!(null != n.rollbackOnFailureEnabled || e.capabilities.editing.supportsRollbackOnFailure || (n.rollbackOnFailureEnabled = !0), !1 === n.rollbackOnFailureEnabled && \"original-and-current-features\" === n.returnServiceEditsOption)) {\n              _context3.next = 16;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:invalid-parameter\"), \"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true.\");\n\n          case 16:\n            if (!(!e.capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference && n.returnServiceEditsInSourceSR)) {\n              _context3.next = 18;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:invalid-parameter\"), \"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");\n\n          case 18:\n            if (!(n.returnServiceEditsInSourceSR && \"original-and-current-features\" !== n.returnServiceEditsOption)) {\n              _context3.next = 20;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:invalid-parameter\"), \"'returnServiceEditsOption' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");\n\n          case 20:\n            l = _objectSpread({}, r);\n\n            if (!(l.addFeatures = r && t.isCollection(r.addFeatures) ? r.addFeatures.toArray() : l.addFeatures || [], l.updateFeatures = r && t.isCollection(r.updateFeatures) ? r.updateFeatures.toArray() : l.updateFeatures || [], l.deleteFeatures = r && t.isCollection(r.deleteFeatures) ? r.deleteFeatures.toArray() : l.deleteFeatures || [], l.addFeatures.length && !e.capabilities.operations.supportsAdd)) {\n              _context3.next = 23;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:unsupported-operation\"), \"Layer does not support adding features.\");\n\n          case 23:\n            if (!(l.updateFeatures.length && !e.capabilities.operations.supportsUpdate)) {\n              _context3.next = 25;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:unsupported-operation\"), \"Layer does not support updating features.\");\n\n          case 25:\n            if (!(l.deleteFeatures.length && !e.capabilities.operations.supportsDelete)) {\n              _context3.next = 27;\n              break;\n            }\n\n            throw new a(\"\".concat(e.type, \"-layer:unsupported-operation\"), \"Layer does not support deleting features.\");\n\n          case 27:\n            l.addAttachments = l.addAttachments || [], l.updateAttachments = l.updateAttachments || [], l.deleteAttachments = l.deleteAttachments || [], l.addFeatures = l.addFeatures.map(g), l.updateFeatures = l.updateFeatures.map(g);\n            o = i && i.globalIdUsed;\n            l.addFeatures.forEach(function (t) {\n              return c(t, e, o);\n            }), l.updateFeatures.forEach(function (t) {\n              return m(t, e, o);\n            }), l.deleteFeatures.forEach(function (t) {\n              return h(t, e, o);\n            }), l.addAttachments.forEach(function (t) {\n              return y(t, e);\n            }), l.updateAttachments.forEach(function (t) {\n              return y(t, e);\n            });\n            _context3.next = 32;\n            return f(l);\n\n          case 32:\n            _context3.t0 = _context3.sent;\n            _context3.t1 = n;\n            return _context3.abrupt(\"return\", {\n              edits: _context3.t0,\n              options: _context3.t1\n            });\n\n          case 35:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _u.apply(this, arguments);\n}\n\nfunction p(e, t, r) {\n  if (r) {\n    if (\"attributes\" in e && !e.attributes[t.globalIdField]) throw new a(\"\".concat(t.type, \"-layer:invalid-parameter\"), \"Feature should have 'globalId' when 'globalIdUsed' is true\");\n    if (!(\"attributes\" in e) && !e.globalId) throw new a(\"\".concat(t.type, \"-layer:invalid-parameter\"), \"'globalId' of the feature should be passed when 'globalIdUsed' is true\");\n  }\n\n  if (\"geometry\" in e && i(e.geometry)) {\n    if (e.geometry.hasZ && !1 === t.capabilities.data.supportsZ) throw new a(\"\".concat(t.type, \"-layer:z-unsupported\"), \"Layer does not support z values while feature has z values.\");\n    if (e.geometry.hasM && !1 === t.capabilities.data.supportsM) throw new a(\"\".concat(t.type, \"-layer:m-unsupported\"), \"Layer does not support m values while feature has m values.\");\n  }\n}\n\nfunction c(e, t, a) {\n  p(e, t, a);\n}\n\nfunction h(e, t, a) {\n  p(e, t, a);\n}\n\nfunction m(e, t, r) {\n  if (p(e, t, r), \"geometry\" in e && i(e.geometry) && !t.capabilities.editing.supportsGeometryUpdate) throw new a(\"\".concat(t.type, \"-layer:unsupported-operation\"), \"Layer does not support geometry updates.\");\n}\n\nfunction y(e, t) {\n  var r = e.feature,\n      i = e.attachment;\n  if (!r || \"attributes\" in r && !r.attributes[t.globalIdField]) throw new a(\"\".concat(t.type, \"-layer:invalid-parameter\"), \"Attachment should have reference to a feature with 'globalId'\");\n  if (!(\"attributes\" in r) && !r.globalId) throw new a(\"\".concat(t.type, \"-layer:invalid-parameter\"), \"Attachment should have reference to 'globalId' of the parent feature\");\n  if (!i.globalId) throw new a(\"\".concat(t.type, \"-layer:invalid-parameter\"), \"Attachment should have 'globalId'\");\n  if (!i.data && !i.uploadId) throw new a(\"\".concat(t.type, \"-layer:invalid-parameter\"), \"Attachment should have 'data' or 'uploadId'\");\n  if (!(i.data instanceof File && !!i.data.name) && !i.name) throw new a(\"\".concat(t.type, \"-layer:invalid-parameter\"), \"'name' is required when attachment is specified as Base64 encoded string using 'data'\");\n  if (!t.capabilities.editing.supportsUploadWithItemId && i.uploadId) throw new a(\"\".concat(t.type, \"-layer:invalid-parameter\"), \"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");\n\n  if (\"string\" == typeof i.data) {\n    var _e = s(i.data);\n\n    if (_e && !_e.isBase64) throw new a(\"\".concat(t.type, \"-layer:invalid-parameter\"), \"Attachment 'data' should be a Blob, File or Base64 encoded string\");\n  }\n}\n\nfunction f(_x11) {\n  return _f.apply(this, arguments);\n}\n\nfunction _f() {\n  _f = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n    var t, a, r, i, s, n;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            t = e.addFeatures;\n            a = e.updateFeatures;\n            r = t.concat(a).map(function (e) {\n              return e.geometry;\n            });\n            _context4.next = 5;\n            return d(r);\n\n          case 5:\n            i = _context4.sent;\n            s = t.length;\n            n = a.length;\n            return _context4.abrupt(\"return\", (i.slice(0, s).forEach(function (t, a) {\n              return e.addFeatures[a].geometry = t;\n            }), i.slice(s, s + n).forEach(function (t, a) {\n              return e.updateFeatures[a].geometry = t;\n            }), e));\n\n          case 9:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _f.apply(this, arguments);\n}\n\nfunction g(t) {\n  var a = new e();\n  return t.attributes || (t.attributes = {}), a.geometry = t.geometry, a.attributes = t.attributes, a;\n}\n\nexport { l as applyEdits };"],"sourceRoot":""}