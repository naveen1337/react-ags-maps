(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{K5By:function(e,t,n){"use strict";n.r(t),n.d(t,"executeScript",(function(){return ne})),n.d(t,"extend",(function(){return te})),n.d(t,"extractFieldLiterals",(function(){return re})),n.d(t,"findFunctionCalls",(function(){return ie})),n.d(t,"functionHelper",(function(){return ee})),n.d(t,"referencesFunction",(function(){return oe})),n.d(t,"referencesMember",(function(){return ae})),n.d(t,"validateScript",(function(){return ce}));var r=n("VfH5"),c=n("+7Wu"),a=n("lOyF"),o=n("iSw9"),i=n("vq5L"),u=n("FlI3"),l=n("2zGX"),s=n("u6Q5"),f=n("r8Rw"),b=n("omx3"),h=n("dEnM"),O=n("inhR"),d=n("XdFM"),p=n("pae5"),j=n("jEk5"),v=n("2Dkm"),g=n("Ya8q"),E=n("IH5m"),y=n("nd5+"),w=n("DjXQ"),N=n("XeQg"),m=n("OTJA"),I=n("cFtQ"),S=n("AQ8/"),T=n("YHXj");function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e){return e instanceof Error?Object(E.s)(e):Object(E.s)(new Error(e))}function C(e){return Object(E.t)(e)}function U(e,t){for(var n=[],r=0;r<t.arguments.length;r++)n.push(M(e,t.arguments[r]));return Object(E.b)(n)}function x(e,t,n){return Object(E.c)((function(r,c){U(e,t).then((function(a){try{r(n(e,t,a))}catch(o){c(o)}}),c)}))}function F(e,t,n){try{return U(e,t).then((function(r){try{var c=n(e,t,r);return function(e){return e&&"function"==typeof e.then}(c)?c:Object(E.t)(c)}catch(a){return P(a)}}))}catch(r){return P(r)}}function M(e,t,n){try{if(t.breakpoint&&!0!==n)return t.breakpoint().then((function(){return M(e,t,!0)}));switch(t.type){case"VariableDeclarator":return function(e,t){try{var r=null;return r=null===t.init?Object(E.t)(null):M(e,t.init),null!==e.localScope?r.then((function(n){return Object(E.c)((function(r){if(n===s.P&&(n=null),"Identifier"!==t.id.type)throw new Error("Can only assign a regular variable");var c=t.id.name.toLowerCase();e.localScope[c]={value:n,valueset:!0,node:t.init},r(s.P)}))})):r.then((function(n){return Object(E.c)((function(r){if("Identifier"!==t.id.type)throw new Error("Can only assign a regular variable");var c=t.id.name.toLowerCase();n===s.P&&(n=null),e.globalScope[c]={value:n,valueset:!0,node:t.init},r(s.P)}))}))}catch(n){return P(n)}}(e,t);case"VariableDeclaration":return function e(t,n,r){return Object(E.c)((function(c,a){r>=n.declarations.length?c(s.P):M(t,n.declarations[r]).then((function(){r===n.declarations.length-1?c(s.P):e(t,n,r+1).then((function(){c(s.P)}),a)}),a)}))}(e,t,0);case"BlockStatement":return function(e,t){try{return function e(t,n,r){try{return r>=n.body.length?Object(E.t)(s.P):Object(E.c)((function(c,a){M(t,n.body[r]).then((function(o){try{o instanceof s.r||o===s.G||o===s.H||r===n.body.length-1?c(o):e(t,n,r+1).then(c,a)}catch(i){a(i)}}),a)}))}catch(c){return P(c)}}(e,t,0)}catch(n){return P(n)}}(e,t);case"FunctionDeclaration":return function(e,t){try{var r=t.id.name.toLowerCase();return e.globalScope[r]={valueset:!0,node:null,value:new i.a(t,e)},Object(E.t)(s.P)}catch(n){return P(n)}}(e,t);case"ReturnStatement":return function(e,t){return Object(E.c)((function(n,r){null===t.argument?n(new s.r(s.P)):M(e,t.argument).then((function(e){try{n(new s.r(e))}catch(t){r(t)}}),r)}))}(e,t);case"IfStatement":return function(e,t){return Object(E.c)((function(n,r){"AssignmentExpression"!==t.test.type&&"UpdateExpression"!==t.test.type?M(e,t.test).then((function(c){try{!0===c?M(e,t.consequent).then(n,r):!1===c?null!==t.alternate?M(e,t.alternate).then(n,r):n(s.P):r(new Error(Object(f.f)(t.test,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION")))}catch(a){r(a)}}),r):r(new Error(Object(f.f)(t.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,t);case"ExpressionStatement":return function(e,t){try{return"AssignmentExpression"===t.expression.type?M(e,t.expression):(t.expression.type,M(e,t.expression).then((function(e){return Object(E.c)((function(t){t(e===s.P?s.P:new s.i(e))}))})))}catch(n){return Object(E.s)(n)}}(e,t);case"UpdateExpression":return function(e,t){try{var n=t.argument;if("MemberExpression"===n.type){var r={t:null};return M(e,n.object).then((function(t){var c=null;return r.t=t,!0===n.computed?c=M(e,n.property):"Identifier"===n.property.type&&(c=Object(E.t)(n.property.name)),c})).then((function(e){return Object(E.c)((function(n){var c,i=r.t;if(Object(s.u)(i)){if(!Object(s.E)(e))throw new Error("Invalid Parameter");if(e<0&&(e=i.length+e),e<0||e>=i.length)throw new Error("Assignment outside of array bounds");c=Object(s.N)(i[e]),i[e]="++"===t.operator?c+1:c-1}else if(i instanceof a.a){if(!1===Object(s.A)(e))throw new Error("Dictionary accessor must be a string");if(!0!==i.hasField(e))throw new Error("Invalid Parameter");c=Object(s.N)(i.field(e)),i.setField(e,"++"===t.operator?c+1:c-1)}else{if(!(i instanceof o.a))throw Object(s.v)(i)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===Object(s.A)(e))throw new Error("Feature accessor must be a string");if(!0!==i.hasField(e))throw new Error("Invalid Parameter");c=Object(s.N)(i.field(e)),i.setField(e,"++"===t.operator?c+1:c-1)}!1===t.prefix?n(c):n("++"===t.operator?c+1:c-1)}))}))}return Object(E.c)((function(n,r){var c,a="Identifier"===t.argument.type?t.argument.name.toLowerCase():"";if(!a)throw new Error("Invalid identifier");return null!==e.localScope&&void 0!==e.localScope[a]?(c=Object(s.N)(e.localScope[a].value),e.localScope[a]={value:"++"===t.operator?c+1:c-1,valueset:!0,node:t},void(!1===t.prefix?n(c):n("++"===t.operator?c+1:c-1))):void 0!==e.globalScope[a]?(c=Object(s.N)(e.globalScope[a].value),e.globalScope[a]={value:"++"===t.operator?c+1:c-1,valueset:!0,node:t},void(!1===t.prefix?n(c):n("++"===t.operator?c+1:c-1))):void r(new Error("Variable not recognised"))}))}catch(c){return Object(E.s)(c)}}(e,t);case"AssignmentExpression":return function(e,t){return Object(E.c)((function(n,r){var c=t.left;if("MemberExpression"===c.type)M(e,t.right).then((function(i){try{M(e,c.object).then((function(u){try{var l=null;if(!0===c.computed)l=M(e,c.property);else{if("Identifier"!==c.property.type)throw new Error("Expected computed or identifier for assignemnt target");l=Object(E.t)(c.property.name)}l.then((function(e){try{if(Object(s.u)(u)){if(!Object(s.E)(e))throw new Error("Invalid Parameter");if(e<0&&(e=u.length+e),e<0||e>u.length)throw new Error("Assignment outside of array bounds");if(e===u.length){if("="!==t.operator)throw new Error("Invalid Parameter");u[e]=_(i,t.operator,u[e],t)}else u[e]=_(i,t.operator,u[e],t)}else if(u instanceof a.a){if(!1===Object(s.A)(e))throw new Error("Dictionary accessor must be a string");if(!0===u.hasField(e))u.setField(e,_(i,t.operator,u.field(e),t));else{if("="!==t.operator)throw new Error("Invalid Parameter");u.setField(e,_(i,t.operator,null,t))}}else{if(!(u instanceof o.a))throw Object(s.v)(u)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===Object(s.A)(e))throw new Error("Feature accessor must be a string");if(!0===u.hasField(e))u.setField(e,_(i,t.operator,u.field(e),t));else{if("="!==t.operator)throw new Error("Invalid Parameter");u.setField(e,_(i,t.operator,null,t))}}n(s.P)}catch(c){r(c)}}),r)}catch(f){r(f)}}),r)}catch(u){r(u)}}),r);else{var i=c.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[i])return void M(e,t.right).then((function(a){try{e.localScope[i]={value:_(a,t.operator,e.localScope[i].value,t),valueset:!0,node:t.right},n(s.P)}catch(c){r(c)}}),r);void 0!==e.globalScope[i]?M(e,t.right).then((function(a){try{e.globalScope[i]={value:_(a,t.operator,e.globalScope[i].value,t),valueset:!0,node:t.right},n(s.P)}catch(c){r(c)}}),r):r(new Error("Cannot assign undeclared variable"))}}))}(e,t);case"ForStatement":return function(e,t){try{return null!==t.init?M(e,t.init).then((function(){return Object(E.c)((function(n,r){k(e,t,{testResult:!0,lastAction:s.P},(function(e){n(e)}),(function(e){r(e)}),0)}))})):Object(E.c)((function(n,r){k(e,t,{testResult:!0,lastAction:s.P},(function(e){n(e)}),(function(e){r(e)}),0)}))}catch(n){return Object(E.s)(n)}}(e,t);case"ForInStatement":return function(e,t){return Object(E.c)((function(n,r){M(e,t.right).then((function(c){try{("VariableDeclaration"===t.left.type?M(e,t.left):Object(E.t)()).then((function(){try{var i="";if("VariableDeclaration"===t.left.type){var u=t.left.declarations[0].id;"Identifier"===u.type&&(i=u.name)}else"Identifier"===t.left.type&&(i=t.left.name);if(!i)throw new Error(Object(f.f)(t,"RUNTIME","INVALIDVARIABLE"));i=i.toLowerCase();var l=null;if(null!==e.localScope&&void 0!==e.localScope[i]&&(l=e.localScope[i]),null===l&&void 0!==e.globalScope[i]&&(l=e.globalScope[i]),null===l)return void r(new Error(Object(f.f)(t,"RUNTIME","VARIABLENOTDECLARED")));Object(s.u)(c)||Object(s.A)(c)?L(e,t,c,{reject:r,resolve:n},l):Object(s.v)(c)?function(e,t,n,r,a,o){try{if(void 0===o&&(o="i"),0===n.length)return void r.resolve(s.P);!function e(t,n,r,c,a,o,i,u,l){try{if(r.length()<=a)return void i(s.P);c.value="k"===o?r.get(a):a,M(t,n.body).then((function(f){f instanceof s.r?i(f):f===s.G?i(s.P):++l>100?(l=0,setTimeout((function(){e(t,n,r,c,a+1,o,i,u,l)}),0)):e(t,n,r,c,a+1,o,i,u,l)}),(function(e){u(e)}))}catch(f){u(f)}}(e,t,n,a,0,o,(function(e){r.resolve(e)}),(function(e){r.reject(e)}),0)}catch(c){r.reject(c)}}(e,t,c,{reject:r,resolve:n},l):c instanceof a.a||c instanceof o.a?function(e,t,n,c,a){try{L(e,t,n.keys(),c,a,"k")}catch(r){c.reject(r)}}(e,t,c,{reject:r,resolve:n},l):Object(s.K)(c)?function e(t,n,r,c,a,i,u,l){try{t.next().then((function(f){try{if(null===f)i(s.P);else{var b=o.a.createFromGraphicLikeObject(f.geometry,f.attributes,c);b._underlyingGraphic=f,a.value=b,M(n,r.body).then((function(o){try{o===s.G?i(s.P):o instanceof s.r?i(o):++l>100?(l=0,setTimeout((function(){e(t,n,r,c,a,i,u,l)}),0)):e(t,n,r,c,a,i,u,l)}catch(f){u(f)}}),(function(e){u(e)}))}}catch(h){u(h)}}),(function(e){u(e)}))}catch(f){u(f)}}(c.iterator(e.abortSignal),e,t,c,l,(function(e){n(e)}),(function(e){r(e)}),0):L(e,t,[],{reject:r,resolve:n},l)}catch(b){r(b)}}),r)}catch(i){r(i)}}),r)}))}(e,t);case"BreakStatement":return Object(E.t)(s.G);case"EmptyStatement":return Object(E.t)(s.P);case"ContinueStatement":return Object(E.t)(s.H);case"TemplateElement":return function(e,t){return Object(E.t)(t.value?t.value.cooked:"")}(0,t);case"TemplateLiteral":return function(e,t){return Object(E.c)((function(n){var r=[];Object(b.o)(t.expressions,(function(t,n,c,a){return M(e,n).then((function(e){r[c]=Object(s.x)(e)}))})).then((function(){var e,c="",a=0,o=A(t.quasis);try{for(o.s();!(e=o.n()).done;){var i=e.value;c+=i.value?i.value.cooked:"",!1===i.tail&&(c+=r[a]?r[a]:"",a++)}}catch(u){o.e(u)}finally{o.f()}n(c)}))}))}(e,t);case"Identifier":return B(e,t);case"MemberExpression":return function(e,t){try{return M(e,t.object).then((function(n){try{return null===n?Object(E.s)(new Error(Object(f.f)(t,"RUNTIME","NOTFOUND"))):!1===t.computed?"Identifier"===t.property.type?n instanceof a.a||n instanceof o.a?Object(E.t)(n.field(t.property.name)):n instanceof w.a?Object(E.t)(V(n,t.property.name,e,t)):Object(E.s)(new Error(Object(f.f)(t,"RUNTIME","INVALIDTYPE"))):Object(E.s)(new Error(Object(f.f)(t,"RUNTIME","INVALIDTYPE"))):M(e,t.property).then((function(r){return Object(E.c)((function(c,i){if(n instanceof a.a||n instanceof o.a)Object(s.A)(r)?c(n.field(r)):i(new Error(Object(f.f)(t,"RUNTIME","INVALIDTYPE")));else if(n instanceof w.a)Object(s.A)(r)?c(V(n,r,e,t)):i(new Error(Object(f.f)(t,"RUNTIME","INVALIDTYPE")));else if(Object(s.u)(n))if(Object(s.E)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new Error(Object(f.f)(t,"RUNTIME","OUTOFBOUNDS"));c(n[r])}else i(new Error(Object(f.f)(t,"RUNTIME","INVALIDTYPE")));else if(Object(s.v)(n))if(Object(s.E)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length()+r),r>=n.length()||r<0)throw new Error(Object(f.f)(t,"RUNTIME","OUTOFBOUNDS"));c(n.get(r))}else i(new Error(Object(f.f)(t,"RUNTIME","INVALIDTYPE")));else if(Object(s.A)(n))if(Object(s.E)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new Error(Object(f.f)(t,"RUNTIME","OUTOFBOUNDS"));c(n[r])}else i(new Error(Object(f.f)(t,"RUNTIME","INVALIDTYPE")));else i(new Error(Object(f.f)(t,"RUNTIME","INVALIDTYPE")))}))}))}catch(r){return P(r)}}))}catch(n){return P(n)}}(e,t);case"Literal":return C(t.value);case"CallExpression":return function(e,t){try{if("Identifier"!==t.callee.type)return P(Object(f.f)(t,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==e.localScope&&void 0!==e.localScope[t.callee.name.toLowerCase()]){var r=e.localScope[t.callee.name.toLowerCase()];return r.value instanceof s.n?r.value.fn(e,t):r.value instanceof i.a?X(e,t,r.value.definition):P(Object(f.f)(t,"RUNTIME","NOTAFUNCTION"))}if(void 0!==e.globalScope[t.callee.name.toLowerCase()]){var c=e.globalScope[t.callee.name.toLowerCase()];return c.value instanceof s.n?c.value.fn(e,t):c.value instanceof i.a?X(e,t,c.value.definition):P(Object(f.f)(t,"RUNTIME","NOTAFUNCTION"))}return P(Object(f.f)(t,"RUNTIME","NOTFOUND"))}catch(n){return P(n)}}(e,t);case"UnaryExpression":return function(e,t){try{return M(e,t.argument).then((function(e){return Object(E.c)((function(n,r){Object(s.C)(e)&&"!"===t.operator?n(!e):"-"===t.operator?n(-1*Object(s.N)(e)):"+"===t.operator?n(1*Object(s.N)(e)):"~"===t.operator?n(~Object(s.N)(e)):r(new Error(Object(f.f)(t,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR")))}))}))}catch(n){return P(n)}}(e,t);case"BinaryExpression":return function(e,t){try{return Object(E.b)([M(e,t.left),M(e,t.right)]).then((function(e){return Object(E.c)((function(n,r){var c=e[0],a=e[1];switch(t.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":n(Object(s.D)(Object(s.N)(c),Object(s.N)(a),t.operator));case"==":n(Object(s.y)(c,a));break;case"!=":n(!Object(s.y)(c,a));break;case"<":case">":case"<=":case">=":n(Object(s.B)(c,a,t.operator));break;case"+":Object(s.A)(c)||Object(s.A)(a)?n(Object(s.x)(c)+Object(s.x)(a)):n(Object(s.N)(c)+Object(s.N)(a));break;case"-":n(Object(s.N)(c)-Object(s.N)(a));break;case"*":n(Object(s.N)(c)*Object(s.N)(a));break;case"/":n(Object(s.N)(c)/Object(s.N)(a));break;case"%":n(Object(s.N)(c)%Object(s.N)(a));break;default:r(new Error(Object(f.f)(t,"RUNTIME","OPERATORNOTRECOGNISED")))}}))}))}catch(n){return P(n)}}(e,t);case"LogicalExpression":return function(e,t){return Object(E.c)((function(n,r){"AssignmentExpression"!==t.left.type&&"UpdateExpression"!==t.left.type?"AssignmentExpression"!==t.right.type&&"UpdateExpression"!==t.right.type?M(e,t.left).then((function(c){try{if(!Object(s.C)(c))throw new Error(Object(f.f)(t,"RUNTIME","ONLYBOOLEAN"));switch(t.operator){case"||":!0===c?n(c):M(e,t.right).then((function(e){try{if(!Object(s.C)(e))throw new Error(Object(f.f)(t,"RUNTIME","ONLYORORAND"));n(e)}catch(c){r(c)}}),r);break;case"&&":!1===c?n(c):M(e,t.right).then((function(e){try{if(!Object(s.C)(e))throw new Error(Object(f.f)(t,"RUNTIME","ONLYORORAND"));n(e)}catch(c){r(c)}}),r);break;default:throw new Error(Object(f.f)(t,"RUNTIME","ONLYORORAND"))}}catch(a){r(a)}}),r):r(new Error(Object(f.f)(t.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))):r(new Error(Object(f.f)(t.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,t);case"ConditionalExpression":return P(Object(f.f)(t,"RUNTIME","NOTSUPPORTED"));case"ArrayExpression":return function(e,t){try{for(var r=[],c=0;c<t.elements.length;c++)r.push(M(e,t.elements[c]));return Object(E.b)(r).then((function(e){return Object(E.c)((function(n,r){for(var c=0;c<e.length;c++){if(Object(s.w)(e[c]))return void r(new Error(Object(f.f)(t,"RUNTIME","FUNCTIONCONTEXTILLEGAL")));e[c]===s.P&&(e[c]=null)}n(e)}))}))}catch(n){return P(n)}}(e,t);case"ObjectExpression":return function(e,t){try{for(var n=[],r=0;r<t.properties.length;r++)n.push(M(e,t.properties[r]));return Object(E.b)(n).then((function(e){return Object(E.c)((function(t){for(var n={},r=0;r<e.length;r++){var c=e[r];if(Object(s.w)(c.value))throw new Error("Illegal Argument");if(!1===Object(s.A)(c.key))throw new Error("Illegal Argument");c.value===s.P?n[c.key.toString()]=null:n[c.key.toString()]=c.value}var o=new a.a(n);o.immutable=!1,t(o)}))}))}catch(c){return P(c)}}(e,t);case"Property":return function(e,t){try{return M(e,t.value).then((function(n){return Object(E.c)((function(r){"Identifier"===t.key.type?r({key:t.key.name,value:n}):M(e,t.key).then((function(e){r({key:e,value:n})}))}))}))}catch(n){return Object(E.s)(n)}}(e,t);default:return P(Object(f.f)(t,"RUNTIME","UNREOGNISED"))}}catch(r){return P(r)}}function D(e,t,n){try{return M(e,t.body).then((function(r){try{return n.lastAction=r,n.lastAction===s.G||n.lastAction instanceof s.r?(n.testResult=!1,Object(E.t)(n)):null!==t.update?M(e,t.update).then((function(){return Object(E.t)(n)})):Object(E.t)(n)}catch(c){return Object(E.s)(c)}}))}catch(r){return Object(E.s)(r)}}function k(e,t,n,r,c,a){try{(function(e,t,n){try{return null!==t.test?M(e,t.test).then((function(r){try{return!0===e.abortSignal.aborted?Object(E.s)(new Error("Cancelled")):(n.testResult=r,!1===n.testResult?Object(E.t)(n):!0!==n.testResult?Object(E.s)(new Error(Object(f.f)(t,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))):D(e,t,n))}catch(c){return Object(E.s)(c)}})):D(e,t,n)}catch(r){return Object(E.s)(r)}})(e,t,n).then((function(){try{!0===n.testResult?++a>100?(a=0,setTimeout((function(){k(e,t,n,r,c,a)}),0)):k(e,t,n,r,c,a):n.lastAction instanceof s.r?r(n.lastAction):r(s.P)}catch(o){c(o)}}),(function(e){c(e)}))}catch(o){c(o)}}function L(e,t,n,r,c,a){try{if(void 0===a&&(a="i"),0===n.length)return void r.resolve(s.P);!function e(t,n,r,c,a,o,i,u,l,f){try{if(c<=o)return void u(s.P);a.value="k"===i?r[o]:o,M(t,n.body).then((function(b){try{b instanceof s.r?u(b):b===s.G?u(s.P):++f>100?(f=0,setTimeout((function(){e(t,n,r,c,a,o+1,i,u,l,f)}),0)):e(t,n,r,c,a,o+1,i,u,l,f)}catch(h){l(h)}}),(function(e){l(e)}))}catch(b){l(b)}}(e,t,n,n.length,c,0,a,(function(e){r.resolve(e)}),(function(e){r.reject(e)}),0)}catch(o){r.reject(o)}}function _(e,t,n,r){switch(t){case"=":return e===s.P?null:e;case"/=":return Object(s.N)(n)/Object(s.N)(e);case"*=":return Object(s.N)(n)*Object(s.N)(e);case"-=":return Object(s.N)(n)-Object(s.N)(e);case"+=":return Object(s.A)(n)||Object(s.A)(e)?Object(s.x)(n)+Object(s.x)(e):Object(s.N)(n)+Object(s.N)(e);case"%=":return Object(s.N)(n)%Object(s.N)(e);default:throw new Error(Object(f.f)(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}var G=0;function V(e,t,n,r){var c;switch(t=t.toLowerCase()){case"hasz":var o=e.hasZ;return void 0!==o&&o;case"hasm":var i=e.hasM;return void 0!==i&&i;case"spatialreference":var s=e.spatialReference._arcadeCacheId;if(void 0===s){var b=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(b=!1),b&&(G++,e.spatialReference._arcadeCacheId=G,s=G)}var h=new a.a({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==s&&(h._arcadeCacheId="SPREF"+s.toString()),h}switch(e.type){case"extent":switch(t){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":var O=e[t];return void 0!==O?O:null;case"type":return"Extent"}break;case"polygon":switch(t){case"rings":return void 0===(c=e.cache._arcadeCacheId)&&(c=++G,e.cache._arcadeCacheId=c),new u.a(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,c);case"type":return"Polygon"}break;case"point":switch(t){case"x":case"y":case"z":case"m":return void 0!==e[t]?e[t]:null;case"type":return"Point"}break;case"polyline":switch(t){case"paths":return void 0===(c=e.cache._arcadeCacheId)&&(c=++G,e.cache._arcadeCacheId=c),new u.a(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,c);case"type":return"Polyline"}break;case"multipoint":switch(t){case"points":return void 0===(c=e.cache._arcadeCacheId)&&(c=++G,e.cache._arcadeCacheId=c),new l.a(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,c,1);case"type":return"Multipoint"}}throw new Error(Object(f.f)(r,"RUNTIME","PROPERTYNOTFOUND"))}function B(e,t){return Object(E.c)((function(n,r){var c=t.name.toLowerCase();if(null===e.localScope||void 0===e.localScope[c])if(void 0===e.globalScope[c])r(new Error(Object(f.f)(t,"RUNTIME","VARIABLENOTFOUND")));else{var a=e.globalScope[c];!0===a.valueset?n(a.value):null!==a.d?a.d.then(n,r):(a.d=M(e,a.node),a.d.then((function(e){try{a.value=e,a.valueset=!0,n(e)}catch(c){r(c)}}),r))}else{var o=e.localScope[c];!0===o.valueset?n(o.value):null!==o.d?o.d.then(n,r):(o.d=M(e,o.node),o.d.then((function(e){try{o.value=e,o.valueset=!0,n(e)}catch(c){r(c)}}),r))}}))}var Y={};function H(e){return null===e?"":Object(s.u)(e)||Object(s.v)(e)?"Array":Object(s.I)(e)?"Date":Object(s.A)(e)?"String":Object(s.C)(e)?"Boolean":Object(s.E)(e)?"Number":e instanceof c.a?"Attachment":e instanceof r.a?"Portal":e instanceof a.a?"Dictionary":e instanceof o.a?"Feature":e instanceof m.a?"Point":e instanceof I.a?"Polygon":e instanceof S.a?"Polyline":e instanceof N.a?"Multipoint":e instanceof y.a?"Extent":Object(s.w)(e)?"Function":Object(s.K)(e)?"FeatureSet":Object(s.L)(e)?"FeatureSetCollection":e===s.P?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function z(e,t){try{var n=e.length,r=Math.floor(n/2);return 0===n?Object(E.t)([]):1===n?Object(E.t)([e[0]]):Object(E.c)((function(c,a){var o=[z(e.slice(0,r),t),z(e.slice(r,n),t)];Object(E.b)(o).then((function(e){try{(function e(t,n,r,c){return Object(E.c)((function(a,o){var i=c;t.length>0||n.length>0?t.length>0&&n.length>0?r(t[0],n[0]).then((function(u){try{isNaN(u)&&(u=1),u<=0?(i.push(t[0]),t=t.slice(1)):(i.push(n[0]),n=n.slice(1)),e(t,n,r,c).then(a,o)}catch(l){o(l)}}),o):t.length>0?(i.push(t[0]),e(t=t.slice(1),n,r,c).then(a,o)):n.length>0&&(i.push(n[0]),n=n.slice(1),e(t,n,r,c).then(a,o)):a(c)}))})(e[0],e[1],t,[]).then(c,a)}catch(n){a(n)}}),a)}))}catch(c){return P(c)}}function q(e,t){var n=e.length,r=Math.floor(n/2);return t||(t=function(e,t){return e<t?-1:e===t?0:1}),0===n?[]:1===n?[e[0]]:function(e,t,n){for(var r=[];e.length>0||t.length>0;)if(e.length>0&&t.length>0){var c=n(e[0],t[0]);isNaN(c)&&(c=1),c<=0?(r.push(e[0]),e=e.slice(1)):(r.push(t[0]),t=t.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):t.length>0&&(r.push(t[0]),t=t.slice(1));return r}(q(e.slice(0,r),t),q(e.slice(r,n),t),t)}function J(e,t,n){try{var r=e.body;if(n.length!==e.params.length)return P(new Error("Invalid Parameter calls to function."));for(var c=0;c<n.length;c++){var a=e.params[c];"Identifier"===a.type&&(t.localScope[a.name.toLowerCase()]={d:null,value:n[c],valueset:!0,node:null})}return M(t,r).then((function(e){return Object(E.c)((function(t,n){e instanceof s.r?t(e.value):e!==s.G?e!==s.H?t(e instanceof s.i?e.value:e):n(new Error("Cannot Continue from a Function")):n(new Error("Cannot Break from a Function"))}))}))}catch(o){return Object(E.s)(o)}}function X(e,t,n){return F(e,t,(function(t,r,c){var a={spatialReference:e.spatialReference,services:e.services,console:e.console,lrucache:e.lrucache,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:e.depthCounter+1};if(a.depthCounter>64)throw new Error("Exceeded maximum function depth");return J(n,a,c)}))}function Q(e){return function(){var t={abortSignal:e.context.abortSignal,spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,interceptor:e.context.interceptor,services:e.context.services,localScope:{},globalScope:e.context.globalScope,depthCounter:e.context.depthCounter+1};if(t.depthCounter>64)throw new Error("Exceeded maximum function depth");return J(e.definition,t,arguments)}}Object(h.a)(Y,x),Object(O.a)(Y,x),Object(g.a)(Y,x),Object(j.a)(Y,x),Object(p.a)(Y,x),Object(v.a)(Y,x),Object(d.registerFunctions)({functions:Y,compiled:!1,signatures:null,failDefferred:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:"async",standardFunction:x,standardFunctionAsync:F}),Y.typeof=function(e,t){return x(e,t,(function(e,t,n){Object(s.J)(n,1,1);var r=H(n[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},Y.iif=function(e,t){return Object(E.c)((function(n,r){Object(s.J)(null===t.arguments?[]:t.arguments,3,3),M(e,t.arguments[0]).then((function(c){try{if(!1===Object(s.C)(c))return void r(new Error("IF Function must have a boolean test condition"));Object(E.b)([M(e,t.arguments[1]),M(e,t.arguments[2])]).then((function(e){n(c?e[0]:e[1])}),r)}catch(a){r(a)}}),r)}))},Y.decode=function(e,t){return Object(E.c)((function(n,r){t.arguments.length<2?r(new Error("Missing Parameters")):2!==t.arguments.length?(t.arguments.length-1)%2!=0?M(e,t.arguments[0]).then((function(c){try{(function e(t,n,r,c){return Object(E.c)((function(a,o){M(t,n.arguments[r]).then((function(i){try{if(Object(s.y)(i,c))return void M(t,n.arguments[r+1]).then(a,o);var u=n.arguments.length-r;return 1===u?void M(t,n.arguments[r]).then(a,o):(2===u&&a(null),3===u?void M(t,n.arguments[r+2]).then(a,o):void e(t,n,r+2,c).then(a,o))}catch(l){o(l)}}),o)}))})(e,t,1,c).then(n,r)}catch(a){r(a)}}),r):r(new Error("Must have a default value result.")):M(e,t.arguments[1]).then(n,r)}))},Y.when=function(e,t){try{return t.arguments.length<3?P("Missing Parameters"):t.arguments.length%2==0?P("Must have a default value result."):M(e,t.arguments[0]).then((function(n){return Object(E.c)((function(r,c){!1!==Object(s.C)(n)?function e(t,n,r,c){return Object(E.c)((function(a,o){!0===c?M(t,n.arguments[r+1]).then(a,o):3==n.arguments.length-r?M(t,n.arguments[r+2]).then(a,o):M(t,n.arguments[r+2]).then((function(c){try{if(!1===Object(s.C)(c))return void o(new Error("WHEN needs boolean test conditions"));e(t,n,r+2,c).then(a,o)}catch(i){o(i)}}))}))}(e,t,0,n).then(r,c):c(new Error("WHEN needs boolean test conditions"))}))}))}catch(n){return P(n)}},Y.sort=function(e,t){return F(e,t,(function(e,t,n){Object(s.J)(n,1,2);var r=n[0];if(Object(s.v)(r)&&(r=r.toArray()),!1===Object(s.u)(r))return P(Error("Illegal Argument"));if(n.length>1)return!1===Object(s.w)(n[1])?P(Error("Illegal Argument")):z(r,Q(n[1]));var c=r;if(0===c.length)return Object(E.t)([]);for(var a={},o=0;o<c.length;o++){var i=H(c[o]);""!==i&&(a[i]=!0)}if(!0===a.Array||!0===a.Dictionary||!0===a.Feature||!0===a.Point||!0===a.Polygon||!0===a.Polyline||!0===a.Multipoint||!0===a.Extent||!0===a.Function)return Object(E.t)(c.slice(0));var u=0,l="";for(var f in a)u++,l=f;return u>1||"String"===l?c=q(c,(function(e,t){if(null==e||e===s.P)return null==t||t===s.P?0:1;if(null==t||t===s.P)return-1;var n=Object(s.x)(e),r=Object(s.x)(t);return n<r?-1:n===r?0:1})):"Number"===l?c=q(c,(function(e,t){return e-t})):"Boolean"===l?c=q(c,(function(e,t){return e===t?0:t?-1:1})):"Date"===l&&(c=q(c,(function(e,t){return t-e}))),Object(E.t)(c)}))};var K={failDefferred:P,resolveDeffered:C,fixSpatialReference:s.z,parseArguments:U,standardFunction:x,standardFunctionAsync:F,evaluateIdentifier:B,arcadeCustomFunction:Q};for(var Z in Y)Y[Z]={value:new s.n(Y[Z]),valueset:!0,node:null};var W=function(){};function $(e){console.log(e)}(W.prototype=Y).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},W.prototype.pi={value:Math.PI,valueset:!0,node:null};var ee=K;function te(e){for(var t={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:x,standardFunctionAsync:F,failDefferred:P,evaluateIdentifier:B,arcadeCustomFunctionHandler:Q},n=0;n<e.length;n++)e[n].registerFunctions(t);for(var r in t.functions)Y[r]={value:new s.n(t.functions[r]),valueset:!0,node:null},W.prototype[r]=Y[r];for(var c=0;c<t.signatures.length;c++)Object(f.a)(t.signatures[c],"async")}function ne(e,t){var n=t.spatialReference;null==n&&(n=new T.a({wkid:102100}));var r=function(e,t){var n=new W;null==e&&(e={}),null==t&&(t={});var r=new a.a({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});for(var c in r.immutable=!1,n.textformatting={value:r,valueset:!0,node:null},t)n[c]={value:new s.n(t[c]),native:!0,valueset:!0,node:null};for(var i in e)e[i]&&"esri.Graphic"===e[i].declaredClass?n[i]={value:o.a.createFromGraphic(e[i]),valueset:!0,node:null}:n[i]={value:e[i],valueset:!0,node:null};return n}(t.vars,t.customfunctions);return M({spatialReference:n,services:t.services,abortSignal:void 0===t.abortSignal||null===t.abortSignal?{aborted:!1}:t.abortSignal,globalScope:r,console:t.console?t.console:$,lrucache:t.lrucache,interceptor:t.interceptor,localScope:null,depthCounter:1},e.body[0].body).then((function(e){return Object(E.c)((function(t,n){e instanceof s.r&&(e=e.value),e instanceof s.i&&(e=e.value),e===s.P&&(e=null),e!==s.G?e!==s.H?e instanceof s.n||e instanceof i.a?n(new Error("Cannot return FUNCTION")):t(e):n(new Error("Cannot return CONTINUE")):n(new Error("Cannot return BREAK"))}))}))}function re(e,t){return Object(f.c)(e)}function ce(e,t){return Object(f.j)(e,t,"full")}function ae(e,t){return Object(f.h)(e,t)}function oe(e,t){return Object(f.g)(e,t)}function ie(e){return Object(f.d)(e)}}}]);
//# sourceMappingURL=69-ee8ee407fab782a81909.js.map