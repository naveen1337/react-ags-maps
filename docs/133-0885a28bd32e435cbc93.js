(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{zzXL:function(e,t,r){"use strict";r.r(t);var n,i=r("eijD"),a=r("mK0O"),o=r("hisu"),c=r("yBJb"),l=r("CHlC"),s=r("kMo5"),b=r("P+uj"),p=r("NthX"),u=r.n(p),d=r("dQW7"),y=(r("ZTBZ"),r("hKEQ")),f=(r("YRYL"),r("DsdM"),r("c6bU"),r("IvZe"),r("6yFL"),r("vU4c")),j=r("h+Bk"),O=r("qCZy"),v=r("8QvB"),m=r("DGz/"),h=r("fb8N"),g=r("Mp7X"),w=r("8jRW"),I=r("TM+E"),S=r("7im+"),R=r("d4jZ"),k=r("IH5m"),x=r("xAIp"),P=(r("J4Pc"),r("wckI")),D=r("mp5+"),F=r("iaHD"),T=r("jr4m"),N=r("s9cN"),E=r("lrNM"),L=r("QZQ7"),J=r("1eRv"),M=r("9P7x"),U=r("oTsO"),B=r("44so"),C=r("2eXi"),W=r("wJzb"),_=r("SU3d"),A=r("NRoO"),z=r("hokI"),G=r("OhIr"),Q=r("DuP7"),Z=r("BG/N"),q=r("/3M5"),X=r("0n+b");function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(b.a)(e);if(t){var i=Object(b.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var V=n=function(e){Object(l.a)(r,e);var t=H(r);function r(){var e;return Object(o.a)(this,r),(e=t.apply(this,arguments)).age=null,e.ageReceived=null,e.displayCount=null,e.maxObservations=1,e}return Object(c.a)(r,[{key:"clone",value:function(){return new n({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}}]),r}(X.a);Object(d.a)([Object(x.b)({type:Number,json:{write:!0}})],V.prototype,"age",void 0),Object(d.a)([Object(x.b)({type:Number,json:{write:!0}})],V.prototype,"ageReceived",void 0),Object(d.a)([Object(x.b)({type:Number,json:{write:!0}})],V.prototype,"displayCount",void 0),Object(d.a)([Object(x.b)({type:Number,json:{write:!0}})],V.prototype,"maxObservations",void 0);var Y=V=n=Object(d.a)([Object(F.a)("esri.layers.support.PurgeOptions")],V),K=r("okYM"),$=r("hdDo"),ee=r("lMmC"),te=r("RMqu"),re=r("YHXj"),ne=r("nd5+");function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(b.a)(e);if(t){var i=Object(b.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var ce=I.a.getLogger("esri.layers.StreamLayer"),le=Object(G.a)(),se=function(e){Object(l.a)(n,e);var t,r=oe(n);function n(){var e;Object(o.a)(this,n);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(e=r.call.apply(r,[this].concat(i))).copyright=null,e.definitionExpression=null,e.displayField=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.fieldsIndex=null,e.geometryDefinition=null,e.geometryType=null,e.labelsVisible=!0,e.labelingInfo=null,e.legendEnabled=!0,e.maxReconnectionAttempts=0,e.maxReconnectionInterval=20,e.maxScale=0,e.minScale=0,e.objectIdField=null,e.operationalLayerType="ArcGISStreamLayer",e.popupEnabled=!0,e.popupTemplate=null,e.purgeOptions=new Y,e.screenSizePerspectiveEnabled=!0,e.sourceJSON=null,e.spatialReference=re.a.WGS84,e.type="stream",e.url=null,e.updateInterval=300,e.webSocketUrl=null,e}return Object(c.a)(n,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?ae({url:e},t):e}},{key:"load",value:function(e){var t=this;if(!("WebSocket"in w.a))return this.addResolvingPromise(Promise.reject(new g.a("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);var r=Object(S.i)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(k.u).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"readFeatureReduction",value:function(e,t){return Object(z.a)(e,t)}},{key:"writeWebSceneFeatureReduction",value:function(e,t,r,n){Object(z.c)(e,t,"layerDefinition.featureReduction",n)}},{key:"renderer",set:function(e){Object(Q.j)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var n=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(n){var i=Object(O.b)(n,t,r)||void 0;return i||ce.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),i}if(t.defaultSymbol)return t.types&&t.types.length?new j.a({defaultSymbol:be(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:be(e.symbol,e,r)}}))}):new f.a({symbol:be(t.defaultSymbol,t,r)})}},{key:"writeRenderer",value:function(e,t,r,n){Object(O.c)(e,t,r,n)}},{key:"writeWebSceneRenderer",value:function(e,t,r,n){Object(O.c)(e,t,"layerDefinition.drawingInfo.renderer",n)}},{key:"createPopupTemplate",value:function(e){return Object(ee.a)(this,e)}},{key:"createQuery",value:function(){var e=new $.a;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}},{key:"getFieldDomain",value:function(e,t){if(!this.fields)return null;var r=null;return this.fields.some((function(t){return t.name===e&&(r=t.domain),!!r})),r}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"_fetchService",value:(t=Object(i.a)(u.a.mark((function e(t){var r,n,i,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.webSocketUrl){e.next=12;break}if(null!=(n=this.timeInfo)&&n.trackIdField){e.next=3;break}throw new g.a("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");case 3:if(this.objectIdField){e.next=5;break}throw new g.a("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");case 5:if(this.fields){e.next=7;break}throw new g.a("stream-layer:missing-metadata","The stream layer fields must be specified.");case 7:if(this.geometryType){e.next=9;break}throw new g.a("stream-layer:missing-metadata","The stream layer geometryType must be specified.");case 9:this.url=this.webSocketUrl,e.next=18;break;case 12:if(this.sourceJSON){e.next=18;break}return e.next=15,Object(m.default)(this.parsedUrl.path,{query:ae({f:"json"},this.parsedUrl.query),responseType:"json",signal:t});case 15:i=e.sent,a=i.data,this.sourceJSON=a;case 18:return e.abrupt("return",(this.sourceJSON=ae(ae({},null!=(r=this.sourceJSON)?r:{}),{},{objectIdField:"__esri_stream_id__"}),this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}),Object(Q.j)(this.renderer,this.fieldsIndex),Object(Q.k)(this.timeInfo,this.fieldsIndex),Object(K.a)(this,{origin:"service"})));case 19:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),n}(Object(M.a)(Object(_.a)(Object(W.a)(Object(C.a)(Object(J.a)(Object(U.a)(Object(B.a)(Object(R.a)(L.a)))))))));Object(d.a)([Object(x.b)({type:String})],se.prototype,"copyright",void 0),Object(d.a)([Object(x.b)({readOnly:!0})],se.prototype,"defaultPopupTemplate",null),Object(d.a)([Object(x.b)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],se.prototype,"definitionExpression",void 0),Object(d.a)([Object(x.b)({type:String})],se.prototype,"displayField",void 0),Object(d.a)([Object(x.b)({type:te.a})],se.prototype,"elevationInfo",void 0),Object(d.a)([Object(D.a)("featureReduction",["layerDefinition.featureReduction"])],se.prototype,"readFeatureReduction",null),Object(d.a)([Object(T.a)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:z.b}})],se.prototype,"writeWebSceneFeatureReduction",null),Object(d.a)([Object(x.b)(le.fields)],se.prototype,"fields",void 0),Object(d.a)([Object(x.b)(le.fieldsIndex)],se.prototype,"fieldsIndex",void 0),Object(d.a)([Object(x.b)({type:ne.a})],se.prototype,"geometryDefinition",void 0),Object(d.a)([Object(x.b)({type:E.a.apiValues,json:{read:{reader:E.a.read}}})],se.prototype,"geometryType",void 0),Object(d.a)([Object(x.b)(A.d)],se.prototype,"labelsVisible",void 0),Object(d.a)([Object(x.b)({type:[Z.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:q.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],se.prototype,"labelingInfo",void 0),Object(d.a)([Object(x.b)(A.e)],se.prototype,"legendEnabled",void 0),Object(d.a)([Object(x.b)({type:["show","hide"]})],se.prototype,"listMode",void 0),Object(d.a)([Object(x.b)({type:P.a})],se.prototype,"maxReconnectionAttempts",void 0),Object(d.a)([Object(x.b)({type:P.a})],se.prototype,"maxReconnectionInterval",void 0),Object(d.a)([Object(x.b)(A.f)],se.prototype,"maxScale",void 0),Object(d.a)([Object(x.b)(A.g)],se.prototype,"minScale",void 0),Object(d.a)([Object(x.b)({type:String})],se.prototype,"objectIdField",void 0),Object(d.a)([Object(x.b)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],se.prototype,"operationalLayerType",void 0),Object(d.a)([Object(x.b)(A.j)],se.prototype,"popupEnabled",void 0),Object(d.a)([Object(x.b)({type:y.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],se.prototype,"popupTemplate",void 0),Object(d.a)([Object(x.b)({type:Y})],se.prototype,"purgeOptions",void 0),Object(d.a)([Object(x.b)({types:v.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],se.prototype,"renderer",null),Object(d.a)([Object(D.a)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Object(D.a)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],se.prototype,"readRenderer",null),Object(d.a)([Object(T.a)("renderer")],se.prototype,"writeRenderer",null),Object(d.a)([Object(T.a)("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:v.b}})],se.prototype,"writeWebSceneRenderer",null),Object(d.a)([Object(x.b)(A.m)],se.prototype,"screenSizePerspectiveEnabled",void 0),Object(d.a)([Object(x.b)({type:re.a,json:{origins:{service:{read:{source:"spatialReference"}}}}})],se.prototype,"spatialReference",void 0),Object(d.a)([Object(x.b)({json:{read:!1}})],se.prototype,"type",void 0),Object(d.a)([Object(x.b)(A.n)],se.prototype,"url",void 0),Object(d.a)([Object(x.b)({type:Number})],se.prototype,"updateInterval",void 0),Object(d.a)([Object(x.b)({type:String})],se.prototype,"webSocketUrl",void 0),se=Object(d.a)([Object(F.a)("esri.layers.StreamLayer")],se);var be=Object(N.b)({types:h.i}),pe=se;t.default=pe}}]);
//# sourceMappingURL=133-0885a28bd32e435cbc93.js.map